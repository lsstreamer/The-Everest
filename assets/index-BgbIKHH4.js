var ese=Object.defineProperty,tse=Object.defineProperties;var rse=Object.getOwnPropertyDescriptors;var Wx=Object.getOwnPropertySymbols;var YO=Object.prototype.hasOwnProperty,qO=Object.prototype.propertyIsEnumerable;var ZO=Math.pow,KO=(t,e,r)=>e in t?ese(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ca=(t,e)=>{for(var r in e||(e={}))YO.call(e,r)&&KO(t,r,e[r]);if(Wx)for(var r of Wx(e))qO.call(e,r)&&KO(t,r,e[r]);return t},_f=(t,e)=>tse(t,rse(e));var Tv=(t,e)=>{var r={};for(var n in t)YO.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Wx)for(var n of Wx(t))e.indexOf(n)<0&&qO.call(t,n)&&(r[n]=t[n]);return r};var nse=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qu=(t,e,r)=>new Promise((n,i)=>{var a=l=>{try{s(r.next(l))}catch(u){i(u)}},o=l=>{try{s(r.throw(l))}catch(u){i(u)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,o);s((r=r.apply(t,e)).next())});var p$e=nse(Tae=>{function nK(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function WP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gE={exports:{}},ny={},mE={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JO;function ise(){if(JO)return qr;JO=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function h(H){return H===null||typeof H!="object"?null:(H=f&&H[f]||H["@@iterator"],typeof H=="function"?H:null)}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,v={};function g(H,X,te){this.props=H,this.context=X,this.refs=v,this.updater=te||d}g.prototype.isReactComponent={},g.prototype.setState=function(H,X){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,X,"setState")},g.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function m(){}m.prototype=g.prototype;function x(H,X,te){this.props=H,this.context=X,this.refs=v,this.updater=te||d}var S=x.prototype=new m;S.constructor=x,p(S,g.prototype),S.isPureReactComponent=!0;var b=Array.isArray,T=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(H,X,te){var Y,ee={},se=null,ne=null;if(X!=null)for(Y in X.ref!==void 0&&(ne=X.ref),X.key!==void 0&&(se=""+X.key),X)T.call(X,Y)&&!E.hasOwnProperty(Y)&&(ee[Y]=X[Y]);var le=arguments.length-2;if(le===1)ee.children=te;else if(1<le){for(var pe=Array(le),Se=0;Se<le;Se++)pe[Se]=arguments[Se+2];ee.children=pe}if(H&&H.defaultProps)for(Y in le=H.defaultProps,le)ee[Y]===void 0&&(ee[Y]=le[Y]);return{$$typeof:t,type:H,key:se,ref:ne,props:ee,_owner:w.current}}function A(H,X){return{$$typeof:t,type:H.type,key:X,ref:H.ref,props:H.props,_owner:H._owner}}function R(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function L(H){var X={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return X[te]})}var I=/\/+/g;function N(H,X){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):X.toString(36)}function k(H,X,te,Y,ee){var se=typeof H;(se==="undefined"||se==="boolean")&&(H=null);var ne=!1;if(H===null)ne=!0;else switch(se){case"string":case"number":ne=!0;break;case"object":switch(H.$$typeof){case t:case e:ne=!0}}if(ne)return ne=H,ee=ee(ne),H=Y===""?"."+N(ne,0):Y,b(ee)?(te="",H!=null&&(te=H.replace(I,"$&/")+"/"),k(ee,X,te,"",function(Se){return Se})):ee!=null&&(R(ee)&&(ee=A(ee,te+(!ee.key||ne&&ne.key===ee.key?"":(""+ee.key).replace(I,"$&/")+"/")+H)),X.push(ee)),1;if(ne=0,Y=Y===""?".":Y+":",b(H))for(var le=0;le<H.length;le++){se=H[le];var pe=Y+N(se,le);ne+=k(se,X,te,pe,ee)}else if(pe=h(H),typeof pe=="function")for(H=pe.call(H),le=0;!(se=H.next()).done;)se=se.value,pe=Y+N(se,le++),ne+=k(se,X,te,pe,ee);else if(se==="object")throw X=String(H),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ne}function z(H,X,te){if(H==null)return H;var Y=[],ee=0;return k(H,Y,"","",function(se){return X.call(te,se,ee++)}),Y}function B(H){if(H._status===-1){var X=H._result;X=X(),X.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=X)}if(H._status===1)return H._result.default;throw H._result}var V={current:null},F={transition:null},$={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:F,ReactCurrentOwner:w};function W(){throw Error("act(...) is not supported in production builds of React.")}return qr.Children={map:z,forEach:function(H,X,te){z(H,function(){X.apply(this,arguments)},te)},count:function(H){var X=0;return z(H,function(){X++}),X},toArray:function(H){return z(H,function(X){return X})||[]},only:function(H){if(!R(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},qr.Component=g,qr.Fragment=r,qr.Profiler=i,qr.PureComponent=x,qr.StrictMode=n,qr.Suspense=l,qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,qr.act=W,qr.cloneElement=function(H,X,te){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Y=p({},H.props),ee=H.key,se=H.ref,ne=H._owner;if(X!=null){if(X.ref!==void 0&&(se=X.ref,ne=w.current),X.key!==void 0&&(ee=""+X.key),H.type&&H.type.defaultProps)var le=H.type.defaultProps;for(pe in X)T.call(X,pe)&&!E.hasOwnProperty(pe)&&(Y[pe]=X[pe]===void 0&&le!==void 0?le[pe]:X[pe])}var pe=arguments.length-2;if(pe===1)Y.children=te;else if(1<pe){le=Array(pe);for(var Se=0;Se<pe;Se++)le[Se]=arguments[Se+2];Y.children=le}return{$$typeof:t,type:H.type,key:ee,ref:se,props:Y,_owner:ne}},qr.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},qr.createElement=M,qr.createFactory=function(H){var X=M.bind(null,H);return X.type=H,X},qr.createRef=function(){return{current:null}},qr.forwardRef=function(H){return{$$typeof:s,render:H}},qr.isValidElement=R,qr.lazy=function(H){return{$$typeof:c,_payload:{_status:-1,_result:H},_init:B}},qr.memo=function(H,X){return{$$typeof:u,type:H,compare:X===void 0?null:X}},qr.startTransition=function(H){var X=F.transition;F.transition={};try{H()}finally{F.transition=X}},qr.unstable_act=W,qr.useCallback=function(H,X){return V.current.useCallback(H,X)},qr.useContext=function(H){return V.current.useContext(H)},qr.useDebugValue=function(){},qr.useDeferredValue=function(H){return V.current.useDeferredValue(H)},qr.useEffect=function(H,X){return V.current.useEffect(H,X)},qr.useId=function(){return V.current.useId()},qr.useImperativeHandle=function(H,X,te){return V.current.useImperativeHandle(H,X,te)},qr.useInsertionEffect=function(H,X){return V.current.useInsertionEffect(H,X)},qr.useLayoutEffect=function(H,X){return V.current.useLayoutEffect(H,X)},qr.useMemo=function(H,X){return V.current.useMemo(H,X)},qr.useReducer=function(H,X,te){return V.current.useReducer(H,X,te)},qr.useRef=function(H){return V.current.useRef(H)},qr.useState=function(H){return V.current.useState(H)},qr.useSyncExternalStore=function(H,X,te){return V.current.useSyncExternalStore(H,X,te)},qr.useTransition=function(){return V.current.useTransition()},qr.version="18.3.1",qr}var QO;function $P(){return QO||(QO=1,mE.exports=ise()),mE.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function ase(){if(ek)return ny;ek=1;var t=$P(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(s,l,u){var c,f={},h=null,d=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(d=l.ref);for(c in l)n.call(l,c)&&!a.hasOwnProperty(c)&&(f[c]=l[c]);if(s&&s.defaultProps)for(c in l=s.defaultProps,l)f[c]===void 0&&(f[c]=l[c]);return{$$typeof:e,type:s,key:h,ref:d,props:f,_owner:i.current}}return ny.Fragment=r,ny.jsx=o,ny.jsxs=o,ny}var tk;function ose(){return tk||(tk=1,gE.exports=ase()),gE.exports}var ve=ose(),D=$P();const bt=WP(D),bT=nK({__proto__:null,default:bt},[D]);var $x={},yE={exports:{}},Fo={},_E={exports:{}},xE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rk;function sse(){return rk||(rk=1,function(t){function e(F,$){var W=F.length;F.push($);e:for(;0<W;){var H=W-1>>>1,X=F[H];if(0<i(X,$))F[H]=$,F[W]=X,W=H;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var $=F[0],W=F.pop();if(W!==$){F[0]=W;e:for(var H=0,X=F.length,te=X>>>1;H<te;){var Y=2*(H+1)-1,ee=F[Y],se=Y+1,ne=F[se];if(0>i(ee,W))se<X&&0>i(ne,ee)?(F[H]=ne,F[se]=W,H=se):(F[H]=ee,F[Y]=W,H=Y);else if(se<X&&0>i(ne,W))F[H]=ne,F[se]=W,H=se;else break e}}return $}function i(F,$){var W=F.sortIndex-$.sortIndex;return W!==0?W:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=F)n(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=r(u)}}function b(F){if(v=!1,S(F),!p)if(r(l)!==null)p=!0,B(T);else{var $=r(u);$!==null&&V(b,$.startTime-F)}}function T(F,$){p=!1,v&&(v=!1,m(M),M=-1),d=!0;var W=h;try{for(S($),f=r(l);f!==null&&(!(f.expirationTime>$)||F&&!L());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var X=H(f.expirationTime<=$);$=t.unstable_now(),typeof X=="function"?f.callback=X:f===r(l)&&n(l),S($)}else n(l);f=r(l)}if(f!==null)var te=!0;else{var Y=r(u);Y!==null&&V(b,Y.startTime-$),te=!1}return te}finally{f=null,h=W,d=!1}}var w=!1,E=null,M=-1,A=5,R=-1;function L(){return!(t.unstable_now()-R<A)}function I(){if(E!==null){var F=t.unstable_now();R=F;var $=!0;try{$=E(!0,F)}finally{$?N():(w=!1,E=null)}}else w=!1}var N;if(typeof x=="function")N=function(){x(I)};else if(typeof MessageChannel!="undefined"){var k=new MessageChannel,z=k.port2;k.port1.onmessage=I,N=function(){z.postMessage(null)}}else N=function(){g(I,0)};function B(F){E=F,w||(w=!0,N())}function V(F,$){M=g(function(){F(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,B(T))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var W=h;h=$;try{return F()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=h;h=F;try{return $()}finally{h=W}},t.unstable_scheduleCallback=function(F,$,W){var H=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?H+W:H):W=H,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=W+X,F={id:c++,callback:$,priorityLevel:F,startTime:W,expirationTime:X,sortIndex:-1},W>H?(F.sortIndex=W,e(u,F),r(l)===null&&F===r(u)&&(v?(m(M),M=-1):v=!0,V(b,W-H))):(F.sortIndex=X,e(l,F),p||d||(p=!0,B(T))),F},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(F){var $=h;return function(){var W=h;h=$;try{return F.apply(this,arguments)}finally{h=W}}}}(xE)),xE}var nk;function lse(){return nk||(nk=1,_E.exports=sse()),_E.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik;function use(){if(ik)return Fo;ik=1;var t=$P(),e=lse();function r(y){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+y,C=1;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(y,_){o(y,_),o(y+"Capture",_)}function o(y,_){for(i[y]=_,y=0;y<_.length;y++)n.add(_[y])}var s=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function h(y){return l.call(f,y)?!0:l.call(c,y)?!1:u.test(y)?f[y]=!0:(c[y]=!0,!1)}function d(y,_,C,P){if(C!==null&&C.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return P?!1:C!==null?!C.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function p(y,_,C,P){if(_===null||typeof _=="undefined"||d(y,_,C,P))return!0;if(P)return!1;if(C!==null)switch(C.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v(y,_,C,P,O,U,K){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=P,this.attributeNamespace=O,this.mustUseProperty=C,this.propertyName=y,this.type=_,this.sanitizeURL=U,this.removeEmptyString=K}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new v(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var _=y[0];g[_]=new v(_,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new v(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new v(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new v(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new v(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new v(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new v(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new v(y,5,!1,y.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function x(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var _=y.replace(m,x);g[_]=new v(_,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var _=y.replace(m,x);g[_]=new v(_,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var _=y.replace(m,x);g[_]=new v(_,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new v(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new v(y,1,!1,y.toLowerCase(),null,!0,!0)});function S(y,_,C,P){var O=g.hasOwnProperty(_)?g[_]:null;(O!==null?O.type!==0:P||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(p(_,C,O,P)&&(C=null),P||O===null?h(_)&&(C===null?y.removeAttribute(_):y.setAttribute(_,""+C)):O.mustUseProperty?y[O.propertyName]=C===null?O.type===3?!1:"":C:(_=O.attributeName,P=O.attributeNamespace,C===null?y.removeAttribute(_):(O=O.type,C=O===3||O===4&&C===!0?"":""+C,P?y.setAttributeNS(P,_,C):y.setAttribute(_,C))))}var b=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),L=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),F=Symbol.iterator;function $(y){return y===null||typeof y!="object"?null:(y=F&&y[F]||y["@@iterator"],typeof y=="function"?y:null)}var W=Object.assign,H;function X(y){if(H===void 0)try{throw Error()}catch(C){var _=C.stack.trim().match(/\n( *(at )?)/);H=_&&_[1]||""}return`
`+H+y}var te=!1;function Y(y,_){if(!y||te)return"";te=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Pe){var P=Pe}Reflect.construct(y,[],_)}else{try{_.call()}catch(Pe){P=Pe}y.call(_.prototype)}else{try{throw Error()}catch(Pe){P=Pe}y()}}catch(Pe){if(Pe&&P&&typeof Pe.stack=="string"){for(var O=Pe.stack.split(`
`),U=P.stack.split(`
`),K=O.length-1,re=U.length-1;1<=K&&0<=re&&O[K]!==U[re];)re--;for(;1<=K&&0<=re;K--,re--)if(O[K]!==U[re]){if(K!==1||re!==1)do if(K--,re--,0>re||O[K]!==U[re]){var ue=`
`+O[K].replace(" at new "," at ");return y.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",y.displayName)),ue}while(1<=K&&0<=re);break}}}finally{te=!1,Error.prepareStackTrace=C}return(y=y?y.displayName||y.name:"")?X(y):""}function ee(y){switch(y.tag){case 5:return X(y.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return y=Y(y.type,!1),y;case 11:return y=Y(y.type.render,!1),y;case 1:return y=Y(y.type,!0),y;default:return""}}function se(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case E:return"Fragment";case w:return"Portal";case A:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case L:return(y.displayName||"Context")+".Consumer";case R:return(y._context.displayName||"Context")+".Provider";case I:var _=y.render;return y=y.displayName,y||(y=_.displayName||_.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case z:return _=y.displayName||null,_!==null?_:se(y.type)||"Memo";case B:_=y._payload,y=y._init;try{return se(y(_))}catch(C){}}return null}function ne(y){var _=y.type;switch(y.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=_.render,y=y.displayName||y.name||"",_.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(_);case 8:return _===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function le(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function pe(y){var _=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Se(y){var _=pe(y)?"checked":"value",C=Object.getOwnPropertyDescriptor(y.constructor.prototype,_),P=""+y[_];if(!y.hasOwnProperty(_)&&typeof C!="undefined"&&typeof C.get=="function"&&typeof C.set=="function"){var O=C.get,U=C.set;return Object.defineProperty(y,_,{configurable:!0,get:function(){return O.call(this)},set:function(K){P=""+K,U.call(this,K)}}),Object.defineProperty(y,_,{enumerable:C.enumerable}),{getValue:function(){return P},setValue:function(K){P=""+K},stopTracking:function(){y._valueTracker=null,delete y[_]}}}}function _e(y){y._valueTracker||(y._valueTracker=Se(y))}function Le(y){if(!y)return!1;var _=y._valueTracker;if(!_)return!0;var C=_.getValue(),P="";return y&&(P=pe(y)?y.checked?"true":"false":y.value),y=P,y!==C?(_.setValue(y),!0):!1}function Be(y){if(y=y||(typeof document!="undefined"?document:void 0),typeof y=="undefined")return null;try{return y.activeElement||y.body}catch(_){return y.body}}function Q(y,_){var C=_.checked;return W({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C!=null?C:y._wrapperState.initialChecked})}function tt(y,_){var C=_.defaultValue==null?"":_.defaultValue,P=_.checked!=null?_.checked:_.defaultChecked;C=le(_.value!=null?_.value:C),y._wrapperState={initialChecked:P,initialValue:C,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function je(y,_){_=_.checked,_!=null&&S(y,"checked",_,!1)}function Ye(y,_){je(y,_);var C=le(_.value),P=_.type;if(C!=null)P==="number"?(C===0&&y.value===""||y.value!=C)&&(y.value=""+C):y.value!==""+C&&(y.value=""+C);else if(P==="submit"||P==="reset"){y.removeAttribute("value");return}_.hasOwnProperty("value")?wt(y,_.type,C):_.hasOwnProperty("defaultValue")&&wt(y,_.type,le(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(y.defaultChecked=!!_.defaultChecked)}function $e(y,_,C){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var P=_.type;if(!(P!=="submit"&&P!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+y._wrapperState.initialValue,C||_===y.value||(y.value=_),y.defaultValue=_}C=y.name,C!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,C!==""&&(y.name=C)}function wt(y,_,C){(_!=="number"||Be(y.ownerDocument)!==y)&&(C==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+C&&(y.defaultValue=""+C))}var We=Array.isArray;function q(y,_,C,P){if(y=y.options,_){_={};for(var O=0;O<C.length;O++)_["$"+C[O]]=!0;for(C=0;C<y.length;C++)O=_.hasOwnProperty("$"+y[C].value),y[C].selected!==O&&(y[C].selected=O),O&&P&&(y[C].defaultSelected=!0)}else{for(C=""+le(C),_=null,O=0;O<y.length;O++){if(y[O].value===C){y[O].selected=!0,P&&(y[O].defaultSelected=!0);return}_!==null||y[O].disabled||(_=y[O])}_!==null&&(_.selected=!0)}}function j(y,_){if(_.dangerouslySetInnerHTML!=null)throw Error(r(91));return W({},_,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function ie(y,_){var C=_.value;if(C==null){if(C=_.children,_=_.defaultValue,C!=null){if(_!=null)throw Error(r(92));if(We(C)){if(1<C.length)throw Error(r(93));C=C[0]}_=C}_==null&&(_=""),C=_}y._wrapperState={initialValue:le(C)}}function Ce(y,_){var C=le(_.value),P=le(_.defaultValue);C!=null&&(C=""+C,C!==y.value&&(y.value=C),_.defaultValue==null&&y.defaultValue!==C&&(y.defaultValue=C)),P!=null&&(y.defaultValue=""+P)}function ye(y){var _=y.textContent;_===y._wrapperState.initialValue&&_!==""&&_!==null&&(y.value=_)}function me(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(y,_){return y==null||y==="http://www.w3.org/1999/xhtml"?me(_):y==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var Ie,He=function(y){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(_,C,P,O){MSApp.execUnsafeLocalFunction(function(){return y(_,C,P,O)})}:y}(function(y,_){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=_;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=Ie.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;_.firstChild;)y.appendChild(_.firstChild)}});function Et(y,_){if(_){var C=y.firstChild;if(C&&C===y.lastChild&&C.nodeType===3){C.nodeValue=_;return}}y.textContent=_}var Fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ge=["Webkit","ms","Moz","O"];Object.keys(Fe).forEach(function(y){Ge.forEach(function(_){_=_+y.charAt(0).toUpperCase()+y.substring(1),Fe[_]=Fe[y]})});function lt(y,_,C){return _==null||typeof _=="boolean"||_===""?"":C||typeof _!="number"||_===0||Fe.hasOwnProperty(y)&&Fe[y]?(""+_).trim():_+"px"}function ht(y,_){y=y.style;for(var C in _)if(_.hasOwnProperty(C)){var P=C.indexOf("--")===0,O=lt(C,_[C],P);C==="float"&&(C="cssFloat"),P?y.setProperty(C,O):y[C]=O}}var ut=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qt(y,_){if(_){if(ut[y]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(r(137,y));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(r(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(r(61))}if(_.style!=null&&typeof _.style!="object")throw Error(r(62))}}function zt(y,_){if(y.indexOf("-")===-1)return typeof _.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rr=null;function ce(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var vt=null,Me=null,ke=null;function nt(y){if(y=H0(y)){if(typeof vt!="function")throw Error(r(280));var _=y.stateNode;_&&(_=ix(_),vt(y.stateNode,y.type,_))}}function et(y){Me?ke?ke.push(y):ke=[y]:Me=y}function Gt(){if(Me){var y=Me,_=ke;if(ke=Me=null,nt(y),_)for(y=0;y<_.length;y++)nt(_[y])}}function nr(y,_){return y(_)}function Mt(){}var ot=!1;function mt(y,_,C){if(ot)return y(_,C);ot=!0;try{return nr(y,_,C)}finally{ot=!1,(Me!==null||ke!==null)&&(Mt(),Gt())}}function Pr(y,_){var C=y.stateNode;if(C===null)return null;var P=ix(C);if(P===null)return null;C=P[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(y=y.type,P=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!P;break e;default:y=!1}if(y)return null;if(C&&typeof C!="function")throw Error(r(231,_,typeof C));return C}var Yn=!1;if(s)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch(y){Yn=!1}function Dr(y,_,C,P,O,U,K,re,ue){var Pe=Array.prototype.slice.call(arguments,3);try{_.apply(C,Pe)}catch(Je){this.onError(Je)}}var Nn=!1,Bn=null,qn=!1,Ai=null,Jo={onError:function(y){Nn=!0,Bn=y}};function Mi(y,_,C,P,O,U,K,re,ue){Nn=!1,Bn=null,Dr.apply(Jo,arguments)}function li(y,_,C,P,O,U,K,re,ue){if(Mi.apply(this,arguments),Nn){if(Nn){var Pe=Bn;Nn=!1,Bn=null}else throw Error(r(198));qn||(qn=!0,Ai=Pe)}}function _i(y){var _=y,C=y;if(y.alternate)for(;_.return;)_=_.return;else{y=_;do _=y,_.flags&4098&&(C=_.return),y=_.return;while(y)}return _.tag===3?C:null}function Sa(y){if(y.tag===13){var _=y.memoizedState;if(_===null&&(y=y.alternate,y!==null&&(_=y.memoizedState)),_!==null)return _.dehydrated}return null}function Fa(y){if(_i(y)!==y)throw Error(r(188))}function zn(y){var _=y.alternate;if(!_){if(_=_i(y),_===null)throw Error(r(188));return _!==y?null:y}for(var C=y,P=_;;){var O=C.return;if(O===null)break;var U=O.alternate;if(U===null){if(P=O.return,P!==null){C=P;continue}break}if(O.child===U.child){for(U=O.child;U;){if(U===C)return Fa(O),y;if(U===P)return Fa(O),_;U=U.sibling}throw Error(r(188))}if(C.return!==P.return)C=O,P=U;else{for(var K=!1,re=O.child;re;){if(re===C){K=!0,C=O,P=U;break}if(re===P){K=!0,P=O,C=U;break}re=re.sibling}if(!K){for(re=U.child;re;){if(re===C){K=!0,C=U,P=O;break}if(re===P){K=!0,P=U,C=O;break}re=re.sibling}if(!K)throw Error(r(189))}}if(C.alternate!==P)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?y:_}function Qo(y){return y=zn(y),y!==null?Ja(y):null}function Ja(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var _=Ja(y);if(_!==null)return _;y=y.sibling}return null}var Z=e.unstable_scheduleCallback,de=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,Re=e.unstable_requestPaint,fe=e.unstable_now,Xe=e.unstable_getCurrentPriorityLevel,St=e.unstable_ImmediatePriority,Rt=e.unstable_UserBlockingPriority,Pt=e.unstable_NormalPriority,er=e.unstable_LowPriority,ir=e.unstable_IdlePriority,It=null,tr=null;function Gr(y){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(It,y,void 0,(y.current.flags&128)===128)}catch(_){}}var Wr=Math.clz32?Math.clz32:Wt,Kr=Math.log,pr=Math.LN2;function Wt(y){return y>>>=0,y===0?32:31-(Kr(y)/pr|0)|0}var yn=64,vr=4194304;function ni(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function $r(y,_){var C=y.pendingLanes;if(C===0)return 0;var P=0,O=y.suspendedLanes,U=y.pingedLanes,K=C&268435455;if(K!==0){var re=K&~O;re!==0?P=ni(re):(U&=K,U!==0&&(P=ni(U)))}else K=C&~O,K!==0?P=ni(K):U!==0&&(P=ni(U));if(P===0)return 0;if(_!==0&&_!==P&&!(_&O)&&(O=P&-P,U=_&-_,O>=U||O===16&&(U&4194240)!==0))return _;if(P&4&&(P|=C&16),_=y.entangledLanes,_!==0)for(y=y.entanglements,_&=P;0<_;)C=31-Wr(_),O=1<<C,P|=y[C],_&=~O;return P}function gr(y,_){switch(y){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(y,_){for(var C=y.suspendedLanes,P=y.pingedLanes,O=y.expirationTimes,U=y.pendingLanes;0<U;){var K=31-Wr(U),re=1<<K,ue=O[K];ue===-1?(!(re&C)||re&P)&&(O[K]=gr(re,_)):ue<=_&&(y.expiredLanes|=re),U&=~re}}function xr(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function cn(){var y=yn;return yn<<=1,!(yn&4194240)&&(yn=64),y}function Wn(y){for(var _=[],C=0;31>C;C++)_.push(y);return _}function Sn(y,_,C){y.pendingLanes|=_,_!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,_=31-Wr(_),y[_]=C}function ui(y,_){var C=y.pendingLanes&~_;y.pendingLanes=_,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=_,y.mutableReadLanes&=_,y.entangledLanes&=_,_=y.entanglements;var P=y.eventTimes;for(y=y.expirationTimes;0<C;){var O=31-Wr(C),U=1<<O;_[O]=0,P[O]=-1,y[O]=-1,C&=~U}}function Lo(y,_){var C=y.entangledLanes|=_;for(y=y.entanglements;C;){var P=31-Wr(C),O=1<<P;O&_|y[P]&_&&(y[P]|=_),C&=~O}}var Tr=0;function xs(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Zl,cl,es,ev,M0,tv=!1,Ri=[],Qa=null,eo=null,ba=null,Ss=new Map,Jl=new Map,ts=[],R0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kt(y,_){switch(y){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":ba=null;break;case"pointerover":case"pointerout":Ss.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(_.pointerId)}}function ar(y,_,C,P,O,U){return y===null||y.nativeEvent!==U?(y={blockedOn:_,domEventName:C,eventSystemFlags:P,nativeEvent:U,targetContainers:[O]},_!==null&&(_=H0(_),_!==null&&cl(_)),y):(y.eventSystemFlags|=P,_=y.targetContainers,O!==null&&_.indexOf(O)===-1&&_.push(O),y)}function Un(y,_,C,P,O){switch(_){case"focusin":return Qa=ar(Qa,y,_,C,P,O),!0;case"dragenter":return eo=ar(eo,y,_,C,P,O),!0;case"mouseover":return ba=ar(ba,y,_,C,P,O),!0;case"pointerover":var U=O.pointerId;return Ss.set(U,ar(Ss.get(U)||null,y,_,C,P,O)),!0;case"gotpointercapture":return U=O.pointerId,Jl.set(U,ar(Jl.get(U)||null,y,_,C,P,O)),!0}return!1}function Zn(y){var _=Oh(y.target);if(_!==null){var C=_i(_);if(C!==null){if(_=C.tag,_===13){if(_=Sa(C),_!==null){y.blockedOn=_,M0(y.priority,function(){es(C)});return}}else if(_===3&&C.stateNode.current.memoizedState.isDehydrated){y.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}y.blockedOn=null}function En(y){if(y.blockedOn!==null)return!1;for(var _=y.targetContainers;0<_.length;){var C=G4(y.domEventName,y.eventSystemFlags,_[0],y.nativeEvent);if(C===null){C=y.nativeEvent;var P=new C.constructor(C.type,C);rr=P,C.target.dispatchEvent(P),rr=null}else return _=H0(C),_!==null&&cl(_),y.blockedOn=C,!1;_.shift()}return!0}function Nh(y,_,C){En(y)&&C.delete(_)}function P0(){tv=!1,Qa!==null&&En(Qa)&&(Qa=null),eo!==null&&En(eo)&&(eo=null),ba!==null&&En(ba)&&(ba=null),Ss.forEach(Nh),Jl.forEach(Nh)}function rf(y,_){y.blockedOn===_&&(y.blockedOn=null,tv||(tv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,P0)))}function Ql(y){function _(O){return rf(O,y)}if(0<Ri.length){rf(Ri[0],y);for(var C=1;C<Ri.length;C++){var P=Ri[C];P.blockedOn===y&&(P.blockedOn=null)}}for(Qa!==null&&rf(Qa,y),eo!==null&&rf(eo,y),ba!==null&&rf(ba,y),Ss.forEach(_),Jl.forEach(_),C=0;C<ts.length;C++)P=ts[C],P.blockedOn===y&&(P.blockedOn=null);for(;0<ts.length&&(C=ts[0],C.blockedOn===null);)Zn(C),C.blockedOn===null&&ts.shift()}var rv=b.ReactCurrentBatchConfig,$2=!0;function Cae(y,_,C,P){var O=Tr,U=rv.transition;rv.transition=null;try{Tr=1,H4(y,_,C,P)}finally{Tr=O,rv.transition=U}}function Eae(y,_,C,P){var O=Tr,U=rv.transition;rv.transition=null;try{Tr=4,H4(y,_,C,P)}finally{Tr=O,rv.transition=U}}function H4(y,_,C,P){if($2){var O=G4(y,_,C,P);if(O===null)oC(y,_,P,j2,C),kt(y,P);else if(Un(O,y,_,C,P))P.stopPropagation();else if(kt(y,P),_&4&&-1<R0.indexOf(y)){for(;O!==null;){var U=H0(O);if(U!==null&&Zl(U),U=G4(y,_,C,P),U===null&&oC(y,_,P,j2,C),U===O)break;O=U}O!==null&&P.stopPropagation()}else oC(y,_,P,null,C)}}var j2=null;function G4(y,_,C,P){if(j2=null,y=ce(P),y=Oh(y),y!==null)if(_=_i(y),_===null)y=null;else if(C=_.tag,C===13){if(y=Sa(_),y!==null)return y;y=null}else if(C===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;y=null}else _!==y&&(y=null);return j2=y,null}function N7(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case St:return 1;case Rt:return 4;case Pt:case er:return 16;case ir:return 536870912;default:return 16}default:return 16}}var nf=null,W4=null,X2=null;function O7(){if(X2)return X2;var y,_=W4,C=_.length,P,O="value"in nf?nf.value:nf.textContent,U=O.length;for(y=0;y<C&&_[y]===O[y];y++);var K=C-y;for(P=1;P<=K&&_[C-P]===O[U-P];P++);return X2=O.slice(y,1<P?1-P:void 0)}function K2(y){var _=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&_===13&&(y=13)):y=_,y===10&&(y=13),32<=y||y===13?y:0}function Y2(){return!0}function k7(){return!1}function rs(y){function _(C,P,O,U,K){this._reactName=C,this._targetInst=O,this.type=P,this.nativeEvent=U,this.target=K,this.currentTarget=null;for(var re in y)y.hasOwnProperty(re)&&(C=y[re],this[re]=C?C(U):U[re]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Y2:k7,this.isPropagationStopped=k7,this}return W(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Y2)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Y2)},persist:function(){},isPersistent:Y2}),_}var nv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$4=rs(nv),L0=W({},nv,{view:0,detail:0}),Aae=rs(L0),j4,X4,D0,q2=W({},L0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y4,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==D0&&(D0&&y.type==="mousemove"?(j4=y.screenX-D0.screenX,X4=y.screenY-D0.screenY):X4=j4=0,D0=y),j4)},movementY:function(y){return"movementY"in y?y.movementY:X4}}),F7=rs(q2),Mae=W({},q2,{dataTransfer:0}),Rae=rs(Mae),Pae=W({},L0,{relatedTarget:0}),K4=rs(Pae),Lae=W({},nv,{animationName:0,elapsedTime:0,pseudoElement:0}),Dae=rs(Lae),Iae=W({},nv,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),Nae=rs(Iae),Oae=W({},nv,{data:0}),B7=rs(Oae),kae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zae(y){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(y):(y=Bae[y])?!!_[y]:!1}function Y4(){return zae}var Uae=W({},L0,{key:function(y){if(y.key){var _=kae[y.key]||y.key;if(_!=="Unidentified")return _}return y.type==="keypress"?(y=K2(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?Fae[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y4,charCode:function(y){return y.type==="keypress"?K2(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?K2(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),Vae=rs(Uae),Hae=W({},q2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z7=rs(Hae),Gae=W({},L0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y4}),Wae=rs(Gae),$ae=W({},nv,{propertyName:0,elapsedTime:0,pseudoElement:0}),jae=rs($ae),Xae=W({},q2,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),Kae=rs(Xae),Yae=[9,13,27,32],q4=s&&"CompositionEvent"in window,I0=null;s&&"documentMode"in document&&(I0=document.documentMode);var qae=s&&"TextEvent"in window&&!I0,U7=s&&(!q4||I0&&8<I0&&11>=I0),V7=" ",H7=!1;function G7(y,_){switch(y){case"keyup":return Yae.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W7(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var iv=!1;function Zae(y,_){switch(y){case"compositionend":return W7(_);case"keypress":return _.which!==32?null:(H7=!0,V7);case"textInput":return y=_.data,y===V7&&H7?null:y;default:return null}}function Jae(y,_){if(iv)return y==="compositionend"||!q4&&G7(y,_)?(y=O7(),X2=W4=nf=null,iv=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return U7&&_.locale!=="ko"?null:_.data;default:return null}}var Qae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $7(y){var _=y&&y.nodeName&&y.nodeName.toLowerCase();return _==="input"?!!Qae[y.type]:_==="textarea"}function j7(y,_,C,P){et(P),_=tx(_,"onChange"),0<_.length&&(C=new $4("onChange","change",null,C,P),y.push({event:C,listeners:_}))}var N0=null,O0=null;function eoe(y){cN(y,0)}function Z2(y){var _=uv(y);if(Le(_))return y}function toe(y,_){if(y==="change")return _}var X7=!1;if(s){var Z4;if(s){var J4="oninput"in document;if(!J4){var K7=document.createElement("div");K7.setAttribute("oninput","return;"),J4=typeof K7.oninput=="function"}Z4=J4}else Z4=!1;X7=Z4&&(!document.documentMode||9<document.documentMode)}function Y7(){N0&&(N0.detachEvent("onpropertychange",q7),O0=N0=null)}function q7(y){if(y.propertyName==="value"&&Z2(O0)){var _=[];j7(_,O0,y,ce(y)),mt(eoe,_)}}function roe(y,_,C){y==="focusin"?(Y7(),N0=_,O0=C,N0.attachEvent("onpropertychange",q7)):y==="focusout"&&Y7()}function noe(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return Z2(O0)}function ioe(y,_){if(y==="click")return Z2(_)}function aoe(y,_){if(y==="input"||y==="change")return Z2(_)}function ooe(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var fl=typeof Object.is=="function"?Object.is:ooe;function k0(y,_){if(fl(y,_))return!0;if(typeof y!="object"||y===null||typeof _!="object"||_===null)return!1;var C=Object.keys(y),P=Object.keys(_);if(C.length!==P.length)return!1;for(P=0;P<C.length;P++){var O=C[P];if(!l.call(_,O)||!fl(y[O],_[O]))return!1}return!0}function Z7(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function J7(y,_){var C=Z7(y);y=0;for(var P;C;){if(C.nodeType===3){if(P=y+C.textContent.length,y<=_&&P>=_)return{node:C,offset:_-y};y=P}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=Z7(C)}}function Q7(y,_){return y&&_?y===_?!0:y&&y.nodeType===3?!1:_&&_.nodeType===3?Q7(y,_.parentNode):"contains"in y?y.contains(_):y.compareDocumentPosition?!!(y.compareDocumentPosition(_)&16):!1:!1}function eN(){for(var y=window,_=Be();_ instanceof y.HTMLIFrameElement;){try{var C=typeof _.contentWindow.location.href=="string"}catch(P){C=!1}if(C)y=_.contentWindow;else break;_=Be(y.document)}return _}function Q4(y){var _=y&&y.nodeName&&y.nodeName.toLowerCase();return _&&(_==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||_==="textarea"||y.contentEditable==="true")}function soe(y){var _=eN(),C=y.focusedElem,P=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&Q7(C.ownerDocument.documentElement,C)){if(P!==null&&Q4(C)){if(_=P.start,y=P.end,y===void 0&&(y=_),"selectionStart"in C)C.selectionStart=_,C.selectionEnd=Math.min(y,C.value.length);else if(y=(_=C.ownerDocument||document)&&_.defaultView||window,y.getSelection){y=y.getSelection();var O=C.textContent.length,U=Math.min(P.start,O);P=P.end===void 0?U:Math.min(P.end,O),!y.extend&&U>P&&(O=P,P=U,U=O),O=J7(C,U);var K=J7(C,P);O&&K&&(y.rangeCount!==1||y.anchorNode!==O.node||y.anchorOffset!==O.offset||y.focusNode!==K.node||y.focusOffset!==K.offset)&&(_=_.createRange(),_.setStart(O.node,O.offset),y.removeAllRanges(),U>P?(y.addRange(_),y.extend(K.node,K.offset)):(_.setEnd(K.node,K.offset),y.addRange(_)))}}for(_=[],y=C;y=y.parentNode;)y.nodeType===1&&_.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<_.length;C++)y=_[C],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var loe=s&&"documentMode"in document&&11>=document.documentMode,av=null,eC=null,F0=null,tC=!1;function tN(y,_,C){var P=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;tC||av==null||av!==Be(P)||(P=av,"selectionStart"in P&&Q4(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),F0&&k0(F0,P)||(F0=P,P=tx(eC,"onSelect"),0<P.length&&(_=new $4("onSelect","select",null,_,C),y.push({event:_,listeners:P}),_.target=av)))}function J2(y,_){var C={};return C[y.toLowerCase()]=_.toLowerCase(),C["Webkit"+y]="webkit"+_,C["Moz"+y]="moz"+_,C}var ov={animationend:J2("Animation","AnimationEnd"),animationiteration:J2("Animation","AnimationIteration"),animationstart:J2("Animation","AnimationStart"),transitionend:J2("Transition","TransitionEnd")},rC={},rN={};s&&(rN=document.createElement("div").style,"AnimationEvent"in window||(delete ov.animationend.animation,delete ov.animationiteration.animation,delete ov.animationstart.animation),"TransitionEvent"in window||delete ov.transitionend.transition);function Q2(y){if(rC[y])return rC[y];if(!ov[y])return y;var _=ov[y],C;for(C in _)if(_.hasOwnProperty(C)&&C in rN)return rC[y]=_[C];return y}var nN=Q2("animationend"),iN=Q2("animationiteration"),aN=Q2("animationstart"),oN=Q2("transitionend"),sN=new Map,lN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function af(y,_){sN.set(y,_),a(_,[y])}for(var nC=0;nC<lN.length;nC++){var iC=lN[nC],uoe=iC.toLowerCase(),coe=iC[0].toUpperCase()+iC.slice(1);af(uoe,"on"+coe)}af(nN,"onAnimationEnd"),af(iN,"onAnimationIteration"),af(aN,"onAnimationStart"),af("dblclick","onDoubleClick"),af("focusin","onFocus"),af("focusout","onBlur"),af(oN,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var B0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),foe=new Set("cancel close invalid load scroll toggle".split(" ").concat(B0));function uN(y,_,C){var P=y.type||"unknown-event";y.currentTarget=C,li(P,_,void 0,y),y.currentTarget=null}function cN(y,_){_=(_&4)!==0;for(var C=0;C<y.length;C++){var P=y[C],O=P.event;P=P.listeners;e:{var U=void 0;if(_)for(var K=P.length-1;0<=K;K--){var re=P[K],ue=re.instance,Pe=re.currentTarget;if(re=re.listener,ue!==U&&O.isPropagationStopped())break e;uN(O,re,Pe),U=ue}else for(K=0;K<P.length;K++){if(re=P[K],ue=re.instance,Pe=re.currentTarget,re=re.listener,ue!==U&&O.isPropagationStopped())break e;uN(O,re,Pe),U=ue}}}if(qn)throw y=Ai,qn=!1,Ai=null,y}function $n(y,_){var C=_[hC];C===void 0&&(C=_[hC]=new Set);var P=y+"__bubble";C.has(P)||(fN(_,y,2,!1),C.add(P))}function aC(y,_,C){var P=0;_&&(P|=4),fN(C,y,P,_)}var ex="_reactListening"+Math.random().toString(36).slice(2);function z0(y){if(!y[ex]){y[ex]=!0,n.forEach(function(C){C!=="selectionchange"&&(foe.has(C)||aC(C,!1,y),aC(C,!0,y))});var _=y.nodeType===9?y:y.ownerDocument;_===null||_[ex]||(_[ex]=!0,aC("selectionchange",!1,_))}}function fN(y,_,C,P){switch(N7(_)){case 1:var O=Cae;break;case 4:O=Eae;break;default:O=H4}C=O.bind(null,_,C,y),O=void 0,!Yn||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(O=!0),P?O!==void 0?y.addEventListener(_,C,{capture:!0,passive:O}):y.addEventListener(_,C,!0):O!==void 0?y.addEventListener(_,C,{passive:O}):y.addEventListener(_,C,!1)}function oC(y,_,C,P,O){var U=P;if(!(_&1)&&!(_&2)&&P!==null)e:for(;;){if(P===null)return;var K=P.tag;if(K===3||K===4){var re=P.stateNode.containerInfo;if(re===O||re.nodeType===8&&re.parentNode===O)break;if(K===4)for(K=P.return;K!==null;){var ue=K.tag;if((ue===3||ue===4)&&(ue=K.stateNode.containerInfo,ue===O||ue.nodeType===8&&ue.parentNode===O))return;K=K.return}for(;re!==null;){if(K=Oh(re),K===null)return;if(ue=K.tag,ue===5||ue===6){P=U=K;continue e}re=re.parentNode}}P=P.return}mt(function(){var Pe=U,Je=ce(C),it=[];e:{var Ke=sN.get(y);if(Ke!==void 0){var Dt=$4,Ut=y;switch(y){case"keypress":if(K2(C)===0)break e;case"keydown":case"keyup":Dt=Vae;break;case"focusin":Ut="focus",Dt=K4;break;case"focusout":Ut="blur",Dt=K4;break;case"beforeblur":case"afterblur":Dt=K4;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=F7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=Rae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Wae;break;case nN:case iN:case aN:Dt=Dae;break;case oN:Dt=jae;break;case"scroll":Dt=Aae;break;case"wheel":Dt=Kae;break;case"copy":case"cut":case"paste":Dt=Nae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=z7}var $t=(_&4)!==0,xi=!$t&&y==="scroll",be=$t?Ke!==null?Ke+"Capture":null:Ke;$t=[];for(var ge=Pe,Te;ge!==null;){Te=ge;var dt=Te.stateNode;if(Te.tag===5&&dt!==null&&(Te=dt,be!==null&&(dt=Pr(ge,be),dt!=null&&$t.push(U0(ge,dt,Te)))),xi)break;ge=ge.return}0<$t.length&&(Ke=new Dt(Ke,Ut,null,C,Je),it.push({event:Ke,listeners:$t}))}}if(!(_&7)){e:{if(Ke=y==="mouseover"||y==="pointerover",Dt=y==="mouseout"||y==="pointerout",Ke&&C!==rr&&(Ut=C.relatedTarget||C.fromElement)&&(Oh(Ut)||Ut[$u]))break e;if((Dt||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Dt?(Ut=C.relatedTarget||C.toElement,Dt=Pe,Ut=Ut?Oh(Ut):null,Ut!==null&&(xi=_i(Ut),Ut!==xi||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Dt=null,Ut=Pe),Dt!==Ut)){if($t=F7,dt="onMouseLeave",be="onMouseEnter",ge="mouse",(y==="pointerout"||y==="pointerover")&&($t=z7,dt="onPointerLeave",be="onPointerEnter",ge="pointer"),xi=Dt==null?Ke:uv(Dt),Te=Ut==null?Ke:uv(Ut),Ke=new $t(dt,ge+"leave",Dt,C,Je),Ke.target=xi,Ke.relatedTarget=Te,dt=null,Oh(Je)===Pe&&($t=new $t(be,ge+"enter",Ut,C,Je),$t.target=Te,$t.relatedTarget=xi,dt=$t),xi=dt,Dt&&Ut)t:{for($t=Dt,be=Ut,ge=0,Te=$t;Te;Te=sv(Te))ge++;for(Te=0,dt=be;dt;dt=sv(dt))Te++;for(;0<ge-Te;)$t=sv($t),ge--;for(;0<Te-ge;)be=sv(be),Te--;for(;ge--;){if($t===be||be!==null&&$t===be.alternate)break t;$t=sv($t),be=sv(be)}$t=null}else $t=null;Dt!==null&&hN(it,Ke,Dt,$t,!1),Ut!==null&&xi!==null&&hN(it,xi,Ut,$t,!0)}}e:{if(Ke=Pe?uv(Pe):window,Dt=Ke.nodeName&&Ke.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&Ke.type==="file")var Kt=toe;else if($7(Ke))if(X7)Kt=aoe;else{Kt=noe;var ur=roe}else(Dt=Ke.nodeName)&&Dt.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(Kt=ioe);if(Kt&&(Kt=Kt(y,Pe))){j7(it,Kt,C,Je);break e}ur&&ur(y,Ke,Pe),y==="focusout"&&(ur=Ke._wrapperState)&&ur.controlled&&Ke.type==="number"&&wt(Ke,"number",Ke.value)}switch(ur=Pe?uv(Pe):window,y){case"focusin":($7(ur)||ur.contentEditable==="true")&&(av=ur,eC=Pe,F0=null);break;case"focusout":F0=eC=av=null;break;case"mousedown":tC=!0;break;case"contextmenu":case"mouseup":case"dragend":tC=!1,tN(it,C,Je);break;case"selectionchange":if(loe)break;case"keydown":case"keyup":tN(it,C,Je)}var cr;if(q4)e:{switch(y){case"compositionstart":var _r="onCompositionStart";break e;case"compositionend":_r="onCompositionEnd";break e;case"compositionupdate":_r="onCompositionUpdate";break e}_r=void 0}else iv?G7(y,C)&&(_r="onCompositionEnd"):y==="keydown"&&C.keyCode===229&&(_r="onCompositionStart");_r&&(U7&&C.locale!=="ko"&&(iv||_r!=="onCompositionStart"?_r==="onCompositionEnd"&&iv&&(cr=O7()):(nf=Je,W4="value"in nf?nf.value:nf.textContent,iv=!0)),ur=tx(Pe,_r),0<ur.length&&(_r=new B7(_r,y,null,C,Je),it.push({event:_r,listeners:ur}),cr?_r.data=cr:(cr=W7(C),cr!==null&&(_r.data=cr)))),(cr=qae?Zae(y,C):Jae(y,C))&&(Pe=tx(Pe,"onBeforeInput"),0<Pe.length&&(Je=new B7("onBeforeInput","beforeinput",null,C,Je),it.push({event:Je,listeners:Pe}),Je.data=cr))}cN(it,_)})}function U0(y,_,C){return{instance:y,listener:_,currentTarget:C}}function tx(y,_){for(var C=_+"Capture",P=[];y!==null;){var O=y,U=O.stateNode;O.tag===5&&U!==null&&(O=U,U=Pr(y,C),U!=null&&P.unshift(U0(y,U,O)),U=Pr(y,_),U!=null&&P.push(U0(y,U,O))),y=y.return}return P}function sv(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function hN(y,_,C,P,O){for(var U=_._reactName,K=[];C!==null&&C!==P;){var re=C,ue=re.alternate,Pe=re.stateNode;if(ue!==null&&ue===P)break;re.tag===5&&Pe!==null&&(re=Pe,O?(ue=Pr(C,U),ue!=null&&K.unshift(U0(C,ue,re))):O||(ue=Pr(C,U),ue!=null&&K.push(U0(C,ue,re)))),C=C.return}K.length!==0&&y.push({event:_,listeners:K})}var hoe=/\r\n?/g,doe=/\u0000|\uFFFD/g;function dN(y){return(typeof y=="string"?y:""+y).replace(hoe,`
`).replace(doe,"")}function rx(y,_,C){if(_=dN(_),dN(y)!==_&&C)throw Error(r(425))}function nx(){}var sC=null,lC=null;function uC(y,_){return y==="textarea"||y==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var cC=typeof setTimeout=="function"?setTimeout:void 0,poe=typeof clearTimeout=="function"?clearTimeout:void 0,pN=typeof Promise=="function"?Promise:void 0,voe=typeof queueMicrotask=="function"?queueMicrotask:typeof pN!="undefined"?function(y){return pN.resolve(null).then(y).catch(goe)}:cC;function goe(y){setTimeout(function(){throw y})}function fC(y,_){var C=_,P=0;do{var O=C.nextSibling;if(y.removeChild(C),O&&O.nodeType===8)if(C=O.data,C==="/$"){if(P===0){y.removeChild(O),Ql(_);return}P--}else C!=="$"&&C!=="$?"&&C!=="$!"||P++;C=O}while(C);Ql(_)}function of(y){for(;y!=null;y=y.nextSibling){var _=y.nodeType;if(_===1||_===3)break;if(_===8){if(_=y.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return y}function vN(y){y=y.previousSibling;for(var _=0;y;){if(y.nodeType===8){var C=y.data;if(C==="$"||C==="$!"||C==="$?"){if(_===0)return y;_--}else C==="/$"&&_++}y=y.previousSibling}return null}var lv=Math.random().toString(36).slice(2),eu="__reactFiber$"+lv,V0="__reactProps$"+lv,$u="__reactContainer$"+lv,hC="__reactEvents$"+lv,moe="__reactListeners$"+lv,yoe="__reactHandles$"+lv;function Oh(y){var _=y[eu];if(_)return _;for(var C=y.parentNode;C;){if(_=C[$u]||C[eu]){if(C=_.alternate,_.child!==null||C!==null&&C.child!==null)for(y=vN(y);y!==null;){if(C=y[eu])return C;y=vN(y)}return _}y=C,C=y.parentNode}return null}function H0(y){return y=y[eu]||y[$u],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function uv(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(r(33))}function ix(y){return y[V0]||null}var dC=[],cv=-1;function sf(y){return{current:y}}function jn(y){0>cv||(y.current=dC[cv],dC[cv]=null,cv--)}function Vn(y,_){cv++,dC[cv]=y.current,y.current=_}var lf={},Ba=sf(lf),Do=sf(!1),kh=lf;function fv(y,_){var C=y.type.contextTypes;if(!C)return lf;var P=y.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var O={},U;for(U in C)O[U]=_[U];return P&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=_,y.__reactInternalMemoizedMaskedChildContext=O),O}function Io(y){return y=y.childContextTypes,y!=null}function ax(){jn(Do),jn(Ba)}function gN(y,_,C){if(Ba.current!==lf)throw Error(r(168));Vn(Ba,_),Vn(Do,C)}function mN(y,_,C){var P=y.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return C;P=P.getChildContext();for(var O in P)if(!(O in _))throw Error(r(108,ne(y)||"Unknown",O));return W({},C,P)}function ox(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||lf,kh=Ba.current,Vn(Ba,y),Vn(Do,Do.current),!0}function yN(y,_,C){var P=y.stateNode;if(!P)throw Error(r(169));C?(y=mN(y,_,kh),P.__reactInternalMemoizedMergedChildContext=y,jn(Do),jn(Ba),Vn(Ba,y)):jn(Do),Vn(Do,C)}var ju=null,sx=!1,pC=!1;function _N(y){ju===null?ju=[y]:ju.push(y)}function _oe(y){sx=!0,_N(y)}function uf(){if(!pC&&ju!==null){pC=!0;var y=0,_=Tr;try{var C=ju;for(Tr=1;y<C.length;y++){var P=C[y];do P=P(!0);while(P!==null)}ju=null,sx=!1}catch(O){throw ju!==null&&(ju=ju.slice(y+1)),Z(St,uf),O}finally{Tr=_,pC=!1}}return null}var hv=[],dv=0,lx=null,ux=0,bs=[],ws=0,Fh=null,Xu=1,Ku="";function Bh(y,_){hv[dv++]=ux,hv[dv++]=lx,lx=y,ux=_}function xN(y,_,C){bs[ws++]=Xu,bs[ws++]=Ku,bs[ws++]=Fh,Fh=y;var P=Xu;y=Ku;var O=32-Wr(P)-1;P&=~(1<<O),C+=1;var U=32-Wr(_)+O;if(30<U){var K=O-O%5;U=(P&(1<<K)-1).toString(32),P>>=K,O-=K,Xu=1<<32-Wr(_)+O|C<<O|P,Ku=U+y}else Xu=1<<U|C<<O|P,Ku=y}function vC(y){y.return!==null&&(Bh(y,1),xN(y,1,0))}function gC(y){for(;y===lx;)lx=hv[--dv],hv[dv]=null,ux=hv[--dv],hv[dv]=null;for(;y===Fh;)Fh=bs[--ws],bs[ws]=null,Ku=bs[--ws],bs[ws]=null,Xu=bs[--ws],bs[ws]=null}var ns=null,is=null,Jn=!1,hl=null;function SN(y,_){var C=As(5,null,null,0);C.elementType="DELETED",C.stateNode=_,C.return=y,_=y.deletions,_===null?(y.deletions=[C],y.flags|=16):_.push(C)}function bN(y,_){switch(y.tag){case 5:var C=y.type;return _=_.nodeType!==1||C.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(y.stateNode=_,ns=y,is=of(_.firstChild),!0):!1;case 6:return _=y.pendingProps===""||_.nodeType!==3?null:_,_!==null?(y.stateNode=_,ns=y,is=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(C=Fh!==null?{id:Xu,overflow:Ku}:null,y.memoizedState={dehydrated:_,treeContext:C,retryLane:1073741824},C=As(18,null,null,0),C.stateNode=_,C.return=y,y.child=C,ns=y,is=null,!0):!1;default:return!1}}function mC(y){return(y.mode&1)!==0&&(y.flags&128)===0}function yC(y){if(Jn){var _=is;if(_){var C=_;if(!bN(y,_)){if(mC(y))throw Error(r(418));_=of(C.nextSibling);var P=ns;_&&bN(y,_)?SN(P,C):(y.flags=y.flags&-4097|2,Jn=!1,ns=y)}}else{if(mC(y))throw Error(r(418));y.flags=y.flags&-4097|2,Jn=!1,ns=y}}}function wN(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;ns=y}function cx(y){if(y!==ns)return!1;if(!Jn)return wN(y),Jn=!0,!1;var _;if((_=y.tag!==3)&&!(_=y.tag!==5)&&(_=y.type,_=_!=="head"&&_!=="body"&&!uC(y.type,y.memoizedProps)),_&&(_=is)){if(mC(y))throw TN(),Error(r(418));for(;_;)SN(y,_),_=of(_.nextSibling)}if(wN(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));e:{for(y=y.nextSibling,_=0;y;){if(y.nodeType===8){var C=y.data;if(C==="/$"){if(_===0){is=of(y.nextSibling);break e}_--}else C!=="$"&&C!=="$!"&&C!=="$?"||_++}y=y.nextSibling}is=null}}else is=ns?of(y.stateNode.nextSibling):null;return!0}function TN(){for(var y=is;y;)y=of(y.nextSibling)}function pv(){is=ns=null,Jn=!1}function _C(y){hl===null?hl=[y]:hl.push(y)}var xoe=b.ReactCurrentBatchConfig;function G0(y,_,C){if(y=C.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(r(309));var P=C.stateNode}if(!P)throw Error(r(147,y));var O=P,U=""+y;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===U?_.ref:(_=function(K){var re=O.refs;K===null?delete re[U]:re[U]=K},_._stringRef=U,_)}if(typeof y!="string")throw Error(r(284));if(!C._owner)throw Error(r(290,y))}return y}function fx(y,_){throw y=Object.prototype.toString.call(_),Error(r(31,y==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":y))}function CN(y){var _=y._init;return _(y._payload)}function EN(y){function _(be,ge){if(y){var Te=be.deletions;Te===null?(be.deletions=[ge],be.flags|=16):Te.push(ge)}}function C(be,ge){if(!y)return null;for(;ge!==null;)_(be,ge),ge=ge.sibling;return null}function P(be,ge){for(be=new Map;ge!==null;)ge.key!==null?be.set(ge.key,ge):be.set(ge.index,ge),ge=ge.sibling;return be}function O(be,ge){return be=mf(be,ge),be.index=0,be.sibling=null,be}function U(be,ge,Te){return be.index=Te,y?(Te=be.alternate,Te!==null?(Te=Te.index,Te<ge?(be.flags|=2,ge):Te):(be.flags|=2,ge)):(be.flags|=1048576,ge)}function K(be){return y&&be.alternate===null&&(be.flags|=2),be}function re(be,ge,Te,dt){return ge===null||ge.tag!==6?(ge=cE(Te,be.mode,dt),ge.return=be,ge):(ge=O(ge,Te),ge.return=be,ge)}function ue(be,ge,Te,dt){var Kt=Te.type;return Kt===E?Je(be,ge,Te.props.children,dt,Te.key):ge!==null&&(ge.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===B&&CN(Kt)===ge.type)?(dt=O(ge,Te.props),dt.ref=G0(be,ge,Te),dt.return=be,dt):(dt=kx(Te.type,Te.key,Te.props,null,be.mode,dt),dt.ref=G0(be,ge,Te),dt.return=be,dt)}function Pe(be,ge,Te,dt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Te.containerInfo||ge.stateNode.implementation!==Te.implementation?(ge=fE(Te,be.mode,dt),ge.return=be,ge):(ge=O(ge,Te.children||[]),ge.return=be,ge)}function Je(be,ge,Te,dt,Kt){return ge===null||ge.tag!==7?(ge=jh(Te,be.mode,dt,Kt),ge.return=be,ge):(ge=O(ge,Te),ge.return=be,ge)}function it(be,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=cE(""+ge,be.mode,Te),ge.return=be,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case T:return Te=kx(ge.type,ge.key,ge.props,null,be.mode,Te),Te.ref=G0(be,null,ge),Te.return=be,Te;case w:return ge=fE(ge,be.mode,Te),ge.return=be,ge;case B:var dt=ge._init;return it(be,dt(ge._payload),Te)}if(We(ge)||$(ge))return ge=jh(ge,be.mode,Te,null),ge.return=be,ge;fx(be,ge)}return null}function Ke(be,ge,Te,dt){var Kt=ge!==null?ge.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Kt!==null?null:re(be,ge,""+Te,dt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:return Te.key===Kt?ue(be,ge,Te,dt):null;case w:return Te.key===Kt?Pe(be,ge,Te,dt):null;case B:return Kt=Te._init,Ke(be,ge,Kt(Te._payload),dt)}if(We(Te)||$(Te))return Kt!==null?null:Je(be,ge,Te,dt,null);fx(be,Te)}return null}function Dt(be,ge,Te,dt,Kt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return be=be.get(Te)||null,re(ge,be,""+dt,Kt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case T:return be=be.get(dt.key===null?Te:dt.key)||null,ue(ge,be,dt,Kt);case w:return be=be.get(dt.key===null?Te:dt.key)||null,Pe(ge,be,dt,Kt);case B:var ur=dt._init;return Dt(be,ge,Te,ur(dt._payload),Kt)}if(We(dt)||$(dt))return be=be.get(Te)||null,Je(ge,be,dt,Kt,null);fx(ge,dt)}return null}function Ut(be,ge,Te,dt){for(var Kt=null,ur=null,cr=ge,_r=ge=0,ca=null;cr!==null&&_r<Te.length;_r++){cr.index>_r?(ca=cr,cr=null):ca=cr.sibling;var vn=Ke(be,cr,Te[_r],dt);if(vn===null){cr===null&&(cr=ca);break}y&&cr&&vn.alternate===null&&_(be,cr),ge=U(vn,ge,_r),ur===null?Kt=vn:ur.sibling=vn,ur=vn,cr=ca}if(_r===Te.length)return C(be,cr),Jn&&Bh(be,_r),Kt;if(cr===null){for(;_r<Te.length;_r++)cr=it(be,Te[_r],dt),cr!==null&&(ge=U(cr,ge,_r),ur===null?Kt=cr:ur.sibling=cr,ur=cr);return Jn&&Bh(be,_r),Kt}for(cr=P(be,cr);_r<Te.length;_r++)ca=Dt(cr,be,_r,Te[_r],dt),ca!==null&&(y&&ca.alternate!==null&&cr.delete(ca.key===null?_r:ca.key),ge=U(ca,ge,_r),ur===null?Kt=ca:ur.sibling=ca,ur=ca);return y&&cr.forEach(function(yf){return _(be,yf)}),Jn&&Bh(be,_r),Kt}function $t(be,ge,Te,dt){var Kt=$(Te);if(typeof Kt!="function")throw Error(r(150));if(Te=Kt.call(Te),Te==null)throw Error(r(151));for(var ur=Kt=null,cr=ge,_r=ge=0,ca=null,vn=Te.next();cr!==null&&!vn.done;_r++,vn=Te.next()){cr.index>_r?(ca=cr,cr=null):ca=cr.sibling;var yf=Ke(be,cr,vn.value,dt);if(yf===null){cr===null&&(cr=ca);break}y&&cr&&yf.alternate===null&&_(be,cr),ge=U(yf,ge,_r),ur===null?Kt=yf:ur.sibling=yf,ur=yf,cr=ca}if(vn.done)return C(be,cr),Jn&&Bh(be,_r),Kt;if(cr===null){for(;!vn.done;_r++,vn=Te.next())vn=it(be,vn.value,dt),vn!==null&&(ge=U(vn,ge,_r),ur===null?Kt=vn:ur.sibling=vn,ur=vn);return Jn&&Bh(be,_r),Kt}for(cr=P(be,cr);!vn.done;_r++,vn=Te.next())vn=Dt(cr,be,_r,vn.value,dt),vn!==null&&(y&&vn.alternate!==null&&cr.delete(vn.key===null?_r:vn.key),ge=U(vn,ge,_r),ur===null?Kt=vn:ur.sibling=vn,ur=vn);return y&&cr.forEach(function(Qoe){return _(be,Qoe)}),Jn&&Bh(be,_r),Kt}function xi(be,ge,Te,dt){if(typeof Te=="object"&&Te!==null&&Te.type===E&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:e:{for(var Kt=Te.key,ur=ge;ur!==null;){if(ur.key===Kt){if(Kt=Te.type,Kt===E){if(ur.tag===7){C(be,ur.sibling),ge=O(ur,Te.props.children),ge.return=be,be=ge;break e}}else if(ur.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===B&&CN(Kt)===ur.type){C(be,ur.sibling),ge=O(ur,Te.props),ge.ref=G0(be,ur,Te),ge.return=be,be=ge;break e}C(be,ur);break}else _(be,ur);ur=ur.sibling}Te.type===E?(ge=jh(Te.props.children,be.mode,dt,Te.key),ge.return=be,be=ge):(dt=kx(Te.type,Te.key,Te.props,null,be.mode,dt),dt.ref=G0(be,ge,Te),dt.return=be,be=dt)}return K(be);case w:e:{for(ur=Te.key;ge!==null;){if(ge.key===ur)if(ge.tag===4&&ge.stateNode.containerInfo===Te.containerInfo&&ge.stateNode.implementation===Te.implementation){C(be,ge.sibling),ge=O(ge,Te.children||[]),ge.return=be,be=ge;break e}else{C(be,ge);break}else _(be,ge);ge=ge.sibling}ge=fE(Te,be.mode,dt),ge.return=be,be=ge}return K(be);case B:return ur=Te._init,xi(be,ge,ur(Te._payload),dt)}if(We(Te))return Ut(be,ge,Te,dt);if($(Te))return $t(be,ge,Te,dt);fx(be,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ge!==null&&ge.tag===6?(C(be,ge.sibling),ge=O(ge,Te),ge.return=be,be=ge):(C(be,ge),ge=cE(Te,be.mode,dt),ge.return=be,be=ge),K(be)):C(be,ge)}return xi}var vv=EN(!0),AN=EN(!1),hx=sf(null),dx=null,gv=null,xC=null;function SC(){xC=gv=dx=null}function bC(y){var _=hx.current;jn(hx),y._currentValue=_}function wC(y,_,C){for(;y!==null;){var P=y.alternate;if((y.childLanes&_)!==_?(y.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),y===C)break;y=y.return}}function mv(y,_){dx=y,xC=gv=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&_&&(No=!0),y.firstContext=null)}function Ts(y){var _=y._currentValue;if(xC!==y)if(y={context:y,memoizedValue:_,next:null},gv===null){if(dx===null)throw Error(r(308));gv=y,dx.dependencies={lanes:0,firstContext:y}}else gv=gv.next=y;return _}var zh=null;function TC(y){zh===null?zh=[y]:zh.push(y)}function MN(y,_,C,P){var O=_.interleaved;return O===null?(C.next=C,TC(_)):(C.next=O.next,O.next=C),_.interleaved=C,Yu(y,P)}function Yu(y,_){y.lanes|=_;var C=y.alternate;for(C!==null&&(C.lanes|=_),C=y,y=y.return;y!==null;)y.childLanes|=_,C=y.alternate,C!==null&&(C.childLanes|=_),C=y,y=y.return;return C.tag===3?C.stateNode:null}var cf=!1;function CC(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RN(y,_){y=y.updateQueue,_.updateQueue===y&&(_.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function qu(y,_){return{eventTime:y,lane:_,tag:0,payload:null,callback:null,next:null}}function ff(y,_,C){var P=y.updateQueue;if(P===null)return null;if(P=P.shared,fn&2){var O=P.pending;return O===null?_.next=_:(_.next=O.next,O.next=_),P.pending=_,Yu(y,C)}return O=P.interleaved,O===null?(_.next=_,TC(P)):(_.next=O.next,O.next=_),P.interleaved=_,Yu(y,C)}function px(y,_,C){if(_=_.updateQueue,_!==null&&(_=_.shared,(C&4194240)!==0)){var P=_.lanes;P&=y.pendingLanes,C|=P,_.lanes=C,Lo(y,C)}}function PN(y,_){var C=y.updateQueue,P=y.alternate;if(P!==null&&(P=P.updateQueue,C===P)){var O=null,U=null;if(C=C.firstBaseUpdate,C!==null){do{var K={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};U===null?O=U=K:U=U.next=K,C=C.next}while(C!==null);U===null?O=U=_:U=U.next=_}else O=U=_;C={baseState:P.baseState,firstBaseUpdate:O,lastBaseUpdate:U,shared:P.shared,effects:P.effects},y.updateQueue=C;return}y=C.lastBaseUpdate,y===null?C.firstBaseUpdate=_:y.next=_,C.lastBaseUpdate=_}function vx(y,_,C,P){var O=y.updateQueue;cf=!1;var U=O.firstBaseUpdate,K=O.lastBaseUpdate,re=O.shared.pending;if(re!==null){O.shared.pending=null;var ue=re,Pe=ue.next;ue.next=null,K===null?U=Pe:K.next=Pe,K=ue;var Je=y.alternate;Je!==null&&(Je=Je.updateQueue,re=Je.lastBaseUpdate,re!==K&&(re===null?Je.firstBaseUpdate=Pe:re.next=Pe,Je.lastBaseUpdate=ue))}if(U!==null){var it=O.baseState;K=0,Je=Pe=ue=null,re=U;do{var Ke=re.lane,Dt=re.eventTime;if((P&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:Dt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var Ut=y,$t=re;switch(Ke=_,Dt=C,$t.tag){case 1:if(Ut=$t.payload,typeof Ut=="function"){it=Ut.call(Dt,it,Ke);break e}it=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=$t.payload,Ke=typeof Ut=="function"?Ut.call(Dt,it,Ke):Ut,Ke==null)break e;it=W({},it,Ke);break e;case 2:cf=!0}}re.callback!==null&&re.lane!==0&&(y.flags|=64,Ke=O.effects,Ke===null?O.effects=[re]:Ke.push(re))}else Dt={eventTime:Dt,lane:Ke,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Je===null?(Pe=Je=Dt,ue=it):Je=Je.next=Dt,K|=Ke;if(re=re.next,re===null){if(re=O.shared.pending,re===null)break;Ke=re,re=Ke.next,Ke.next=null,O.lastBaseUpdate=Ke,O.shared.pending=null}}while(!0);if(Je===null&&(ue=it),O.baseState=ue,O.firstBaseUpdate=Pe,O.lastBaseUpdate=Je,_=O.shared.interleaved,_!==null){O=_;do K|=O.lane,O=O.next;while(O!==_)}else U===null&&(O.shared.lanes=0);Hh|=K,y.lanes=K,y.memoizedState=it}}function LN(y,_,C){if(y=_.effects,_.effects=null,y!==null)for(_=0;_<y.length;_++){var P=y[_],O=P.callback;if(O!==null){if(P.callback=null,P=C,typeof O!="function")throw Error(r(191,O));O.call(P)}}}var W0={},tu=sf(W0),$0=sf(W0),j0=sf(W0);function Uh(y){if(y===W0)throw Error(r(174));return y}function EC(y,_){switch(Vn(j0,_),Vn($0,y),Vn(tu,W0),y=_.nodeType,y){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:qe(null,"");break;default:y=y===8?_.parentNode:_,_=y.namespaceURI||null,y=y.tagName,_=qe(_,y)}jn(tu),Vn(tu,_)}function yv(){jn(tu),jn($0),jn(j0)}function DN(y){Uh(j0.current);var _=Uh(tu.current),C=qe(_,y.type);_!==C&&(Vn($0,y),Vn(tu,C))}function AC(y){$0.current===y&&(jn(tu),jn($0))}var ii=sf(0);function gx(y){for(var _=y;_!==null;){if(_.tag===13){var C=_.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var MC=[];function RC(){for(var y=0;y<MC.length;y++)MC[y]._workInProgressVersionPrimary=null;MC.length=0}var mx=b.ReactCurrentDispatcher,PC=b.ReactCurrentBatchConfig,Vh=0,ai=null,Vi=null,la=null,yx=!1,X0=!1,K0=0,Soe=0;function za(){throw Error(r(321))}function LC(y,_){if(_===null)return!1;for(var C=0;C<_.length&&C<y.length;C++)if(!fl(y[C],_[C]))return!1;return!0}function DC(y,_,C,P,O,U){if(Vh=U,ai=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,mx.current=y===null||y.memoizedState===null?Coe:Eoe,y=C(P,O),X0){U=0;do{if(X0=!1,K0=0,25<=U)throw Error(r(301));U+=1,la=Vi=null,_.updateQueue=null,mx.current=Aoe,y=C(P,O)}while(X0)}if(mx.current=Sx,_=Vi!==null&&Vi.next!==null,Vh=0,la=Vi=ai=null,yx=!1,_)throw Error(r(300));return y}function IC(){var y=K0!==0;return K0=0,y}function ru(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return la===null?ai.memoizedState=la=y:la=la.next=y,la}function Cs(){if(Vi===null){var y=ai.alternate;y=y!==null?y.memoizedState:null}else y=Vi.next;var _=la===null?ai.memoizedState:la.next;if(_!==null)la=_,Vi=y;else{if(y===null)throw Error(r(310));Vi=y,y={memoizedState:Vi.memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},la===null?ai.memoizedState=la=y:la=la.next=y}return la}function Y0(y,_){return typeof _=="function"?_(y):_}function NC(y){var _=Cs(),C=_.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=y;var P=Vi,O=P.baseQueue,U=C.pending;if(U!==null){if(O!==null){var K=O.next;O.next=U.next,U.next=K}P.baseQueue=O=U,C.pending=null}if(O!==null){U=O.next,P=P.baseState;var re=K=null,ue=null,Pe=U;do{var Je=Pe.lane;if((Vh&Je)===Je)ue!==null&&(ue=ue.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),P=Pe.hasEagerState?Pe.eagerState:y(P,Pe.action);else{var it={lane:Je,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ue===null?(re=ue=it,K=P):ue=ue.next=it,ai.lanes|=Je,Hh|=Je}Pe=Pe.next}while(Pe!==null&&Pe!==U);ue===null?K=P:ue.next=re,fl(P,_.memoizedState)||(No=!0),_.memoizedState=P,_.baseState=K,_.baseQueue=ue,C.lastRenderedState=P}if(y=C.interleaved,y!==null){O=y;do U=O.lane,ai.lanes|=U,Hh|=U,O=O.next;while(O!==y)}else O===null&&(C.lanes=0);return[_.memoizedState,C.dispatch]}function OC(y){var _=Cs(),C=_.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=y;var P=C.dispatch,O=C.pending,U=_.memoizedState;if(O!==null){C.pending=null;var K=O=O.next;do U=y(U,K.action),K=K.next;while(K!==O);fl(U,_.memoizedState)||(No=!0),_.memoizedState=U,_.baseQueue===null&&(_.baseState=U),C.lastRenderedState=U}return[U,P]}function IN(){}function NN(y,_){var C=ai,P=Cs(),O=_(),U=!fl(P.memoizedState,O);if(U&&(P.memoizedState=O,No=!0),P=P.queue,kC(FN.bind(null,C,P,y),[y]),P.getSnapshot!==_||U||la!==null&&la.memoizedState.tag&1){if(C.flags|=2048,q0(9,kN.bind(null,C,P,O,_),void 0,null),ua===null)throw Error(r(349));Vh&30||ON(C,_,O)}return O}function ON(y,_,C){y.flags|=16384,y={getSnapshot:_,value:C},_=ai.updateQueue,_===null?(_={lastEffect:null,stores:null},ai.updateQueue=_,_.stores=[y]):(C=_.stores,C===null?_.stores=[y]:C.push(y))}function kN(y,_,C,P){_.value=C,_.getSnapshot=P,BN(_)&&zN(y)}function FN(y,_,C){return C(function(){BN(_)&&zN(y)})}function BN(y){var _=y.getSnapshot;y=y.value;try{var C=_();return!fl(y,C)}catch(P){return!0}}function zN(y){var _=Yu(y,1);_!==null&&gl(_,y,1,-1)}function UN(y){var _=ru();return typeof y=="function"&&(y=y()),_.memoizedState=_.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Y0,lastRenderedState:y},_.queue=y,y=y.dispatch=Toe.bind(null,ai,y),[_.memoizedState,y]}function q0(y,_,C,P){return y={tag:y,create:_,destroy:C,deps:P,next:null},_=ai.updateQueue,_===null?(_={lastEffect:null,stores:null},ai.updateQueue=_,_.lastEffect=y.next=y):(C=_.lastEffect,C===null?_.lastEffect=y.next=y:(P=C.next,C.next=y,y.next=P,_.lastEffect=y)),y}function VN(){return Cs().memoizedState}function _x(y,_,C,P){var O=ru();ai.flags|=y,O.memoizedState=q0(1|_,C,void 0,P===void 0?null:P)}function xx(y,_,C,P){var O=Cs();P=P===void 0?null:P;var U=void 0;if(Vi!==null){var K=Vi.memoizedState;if(U=K.destroy,P!==null&&LC(P,K.deps)){O.memoizedState=q0(_,C,U,P);return}}ai.flags|=y,O.memoizedState=q0(1|_,C,U,P)}function HN(y,_){return _x(8390656,8,y,_)}function kC(y,_){return xx(2048,8,y,_)}function GN(y,_){return xx(4,2,y,_)}function WN(y,_){return xx(4,4,y,_)}function $N(y,_){if(typeof _=="function")return y=y(),_(y),function(){_(null)};if(_!=null)return y=y(),_.current=y,function(){_.current=null}}function jN(y,_,C){return C=C!=null?C.concat([y]):null,xx(4,4,$N.bind(null,_,y),C)}function FC(){}function XN(y,_){var C=Cs();_=_===void 0?null:_;var P=C.memoizedState;return P!==null&&_!==null&&LC(_,P[1])?P[0]:(C.memoizedState=[y,_],y)}function KN(y,_){var C=Cs();_=_===void 0?null:_;var P=C.memoizedState;return P!==null&&_!==null&&LC(_,P[1])?P[0]:(y=y(),C.memoizedState=[y,_],y)}function YN(y,_,C){return Vh&21?(fl(C,_)||(C=cn(),ai.lanes|=C,Hh|=C,y.baseState=!0),_):(y.baseState&&(y.baseState=!1,No=!0),y.memoizedState=C)}function boe(y,_){var C=Tr;Tr=C!==0&&4>C?C:4,y(!0);var P=PC.transition;PC.transition={};try{y(!1),_()}finally{Tr=C,PC.transition=P}}function qN(){return Cs().memoizedState}function woe(y,_,C){var P=vf(y);if(C={lane:P,action:C,hasEagerState:!1,eagerState:null,next:null},ZN(y))JN(_,C);else if(C=MN(y,_,C,P),C!==null){var O=ro();gl(C,y,P,O),QN(C,_,P)}}function Toe(y,_,C){var P=vf(y),O={lane:P,action:C,hasEagerState:!1,eagerState:null,next:null};if(ZN(y))JN(_,O);else{var U=y.alternate;if(y.lanes===0&&(U===null||U.lanes===0)&&(U=_.lastRenderedReducer,U!==null))try{var K=_.lastRenderedState,re=U(K,C);if(O.hasEagerState=!0,O.eagerState=re,fl(re,K)){var ue=_.interleaved;ue===null?(O.next=O,TC(_)):(O.next=ue.next,ue.next=O),_.interleaved=O;return}}catch(Pe){}finally{}C=MN(y,_,O,P),C!==null&&(O=ro(),gl(C,y,P,O),QN(C,_,P))}}function ZN(y){var _=y.alternate;return y===ai||_!==null&&_===ai}function JN(y,_){X0=yx=!0;var C=y.pending;C===null?_.next=_:(_.next=C.next,C.next=_),y.pending=_}function QN(y,_,C){if(C&4194240){var P=_.lanes;P&=y.pendingLanes,C|=P,_.lanes=C,Lo(y,C)}}var Sx={readContext:Ts,useCallback:za,useContext:za,useEffect:za,useImperativeHandle:za,useInsertionEffect:za,useLayoutEffect:za,useMemo:za,useReducer:za,useRef:za,useState:za,useDebugValue:za,useDeferredValue:za,useTransition:za,useMutableSource:za,useSyncExternalStore:za,useId:za,unstable_isNewReconciler:!1},Coe={readContext:Ts,useCallback:function(y,_){return ru().memoizedState=[y,_===void 0?null:_],y},useContext:Ts,useEffect:HN,useImperativeHandle:function(y,_,C){return C=C!=null?C.concat([y]):null,_x(4194308,4,$N.bind(null,_,y),C)},useLayoutEffect:function(y,_){return _x(4194308,4,y,_)},useInsertionEffect:function(y,_){return _x(4,2,y,_)},useMemo:function(y,_){var C=ru();return _=_===void 0?null:_,y=y(),C.memoizedState=[y,_],y},useReducer:function(y,_,C){var P=ru();return _=C!==void 0?C(_):_,P.memoizedState=P.baseState=_,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:_},P.queue=y,y=y.dispatch=woe.bind(null,ai,y),[P.memoizedState,y]},useRef:function(y){var _=ru();return y={current:y},_.memoizedState=y},useState:UN,useDebugValue:FC,useDeferredValue:function(y){return ru().memoizedState=y},useTransition:function(){var y=UN(!1),_=y[0];return y=boe.bind(null,y[1]),ru().memoizedState=y,[_,y]},useMutableSource:function(){},useSyncExternalStore:function(y,_,C){var P=ai,O=ru();if(Jn){if(C===void 0)throw Error(r(407));C=C()}else{if(C=_(),ua===null)throw Error(r(349));Vh&30||ON(P,_,C)}O.memoizedState=C;var U={value:C,getSnapshot:_};return O.queue=U,HN(FN.bind(null,P,U,y),[y]),P.flags|=2048,q0(9,kN.bind(null,P,U,C,_),void 0,null),C},useId:function(){var y=ru(),_=ua.identifierPrefix;if(Jn){var C=Ku,P=Xu;C=(P&~(1<<32-Wr(P)-1)).toString(32)+C,_=":"+_+"R"+C,C=K0++,0<C&&(_+="H"+C.toString(32)),_+=":"}else C=Soe++,_=":"+_+"r"+C.toString(32)+":";return y.memoizedState=_},unstable_isNewReconciler:!1},Eoe={readContext:Ts,useCallback:XN,useContext:Ts,useEffect:kC,useImperativeHandle:jN,useInsertionEffect:GN,useLayoutEffect:WN,useMemo:KN,useReducer:NC,useRef:VN,useState:function(){return NC(Y0)},useDebugValue:FC,useDeferredValue:function(y){var _=Cs();return YN(_,Vi.memoizedState,y)},useTransition:function(){var y=NC(Y0)[0],_=Cs().memoizedState;return[y,_]},useMutableSource:IN,useSyncExternalStore:NN,useId:qN,unstable_isNewReconciler:!1},Aoe={readContext:Ts,useCallback:XN,useContext:Ts,useEffect:kC,useImperativeHandle:jN,useInsertionEffect:GN,useLayoutEffect:WN,useMemo:KN,useReducer:OC,useRef:VN,useState:function(){return OC(Y0)},useDebugValue:FC,useDeferredValue:function(y){var _=Cs();return Vi===null?_.memoizedState=y:YN(_,Vi.memoizedState,y)},useTransition:function(){var y=OC(Y0)[0],_=Cs().memoizedState;return[y,_]},useMutableSource:IN,useSyncExternalStore:NN,useId:qN,unstable_isNewReconciler:!1};function dl(y,_){if(y&&y.defaultProps){_=W({},_),y=y.defaultProps;for(var C in y)_[C]===void 0&&(_[C]=y[C]);return _}return _}function BC(y,_,C,P){_=y.memoizedState,C=C(P,_),C=C==null?_:W({},_,C),y.memoizedState=C,y.lanes===0&&(y.updateQueue.baseState=C)}var bx={isMounted:function(y){return(y=y._reactInternals)?_i(y)===y:!1},enqueueSetState:function(y,_,C){y=y._reactInternals;var P=ro(),O=vf(y),U=qu(P,O);U.payload=_,C!=null&&(U.callback=C),_=ff(y,U,O),_!==null&&(gl(_,y,O,P),px(_,y,O))},enqueueReplaceState:function(y,_,C){y=y._reactInternals;var P=ro(),O=vf(y),U=qu(P,O);U.tag=1,U.payload=_,C!=null&&(U.callback=C),_=ff(y,U,O),_!==null&&(gl(_,y,O,P),px(_,y,O))},enqueueForceUpdate:function(y,_){y=y._reactInternals;var C=ro(),P=vf(y),O=qu(C,P);O.tag=2,_!=null&&(O.callback=_),_=ff(y,O,P),_!==null&&(gl(_,y,P,C),px(_,y,P))}};function eO(y,_,C,P,O,U,K){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(P,U,K):_.prototype&&_.prototype.isPureReactComponent?!k0(C,P)||!k0(O,U):!0}function tO(y,_,C){var P=!1,O=lf,U=_.contextType;return typeof U=="object"&&U!==null?U=Ts(U):(O=Io(_)?kh:Ba.current,P=_.contextTypes,U=(P=P!=null)?fv(y,O):lf),_=new _(C,U),y.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=bx,y.stateNode=_,_._reactInternals=y,P&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=O,y.__reactInternalMemoizedMaskedChildContext=U),_}function rO(y,_,C,P){y=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(C,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(C,P),_.state!==y&&bx.enqueueReplaceState(_,_.state,null)}function zC(y,_,C,P){var O=y.stateNode;O.props=C,O.state=y.memoizedState,O.refs={},CC(y);var U=_.contextType;typeof U=="object"&&U!==null?O.context=Ts(U):(U=Io(_)?kh:Ba.current,O.context=fv(y,U)),O.state=y.memoizedState,U=_.getDerivedStateFromProps,typeof U=="function"&&(BC(y,_,U,C),O.state=y.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(_=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),_!==O.state&&bx.enqueueReplaceState(O,O.state,null),vx(y,C,O,P),O.state=y.memoizedState),typeof O.componentDidMount=="function"&&(y.flags|=4194308)}function _v(y,_){try{var C="",P=_;do C+=ee(P),P=P.return;while(P);var O=C}catch(U){O=`
Error generating stack: `+U.message+`
`+U.stack}return{value:y,source:_,stack:O,digest:null}}function UC(y,_,C){return{value:y,source:null,stack:C!=null?C:null,digest:_!=null?_:null}}function VC(y,_){try{console.error(_.value)}catch(C){setTimeout(function(){throw C})}}var Moe=typeof WeakMap=="function"?WeakMap:Map;function nO(y,_,C){C=qu(-1,C),C.tag=3,C.payload={element:null};var P=_.value;return C.callback=function(){Px||(Px=!0,rE=P),VC(y,_)},C}function iO(y,_,C){C=qu(-1,C),C.tag=3;var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var O=_.value;C.payload=function(){return P(O)},C.callback=function(){VC(y,_)}}var U=y.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(C.callback=function(){VC(y,_),typeof P!="function"&&(df===null?df=new Set([this]):df.add(this));var K=_.stack;this.componentDidCatch(_.value,{componentStack:K!==null?K:""})}),C}function aO(y,_,C){var P=y.pingCache;if(P===null){P=y.pingCache=new Moe;var O=new Set;P.set(_,O)}else O=P.get(_),O===void 0&&(O=new Set,P.set(_,O));O.has(C)||(O.add(C),y=Hoe.bind(null,y,_,C),_.then(y,y))}function oO(y){do{var _;if((_=y.tag===13)&&(_=y.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return y;y=y.return}while(y!==null);return null}function sO(y,_,C,P,O){return y.mode&1?(y.flags|=65536,y.lanes=O,y):(y===_?y.flags|=65536:(y.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(_=qu(-1,1),_.tag=2,ff(C,_,1))),C.lanes|=1),y)}var Roe=b.ReactCurrentOwner,No=!1;function to(y,_,C,P){_.child=y===null?AN(_,null,C,P):vv(_,y.child,C,P)}function lO(y,_,C,P,O){C=C.render;var U=_.ref;return mv(_,O),P=DC(y,_,C,P,U,O),C=IC(),y!==null&&!No?(_.updateQueue=y.updateQueue,_.flags&=-2053,y.lanes&=~O,Zu(y,_,O)):(Jn&&C&&vC(_),_.flags|=1,to(y,_,P,O),_.child)}function uO(y,_,C,P,O){if(y===null){var U=C.type;return typeof U=="function"&&!uE(U)&&U.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(_.tag=15,_.type=U,cO(y,_,U,P,O)):(y=kx(C.type,null,P,_,_.mode,O),y.ref=_.ref,y.return=_,_.child=y)}if(U=y.child,!(y.lanes&O)){var K=U.memoizedProps;if(C=C.compare,C=C!==null?C:k0,C(K,P)&&y.ref===_.ref)return Zu(y,_,O)}return _.flags|=1,y=mf(U,P),y.ref=_.ref,y.return=_,_.child=y}function cO(y,_,C,P,O){if(y!==null){var U=y.memoizedProps;if(k0(U,P)&&y.ref===_.ref)if(No=!1,_.pendingProps=P=U,(y.lanes&O)!==0)y.flags&131072&&(No=!0);else return _.lanes=y.lanes,Zu(y,_,O)}return HC(y,_,C,P,O)}function fO(y,_,C){var P=_.pendingProps,O=P.children,U=y!==null?y.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(Sv,as),as|=C;else{if(!(C&1073741824))return y=U!==null?U.baseLanes|C:C,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:y,cachePool:null,transitions:null},_.updateQueue=null,Vn(Sv,as),as|=y,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=U!==null?U.baseLanes:C,Vn(Sv,as),as|=P}else U!==null?(P=U.baseLanes|C,_.memoizedState=null):P=C,Vn(Sv,as),as|=P;return to(y,_,O,C),_.child}function hO(y,_){var C=_.ref;(y===null&&C!==null||y!==null&&y.ref!==C)&&(_.flags|=512,_.flags|=2097152)}function HC(y,_,C,P,O){var U=Io(C)?kh:Ba.current;return U=fv(_,U),mv(_,O),C=DC(y,_,C,P,U,O),P=IC(),y!==null&&!No?(_.updateQueue=y.updateQueue,_.flags&=-2053,y.lanes&=~O,Zu(y,_,O)):(Jn&&P&&vC(_),_.flags|=1,to(y,_,C,O),_.child)}function dO(y,_,C,P,O){if(Io(C)){var U=!0;ox(_)}else U=!1;if(mv(_,O),_.stateNode===null)Cx(y,_),tO(_,C,P),zC(_,C,P,O),P=!0;else if(y===null){var K=_.stateNode,re=_.memoizedProps;K.props=re;var ue=K.context,Pe=C.contextType;typeof Pe=="object"&&Pe!==null?Pe=Ts(Pe):(Pe=Io(C)?kh:Ba.current,Pe=fv(_,Pe));var Je=C.getDerivedStateFromProps,it=typeof Je=="function"||typeof K.getSnapshotBeforeUpdate=="function";it||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(re!==P||ue!==Pe)&&rO(_,K,P,Pe),cf=!1;var Ke=_.memoizedState;K.state=Ke,vx(_,P,K,O),ue=_.memoizedState,re!==P||Ke!==ue||Do.current||cf?(typeof Je=="function"&&(BC(_,C,Je,P),ue=_.memoizedState),(re=cf||eO(_,C,re,P,Ke,ue,Pe))?(it||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(_.flags|=4194308)):(typeof K.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=ue),K.props=P,K.state=ue,K.context=Pe,P=re):(typeof K.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{K=_.stateNode,RN(y,_),re=_.memoizedProps,Pe=_.type===_.elementType?re:dl(_.type,re),K.props=Pe,it=_.pendingProps,Ke=K.context,ue=C.contextType,typeof ue=="object"&&ue!==null?ue=Ts(ue):(ue=Io(C)?kh:Ba.current,ue=fv(_,ue));var Dt=C.getDerivedStateFromProps;(Je=typeof Dt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(re!==it||Ke!==ue)&&rO(_,K,P,ue),cf=!1,Ke=_.memoizedState,K.state=Ke,vx(_,P,K,O);var Ut=_.memoizedState;re!==it||Ke!==Ut||Do.current||cf?(typeof Dt=="function"&&(BC(_,C,Dt,P),Ut=_.memoizedState),(Pe=cf||eO(_,C,Pe,P,Ke,Ut,ue)||!1)?(Je||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(P,Ut,ue),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(P,Ut,ue)),typeof K.componentDidUpdate=="function"&&(_.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof K.componentDidUpdate!="function"||re===y.memoizedProps&&Ke===y.memoizedState||(_.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||re===y.memoizedProps&&Ke===y.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Ut),K.props=P,K.state=Ut,K.context=ue,P=Pe):(typeof K.componentDidUpdate!="function"||re===y.memoizedProps&&Ke===y.memoizedState||(_.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||re===y.memoizedProps&&Ke===y.memoizedState||(_.flags|=1024),P=!1)}return GC(y,_,C,P,U,O)}function GC(y,_,C,P,O,U){hO(y,_);var K=(_.flags&128)!==0;if(!P&&!K)return O&&yN(_,C,!1),Zu(y,_,U);P=_.stateNode,Roe.current=_;var re=K&&typeof C.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,y!==null&&K?(_.child=vv(_,y.child,null,U),_.child=vv(_,null,re,U)):to(y,_,re,U),_.memoizedState=P.state,O&&yN(_,C,!0),_.child}function pO(y){var _=y.stateNode;_.pendingContext?gN(y,_.pendingContext,_.pendingContext!==_.context):_.context&&gN(y,_.context,!1),EC(y,_.containerInfo)}function vO(y,_,C,P,O){return pv(),_C(O),_.flags|=256,to(y,_,C,P),_.child}var WC={dehydrated:null,treeContext:null,retryLane:0};function $C(y){return{baseLanes:y,cachePool:null,transitions:null}}function gO(y,_,C){var P=_.pendingProps,O=ii.current,U=!1,K=(_.flags&128)!==0,re;if((re=K)||(re=y!==null&&y.memoizedState===null?!1:(O&2)!==0),re?(U=!0,_.flags&=-129):(y===null||y.memoizedState!==null)&&(O|=1),Vn(ii,O&1),y===null)return yC(_),y=_.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(_.mode&1?y.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(K=P.children,y=P.fallback,U?(P=_.mode,U=_.child,K={mode:"hidden",children:K},!(P&1)&&U!==null?(U.childLanes=0,U.pendingProps=K):U=Fx(K,P,0,null),y=jh(y,P,C,null),U.return=_,y.return=_,U.sibling=y,_.child=U,_.child.memoizedState=$C(C),_.memoizedState=WC,y):jC(_,K));if(O=y.memoizedState,O!==null&&(re=O.dehydrated,re!==null))return Poe(y,_,K,P,re,O,C);if(U){U=P.fallback,K=_.mode,O=y.child,re=O.sibling;var ue={mode:"hidden",children:P.children};return!(K&1)&&_.child!==O?(P=_.child,P.childLanes=0,P.pendingProps=ue,_.deletions=null):(P=mf(O,ue),P.subtreeFlags=O.subtreeFlags&14680064),re!==null?U=mf(re,U):(U=jh(U,K,C,null),U.flags|=2),U.return=_,P.return=_,P.sibling=U,_.child=P,P=U,U=_.child,K=y.child.memoizedState,K=K===null?$C(C):{baseLanes:K.baseLanes|C,cachePool:null,transitions:K.transitions},U.memoizedState=K,U.childLanes=y.childLanes&~C,_.memoizedState=WC,P}return U=y.child,y=U.sibling,P=mf(U,{mode:"visible",children:P.children}),!(_.mode&1)&&(P.lanes=C),P.return=_,P.sibling=null,y!==null&&(C=_.deletions,C===null?(_.deletions=[y],_.flags|=16):C.push(y)),_.child=P,_.memoizedState=null,P}function jC(y,_){return _=Fx({mode:"visible",children:_},y.mode,0,null),_.return=y,y.child=_}function Tx(y,_,C,P){return P!==null&&_C(P),vv(_,y.child,null,C),y=jC(_,_.pendingProps.children),y.flags|=2,_.memoizedState=null,y}function Poe(y,_,C,P,O,U,K){if(C)return _.flags&256?(_.flags&=-257,P=UC(Error(r(422))),Tx(y,_,K,P)):_.memoizedState!==null?(_.child=y.child,_.flags|=128,null):(U=P.fallback,O=_.mode,P=Fx({mode:"visible",children:P.children},O,0,null),U=jh(U,O,K,null),U.flags|=2,P.return=_,U.return=_,P.sibling=U,_.child=P,_.mode&1&&vv(_,y.child,null,K),_.child.memoizedState=$C(K),_.memoizedState=WC,U);if(!(_.mode&1))return Tx(y,_,K,null);if(O.data==="$!"){if(P=O.nextSibling&&O.nextSibling.dataset,P)var re=P.dgst;return P=re,U=Error(r(419)),P=UC(U,P,void 0),Tx(y,_,K,P)}if(re=(K&y.childLanes)!==0,No||re){if(P=ua,P!==null){switch(K&-K){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=O&(P.suspendedLanes|K)?0:O,O!==0&&O!==U.retryLane&&(U.retryLane=O,Yu(y,O),gl(P,y,O,-1))}return lE(),P=UC(Error(r(421))),Tx(y,_,K,P)}return O.data==="$?"?(_.flags|=128,_.child=y.child,_=Goe.bind(null,y),O._reactRetry=_,null):(y=U.treeContext,is=of(O.nextSibling),ns=_,Jn=!0,hl=null,y!==null&&(bs[ws++]=Xu,bs[ws++]=Ku,bs[ws++]=Fh,Xu=y.id,Ku=y.overflow,Fh=_),_=jC(_,P.children),_.flags|=4096,_)}function mO(y,_,C){y.lanes|=_;var P=y.alternate;P!==null&&(P.lanes|=_),wC(y.return,_,C)}function XC(y,_,C,P,O){var U=y.memoizedState;U===null?y.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:C,tailMode:O}:(U.isBackwards=_,U.rendering=null,U.renderingStartTime=0,U.last=P,U.tail=C,U.tailMode=O)}function yO(y,_,C){var P=_.pendingProps,O=P.revealOrder,U=P.tail;if(to(y,_,P.children,C),P=ii.current,P&2)P=P&1|2,_.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=_.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&mO(y,C,_);else if(y.tag===19)mO(y,C,_);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===_)break e;for(;y.sibling===null;){if(y.return===null||y.return===_)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}P&=1}if(Vn(ii,P),!(_.mode&1))_.memoizedState=null;else switch(O){case"forwards":for(C=_.child,O=null;C!==null;)y=C.alternate,y!==null&&gx(y)===null&&(O=C),C=C.sibling;C=O,C===null?(O=_.child,_.child=null):(O=C.sibling,C.sibling=null),XC(_,!1,O,C,U);break;case"backwards":for(C=null,O=_.child,_.child=null;O!==null;){if(y=O.alternate,y!==null&&gx(y)===null){_.child=O;break}y=O.sibling,O.sibling=C,C=O,O=y}XC(_,!0,C,null,U);break;case"together":XC(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Cx(y,_){!(_.mode&1)&&y!==null&&(y.alternate=null,_.alternate=null,_.flags|=2)}function Zu(y,_,C){if(y!==null&&(_.dependencies=y.dependencies),Hh|=_.lanes,!(C&_.childLanes))return null;if(y!==null&&_.child!==y.child)throw Error(r(153));if(_.child!==null){for(y=_.child,C=mf(y,y.pendingProps),_.child=C,C.return=_;y.sibling!==null;)y=y.sibling,C=C.sibling=mf(y,y.pendingProps),C.return=_;C.sibling=null}return _.child}function Loe(y,_,C){switch(_.tag){case 3:pO(_),pv();break;case 5:DN(_);break;case 1:Io(_.type)&&ox(_);break;case 4:EC(_,_.stateNode.containerInfo);break;case 10:var P=_.type._context,O=_.memoizedProps.value;Vn(hx,P._currentValue),P._currentValue=O;break;case 13:if(P=_.memoizedState,P!==null)return P.dehydrated!==null?(Vn(ii,ii.current&1),_.flags|=128,null):C&_.child.childLanes?gO(y,_,C):(Vn(ii,ii.current&1),y=Zu(y,_,C),y!==null?y.sibling:null);Vn(ii,ii.current&1);break;case 19:if(P=(C&_.childLanes)!==0,y.flags&128){if(P)return yO(y,_,C);_.flags|=128}if(O=_.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Vn(ii,ii.current),P)break;return null;case 22:case 23:return _.lanes=0,fO(y,_,C)}return Zu(y,_,C)}var _O,KC,xO,SO;_O=function(y,_){for(var C=_.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===_)break;for(;C.sibling===null;){if(C.return===null||C.return===_)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},KC=function(){},xO=function(y,_,C,P){var O=y.memoizedProps;if(O!==P){y=_.stateNode,Uh(tu.current);var U=null;switch(C){case"input":O=Q(y,O),P=Q(y,P),U=[];break;case"select":O=W({},O,{value:void 0}),P=W({},P,{value:void 0}),U=[];break;case"textarea":O=j(y,O),P=j(y,P),U=[];break;default:typeof O.onClick!="function"&&typeof P.onClick=="function"&&(y.onclick=nx)}Qt(C,P);var K;C=null;for(Pe in O)if(!P.hasOwnProperty(Pe)&&O.hasOwnProperty(Pe)&&O[Pe]!=null)if(Pe==="style"){var re=O[Pe];for(K in re)re.hasOwnProperty(K)&&(C||(C={}),C[K]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(i.hasOwnProperty(Pe)?U||(U=[]):(U=U||[]).push(Pe,null));for(Pe in P){var ue=P[Pe];if(re=O!=null?O[Pe]:void 0,P.hasOwnProperty(Pe)&&ue!==re&&(ue!=null||re!=null))if(Pe==="style")if(re){for(K in re)!re.hasOwnProperty(K)||ue&&ue.hasOwnProperty(K)||(C||(C={}),C[K]="");for(K in ue)ue.hasOwnProperty(K)&&re[K]!==ue[K]&&(C||(C={}),C[K]=ue[K])}else C||(U||(U=[]),U.push(Pe,C)),C=ue;else Pe==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,re=re?re.__html:void 0,ue!=null&&re!==ue&&(U=U||[]).push(Pe,ue)):Pe==="children"?typeof ue!="string"&&typeof ue!="number"||(U=U||[]).push(Pe,""+ue):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Pe)?(ue!=null&&Pe==="onScroll"&&$n("scroll",y),U||re===ue||(U=[])):(U=U||[]).push(Pe,ue))}C&&(U=U||[]).push("style",C);var Pe=U;(_.updateQueue=Pe)&&(_.flags|=4)}},SO=function(y,_,C,P){C!==P&&(_.flags|=4)};function Z0(y,_){if(!Jn)switch(y.tailMode){case"hidden":_=y.tail;for(var C=null;_!==null;)_.alternate!==null&&(C=_),_=_.sibling;C===null?y.tail=null:C.sibling=null;break;case"collapsed":C=y.tail;for(var P=null;C!==null;)C.alternate!==null&&(P=C),C=C.sibling;P===null?_||y.tail===null?y.tail=null:y.tail.sibling=null:P.sibling=null}}function Ua(y){var _=y.alternate!==null&&y.alternate.child===y.child,C=0,P=0;if(_)for(var O=y.child;O!==null;)C|=O.lanes|O.childLanes,P|=O.subtreeFlags&14680064,P|=O.flags&14680064,O.return=y,O=O.sibling;else for(O=y.child;O!==null;)C|=O.lanes|O.childLanes,P|=O.subtreeFlags,P|=O.flags,O.return=y,O=O.sibling;return y.subtreeFlags|=P,y.childLanes=C,_}function Doe(y,_,C){var P=_.pendingProps;switch(gC(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ua(_),null;case 1:return Io(_.type)&&ax(),Ua(_),null;case 3:return P=_.stateNode,yv(),jn(Do),jn(Ba),RC(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(y===null||y.child===null)&&(cx(_)?_.flags|=4:y===null||y.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,hl!==null&&(aE(hl),hl=null))),KC(y,_),Ua(_),null;case 5:AC(_);var O=Uh(j0.current);if(C=_.type,y!==null&&_.stateNode!=null)xO(y,_,C,P,O),y.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(r(166));return Ua(_),null}if(y=Uh(tu.current),cx(_)){P=_.stateNode,C=_.type;var U=_.memoizedProps;switch(P[eu]=_,P[V0]=U,y=(_.mode&1)!==0,C){case"dialog":$n("cancel",P),$n("close",P);break;case"iframe":case"object":case"embed":$n("load",P);break;case"video":case"audio":for(O=0;O<B0.length;O++)$n(B0[O],P);break;case"source":$n("error",P);break;case"img":case"image":case"link":$n("error",P),$n("load",P);break;case"details":$n("toggle",P);break;case"input":tt(P,U),$n("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!U.multiple},$n("invalid",P);break;case"textarea":ie(P,U),$n("invalid",P)}Qt(C,U),O=null;for(var K in U)if(U.hasOwnProperty(K)){var re=U[K];K==="children"?typeof re=="string"?P.textContent!==re&&(U.suppressHydrationWarning!==!0&&rx(P.textContent,re,y),O=["children",re]):typeof re=="number"&&P.textContent!==""+re&&(U.suppressHydrationWarning!==!0&&rx(P.textContent,re,y),O=["children",""+re]):i.hasOwnProperty(K)&&re!=null&&K==="onScroll"&&$n("scroll",P)}switch(C){case"input":_e(P),$e(P,U,!0);break;case"textarea":_e(P),ye(P);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(P.onclick=nx)}P=O,_.updateQueue=P,P!==null&&(_.flags|=4)}else{K=O.nodeType===9?O:O.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=me(C)),y==="http://www.w3.org/1999/xhtml"?C==="script"?(y=K.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof P.is=="string"?y=K.createElement(C,{is:P.is}):(y=K.createElement(C),C==="select"&&(K=y,P.multiple?K.multiple=!0:P.size&&(K.size=P.size))):y=K.createElementNS(y,C),y[eu]=_,y[V0]=P,_O(y,_,!1,!1),_.stateNode=y;e:{switch(K=zt(C,P),C){case"dialog":$n("cancel",y),$n("close",y),O=P;break;case"iframe":case"object":case"embed":$n("load",y),O=P;break;case"video":case"audio":for(O=0;O<B0.length;O++)$n(B0[O],y);O=P;break;case"source":$n("error",y),O=P;break;case"img":case"image":case"link":$n("error",y),$n("load",y),O=P;break;case"details":$n("toggle",y),O=P;break;case"input":tt(y,P),O=Q(y,P),$n("invalid",y);break;case"option":O=P;break;case"select":y._wrapperState={wasMultiple:!!P.multiple},O=W({},P,{value:void 0}),$n("invalid",y);break;case"textarea":ie(y,P),O=j(y,P),$n("invalid",y);break;default:O=P}Qt(C,O),re=O;for(U in re)if(re.hasOwnProperty(U)){var ue=re[U];U==="style"?ht(y,ue):U==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&He(y,ue)):U==="children"?typeof ue=="string"?(C!=="textarea"||ue!=="")&&Et(y,ue):typeof ue=="number"&&Et(y,""+ue):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(i.hasOwnProperty(U)?ue!=null&&U==="onScroll"&&$n("scroll",y):ue!=null&&S(y,U,ue,K))}switch(C){case"input":_e(y),$e(y,P,!1);break;case"textarea":_e(y),ye(y);break;case"option":P.value!=null&&y.setAttribute("value",""+le(P.value));break;case"select":y.multiple=!!P.multiple,U=P.value,U!=null?q(y,!!P.multiple,U,!1):P.defaultValue!=null&&q(y,!!P.multiple,P.defaultValue,!0);break;default:typeof O.onClick=="function"&&(y.onclick=nx)}switch(C){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Ua(_),null;case 6:if(y&&_.stateNode!=null)SO(y,_,y.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(r(166));if(C=Uh(j0.current),Uh(tu.current),cx(_)){if(P=_.stateNode,C=_.memoizedProps,P[eu]=_,(U=P.nodeValue!==C)&&(y=ns,y!==null))switch(y.tag){case 3:rx(P.nodeValue,C,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&rx(P.nodeValue,C,(y.mode&1)!==0)}U&&(_.flags|=4)}else P=(C.nodeType===9?C:C.ownerDocument).createTextNode(P),P[eu]=_,_.stateNode=P}return Ua(_),null;case 13:if(jn(ii),P=_.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(Jn&&is!==null&&_.mode&1&&!(_.flags&128))TN(),pv(),_.flags|=98560,U=!1;else if(U=cx(_),P!==null&&P.dehydrated!==null){if(y===null){if(!U)throw Error(r(318));if(U=_.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(r(317));U[eu]=_}else pv(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;Ua(_),U=!1}else hl!==null&&(aE(hl),hl=null),U=!0;if(!U)return _.flags&65536?_:null}return _.flags&128?(_.lanes=C,_):(P=P!==null,P!==(y!==null&&y.memoizedState!==null)&&P&&(_.child.flags|=8192,_.mode&1&&(y===null||ii.current&1?Hi===0&&(Hi=3):lE())),_.updateQueue!==null&&(_.flags|=4),Ua(_),null);case 4:return yv(),KC(y,_),y===null&&z0(_.stateNode.containerInfo),Ua(_),null;case 10:return bC(_.type._context),Ua(_),null;case 17:return Io(_.type)&&ax(),Ua(_),null;case 19:if(jn(ii),U=_.memoizedState,U===null)return Ua(_),null;if(P=(_.flags&128)!==0,K=U.rendering,K===null)if(P)Z0(U,!1);else{if(Hi!==0||y!==null&&y.flags&128)for(y=_.child;y!==null;){if(K=gx(y),K!==null){for(_.flags|=128,Z0(U,!1),P=K.updateQueue,P!==null&&(_.updateQueue=P,_.flags|=4),_.subtreeFlags=0,P=C,C=_.child;C!==null;)U=C,y=P,U.flags&=14680066,K=U.alternate,K===null?(U.childLanes=0,U.lanes=y,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=K.childLanes,U.lanes=K.lanes,U.child=K.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=K.memoizedProps,U.memoizedState=K.memoizedState,U.updateQueue=K.updateQueue,U.type=K.type,y=K.dependencies,U.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),C=C.sibling;return Vn(ii,ii.current&1|2),_.child}y=y.sibling}U.tail!==null&&fe()>bv&&(_.flags|=128,P=!0,Z0(U,!1),_.lanes=4194304)}else{if(!P)if(y=gx(K),y!==null){if(_.flags|=128,P=!0,C=y.updateQueue,C!==null&&(_.updateQueue=C,_.flags|=4),Z0(U,!0),U.tail===null&&U.tailMode==="hidden"&&!K.alternate&&!Jn)return Ua(_),null}else 2*fe()-U.renderingStartTime>bv&&C!==1073741824&&(_.flags|=128,P=!0,Z0(U,!1),_.lanes=4194304);U.isBackwards?(K.sibling=_.child,_.child=K):(C=U.last,C!==null?C.sibling=K:_.child=K,U.last=K)}return U.tail!==null?(_=U.tail,U.rendering=_,U.tail=_.sibling,U.renderingStartTime=fe(),_.sibling=null,C=ii.current,Vn(ii,P?C&1|2:C&1),_):(Ua(_),null);case 22:case 23:return sE(),P=_.memoizedState!==null,y!==null&&y.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?as&1073741824&&(Ua(_),_.subtreeFlags&6&&(_.flags|=8192)):Ua(_),null;case 24:return null;case 25:return null}throw Error(r(156,_.tag))}function Ioe(y,_){switch(gC(_),_.tag){case 1:return Io(_.type)&&ax(),y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 3:return yv(),jn(Do),jn(Ba),RC(),y=_.flags,y&65536&&!(y&128)?(_.flags=y&-65537|128,_):null;case 5:return AC(_),null;case 13:if(jn(ii),y=_.memoizedState,y!==null&&y.dehydrated!==null){if(_.alternate===null)throw Error(r(340));pv()}return y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 19:return jn(ii),null;case 4:return yv(),null;case 10:return bC(_.type._context),null;case 22:case 23:return sE(),null;case 24:return null;default:return null}}var Ex=!1,Va=!1,Noe=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function xv(y,_){var C=y.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(P){ci(y,_,P)}else C.current=null}function YC(y,_,C){try{C()}catch(P){ci(y,_,P)}}var bO=!1;function Ooe(y,_){if(sC=$2,y=eN(),Q4(y)){if("selectionStart"in y)var C={start:y.selectionStart,end:y.selectionEnd};else e:{C=(C=y.ownerDocument)&&C.defaultView||window;var P=C.getSelection&&C.getSelection();if(P&&P.rangeCount!==0){C=P.anchorNode;var O=P.anchorOffset,U=P.focusNode;P=P.focusOffset;try{C.nodeType,U.nodeType}catch(dt){C=null;break e}var K=0,re=-1,ue=-1,Pe=0,Je=0,it=y,Ke=null;t:for(;;){for(var Dt;it!==C||O!==0&&it.nodeType!==3||(re=K+O),it!==U||P!==0&&it.nodeType!==3||(ue=K+P),it.nodeType===3&&(K+=it.nodeValue.length),(Dt=it.firstChild)!==null;)Ke=it,it=Dt;for(;;){if(it===y)break t;if(Ke===C&&++Pe===O&&(re=K),Ke===U&&++Je===P&&(ue=K),(Dt=it.nextSibling)!==null)break;it=Ke,Ke=it.parentNode}it=Dt}C=re===-1||ue===-1?null:{start:re,end:ue}}else C=null}C=C||{start:0,end:0}}else C=null;for(lC={focusedElem:y,selectionRange:C},$2=!1,Bt=_;Bt!==null;)if(_=Bt,y=_.child,(_.subtreeFlags&1028)!==0&&y!==null)y.return=_,Bt=y;else for(;Bt!==null;){_=Bt;try{var Ut=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var $t=Ut.memoizedProps,xi=Ut.memoizedState,be=_.stateNode,ge=be.getSnapshotBeforeUpdate(_.elementType===_.type?$t:dl(_.type,$t),xi);be.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Te=_.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(dt){ci(_,_.return,dt)}if(y=_.sibling,y!==null){y.return=_.return,Bt=y;break}Bt=_.return}return Ut=bO,bO=!1,Ut}function J0(y,_,C){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var O=P=P.next;do{if((O.tag&y)===y){var U=O.destroy;O.destroy=void 0,U!==void 0&&YC(_,C,U)}O=O.next}while(O!==P)}}function Ax(y,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&y)===y){var P=C.create;C.destroy=P()}C=C.next}while(C!==_)}}function qC(y){var _=y.ref;if(_!==null){var C=y.stateNode;switch(y.tag){case 5:y=C;break;default:y=C}typeof _=="function"?_(y):_.current=y}}function wO(y){var _=y.alternate;_!==null&&(y.alternate=null,wO(_)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(_=y.stateNode,_!==null&&(delete _[eu],delete _[V0],delete _[hC],delete _[moe],delete _[yoe])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function TO(y){return y.tag===5||y.tag===3||y.tag===4}function CO(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||TO(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function ZC(y,_,C){var P=y.tag;if(P===5||P===6)y=y.stateNode,_?C.nodeType===8?C.parentNode.insertBefore(y,_):C.insertBefore(y,_):(C.nodeType===8?(_=C.parentNode,_.insertBefore(y,C)):(_=C,_.appendChild(y)),C=C._reactRootContainer,C!=null||_.onclick!==null||(_.onclick=nx));else if(P!==4&&(y=y.child,y!==null))for(ZC(y,_,C),y=y.sibling;y!==null;)ZC(y,_,C),y=y.sibling}function JC(y,_,C){var P=y.tag;if(P===5||P===6)y=y.stateNode,_?C.insertBefore(y,_):C.appendChild(y);else if(P!==4&&(y=y.child,y!==null))for(JC(y,_,C),y=y.sibling;y!==null;)JC(y,_,C),y=y.sibling}var wa=null,pl=!1;function hf(y,_,C){for(C=C.child;C!==null;)EO(y,_,C),C=C.sibling}function EO(y,_,C){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(It,C)}catch(re){}switch(C.tag){case 5:Va||xv(C,_);case 6:var P=wa,O=pl;wa=null,hf(y,_,C),wa=P,pl=O,wa!==null&&(pl?(y=wa,C=C.stateNode,y.nodeType===8?y.parentNode.removeChild(C):y.removeChild(C)):wa.removeChild(C.stateNode));break;case 18:wa!==null&&(pl?(y=wa,C=C.stateNode,y.nodeType===8?fC(y.parentNode,C):y.nodeType===1&&fC(y,C),Ql(y)):fC(wa,C.stateNode));break;case 4:P=wa,O=pl,wa=C.stateNode.containerInfo,pl=!0,hf(y,_,C),wa=P,pl=O;break;case 0:case 11:case 14:case 15:if(!Va&&(P=C.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){O=P=P.next;do{var U=O,K=U.destroy;U=U.tag,K!==void 0&&(U&2||U&4)&&YC(C,_,K),O=O.next}while(O!==P)}hf(y,_,C);break;case 1:if(!Va&&(xv(C,_),P=C.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=C.memoizedProps,P.state=C.memoizedState,P.componentWillUnmount()}catch(re){ci(C,_,re)}hf(y,_,C);break;case 21:hf(y,_,C);break;case 22:C.mode&1?(Va=(P=Va)||C.memoizedState!==null,hf(y,_,C),Va=P):hf(y,_,C);break;default:hf(y,_,C)}}function AO(y){var _=y.updateQueue;if(_!==null){y.updateQueue=null;var C=y.stateNode;C===null&&(C=y.stateNode=new Noe),_.forEach(function(P){var O=Woe.bind(null,y,P);C.has(P)||(C.add(P),P.then(O,O))})}}function vl(y,_){var C=_.deletions;if(C!==null)for(var P=0;P<C.length;P++){var O=C[P];try{var U=y,K=_,re=K;e:for(;re!==null;){switch(re.tag){case 5:wa=re.stateNode,pl=!1;break e;case 3:wa=re.stateNode.containerInfo,pl=!0;break e;case 4:wa=re.stateNode.containerInfo,pl=!0;break e}re=re.return}if(wa===null)throw Error(r(160));EO(U,K,O),wa=null,pl=!1;var ue=O.alternate;ue!==null&&(ue.return=null),O.return=null}catch(Pe){ci(O,_,Pe)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)MO(_,y),_=_.sibling}function MO(y,_){var C=y.alternate,P=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(vl(_,y),nu(y),P&4){try{J0(3,y,y.return),Ax(3,y)}catch($t){ci(y,y.return,$t)}try{J0(5,y,y.return)}catch($t){ci(y,y.return,$t)}}break;case 1:vl(_,y),nu(y),P&512&&C!==null&&xv(C,C.return);break;case 5:if(vl(_,y),nu(y),P&512&&C!==null&&xv(C,C.return),y.flags&32){var O=y.stateNode;try{Et(O,"")}catch($t){ci(y,y.return,$t)}}if(P&4&&(O=y.stateNode,O!=null)){var U=y.memoizedProps,K=C!==null?C.memoizedProps:U,re=y.type,ue=y.updateQueue;if(y.updateQueue=null,ue!==null)try{re==="input"&&U.type==="radio"&&U.name!=null&&je(O,U),zt(re,K);var Pe=zt(re,U);for(K=0;K<ue.length;K+=2){var Je=ue[K],it=ue[K+1];Je==="style"?ht(O,it):Je==="dangerouslySetInnerHTML"?He(O,it):Je==="children"?Et(O,it):S(O,Je,it,Pe)}switch(re){case"input":Ye(O,U);break;case"textarea":Ce(O,U);break;case"select":var Ke=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!U.multiple;var Dt=U.value;Dt!=null?q(O,!!U.multiple,Dt,!1):Ke!==!!U.multiple&&(U.defaultValue!=null?q(O,!!U.multiple,U.defaultValue,!0):q(O,!!U.multiple,U.multiple?[]:"",!1))}O[V0]=U}catch($t){ci(y,y.return,$t)}}break;case 6:if(vl(_,y),nu(y),P&4){if(y.stateNode===null)throw Error(r(162));O=y.stateNode,U=y.memoizedProps;try{O.nodeValue=U}catch($t){ci(y,y.return,$t)}}break;case 3:if(vl(_,y),nu(y),P&4&&C!==null&&C.memoizedState.isDehydrated)try{Ql(_.containerInfo)}catch($t){ci(y,y.return,$t)}break;case 4:vl(_,y),nu(y);break;case 13:vl(_,y),nu(y),O=y.child,O.flags&8192&&(U=O.memoizedState!==null,O.stateNode.isHidden=U,!U||O.alternate!==null&&O.alternate.memoizedState!==null||(tE=fe())),P&4&&AO(y);break;case 22:if(Je=C!==null&&C.memoizedState!==null,y.mode&1?(Va=(Pe=Va)||Je,vl(_,y),Va=Pe):vl(_,y),nu(y),P&8192){if(Pe=y.memoizedState!==null,(y.stateNode.isHidden=Pe)&&!Je&&y.mode&1)for(Bt=y,Je=y.child;Je!==null;){for(it=Bt=Je;Bt!==null;){switch(Ke=Bt,Dt=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:J0(4,Ke,Ke.return);break;case 1:xv(Ke,Ke.return);var Ut=Ke.stateNode;if(typeof Ut.componentWillUnmount=="function"){P=Ke,C=Ke.return;try{_=P,Ut.props=_.memoizedProps,Ut.state=_.memoizedState,Ut.componentWillUnmount()}catch($t){ci(P,C,$t)}}break;case 5:xv(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){LO(it);continue}}Dt!==null?(Dt.return=Ke,Bt=Dt):LO(it)}Je=Je.sibling}e:for(Je=null,it=y;;){if(it.tag===5){if(Je===null){Je=it;try{O=it.stateNode,Pe?(U=O.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(re=it.stateNode,ue=it.memoizedProps.style,K=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,re.style.display=lt("display",K))}catch($t){ci(y,y.return,$t)}}}else if(it.tag===6){if(Je===null)try{it.stateNode.nodeValue=Pe?"":it.memoizedProps}catch($t){ci(y,y.return,$t)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===y)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===y)break e;for(;it.sibling===null;){if(it.return===null||it.return===y)break e;Je===it&&(Je=null),it=it.return}Je===it&&(Je=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:vl(_,y),nu(y),P&4&&AO(y);break;case 21:break;default:vl(_,y),nu(y)}}function nu(y){var _=y.flags;if(_&2){try{e:{for(var C=y.return;C!==null;){if(TO(C)){var P=C;break e}C=C.return}throw Error(r(160))}switch(P.tag){case 5:var O=P.stateNode;P.flags&32&&(Et(O,""),P.flags&=-33);var U=CO(y);JC(y,U,O);break;case 3:case 4:var K=P.stateNode.containerInfo,re=CO(y);ZC(y,re,K);break;default:throw Error(r(161))}}catch(ue){ci(y,y.return,ue)}y.flags&=-3}_&4096&&(y.flags&=-4097)}function koe(y,_,C){Bt=y,RO(y)}function RO(y,_,C){for(var P=(y.mode&1)!==0;Bt!==null;){var O=Bt,U=O.child;if(O.tag===22&&P){var K=O.memoizedState!==null||Ex;if(!K){var re=O.alternate,ue=re!==null&&re.memoizedState!==null||Va;re=Ex;var Pe=Va;if(Ex=K,(Va=ue)&&!Pe)for(Bt=O;Bt!==null;)K=Bt,ue=K.child,K.tag===22&&K.memoizedState!==null?DO(O):ue!==null?(ue.return=K,Bt=ue):DO(O);for(;U!==null;)Bt=U,RO(U),U=U.sibling;Bt=O,Ex=re,Va=Pe}PO(y)}else O.subtreeFlags&8772&&U!==null?(U.return=O,Bt=U):PO(y)}}function PO(y){for(;Bt!==null;){var _=Bt;if(_.flags&8772){var C=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:Va||Ax(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!Va)if(C===null)P.componentDidMount();else{var O=_.elementType===_.type?C.memoizedProps:dl(_.type,C.memoizedProps);P.componentDidUpdate(O,C.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var U=_.updateQueue;U!==null&&LN(_,U,P);break;case 3:var K=_.updateQueue;if(K!==null){if(C=null,_.child!==null)switch(_.child.tag){case 5:C=_.child.stateNode;break;case 1:C=_.child.stateNode}LN(_,K,C)}break;case 5:var re=_.stateNode;if(C===null&&_.flags&4){C=re;var ue=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&C.focus();break;case"img":ue.src&&(C.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Pe=_.alternate;if(Pe!==null){var Je=Pe.memoizedState;if(Je!==null){var it=Je.dehydrated;it!==null&&Ql(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Va||_.flags&512&&qC(_)}catch(Ke){ci(_,_.return,Ke)}}if(_===y){Bt=null;break}if(C=_.sibling,C!==null){C.return=_.return,Bt=C;break}Bt=_.return}}function LO(y){for(;Bt!==null;){var _=Bt;if(_===y){Bt=null;break}var C=_.sibling;if(C!==null){C.return=_.return,Bt=C;break}Bt=_.return}}function DO(y){for(;Bt!==null;){var _=Bt;try{switch(_.tag){case 0:case 11:case 15:var C=_.return;try{Ax(4,_)}catch(ue){ci(_,C,ue)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var O=_.return;try{P.componentDidMount()}catch(ue){ci(_,O,ue)}}var U=_.return;try{qC(_)}catch(ue){ci(_,U,ue)}break;case 5:var K=_.return;try{qC(_)}catch(ue){ci(_,K,ue)}}}catch(ue){ci(_,_.return,ue)}if(_===y){Bt=null;break}var re=_.sibling;if(re!==null){re.return=_.return,Bt=re;break}Bt=_.return}}var Foe=Math.ceil,Mx=b.ReactCurrentDispatcher,QC=b.ReactCurrentOwner,Es=b.ReactCurrentBatchConfig,fn=0,ua=null,Pi=null,Ta=0,as=0,Sv=sf(0),Hi=0,Q0=null,Hh=0,Rx=0,eE=0,ey=null,Oo=null,tE=0,bv=1/0,Ju=null,Px=!1,rE=null,df=null,Lx=!1,pf=null,Dx=0,ty=0,nE=null,Ix=-1,Nx=0;function ro(){return fn&6?fe():Ix!==-1?Ix:Ix=fe()}function vf(y){return y.mode&1?fn&2&&Ta!==0?Ta&-Ta:xoe.transition!==null?(Nx===0&&(Nx=cn()),Nx):(y=Tr,y!==0||(y=window.event,y=y===void 0?16:N7(y.type)),y):1}function gl(y,_,C,P){if(50<ty)throw ty=0,nE=null,Error(r(185));Sn(y,C,P),(!(fn&2)||y!==ua)&&(y===ua&&(!(fn&2)&&(Rx|=C),Hi===4&&gf(y,Ta)),ko(y,P),C===1&&fn===0&&!(_.mode&1)&&(bv=fe()+500,sx&&uf()))}function ko(y,_){var C=y.callbackNode;Yr(y,_);var P=$r(y,y===ua?Ta:0);if(P===0)C!==null&&de(C),y.callbackNode=null,y.callbackPriority=0;else if(_=P&-P,y.callbackPriority!==_){if(C!=null&&de(C),_===1)y.tag===0?_oe(NO.bind(null,y)):_N(NO.bind(null,y)),voe(function(){!(fn&6)&&uf()}),C=null;else{switch(xs(P)){case 1:C=St;break;case 4:C=Rt;break;case 16:C=Pt;break;case 536870912:C=ir;break;default:C=Pt}C=HO(C,IO.bind(null,y))}y.callbackPriority=_,y.callbackNode=C}}function IO(y,_){if(Ix=-1,Nx=0,fn&6)throw Error(r(327));var C=y.callbackNode;if(wv()&&y.callbackNode!==C)return null;var P=$r(y,y===ua?Ta:0);if(P===0)return null;if(P&30||P&y.expiredLanes||_)_=Ox(y,P);else{_=P;var O=fn;fn|=2;var U=kO();(ua!==y||Ta!==_)&&(Ju=null,bv=fe()+500,Wh(y,_));do try{Uoe();break}catch(re){OO(y,re)}while(!0);SC(),Mx.current=U,fn=O,Pi!==null?_=0:(ua=null,Ta=0,_=Hi)}if(_!==0){if(_===2&&(O=xr(y),O!==0&&(P=O,_=iE(y,O))),_===1)throw C=Q0,Wh(y,0),gf(y,P),ko(y,fe()),C;if(_===6)gf(y,P);else{if(O=y.current.alternate,!(P&30)&&!Boe(O)&&(_=Ox(y,P),_===2&&(U=xr(y),U!==0&&(P=U,_=iE(y,U))),_===1))throw C=Q0,Wh(y,0),gf(y,P),ko(y,fe()),C;switch(y.finishedWork=O,y.finishedLanes=P,_){case 0:case 1:throw Error(r(345));case 2:$h(y,Oo,Ju);break;case 3:if(gf(y,P),(P&130023424)===P&&(_=tE+500-fe(),10<_)){if($r(y,0)!==0)break;if(O=y.suspendedLanes,(O&P)!==P){ro(),y.pingedLanes|=y.suspendedLanes&O;break}y.timeoutHandle=cC($h.bind(null,y,Oo,Ju),_);break}$h(y,Oo,Ju);break;case 4:if(gf(y,P),(P&4194240)===P)break;for(_=y.eventTimes,O=-1;0<P;){var K=31-Wr(P);U=1<<K,K=_[K],K>O&&(O=K),P&=~U}if(P=O,P=fe()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*Foe(P/1960))-P,10<P){y.timeoutHandle=cC($h.bind(null,y,Oo,Ju),P);break}$h(y,Oo,Ju);break;case 5:$h(y,Oo,Ju);break;default:throw Error(r(329))}}}return ko(y,fe()),y.callbackNode===C?IO.bind(null,y):null}function iE(y,_){var C=ey;return y.current.memoizedState.isDehydrated&&(Wh(y,_).flags|=256),y=Ox(y,_),y!==2&&(_=Oo,Oo=C,_!==null&&aE(_)),y}function aE(y){Oo===null?Oo=y:Oo.push.apply(Oo,y)}function Boe(y){for(var _=y;;){if(_.flags&16384){var C=_.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var P=0;P<C.length;P++){var O=C[P],U=O.getSnapshot;O=O.value;try{if(!fl(U(),O))return!1}catch(K){return!1}}}if(C=_.child,_.subtreeFlags&16384&&C!==null)C.return=_,_=C;else{if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function gf(y,_){for(_&=~eE,_&=~Rx,y.suspendedLanes|=_,y.pingedLanes&=~_,y=y.expirationTimes;0<_;){var C=31-Wr(_),P=1<<C;y[C]=-1,_&=~P}}function NO(y){if(fn&6)throw Error(r(327));wv();var _=$r(y,0);if(!(_&1))return ko(y,fe()),null;var C=Ox(y,_);if(y.tag!==0&&C===2){var P=xr(y);P!==0&&(_=P,C=iE(y,P))}if(C===1)throw C=Q0,Wh(y,0),gf(y,_),ko(y,fe()),C;if(C===6)throw Error(r(345));return y.finishedWork=y.current.alternate,y.finishedLanes=_,$h(y,Oo,Ju),ko(y,fe()),null}function oE(y,_){var C=fn;fn|=1;try{return y(_)}finally{fn=C,fn===0&&(bv=fe()+500,sx&&uf())}}function Gh(y){pf!==null&&pf.tag===0&&!(fn&6)&&wv();var _=fn;fn|=1;var C=Es.transition,P=Tr;try{if(Es.transition=null,Tr=1,y)return y()}finally{Tr=P,Es.transition=C,fn=_,!(fn&6)&&uf()}}function sE(){as=Sv.current,jn(Sv)}function Wh(y,_){y.finishedWork=null,y.finishedLanes=0;var C=y.timeoutHandle;if(C!==-1&&(y.timeoutHandle=-1,poe(C)),Pi!==null)for(C=Pi.return;C!==null;){var P=C;switch(gC(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&ax();break;case 3:yv(),jn(Do),jn(Ba),RC();break;case 5:AC(P);break;case 4:yv();break;case 13:jn(ii);break;case 19:jn(ii);break;case 10:bC(P.type._context);break;case 22:case 23:sE()}C=C.return}if(ua=y,Pi=y=mf(y.current,null),Ta=as=_,Hi=0,Q0=null,eE=Rx=Hh=0,Oo=ey=null,zh!==null){for(_=0;_<zh.length;_++)if(C=zh[_],P=C.interleaved,P!==null){C.interleaved=null;var O=P.next,U=C.pending;if(U!==null){var K=U.next;U.next=O,P.next=K}C.pending=P}zh=null}return y}function OO(y,_){do{var C=Pi;try{if(SC(),mx.current=Sx,yx){for(var P=ai.memoizedState;P!==null;){var O=P.queue;O!==null&&(O.pending=null),P=P.next}yx=!1}if(Vh=0,la=Vi=ai=null,X0=!1,K0=0,QC.current=null,C===null||C.return===null){Hi=1,Q0=_,Pi=null;break}e:{var U=y,K=C.return,re=C,ue=_;if(_=Ta,re.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Pe=ue,Je=re,it=Je.tag;if(!(Je.mode&1)&&(it===0||it===11||it===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var Dt=oO(K);if(Dt!==null){Dt.flags&=-257,sO(Dt,K,re,U,_),Dt.mode&1&&aO(U,Pe,_),_=Dt,ue=Pe;var Ut=_.updateQueue;if(Ut===null){var $t=new Set;$t.add(ue),_.updateQueue=$t}else Ut.add(ue);break e}else{if(!(_&1)){aO(U,Pe,_),lE();break e}ue=Error(r(426))}}else if(Jn&&re.mode&1){var xi=oO(K);if(xi!==null){!(xi.flags&65536)&&(xi.flags|=256),sO(xi,K,re,U,_),_C(_v(ue,re));break e}}U=ue=_v(ue,re),Hi!==4&&(Hi=2),ey===null?ey=[U]:ey.push(U),U=K;do{switch(U.tag){case 3:U.flags|=65536,_&=-_,U.lanes|=_;var be=nO(U,ue,_);PN(U,be);break e;case 1:re=ue;var ge=U.type,Te=U.stateNode;if(!(U.flags&128)&&(typeof ge.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(df===null||!df.has(Te)))){U.flags|=65536,_&=-_,U.lanes|=_;var dt=iO(U,re,_);PN(U,dt);break e}}U=U.return}while(U!==null)}BO(C)}catch(Kt){_=Kt,Pi===C&&C!==null&&(Pi=C=C.return);continue}break}while(!0)}function kO(){var y=Mx.current;return Mx.current=Sx,y===null?Sx:y}function lE(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),ua===null||!(Hh&268435455)&&!(Rx&268435455)||gf(ua,Ta)}function Ox(y,_){var C=fn;fn|=2;var P=kO();(ua!==y||Ta!==_)&&(Ju=null,Wh(y,_));do try{zoe();break}catch(O){OO(y,O)}while(!0);if(SC(),fn=C,Mx.current=P,Pi!==null)throw Error(r(261));return ua=null,Ta=0,Hi}function zoe(){for(;Pi!==null;)FO(Pi)}function Uoe(){for(;Pi!==null&&!Ee();)FO(Pi)}function FO(y){var _=VO(y.alternate,y,as);y.memoizedProps=y.pendingProps,_===null?BO(y):Pi=_,QC.current=null}function BO(y){var _=y;do{var C=_.alternate;if(y=_.return,_.flags&32768){if(C=Ioe(C,_),C!==null){C.flags&=32767,Pi=C;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Hi=6,Pi=null;return}}else if(C=Doe(C,_,as),C!==null){Pi=C;return}if(_=_.sibling,_!==null){Pi=_;return}Pi=_=y}while(_!==null);Hi===0&&(Hi=5)}function $h(y,_,C){var P=Tr,O=Es.transition;try{Es.transition=null,Tr=1,Voe(y,_,C,P)}finally{Es.transition=O,Tr=P}return null}function Voe(y,_,C,P){do wv();while(pf!==null);if(fn&6)throw Error(r(327));C=y.finishedWork;var O=y.finishedLanes;if(C===null)return null;if(y.finishedWork=null,y.finishedLanes=0,C===y.current)throw Error(r(177));y.callbackNode=null,y.callbackPriority=0;var U=C.lanes|C.childLanes;if(ui(y,U),y===ua&&(Pi=ua=null,Ta=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||Lx||(Lx=!0,HO(Pt,function(){return wv(),null})),U=(C.flags&15990)!==0,C.subtreeFlags&15990||U){U=Es.transition,Es.transition=null;var K=Tr;Tr=1;var re=fn;fn|=4,QC.current=null,Ooe(y,C),MO(C,y),soe(lC),$2=!!sC,lC=sC=null,y.current=C,koe(C),Re(),fn=re,Tr=K,Es.transition=U}else y.current=C;if(Lx&&(Lx=!1,pf=y,Dx=O),U=y.pendingLanes,U===0&&(df=null),Gr(C.stateNode),ko(y,fe()),_!==null)for(P=y.onRecoverableError,C=0;C<_.length;C++)O=_[C],P(O.value,{componentStack:O.stack,digest:O.digest});if(Px)throw Px=!1,y=rE,rE=null,y;return Dx&1&&y.tag!==0&&wv(),U=y.pendingLanes,U&1?y===nE?ty++:(ty=0,nE=y):ty=0,uf(),null}function wv(){if(pf!==null){var y=xs(Dx),_=Es.transition,C=Tr;try{if(Es.transition=null,Tr=16>y?16:y,pf===null)var P=!1;else{if(y=pf,pf=null,Dx=0,fn&6)throw Error(r(331));var O=fn;for(fn|=4,Bt=y.current;Bt!==null;){var U=Bt,K=U.child;if(Bt.flags&16){var re=U.deletions;if(re!==null){for(var ue=0;ue<re.length;ue++){var Pe=re[ue];for(Bt=Pe;Bt!==null;){var Je=Bt;switch(Je.tag){case 0:case 11:case 15:J0(8,Je,U)}var it=Je.child;if(it!==null)it.return=Je,Bt=it;else for(;Bt!==null;){Je=Bt;var Ke=Je.sibling,Dt=Je.return;if(wO(Je),Je===Pe){Bt=null;break}if(Ke!==null){Ke.return=Dt,Bt=Ke;break}Bt=Dt}}}var Ut=U.alternate;if(Ut!==null){var $t=Ut.child;if($t!==null){Ut.child=null;do{var xi=$t.sibling;$t.sibling=null,$t=xi}while($t!==null)}}Bt=U}}if(U.subtreeFlags&2064&&K!==null)K.return=U,Bt=K;else e:for(;Bt!==null;){if(U=Bt,U.flags&2048)switch(U.tag){case 0:case 11:case 15:J0(9,U,U.return)}var be=U.sibling;if(be!==null){be.return=U.return,Bt=be;break e}Bt=U.return}}var ge=y.current;for(Bt=ge;Bt!==null;){K=Bt;var Te=K.child;if(K.subtreeFlags&2064&&Te!==null)Te.return=K,Bt=Te;else e:for(K=ge;Bt!==null;){if(re=Bt,re.flags&2048)try{switch(re.tag){case 0:case 11:case 15:Ax(9,re)}}catch(Kt){ci(re,re.return,Kt)}if(re===K){Bt=null;break e}var dt=re.sibling;if(dt!==null){dt.return=re.return,Bt=dt;break e}Bt=re.return}}if(fn=O,uf(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(It,y)}catch(Kt){}P=!0}return P}finally{Tr=C,Es.transition=_}}return!1}function zO(y,_,C){_=_v(C,_),_=nO(y,_,1),y=ff(y,_,1),_=ro(),y!==null&&(Sn(y,1,_),ko(y,_))}function ci(y,_,C){if(y.tag===3)zO(y,y,C);else for(;_!==null;){if(_.tag===3){zO(_,y,C);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(df===null||!df.has(P))){y=_v(C,y),y=iO(_,y,1),_=ff(_,y,1),y=ro(),_!==null&&(Sn(_,1,y),ko(_,y));break}}_=_.return}}function Hoe(y,_,C){var P=y.pingCache;P!==null&&P.delete(_),_=ro(),y.pingedLanes|=y.suspendedLanes&C,ua===y&&(Ta&C)===C&&(Hi===4||Hi===3&&(Ta&130023424)===Ta&&500>fe()-tE?Wh(y,0):eE|=C),ko(y,_)}function UO(y,_){_===0&&(y.mode&1?(_=vr,vr<<=1,!(vr&130023424)&&(vr=4194304)):_=1);var C=ro();y=Yu(y,_),y!==null&&(Sn(y,_,C),ko(y,C))}function Goe(y){var _=y.memoizedState,C=0;_!==null&&(C=_.retryLane),UO(y,C)}function Woe(y,_){var C=0;switch(y.tag){case 13:var P=y.stateNode,O=y.memoizedState;O!==null&&(C=O.retryLane);break;case 19:P=y.stateNode;break;default:throw Error(r(314))}P!==null&&P.delete(_),UO(y,C)}var VO;VO=function(y,_,C){if(y!==null)if(y.memoizedProps!==_.pendingProps||Do.current)No=!0;else{if(!(y.lanes&C)&&!(_.flags&128))return No=!1,Loe(y,_,C);No=!!(y.flags&131072)}else No=!1,Jn&&_.flags&1048576&&xN(_,ux,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;Cx(y,_),y=_.pendingProps;var O=fv(_,Ba.current);mv(_,C),O=DC(null,_,P,y,O,C);var U=IC();return _.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Io(P)?(U=!0,ox(_)):U=!1,_.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,CC(_),O.updater=bx,_.stateNode=O,O._reactInternals=_,zC(_,P,y,C),_=GC(null,_,P,!0,U,C)):(_.tag=0,Jn&&U&&vC(_),to(null,_,O,C),_=_.child),_;case 16:P=_.elementType;e:{switch(Cx(y,_),y=_.pendingProps,O=P._init,P=O(P._payload),_.type=P,O=_.tag=joe(P),y=dl(P,y),O){case 0:_=HC(null,_,P,y,C);break e;case 1:_=dO(null,_,P,y,C);break e;case 11:_=lO(null,_,P,y,C);break e;case 14:_=uO(null,_,P,dl(P.type,y),C);break e}throw Error(r(306,P,""))}return _;case 0:return P=_.type,O=_.pendingProps,O=_.elementType===P?O:dl(P,O),HC(y,_,P,O,C);case 1:return P=_.type,O=_.pendingProps,O=_.elementType===P?O:dl(P,O),dO(y,_,P,O,C);case 3:e:{if(pO(_),y===null)throw Error(r(387));P=_.pendingProps,U=_.memoizedState,O=U.element,RN(y,_),vx(_,P,null,C);var K=_.memoizedState;if(P=K.element,U.isDehydrated)if(U={element:P,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},_.updateQueue.baseState=U,_.memoizedState=U,_.flags&256){O=_v(Error(r(423)),_),_=vO(y,_,P,C,O);break e}else if(P!==O){O=_v(Error(r(424)),_),_=vO(y,_,P,C,O);break e}else for(is=of(_.stateNode.containerInfo.firstChild),ns=_,Jn=!0,hl=null,C=AN(_,null,P,C),_.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(pv(),P===O){_=Zu(y,_,C);break e}to(y,_,P,C)}_=_.child}return _;case 5:return DN(_),y===null&&yC(_),P=_.type,O=_.pendingProps,U=y!==null?y.memoizedProps:null,K=O.children,uC(P,O)?K=null:U!==null&&uC(P,U)&&(_.flags|=32),hO(y,_),to(y,_,K,C),_.child;case 6:return y===null&&yC(_),null;case 13:return gO(y,_,C);case 4:return EC(_,_.stateNode.containerInfo),P=_.pendingProps,y===null?_.child=vv(_,null,P,C):to(y,_,P,C),_.child;case 11:return P=_.type,O=_.pendingProps,O=_.elementType===P?O:dl(P,O),lO(y,_,P,O,C);case 7:return to(y,_,_.pendingProps,C),_.child;case 8:return to(y,_,_.pendingProps.children,C),_.child;case 12:return to(y,_,_.pendingProps.children,C),_.child;case 10:e:{if(P=_.type._context,O=_.pendingProps,U=_.memoizedProps,K=O.value,Vn(hx,P._currentValue),P._currentValue=K,U!==null)if(fl(U.value,K)){if(U.children===O.children&&!Do.current){_=Zu(y,_,C);break e}}else for(U=_.child,U!==null&&(U.return=_);U!==null;){var re=U.dependencies;if(re!==null){K=U.child;for(var ue=re.firstContext;ue!==null;){if(ue.context===P){if(U.tag===1){ue=qu(-1,C&-C),ue.tag=2;var Pe=U.updateQueue;if(Pe!==null){Pe=Pe.shared;var Je=Pe.pending;Je===null?ue.next=ue:(ue.next=Je.next,Je.next=ue),Pe.pending=ue}}U.lanes|=C,ue=U.alternate,ue!==null&&(ue.lanes|=C),wC(U.return,C,_),re.lanes|=C;break}ue=ue.next}}else if(U.tag===10)K=U.type===_.type?null:U.child;else if(U.tag===18){if(K=U.return,K===null)throw Error(r(341));K.lanes|=C,re=K.alternate,re!==null&&(re.lanes|=C),wC(K,C,_),K=U.sibling}else K=U.child;if(K!==null)K.return=U;else for(K=U;K!==null;){if(K===_){K=null;break}if(U=K.sibling,U!==null){U.return=K.return,K=U;break}K=K.return}U=K}to(y,_,O.children,C),_=_.child}return _;case 9:return O=_.type,P=_.pendingProps.children,mv(_,C),O=Ts(O),P=P(O),_.flags|=1,to(y,_,P,C),_.child;case 14:return P=_.type,O=dl(P,_.pendingProps),O=dl(P.type,O),uO(y,_,P,O,C);case 15:return cO(y,_,_.type,_.pendingProps,C);case 17:return P=_.type,O=_.pendingProps,O=_.elementType===P?O:dl(P,O),Cx(y,_),_.tag=1,Io(P)?(y=!0,ox(_)):y=!1,mv(_,C),tO(_,P,O),zC(_,P,O,C),GC(null,_,P,!0,y,C);case 19:return yO(y,_,C);case 22:return fO(y,_,C)}throw Error(r(156,_.tag))};function HO(y,_){return Z(y,_)}function $oe(y,_,C,P){this.tag=y,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(y,_,C,P){return new $oe(y,_,C,P)}function uE(y){return y=y.prototype,!(!y||!y.isReactComponent)}function joe(y){if(typeof y=="function")return uE(y)?1:0;if(y!=null){if(y=y.$$typeof,y===I)return 11;if(y===z)return 14}return 2}function mf(y,_){var C=y.alternate;return C===null?(C=As(y.tag,_,y.key,y.mode),C.elementType=y.elementType,C.type=y.type,C.stateNode=y.stateNode,C.alternate=y,y.alternate=C):(C.pendingProps=_,C.type=y.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=y.flags&14680064,C.childLanes=y.childLanes,C.lanes=y.lanes,C.child=y.child,C.memoizedProps=y.memoizedProps,C.memoizedState=y.memoizedState,C.updateQueue=y.updateQueue,_=y.dependencies,C.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},C.sibling=y.sibling,C.index=y.index,C.ref=y.ref,C}function kx(y,_,C,P,O,U){var K=2;if(P=y,typeof y=="function")uE(y)&&(K=1);else if(typeof y=="string")K=5;else e:switch(y){case E:return jh(C.children,O,U,_);case M:K=8,O|=8;break;case A:return y=As(12,C,_,O|2),y.elementType=A,y.lanes=U,y;case N:return y=As(13,C,_,O),y.elementType=N,y.lanes=U,y;case k:return y=As(19,C,_,O),y.elementType=k,y.lanes=U,y;case V:return Fx(C,O,U,_);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case R:K=10;break e;case L:K=9;break e;case I:K=11;break e;case z:K=14;break e;case B:K=16,P=null;break e}throw Error(r(130,y==null?y:typeof y,""))}return _=As(K,C,_,O),_.elementType=y,_.type=P,_.lanes=U,_}function jh(y,_,C,P){return y=As(7,y,P,_),y.lanes=C,y}function Fx(y,_,C,P){return y=As(22,y,P,_),y.elementType=V,y.lanes=C,y.stateNode={isHidden:!1},y}function cE(y,_,C){return y=As(6,y,null,_),y.lanes=C,y}function fE(y,_,C){return _=As(4,y.children!==null?y.children:[],y.key,_),_.lanes=C,_.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},_}function Xoe(y,_,C,P,O){this.tag=_,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wn(0),this.expirationTimes=Wn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.identifierPrefix=P,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function hE(y,_,C,P,O,U,K,re,ue){return y=new Xoe(y,_,C,re,ue),_===1?(_=1,U===!0&&(_|=8)):_=0,U=As(3,null,null,_),y.current=U,U.stateNode=y,U.memoizedState={element:P,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},CC(U),y}function Koe(y,_,C){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:P==null?null:""+P,children:y,containerInfo:_,implementation:C}}function GO(y){if(!y)return lf;y=y._reactInternals;e:{if(_i(y)!==y||y.tag!==1)throw Error(r(170));var _=y;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Io(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(r(171))}if(y.tag===1){var C=y.type;if(Io(C))return mN(y,C,_)}return _}function WO(y,_,C,P,O,U,K,re,ue){return y=hE(C,P,!0,y,O,U,K,re,ue),y.context=GO(null),C=y.current,P=ro(),O=vf(C),U=qu(P,O),U.callback=_!=null?_:null,ff(C,U,O),y.current.lanes=O,Sn(y,O,P),ko(y,P),y}function Bx(y,_,C,P){var O=_.current,U=ro(),K=vf(O);return C=GO(C),_.context===null?_.context=C:_.pendingContext=C,_=qu(U,K),_.payload={element:y},P=P===void 0?null:P,P!==null&&(_.callback=P),y=ff(O,_,K),y!==null&&(gl(y,O,K,U),px(y,O,K)),K}function zx(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function $O(y,_){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var C=y.retryLane;y.retryLane=C!==0&&C<_?C:_}}function dE(y,_){$O(y,_),(y=y.alternate)&&$O(y,_)}function Yoe(){return null}var jO=typeof reportError=="function"?reportError:function(y){console.error(y)};function pE(y){this._internalRoot=y}Ux.prototype.render=pE.prototype.render=function(y){var _=this._internalRoot;if(_===null)throw Error(r(409));Bx(y,_,null,null)},Ux.prototype.unmount=pE.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var _=y.containerInfo;Gh(function(){Bx(null,y,null,null)}),_[$u]=null}};function Ux(y){this._internalRoot=y}Ux.prototype.unstable_scheduleHydration=function(y){if(y){var _=ev();y={blockedOn:null,target:y,priority:_};for(var C=0;C<ts.length&&_!==0&&_<ts[C].priority;C++);ts.splice(C,0,y),C===0&&Zn(y)}};function vE(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function Vx(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function XO(){}function qoe(y,_,C,P,O){if(O){if(typeof P=="function"){var U=P;P=function(){var Pe=zx(K);U.call(Pe)}}var K=WO(_,P,y,0,null,!1,!1,"",XO);return y._reactRootContainer=K,y[$u]=K.current,z0(y.nodeType===8?y.parentNode:y),Gh(),K}for(;O=y.lastChild;)y.removeChild(O);if(typeof P=="function"){var re=P;P=function(){var Pe=zx(ue);re.call(Pe)}}var ue=hE(y,0,!1,null,null,!1,!1,"",XO);return y._reactRootContainer=ue,y[$u]=ue.current,z0(y.nodeType===8?y.parentNode:y),Gh(function(){Bx(_,ue,C,P)}),ue}function Hx(y,_,C,P,O){var U=C._reactRootContainer;if(U){var K=U;if(typeof O=="function"){var re=O;O=function(){var ue=zx(K);re.call(ue)}}Bx(_,K,y,O)}else K=qoe(C,_,y,O,P);return zx(K)}Zl=function(y){switch(y.tag){case 3:var _=y.stateNode;if(_.current.memoizedState.isDehydrated){var C=ni(_.pendingLanes);C!==0&&(Lo(_,C|1),ko(_,fe()),!(fn&6)&&(bv=fe()+500,uf()))}break;case 13:Gh(function(){var P=Yu(y,1);if(P!==null){var O=ro();gl(P,y,1,O)}}),dE(y,1)}},cl=function(y){if(y.tag===13){var _=Yu(y,134217728);if(_!==null){var C=ro();gl(_,y,134217728,C)}dE(y,134217728)}},es=function(y){if(y.tag===13){var _=vf(y),C=Yu(y,_);if(C!==null){var P=ro();gl(C,y,_,P)}dE(y,_)}},ev=function(){return Tr},M0=function(y,_){var C=Tr;try{return Tr=y,_()}finally{Tr=C}},vt=function(y,_,C){switch(_){case"input":if(Ye(y,C),_=C.name,C.type==="radio"&&_!=null){for(C=y;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<C.length;_++){var P=C[_];if(P!==y&&P.form===y.form){var O=ix(P);if(!O)throw Error(r(90));Le(P),Ye(P,O)}}}break;case"textarea":Ce(y,C);break;case"select":_=C.value,_!=null&&q(y,!!C.multiple,_,!1)}},nr=oE,Mt=Gh;var Zoe={usingClientEntryPoint:!1,Events:[H0,uv,ix,et,Gt,oE]},ry={findFiberByHostInstance:Oh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Joe={bundleType:ry.bundleType,version:ry.version,rendererPackageName:ry.rendererPackageName,rendererConfig:ry.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Qo(y),y===null?null:y.stateNode},findFiberByHostInstance:ry.findFiberByHostInstance||Yoe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Gx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gx.isDisabled&&Gx.supportsFiber)try{It=Gx.inject(Joe),tr=Gx}catch(y){}}return Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zoe,Fo.createPortal=function(y,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vE(_))throw Error(r(200));return Koe(y,_,null,C)},Fo.createRoot=function(y,_){if(!vE(y))throw Error(r(299));var C=!1,P="",O=jO;return _!=null&&(_.unstable_strictMode===!0&&(C=!0),_.identifierPrefix!==void 0&&(P=_.identifierPrefix),_.onRecoverableError!==void 0&&(O=_.onRecoverableError)),_=hE(y,1,!1,null,null,C,!1,P,O),y[$u]=_.current,z0(y.nodeType===8?y.parentNode:y),new pE(_)},Fo.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var _=y._reactInternals;if(_===void 0)throw typeof y.render=="function"?Error(r(188)):(y=Object.keys(y).join(","),Error(r(268,y)));return y=Qo(_),y=y===null?null:y.stateNode,y},Fo.flushSync=function(y){return Gh(y)},Fo.hydrate=function(y,_,C){if(!Vx(_))throw Error(r(200));return Hx(null,y,_,!0,C)},Fo.hydrateRoot=function(y,_,C){if(!vE(y))throw Error(r(405));var P=C!=null&&C.hydratedSources||null,O=!1,U="",K=jO;if(C!=null&&(C.unstable_strictMode===!0&&(O=!0),C.identifierPrefix!==void 0&&(U=C.identifierPrefix),C.onRecoverableError!==void 0&&(K=C.onRecoverableError)),_=WO(_,null,y,1,C!=null?C:null,O,!1,U,K),y[$u]=_.current,z0(y),P)for(y=0;y<P.length;y++)C=P[y],O=C._getVersion,O=O(C._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[C,O]:_.mutableSourceEagerHydrationData.push(C,O);return new Ux(_)},Fo.render=function(y,_,C){if(!Vx(_))throw Error(r(200));return Hx(null,y,_,!1,C)},Fo.unmountComponentAtNode=function(y){if(!Vx(y))throw Error(r(40));return y._reactRootContainer?(Gh(function(){Hx(null,null,y,!1,function(){y._reactRootContainer=null,y[$u]=null})}),!0):!1},Fo.unstable_batchedUpdates=oE,Fo.unstable_renderSubtreeIntoContainer=function(y,_,C,P){if(!Vx(C))throw Error(r(200));if(y==null||y._reactInternals===void 0)throw Error(r(38));return Hx(y,_,C,!1,P)},Fo.version="18.3.1-next-f1338f8080-20240426",Fo}var ak;function iK(){if(ak)return yE.exports;ak=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yE.exports=use(),yE.exports}var ok;function cse(){if(ok)return $x;ok=1;var t=iK();return $x.createRoot=t.createRoot,$x.hydrateRoot=t.hydrateRoot,$x}var fse=cse(),iy={},sk;function hse(){if(sk)return iy;sk=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.parse=o,iy.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,d){const p=new a,v=h.length;if(v<2)return p;const g=(d==null?void 0:d.decode)||c;let m=0;do{const x=h.indexOf("=",m);if(x===-1)break;const S=h.indexOf(";",m),b=S===-1?v:S;if(x>b){m=h.lastIndexOf(";",x-1)+1;continue}const T=s(h,m,x),w=l(h,x,T),E=h.slice(T,w);if(p[E]===void 0){let M=s(h,x+1,b),A=l(h,b,M);const R=g(h.slice(M,A));p[E]=R}m=b+1}while(m<v);return p}function s(h,d,p){do{const v=h.charCodeAt(d);if(v!==32&&v!==9)return d}while(++d<p);return p}function l(h,d,p){for(;d>p;){const v=h.charCodeAt(--d);if(v!==32&&v!==9)return d+1}return p}function u(h,d,p){const v=(p==null?void 0:p.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const g=v(d);if(!e.test(g))throw new TypeError(`argument val is invalid: ${d}`);let m=h+"="+g;if(!p)return m;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);m+="; Max-Age="+p.maxAge}if(p.domain){if(!r.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);m+="; Domain="+p.domain}if(p.path){if(!n.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);m+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);m+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(m+="; HttpOnly"),p.secure&&(m+="; Secure"),p.partitioned&&(m+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":m+="; Priority=Low";break;case"medium":m+="; Priority=Medium";break;case"high":m+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":m+="; SameSite=Strict";break;case"lax":m+="; SameSite=Lax";break;case"none":m+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return m}function c(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch(d){return h}}function f(h){return i.call(h)==="[object Date]"}return iy}hse();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lk="popstate";function dse(t={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=kp(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),W9("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof a=="string"?a:Q1(a))}function n(i,a){Hl(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return vse(e,r,n,t)}function oi(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Hl(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(r){}}}function pse(){return Math.random().toString(36).substring(2,10)}function uk(t,e){return{usr:t.state,key:t.key,idx:e}}function W9(t,e,r=null,n){return _f(Ca({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?kp(e):e),{state:r,key:e&&e.key||n||pse()})}function Q1({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function kp(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function vse(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s="POP",l=null,u=c();u==null&&(u=0,o.replaceState(_f(Ca({},o.state),{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){s="POP";let g=c(),m=g==null?null:g-u;u=g,l&&l({action:s,location:v.location,delta:m})}function h(g,m){s="PUSH";let x=W9(v.location,g,m);r&&r(x,g),u=c()+1;let S=uk(x,u),b=v.createHref(x);try{o.pushState(S,"",b)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(b)}a&&l&&l({action:s,location:v.location,delta:1})}function d(g,m){s="REPLACE";let x=W9(v.location,g,m);r&&r(x,g),u=c();let S=uk(x,u),b=v.createHref(x);o.replaceState(S,"",b),a&&l&&l({action:s,location:v.location,delta:0})}function p(g){let m=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof g=="string"?g:Q1(g);return x=x.replace(/ $/,"%20"),oi(m,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,m)}let v={get action(){return s},get location(){return t(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lk,f),l=g,()=>{i.removeEventListener(lk,f),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let m=p(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:d,go(g){return o.go(g)}};return v}function aK(t,e,r="/"){return gse(t,e,r,!1)}function gse(t,e,r,n){let i=typeof e=="string"?kp(e):e,a=mh(i.pathname||"/",r);if(a==null)return null;let o=oK(t);mse(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=Mse(a);s=Ese(o[l],u,n)}return s}function oK(t,e=[],r=[],n=""){let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(oi(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Tc([n,l.relativePath]),c=r.concat(l);a.children&&a.children.length>0&&(oi(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),oK(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Tse(u,a.index),routesMeta:c})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of sK(a.path))i(a,o,l)}),e}function sK(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=sK(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function mse(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Cse(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var yse=/^:[\w-]+$/,_se=3,xse=2,Sse=1,bse=10,wse=-2,ck=t=>t==="*";function Tse(t,e){let r=t.split("/"),n=r.length;return r.some(ck)&&(n+=wse),e&&(n+=xse),r.filter(i=>!ck(i)).reduce((i,a)=>i+(yse.test(a)?_se:a===""?Sse:bse),n)}function Cse(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Ese(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,c=a==="/"?e:e.slice(a.length)||"/",f=X3({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=X3({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Tc([a,f.pathname]),pathnameBase:Dse(Tc([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Tc([a,f.pathnameBase]))}return o}function X3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Ase(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let p=s[h]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const d=s[h];return f&&!d?u[c]=void 0:u[c]=(d||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function Ase(t,e=!1,r=!0){Hl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Mse(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hl(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Rse(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?kp(t):t;return{pathname:r?r.startsWith("/")?r:Pse(r,e):e,search:Ise(n),hash:Nse(i)}}function Pse(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function SE(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lse(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function lK(t){let e=Lse(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function uK(t,e,r,n=!1){let i;typeof t=="string"?i=kp(t):(i=Ca({},t),oi(!i.pathname||!i.pathname.includes("?"),SE("?","pathname","search",i)),oi(!i.pathname||!i.pathname.includes("#"),SE("#","pathname","hash",i)),oi(!i.search||!i.search.includes("#"),SE("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}s=f>=0?e[f]:"/"}let l=Rse(i,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Tc=t=>t.join("/").replace(/\/\/+/g,"/"),Dse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ise=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ose(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cK=["POST","PUT","PATCH","DELETE"];new Set(cK);var kse=["GET",...cK];new Set(kse);var Hm=D.createContext(null);Hm.displayName="DataRouter";var wT=D.createContext(null);wT.displayName="DataRouterState";var fK=D.createContext({isTransitioning:!1});fK.displayName="ViewTransition";var Fse=D.createContext(new Map);Fse.displayName="Fetchers";var Bse=D.createContext(null);Bse.displayName="Await";var Bu=D.createContext(null);Bu.displayName="Navigation";var a2=D.createContext(null);a2.displayName="Location";var $c=D.createContext({outlet:null,matches:[],isDataRoute:!1});$c.displayName="Route";var jP=D.createContext(null);jP.displayName="RouteError";function zse(t,{relative:e}={}){oi(o2(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=D.useContext(Bu),{hash:i,pathname:a,search:o}=s2(t,{relative:e}),s=a;return r!=="/"&&(s=a==="/"?r:Tc([r,a])),n.createHref({pathname:s,search:o,hash:i})}function o2(){return D.useContext(a2)!=null}function Fp(){return oi(o2(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(a2).location}var hK="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dK(t){D.useContext(Bu).static||D.useLayoutEffect(t)}function pK(){let{isDataRoute:t}=D.useContext($c);return t?Jse():Use()}function Use(){oi(o2(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Hm),{basename:e,navigator:r}=D.useContext(Bu),{matches:n}=D.useContext($c),{pathname:i}=Fp(),a=JSON.stringify(lK(n)),o=D.useRef(!1);return dK(()=>{o.current=!0}),D.useCallback((l,u={})=>{if(Hl(o.current,hK),!o.current)return;if(typeof l=="number"){r.go(l);return}let c=uK(l,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Tc([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,a,i,t])}D.createContext(null);function s2(t,{relative:e}={}){let{matches:r}=D.useContext($c),{pathname:n}=Fp(),i=JSON.stringify(lK(r));return D.useMemo(()=>uK(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function Vse(t,e){return vK(t,e)}function vK(t,e,r,n){var m;oi(o2(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=D.useContext(Bu),{matches:a}=D.useContext($c),o=a[a.length-1],s=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let x=c&&c.path||"";gK(l,!c||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=Fp(),h;if(e){let x=typeof e=="string"?kp(e):e;oi(u==="/"||((m=x.pathname)==null?void 0:m.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),h=x}else h=f;let d=h.pathname||"/",p=d;if(u!=="/"){let x=u.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=aK(t,{pathname:p});Hl(c||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Hl(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=jse(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},s,x.params),pathname:Tc([u,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Tc([u,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,r,n);return e&&g?D.createElement(a2.Provider,{value:{location:Ca({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},g):g}function Hse(){let t=Zse(),e=Ose(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),r?D.createElement("pre",{style:i},r):null,o)}var Gse=D.createElement(Hse,null),Wse=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement($c.Provider,{value:this.props.routeContext},D.createElement(jP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $se({routeContext:t,match:e,children:r}){let n=D.useContext(Hm);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement($c.Provider,{value:t},r)}function jse(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=r==null?void 0:r.errors;if(a!=null){let l=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);oi(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,s=-1;if(r)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(s=l),u.route.id){let{loaderData:c,errors:f}=r,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,h=!1,d=null,p=null;r&&(f=a&&u.route.id?a[u.route.id]:void 0,d=u.route.errorElement||Gse,o&&(s<0&&c===0?(gK("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):s===c&&(h=!0,p=u.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,c+1)),g=()=>{let m;return f?m=d:h?m=p:u.route.Component?m=D.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=l,D.createElement($se,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:r!=null},children:m})};return r&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?D.createElement(Wse,{location:r.location,revalidation:r.revalidation,component:d,error:f,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}function XP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xse(t){let e=D.useContext(Hm);return oi(e,XP(t)),e}function Kse(t){let e=D.useContext(wT);return oi(e,XP(t)),e}function Yse(t){let e=D.useContext($c);return oi(e,XP(t)),e}function KP(t){let e=Yse(t),r=e.matches[e.matches.length-1];return oi(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function qse(){return KP("useRouteId")}function Zse(){var n;let t=D.useContext(jP),e=Kse("useRouteError"),r=KP("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Jse(){let{router:t}=Xse("useNavigate"),e=KP("useNavigate"),r=D.useRef(!1);return dK(()=>{r.current=!0}),D.useCallback((o,...s)=>Qu(this,[o,...s],function*(i,a={}){Hl(r.current,hK),r.current&&(typeof i=="number"?t.navigate(i):yield t.navigate(i,Ca({fromRouteId:e},a)))}),[t,e])}var fk={};function gK(t,e,r){!e&&!fk[t]&&(fk[t]=!0,Hl(!1,r))}D.memo(Qse);function Qse({routes:t,future:e,state:r}){return vK(t,void 0,r,e)}function n3(t){oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ele({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){oi(!o2(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=D.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof r=="string"&&(r=kp(r));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=r,d=D.useMemo(()=>{let p=mh(l,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:f,key:h},navigationType:n}},[o,l,u,c,f,h,n]);return Hl(d!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),d==null?null:D.createElement(Bu.Provider,{value:s},D.createElement(a2.Provider,{children:e,value:d}))}function tle({children:t,location:e}){return Vse($9(t),e)}function $9(t,e=[]){let r=[];return D.Children.forEach(t,(n,i)=>{if(!D.isValidElement(n))return;let a=[...e,i];if(n.type===D.Fragment){r.push.apply(r,$9(n.props.children,a));return}oi(n.type===n3,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=$9(n.props.children,a)),r.push(o)}),r}var i3="get",a3="application/x-www-form-urlencoded";function TT(t){return t!=null&&typeof t.tagName=="string"}function rle(t){return TT(t)&&t.tagName.toLowerCase()==="button"}function nle(t){return TT(t)&&t.tagName.toLowerCase()==="form"}function ile(t){return TT(t)&&t.tagName.toLowerCase()==="input"}function ale(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ole(t,e){return t.button===0&&(!e||e==="_self")&&!ale(t)}var jx=null;function sle(){if(jx===null)try{new FormData(document.createElement("form"),0),jx=!1}catch(t){jx=!0}return jx}var lle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bE(t){return t!=null&&!lle.has(t)?(Hl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${a3}"`),null):t}function ule(t,e){let r,n,i,a,o;if(nle(t)){let s=t.getAttribute("action");n=s?mh(s,e):null,r=t.getAttribute("method")||i3,i=bE(t.getAttribute("enctype"))||a3,a=new FormData(t)}else if(rle(t)||ile(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||s.getAttribute("action");if(n=l?mh(l,e):null,r=t.getAttribute("formmethod")||s.getAttribute("method")||i3,i=bE(t.getAttribute("formenctype"))||bE(s.getAttribute("enctype"))||a3,a=new FormData(s,t),!sle()){let{name:u,type:c,value:f}=t;if(c==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,f)}}else{if(TT(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=i3,n=null,i=a3,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}function YP(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function cle(t,e){return Qu(this,null,function*(){if(t.id in e)return e[t.id];try{let r=yield import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}function fle(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}function hle(t,e,r){return Qu(this,null,function*(){let n=yield Promise.all(t.map(i=>Qu(this,null,function*(){let a=e.routes[i.route.id];if(a){let o=yield cle(a,r);return o.links?o.links():[]}return[]})));return gle(n.flat(1).filter(fle).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?_f(Ca({},i),{rel:"prefetch",as:"style"}):_f(Ca({},i),{rel:"prefetch"})))})}function hk(t,e,r,n,i,a){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,s=(l,u)=>{var c;return r[u].pathname!==l.pathname||((c=r[u].route.path)==null?void 0:c.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>o(l,u)||s(l,u)):a==="data"?e.filter((l,u)=>{var f;let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||s(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function dle(t,e){return ple(t.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function ple(t){return[...new Set(t)]}function vle(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function gle(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(vle(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function mle(t){let e=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function yle(){let t=D.useContext(Hm);return YP(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _le(){let t=D.useContext(wT);return YP(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qP=D.createContext(void 0);qP.displayName="FrameworkContext";function mK(){let t=D.useContext(qP);return YP(t,"You must render this element inside a <HydratedRouter> element"),t}function xle(t,e){let r=D.useContext(qP),[n,i]=D.useState(!1),[a,o]=D.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=e,h=D.useRef(null);D.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=m=>{m.forEach(x=>{o(x.isIntersecting)})},g=new IntersectionObserver(v,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),D.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let d=()=>{i(!0)},p=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,h,{}]:[a,h,{onFocus:ay(s,d),onBlur:ay(l,p),onMouseEnter:ay(u,d),onMouseLeave:ay(c,p),onTouchStart:ay(f,d)}]:[!1,h,{}]}function ay(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Sle(r){var n=r,{page:t}=n,e=Tv(n,["page"]);let{router:i}=yle(),a=D.useMemo(()=>aK(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?D.createElement(wle,Ca({page:t,matches:a},e)):(console.warn(`Tried to prefetch ${t} but no routes matched.`),null)}function ble(t){let{manifest:e,routeModules:r}=mK(),[n,i]=D.useState([]);return D.useEffect(()=>{let a=!1;return hle(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function wle(n){var i=n,{page:t,matches:e}=i,r=Tv(i,["page","matches"]);let a=Fp(),{manifest:o,routeModules:s}=mK(),{loaderData:l,matches:u}=_le(),c=D.useMemo(()=>hk(t,e,u,o,a,"data"),[t,e,u,o,a]),f=D.useMemo(()=>hk(t,e,u,o,a,"assets"),[t,e,u,o,a]),h=D.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let v=new Set,g=!1;if(e.forEach(x=>{var b;let S=o.routes[x.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||S.hasClientLoader?g=!0:v.add(x.route.id))}),v.size===0)return[];let m=mle(t);return g&&v.size>0&&m.searchParams.set("_routes",e.filter(x=>v.has(x.route.id)).map(x=>x.route.id).join(",")),[m.pathname+m.search]},[l,a,o,c,e,t,s]),d=D.useMemo(()=>dle(f,o),[f,o]),p=ble(f);return D.createElement(D.Fragment,null,h.map(v=>D.createElement("link",Ca({key:v,rel:"prefetch",as:"fetch",href:v},r))),d.map(v=>D.createElement("link",Ca({key:v,rel:"modulepreload",href:v},r))),p.map(({key:v,link:g})=>D.createElement("link",Ca({key:v},g))))}function Tle(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var yK=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{yK&&(window.__reactRouterVersion="7.0.2")}catch(t){}function Cle({basename:t,children:e,window:r}){let n=D.useRef();n.current==null&&(n.current=dse({window:r,v5Compat:!0}));let i=n.current,[a,o]=D.useState({action:i.action,location:i.location}),s=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(s),[i,s]),D.createElement(ele,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var _K=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xK=D.forwardRef(function(p,d){var v=p,{onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:c,viewTransition:f}=v,h=Tv(v,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let{basename:g}=D.useContext(Bu),m=typeof u=="string"&&_K.test(u),x,S=!1;if(typeof u=="string"&&m&&(x=u,yK))try{let L=new URL(window.location.href),I=u.startsWith("//")?new URL(L.protocol+u):new URL(u),N=mh(I.pathname,g);I.origin===L.origin&&N!=null?u=N+I.search+I.hash:S=!0}catch(L){Hl(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=zse(u,{relative:i}),[T,w,E]=xle(n,h),M=Rle(u,{replace:o,state:s,target:l,preventScrollReset:c,relative:i,viewTransition:f});function A(L){e&&e(L),L.defaultPrevented||M(L)}let R=D.createElement("a",_f(Ca(Ca({},h),E),{href:x||b,onClick:S||a?e:A,ref:Tle(d,w),target:l,"data-discover":!m&&r==="render"?"true":void 0}));return T&&!m?D.createElement(D.Fragment,null,R,D.createElement(Sle,{page:b})):R});xK.displayName="Link";var Ele=D.forwardRef(function(f,c){var h=f,{"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:s,children:l}=h,u=Tv(h,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let d=s2(o,{relative:u.relative}),p=Fp(),v=D.useContext(wT),{navigator:g,basename:m}=D.useContext(Bu),x=v!=null&&Nle(d)&&s===!0,S=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,b=p.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(b=b.toLowerCase(),T=T?T.toLowerCase():null,S=S.toLowerCase()),T&&m&&(T=mh(T,m)||T);const w=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let E=b===S||!i&&b.startsWith(S)&&b.charAt(w)==="/",M=T!=null&&(T===S||!i&&T.startsWith(S)&&T.charAt(S.length)==="/"),A={isActive:E,isPending:M,isTransitioning:x},R=E?e:void 0,L;typeof n=="function"?L=n(A):L=[n,E?"active":null,M?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(A):a;return D.createElement(xK,_f(Ca({},u),{"aria-current":R,className:L,ref:c,style:I,to:o,viewTransition:s}),typeof l=="function"?l(A):l)});Ele.displayName="NavLink";var Ale=D.forwardRef((p,d)=>{var v=p,{discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=i3,action:s,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f}=v,h=Tv(v,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let g=Dle(),m=Ile(s,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",S=typeof s=="string"&&_K.test(s),b=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let w=T.nativeEvent.submitter,E=(w==null?void 0:w.getAttribute("formmethod"))||o;g(w||T.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:i,state:a,relative:u,preventScrollReset:c,viewTransition:f})};return D.createElement("form",_f(Ca({ref:d,method:x,action:m,onSubmit:n?l:b},h),{"data-discover":!S&&t==="render"?"true":void 0}))});Ale.displayName="Form";function Mle(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SK(t){let e=D.useContext(Hm);return oi(e,Mle(t)),e}function Rle(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=pK(),l=Fp(),u=s2(t,{relative:a});return D.useCallback(c=>{if(ole(c,e)){c.preventDefault();let f=r!==void 0?r:Q1(l)===Q1(u);s(t,{replace:f,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,u,r,n,e,t,i,a,o])}var Ple=0,Lle=()=>`__${String(++Ple)}__`;function Dle(){let{router:t}=SK("useSubmit"),{basename:e}=D.useContext(Bu),r=qse();return D.useCallback((a,...o)=>Qu(this,[a,...o],function*(n,i={}){let{action:s,method:l,encType:u,formData:c,body:f}=ule(n,e);if(i.navigate===!1){let h=i.fetcherKey||Lle();yield t.fetch(h,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else yield t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[t,e,r])}function Ile(t,{relative:e}={}){let{basename:r}=D.useContext(Bu),n=D.useContext($c);oi(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a=Ca({},s2(t||".",{relative:e})),o=Fp();if(t==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(c=>c==="")){s.delete("index"),l.filter(f=>f).forEach(f=>s.append("index",f));let c=s.toString();a.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Tc([r,a.pathname])),Q1(a)}function Nle(t,e={}){let r=D.useContext(fK);oi(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=SK("useViewTransitionState"),i=s2(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=mh(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=mh(r.nextLocation.pathname,n)||r.nextLocation.pathname;return X3(i.pathname,o)!=null||X3(i.pathname,a)!=null}new TextEncoder;var l2=iK();const j9=WP(l2),Ole=nK({__proto__:null,default:j9},[l2]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X9=function(t,e){return X9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},X9(t,e)};function he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X9(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kle=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),Fle=function(){function t(){this.browser=new kle,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return t}(),br=new Fle;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(br.wxa=!0,br.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?br.worker=!0:typeof navigator=="undefined"||navigator.userAgent.indexOf("Node.js")===0?(br.node=!0,br.svgSupported=!0):Ble(navigator.userAgent,br);function Ble(t,e){var r=e.browser,n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),a=t.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(t);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),o&&(r.weChat=!0),e.svgSupported=typeof SVGRect!="undefined",e.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,e.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),e.domSupported=typeof document!="undefined";var s=document.documentElement.style;e.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||r.ie&&+r.version>=9}var ZP=12,bK="sans-serif",yh=ZP+"px "+bK,zle=20,Ule=100,Vle="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Hle(t){var e={};if(typeof JSON=="undefined")return e;for(var r=0;r<t.length;r++){var n=String.fromCharCode(r+32),i=(t.charCodeAt(r)-zle)/Ule;e[n]=i}return e}var Gle=Hle(Vle),_h={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var t,e;return function(r,n){if(!t){var i=_h.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==n&&(e=t.font=n||yh),t.measureText(r);r=r||"",n=n||yh;var a=/((?:\d+)?\.?\d*)px/.exec(n),o=a&&+a[1]||ZP,s=0;if(n.indexOf("mono")>=0)s=o*r.length;else for(var l=0;l<r.length;l++){var u=Gle[r[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(t,e,r){var n=new Image;return n.onload=e,n.onerror=r,n.src=t,n}},wK=Gl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),TK=Gl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),Gm=Object.prototype.toString,CT=Array.prototype,Wle=CT.forEach,$le=CT.filter,JP=CT.slice,jle=CT.map,dk=function(){}.constructor,Xx=dk?dk.prototype:null,QP="__proto__",Xle=2311;function CK(){return Xle++}function eL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console!="undefined"&&console.error.apply(console,t)}function Ft(t){if(t==null||typeof t!="object")return t;var e=t,r=Gm.call(t);if(r==="[object Array]"){if(!E1(t)){e=[];for(var n=0,i=t.length;n<i;n++)e[n]=Ft(t[n])}}else if(TK[r]){if(!E1(t)){var a=t.constructor;if(a.from)e=a.from(t);else{e=new a(t.length);for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}}}else if(!wK[r]&&!E1(t)&&!rm(t)){e={};for(var o in t)t.hasOwnProperty(o)&&o!==QP&&(e[o]=Ft(t[o]))}return e}function xt(t,e,r){if(!Nt(e)||!Nt(t))return r?Ft(e):t;for(var n in e)if(e.hasOwnProperty(n)&&n!==QP){var i=t[n],a=e[n];Nt(a)&&Nt(i)&&!De(a)&&!De(i)&&!rm(a)&&!rm(i)&&!pk(a)&&!pk(i)&&!E1(a)&&!E1(i)?xt(i,a,r):(r||!(n in t))&&(t[n]=Ft(e[n]))}return t}function tL(t,e){for(var r=t[0],n=1,i=t.length;n<i;n++)r=xt(r,t[n],e);return r}function Ae(t,e){if(Object.assign)Object.assign(t,e);else for(var r in e)e.hasOwnProperty(r)&&r!==QP&&(t[r]=e[r]);return t}function At(t,e,r){for(var n=Er(e),i=0;i<n.length;i++){var a=n[i];(r?e[a]!=null:t[a]==null)&&(t[a]=e[a])}return t}function hr(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r}return-1}function rL(t,e){var r=t.prototype;function n(){}n.prototype=e.prototype,t.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(t.prototype[i]=r[i]);t.prototype.constructor=t,t.superClass=e}function mi(t,e,r){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var a=n[i];a!=="constructor"&&(r?e[a]!=null:t[a]==null)&&(t[a]=e[a])}else At(t,e,r)}function Ya(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function G(t,e,r){if(t&&e)if(t.forEach&&t.forEach===Wle)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,i=t.length;n<i;n++)e.call(r,t[n],n,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(r,t[a],a,t)}function Oe(t,e,r){if(!t)return[];if(!e)return nL(t);if(t.map&&t.map===jle)return t.map(e,r);for(var n=[],i=0,a=t.length;i<a;i++)n.push(e.call(r,t[i],i,t));return n}function Gl(t,e,r,n){if(t&&e){for(var i=0,a=t.length;i<a;i++)r=e.call(n,r,t[i],i,t);return r}}function hn(t,e,r){if(!t)return[];if(!e)return nL(t);if(t.filter&&t.filter===$le)return t.filter(e,r);for(var n=[],i=0,a=t.length;i<a;i++)e.call(r,t[i],i,t)&&n.push(t[i]);return n}function Kle(t,e,r){if(t&&e){for(var n=0,i=t.length;n<i;n++)if(e.call(r,t[n],n,t))return t[n]}}function Er(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}function Yle(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return t.apply(e,r.concat(JP.call(arguments)))}}var pt=Xx&&Lt(Xx.bind)?Xx.call.bind(Xx.bind):Yle;function Zt(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){return t.apply(this,e.concat(JP.call(arguments)))}}function De(t){return Array.isArray?Array.isArray(t):Gm.call(t)==="[object Array]"}function Lt(t){return typeof t=="function"}function ft(t){return typeof t=="string"}function K9(t){return Gm.call(t)==="[object String]"}function Ur(t){return typeof t=="number"}function Nt(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function pk(t){return!!wK[Gm.call(t)]}function Yo(t){return!!TK[Gm.call(t)]}function rm(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function ET(t){return t.colorStops!=null}function qle(t){return t.image!=null}function Zle(t){return Gm.call(t)==="[object RegExp]"}function e_(t){return t!==t}function ma(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=t.length;r<n;r++)if(t[r]!=null)return t[r]}function Jt(t,e){return t!=null?t:e}function Eu(t,e,r){return t!=null?t:e!=null?e:r}function nL(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return JP.apply(t,e)}function iL(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function So(t,e){if(!t)throw new Error(e)}function Il(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var EK="__ec_primitive__";function K3(t){t[EK]=!0}function E1(t){return t[EK]}var Jle=function(){function t(){this.data={}}return t.prototype.delete=function(e){var r=this.has(e);return r&&delete this.data[e],r},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){return this.data[e]=r,this},t.prototype.keys=function(){return Er(this.data)},t.prototype.forEach=function(e){var r=this.data;for(var n in r)r.hasOwnProperty(n)&&e(r[n],n)},t}(),AK=typeof Map=="function";function Qle(){return AK?new Map:new Jle}var eue=function(){function t(e){var r=De(e);this.data=Qle();var n=this;e instanceof t?e.each(i):e&&G(e,i);function i(a,o){r?n.set(a,o):n.set(o,a)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,r){return this.data.set(e,r),r},t.prototype.each=function(e,r){this.data.forEach(function(n,i){e.call(r,n,i)})},t.prototype.keys=function(){var e=this.data.keys();return AK?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function Tt(t){return new eue(t)}function nm(t,e){for(var r=new t.constructor(t.length+e.length),n=0;n<t.length;n++)r[n]=t[n];for(var i=t.length,n=0;n<e.length;n++)r[n+i]=e[n];return r}function AT(t,e){var r;if(Object.create)r=Object.create(t);else{var n=function(){};n.prototype=t,r=new n}return e&&Ae(r,e),r}function MK(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function _t(t,e){return t.hasOwnProperty(e)}function pi(){}var o3=180/Math.PI;function Bp(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function uo(t,e){return t[0]=e[0],t[1]=e[1],t}function Cc(t){return[t[0],t[1]]}function tue(t,e,r){return t[0]=e,t[1]=r,t}function vk(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Y9(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Xd(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function q9(t){return Math.sqrt(rue(t))}function rue(t){return t[0]*t[0]+t[1]*t[1]}function s3(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Wm(t,e){var r=q9(e);return r===0?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}function Z9(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Xf=Z9;function nue(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var lp=nue;function l3(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}function qi(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function Kf(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Yf(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}var Cv=function(){function t(e,r){this.target=e,this.topTarget=r&&r.topTarget}return t}(),iue=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var r=e.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Cv(r,e),"dragstart",e.event))},t.prototype._drag=function(e){var r=this._draggingTarget;if(r){var n=e.offsetX,i=e.offsetY,a=n-this._x,o=i-this._y;this._x=n,this._y=i,r.drift(a,o,e),this.handler.dispatchToElement(new Cv(r,e),"drag",e.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Cv(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new Cv(s,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Cv(r,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Cv(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}(),al=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,r,n,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!e)return this;var o=this._$eventProcessor;r!=null&&o&&o.normalizeQuery&&(r=o.normalizeQuery(r)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=a[e].length-1,c=a[e][u];return c&&c.callAtLast?a[e].splice(u,0,l):a[e].push(l),this},t.prototype.isSilent=function(e){var r=this._$handlers;return!r||!r[e]||!r[e].length},t.prototype.off=function(e,r){var n=this._$handlers;if(!n)return this;if(!e)return this._$handlers={},this;if(r){if(n[e]){for(var i=[],a=0,o=n[e].length;a<o;a++)n[e][a].h!==r&&i.push(n[e][a]);n[e]=i}n[e]&&n[e].length===0&&delete n[e]}else delete n[e];return this},t.prototype.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=r.length,s=r[o-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},t}(),aue=Math.log(2);function J9(t,e,r,n,i,a){var o=n+"-"+i,s=t.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/aue);return t[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*t[r][h]*J9(t,e-1,c,u,i|p,a),d++)}return a[o]=f,f}function gk(t,e){var r=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],n={},i=J9(r,8,0,0,0,n);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*J9(r,7,o===0?1:0,1<<o,1<<s,n)/i*e[o];return function(l,u,c){var f=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/f,l[1]=(u*a[3]+c*a[4]+a[5])/f}}}var mk="___zrEVENTSAVED",wE=[];function oue(t,e,r,n,i){return Q9(wE,e,n,i,!0)&&Q9(t,r,wE[0],wE[1])}function Q9(t,e,r,n,i){if(e.getBoundingClientRect&&br.domSupported&&!RK(e)){var a=e[mk]||(e[mk]={}),o=sue(e,a),s=lue(o,a,i);if(s)return s(t,r,n),!0}return!1}function sue(t,e){var r=e.markers;if(r)return r;r=e.markers=[];for(var n=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),t.appendChild(o),r.push(o)}return r}function lue(t,e,r){for(var n=r?"invTrans":"trans",i=e[n],a=e.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var c=t[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;o.push(h,d),l=l&&a&&h===a[f]&&d===a[f+1],s.push(t[u].offsetLeft,t[u].offsetTop)}return l&&i?i:(e.srcCoords=o,e[n]=r?gk(s,o):gk(o,s))}function RK(t){return t.nodeName.toUpperCase()==="CANVAS"}var uue=/([&<>"'])/g,cue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Oi(t){return t==null?"":(t+"").replace(uue,function(e,r){return cue[r]})}var fue=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,TE=[],hue=br.browser.firefox&&+br.browser.version.split(".")[0]<39;function e6(t,e,r,n){return r=r||{},n?yk(t,e,r):hue&&e.layerX!=null&&e.layerX!==e.offsetX?(r.zrX=e.layerX,r.zrY=e.layerY):e.offsetX!=null?(r.zrX=e.offsetX,r.zrY=e.offsetY):yk(t,e,r),r}function yk(t,e,r){if(br.domSupported&&t.getBoundingClientRect){var n=e.clientX,i=e.clientY;if(RK(t)){var a=t.getBoundingClientRect();r.zrX=n-a.left,r.zrY=i-a.top;return}else if(Q9(TE,t,n,i)){r.zrX=TE[0],r.zrY=TE[1];return}}r.zrX=r.zrY=0}function aL(t){return t||window.event}function Bs(t,e,r){if(e=aL(e),e.zrX!=null)return e;var n=e.type,i=n&&n.indexOf("touch")>=0;if(i){var o=n!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&e6(t,o,e,r)}else{e6(t,e,e,r);var a=due(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&fue.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function due(t){var e=t.wheelDelta;if(e)return e;var r=t.deltaX,n=t.deltaY;if(r==null||n==null)return e;var i=Math.abs(n!==0?n:r),a=n>0?-1:n<0?1:r>0?-1:1;return 3*i*a}function t6(t,e,r,n){t.addEventListener(e,r,n)}function pue(t,e,r,n){t.removeEventListener(e,r,n)}var Nc=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function _k(t){return t.which===2||t.which===3}var vue=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,r,n){return this._doTrack(e,r,n),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,r,n){var i=e.touches;if(i){for(var a={points:[],touches:[],target:r,event:e},o=0,s=i.length;o<s;o++){var l=i[o],u=e6(n,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},t.prototype._recognize=function(e){for(var r in CE)if(CE.hasOwnProperty(r)){var n=CE[r](this._track,e);if(n)return n}},t}();function xk(t){var e=t[1][0]-t[0][0],r=t[1][1]-t[0][1];return Math.sqrt(e*e+r*r)}function gue(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var CE={pinch:function(t,e){var r=t.length;if(r){var n=(t[r-1]||{}).points,i=(t[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var a=xk(n)/xk(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=gue(n);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}};function Xo(){return[1,0,0,1,0,0]}function MT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function oL(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ec(t,e,r){var n=e[0]*r[0]+e[2]*r[1],i=e[1]*r[0]+e[3]*r[1],a=e[0]*r[2]+e[2]*r[3],o=e[1]*r[2]+e[3]*r[3],s=e[0]*r[4]+e[2]*r[5]+e[4],l=e[1]*r[4]+e[3]*r[5]+e[5];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t}function Du(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}function zp(t,e,r,n){n===void 0&&(n=[0,0]);var i=e[0],a=e[2],o=e[4],s=e[1],l=e[3],u=e[5],c=Math.sin(r),f=Math.cos(r);return t[0]=i*f+s*c,t[1]=-i*c+s*f,t[2]=a*f+l*c,t[3]=-a*c+f*l,t[4]=f*(o-n[0])+c*(u-n[1])+n[0],t[5]=f*(u-n[1])-c*(o-n[0])+n[1],t}function sL(t,e,r){var n=r[0],i=r[1];return t[0]=e[0]*n,t[1]=e[1]*i,t[2]=e[2]*n,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*i,t}function Up(t,e){var r=e[0],n=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=r*o-a*n;return l?(l=1/l,t[0]=o*l,t[1]=-a*l,t[2]=-n*l,t[3]=r*l,t[4]=(n*s-o*i)*l,t[5]=(a*i-r*s)*l,t):null}function mue(t){var e=Xo();return oL(e,t),e}var or=function(){function t(e,r){this.x=e||0,this.y=r||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,r){return this.x=e,this.y=r,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,r){this.x+=e.x*r,this.y+=e.y*r},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var r=this.x-e.x,n=this.y-e.y;return Math.sqrt(r*r+n*n)},t.prototype.distanceSquare=function(e){var r=this.x-e.x,n=this.y-e.y;return r*r+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var r=this.x,n=this.y;return this.x=e[0]*r+e[2]*n+e[4],this.y=e[1]*r+e[3]*n+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,r,n){e.x=r,e.y=n},t.copy=function(e,r){e.x=r.x,e.y=r.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,r){return e.x*r.x+e.y*r.y},t.add=function(e,r,n){e.x=r.x+n.x,e.y=r.y+n.y},t.sub=function(e,r,n){e.x=r.x-n.x,e.y=r.y-n.y},t.scale=function(e,r,n){e.x=r.x*n,e.y=r.y*n},t.scaleAndAdd=function(e,r,n,i){e.x=r.x+n.x*i,e.y=r.y+n.y*i},t.lerp=function(e,r,n,i){var a=1-i;e.x=a*r.x+i*n.x,e.y=a*r.y+i*n.y},t}(),Kx=Math.min,Yx=Math.max,Xh=new or,Kh=new or,Yh=new or,qh=new or,oy=new or,sy=new or,sr=function(){function t(e,r,n,i){n<0&&(e=e+n,n=-n),i<0&&(r=r+i,i=-i),this.x=e,this.y=r,this.width=n,this.height=i}return t.prototype.union=function(e){var r=Kx(e.x,this.x),n=Kx(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Yx(e.x+e.width,this.x+this.width)-r:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Yx(e.y+e.height,this.y+this.height)-n:this.height=e.height,this.x=r,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var r=this,n=e.width/r.width,i=e.height/r.height,a=Xo();return Du(a,a,[-r.x,-r.y]),sL(a,a,[n,i]),Du(a,a,[e.x,e.y]),a},t.prototype.intersect=function(e,r){if(!e)return!1;e instanceof t||(e=t.create(e));var n=this,i=n.x,a=n.x+n.width,o=n.y,s=n.y+n.height,l=e.x,u=e.x+e.width,c=e.y,f=e.y+e.height,h=!(a<l||u<i||s<c||f<o);if(r){var d=1/0,p=0,v=Math.abs(a-l),g=Math.abs(u-i),m=Math.abs(s-c),x=Math.abs(f-o),S=Math.min(v,g),b=Math.min(m,x);a<l||u<i?S>p&&(p=S,v<g?or.set(sy,-v,0):or.set(sy,g,0)):S<d&&(d=S,v<g?or.set(oy,v,0):or.set(oy,-g,0)),s<c||f<o?b>p&&(p=b,m<x?or.set(sy,0,-m):or.set(sy,0,x)):S<d&&(d=S,m<x?or.set(oy,0,m):or.set(oy,0,-x))}return r&&or.copy(r,h?oy:sy),h},t.prototype.contain=function(e,r){var n=this;return e>=n.x&&e<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,r){e.x=r.x,e.y=r.y,e.width=r.width,e.height=r.height},t.applyTransform=function(e,r,n){if(!n){e!==r&&t.copy(e,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],o=n[4],s=n[5];e.x=r.x*i+o,e.y=r.y*a+s,e.width=r.width*i,e.height=r.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Xh.x=Yh.x=r.x,Xh.y=qh.y=r.y,Kh.x=qh.x=r.x+r.width,Kh.y=Yh.y=r.y+r.height,Xh.transform(n),qh.transform(n),Kh.transform(n),Yh.transform(n),e.x=Kx(Xh.x,Kh.x,Yh.x,qh.x),e.y=Kx(Xh.y,Kh.y,Yh.y,qh.y);var l=Yx(Xh.x,Kh.x,Yh.x,qh.x),u=Yx(Xh.y,Kh.y,Yh.y,qh.y);e.width=l-e.x,e.height=u-e.y},t}(),PK="silent";function yue(t,e,r){return{type:t,event:r,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:_ue}}function _ue(){Nc(this.event)}var xue=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.handler=null,r}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(al),ly=function(){function t(e,r){this.x=e,this.y=r}return t}(),Sue=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],EE=new sr(0,0,0,0),LK=function(t){he(e,t);function e(r,n,i,a,o){var s=t.call(this)||this;return s._hovered=new ly(0,0),s.storage=r,s.painter=n,s.painterRoot=a,s._pointerSize=o,i=i||new xue,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new iue(s),s}return e.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(G(Sue,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},e.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,a=DK(this,n,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new ly(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},e.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},e.prototype.resize=function(){this._hovered=new ly(0,0)},e.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},e.prototype.dispatchToElement=function(r,n,i){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var o="on"+n,s=yue(n,r,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(n,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(n,s)}))}},e.prototype.findHover=function(r,n,i){var a=this.storage.getDisplayList(),o=new ly(r,n);if(Sk(a,o,r,n,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,c=new sr(r-u,n-u,l,l),f=a.length-1;f>=0;f--){var h=a[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(EE.copy(h.getBoundingRect()),h.transform&&EE.applyTransform(h.transform),EE.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var x=r+g*Math.cos(m),S=n+g*Math.sin(m);if(Sk(s,o,x,S,i),o.target)return o}}return o},e.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new vue);var i=this._gestureMgr;n==="start"&&i.clear();var a=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),a){var o=a.type;r.gestureEvent=o;var s=new ly;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(al);G(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){LK.prototype[t]=function(e){var r=e.zrX,n=e.zrY,i=DK(this,r,n),a,o;if((t!=="mouseup"||!i)&&(a=this.findHover(r,n),o=a.target),t==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(t==="mouseup")this._upEl=o;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||Xf(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,t,e)}});function bue(t,e,r){if(t[t.rectHover?"rectContain":"contain"](e,r)){for(var n=t,i=void 0,a=!1;n;){if(n.ignoreClip&&(a=!0),!a){var o=n.getClipPath();if(o&&!o.contain(e,r))return!1}n.silent&&(i=!0);var s=n.__hostTarget;n=s||n.parent}return i?PK:!0}return!1}function Sk(t,e,r,n,i){for(var a=t.length-1;a>=0;a--){var o=t[a],s=void 0;if(o!==i&&!o.ignore&&(s=bue(o,r,n))&&(!e.topTarget&&(e.topTarget=o),s!==PK)){e.target=o;break}}}function DK(t,e,r){var n=t.painter;return e<0||e>n.getWidth()||r<0||r>n.getHeight()}var IK=32,uy=7;function wue(t){for(var e=0;t>=IK;)e|=t&1,t>>=1;return t+e}function bk(t,e,r,n){var i=e+1;if(i===r)return 1;if(n(t[i++],t[e])<0){for(;i<r&&n(t[i],t[i-1])<0;)i++;Tue(t,e,i)}else for(;i<r&&n(t[i],t[i-1])>=0;)i++;return i-e}function Tue(t,e,r){for(r--;e<r;){var n=t[e];t[e++]=t[r],t[r--]=n}}function wk(t,e,r,n,i){for(n===e&&n++;n<r;n++){for(var a=t[n],o=e,s=n,l;o<s;)l=o+s>>>1,i(a,t[l])<0?s=l:o=l+1;var u=n-o;switch(u){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:for(;u>0;)t[o+u]=t[o+u-1],u--}t[o]=a}}function AE(t,e,r,n,i,a){var o=0,s=0,l=1;if(a(t,e[r+i])>0){for(s=n-i;l<s&&a(t,e[r+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(t,e[r+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[r+c])>0?o=c+1:l=c}return l}function ME(t,e,r,n,i,a){var o=0,s=0,l=1;if(a(t,e[r+i])<0){for(s=i+1;l<s&&a(t,e[r+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}else{for(s=n-i;l<s&&a(t,e[r+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[r+c])<0?l=c:o=c+1}return l}function Cue(t,e){var r=uy,n,i,a=0,o=[];n=[],i=[];function s(d,p){n[a]=d,i[a]=p,a+=1}function l(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===a-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),a--;var x=ME(t[g],t,p,v,0,e);p+=x,v-=x,v!==0&&(m=AE(t[p+v-1],t,g,m,m-1,e),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)o[m]=t[d+m];var x=0,S=v,b=d;if(t[b++]=t[S++],--g===0){for(m=0;m<p;m++)t[b+m]=o[x+m];return}if(p===1){for(m=0;m<g;m++)t[b+m]=t[S+m];t[b+g]=o[x];return}for(var T=r,w,E,M;;){w=0,E=0,M=!1;do if(e(t[S],o[x])<0){if(t[b++]=t[S++],E++,w=0,--g===0){M=!0;break}}else if(t[b++]=o[x++],w++,E=0,--p===1){M=!0;break}while((w|E)<T);if(M)break;do{if(w=ME(t[S],o,x,p,0,e),w!==0){for(m=0;m<w;m++)t[b+m]=o[x+m];if(b+=w,x+=w,p-=w,p<=1){M=!0;break}}if(t[b++]=t[S++],--g===0){M=!0;break}if(E=AE(o[x],t,S,g,0,e),E!==0){for(m=0;m<E;m++)t[b+m]=t[S+m];if(b+=E,S+=E,g-=E,g===0){M=!0;break}}if(t[b++]=o[x++],--p===1){M=!0;break}T--}while(w>=uy||E>=uy);if(M)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)t[b+m]=t[S+m];t[b+g]=o[x]}else{if(p===0)throw new Error;for(m=0;m<p;m++)t[b+m]=o[x+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)o[m]=t[v+m];var x=d+p-1,S=g-1,b=v+g-1,T=0,w=0;if(t[b--]=t[x--],--p===0){for(T=b-(g-1),m=0;m<g;m++)t[T+m]=o[m];return}if(g===1){for(b-=p,x-=p,w=b+1,T=x+1,m=p-1;m>=0;m--)t[w+m]=t[T+m];t[b]=o[S];return}for(var E=r;;){var M=0,A=0,R=!1;do if(e(o[S],t[x])<0){if(t[b--]=t[x--],M++,A=0,--p===0){R=!0;break}}else if(t[b--]=o[S--],A++,M=0,--g===1){R=!0;break}while((M|A)<E);if(R)break;do{if(M=p-ME(o[S],t,d,p,p-1,e),M!==0){for(b-=M,x-=M,p-=M,w=b+1,T=x+1,m=M-1;m>=0;m--)t[w+m]=t[T+m];if(p===0){R=!0;break}}if(t[b--]=o[S--],--g===1){R=!0;break}if(A=g-AE(t[x],o,0,g,g-1,e),A!==0){for(b-=A,S-=A,g-=A,w=b+1,T=S+1,m=0;m<A;m++)t[w+m]=o[T+m];if(g<=1){R=!0;break}}if(t[b--]=t[x--],--p===0){R=!0;break}E--}while(M>=uy||A>=uy);if(R)break;E<0&&(E=0),E+=2}if(r=E,r<1&&(r=1),g===1){for(b-=p,x-=p,w=b+1,T=x+1,m=p-1;m>=0;m--)t[w+m]=t[T+m];t[b]=o[S]}else{if(g===0)throw new Error;for(T=b-(g-1),m=0;m<g;m++)t[T+m]=o[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function u3(t,e,r,n){r||(r=0),n||(n=t.length);var i=n-r;if(!(i<2)){var a=0;if(i<IK){a=bk(t,r,n,e),wk(t,r,n,r+a,e);return}var o=Cue(t,e),s=wue(i);do{if(a=bk(t,r,n,e),a<s){var l=i;l>s&&(l=s),wk(t,r,r+l,r+a,e),a=l}o.pushRun(r,a),o.mergeRuns(),i-=a,r+=a}while(i!==0);o.forceMergeRuns()}}var ds=1,o1=2,Tg=4,Tk=!1;function RE(){Tk||(Tk=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function Ck(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var Eue=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Ck}return t.prototype.traverse=function(e,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,r)},t.prototype.getDisplayList=function(e,r){r=r||!1;var n=this._displayList;return(e||!n.length)&&this.updateDisplayList(r),n},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,a=r.length;i<a;i++)this._updateAndAddDisplayable(r[i],null,e);n.length=this._displayListLen,u3(n,Ck)},t.prototype._updateAndAddDisplayable=function(e,r,n){if(!(e.ignore&&!n)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),r.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var u=s[l];e.__dirty&&(u.__dirty|=ds),this._updateAndAddDisplayable(u,r,n)}e.__dirty=0}else{var c=e;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(RE(),c.z=0),isNaN(c.z2)&&(RE(),c.z2=0),isNaN(c.zlevel)&&(RE(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=e.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)this.delRoot(e[r]);return}var i=hr(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),Sp;Sp=br.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};var A1={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,r=.1,n=.4;return t===0?0:t===1?1:(!r||r<1?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)))},elasticOut:function(t){var e,r=.1,n=.4;return t===0?0:t===1?1:(!r||r<1?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},elasticInOut:function(t){var e,r=.1,n=.4;return t===0?0:t===1?1:(!r||r<1?(r=1,e=n/4):e=n*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)):r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-A1.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?A1.bounceIn(t*2)*.5:A1.bounceOut(t*2-1)*.5+.5}},qx=Math.pow,fh=Math.sqrt,Y3=1e-8,NK=1e-4,Ek=fh(3),Zx=1/3,mu=Bp(),Gs=Bp(),Hg=Bp();function qf(t){return t>-Y3&&t<Y3}function OK(t){return t>Y3||t<-Y3}function Wi(t,e,r,n,i){var a=1-i;return a*a*(a*t+3*i*e)+i*i*(i*n+3*a*r)}function Ak(t,e,r,n,i){var a=1-i;return 3*(((e-t)*a+2*(r-e)*i)*a+(n-r)*i*i)}function q3(t,e,r,n,i,a){var o=n+3*(e-r)-t,s=3*(r-e*2+t),l=3*(e-t),u=t-i,c=s*s-3*o*l,f=s*l-9*o*u,h=l*l-3*s*u,d=0;if(qf(c)&&qf(f))if(qf(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[d++]=p)}else{var v=f*f-4*c*h;if(qf(v)){var g=f/c,p=-s/o+g,m=-g/2;p>=0&&p<=1&&(a[d++]=p),m>=0&&m<=1&&(a[d++]=m)}else if(v>0){var x=fh(v),S=c*s+1.5*o*(-f+x),b=c*s+1.5*o*(-f-x);S<0?S=-qx(-S,Zx):S=qx(S,Zx),b<0?b=-qx(-b,Zx):b=qx(b,Zx);var p=(-s-(S+b))/(3*o);p>=0&&p<=1&&(a[d++]=p)}else{var T=(2*c*s-3*o*f)/(2*fh(c*c*c)),w=Math.acos(T)/3,E=fh(c),M=Math.cos(w),p=(-s-2*E*M)/(3*o),m=(-s+E*(M+Ek*Math.sin(w)))/(3*o),A=(-s+E*(M-Ek*Math.sin(w)))/(3*o);p>=0&&p<=1&&(a[d++]=p),m>=0&&m<=1&&(a[d++]=m),A>=0&&A<=1&&(a[d++]=A)}}return d}function kK(t,e,r,n,i){var a=6*r-12*e+6*t,o=9*e+3*n-3*t-9*r,s=3*e-3*t,l=0;if(qf(o)){if(OK(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(qf(c))i[0]=-a/(2*o);else if(c>0){var f=fh(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function xh(t,e,r,n,i,a){var o=(e-t)*i+t,s=(r-e)*i+e,l=(n-r)*i+r,u=(s-o)*i+o,c=(l-s)*i+s,f=(c-u)*i+u;a[0]=t,a[1]=o,a[2]=u,a[3]=f,a[4]=f,a[5]=c,a[6]=l,a[7]=n}function FK(t,e,r,n,i,a,o,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;mu[0]=l,mu[1]=u;for(var x=0;x<1;x+=.05)Gs[0]=Wi(t,r,i,o,x),Gs[1]=Wi(e,n,a,s,x),g=lp(mu,Gs),g<d&&(f=x,d=g);d=1/0;for(var S=0;S<32&&!(h<NK);S++)p=f-h,v=f+h,Gs[0]=Wi(t,r,i,o,p),Gs[1]=Wi(e,n,a,s,p),g=lp(Gs,mu),p>=0&&g<d?(f=p,d=g):(Hg[0]=Wi(t,r,i,o,v),Hg[1]=Wi(e,n,a,s,v),m=lp(Hg,mu),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=Wi(t,r,i,o,f),c[1]=Wi(e,n,a,s,f)),fh(d)}function Aue(t,e,r,n,i,a,o,s,l){for(var u=t,c=e,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=Wi(t,r,i,o,p),g=Wi(e,n,a,s,p),m=v-u,x=g-c;f+=Math.sqrt(m*m+x*x),u=v,c=g}return f}function pa(t,e,r,n){var i=1-n;return i*(i*t+2*n*e)+n*n*r}function r6(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}function Mue(t,e,r,n,i){var a=t-2*e+r,o=2*(e-t),s=t-n,l=0;if(qf(a)){if(OK(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(qf(c)){var u=-o/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=fh(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function BK(t,e,r){var n=t+r-2*e;return n===0?.5:(t-e)/n}function t_(t,e,r,n,i){var a=(e-t)*n+t,o=(r-e)*n+e,s=(o-a)*n+a;i[0]=t,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=r}function zK(t,e,r,n,i,a,o,s,l){var u,c=.005,f=1/0;mu[0]=o,mu[1]=s;for(var h=0;h<1;h+=.05){Gs[0]=pa(t,r,i,h),Gs[1]=pa(e,n,a,h);var d=lp(mu,Gs);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<NK);p++){var v=u-c,g=u+c;Gs[0]=pa(t,r,i,v),Gs[1]=pa(e,n,a,v);var d=lp(Gs,mu);if(v>=0&&d<f)u=v,f=d;else{Hg[0]=pa(t,r,i,g),Hg[1]=pa(e,n,a,g);var m=lp(Hg,mu);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=pa(t,r,i,u),l[1]=pa(e,n,a,u)),fh(f)}function Rue(t,e,r,n,i,a,o){for(var s=t,l=e,u=0,c=1/o,f=1;f<=o;f++){var h=f*c,d=pa(t,r,i,h),p=pa(e,n,a,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var Pue=/cubic-bezier\(([0-9,\.e ]+)\)/;function lL(t){var e=t&&Pue.exec(t);if(e){var r=e[1].split(","),n=+Il(r[0]),i=+Il(r[1]),a=+Il(r[2]),o=+Il(r[3]);if(isNaN(n+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:q3(0,n,a,1,l,s)&&Wi(0,i,o,1,s[0])}}}var Lue=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||pi,this.ondestroy=e.ondestroy||pi,this.onrestart=e.onrestart||pi,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,r){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=e-this._startTime-this._pausedTime,a=i/n;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%n;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Lt(e)?e:A1[e]||lL(e)},t}(),UK=function(){function t(e){this.value=e}return t}(),Due=function(){function t(){this._len=0}return t.prototype.insert=function(e){var r=new UK(e);return this.insertEntry(r),r},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var r=e.prev,n=e.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),$m=function(){function t(e){this._list=new Due,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,r){var n=this._list,i=this._map,a=null;if(i[e]==null){var o=n.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=n.head;n.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new UK(r),s.key=e,n.insertEntry(s),i[e]=s}return a},t.prototype.get=function(e){var r=this._map[e],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),Mk={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function kl(t){return t=Math.round(t),t<0?0:t>255?255:t}function Iue(t){return t=Math.round(t),t<0?0:t>360?360:t}function r_(t){return t<0?0:t>1?1:t}function PE(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?kl(parseFloat(e)/100*255):kl(parseInt(e,10))}function up(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?r_(parseFloat(e)/100):r_(parseFloat(e))}function LE(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function Zf(t,e,r){return t+(e-t)*r}function Fs(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function n6(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var VK=new $m(20),Jx=null;function Ev(t,e){Jx&&n6(Jx,e),Jx=VK.put(t,Jx||e.slice())}function go(t,e){if(t){e=e||[];var r=VK.get(t);if(r)return n6(e,r);t=t+"";var n=t.replace(/ /g,"").toLowerCase();if(n in Mk)return n6(e,Mk[n]),Ev(t,e),e;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(n.slice(1,4),16);if(!(a>=0&&a<=4095)){Fs(e,0,0,0,1);return}return Fs(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Ev(t,e),e}else if(i===7||i===9){var a=parseInt(n.slice(1,7),16);if(!(a>=0&&a<=16777215)){Fs(e,0,0,0,1);return}return Fs(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(n.slice(7),16)/255:1),Ev(t,e),e}return}var o=n.indexOf("("),s=n.indexOf(")");if(o!==-1&&s+1===i){var l=n.substr(0,o),u=n.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Fs(e,+u[0],+u[1],+u[2],1):Fs(e,0,0,0,1);c=up(u.pop());case"rgb":if(u.length>=3)return Fs(e,PE(u[0]),PE(u[1]),PE(u[2]),u.length===3?c:up(u[3])),Ev(t,e),e;Fs(e,0,0,0,1);return;case"hsla":if(u.length!==4){Fs(e,0,0,0,1);return}return u[3]=up(u[3]),i6(u,e),Ev(t,e),e;case"hsl":if(u.length!==3){Fs(e,0,0,0,1);return}return i6(u,e),Ev(t,e),e;default:return}}Fs(e,0,0,0,1)}}function i6(t,e){var r=(parseFloat(t[0])%360+360)%360/360,n=up(t[1]),i=up(t[2]),a=i<=.5?i*(n+1):i+n-i*n,o=i*2-a;return e=e||[],Fs(e,kl(LE(o,a,r+1/3)*255),kl(LE(o,a,r)*255),kl(LE(o,a,r-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function Nue(t){if(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-e)/6+o/2)/o,f=((a-r)/6+o/2)/o,h=((a-n)/6+o/2)/o;e===a?l=h-f:r===a?l=1/3+c-h:n===a&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return t[3]!=null&&d.push(t[3]),d}}function im(t,e){var r=go(t);if(r){for(var n=0;n<3;n++)e<0?r[n]=r[n]*(1-e)|0:r[n]=(255-r[n])*e+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return Ac(r,r.length===4?"rgba":"rgb")}}function DE(t,e,r){if(!(!(e&&e.length)||!(t>=0&&t<=1))){r=r||[];var n=t*(e.length-1),i=Math.floor(n),a=Math.ceil(n),o=e[i],s=e[a],l=n-i;return r[0]=kl(Zf(o[0],s[0],l)),r[1]=kl(Zf(o[1],s[1],l)),r[2]=kl(Zf(o[2],s[2],l)),r[3]=r_(Zf(o[3],s[3],l)),r}}function Oue(t,e,r){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var n=t*(e.length-1),i=Math.floor(n),a=Math.ceil(n),o=go(e[i]),s=go(e[a]),l=n-i,u=Ac([kl(Zf(o[0],s[0],l)),kl(Zf(o[1],s[1],l)),kl(Zf(o[2],s[2],l)),r_(Zf(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:a,value:n}:u}}function M1(t,e,r,n){var i=go(t);if(t)return i=Nue(i),e!=null&&(i[0]=Iue(e)),r!=null&&(i[1]=up(r)),n!=null&&(i[2]=up(n)),Ac(i6(i),"rgba")}function Z3(t,e){var r=go(t);if(r&&e!=null)return r[3]=r_(e),Ac(r,"rgba")}function Ac(t,e){if(!(!t||!t.length)){var r=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(r+=","+t[3]),e+"("+r+")"}}function J3(t,e){var r=go(t);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*e:0}var Rk=new $m(100);function a6(t){if(ft(t)){var e=Rk.get(t);return e||(e=im(t,-.1),Rk.put(t,e)),e}else if(ET(t)){var r=Ae({},t);return r.colorStops=Oe(t.colorStops,function(n){return{offset:n.offset,color:im(n.color,-.1)}}),r}return t}var Q3=Math.round;function n_(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var r=go(t);r&&(t="rgb("+r[0]+","+r[1]+","+r[2]+")",e=r[3])}return{color:t,opacity:e==null?1:e}}var Pk=1e-4;function Jf(t){return t<Pk&&t>-Pk}function Qx(t){return Q3(t*1e3)/1e3}function o6(t){return Q3(t*1e4)/1e4}function kue(t){return"matrix("+Qx(t[0])+","+Qx(t[1])+","+Qx(t[2])+","+Qx(t[3])+","+o6(t[4])+","+o6(t[5])+")"}var Fue={left:"start",right:"end",center:"middle",middle:"middle"};function Bue(t,e,r){return r==="top"?t+=e/2:r==="bottom"&&(t-=e/2),t}function zue(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function Uue(t){var e=t.style,r=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function HK(t){return t&&!!t.image}function Vue(t){return t&&!!t.svgElement}function uL(t){return HK(t)||Vue(t)}function GK(t){return t.type==="linear"}function WK(t){return t.type==="radial"}function $K(t){return t&&(t.type==="linear"||t.type==="radial")}function RT(t){return"url(#"+t+")"}function jK(t){var e=t.getGlobalScale(),r=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function XK(t){var e=t.x||0,r=t.y||0,n=(t.rotation||0)*o3,i=Jt(t.scaleX,1),a=Jt(t.scaleY,1),o=t.skewX||0,s=t.skewY||0,l=[];return(e||r)&&l.push("translate("+e+"px,"+r+"px)"),n&&l.push("rotate("+n+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+Q3(o*o3)+"deg, "+Q3(s*o3)+"deg)"),l.join(" ")}var Hue=function(){return br.hasGlobalWindow&&Lt(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer!="undefined"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),s6=Array.prototype.slice;function pc(t,e,r){return(e-t)*r+t}function IE(t,e,r,n){for(var i=e.length,a=0;a<i;a++)t[a]=pc(e[a],r[a],n);return t}function Gue(t,e,r,n){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=pc(e[o][s],r[o][s],n)}return t}function eS(t,e,r,n){for(var i=e.length,a=0;a<i;a++)t[a]=e[a]+r[a]*n;return t}function Lk(t,e,r,n){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){t[o]||(t[o]=[]);for(var s=0;s<a;s++)t[o][s]=e[o][s]+r[o][s]*n}return t}function Wue(t,e){for(var r=t.length,n=e.length,i=r>n?e:t,a=Math.min(r,n),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(r,n);s++)i.push({offset:o.offset,color:o.color.slice()})}function $ue(t,e,r){var n=t,i=e;if(!(!n.push||!i.push)){var a=n.length,o=i.length;if(a!==o){var s=a>o;if(s)n.length=o;else for(var l=a;l<o;l++)n.push(r===1?i[l]:s6.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function R1(t){if(Ya(t)){var e=t.length;if(Ya(t[0])){for(var r=[],n=0;n<e;n++)r.push(s6.call(t[n]));return r}return s6.call(t)}return t}function c3(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function jue(t){return Ya(t&&t[0])?2:1}var tS=0,f3=1,KK=2,s1=3,l6=4,u6=5,Dk=6;function Ik(t){return t===l6||t===u6}function rS(t){return t===f3||t===KK}var cy=[0,0,0,0],Xue=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,r,n){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=Dk,l=r;if(Ya(r)){var u=jue(r);s=u,(u===1&&!Ur(r[0])||u===2&&!Ur(r[0][0]))&&(o=!0)}else if(Ur(r)&&!e_(r))s=tS;else if(ft(r))if(!isNaN(+r))s=tS;else{var c=go(r);c&&(l=c,s=s1)}else if(ET(r)){var f=Ae({},l);f.colorStops=Oe(r.colorStops,function(d){return{offset:d.offset,color:go(d.color)}}),GK(r)?s=l6:WK(r)&&(s=u6),l=f}a===0?this.valType=s:(s!==this.valType||s===Dk)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Lt(n)?n:A1[n]||lL(n)),i.push(h),h},t.prototype.prepare=function(e,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,a=n.length,o=n[a-1],s=this.discrete,l=rS(i),u=Ik(i),c=0;c<a;c++){var f=n[c],h=f.value,d=o.value;f.percent=f.time/e,s||(l&&c!==a-1?$ue(h,d,i):u&&Wue(h.colorStops,d.colorStops))}if(!s&&i!==u6&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<a;c++)i===tS?n[c].additiveValue=n[c].value-p:i===s1?n[c].additiveValue=eS([],n[c].value,p,-1):rS(i)&&(n[c].additiveValue=i===f3?eS([],n[c].value,p,-1):Lk([],n[c].value,p,-1))}},t.prototype.step=function(e,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===s1,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=o[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(o[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(o[c].percent>r);c++);c=h(c-1,s-2)}p=o[c+1],d=o[c]}if(d&&p){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var x=n?this._additiveValue:u?cy:e[l];if((rS(a)||u)&&!x&&(x=this._additiveValue=[]),this.discrete)e[l]=m<1?d.rawValue:p.rawValue;else if(rS(a))a===f3?IE(x,d[i],p[i],m):Gue(x,d[i],p[i],m);else if(Ik(a)){var S=d[i],b=p[i],T=a===l6;e[l]={type:T?"linear":"radial",x:pc(S.x,b.x,m),y:pc(S.y,b.y,m),colorStops:Oe(S.colorStops,function(E,M){var A=b.colorStops[M];return{offset:pc(E.offset,A.offset,m),color:c3(IE([],E.color,A.color,m))}}),global:b.global},T?(e[l].x2=pc(S.x2,b.x2,m),e[l].y2=pc(S.y2,b.y2,m)):e[l].r=pc(S.r,b.r,m)}else if(u)IE(x,d[i],p[i],m),n||(e[l]=c3(x));else{var w=pc(d[i],p[i],m);n?this._additiveValue=w:e[l]=w}n&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var r=this.valType,n=this.propName,i=this._additiveValue;r===tS?e[n]=e[n]+i:r===s1?(go(e[n],cy),eS(cy,cy,i,1),e[n]=c3(cy)):r===f3?eS(e[n],e[n],i,1):r===KK&&Lk(e[n],e[n],i,1)},t}(),PT=function(){function t(e,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=r,r&&i){eL("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,r,n){return this.whenWithKeys(e,r,Er(r),n)},t.prototype.whenWithKeys=function(e,r,n,i){for(var a=this._tracks,o=0;o<n.length;o++){var s=n[o],l=a[s];if(!l){l=a[s]=new Xue(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===s1&&u&&(u=c3(u))}else u=this._target[s];if(u==null)continue;e>0&&l.addKeyframe(0,R1(u),i),this._trackKeys.push(s)}l.addKeyframe(e,R1(r[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var r=e.length,n=0;n<r;n++)e[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,r=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)e[r[n]].setFinished()},t.prototype._getAdditiveTrack=function(e){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var a=n[i].getTrack(e);a&&(r=a)}return r},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new Lue({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var r=this._clip;e&&r.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return Oe(this._trackKeys,function(r){return e._tracks[r]})},t.prototype.stopTracks=function(e,r){if(!e.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=n[e[a]];o&&!o.isFinished()&&(r?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!n[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveTo=function(e,r,n){if(e){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var a=r[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[n?0:s.length-1];l&&(e[a]=R1(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,r){r=r||Er(e);for(var n=0;n<r.length;n++){var i=r[n],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},t}();function Lg(){return new Date().getTime()}var Kue=function(t){he(e,t);function e(r){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return e.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},e.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},e.prototype.removeClip=function(r){if(r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},e.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},e.prototype.update=function(r){for(var n=Lg()-this._pausedTime,i=n-this._time,a=this._head;a;){var o=a.next,s=a.step(n,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(Sp(n),!r._paused&&r.update())}Sp(n)},e.prototype.start=function(){this._running||(this._time=Lg(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Lg(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Lg()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(r,n){n=n||{},this.start();var i=new PT(r,n.loop);return this.addAnimator(i),i},e}(al),Yue=300,NE=br.domSupported,OE=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Oe(t,function(i){var a=i.replace("mouse","pointer");return r.hasOwnProperty(a)?a:i});return{mouse:t,touch:e,pointer:n}}(),Nk={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},Ok=!1;function c6(t){var e=t.pointerType;return e==="pen"||e==="touch"}function que(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function kE(t){t&&(t.zrByTouch=!0)}function Zue(t,e){return Bs(t.dom,new Jue(t,e),!0)}function YK(t,e){for(var r=e,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==e&&r===t.painterRoot);)r=r.parentNode;return n}var Jue=function(){function t(e,r){this.stopPropagation=pi,this.stopImmediatePropagation=pi,this.preventDefault=pi,this.type=r.type,this.target=this.currentTarget=e.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return t}(),El={mousedown:function(t){t=Bs(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Bs(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Bs(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=Bs(this.dom,t);var e=t.toElement||t.relatedTarget;YK(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){Ok=!0,t=Bs(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){Ok||(t=Bs(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=Bs(this.dom,t),kE(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),El.mousemove.call(this,t),El.mousedown.call(this,t)},touchmove:function(t){t=Bs(this.dom,t),kE(t),this.handler.processGesture(t,"change"),El.mousemove.call(this,t)},touchend:function(t){t=Bs(this.dom,t),kE(t),this.handler.processGesture(t,"end"),El.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<Yue&&El.click.call(this,t)},pointerdown:function(t){El.mousedown.call(this,t)},pointermove:function(t){c6(t)||El.mousemove.call(this,t)},pointerup:function(t){El.mouseup.call(this,t)},pointerout:function(t){c6(t)||El.mouseout.call(this,t)}};G(["click","dblclick","contextmenu"],function(t){El[t]=function(e){e=Bs(this.dom,e),this.trigger(t,e)}});var f6={pointermove:function(t){c6(t)||f6.mousemove.call(this,t)},pointerup:function(t){f6.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function Que(t,e){var r=e.domHandlers;br.pointerEventsSupported?G(OE.pointer,function(n){h3(e,n,function(i){r[n].call(t,i)})}):(br.touchEventsSupported&&G(OE.touch,function(n){h3(e,n,function(i){r[n].call(t,i),que(e)})}),G(OE.mouse,function(n){h3(e,n,function(i){i=aL(i),e.touching||r[n].call(t,i)})}))}function ece(t,e){br.pointerEventsSupported?G(Nk.pointer,r):br.touchEventsSupported||G(Nk.mouse,r);function r(n){function i(a){a=aL(a),YK(t,a.target)||(a=Zue(t,a),e.domHandlers[n].call(t,a))}h3(e,n,i,{capture:!0})}}function h3(t,e,r,n){t.mounted[e]=r,t.listenerOpts[e]=n,t6(t.domTarget,e,r,n)}function FE(t){var e=t.mounted;for(var r in e)e.hasOwnProperty(r)&&pue(t.domTarget,r,e[r],t.listenerOpts[r]);t.mounted={}}var kk=function(){function t(e,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=r}return t}(),tce=function(t){he(e,t);function e(r,n){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new kk(r,El),NE&&(i._globalHandlerScope=new kk(document,f6)),Que(i,i._localHandlerScope),i}return e.prototype.dispose=function(){FE(this._localHandlerScope),NE&&FE(this._globalHandlerScope)},e.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},e.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,NE&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?ece(this,n):FE(n)}},e}(al),qK=1;br.hasGlobalWindow&&(qK=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ew=qK,h6=.4,d6="#333",p6="#ccc",rce="#eee",Fk=MT,Bk=5e-5;function Zh(t){return t>Bk||t<-Bk}var Jh=[],Av=[],BE=Xo(),zE=Math.abs,_c=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return Zh(this.rotation)||Zh(this.x)||Zh(this.y)||Zh(this.scaleX-1)||Zh(this.scaleY-1)||Zh(this.skewX)||Zh(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||e)){n&&(Fk(n),this.invTransform=null);return}n=n||Xo(),r?this.getLocalTransform(n):Fk(n),e&&(r?Ec(n,e,n):oL(n,e)),this.transform=n,this._resolveGlobalScaleRatio(n)},t.prototype._resolveGlobalScaleRatio=function(e){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Jh);var n=Jh[0]<0?-1:1,i=Jh[1]<0?-1:1,a=((Jh[0]-n)*r+n)/Jh[0]||0,o=((Jh[1]-i)*r+i)/Jh[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Xo(),Up(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,r=[];e;)r.push(e),e=e.parent;for(;e=r.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var r=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);n=Math.sqrt(n)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,r=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Xo(),Ec(Av,e.invTransform,r),r=Av);var n=this.originX,i=this.originY;(n||i)&&(BE[4]=n,BE[5]=i,Ec(Av,r,BE),Av[4]-=n,Av[5]-=i,r=Av),this.setLocalTransform(r)}},t.prototype.getGlobalScale=function(e){var r=this.transform;return e=e||[],r?(e[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),e[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(e[0]=-e[0]),r[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,r){var n=[e,r],i=this.invTransform;return i&&qi(n,n,i),n},t.prototype.transformCoordToGlobal=function(e,r){var n=[e,r],i=this.transform;return i&&qi(n,n,i),n},t.prototype.getLineScale=function(){var e=this.transform;return e&&zE(e[0]-1)>1e-10&&zE(e[3]-1)>1e-10?Math.sqrt(zE(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){ZK(this,e)},t.getLocalTransform=function(e,r){r=r||[];var n=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,f=e.y,h=e.skewX?Math.tan(e.skewX):0,d=e.skewY?Math.tan(-e.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*a-h*v*o,r[5]=-v*o-d*p*a}else r[4]=r[5]=0;return r[0]=a,r[3]=o,r[1]=d*a,r[2]=h*o,u&&zp(r,r,u),r[4]+=n+c,r[5]+=i+f,r},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),Iu=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function ZK(t,e){for(var r=0;r<Iu.length;r++){var n=Iu[r];t[n]=e[n]}}var zk={};function ms(t,e){e=e||yh;var r=zk[e];r||(r=zk[e]=new $m(500));var n=r.get(t);return n==null&&(n=_h.measureText(t,e).width,r.put(t,n)),n}function Uk(t,e,r,n){var i=ms(t,e),a=LT(e),o=l1(0,i,r),s=Cg(0,a,n),l=new sr(o,s,i,a);return l}function u2(t,e,r,n){var i=((t||"")+"").split(`
`),a=i.length;if(a===1)return Uk(i[0],e,r,n);for(var o=new sr(0,0,0,0),s=0;s<i.length;s++){var l=Uk(i[s],e,r,n);s===0?o.copy(l):o.union(l)}return o}function l1(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function Cg(t,e,r){return r==="middle"?t-=e/2:r==="bottom"&&(t-=e),t}function LT(t){return ms("",t)}function Wl(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function tw(t,e,r){var n=e.position||"inside",i=e.distance!=null?e.distance:5,a=r.height,o=r.width,s=a/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=Wl(n[0],r.width),u+=Wl(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+o,u+=s,f="middle";break;case"top":l+=o/2,u-=i,c="center",f="bottom";break;case"bottom":l+=o/2,u+=a+i,c="center";break;case"inside":l+=o/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=o-i,u+=s,c="right",f="middle";break;case"insideTop":l+=o/2,u+=i,c="center";break;case"insideBottom":l+=o/2,u+=a-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=o-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,f="bottom";break;case"insideBottomRight":l+=o-i,u+=a-i,c="right",f="bottom";break}return t=t||{},t.x=l,t.y=u,t.align=c,t.verticalAlign=f,t}var UE="__zr_normal__",VE=Iu.concat(["ignore"]),nce=Gl(Iu,function(t,e){return t[e]=!0,t},{ignore:!1}),Mv={},ice=new sr(0,0,0,0),DT=function(){function t(e){this.id=CK(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=r,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var r=this._textContent;if(r&&(!r.ignore||e)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,a=r.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(r),n.position!=null){var c=ice;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Mv,n,c):tw(Mv,n,c),a.x=Mv.x,a.y=Mv.y,o=Mv.align,s=Mv.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=Wl(f[0],c.width),d=Wl(f[1],c.height)),u=!0,a.originX=-a.x+h+(i?0:c.x),a.originY=-a.y+d+(i?0:c.y)}}n.rotation!=null&&(a.rotation=n.rotation);var p=n.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,x=void 0,S=void 0;v&&this.canBeInsideText()?(m=n.insideFill,x=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(x==null||x==="auto")&&(x=this.getInsideTextStroke(m),S=!0)):(m=n.outsideFill,x=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(x==null||x==="auto")&&(x=this.getOutsideStroke(m),S=!0)),m=m||"#000",(m!==g.fill||x!==g.stroke||S!==g.autoStroke||o!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=x,g.autoStroke=S,g.align=o,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=ds,l&&r.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?p6:d6},t.prototype.getOutsideStroke=function(e){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&go(r);n||(n=[255,255,255,1]);for(var i=n[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(a?0:255)*(1-i);return n[3]=1,Ac(n,"rgba")},t.prototype.traverse=function(e,r){},t.prototype.attrKV=function(e,r){e==="textConfig"?this.setTextConfig(r):e==="textContent"?this.setTextContent(r):e==="clipPath"?this.setClipPath(r):e==="extra"?(this.extra=this.extra||{},Ae(this.extra,r)):this[e]=r},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,r){if(typeof e=="string")this.attrKV(e,r);else if(Nt(e))for(var n=e,i=Er(n),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==UE)){var o=i.targetName,s=o?r[o]:r;i.saveTo(s)}}},t.prototype._innerSaveToNormal=function(e){var r=this._normalState;r||(r=this._normalState={}),e.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(e,r,VE)},t.prototype._savePrimaryToNormal=function(e,r,n){for(var i=0;i<n.length;i++){var a=n[i];e[a]!=null&&!(a in r)&&(r[a]=this[a])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var r=this.states;return r[e]||(r[e]={}),r[e]},t.prototype.clearStates=function(e){this.useState(UE,!1,e)},t.prototype.useState=function(e,r,n,i){var a=e===UE,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(hr(s,e)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!a){eL("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(e,r,n,c),h&&h.useState(e,r,n,c),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ds),u}}},t.prototype.useStates=function(e,r,n){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var f=i[o-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(e.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(e,r,h),g&&g.useStates(e,r,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~ds)}},t.prototype.isSilent=function(){for(var e=this.silent,r=this.parent;!e&&r;){if(r.silent){e=!0;break}r=r.parent}return e},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var r=this.animators[e];r.targetName&&r.changeTarget(this[r.targetName])}},t.prototype.removeState=function(e){var r=hr(this.currentStates,e);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},t.prototype.replaceState=function(e,r,n){var i=this.currentStates.slice(),a=hr(i,e),o=hr(i,r)>=0;a>=0?o?i.splice(a,1):i[a]=r:n&&!o&&i.push(r),this.useStates(i)},t.prototype.toggleState=function(e,r){r?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var r={},n,i=0;i<e.length;i++){var a=e[i];Ae(r,a),a.textConfig&&(n=n||{},Ae(n,a.textConfig))}return n&&(r.textConfig=n),r},t.prototype._applyStateObj=function(e,r,n,i,a,o){var s=!(r&&i);r&&r.textConfig?(this.textConfig=Ae({},i?this.textConfig:n.textConfig),Ae(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<VE.length;c++){var f=VE[c],h=a&&nce[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!a)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(e,l,o)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var r=this.__zr;r&&e.addSelfToZr(r),e.__zr=r,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var r=this._textContent;r!==e&&(r&&r!==e&&this.removeTextContent(),e.innerTransformable=new _c,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Ae(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=ds;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=e),n&&(n.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var r=this.animators;if(r)for(var n=0;n<r.length;n++)e.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)e.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,r,n){var i=e?this[e]:this,a=new PT(i,r,n);return e&&(a.targetName=e),this.addAnimator(a,e),a},t.prototype.addAnimator=function(e,r){var n=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(r)}).done(function(){var a=i.animators,o=hr(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),n&&n.animation.addAnimator(e),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,r){for(var n=this.animators,i=n.length,a=[],o=0;o<i;o++){var s=n[o];!e||e===s.scope?s.stop(r):a.push(s)}return this.animators=a,this},t.prototype.animateTo=function(e,r,n){HE(this,e,r,n)},t.prototype.animateFrom=function(e,r,n){HE(this,e,r,n,!0)},t.prototype._transitionState=function(e,r,n,i){for(var a=HE(this,r,n,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=ds;function r(n,i,a,o){Object.defineProperty(e,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(c){l[o]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),t}();mi(DT,al);mi(DT,_c);function HE(t,e,r,n,i){r=r||{};var a=[];JK(t,"",t,e,r,n,a,i);var o=a.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},f=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&r.during&&a[0].during(function(p,v){r.during(v)});for(var h=0;h<a.length;h++){var d=a[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return a}function GE(t,e,r){for(var n=0;n<r;n++)t[n]=e[n]}function ace(t){return Ya(t[0])}function oce(t,e,r){if(Ya(e[r]))if(Ya(t[r])||(t[r]=[]),Yo(e[r])){var n=e[r].length;t[r].length!==n&&(t[r]=new e[r].constructor(n),GE(t[r],e[r],n))}else{var i=e[r],a=t[r],o=i.length;if(ace(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?GE(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else GE(a,i,o);a.length=i.length}else t[r]=e[r]}function sce(t,e){return t===e||Ya(t)&&Ya(e)&&lce(t,e)}function lce(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function JK(t,e,r,n,i,a,o,s){for(var l=Er(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Nt(a),p=t.animators,v=[],g=0;g<l.length;g++){var m=l[g],x=n[m];if(x!=null&&r[m]!=null&&(d||a[m]))if(Nt(x)&&!Ya(x)&&!ET(x)){if(e){s||(r[m]=x,t.updateDuringAnimation(e));continue}JK(t,m,r[m],x,i,a&&a[m],o,s)}else v.push(m);else s||(r[m]=x,t.updateDuringAnimation(e),v.push(m))}var S=v.length;if(!f&&S)for(var b=0;b<p.length;b++){var T=p[b];if(T.targetName===e){var w=T.stopTracks(v);if(w){var E=hr(p,T);p.splice(E,1)}}}if(i.force||(v=hn(v,function(L){return!sce(n[L],r[L])}),S=v.length),S>0||i.force&&!o.length){var M=void 0,A=void 0,R=void 0;if(s){A={},h&&(M={});for(var b=0;b<S;b++){var m=v[b];A[m]=r[m],h?M[m]=n[m]:r[m]=n[m]}}else if(h){R={};for(var b=0;b<S;b++){var m=v[b];R[m]=R1(r[m]),oce(r,n,m)}}var T=new PT(r,!1,!1,f?hn(p,function(I){return I.targetName===e}):null);T.targetName=e,i.scope&&(T.scope=i.scope),h&&M&&T.whenWithKeys(0,M,v),R&&T.whenWithKeys(0,R,v),T.whenWithKeys(u==null?500:u,s?A:n,v).delay(c||0),t.addAnimator(T,e),o.push(T)}}var Vt=function(t){he(e,t);function e(r){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(r){return this._children[r]},e.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},e.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,a=i.indexOf(n);a>=0&&(i.splice(a,0,r),this._doAdd(r))}return this},e.prototype.replace=function(r,n){var i=hr(this._children,r);return i>=0&&this.replaceAt(n,i),this},e.prototype.replaceAt=function(r,n){var i=this._children,a=i[n];if(r&&r!==this&&r.parent!==this&&r!==a){i[n]=r,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(r)}return this},e.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},e.prototype.remove=function(r){var n=this.__zr,i=this._children,a=hr(i,r);return a<0?this:(i.splice(a,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},e.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var a=r[i];n&&a.removeSelfFromZr(n),a.parent=null}return r.length=0,this},e.prototype.eachChild=function(r,n){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];r.call(n,o,a)}return this},e.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=r.call(n,a);a.isGroup&&!o&&a.traverse(r,n)}return this},e.prototype.addSelfToZr=function(r){t.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},e.prototype.removeSelfFromZr=function(r){t.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},e.prototype.getBoundingRect=function(r){for(var n=new sr(0,0,0,0),i=r||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(sr.applyTransform(n,u,c),o=o||n.clone(),o.union(n)):(o=o||u.clone(),o.union(u))}}return o||n},e}(DT);Vt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var d3={},QK={};function uce(t){delete QK[t]}function cce(t){if(!t)return!1;if(typeof t=="string")return J3(t,1)<h6;if(t.colorStops){for(var e=t.colorStops,r=0,n=e.length,i=0;i<n;i++)r+=J3(e[i].color,1);return r/=n,r<h6}return!1}var fce=function(){function t(e,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=e;var a=new Eue,o=n.renderer||"canvas";d3[o]||(o=Er(d3)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new d3[o](r,a,n,e),l=n.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!br.node&&!br.worker&&!l?new tce(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?br.touchEventsSupported:!!c,h=44,d;f&&(d=Jt(n.pointerSize,h)),this.handler=new LK(a,s,u,s.root,d),this.animation=new Kue({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,r),this.refresh())},t.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=cce(e))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(e){var r,n=Lg();this._needsRefresh&&(r=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=Lg();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},t.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,r){if(!this._disposed)return this.handler.findHover(e,r)},t.prototype.on=function(e,r,n){return this._disposed||this.handler.on(e,r,n),this},t.prototype.off=function(e,r){this._disposed||this.handler.off(e,r)},t.prototype.trigger=function(e,r){this._disposed||this.handler.trigger(e,r)},t.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),r=0;r<e.length;r++)e[r]instanceof Vt&&e[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,uce(this.id))},t}();function v6(t,e){var r=new fce(CK(),t,e);return QK[r.id]=r,r}function hce(t,e){d3[t]=e}var g6;function dce(t){if(typeof g6=="function")return g6(t)}function pce(t){g6=t}var Vk=1e-4,eY=20;function vce(t){return t.replace(/^\s+|\s+$/g,"")}function rn(t,e,r,n){var i=e[0],a=e[1],o=r[0],s=r[1],l=a-i,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(n)if(l>0){if(t<=i)return o;if(t>=a)return s}else{if(t>=i)return o;if(t<=a)return s}else{if(t===i)return o;if(t===a)return s}return(t-i)/l*u+o}function Ze(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return ft(t)?vce(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function kn(t,e,r){return e==null&&(e=10),e=Math.min(Math.max(0,e),eY),t=(+t).toFixed(e),r?t:+t}function Ys(t){return t.sort(function(e,r){return e-r}),t}function Su(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,r=0;r<15;r++,e*=10)if(Math.round(t*e)/e===t)return r}return cL(t)}function cL(t){var e=t.toString().toLowerCase(),r=e.indexOf("e"),n=r>0?+e.slice(r+1):0,i=r>0?r:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-n)}function tY(t,e){var r=Math.log,n=Math.LN10,i=Math.floor(r(t[1]-t[0])/n),a=Math.round(r(Math.abs(e[1]-e[0]))/n),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function gce(t,e){var r=Gl(t,function(d,p){return d+(isNaN(p)?0:p)},0);if(r===0)return[];for(var n=Math.pow(10,e),i=Oe(t,function(d){return(isNaN(d)?0:d)/r*n*100}),a=n*100,o=Oe(i,function(d){return Math.floor(d)}),s=Gl(o,function(d,p){return d+p},0),l=Oe(i,function(d,p){return d-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,f=0,h=l.length;f<h;++f)l[f]>u&&(u=l[f],c=f);++o[c],l[c]=0,++s}return Oe(o,function(d){return d/n})}function mce(t,e){var r=Math.max(Su(t),Su(e)),n=t+e;return r>eY?n:kn(n,r)}var Hk=9007199254740991;function rY(t){var e=Math.PI*2;return(t%e+e)%e}function i_(t){return t>-Vk&&t<Vk}var yce=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function rl(t){if(t instanceof Date)return t;if(ft(t)){var e=yce.exec(t);if(!e)return new Date(NaN);if(e[8]){var r=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(r-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,r,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function _ce(t){return Math.pow(10,fL(t))}function fL(t){if(t===0)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function nY(t,e){var r=fL(t),n=Math.pow(10,r),i=t/n,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,t=a*n,r>=-20?+t.toFixed(r<0?-r:0):t}function WE(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],a=r-n;return a?i+a*(t[n]-i):i}function Gk(t){t.sort(function(l,u){return s(l,u,0)?-1:1});for(var e=-1/0,r=1,n=0;n<t.length;){for(var i=t[n].interval,a=t[n].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-r),e=i[o],r=a[o];i[0]===i[1]&&a[0]*a[1]!==1?t.splice(n,1):n++}return t;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Oc(t){var e=parseFloat(t);return e==t&&(e!==0||!ft(t)||t.indexOf("x")<=0)?e:NaN}function iY(t){return!isNaN(Oc(t))}function aY(){return Math.round(Math.random()*9)}function oY(t,e){return e===0?t:oY(e,t%e)}function Wk(t,e){return t==null?e:e==null?t:t*e/oY(t,e)}function nn(t){throw new Error(t)}function $k(t,e,r){return(e-t)*r+t}var sY="series\0",lY="\0_ec_\0";function gn(t){return t instanceof Array?t:t==null?[]:[t]}function bp(t,e,r){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var n=0,i=r.length;n<i;n++){var a=r[n];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}var jk=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function jm(t){return Nt(t)&&!De(t)&&!(t instanceof Date)?t.value:t}function xce(t){return Nt(t)&&!(t instanceof Array)}function uY(t,e,r){var n=r==="normalMerge",i=r==="replaceMerge",a=r==="replaceAll";t=t||[],e=(e||[]).slice();var o=Tt();G(e,function(l,u){if(!Nt(l)){e[u]=null;return}});var s=Sce(t,o,r);return(n||i)&&bce(s,t,o,e),n&&wce(s,e),n||i?Tce(s,e,i):a&&Cce(s,e),Ece(s),s}function Sce(t,e,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<t.length;i++){var a=t[i];a&&a.id!=null&&e.set(a.id,i),n.push({existing:r==="replaceMerge"||a_(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return n}function bce(t,e,r,n){G(n,function(i,a){if(!(!i||i.id==null)){var o=P1(i.id),s=r.get(o);if(s!=null){var l=t[s];So(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],n[a]=null}}})}function wce(t,e){G(e,function(r,n){if(!(!r||r.name==null))for(var i=0;i<t.length;i++){var a=t[i].existing;if(!t[i].newOption&&a&&(a.id==null||r.id==null)&&!a_(r)&&!a_(a)&&cY("name",a,r)){t[i].newOption=r,e[n]=null;return}}})}function Tce(t,e,r){G(e,function(n){if(n){for(var i,a=0;(i=t[a])&&(i.newOption||a_(i.existing)||i.existing&&n.id!=null&&!cY("id",n,i.existing));)a++;i?(i.newOption=n,i.brandNew=r):t.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),a++}})}function Cce(t,e){G(e,function(r){t.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function Ece(t){var e=Tt();G(t,function(r){var n=r.existing;n&&e.set(n.id,r)}),G(t,function(r){var n=r.newOption;So(!n||n.id==null||!e.get(n.id)||e.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&e.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),G(t,function(r,n){var i=r.existing,a=r.newOption,o=r.keyInfo;if(Nt(a)){if(o.name=a.name!=null?P1(a.name):i?i.name:sY+n,i)o.id=P1(i.id);else if(a.id!=null)o.id=P1(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,r)}})}function cY(t,e,r){var n=Fi(e[t],null),i=Fi(r[t],null);return n!=null&&i!=null&&n===i}function P1(t){return Fi(t,"")}function Fi(t,e){return t==null?e:ft(t)?t:Ur(t)||K9(t)?t+"":e}function hL(t){var e=t.name;return!!(e&&e.indexOf(sY))}function a_(t){return t&&t.id!=null&&P1(t.id).indexOf(lY)===0}function Ace(t){return lY+t}function Mce(t,e,r){G(t,function(n){var i=n.newOption;Nt(i)&&(n.keyInfo.mainType=e,n.keyInfo.subType=Rce(e,i,n.existing,r))})}function Rce(t,e,r,n){var i=e.type?e.type:r?r.subType:n.determineSubType(t,e);return i}function Pce(t,e){var r={},n={};return i(t||[],r),i(e||[],n,r),[a(r),a(n)];function i(o,s,l){for(var u=0,c=o.length;u<c;u++){var f=Fi(o[u].seriesId,null);if(f==null)return;for(var h=gn(o[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var c=a(o[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function wp(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return De(e.dataIndex)?Oe(e.dataIndex,function(r){return t.indexOfRawIndex(r)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return De(e.name)?Oe(e.name,function(r){return t.indexOfName(r)}):t.indexOfName(e.name)}function kr(){var t="__ec_inner_"+Lce++;return function(e){return e[t]||(e[t]={})}}var Lce=aY();function L1(t,e,r){var n=dL(e,r),i=n.mainTypeSpecified,a=n.queryOptionMap,o=n.others,s=o,l=r?r.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var f=c2(t,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function dL(t,e){var r;if(ft(t)){var n={};n[t+"Index"]=0,r=n}else r=t;var i=Tt(),a={},o=!1;return G(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&hr(e.includeMainTypes,c)<0)){o=o||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Ci={useDefault:!0,enableAll:!1,enableNone:!1},Dce={useDefault:!1,enableAll:!0,enableNone:!0};function c2(t,e,r,n){n=n||Ci;var i=r.index,a=r.id,o=r.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=t.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(So(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(So(n.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=t.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function fY(t,e,r){t.setAttribute?t.setAttribute(e,r):t[e]=r}function Ice(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function Nce(t){return t==="auto"?br.domSupported?"html":"richText":t||"html"}function m6(t,e){var r=Tt(),n=[];return G(t,function(i){var a=e(i);(r.get(a)||(n.push(a),r.set(a,[]))).push(i)}),{keys:n,buckets:r}}function hY(t,e,r,n,i){var a=e==null||e==="auto";if(n==null)return n;if(Ur(n)){var o=$k(r||0,n,i);return kn(o,a?Math.max(Su(r||0),Su(n)):e)}else{if(ft(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=t.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],o=$k(d,p,i);s[f]=kn(o,a?Math.max(Su(d),Su(p)):e)}}return s}}var Oce=".",Qh="___EC__COMPONENT__CONTAINER___",dY="___EC__EXTENDED_CLASS___";function bu(t){var e={main:"",sub:""};if(t){var r=t.split(Oce);e.main=r[0]||"",e.sub=r[1]||""}return e}function kce(t){So(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function Fce(t){return!!(t&&t[dY])}function pL(t,e){t.$constructor=t,t.extend=function(r){var n=this,i;return Bce(n)?i=function(a){he(o,a);function o(){return a.apply(this,arguments)||this}return o}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},rL(i,this)),Ae(i.prototype,r),i[dY]=!0,i.extend=this.extend,i.superCall=Vce,i.superApply=Hce,i.superClass=n,i}}function Bce(t){return Lt(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function pY(t,e){t.extend=e.extend}var zce=Math.round(Math.random()*10);function Uce(t){var e=["__\0is_clz",zce++].join("_");t.prototype[e]=!0,t.isInstance=function(r){return!!(r&&r[e])}}function Vce(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[e].apply(t,r)}function Hce(t,e,r){return this.superClass.prototype[e].apply(t,r)}function IT(t){var e={};t.registerClass=function(n){var i=n.type||n.prototype.type;if(i){kce(i),n.prototype.type=i;var a=bu(i);if(!a.sub)e[a.main]=n;else if(a.sub!==Qh){var o=r(a);o[a.sub]=n}}return n},t.getClass=function(n,i,a){var o=e[n];if(o&&o[Qh]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return o},t.getClassesByMainType=function(n){var i=bu(n),a=[],o=e[i.main];return o&&o[Qh]?G(o,function(s,l){l!==Qh&&a.push(s)}):a.push(o),a},t.hasClass=function(n){var i=bu(n);return!!e[i.main]},t.getAllClassMainTypes=function(){var n=[];return G(e,function(i,a){n.push(a)}),n},t.hasSubTypes=function(n){var i=bu(n),a=e[i.main];return a&&a[Qh]};function r(n){var i=e[n.main];return(!i||!i[Qh])&&(i=e[n.main]={},i[Qh]=!0),i}}function Tp(t,e){for(var r=0;r<t.length;r++)t[r][1]||(t[r][1]=t[r][0]);return e=e||!1,function(n,i,a){for(var o={},s=0;s<t.length;s++){var l=t[s][1];if(!(i&&hr(i,l)>=0||a&&hr(a,l)<0)){var u=n.getShallow(l,e);u!=null&&(o[t[s][0]]=u)}}return o}}var Gce=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Wce=Tp(Gce),$ce=function(){function t(){}return t.prototype.getAreaStyle=function(e,r){return Wce(this,e,r)},t}(),y6=new $m(50);function jce(t){if(typeof t=="string"){var e=y6.get(t);return e&&e.image}else return t}function vL(t,e,r,n,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!r)return e;var a=y6.get(t),o={hostEl:r,cb:n,cbPayload:i};return a?(e=a.image,!NT(e)&&a.pending.push(o)):(e=_h.loadImage(t,Xk,Xk),e.__zrImageSrc=t,y6.put(t,e.__cachedImgObj={image:e,pending:[o]})),e}else return t;else return e}function Xk(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var r=t.pending[e],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}t.pending.length=0}function NT(t){return t&&t.width&&t.height}var $E=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Xce(t,e,r,n,i){if(!e)return"";var a=(t+"").split(`
`);i=vY(e,r,n,i);for(var o=0,s=a.length;o<s;o++)a[o]=gY(a[o],i);return a.join(`
`)}function vY(t,e,r,n){n=n||{};var i=Ae({},n);i.font=e,r=Jt(r,"..."),i.maxIterations=Jt(n.maxIterations,2);var a=i.minChar=Jt(n.minChar,0);i.cnCharWidth=ms("",e);var o=i.ascCharWidth=ms("a",e);i.placeholder=Jt(n.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<a&&s>=o;l++)s-=o;var u=ms(r,e);return u>s&&(r="",u=0),s=t-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=t,i}function gY(t,e){var r=e.containerWidth,n=e.font,i=e.contentWidth;if(!r)return"";var a=ms(t,n);if(a<=r)return t;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){t+=e.ellipsis;break}var s=o===0?Kce(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;t=t.substr(0,s),a=ms(t,n)}return t===""&&(t=e.placeholder),t}function Kce(t,e,r,n){for(var i=0,a=0,o=t.length;a<o&&i<e;a++){var s=t.charCodeAt(a);i+=0<=s&&s<=127?r:n}return a}function Yce(t,e){t!=null&&(t+="");var r=e.overflow,n=e.padding,i=e.font,a=r==="truncate",o=LT(i),s=Jt(e.lineHeight,o),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=e.width,f;c!=null&&(r==="break"||r==="breakAll")?f=t?mY(t,e.font,c,r==="breakAll",0).lines:[]:f=t?t.split(`
`):[];var h=f.length*s,d=Jt(e.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(t&&a&&c!=null)for(var v=vY(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),g=0;g<f.length;g++)f[g]=gY(f[g],v);for(var m=d,x=0,g=0;g<f.length;g++)x=Math.max(ms(f[g],i),x);c==null&&(c=x);var S=x;return n&&(m+=n[0]+n[2],S+=n[1]+n[3],c+=n[1]+n[3]),l&&(S=c),{lines:f,height:d,outerWidth:S,outerHeight:m,lineHeight:s,calculatedLineHeight:o,contentWidth:x,contentHeight:h,width:c}}var qce=function(){function t(){}return t}(),Kk=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),Zce=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function Jce(t,e){var r=new Zce;if(t!=null&&(t+=""),!t)return r;for(var n=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:a==="breakAll"}:null,s=$E.lastIndex=0,l;(l=$E.exec(t))!=null;){var u=l.index;u>s&&jE(r,t.substring(s,u),e,o),jE(r,l[2],e,o,l[1]),s=$E.lastIndex}s<t.length&&jE(r,t.substring(s,t.length),e,o);var c=[],f=0,h=0,d=e.padding,p=a==="truncate",v=e.lineOverflow==="truncate";function g(F,$,W){F.width=$,F.lineHeight=W,f+=W,h=Math.max(h,$)}e:for(var m=0;m<r.lines.length;m++){for(var x=r.lines[m],S=0,b=0,T=0;T<x.tokens.length;T++){var w=x.tokens[T],E=w.styleName&&e.rich[w.styleName]||{},M=w.textPadding=E.padding,A=M?M[1]+M[3]:0,R=w.font=E.font||e.font;w.contentHeight=LT(R);var L=Jt(E.height,w.contentHeight);if(w.innerHeight=L,M&&(L+=M[0]+M[2]),w.height=L,w.lineHeight=Eu(E.lineHeight,e.lineHeight,L),w.align=E&&E.align||e.align,w.verticalAlign=E&&E.verticalAlign||"middle",v&&i!=null&&f+w.lineHeight>i){T>0?(x.tokens=x.tokens.slice(0,T),g(x,b,S),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break e}var I=E.width,N=I==null||I==="auto";if(typeof I=="string"&&I.charAt(I.length-1)==="%")w.percentWidth=I,c.push(w),w.contentWidth=ms(w.text,R);else{if(N){var k=E.backgroundColor,z=k&&k.image;z&&(z=jce(z),NT(z)&&(w.width=Math.max(w.width,z.width*L/z.height)))}var B=p&&n!=null?n-b:null;B!=null&&B<w.width?!N||B<A?(w.text="",w.width=w.contentWidth=0):(w.text=Xce(w.text,B-A,R,e.ellipsis,{minChar:e.truncateMinChar}),w.width=w.contentWidth=ms(w.text,R)):w.contentWidth=ms(w.text,R)}w.width+=A,b+=w.width,E&&(S=Math.max(S,w.lineHeight))}g(x,b,S)}r.outerWidth=r.width=Jt(n,h),r.outerHeight=r.height=Jt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var w=c[m],V=w.percentWidth;w.width=parseInt(V,10)/100*r.width}return r}function jE(t,e,r,n,i){var a=e==="",o=i&&r.rich[i]||{},s=t.lines,l=o.font||r.font,u=!1,c,f;if(n){var h=o.padding,d=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Wl(o.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=e.split(`
`),u=!0),n.accumWidth=p}else{var v=mY(e,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=e.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],x=new qce;if(x.styleName=i,x.text=m,x.isLineHolder=!m&&!a,typeof o.width=="number"?x.width=o.width:x.width=f?f[g]:ms(m,l),!g&&!u){var S=(s[s.length-1]||(s[0]=new Kk)).tokens,b=S.length;b===1&&S[0].isLineHolder?S[0]=x:(m||!b||a)&&S.push(x)}else s.push(new Kk([x]))}}function Qce(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var efe=Gl(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function tfe(t){return Qce(t)?!!efe[t]:!0}function mY(t,e,r,n,i){for(var a=[],o=[],s="",l="",u=0,c=0,f=0;f<t.length;f++){var h=t.charAt(f);if(h===`
`){l&&(s+=l,c+=u),a.push(s),o.push(c),s="",l="",u=0,c=0;continue}var d=ms(h,e),p=n?!1:!tfe(h);if(a.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),a.push(s),o.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(c),s=h,c=d)):p?(a.push(l),o.push(u),l=h,u=d):(a.push(h),o.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!a.length&&!s&&(s=t,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var _6="__zr_style_"+Math.round(Math.random()*10),cp={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},OT={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};cp[_6]=!0;var Yk=["z","z2","invisible"],rfe=["invisible"],nl=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype._init=function(r){for(var n=Er(r),i=0;i<n.length;i++){var a=n[i];a==="style"?this.useStyle(r[a]):t.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(r,n,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&nfe(this,r,n)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(r,n){return this.rectContain(r,n)},e.prototype.traverse=function(r,n){r.call(n,this)},e.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new sr(0,0,0,0)),n?sr.applyTransform(r,i,n):r.copy(i),(o||s||l)&&(r.width+=o*2+Math.abs(s),r.height+=o*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-o),r.y=Math.min(r.y,r.y+l-o));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},e.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new sr(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(r){return this.animate("style",r)},e.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(r,n){r!=="style"?t.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:Ae(this.style,r),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=o1,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&o1)},e.prototype.styleUpdated=function(){this.__dirty&=~o1},e.prototype.createStyle=function(r){return AT(cp,r)},e.prototype.useStyle=function(r){r[_6]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},e.prototype.isStyleObject=function(r){return r[_6]},e.prototype._innerSaveToNormal=function(r){t.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,Yk)},e.prototype._applyStateObj=function(r,n,i,a,o,s){t.prototype._applyStateObj.call(this,r,n,i,a,o,s);var l=!(n&&a),u;if(n&&n.style?o?a?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=Er(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=Er(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?rfe:Yk,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},e.prototype._mergeStates=function(r){for(var n=t.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var o=r[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(n.style=i),n},e.prototype._mergeStyle=function(r,n){return Ae(r,n),r},e.prototype.getAnimationStyleProps=function(){return OT},e.initDefaultProps=function(){var r=e.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=ds|o1}(),e}(DT),XE=new sr(0,0,0,0),KE=new sr(0,0,0,0);function nfe(t,e,r){return XE.copy(t.getBoundingRect()),t.transform&&XE.applyTransform(t.transform),KE.width=e,KE.height=r,!XE.intersect(KE)}var Go=Math.min,Wo=Math.max,YE=Math.sin,qE=Math.cos,ed=Math.PI*2,nS=Bp(),iS=Bp(),aS=Bp();function kT(t,e,r){if(t.length!==0){for(var n=t[0],i=n[0],a=n[0],o=n[1],s=n[1],l=1;l<t.length;l++)n=t[l],i=Go(i,n[0]),a=Wo(a,n[0]),o=Go(o,n[1]),s=Wo(s,n[1]);e[0]=i,e[1]=o,r[0]=a,r[1]=s}}function qk(t,e,r,n,i,a){i[0]=Go(t,r),i[1]=Go(e,n),a[0]=Wo(t,r),a[1]=Wo(e,n)}var Zk=[],Jk=[];function ife(t,e,r,n,i,a,o,s,l,u){var c=kK,f=Wi,h=c(t,r,i,o,Zk);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(t,r,i,o,Zk[d]);l[0]=Go(p,l[0]),u[0]=Wo(p,u[0])}h=c(e,n,a,s,Jk);for(var d=0;d<h;d++){var v=f(e,n,a,s,Jk[d]);l[1]=Go(v,l[1]),u[1]=Wo(v,u[1])}l[0]=Go(t,l[0]),u[0]=Wo(t,u[0]),l[0]=Go(o,l[0]),u[0]=Wo(o,u[0]),l[1]=Go(e,l[1]),u[1]=Wo(e,u[1]),l[1]=Go(s,l[1]),u[1]=Wo(s,u[1])}function afe(t,e,r,n,i,a,o,s){var l=BK,u=pa,c=Wo(Go(l(t,r,i),1),0),f=Wo(Go(l(e,n,a),1),0),h=u(t,r,i,c),d=u(e,n,a,f);o[0]=Go(t,i,h),o[1]=Go(e,a,d),s[0]=Wo(t,i,h),s[1]=Wo(e,a,d)}function ofe(t,e,r,n,i,a,o,s,l){var u=Kf,c=Yf,f=Math.abs(i-a);if(f%ed<1e-4&&f>1e-4){s[0]=t-r,s[1]=e-n,l[0]=t+r,l[1]=e+n;return}if(nS[0]=qE(i)*r+t,nS[1]=YE(i)*n+e,iS[0]=qE(a)*r+t,iS[1]=YE(a)*n+e,u(s,nS,iS),c(l,nS,iS),i=i%ed,i<0&&(i=i+ed),a=a%ed,a<0&&(a=a+ed),i>a&&!o?a+=ed:i<a&&o&&(i+=ed),o){var h=a;a=i,i=h}for(var d=0;d<a;d+=Math.PI/2)d>i&&(aS[0]=qE(d)*r+t,aS[1]=YE(d)*n+e,u(s,aS,s),c(l,aS,l))}var bn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},td=[],rd=[],iu=[],xf=[],au=[],ou=[],ZE=Math.min,JE=Math.max,nd=Math.cos,id=Math.sin,ec=Math.abs,x6=Math.PI,Vf=x6*2,QE=typeof Float32Array!="undefined",fy=[];function eA(t){var e=Math.round(t/x6*1e8)/1e8;return e%2*x6}function gL(t,e){var r=eA(t[0]);r<0&&(r+=Vf);var n=r-t[0],i=t[1];i+=n,!e&&i-r>=Vf?i=r+Vf:e&&r-i>=Vf?i=r-Vf:!e&&r>i?i=r+(Vf-eA(r-i)):e&&r<i&&(i=r-(Vf-eA(i-r))),t[0]=r,t[1]=i}var Nu=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,r,n){n=n||0,n>0&&(this._ux=ec(n/ew/e)||0,this._uy=ec(n/ew/r)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,r){return this._drawPendingPt(),this.addData(bn.M,e,r),this._ctx&&this._ctx.moveTo(e,r),this._x0=e,this._y0=r,this._xi=e,this._yi=r,this},t.prototype.lineTo=function(e,r){var n=ec(e-this._xi),i=ec(r-this._yi),a=n>this._ux||i>this._uy;if(this.addData(bn.L,e,r),this._ctx&&a&&this._ctx.lineTo(e,r),a)this._xi=e,this._yi=r,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=r,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(e,r,n,i,a,o){return this._drawPendingPt(),this.addData(bn.C,e,r,n,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,r,n,i,a,o),this._xi=a,this._yi=o,this},t.prototype.quadraticCurveTo=function(e,r,n,i){return this._drawPendingPt(),this.addData(bn.Q,e,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(e,r,n,i),this._xi=n,this._yi=i,this},t.prototype.arc=function(e,r,n,i,a,o){this._drawPendingPt(),fy[0]=i,fy[1]=a,gL(fy,o),i=fy[0],a=fy[1];var s=a-i;return this.addData(bn.A,e,r,n,n,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,r,n,i,a,o),this._xi=nd(a)*n+e,this._yi=id(a)*n+r,this},t.prototype.arcTo=function(e,r,n,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,r,n,i,a),this},t.prototype.rect=function(e,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,r,n,i),this.addData(bn.R,e,r,n,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(bn.Z);var e=this._ctx,r=this._x0,n=this._y0;return e&&e.closePath(),this._xi=r,this._yi=n,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var r=e.length;!(this.data&&this.data.length===r)&&QE&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=e[n];this._len=r},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var r=e.length,n=0,i=this._len,a=0;a<r;a++)n+=e[a].len();QE&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var a=0;a<r;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},t.prototype.addData=function(e,r,n,i,a,o,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],r=0;r<this._len;r++)e[r]=this.data[r];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,QE&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){iu[0]=iu[1]=au[0]=au[1]=Number.MAX_VALUE,xf[0]=xf[1]=ou[0]=ou[1]=-Number.MAX_VALUE;var e=this.data,r=0,n=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(r=e[o],n=e[o+1],i=r,a=n),s){case bn.M:r=i=e[o++],n=a=e[o++],au[0]=i,au[1]=a,ou[0]=i,ou[1]=a;break;case bn.L:qk(r,n,e[o],e[o+1],au,ou),r=e[o++],n=e[o++];break;case bn.C:ife(r,n,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],au,ou),r=e[o++],n=e[o++];break;case bn.Q:afe(r,n,e[o++],e[o++],e[o],e[o+1],au,ou),r=e[o++],n=e[o++];break;case bn.A:var u=e[o++],c=e[o++],f=e[o++],h=e[o++],d=e[o++],p=e[o++]+d;o+=1;var v=!e[o++];l&&(i=nd(d)*f+u,a=id(d)*h+c),ofe(u,c,f,h,d,p,v,au,ou),r=nd(p)*f+u,n=id(p)*h+c;break;case bn.R:i=r=e[o++],a=n=e[o++];var g=e[o++],m=e[o++];qk(i,a,i+g,a+m,au,ou);break;case bn.Z:r=i,n=a;break}Kf(iu,iu,au),Yf(xf,xf,ou)}return o===0&&(iu[0]=iu[1]=xf[0]=xf[1]=0),new sr(iu[0],iu[1],xf[0]-iu[0],xf[1]-iu[1])},t.prototype._calculateLength=function(){var e=this.data,r=this._len,n=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=e[h++],p=h===1;p&&(a=e[h],o=e[h+1],s=a,l=o);var v=-1;switch(d){case bn.M:a=s=e[h++],o=l=e[h++];break;case bn.L:{var g=e[h++],m=e[h++],x=g-a,S=m-o;(ec(x)>n||ec(S)>i||h===r-1)&&(v=Math.sqrt(x*x+S*S),a=g,o=m);break}case bn.C:{var b=e[h++],T=e[h++],g=e[h++],m=e[h++],w=e[h++],E=e[h++];v=Aue(a,o,b,T,g,m,w,E,10),a=w,o=E;break}case bn.Q:{var b=e[h++],T=e[h++],g=e[h++],m=e[h++];v=Rue(a,o,b,T,g,m,10),a=g,o=m;break}case bn.A:var M=e[h++],A=e[h++],R=e[h++],L=e[h++],I=e[h++],N=e[h++],k=N+I;h+=1,p&&(s=nd(I)*R+M,l=id(I)*L+A),v=JE(R,L)*ZE(Vf,Math.abs(N)),a=nd(k)*R+M,o=id(k)*L+A;break;case bn.R:{s=a=e[h++],l=o=e[h++];var z=e[h++],B=e[h++];v=z*2+B*2;break}case bn.Z:{var x=s-a,S=l-o;v=Math.sqrt(x*x+S*S),a=s,o=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,r){var n=this.data,i=this._ux,a=this._uy,o=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,x,S=0,b,T;if(!(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,x=r*v,!x)))e:for(var w=0;w<o;){var E=n[w++],M=w===1;switch(M&&(u=n[w],c=n[w+1],s=u,l=c),E!==bn.L&&S>0&&(e.lineTo(b,T),S=0),E){case bn.M:s=u=n[w++],l=c=n[w++],e.moveTo(u,c);break;case bn.L:{f=n[w++],h=n[w++];var A=ec(f-u),R=ec(h-c);if(A>i||R>a){if(d){var L=p[m++];if(g+L>x){var I=(x-g)/L;e.lineTo(u*(1-I)+f*I,c*(1-I)+h*I);break e}g+=L}e.lineTo(f,h),u=f,c=h,S=0}else{var N=A*A+R*R;N>S&&(b=f,T=h,S=N)}break}case bn.C:{var k=n[w++],z=n[w++],B=n[w++],V=n[w++],F=n[w++],$=n[w++];if(d){var L=p[m++];if(g+L>x){var I=(x-g)/L;xh(u,k,B,F,I,td),xh(c,z,V,$,I,rd),e.bezierCurveTo(td[1],rd[1],td[2],rd[2],td[3],rd[3]);break e}g+=L}e.bezierCurveTo(k,z,B,V,F,$),u=F,c=$;break}case bn.Q:{var k=n[w++],z=n[w++],B=n[w++],V=n[w++];if(d){var L=p[m++];if(g+L>x){var I=(x-g)/L;t_(u,k,B,I,td),t_(c,z,V,I,rd),e.quadraticCurveTo(td[1],rd[1],td[2],rd[2]);break e}g+=L}e.quadraticCurveTo(k,z,B,V),u=B,c=V;break}case bn.A:var W=n[w++],H=n[w++],X=n[w++],te=n[w++],Y=n[w++],ee=n[w++],se=n[w++],ne=!n[w++],le=X>te?X:te,pe=ec(X-te)>.001,Se=Y+ee,_e=!1;if(d){var L=p[m++];g+L>x&&(Se=Y+ee*(x-g)/L,_e=!0),g+=L}if(pe&&e.ellipse?e.ellipse(W,H,X,te,se,Y,Se,ne):e.arc(W,H,le,Y,Se,ne),_e)break e;M&&(s=nd(Y)*X+W,l=id(Y)*te+H),u=nd(Se)*X+W,c=id(Se)*te+H;break;case bn.R:s=u=n[w],l=c=n[w+1],f=n[w++],h=n[w++];var Le=n[w++],Be=n[w++];if(d){var L=p[m++];if(g+L>x){var Q=x-g;e.moveTo(f,h),e.lineTo(f+ZE(Q,Le),h),Q-=Le,Q>0&&e.lineTo(f+Le,h+ZE(Q,Be)),Q-=Be,Q>0&&e.lineTo(f+JE(Le-Q,0),h+Be),Q-=Le,Q>0&&e.lineTo(f,h+JE(Be-Q,0));break e}g+=L}e.rect(f,h,Le,Be);break;case bn.Z:if(d){var L=p[m++];if(g+L>x){var I=(x-g)/L;e.lineTo(u*(1-I)+s*I,c*(1-I)+l*I);break e}g+=L}e.closePath(),u=s,c=l}}},t.prototype.clone=function(){var e=new t,r=this.data;return e.data=r.slice?r.slice():Array.prototype.slice.call(r),e._len=this._len,e},t.CMD=bn,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();function mc(t,e,r,n,i,a,o){if(i===0)return!1;var s=i,l=0,u=t;if(o>e+s&&o>n+s||o<e-s&&o<n-s||a>t+s&&a>r+s||a<t-s&&a<r-s)return!1;if(t!==r)l=(e-n)/(t-r),u=(t*n-r*e)/(t-r);else return Math.abs(a-t)<=s/2;var c=l*a-o+u,f=c*c/(l*l+1);return f<=s/2*s/2}function sfe(t,e,r,n,i,a,o,s,l,u,c){if(l===0)return!1;var f=l;if(c>e+f&&c>n+f&&c>a+f&&c>s+f||c<e-f&&c<n-f&&c<a-f&&c<s-f||u>t+f&&u>r+f&&u>i+f&&u>o+f||u<t-f&&u<r-f&&u<i-f&&u<o-f)return!1;var h=FK(t,e,r,n,i,a,o,s,u,c,null);return h<=f/2}function yY(t,e,r,n,i,a,o,s,l){if(o===0)return!1;var u=o;if(l>e+u&&l>n+u&&l>a+u||l<e-u&&l<n-u&&l<a-u||s>t+u&&s>r+u&&s>i+u||s<t-u&&s<r-u&&s<i-u)return!1;var c=zK(t,e,r,n,i,a,s,l,null);return c<=u/2}var Qk=Math.PI*2;function ps(t){return t%=Qk,t<0&&(t+=Qk),t}var hy=Math.PI*2;function lfe(t,e,r,n,i,a,o,s,l){if(o===0)return!1;var u=o;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%hy<1e-4)return!0;if(a){var f=n;n=ps(i),i=ps(f)}else n=ps(n),i=ps(i);n>i&&(i+=hy);var h=Math.atan2(l,s);return h<0&&(h+=hy),h>=n&&h<=i||h+hy>=n&&h+hy<=i}function vc(t,e,r,n,i,a){if(a>e&&a>n||a<e&&a<n||n===e)return 0;var o=(a-e)/(n-e),s=n<e?1:-1;(o===1||o===0)&&(s=n<e?.5:-.5);var l=o*(r-t)+t;return l===i?1/0:l>i?s:0}var Sf=Nu.CMD,ad=Math.PI*2,ufe=1e-4;function cfe(t,e){return Math.abs(t-e)<ufe}var co=[-1,-1,-1],Vs=[-1,-1];function ffe(){var t=Vs[0];Vs[0]=Vs[1],Vs[1]=t}function hfe(t,e,r,n,i,a,o,s,l,u){if(u>e&&u>n&&u>a&&u>s||u<e&&u<n&&u<a&&u<s)return 0;var c=q3(e,n,a,s,u,co);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=co[v],m=g===0||g===1?.5:1,x=Wi(t,r,i,o,g);x<l||(h<0&&(h=kK(e,n,a,s,Vs),Vs[1]<Vs[0]&&h>1&&ffe(),d=Wi(e,n,a,s,Vs[0]),h>1&&(p=Wi(e,n,a,s,Vs[1]))),h===2?g<Vs[0]?f+=d<e?m:-m:g<Vs[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<Vs[0]?f+=d<e?m:-m:f+=s<d?m:-m)}return f}function dfe(t,e,r,n,i,a,o,s){if(s>e&&s>n&&s>a||s<e&&s<n&&s<a)return 0;var l=Mue(e,n,a,s,co);if(l===0)return 0;var u=BK(e,n,a);if(u>=0&&u<=1){for(var c=0,f=pa(e,n,a,u),h=0;h<l;h++){var d=co[h]===0||co[h]===1?.5:1,p=pa(t,r,i,co[h]);p<o||(co[h]<u?c+=f<e?d:-d:c+=a<f?d:-d)}return c}else{var d=co[0]===0||co[0]===1?.5:1,p=pa(t,r,i,co[0]);return p<o?0:a<e?d:-d}}function pfe(t,e,r,n,i,a,o,s){if(s-=e,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);co[0]=-l,co[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=ad-1e-4){n=0,i=ad;var c=a?1:-1;return o>=co[0]+t&&o<=co[1]+t?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=ad,i+=ad);for(var h=0,d=0;d<2;d++){var p=co[d];if(p+t>o){var v=Math.atan2(s,p),c=a?1:-1;v<0&&(v=ad+v),(v>=n&&v<=i||v+ad>=n&&v+ad<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function _Y(t,e,r,n,i){for(var a=t.data,o=t.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<o;){var v=a[p++],g=p===1;switch(v===Sf.M&&p>1&&(r||(s+=vc(l,u,c,f,n,i))),g&&(l=a[p],u=a[p+1],c=l,f=u),v){case Sf.M:c=a[p++],f=a[p++],l=c,u=f;break;case Sf.L:if(r){if(mc(l,u,a[p],a[p+1],e,n,i))return!0}else s+=vc(l,u,a[p],a[p+1],n,i)||0;l=a[p++],u=a[p++];break;case Sf.C:if(r){if(sfe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,n,i))return!0}else s+=hfe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],n,i)||0;l=a[p++],u=a[p++];break;case Sf.Q:if(r){if(yY(l,u,a[p++],a[p++],a[p],a[p+1],e,n,i))return!0}else s+=dfe(l,u,a[p++],a[p++],a[p],a[p+1],n,i)||0;l=a[p++],u=a[p++];break;case Sf.A:var m=a[p++],x=a[p++],S=a[p++],b=a[p++],T=a[p++],w=a[p++];p+=1;var E=!!(1-a[p++]);h=Math.cos(T)*S+m,d=Math.sin(T)*b+x,g?(c=h,f=d):s+=vc(l,u,h,d,n,i);var M=(n-m)*b/S+m;if(r){if(lfe(m,x,b,T,T+w,E,e,M,i))return!0}else s+=pfe(m,x,b,T,T+w,E,M,i);l=Math.cos(T+w)*S+m,u=Math.sin(T+w)*b+x;break;case Sf.R:c=l=a[p++],f=u=a[p++];var A=a[p++],R=a[p++];if(h=c+A,d=f+R,r){if(mc(c,f,h,f,e,n,i)||mc(h,f,h,d,e,n,i)||mc(h,d,c,d,e,n,i)||mc(c,d,c,f,e,n,i))return!0}else s+=vc(h,f,h,d,n,i),s+=vc(c,d,c,f,n,i);break;case Sf.Z:if(r){if(mc(l,u,c,f,e,n,i))return!0}else s+=vc(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!cfe(u,f)&&(s+=vc(l,u,c,f,n,i)||0),s!==0}function vfe(t,e,r){return _Y(t,0,!1,e,r)}function gfe(t,e,r,n){return _Y(t,e,!0,r,n)}var rw=At({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},cp),mfe={style:At({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},OT.style)},tA=Iu.concat(["invisible","culling","z","z2","zlevel","parent"]),yr=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.update=function(){var r=this;t.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var a=i.style;for(var o in n)a[o]!==n[o]&&(a[o]=n[o]);a.fill=n.fill?n.decal:null,a.decal=null,a.shadowColor=null,n.strokeFirst&&(a.stroke=null);for(var s=0;s<tA.length;++s)i[tA[s]]=this[tA[s]];i.__dirty|=ds}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(r){var n=Er(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<n.length;a++){var o=n[a],s=r[o];o==="style"?this.style?Ae(this.style,s):this.useStyle(s):o==="shape"?Ae(this.shape,s):t.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(ft(r)){var n=J3(r,0);return n>.5?d6:n>.2?rce:p6}else if(r)return p6}return d6},e.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(ft(n)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=J3(r,0)<h6;if(a===o)return n}},e.prototype.buildPath=function(r,n,i){},e.prototype.pathUpdated=function(){this.__dirty&=~Tg},e.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},e.prototype.createPathProxy=function(){this.path=new Nu(!1)},e.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},e.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},e.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&Tg)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),r=o.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},e.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect(),o=this.style;if(r=i[0],n=i[1],a.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),gfe(s,l/u,r,n)))return!0}if(this.hasFill())return vfe(s,r,n)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Tg,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(r){return this.animate("shape",r)},e.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):t.prototype.attrKV.call(this,r,n)},e.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:Ae(i,r),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Tg)},e.prototype.createStyle=function(r){return AT(rw,r)},e.prototype._innerSaveToNormal=function(r){t.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=Ae({},this.shape))},e.prototype._applyStateObj=function(r,n,i,a,o,s){t.prototype._applyStateObj.call(this,r,n,i,a,o,s);var l=!(n&&a),u;if(n&&n.shape?o?a?u=n.shape:(u=Ae({},i.shape),Ae(u,n.shape)):(u=Ae({},a?this.shape:i.shape),Ae(u,n.shape)):l&&(u=i.shape),u)if(o){this.shape=Ae({},this.shape);for(var c={},f=Er(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(r){for(var n=t.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var o=r[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(n.shape=i),n},e.prototype.getAnimationStyleProps=function(){return mfe},e.prototype.isZeroArea=function(){return!1},e.extend=function(r){var n=function(a){he(o,a);function o(s){var l=a.call(this,s)||this;return r.init&&r.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Ft(r.style)},o.prototype.getDefaultShape=function(){return Ft(r.shape)},o}(e);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},e.initDefaultProps=function(){var r=e.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=ds|o1|Tg}(),e}(nl),yfe=At({strokeFirst:!0,font:yh,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},rw),am=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},e.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},e.prototype.createStyle=function(r){return AT(yfe,r)},e.prototype.setBoundingRect=function(r){this._rect=r},e.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=u2(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var r=e.prototype;r.dirtyRectTolerance=10}(),e}(nl);am.prototype.type="tspan";var _fe=At({x:0,y:0},cp),xfe={style:At({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},OT.style)};function Sfe(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var aa=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(r){return AT(_fe,r)},e.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var a=Sfe(n.image)?n.image:this.__image;if(!a)return 0;var o=r==="width"?"height":"width",s=n[o];return s==null?a[r]:a[r]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return xfe},e.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new sr(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},e}(nl);aa.prototype.type="image";function bfe(t,e){var r=e.x,n=e.y,i=e.width,a=e.height,o=e.r,s,l,u,c;i<0&&(r=r+i,i=-i),a<0&&(n=n+a,a=-a),typeof o=="number"?s=l=u=c=o:o instanceof Array?o.length===1?s=l=u=c=o[0]:o.length===2?(s=u=o[0],l=c=o[1]):o.length===3?(s=o[0],l=c=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],c=o[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>a&&(f=l+u,l*=a/f,u*=a/f),s+c>a&&(f=s+c,s*=a/f,c*=a/f),t.moveTo(r+s,n),t.lineTo(r+i-l,n),l!==0&&t.arc(r+i-l,n+l,l,-Math.PI/2,0),t.lineTo(r+i,n+a-u),u!==0&&t.arc(r+i-u,n+a-u,u,0,Math.PI/2),t.lineTo(r+c,n+a),c!==0&&t.arc(r+c,n+a-c,c,Math.PI/2,Math.PI),t.lineTo(r,n+s),s!==0&&t.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var Dg=Math.round;function xY(t,e,r){if(e){var n=e.x1,i=e.x2,a=e.y1,o=e.y2;t.x1=n,t.x2=i,t.y1=a,t.y2=o;var s=r&&r.lineWidth;return s&&(Dg(n*2)===Dg(i*2)&&(t.x1=t.x2=Kd(n,s,!0)),Dg(a*2)===Dg(o*2)&&(t.y1=t.y2=Kd(a,s,!0))),t}}function SY(t,e,r){if(e){var n=e.x,i=e.y,a=e.width,o=e.height;t.x=n,t.y=i,t.width=a,t.height=o;var s=r&&r.lineWidth;return s&&(t.x=Kd(n,s,!0),t.y=Kd(i,s,!0),t.width=Math.max(Kd(n+a,s,!1)-t.x,a===0?0:1),t.height=Math.max(Kd(i+o,s,!1)-t.y,o===0?0:1)),t}}function Kd(t,e,r){if(!e)return t;var n=Dg(t*2);return(n+Dg(e))%2===0?n/2:(n+(r?1:-1))/2}var wfe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),Tfe={},Mr=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new wfe},e.prototype.buildPath=function(r,n){var i,a,o,s;if(this.subPixelOptimize){var l=SY(Tfe,n,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,a=n.y,o=n.width,s=n.height;n.r?bfe(r,n):r.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(yr);Mr.prototype.type="rect";var eF={fill:"#000"},tF=2,Cfe={style:At({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},OT.style)},Ar=function(t){he(e,t);function e(r){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=eF,n.attr(r),n}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):t.prototype.getLocalTransform.call(this,r)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Mfe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(r){t.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},e.prototype.removeSelfFromZr=function(r){t.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new sr(0,0,0,0),n=this._children,i=[],a=null,o=0;o<n.length;o++){var s=n[o],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),a=a||r.clone(),a.union(r)):(a=a||l.clone(),a.union(l))}this._rect=a||r}return this._rect},e.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||eF},e.prototype.setTextContent=function(r){},e.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,a=r.rich||i&&{};return Ae(r,n),i&&a?(this._mergeRich(a,i),r.rich=a):a&&(r.rich=a),r},e.prototype._mergeRich=function(r,n){for(var i=Er(n),a=0;a<i.length;a++){var o=i[a];r[o]=r[o]||{},Ae(r[o],n[o])}},e.prototype.getAnimationStyleProps=function(){return Cfe},e.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},e.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||yh,i=r.padding,a=lF(r),o=Yce(a,r),s=rA(r),l=!!r.backgroundColor,u=o.outerHeight,c=o.outerWidth,f=o.contentWidth,h=o.lines,d=o.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",x=r.verticalAlign||p.verticalAlign||"top",S=v,b=Cg(g,o.contentHeight,x);if(s||i){var T=l1(v,c,m),w=Cg(g,u,x);s&&this._renderBackground(r,r,T,w,c,u)}b+=d/2,i&&(S=sF(v,m,i),x==="top"?b+=i[0]:x==="bottom"&&(b-=i[2]));for(var E=0,M=!1,A=oF("fill"in r?r.fill:(M=!0,p.fill)),R=aF("stroke"in r?r.stroke:!l&&(!p.autoStroke||M)?(E=tF,p.stroke):null),L=r.textShadowBlur>0,I=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),N=o.calculatedLineHeight,k=0;k<h.length;k++){var z=this._getOrCreateChild(am),B=z.createStyle();z.useStyle(B),B.text=h[k],B.x=S,B.y=b,m&&(B.textAlign=m),B.textBaseline="middle",B.opacity=r.opacity,B.strokeFirst=!0,L&&(B.shadowBlur=r.textShadowBlur||0,B.shadowColor=r.textShadowColor||"transparent",B.shadowOffsetX=r.textShadowOffsetX||0,B.shadowOffsetY=r.textShadowOffsetY||0),B.stroke=R,B.fill=A,R&&(B.lineWidth=r.lineWidth||E,B.lineDash=r.lineDash,B.lineDashOffset=r.lineDashOffset||0),B.font=n,nF(B,r),b+=d,I&&z.setBoundingRect(new sr(l1(B.x,r.width,B.textAlign),Cg(B.y,N,B.textBaseline),f,N))}},e.prototype._updateRichTexts=function(){var r=this.style,n=lF(r),i=Jce(n,r),a=i.width,o=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=l1(u,o,h),v=Cg(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var x=g+a;rA(r)&&this._renderBackground(r,r,p,v,o,s);for(var S=!!r.backgroundColor,b=0;b<i.lines.length;b++){for(var T=i.lines[b],w=T.tokens,E=w.length,M=T.lineHeight,A=T.width,R=0,L=g,I=x,N=E-1,k=void 0;R<E&&(k=w[R],!k.align||k.align==="left");)this._placeToken(k,r,M,m,L,"left",S),A-=k.width,L+=k.width,R++;for(;N>=0&&(k=w[N],k.align==="right");)this._placeToken(k,r,M,m,I,"right",S),A-=k.width,I-=k.width,N--;for(L+=(a-(L-g)-(x-I)-A)/2;R<=N;)k=w[R],this._placeToken(k,r,M,m,L+k.width/2,"center",S),L+=k.width,R++;m+=M}},e.prototype._placeToken=function(r,n,i,a,o,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=a+i/2;c==="top"?f=a+r.height/2:c==="bottom"&&(f=a+i-r.height/2);var h=!r.isLineHolder&&rA(u);h&&this._renderBackground(u,n,s==="right"?o-r.width:s==="center"?o-r.width/2:o,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(o=sF(o,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(am),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,x=!1,S=0,b=oF("fill"in u?u.fill:"fill"in n?n.fill:(x=!0,m.fill)),T=aF("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||x)?(S=tF,m.stroke):null),w=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=o,g.y=f,w&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||yh,g.opacity=Eu(u.opacity,n.opacity,1),nF(g,u),T&&(g.lineWidth=Eu(u.lineWidth,n.lineWidth,S),g.lineDash=Jt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),b&&(g.fill=b);var E=r.contentWidth,M=r.contentHeight;v.setBoundingRect(new sr(l1(g.x,E,g.textAlign),Cg(g.y,M,g.textBaseline),E,M))},e.prototype._renderBackground=function(r,n,i,a,o,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Mr),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=a,m.width=o,m.height=s,m.r=d,v.dirtyShape()}if(h){var x=v.style;x.fill=l||null,x.fillOpacity=Jt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(aa),g.onload=function(){p.dirtyStyle()};var S=g.style;S.image=l.image,S.x=i,S.y=a,S.width=o,S.height=s}if(u&&c){var x=v.style;x.lineWidth=u,x.stroke=c,x.strokeOpacity=Jt(r.strokeOpacity,1),x.lineDash=r.borderDash,x.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(x.strokeFirst=!0,x.lineWidth*=2)}var b=(v||g).style;b.shadowBlur=r.shadowBlur||0,b.shadowColor=r.shadowColor||"transparent",b.shadowOffsetX=r.shadowOffsetX||0,b.shadowOffsetY=r.shadowOffsetY||0,b.opacity=Eu(r.opacity,n.opacity,1)},e.makeFont=function(r){var n="";return wY(r)&&(n=[r.fontStyle,r.fontWeight,bY(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Il(n)||r.textFont||r.font},e}(nl),Efe={left:!0,right:1,center:1},Afe={top:1,bottom:1,middle:1},rF=["fontStyle","fontWeight","fontSize","fontFamily"];function bY(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?ZP+"px":t+"px"}function nF(t,e){for(var r=0;r<rF.length;r++){var n=rF[r],i=e[n];i!=null&&(t[n]=i)}}function wY(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function Mfe(t){return iF(t),G(t.rich,iF),t}function iF(t){if(t){t.font=Ar.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||Efe[e]?e:"left";var r=t.verticalAlign;r==="center"&&(r="middle"),t.verticalAlign=r==null||Afe[r]?r:"top";var n=t.padding;n&&(t.padding=iL(t.padding))}}function aF(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function oF(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function sF(t,e,r){return e==="right"?t-r[1]:e==="center"?t+r[3]/2-r[1]/2:t+r[3]}function lF(t){var e=t.text;return e!=null&&(e+=""),e}function rA(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var Ht=kr(),S6=function(t,e,r,n){if(n){var i=Ht(n);i.dataIndex=r,i.dataType=e,i.seriesIndex=t,i.ssrType="chart",n.type==="group"&&n.traverse(function(a){var o=Ht(a);o.seriesIndex=t,o.dataIndex=r,o.dataType=e,o.ssrType="chart"})}},uF=1,cF={},TY=kr(),mL=kr(),yL=0,f2=1,FT=2,bo=["emphasis","blur","select"],o_=["normal","emphasis","blur","select"],Xm=10,Rfe=9,fp="highlight",p3="downplay",D1="select",v3="unselect",I1="toggleSelect";function Rv(t){return t!=null&&t!=="none"}function BT(t,e,r){t.onHoverStateChange&&(t.hoverState||0)!==r&&t.onHoverStateChange(e),t.hoverState=r}function CY(t){BT(t,"emphasis",FT)}function EY(t){t.hoverState===FT&&BT(t,"normal",yL)}function _L(t){BT(t,"blur",f2)}function AY(t){t.hoverState===f2&&BT(t,"normal",yL)}function Pfe(t){t.selected=!0}function Lfe(t){t.selected=!1}function fF(t,e,r){e(t,r)}function jc(t,e,r){fF(t,e,r),t.isGroup&&t.traverse(function(n){fF(n,e,r)})}function nw(t,e){switch(e){case"emphasis":t.hoverState=FT;break;case"normal":t.hoverState=yL;break;case"blur":t.hoverState=f2;break;case"select":t.selected=!0}}function Dfe(t,e,r,n){for(var i=t.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l==null?n&&n[s]:l}for(var o=0;o<t.animators.length;o++){var u=t.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(a,e)}return a}function Ife(t,e,r,n){var i=r&&hr(r,"select")>=0,a=!1;if(t instanceof yr){var o=TY(t),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(Rv(s)||Rv(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(a=!0,n=Ae({},n),u=Ae({},u),u.fill=s):!Rv(u.fill)&&Rv(s)?(a=!0,n=Ae({},n),u=Ae({},u),u.fill=a6(s)):!Rv(u.stroke)&&Rv(l)&&(a||(n=Ae({},n),u=Ae({},u)),u.stroke=a6(l)),n.style=u}}if(n&&n.z2==null){a||(n=Ae({},n));var c=t.z2EmphasisLift;n.z2=t.z2+(c!=null?c:Xm)}return n}function Nfe(t,e,r){if(r&&r.z2==null){r=Ae({},r);var n=t.z2SelectLift;r.z2=t.z2+(n!=null?n:Rfe)}return r}function Ofe(t,e,r){var n=hr(t.currentStates,e)>=0,i=t.style.opacity,a=n?null:Dfe(t,["opacity"],e,{opacity:1});r=r||{};var o=r.style||{};return o.opacity==null&&(r=Ae({},r),o=Ae({opacity:n?i:a.opacity*.1},o),r.style=o),r}function nA(t,e){var r=this.states[t];if(this.style){if(t==="emphasis")return Ife(this,t,e,r);if(t==="blur")return Ofe(this,t,r);if(t==="select")return Nfe(this,t,r)}return r}function Cp(t){t.stateProxy=nA;var e=t.getTextContent(),r=t.getTextGuideLine();e&&(e.stateProxy=nA),r&&(r.stateProxy=nA)}function hF(t,e){!LY(t,e)&&!t.__highByOuter&&jc(t,CY)}function dF(t,e){!LY(t,e)&&!t.__highByOuter&&jc(t,EY)}function kc(t,e){t.__highByOuter|=1<<(e||0),jc(t,CY)}function Fc(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&jc(t,EY)}function MY(t){jc(t,_L)}function xL(t){jc(t,AY)}function RY(t){jc(t,Pfe)}function PY(t){jc(t,Lfe)}function LY(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function DY(t){var e=t.getModel(),r=[],n=[];e.eachComponent(function(i,a){var o=mL(a),s=i==="series",l=s?t.getViewOfSeriesModel(a):t.getViewOfComponentModel(a);!s&&n.push(l),o.isBlured&&(l.group.traverse(function(u){AY(u)}),s&&r.push(a)),o.isBlured=!1}),G(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,e)})}function b6(t,e,r,n){var i=n.getModel();r=r||"coordinateSystem";function a(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&xL(h)}}if(t!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(t),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=o===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||e==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){g.__highByOuter&&c&&e==="self"||_L(g)}),Ya(e))a(u.getData(),e);else if(Nt(e))for(var p=Er(e),v=0;v<p.length;v++)a(u.getData(p[v]),e[p[v]]);l.push(u),mL(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function w6(t,e,r){if(!(t==null||e==null)){var n=r.getModel().getComponent(t,e);if(n){mL(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(a){_L(a)})}}}function kfe(t,e,r){var n=t.seriesIndex,i=t.getData(e.dataType);if(i){var a=wp(i,e);a=(De(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var u=Ht(o);b6(n,u.focus,u.blurScope,r)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&b6(n,c,f,r)}}}function SL(t,e,r,n){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||r==null)return i;var a=n.getModel().getComponent(t,e);if(!a)return i;var o=n.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(Ht(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function Ffe(t,e,r){var n=Ht(t),i=SL(n.componentMainType,n.componentIndex,n.componentHighDownName,r),a=i.dispatchers,o=i.focusSelf;a?(o&&w6(n.componentMainType,n.componentIndex,r),G(a,function(s){return hF(s,e)})):(b6(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&w6(n.componentMainType,n.componentIndex,r),hF(t,e))}function Bfe(t,e,r){DY(r);var n=Ht(t),i=SL(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?G(i,function(a){return dF(a,e)}):dF(t,e)}function zfe(t,e,r){if(C6(e)){var n=e.dataType,i=t.getData(n),a=wp(i,e);De(a)||(a=[a]),t[e.type===I1?"toggleSelect":e.type===D1?"select":"unselect"](a,n)}}function pF(t){var e=t.getAllData();G(e,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(a,o){t.isSelected(o,i)?RY(a):PY(a)})})}function Ufe(t){var e=[];return t.eachSeries(function(r){var n=r.getAllData();G(n,function(i){i.data;var a=i.type,o=r.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:r.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function hp(t,e,r){Yd(t,!0),jc(t,Cp),T6(t,e,r)}function Vfe(t){Yd(t,!1)}function ti(t,e,r,n){n?Vfe(t):hp(t,e,r)}function T6(t,e,r){var n=Ht(t);e!=null?(n.focus=e,n.blurScope=r):n.focus&&(n.focus=null)}var vF=["emphasis","blur","select"],Hfe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Oa(t,e,r,n){r=r||"itemStyle";for(var i=0;i<vF.length;i++){var a=vF[i],o=e.getModel([a,r]),s=t.ensureState(a);s.style=n?n(o):o[Hfe[r]]()}}function Yd(t,e){var r=e===!1,n=t;t.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function s_(t){return!!(t&&t.__highDownDispatcher)}function Gfe(t,e,r){var n=Ht(t);n.componentMainType=e.mainType,n.componentIndex=e.componentIndex,n.componentHighDownName=r}function Wfe(t){var e=cF[t];return e==null&&uF<=32&&(e=cF[t]=uF++),e}function C6(t){var e=t.type;return e===D1||e===v3||e===I1}function gF(t){var e=t.type;return e===fp||e===p3}function $fe(t){var e=TY(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var r=t.states.select||{};e.selectFill=r.style&&r.style.fill||null,e.selectStroke=r.style&&r.style.stroke||null}var Pv=Nu.CMD,jfe=[[],[],[]],mF=Math.sqrt,Xfe=Math.atan2;function IY(t,e){if(e){var r=t.data,n=t.len(),i,a,o,s,l,u,c=Pv.M,f=Pv.C,h=Pv.L,d=Pv.R,p=Pv.A,v=Pv.Q;for(o=0,s=0;o<n;){switch(i=r[o++],s=o,a=0,i){case c:a=1;break;case h:a=1;break;case f:a=3;break;case v:a=2;break;case p:var g=e[4],m=e[5],x=mF(e[0]*e[0]+e[1]*e[1]),S=mF(e[2]*e[2]+e[3]*e[3]),b=Xfe(-e[1]/S,e[0]/x);r[o]*=x,r[o++]+=g,r[o]*=S,r[o++]+=m,r[o++]*=x,r[o++]*=S,r[o++]+=b,r[o++]+=b,o+=2,s=o;break;case d:u[0]=r[o++],u[1]=r[o++],qi(u,u,e),r[s++]=u[0],r[s++]=u[1],u[0]+=r[o++],u[1]+=r[o++],qi(u,u,e),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<a;l++){var T=jfe[l];T[0]=r[o++],T[1]=r[o++],qi(T,T,e),r[s++]=T[0],r[s++]=T[1]}}t.increaseVersion()}}var iA=Math.sqrt,oS=Math.sin,sS=Math.cos,dy=Math.PI;function yF(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function E6(t,e){return(t[0]*e[0]+t[1]*e[1])/(yF(t)*yF(e))}function _F(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E6(t,e))}function xF(t,e,r,n,i,a,o,s,l,u,c){var f=l*(dy/180),h=sS(f)*(t-r)/2+oS(f)*(e-n)/2,d=-1*oS(f)*(t-r)/2+sS(f)*(e-n)/2,p=h*h/(o*o)+d*d/(s*s);p>1&&(o*=iA(p),s*=iA(p));var v=(i===a?-1:1)*iA((o*o*(s*s)-o*o*(d*d)-s*s*(h*h))/(o*o*(d*d)+s*s*(h*h)))||0,g=v*o*d/s,m=v*-s*h/o,x=(t+r)/2+sS(f)*g-oS(f)*m,S=(e+n)/2+oS(f)*g+sS(f)*m,b=_F([1,0],[(h-g)/o,(d-m)/s]),T=[(h-g)/o,(d-m)/s],w=[(-1*h-g)/o,(-1*d-m)/s],E=_F(T,w);if(E6(T,w)<=-1&&(E=dy),E6(T,w)>=1&&(E=0),E<0){var M=Math.round(E/dy*1e6)/1e6;E=dy*2+M%2*dy}c.addData(u,x,S,o,s,b,E,f,a)}var Kfe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Yfe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function qfe(t){var e=new Nu;if(!t)return e;var r=0,n=0,i=r,a=n,o,s=Nu.CMD,l=t.match(Kfe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(Yfe)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,x=void 0,S=void 0,b=void 0,T=void 0,w=void 0,E=void 0,M=r,A=n,R=void 0,L=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,e.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,e.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,e.addData(h,r,n),i=r,a=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,e.addData(h,r,n),i=r,a=n,f="L";break;case"h":r+=d[g++],h=s.L,e.addData(h,r,n);break;case"H":r=d[g++],h=s.L,e.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,e.addData(h,r,n);break;case"V":n=d[g++],h=s.L,e.addData(h,r,n);break;case"C":h=s.C,e.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,e.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,x=n,R=e.len(),L=e.data,o===s.C&&(m+=r-L[R-4],x+=n-L[R-3]),h=s.C,M=d[g++],A=d[g++],r=d[g++],n=d[g++],e.addData(h,m,x,M,A,r,n);break;case"s":m=r,x=n,R=e.len(),L=e.data,o===s.C&&(m+=r-L[R-4],x+=n-L[R-3]),h=s.C,M=r+d[g++],A=n+d[g++],r+=d[g++],n+=d[g++],e.addData(h,m,x,M,A,r,n);break;case"Q":M=d[g++],A=d[g++],r=d[g++],n=d[g++],h=s.Q,e.addData(h,M,A,r,n);break;case"q":M=d[g++]+r,A=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,e.addData(h,M,A,r,n);break;case"T":m=r,x=n,R=e.len(),L=e.data,o===s.Q&&(m+=r-L[R-4],x+=n-L[R-3]),r=d[g++],n=d[g++],h=s.Q,e.addData(h,m,x,r,n);break;case"t":m=r,x=n,R=e.len(),L=e.data,o===s.Q&&(m+=r-L[R-4],x+=n-L[R-3]),r+=d[g++],n+=d[g++],h=s.Q,e.addData(h,m,x,r,n);break;case"A":S=d[g++],b=d[g++],T=d[g++],w=d[g++],E=d[g++],M=r,A=n,r=d[g++],n=d[g++],h=s.A,xF(M,A,r,n,w,E,S,b,T,h,e);break;case"a":S=d[g++],b=d[g++],T=d[g++],w=d[g++],E=d[g++],M=r,A=n,r+=d[g++],n+=d[g++],h=s.A,xF(M,A,r,n,w,E,S,b,T,h,e);break}}(f==="z"||f==="Z")&&(h=s.Z,e.addData(h),r=i,n=a),o=h}return e.toStatic(),e}var NY=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(r){},e}(yr);function OY(t){return t.setData!=null}function kY(t,e){var r=qfe(t),n=Ae({},e);return n.buildPath=function(i){if(OY(i)){i.setData(r.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;r.rebuildPath(a,1)}},n.applyTransform=function(i){IY(r,i),this.dirtyShape()},n}function FY(t,e){return new NY(kY(t,e))}function Zfe(t,e){var r=kY(t,e),n=function(i){he(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return a}(NY);return n}function Jfe(t,e){for(var r=[],n=t.length,i=0;i<n;i++){var a=t[i];r.push(a.getUpdatedPathProxy(!0))}var o=new yr(e);return o.createPathProxy(),o.buildPath=function(s){if(OY(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function bL(t,e){e=e||{};var r=new yr;return t.shape&&r.setShape(t.shape),r.setStyle(t.style),e.bakeTransform?IY(r.path,t.getComputedTransform()):e.toLocal?r.setLocalTransform(t.getComputedTransform()):r.copyTransform(t),r.buildPath=t.buildPath,r.applyTransform=r.applyTransform,r.z=t.z,r.z2=t.z2,r.zlevel=t.zlevel,r}var Qfe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Xc=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new Qfe},e.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},e}(yr);Xc.prototype.type="circle";var ehe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),zT=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new ehe},e.prototype.buildPath=function(r,n){var i=.5522848,a=n.cx,o=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(a-s,o),r.bezierCurveTo(a-s,o-c,a-u,o-l,a,o-l),r.bezierCurveTo(a+u,o-l,a+s,o-c,a+s,o),r.bezierCurveTo(a+s,o+c,a+u,o+l,a,o+l),r.bezierCurveTo(a-u,o+l,a-s,o+c,a-s,o),r.closePath()},e}(yr);zT.prototype.type="ellipse";var BY=Math.PI,aA=BY*2,od=Math.sin,Lv=Math.cos,the=Math.acos,Ha=Math.atan2,SF=Math.abs,N1=Math.sqrt,u1=Math.max,su=Math.min,wl=1e-4;function rhe(t,e,r,n,i,a,o,s){var l=r-t,u=n-e,c=o-i,f=s-a,h=f*l-c*u;if(!(h*h<wl))return h=(c*(e-a)-f*(t-i))/h,[t+h*l,e+h*u]}function lS(t,e,r,n,i,a,o){var s=t-r,l=e-n,u=(o?a:-a)/N1(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,x=p-h,S=v-d,b=x*x+S*S,T=i-a,w=h*v-p*d,E=(S<0?-1:1)*N1(u1(0,T*T*b-w*w)),M=(w*S-x*E)/b,A=(-w*x-S*E)/b,R=(w*S+x*E)/b,L=(-w*x+S*E)/b,I=M-g,N=A-m,k=R-g,z=L-m;return I*I+N*N>k*k+z*z&&(M=R,A=L),{cx:M,cy:A,x0:-c,y0:-f,x1:M*(i/T-1),y1:A*(i/T-1)}}function nhe(t){var e;if(De(t)){var r=t.length;if(!r)return t;r===1?e=[t[0],t[0],0,0]:r===2?e=[t[0],t[0],t[1],t[1]]:r===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function ihe(t,e){var r,n=u1(e.r,0),i=u1(e.r0||0,0),a=n>0,o=i>0;if(!(!a&&!o)){if(a||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,f=e.cy,h=!!e.clockwise,d=SF(u-l),p=d>aA&&d%aA;if(p>wl&&(d=p),!(n>wl))t.moveTo(c,f);else if(d>aA-wl)t.moveTo(c+n*Lv(l),f+n*od(l)),t.arc(c,f,n,l,u,!h),i>wl&&(t.moveTo(c+i*Lv(u),f+i*od(u)),t.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,x=void 0,S=void 0,b=void 0,T=void 0,w=void 0,E=void 0,M=void 0,A=void 0,R=void 0,L=void 0,I=void 0,N=void 0,k=void 0,z=n*Lv(l),B=n*od(l),V=i*Lv(u),F=i*od(u),$=d>wl;if($){var W=e.cornerRadius;W&&(r=nhe(W),v=r[0],g=r[1],m=r[2],x=r[3]);var H=SF(n-i)/2;if(S=su(H,m),b=su(H,x),T=su(H,v),w=su(H,g),A=E=u1(S,b),R=M=u1(T,w),(E>wl||M>wl)&&(L=n*Lv(u),I=n*od(u),N=i*Lv(l),k=i*od(l),d<BY)){var X=rhe(z,B,N,k,L,I,V,F);if(X){var te=z-X[0],Y=B-X[1],ee=L-X[0],se=I-X[1],ne=1/od(the((te*ee+Y*se)/(N1(te*te+Y*Y)*N1(ee*ee+se*se)))/2),le=N1(X[0]*X[0]+X[1]*X[1]);A=su(E,(n-le)/(ne+1)),R=su(M,(i-le)/(ne-1))}}}if(!$)t.moveTo(c+z,f+B);else if(A>wl){var pe=su(m,A),Se=su(x,A),_e=lS(N,k,z,B,n,pe,h),Le=lS(L,I,V,F,n,Se,h);t.moveTo(c+_e.cx+_e.x0,f+_e.cy+_e.y0),A<E&&pe===Se?t.arc(c+_e.cx,f+_e.cy,A,Ha(_e.y0,_e.x0),Ha(Le.y0,Le.x0),!h):(pe>0&&t.arc(c+_e.cx,f+_e.cy,pe,Ha(_e.y0,_e.x0),Ha(_e.y1,_e.x1),!h),t.arc(c,f,n,Ha(_e.cy+_e.y1,_e.cx+_e.x1),Ha(Le.cy+Le.y1,Le.cx+Le.x1),!h),Se>0&&t.arc(c+Le.cx,f+Le.cy,Se,Ha(Le.y1,Le.x1),Ha(Le.y0,Le.x0),!h))}else t.moveTo(c+z,f+B),t.arc(c,f,n,l,u,!h);if(!(i>wl)||!$)t.lineTo(c+V,f+F);else if(R>wl){var pe=su(v,R),Se=su(g,R),_e=lS(V,F,L,I,i,-Se,h),Le=lS(z,B,N,k,i,-pe,h);t.lineTo(c+_e.cx+_e.x0,f+_e.cy+_e.y0),R<M&&pe===Se?t.arc(c+_e.cx,f+_e.cy,R,Ha(_e.y0,_e.x0),Ha(Le.y0,Le.x0),!h):(Se>0&&t.arc(c+_e.cx,f+_e.cy,Se,Ha(_e.y0,_e.x0),Ha(_e.y1,_e.x1),!h),t.arc(c,f,i,Ha(_e.cy+_e.y1,_e.cx+_e.x1),Ha(Le.cy+Le.y1,Le.cx+Le.x1),h),pe>0&&t.arc(c+Le.cx,f+Le.cy,pe,Ha(Le.y1,Le.x1),Ha(Le.y0,Le.x0),!h))}else t.lineTo(c+V,f+F),t.arc(c,f,i,u,l,h)}t.closePath()}}}var ahe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),wo=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new ahe},e.prototype.buildPath=function(r,n){ihe(r,n)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(yr);wo.prototype.type="sector";var ohe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),h2=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new ohe},e.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,o=Math.PI*2;r.moveTo(i+n.r,a),r.arc(i,a,n.r,0,o,!1),r.moveTo(i+n.r0,a),r.arc(i,a,n.r0,0,o,!0)},e}(yr);h2.prototype.type="ring";function she(t,e,r,n){var i=[],a=[],o=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=t.length;h<d;h++)Kf(c,c,t[h]),Yf(f,f,t[h]);Kf(c,c,n[0]),Yf(f,f,n[1])}for(var h=0,d=t.length;h<d;h++){var p=t[h];if(r)l=t[h?h-1:d-1],u=t[(h+1)%d];else if(h===0||h===d-1){i.push(Cc(t[h]));continue}else l=t[h-1],u=t[h+1];Xd(a,u,l),s3(a,a,e);var v=Z9(p,l),g=Z9(p,u),m=v+g;m!==0&&(v/=m,g/=m),s3(o,a,-v),s3(s,a,g);var x=vk([],p,o),S=vk([],p,s);n&&(Yf(x,x,c),Kf(x,x,f),Yf(S,S,c),Kf(S,S,f)),i.push(x),i.push(S)}return r&&i.push(i.shift()),i}function zY(t,e,r){var n=e.smooth,i=e.points;if(i&&i.length>=2){if(n){var a=she(i,n,r,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(r?o:o-1);s++){var l=a[s*2],u=a[s*2+1],c=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)t.lineTo(i[s][0],i[s][1])}r&&t.closePath()}}var lhe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),To=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new lhe},e.prototype.buildPath=function(r,n){zY(r,n,!0)},e}(yr);To.prototype.type="polygon";var uhe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Ro=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new uhe},e.prototype.buildPath=function(r,n){zY(r,n,!1)},e}(yr);Ro.prototype.type="polyline";var che={},fhe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),ji=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new fhe},e.prototype.buildPath=function(r,n){var i,a,o,s;if(this.subPixelOptimize){var l=xY(che,n,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=n.x1,a=n.y1,o=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,a),u<1&&(o=i*(1-u)+o*u,s=a*(1-u)+s*u),r.lineTo(o,s))},e.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},e}(yr);ji.prototype.type="line";var Bo=[],hhe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function bF(t,e,r){var n=t.cpx2,i=t.cpy2;return n!=null||i!=null?[(r?Ak:Wi)(t.x1,t.cpx1,t.cpx2,t.x2,e),(r?Ak:Wi)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(r?r6:pa)(t.x1,t.cpx1,t.x2,e),(r?r6:pa)(t.y1,t.cpy1,t.y2,e)]}var d2=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new hhe},e.prototype.buildPath=function(r,n){var i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,a),c==null||f==null?(h<1&&(t_(i,l,o,h,Bo),l=Bo[1],o=Bo[2],t_(a,u,s,h,Bo),u=Bo[1],s=Bo[2]),r.quadraticCurveTo(l,u,o,s)):(h<1&&(xh(i,l,c,o,h,Bo),l=Bo[1],c=Bo[2],o=Bo[3],xh(a,u,f,s,h,Bo),u=Bo[1],f=Bo[2],s=Bo[3]),r.bezierCurveTo(l,u,c,f,o,s)))},e.prototype.pointAt=function(r){return bF(this.shape,r,!1)},e.prototype.tangentAt=function(r){var n=bF(this.shape,r,!0);return Wm(n,n)},e}(yr);d2.prototype.type="bezier-curve";var dhe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),UT=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new dhe},e.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,o=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*o+i,f*o+a),r.arc(i,a,o,s,l,!u)},e}(yr);UT.prototype.type="arc";var wL=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="compound",r}return e.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(r,n){for(var i=n.paths||[],a=0;a<i.length;a++)i[a].buildPath(r,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),yr.prototype.getBoundingRect.call(this)},e}(yr),UY=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,r){this.colorStops.push({offset:e,color:r})},t}(),Km=function(t){he(e,t);function e(r,n,i,a,o,s){var l=t.call(this,o)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=a==null?0:a,l.type="linear",l.global=s||!1,l}return e}(UY),VY=function(t){he(e,t);function e(r,n,i,a,o){var s=t.call(this,a)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=o||!1,s}return e}(UY),sd=[0,0],ld=[0,0],uS=new or,cS=new or,iw=function(){function t(e,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new or;for(var n=0;n<2;n++)this._axes[n]=new or;e&&this.fromBoundingRect(e,r)}return t.prototype.fromBoundingRect=function(e,r){var n=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(n[0].set(a,o),n[1].set(s,o),n[2].set(s,l),n[3].set(a,l),r)for(var u=0;u<4;u++)n[u].transform(r);or.sub(i[0],n[1],n[0]),or.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},t.prototype.intersect=function(e,r){var n=!0,i=!r;return uS.set(1/0,1/0),cS.set(0,0),!this._intersectCheckOneSide(this,e,uS,cS,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(e,this,uS,cS,i,-1)&&(n=!1,i)||i||or.copy(r,n?uS:cS),n},t.prototype._intersectCheckOneSide=function(e,r,n,i,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,sd),this._getProjMinMaxOnAxis(l,r._corners,ld),sd[1]<ld[0]||sd[0]>ld[1]){if(s=!1,a)return s;var c=Math.abs(ld[0]-sd[1]),f=Math.abs(sd[0]-ld[1]);Math.min(c,f)>i.len()&&(c<f?or.scale(i,u,-c*o):or.scale(i,u,f*o))}else if(n){var c=Math.abs(ld[0]-sd[1]),f=Math.abs(sd[0]-ld[1]);Math.min(c,f)<n.len()&&(c<f?or.scale(n,u,c*o):or.scale(n,u,-f*o))}}return s},t.prototype._getProjMinMaxOnAxis=function(e,r,n){for(var i=this._axes[e],a=this._origin,o=r[0].dot(i)+a[e],s=o,l=o,u=1;u<r.length;u++){var c=r[u].dot(i)+a[e];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},t}(),phe=[],vhe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return e.prototype.traverse=function(r,n){r.call(n,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},e.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},e.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new sr(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(phe)),r.union(a)}this._rect=r}return this._rect},e.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(r,n))return!0}return!1},e}(nl),HY=kr();function Ym(t,e,r,n,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=t==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=Jt(n.duration,200),c=Jt(n.easing,"cubicOut"),f=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(f=a.delay)),Lt(f)&&(f=f(r,i)),Lt(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function TL(t,e,r,n,i,a,o){var s=!1,l;Lt(i)?(o=a,a=i,i=null):Nt(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=t==="leave";u||e.stopAnimation("leave");var c=Ym(t,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:a,force:!!a||!!o,setToFinal:!u,scope:t,during:o};s?e.animateFrom(r,p):e.animateTo(r,p)}else e.stopAnimation(),!s&&e.attr(r),o&&o(1),a&&a()}function Xr(t,e,r,n,i,a){TL("update",t,e,r,n,i,a)}function Fn(t,e,r,n,i,a){TL("enter",t,e,r,n,i,a)}function Gg(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var r=t.animators[e];if(r.scope==="leave")return!0}return!1}function Sh(t,e,r,n,i,a){Gg(t)||TL("leave",t,e,r,n,i,a)}function wF(t,e,r,n){t.removeTextContent(),t.removeTextGuideLine(),Sh(t,{style:{opacity:0}},e,r,n)}function l_(t,e,r){function n(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||wF(i,e,r,n)}):wF(t,e,r,n)}function $l(t){HY(t).oldStyle=t.style}function ghe(t){return HY(t).oldStyle}var aw=Math.max,ow=Math.min,A6={};function mhe(t){return yr.extend(t)}var yhe=Zfe;function _he(t,e){return yhe(t,e)}function Yl(t,e){A6[t]=e}function CL(t){if(A6.hasOwnProperty(t))return A6[t]}function VT(t,e,r,n){var i=FY(t,e);return r&&(n==="center"&&(r=WY(r,i.getBoundingRect())),$Y(i,r)),i}function GY(t,e,r){var n=new aa({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(r==="center"){var a={width:i.width,height:i.height};n.setStyle(WY(e,a))}}});return n}function WY(t,e){var r=e.width/e.height,n=t.height*r,i;n<=t.width?i=t.height:(n=t.width,i=n/r);var a=t.x+t.width/2,o=t.y+t.height/2;return{x:a-n/2,y:o-i/2,width:n,height:i}}var Xs=Jfe;function $Y(t,e){if(t.applyTransform){var r=t.getBoundingRect(),n=r.calculateTransform(e);t.applyTransform(n)}}function om(t,e){return xY(t,t,{lineWidth:e}),t}function xhe(t){return SY(t.shape,t.shape,t.style),t}var g3=Kd;function dp(t,e){for(var r=MT([]);t&&t!==e;)Ec(r,t.getLocalTransform(),r),t=t.parent;return r}function Fl(t,e,r){return e&&!Ya(e)&&(e=_c.getLocalTransform(e)),r&&(e=Up([],e)),qi([],t,e)}function HT(t,e,r){var n=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[t==="left"?-n:t==="right"?n:0,t==="top"?-i:t==="bottom"?i:0];return a=Fl(a,e,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function TF(t){return!t.isGroup}function She(t){return t.shape!=null}function p2(t,e,r){if(!t||!e)return;function n(o){var s={};return o.traverse(function(l){TF(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return She(o)&&(s.shape=Ae({},o.shape)),s}var a=n(t);e.traverse(function(o){if(TF(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),Xr(o,l,r,Ht(o).dataIndex)}}})}function jY(t,e){return Oe(t,function(r){var n=r[0];n=aw(n,e.x),n=ow(n,e.x+e.width);var i=r[1];return i=aw(i,e.y),i=ow(i,e.y+e.height),[n,i]})}function bhe(t,e){var r=aw(t.x,e.x),n=ow(t.x+t.width,e.x+e.width),i=aw(t.y,e.y),a=ow(t.y+t.height,e.y+e.height);if(n>=r&&a>=i)return{x:r,y:i,width:n-r,height:a-i}}function v2(t,e,r){var n=Ae({rectHover:!0},e),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),At(i,r),new aa(n)):VT(t.replace("path://",""),n,r,"center")}function c1(t,e,r,n,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(XY(t,e,r,n,s[0],s[1],o[0],o[1]))return!0;o=s}}function XY(t,e,r,n,i,a,o,s){var l=r-t,u=n-e,c=o-i,f=s-a,h=oA(c,f,l,u);if(whe(h))return!1;var d=t-i,p=e-a,v=oA(d,p,l,u)/h;if(v<0||v>1)return!1;var g=oA(d,p,c,f)/h;return!(g<0||g>1)}function oA(t,e,r,n){return t*n-r*e}function whe(t){return t<=1e-6&&t>=-1e-6}function qm(t){var e=t.itemTooltipOption,r=t.componentModel,n=t.itemName,i=ft(e)?{formatter:e}:e,a=r.mainType,o=r.componentIndex,s={componentType:a,name:n,$vars:["name"]};s[a+"Index"]=o;var l=t.formatterParamsExtra;l&&G(Er(l),function(c){_t(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=Ht(t.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:n,option:At({content:n,encodeHTMLContent:!0,formatterParams:s},i)}}function CF(t,e){var r;t.isGroup&&(r=e(t)),r||t.traverse(e)}function Eh(t,e){if(t)if(De(t))for(var r=0;r<t.length;r++)CF(t[r],e);else CF(t,e)}Yl("circle",Xc);Yl("ellipse",zT);Yl("sector",wo);Yl("ring",h2);Yl("polygon",To);Yl("polyline",Ro);Yl("rect",Mr);Yl("line",ji);Yl("bezierCurve",d2);Yl("arc",UT);const Vp=Object.freeze(Object.defineProperty({__proto__:null,Arc:UT,BezierCurve:d2,BoundingRect:sr,Circle:Xc,CompoundPath:wL,Ellipse:zT,Group:Vt,Image:aa,IncrementalDisplayable:vhe,Line:ji,LinearGradient:Km,OrientedBoundingRect:iw,Path:yr,Point:or,Polygon:To,Polyline:Ro,RadialGradient:VY,Rect:Mr,Ring:h2,Sector:wo,Text:Ar,applyTransform:Fl,clipPointsByRect:jY,clipRectByRect:bhe,createIcon:v2,extendPath:_he,extendShape:mhe,getShapeClass:CL,getTransform:dp,groupTransition:p2,initProps:Fn,isElementRemoved:Gg,lineLineIntersect:XY,linePolygonIntersect:c1,makeImage:GY,makePath:VT,mergePath:Xs,registerShape:Yl,removeElement:Sh,removeElementWithFadeOut:l_,resizePath:$Y,setTooltipConfig:qm,subPixelOptimize:g3,subPixelOptimizeLine:om,subPixelOptimizeRect:xhe,transformDirection:HT,traverseElements:Eh,updateProps:Xr},Symbol.toStringTag,{value:"Module"}));var GT={};function KY(t,e){for(var r=0;r<bo.length;r++){var n=bo[r],i=e[n],a=t.ensureState(n);a.style=a.style||{},a.style.text=i}var o=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(o,!0)}function M6(t,e,r){var n=t.labelFetcher,i=t.labelDataIndex,a=t.labelDimIndex,o=e.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Lt(t.defaultText)?t.defaultText(i,t,r):t.defaultText);for(var l={normal:s},u=0;u<bo.length;u++){var c=bo[u],f=e[c];l[c]=Jt(n?n.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,s)}return l}function ka(t,e,r,n){r=r||GT;for(var i=t instanceof Ar,a=!1,o=0;o<o_.length;o++){var s=e[o_[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?t:t.getTextContent();if(a){i||(l||(l=new Ar,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var u=M6(r,e),c=e.normal,f=!!c.getShallow("show"),h=dn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||t.setTextConfig(sw(c,r,!1));for(var o=0;o<bo.length;o++){var d=bo[o],s=e[d];if(s){var p=l.ensureState(d),v=!!Jt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=dn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=t.ensureState(d);g.textConfig=sw(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(Zm(l).setLabelText=function(m){var x=M6(r,e,m);KY(l,x)})}else l&&(l.ignore=!0);t.dirty()}function Qi(t,e){e=e||"label";for(var r={normal:t.getModel(e)},n=0;n<bo.length;n++){var i=bo[n];r[i]=t.getModel([i,e])}return r}function dn(t,e,r,n,i){var a={};return The(a,t,r,n,i),e&&Ae(a,e),a}function sw(t,e,r){e=e||{};var n={},i,a=t.getShallow("rotate"),o=Jt(t.getShallow("distance"),r?null:5),s=t.getShallow("offset");return i=t.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),a!=null&&(a*=Math.PI/180,n.rotation=a),o!=null&&(n.distance=o),n.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",n}function The(t,e,r,n,i){r=r||GT;var a=e.ecModel,o=a&&a.option.textStyle,s=Che(e),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=e.getModel(["rich",u]);RF(l[u]={},c,o,r,n,i,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var h=e.get("minMargin");h!=null&&(t.margin=h),RF(t,e,o,r,n,i,!0,!1)}function Che(t){for(var e;t&&t!==t.ecModel;){var r=(t.option||GT).rich;if(r){e=e||{};for(var n=Er(r),i=0;i<n.length;i++){var a=n[i];e[a]=1}}t=t.parentModel}return e}var EF=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],AF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],MF=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function RF(t,e,r,n,i,a,o,s){r=!i&&r||GT;var l=n&&n.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=Jt(e.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(t.fill=u),c!=null&&(t.stroke=c);var h=Jt(e.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(t.lineWidth=h);var d=Jt(e.getShallow("textBorderType"),r.textBorderType);d!=null&&(t.lineDash=d);var p=Jt(e.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(t.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(t.opacity=f),!i&&!a&&t.fill==null&&n.inheritColor&&(t.fill=n.inheritColor);for(var v=0;v<EF.length;v++){var g=EF[v],m=Jt(e.getShallow(g),r[g]);m!=null&&(t[g]=m)}for(var v=0;v<AF.length;v++){var g=AF[v],m=e.getShallow(g);m!=null&&(t[g]=m)}if(t.verticalAlign==null){var x=e.getShallow("baseline");x!=null&&(t.verticalAlign=x)}if(!o||!n.disableBox){for(var v=0;v<MF.length;v++){var g=MF[v],m=e.getShallow(g);m!=null&&(t[g]=m)}var S=e.getShallow("borderType");S!=null&&(t.borderDash=S),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function EL(t,e){var r=e&&e.getModel("textStyle");return Il([t.fontStyle||r&&r.getShallow("fontStyle")||"",t.fontWeight||r&&r.getShallow("fontWeight")||"",(t.fontSize||r&&r.getShallow("fontSize")||12)+"px",t.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Zm=kr();function YY(t,e,r,n){if(t){var i=Zm(t);i.prevValue=i.value,i.value=r;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=n,i.statesModels=e)}}function qY(t,e,r,n,i){var a=Zm(t);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Jt(a.interpolatedValue,a.prevValue),l=a.value;function u(c){var f=hY(r,a.precision,s,l,c);a.interpolatedValue=c===1?null:f;var h=M6({labelDataIndex:e,labelFetcher:i,defaultText:o?o(f):f+""},a.statesModels,f);KY(t,h)}t.percent=0,(a.prevValue==null?Fn:Xr)(t,{percent:1},n,e,null,u)}var Ehe=["textStyle","color"],sA=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],lA=new Ar,Ahe=function(){function t(){}return t.prototype.getTextColor=function(e){var r=this.ecModel;return this.getShallow("color")||(!e&&r?r.get(Ehe):null)},t.prototype.getFont=function(){return EL({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var r={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<sA.length;n++)r[sA[n]]=this.getShallow(sA[n]);return lA.useStyle(r),lA.update(),lA.getBoundingRect()},t}(),ZY=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Mhe=Tp(ZY),Rhe=function(){function t(){}return t.prototype.getLineStyle=function(e){return Mhe(this,e)},t}(),JY=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Phe=Tp(JY),Lhe=function(){function t(){}return t.prototype.getItemStyle=function(e,r){return Phe(this,e,r)},t}(),Br=function(){function t(e,r,n){this.parentModel=r,this.ecModel=n,this.option=e}return t.prototype.init=function(e,r,n){},t.prototype.mergeOption=function(e,r){xt(this.option,e,!0)},t.prototype.get=function(e,r){return e==null?this.option:this._doGet(this.parsePath(e),!r&&this.parentModel)},t.prototype.getShallow=function(e,r){var n=this.option,i=n==null?n:n[e];if(i==null&&!r){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},t.prototype.getModel=function(e,r){var n=e!=null,i=n?this.parsePath(e):null,a=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(a,r,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(Ft(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!br.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,r){var n=this.option;if(!e)return n;for(var i=0;i<e.length&&!(e[i]&&(n=n&&typeof n=="object"?n[e[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(e),r.parentModel)),n},t}();pL(Br);Uce(Br);mi(Br,Rhe);mi(Br,Lhe);mi(Br,$ce);mi(Br,Ahe);var Dhe=Math.round(Math.random()*10);function Jm(t){return[t||"",Dhe++].join("_")}function Ihe(t){var e={};t.registerSubTypeDefaulter=function(r,n){var i=bu(r);e[i.main]=n},t.determineSubType=function(r,n){var i=n.type;if(!i){var a=bu(r).main;t.hasSubTypes(r)&&e[a]&&(i=e[a](n))}return i}}function Nhe(t,e){t.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=r(o),c=u.graph,f=u.noEntryList,h={};for(G(a,function(x){h[x]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),G(p.successor,v?m:g)}G(h,function(){var x="";throw new Error(x)});function g(x){c[x].entryCount--,c[x].entryCount===0&&f.push(x)}function m(x){h[x]=!0,g(x)}};function r(a){var o={},s=[];return G(a,function(l){var u=n(o,l),c=u.originalDeps=e(l),f=i(c,a);u.entryCount=f.length,u.entryCount===0&&s.push(l),G(f,function(h){hr(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(o,h);hr(d.successor,h)<0&&d.successor.push(l)})}),{graph:o,noEntryList:s}}function n(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return G(a,function(l){hr(o,l)>=0&&s.push(l)}),s}}function Ah(t,e){return xt(xt({},t,!0),e,!0)}const Ohe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},khe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var lw="ZH",AL="EN",Wg=AL,m3={},ML={},QY=br.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Wg).toUpperCase();return t.indexOf(lw)>-1?lw:Wg}():Wg;function eq(t,e){t=t.toUpperCase(),ML[t]=new Br(e),m3[t]=e}function Fhe(t){if(ft(t)){var e=m3[t.toUpperCase()]||{};return t===lw||t===AL?Ft(e):xt(Ft(e),Ft(m3[Wg]),!1)}else return xt(Ft(t),Ft(m3[Wg]),!1)}function R6(t){return ML[t]}function Bhe(){return ML[Wg]}eq(AL,Ohe);eq(lw,khe);var RL=1e3,PL=RL*60,O1=PL*60,Ks=O1*24,PF=Ks*365,f1={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fS="{yyyy}-{MM}-{dd}",LF={year:"{yyyy}",month:"{yyyy}-{MM}",day:fS,hour:fS+" "+f1.hour,minute:fS+" "+f1.minute,second:fS+" "+f1.second,millisecond:f1.none},uA=["year","month","day","hour","minute","second","millisecond"],tq=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function fo(t,e){return t+="","0000".substr(0,e-t.length)+t}function $g(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function zhe(t){return t===$g(t)}function Uhe(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function WT(t,e,r,n){var i=rl(t),a=i[LL(r)](),o=i[jg(r)]()+1,s=Math.floor((o-1)/3)+1,l=i[$T(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[u_(r)](),f=(c-1)%12+1,h=i[jT(r)](),d=i[XT(r)](),p=i[KT(r)](),v=c>=12?"pm":"am",g=v.toUpperCase(),m=n instanceof Br?n:R6(n||QY)||Bhe(),x=m.getModel("time"),S=x.get("month"),b=x.get("monthAbbr"),T=x.get("dayOfWeek"),w=x.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,v+"").replace(/{A}/g,g+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,fo(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,S[o-1]).replace(/{MMM}/g,b[o-1]).replace(/{MM}/g,fo(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,fo(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,T[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,fo(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,fo(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,fo(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,fo(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,fo(p,3)).replace(/{S}/g,p+"")}function Vhe(t,e,r,n,i){var a=null;if(ft(r))a=r;else if(Lt(r))a=r(t.value,e,{level:t.level});else{var o=Ae({},f1);if(t.level>0)for(var s=0;s<uA.length;++s)o[uA[s]]="{primary|"+o[uA[s]]+"}";var l=r?r.inherit===!1?r:At(r,o):o,u=rq(t.value,i);if(l[u])a=l[u];else if(l.inherit){for(var c=tq.indexOf(u),s=c-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(De(a)){var f=t.level==null?0:t.level>=0?t.level:a.length+t.level;f=Math.min(f,a.length-1),a=a[f]}}return WT(new Date(t.value),a,i,n)}function rq(t,e){var r=rl(t),n=r[jg(e)]()+1,i=r[$T(e)](),a=r[u_(e)](),o=r[jT(e)](),s=r[XT(e)](),l=r[KT(e)](),u=l===0,c=u&&s===0,f=c&&o===0,h=f&&a===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function DF(t,e,r){var n=Ur(t)?rl(t):t;switch(e=e||rq(t,r),e){case"year":return n[LL(r)]();case"half-year":return n[jg(r)]()>=6?1:0;case"quarter":return Math.floor((n[jg(r)]()+1)/4);case"month":return n[jg(r)]();case"day":return n[$T(r)]();case"half-day":return n[u_(r)]()/24;case"hour":return n[u_(r)]();case"minute":return n[jT(r)]();case"second":return n[XT(r)]();case"millisecond":return n[KT(r)]()}}function LL(t){return t?"getUTCFullYear":"getFullYear"}function jg(t){return t?"getUTCMonth":"getMonth"}function $T(t){return t?"getUTCDate":"getDate"}function u_(t){return t?"getUTCHours":"getHours"}function jT(t){return t?"getUTCMinutes":"getMinutes"}function XT(t){return t?"getUTCSeconds":"getSeconds"}function KT(t){return t?"getUTCMilliseconds":"getMilliseconds"}function Hhe(t){return t?"setUTCFullYear":"setFullYear"}function nq(t){return t?"setUTCMonth":"setMonth"}function iq(t){return t?"setUTCDate":"setDate"}function aq(t){return t?"setUTCHours":"setHours"}function oq(t){return t?"setUTCMinutes":"setMinutes"}function sq(t){return t?"setUTCSeconds":"setSeconds"}function lq(t){return t?"setUTCMilliseconds":"setMilliseconds"}function uw(t){if(!iY(t))return ft(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function uq(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var Qm=iL;function P6(t,e,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Il(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=e==="time",s=t instanceof Date;if(o||s){var l=o?rl(t):t;if(isNaN(+l)){if(s)return"-"}else return WT(l,n,r)}if(e==="ordinal")return K9(t)?i(t):Ur(t)&&a(t)?t+"":"-";var u=Oc(t);return a(u)?uw(u):K9(t)?i(t):typeof t=="boolean"?t+"":"-"}var IF=["a","b","c","d","e","f","g"],cA=function(t,e){return"{"+t+(e==null?"":e)+"}"};function DL(t,e,r){De(e)||(e=[e]);var n=e.length;if(!n)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=IF[a];t=t.replace(cA(o),cA(o,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=e[s][i[l]];t=t.replace(cA(IF[l],s),r?Oi(u):u)}return t}function Ghe(t,e,r){return G(e,function(n,i){t=t.replace("{"+i+"}",n)}),t}function cq(t,e){var r=ft(t)?{color:t,extraCssText:e}:t||{},n=r.color,i=r.type;e=r.extraCssText;var a=r.renderMode||"html";if(!n)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Oi(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Oi(n)+";"+(e||"")+'"></span>';var o=r.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Whe(t,e,r){(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year")&&(t=`MM-dd
yyyy`);var n=rl(e),i="get",a=n[i+"FullYear"](),o=n[i+"Month"]()+1,s=n[i+"Date"](),l=n[i+"Hours"](),u=n[i+"Minutes"](),c=n[i+"Seconds"](),f=n[i+"Milliseconds"]();return t=t.replace("MM",fo(o,2)).replace("M",o).replace("yyyy",a).replace("yy",fo(a%100+"",2)).replace("dd",fo(s,2)).replace("d",s).replace("hh",fo(l,2)).replace("h",l).replace("mm",fo(u,2)).replace("m",u).replace("ss",fo(c,2)).replace("s",c).replace("SSS",fo(f,3)),t}function Ep(t,e){return e=e||"transparent",ft(t)?t:Nt(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function cw(t,e){if(e==="_blank"||e==="blank"){var r=window.open();r.opener=null,r.location.href=t}else window.open(t,e)}var y3=G,fq=["left","right","top","bottom","width","height"],qd=[["width","left","right"],["height","top","bottom"]];function IL(t,e,r,n,i){var a=0,o=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),f=e.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(t==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=a+v,d>n||l.newline?(a=0,d=v,o+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=o+g,p>i||l.newline?(a+=s+r,o=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),t==="horizontal"?a=d+r:o=p+r)})}var pp=IL;Zt(IL,"vertical");Zt(IL,"horizontal");function $he(t,e,r){var n=e.width,i=e.height,a=Ze(t.left,n),o=Ze(t.top,i),s=Ze(t.right,n),l=Ze(t.bottom,i);return(isNaN(a)||isNaN(parseFloat(t.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(t.right)))&&(s=n),(isNaN(o)||isNaN(parseFloat(t.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(t.bottom)))&&(l=i),r=Qm(r||0),{width:Math.max(s-a-r[1]-r[3],0),height:Math.max(l-o-r[0]-r[2],0)}}function ri(t,e,r){r=Qm(r||0);var n=e.width,i=e.height,a=Ze(t.left,n),o=Ze(t.top,i),s=Ze(t.right,n),l=Ze(t.bottom,i),u=Ze(t.width,n),c=Ze(t.height,i),f=r[2]+r[0],h=r[1]+r[3],d=t.aspect;switch(isNaN(u)&&(u=n-s-h-a),isNaN(c)&&(c=i-l-f-o),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(a)&&(a=n-s-u-h),isNaN(o)&&(o=i-l-c-f),t.left||t.right){case"center":a=n/2-u/2-r[3];break;case"right":a=n-u-h;break}switch(t.top||t.bottom){case"middle":case"center":o=i/2-c/2-r[0];break;case"bottom":o=i-c-f;break}a=a||0,o=o||0,isNaN(u)&&(u=n-h-a-(s||0)),isNaN(c)&&(c=i-f-o-(l||0));var p=new sr(a+r[3],o+r[0],u,c);return p.margin=r,p}function YT(t,e,r,n,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||t,a.x=t.x,a.y=t.y,!o&&!s)return!1;var u;if(l==="raw")u=t.type==="group"?new sr(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=ri(At({width:u.width,height:u.height},e),r,n),h=o?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(a.x=h,a.y=d):(a.x+=h,a.y+=d),a===t&&t.markRedraw(),!0}function jhe(t,e){return t[qd[e][0]]!=null||t[qd[e][1]]!=null&&t[qd[e][2]]!=null}function c_(t){var e=t.layoutMode||t.constructor.layoutMode;return Nt(e)?e:e?{type:e}:null}function bh(t,e,r){var n=r&&r.ignoreSize;!De(n)&&(n=[n,n]);var i=o(qd[0],0),a=o(qd[1],1);u(qd[0],t,i),u(qd[1],t,a);function o(c,f){var h={},d=0,p={},v=0,g=2;if(y3(c,function(S){p[S]=t[S]}),y3(c,function(S){s(e,S)&&(h[S]=p[S]=e[S]),l(h,S)&&d++,l(p,S)&&v++}),n[f])return l(e,c[1])?p[c[2]]=null:l(e,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var x=c[m];if(!s(h,x)&&s(t,x)){h[x]=t[x];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){y3(c,function(d){f[d]=h[d]})}}function e0(t){return hq({},t)}function hq(t,e){return e&&t&&y3(fq,function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}var Xhe=kr(),fr=function(t){he(e,t);function e(r,n,i){var a=t.call(this,r,n,i)||this;return a.uid=Jm("ec_cpt_model"),a}return e.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},e.prototype.mergeDefaultAndTheme=function(r,n){var i=c_(this),a=i?e0(r):{},o=n.getTheme();xt(r,o.get(this.mainType)),xt(r,this.getDefaultOption()),i&&bh(r,a,i)},e.prototype.mergeOption=function(r,n){xt(this.option,r,!0);var i=c_(this);i&&bh(this.option,r,i)},e.prototype.optionUpdated=function(r,n){},e.prototype.getDefaultOption=function(){var r=this.constructor;if(!Fce(r))return r.defaultOption;var n=Xhe(this);if(!n.defaultOption){for(var i=[],a=r;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=xt(s,i[l],!0);n.defaultOption=s}return n.defaultOption},e.prototype.getReferringComponents=function(r,n){var i=r+"Index",a=r+"Id";return c2(this.ecModel,r,{index:this.get(i,!0),id:this.get(a,!0)},n)},e.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(r){this.option.zlevel=r},e.protoInitialize=function(){var r=e.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),e}(Br);pY(fr,Br);IT(fr);Ihe(fr);Nhe(fr,Khe);function Khe(t){var e=[];return G(fr.getClassesByMainType(t),function(r){e=e.concat(r.dependencies||r.prototype.dependencies||[])}),e=Oe(e,function(r){return bu(r).main}),t!=="dataset"&&hr(e,"dataset")<=0&&e.unshift("dataset"),e}var dq="";typeof navigator!="undefined"&&(dq=navigator.platform||"");var Dv="rgba(0, 0, 0, 0.2)";const Yhe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Dv,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Dv,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Dv,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Dv,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Dv,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Dv,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:dq.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var pq=Tt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ol="original",qa="arrayRows",sl="objectRows",zu="keyedColumns",hh="typedArray",vq="unknown",Au="column",t0="row",Pa={Must:1,Might:2,Not:3},gq=kr();function qhe(t){gq(t).datasetMap=Tt()}function mq(t,e,r){var n={},i=OL(e);if(!i||!t)return n;var a=[],o=[],s=e.ecModel,l=gq(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;t=t.slice(),G(t,function(v,g){var m=Nt(v)?v:t[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});G(t,function(v,g){var m=v.name,x=p(v);if(c==null){var S=h.valueWayDim;d(n[m],S,x),d(o,S,x),h.valueWayDim+=x}else if(c===g)d(n[m],0,x),d(a,0,x);else{var S=h.categoryWayDim;d(n[m],S,x),d(o,S,x),h.categoryWayDim+=x}});function d(v,g,m){for(var x=0;x<m;x++)v.push(g+x)}function p(v){var g=v.dimsDef;return g?g.length:1}return a.length&&(n.itemName=a),o.length&&(n.seriesName=o),n}function NL(t,e,r){var n={},i=OL(t);if(!i)return n;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===sl||a===zu)&&G(o,function(c,f){(Nt(c)?c.name:c)==="name"&&(s=f)});var l=function(){for(var c={},f={},h=[],d=0,p=Math.min(5,r);d<p;d++){var v=_q(e.data,a,e.seriesLayoutBy,o,e.startIndex,d);h.push(v);var g=v===Pa.Not;if(g&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!g&&h[c.n]===Pa.Not)&&(c.n=d),m(c)&&h[c.n]!==Pa.Not)return c;g||(v===Pa.Might&&f.v==null&&d!==s&&(f.v=d),(f.n==null||f.n===f.v)&&(f.n=d))}function m(x){return x.v!=null&&x.n!=null}return m(c)?c:m(f)?f:null}();if(l){n.value=[l.v];var u=s!=null?s:l.n;n.itemName=[u],n.seriesName=[u]}return n}function OL(t){var e=t.get("data",!0);if(!e)return c2(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Ci).models[0]}function Zhe(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:c2(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Ci).models}function yq(t,e){return _q(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function _q(t,e,r,n,i,a){var o,s=5;if(Yo(t))return Pa.Not;var l,u;if(n){var c=n[a];Nt(c)?(l=c.name,u=c.type):ft(c)&&(l=c)}if(u!=null)return u==="ordinal"?Pa.Must:Pa.Not;if(e===qa){var f=t;if(r===t0){for(var h=f[a],d=0;d<(h||[]).length&&d<s;d++)if((o=b(h[i+d]))!=null)return o}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(o=b(p[a]))!=null)return o}}else if(e===sl){var v=t;if(!l)return Pa.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(o=b(g[l]))!=null)return o}}else if(e===zu){var m=t;if(!l)return Pa.Not;var h=m[l];if(!h||Yo(h))return Pa.Not;for(var d=0;d<h.length&&d<s;d++)if((o=b(h[d]))!=null)return o}else if(e===ol)for(var x=t,d=0;d<x.length&&d<s;d++){var g=x[d],S=jm(g);if(!De(S))return Pa.Not;if((o=b(S[a]))!=null)return o}function b(T){var w=ft(T);if(T!=null&&Number.isFinite(Number(T))&&T!=="")return w?Pa.Might:Pa.Not;if(w&&T!=="-")return Pa.Must}return Pa.Not}var L6=Tt();function Jhe(t,e){So(L6.get(t)==null&&e),L6.set(t,e)}function Qhe(t,e,r){var n=L6.get(e);if(!n)return r;var i=n(t);return i?r.concat(i):r}var NF=kr(),ede=kr(),kL=function(){function t(){}return t.prototype.getColorFromPalette=function(e,r,n){var i=gn(this.get("color",!0)),a=this.get("colorLayer",!0);return xq(this,NF,i,a,e,r,n)},t.prototype.clearColorPalette=function(){rde(this,NF)},t}();function D6(t,e,r,n){var i=gn(t.get(["aria","decal","decals"]));return xq(t,ede,i,null,e,r,n)}function tde(t,e){for(var r=t.length,n=0;n<r;n++)if(t[n].length>e)return t[n];return t[r-1]}function xq(t,e,r,n,i,a,o){a=a||t;var s=e(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=o==null||!n?r:tde(n,o);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function rde(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var hS,py,OF,kF="\0_ec_inner",nde=1,FL=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i,a,o,s){a=a||{},this.option=null,this._theme=new Br(a),this._locale=new Br(o),this._optionManager=s},e.prototype.setOption=function(r,n,i){var a=zF(n);this._optionManager.setOption(r,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(r,n){return this._resetOption(r,zF(n))},e.prototype._resetOption=function(r,n){var i=!1,a=this._optionManager;if(!r||r==="recreate"){var o=a.mountOption(r==="recreate");!this.option||r==="recreate"?OF(this,o):(this.restoreData(),this._mergeOption(o,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=a.getMediaOption(this);l.length&&G(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},e.prototype.mergeOption=function(r){this._mergeOption(r,null)},e.prototype._mergeOption=function(r,n){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=Tt(),u=n&&n.replaceMergeMainTypeMap;qhe(this),G(r,function(f,h){f!=null&&(fr.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?Ft(f):xt(i[h],f,!0))}),u&&u.each(function(f,h){fr.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),fr.topologicalTravel(s,fr.getAllClassMainTypes(),c,this);function c(f){var h=Qhe(this,f,gn(r[f])),d=a.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=uY(d,h,p);Mce(v,f,fr),i[f]=null,a.set(f,null),o.set(f,0);var g=[],m=[],x=0,S;G(v,function(b,T){var w=b.existing,E=b.newOption;if(!E)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var M=f==="series",A=fr.getClass(f,b.keyInfo.subType,!M);if(!A)return;if(f==="tooltip"){if(S)return;S=!0}if(w&&w.constructor===A)w.name=b.keyInfo.name,w.mergeOption(E,this),w.optionUpdated(E,!1);else{var R=Ae({componentIndex:T},b.keyInfo);w=new A(E,this,this,R),Ae(w,R),b.brandNew&&(w.__requireNewView=!0),w.init(E,this,this),w.optionUpdated(null,!0)}}w?(g.push(w.option),m.push(w),x++):(g.push(void 0),m.push(void 0))},this),i[f]=g,a.set(f,m),o.set(f,x),f==="series"&&hS(this)}this._seriesIndices||hS(this)},e.prototype.getOption=function(){var r=Ft(this.option);return G(r,function(n,i){if(fr.hasClass(i)){for(var a=gn(n),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!a_(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,r[i]=a}}),delete r[kF],r},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(r){this._payload=r},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var a=i[n||0];if(a)return a;if(n==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,a=r.id,o=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],G(gn(i),function(u){s[u]&&l.push(s[u])})):a!=null?l=FF("id",a,s):o!=null?l=FF("name",o,s):l=hn(s,function(u){return!!u}),BF(l,r)},e.prototype.findComponents=function(r){var n=r.query,i=r.mainType,a=s(n),o=a?this.queryComponents(a):hn(this._componentsMap.get(i),function(u){return!!u});return l(BF(o,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?hn(u,r.filter):u}},e.prototype.eachComponent=function(r,n,i){var a=this._componentsMap;if(Lt(r)){var o=n,s=r;a.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(o,h,p,p.componentIndex)}})}else for(var l=ft(r)?a.get(r):Nt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(r){var n=Fi(r,null);return hn(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},e.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},e.prototype.getSeriesByType=function(r){return hn(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},e.prototype.getSeries=function(){return hn(this._componentsMap.get("series"),function(r){return!!r})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(r,n){py(this),G(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];r.call(n,a,i)},this)},e.prototype.eachRawSeries=function(r,n){G(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(r,n,i){py(this),G(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===r&&n.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(r,n,i){return G(this.getSeriesByType(r),n,i)},e.prototype.isSeriesFiltered=function(r){return py(this),this._seriesIndicesMap.get(r.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(r,n){py(this);var i=[];G(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];r.call(n,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Tt(i)},e.prototype.restoreData=function(r){hS(this);var n=this._componentsMap,i=[];n.each(function(a,o){fr.hasClass(o)&&i.push(o)}),fr.topologicalTravel(i,fr.getAllClassMainTypes(),function(a){G(n.get(a),function(o){o&&(a!=="series"||!ide(o,r))&&o.restoreData()})})},e.internalField=function(){hS=function(r){var n=r._seriesIndices=[];G(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Tt(n)},py=function(r){},OF=function(r,n){r.option={},r.option[kF]=nde,r._componentsMap=Tt({series:[]}),r._componentsCount=Tt();var i=n.aria;Nt(i)&&i.enabled==null&&(i.enabled=!0),ade(n,r._theme.option),xt(n,Yhe,!1),r._mergeOption(n,null)}}(),e}(Br);function ide(t,e){if(e){var r=e.seriesIndex,n=e.seriesId,i=e.seriesName;return r!=null&&t.componentIndex!==r||n!=null&&t.id!==n||i!=null&&t.name!==i}}function ade(t,e){var r=t.color&&!t.colorLayer;G(e,function(n,i){i==="colorLayer"&&r||fr.hasClass(i)||(typeof n=="object"?t[i]=t[i]?xt(t[i],n,!1):Ft(n):t[i]==null&&(t[i]=n))})}function FF(t,e,r){if(De(e)){var n=Tt();return G(e,function(a){if(a!=null){var o=Fi(a,null);o!=null&&n.set(a,!0)}}),hn(r,function(a){return a&&n.get(a[t])})}else{var i=Fi(e,null);return hn(r,function(a){return a&&i!=null&&a[t]===i})}}function BF(t,e){return e.hasOwnProperty("subType")?hn(t,function(r){return r&&r.subType===e.subType}):t}function zF(t){var e=Tt();return t&&G(gn(t.replaceMerge),function(r){e.set(r,!0)}),{replaceMergeMainTypeMap:e}}mi(FL,kL);var ode=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Sq=function(){function t(e){G(ode,function(r){this[r]=pt(e[r],e)},this)}return t}(),fA={},r0=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,r){var n=[];G(fA,function(i,a){var o=i.create(e,r);n=n.concat(o||[])}),this._coordinateSystems=n},t.prototype.update=function(e,r){G(this._coordinateSystems,function(n){n.update&&n.update(e,r)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,r){fA[e]=r},t.get=function(e){return fA[e]},t}(),sde=/^(min|max)?(.+)$/,lde=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,r,n){e&&(G(gn(e.series),function(o){o&&o.data&&Yo(o.data)&&K3(o.data)}),G(gn(e.dataset),function(o){o&&o.source&&Yo(o.source)&&K3(o.source)})),e=Ft(e);var i=this._optionBackup,a=ude(e,r,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},t.prototype.mountOption=function(e){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Ft(e?r.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var r,n=this._timelineOptions;if(n.length){var i=e.getComponent("timeline");i&&(r=Ft(n[i.getCurrentIndex()]))}return r},t.prototype.getMediaOption=function(e){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,u=i.length;l<u;l++)cde(i[l].query,r,n)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!hde(o,this._currentMediaIndices)&&(s=Oe(o,function(c){return Ft(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},t}();function ude(t,e,r){var n=[],i,a,o=t.baseOption,s=t.timeline,l=t.options,u=t.media,c=!!t.media,f=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((f||c)&&(t.options=t.media=null),a=t),c&&De(u)&&G(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(a),G(l,function(d){return h(d)}),G(n,function(d){return h(d.option)});function h(d){G(e,function(p){p(d,r)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function cde(t,e,r){var n={width:e,height:r,aspectratio:e/r},i=!0;return G(t,function(a,o){var s=o.match(sde);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();fde(n[u],a,l)||(i=!1)}}),i}function fde(t,e,r){return r==="min"?t>=e:r==="max"?t<=e:t===e}function hde(t,e){return t.join(",")===e.join(",")}var ml=G,f_=Nt,UF=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function hA(t){var e=t&&t.itemStyle;if(e)for(var r=0,n=UF.length;r<n;r++){var i=UF[r],a=e.normal,o=e.emphasis;a&&a[i]&&(t[i]=t[i]||{},t[i].normal?xt(t[i].normal,a[i]):t[i].normal=a[i],a[i]=null),o&&o[i]&&(t[i]=t[i]||{},t[i].emphasis?xt(t[i].emphasis,o[i]):t[i].emphasis=o[i],o[i]=null)}}function ja(t,e,r){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var n=t[e].normal,i=t[e].emphasis;n&&(r?(t[e].normal=t[e].emphasis=null,At(t[e],n)):t[e]=n),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function h1(t){ja(t,"itemStyle"),ja(t,"lineStyle"),ja(t,"areaStyle"),ja(t,"label"),ja(t,"labelLine"),ja(t,"upperLabel"),ja(t,"edgeLabel")}function wi(t,e){var r=f_(t)&&t[e],n=f_(r)&&r.textStyle;if(n)for(var i=0,a=jk.length;i<a;i++){var o=jk[i];n.hasOwnProperty(o)&&(r[o]=n[o])}}function zs(t){t&&(h1(t),wi(t,"label"),t.emphasis&&wi(t.emphasis,"label"))}function dde(t){if(f_(t)){hA(t),h1(t),wi(t,"label"),wi(t,"upperLabel"),wi(t,"edgeLabel"),t.emphasis&&(wi(t.emphasis,"label"),wi(t.emphasis,"upperLabel"),wi(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(hA(e),zs(e));var r=t.markLine;r&&(hA(r),zs(r));var n=t.markArea;n&&zs(n);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var a=t.links||t.edges;if(a&&!Yo(a))for(var o=0;o<a.length;o++)zs(a[o]);G(t.categories,function(u){h1(u)})}if(i&&!Yo(i))for(var o=0;o<i.length;o++)zs(i[o]);if(e=t.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)zs(s[o]);if(r=t.markLine,r&&r.data)for(var l=r.data,o=0;o<l.length;o++)De(l[o])?(zs(l[o][0]),zs(l[o][1])):zs(l[o]);t.type==="gauge"?(wi(t,"axisLabel"),wi(t,"title"),wi(t,"detail")):t.type==="treemap"?(ja(t.breadcrumb,"itemStyle"),G(t.levels,function(u){h1(u)})):t.type==="tree"&&h1(t.leaves)}}function tc(t){return De(t)?t:t?[t]:[]}function VF(t){return(De(t)?t[0]:t)||{}}function pde(t,e){ml(tc(t.series),function(n){f_(n)&&dde(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),ml(r,function(n){ml(tc(t[n]),function(i){i&&(wi(i,"axisLabel"),wi(i.axisPointer,"label"))})}),ml(tc(t.parallel),function(n){var i=n&&n.parallelAxisDefault;wi(i,"axisLabel"),wi(i&&i.axisPointer,"label")}),ml(tc(t.calendar),function(n){ja(n,"itemStyle"),wi(n,"dayLabel"),wi(n,"monthLabel"),wi(n,"yearLabel")}),ml(tc(t.radar),function(n){wi(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),ml(tc(t.geo),function(n){f_(n)&&(zs(n),ml(tc(n.regions),function(i){zs(i)}))}),ml(tc(t.timeline),function(n){zs(n),ja(n,"label"),ja(n,"itemStyle"),ja(n,"controlStyle",!0);var i=n.data;De(i)&&G(i,function(a){Nt(a)&&(ja(a,"label"),ja(a,"itemStyle"))})}),ml(tc(t.toolbox),function(n){ja(n,"iconStyle"),ml(n.feature,function(i){ja(i,"iconStyle")})}),wi(VF(t.axisPointer),"label"),wi(VF(t.tooltip).axisPointer,"label")}function vde(t,e){for(var r=e.split(","),n=t,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function gde(t,e,r,n){for(var i=e.split(","),a=t,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=r)}function HF(t){t&&G(mde,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var mde=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],yde=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],dA=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function vy(t){var e=t&&t.itemStyle;if(e)for(var r=0;r<dA.length;r++){var n=dA[r][1],i=dA[r][0];e[n]!=null&&(e[i]=e[n])}}function GF(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function WF(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function _de(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function bq(t,e){if(t)for(var r=0;r<t.length;r++)e(t[r]),t[r]&&bq(t[r].children,e)}function wq(t,e){pde(t,e),t.series=gn(t.series),G(t.series,function(r){if(Nt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),GF(r.label);var i=r.data;if(i&&!Yo(i))for(var a=0;a<i.length;a++)GF(i[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var o=vde(r,"pointer.color");o!=null&&gde(r,"itemStyle.color",o)}else if(n==="bar"){vy(r),vy(r.backgroundStyle),vy(r.emphasis);var i=r.data;if(i&&!Yo(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(vy(i[a]),vy(i[a]&&i[a].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),WF(r),bq(r.data,WF)}else n==="graph"||n==="sankey"?_de(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&At(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),HF(r)}}),t.dataRange&&(t.visualMap=t.dataRange),G(yde,function(r){var n=t[r];n&&(De(n)||(n=[n]),G(n,function(i){HF(i)}))})}function xde(t){var e=Tt();t.eachSeries(function(r){var n=r.get("stack");if(n){var i=e.get(n)||e.set(n,[]),a=r.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(Sde)}function Sde(t){G(t,function(e,r){var n=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,c,f){var h=o.get(e.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=o.getRawIndex(f):d=o.get(e.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=t[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var x=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&x>0||l==="negative"&&x<0||l==="samesign"&&h>=0&&x>0||l==="samesign"&&h<=0&&x<0){h=mce(h,x),v=x;break}}}return n[0]=h,n[1]=v,n})})}var qT=function(){function t(e){this.data=e.data||(e.sourceFormat===zu?{}:[]),this.sourceFormat=e.sourceFormat||vq,this.seriesLayoutBy=e.seriesLayoutBy||Au,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var r=this.dimensionsDefine=e.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&yq(this,n)===Pa.Must&&(i.type="ordinal")}}return t}();function BL(t){return t instanceof qT}function I6(t,e,r){r=r||Tq(t);var n=e.seriesLayoutBy,i=wde(t,r,n,e.sourceHeader,e.dimensions),a=new qT({data:t,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Ft(e)});return a}function zL(t){return new qT({data:t,sourceFormat:Yo(t)?hh:ol})}function bde(t){return new qT({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:Ft(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function Tq(t){var e=vq;if(Yo(t))e=hh;else if(De(t)){t.length===0&&(e=qa);for(var r=0,n=t.length;r<n;r++){var i=t[r];if(i!=null){if(De(i)||Yo(i)){e=qa;break}else if(Nt(i)){e=sl;break}}}}else if(Nt(t)){for(var a in t)if(_t(t,a)&&Ya(t[a])){e=zu;break}}return e}function wde(t,e,r,n,i){var a,o;if(!t)return{dimensionsDefine:$F(i),startIndex:o,dimensionsDetectedCount:a};if(e===qa){var s=t;n==="auto"||n==null?jF(function(u){u!=null&&u!=="-"&&(ft(u)?o==null&&(o=1):o=0)},r,s,10):o=Ur(n)?n:n?1:0,!i&&o===1&&(i=[],jF(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),a=i?i.length:r===t0?s.length:s[0]?s[0].length:null}else if(e===sl)i||(i=Tde(t));else if(e===zu)i||(i=[],G(t,function(u,c){i.push(c)}));else if(e===ol){var l=jm(t[0]);a=De(l)&&l.length||1}return{startIndex:o,dimensionsDefine:$F(i),dimensionsDetectedCount:a}}function Tde(t){for(var e=0,r;e<t.length&&!(r=t[e++]););if(r)return Er(r)}function $F(t){if(t){var e=Tt();return Oe(t,function(r,n){r=Nt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function jF(t,e,r,n){if(e===t0)for(var i=0;i<r.length&&i<n;i++)t(r[i]?r[i][0]:null,i);else for(var a=r[0]||[],i=0;i<a.length&&i<n;i++)t(a[i],i)}function Cq(t){var e=t.sourceFormat;return e===sl||e===zu}var ud,cd,fd,XF,KF,Eq=function(){function t(e,r){var n=BL(e)?e:zL(e);this._source=n;var i=this._data=n.data;n.sourceFormat===hh&&(this._offset=0,this._dimSize=r,this._data=i),KF(this,i,n)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,r){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;KF=function(o,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=XF[UL(u,c)];if(Ae(o,d),u===hh)o.getItem=r,o.count=i,o.fillStorage=n;else{var p=Aq(u,c);o.getItem=pt(p,null,s,f,h);var v=Mq(u,c);o.count=pt(v,null,s,f,h)}};var r=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*o,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(o,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-o,m=l[h],x=0;x<g;x++){var S=c[x*f+h];m[o+x]=S,S<p&&(p=S),S>v&&(v=S)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};XF=(e={},e[qa+"_"+Au]={pure:!0,appendData:a},e[qa+"_"+t0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[sl]={pure:!0,appendData:a},e[zu]={pure:!0,appendData:function(o){var s=this._data;G(o,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},e[ol]={appendData:a},e[hh]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),t}(),YF=function(t,e,r,n){return t[n]},Cde=(ud={},ud[qa+"_"+Au]=function(t,e,r,n){return t[n+e]},ud[qa+"_"+t0]=function(t,e,r,n,i){n+=e;for(var a=i||[],o=t,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[n]:null}return a},ud[sl]=YF,ud[zu]=function(t,e,r,n,i){for(var a=i||[],o=0;o<r.length;o++){var s=r[o].name,l=t[s];a[o]=l?l[n]:null}return a},ud[ol]=YF,ud);function Aq(t,e){var r=Cde[UL(t,e)];return r}var qF=function(t,e,r){return t.length},Ede=(cd={},cd[qa+"_"+Au]=function(t,e,r){return Math.max(0,t.length-e)},cd[qa+"_"+t0]=function(t,e,r){var n=t[0];return n?Math.max(0,n.length-e):0},cd[sl]=qF,cd[zu]=function(t,e,r){var n=r[0].name,i=t[n];return i?i.length:0},cd[ol]=qF,cd);function Mq(t,e){var r=Ede[UL(t,e)];return r}var pA=function(t,e,r){return t[e]},Ade=(fd={},fd[qa]=pA,fd[sl]=function(t,e,r){return t[r]},fd[zu]=pA,fd[ol]=function(t,e,r){var n=jm(t);return n instanceof Array?n[e]:n},fd[hh]=pA,fd);function Rq(t){var e=Ade[t];return e}function UL(t,e){return t===qa?t+"_"+e:t}function sm(t,e,r){if(t){var n=t.getRawDataItem(e);if(n!=null){var i=t.getStore(),a=i.getSource().sourceFormat;if(r!=null){var o=t.getDimensionIndex(r),s=i.getDimensionProperty(o);return Rq(a)(n,o,s)}else{var l=n;return a===ol&&(l=jm(n)),l}}}}var Mde=/\{@(.+?)\}/g,ZT=function(){function t(){}return t.prototype.getDataParams=function(e,r){var n=this.getData(r),i=this.getRawValue(e,r),a=n.getRawIndex(e),o=n.getName(e),s=n.getRawDataItem(e),l=n.getItemVisual(e,"style"),u=l&&l[n.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,r,n,i,a,o){r=r||"normal";var s=this.getData(n),l=this.getDataParams(e,n);if(o&&(l.value=o.interpolatedValue),i!=null&&De(l.value)&&(l.value=l.value[i]),!a){var u=s.getItemModel(e);a=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Lt(a))return l.status=r,l.dimensionIndex=i,a(l);if(ft(a)){var c=DL(a,l);return c.replace(Mde,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=sm(s,e,p);if(o&&De(o.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=o.interpolatedValue[g])}return v!=null?v+"":""})}},t.prototype.getRawValue=function(e,r){return sm(this.getData(r),e)},t.prototype.formatTooltip=function(e,r,n){},t}();function ZF(t){var e,r;return Nt(t)?t.type&&(r=t):e=t,{text:e,frag:r}}function k1(t){return new Rde(t)}var Rde=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var r=this._upstream,n=e&&e.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(o!==l||s!==u)&&(a="reset");function c(x){return!(x>=1)&&(x=1),x}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=e&&e.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(De(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,r,n,i,a){JF.reset(r,n,i,a),this._callingProgress=e,this._callingProgress({start:r,end:n,count:n-r,next:JF.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!e&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),De(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),JF=function(){var t,e,r,n,i,a={reset:function(l,u,c,f){e=l,t=u,r=c,n=f,i=Math.ceil(n/r),a.next=r>1&&n>0?s:o}};return a;function o(){return e<t?e++:null}function s(){var l=e%i*r+Math.ceil(e/i),u=e>=t?null:l<n?l:e;return e++,u}}();function dh(t,e){var r=e&&e.type;return r==="ordinal"?t:(r==="time"&&!Ur(t)&&t!=null&&t!=="-"&&(t=+rl(t)),t==null||t===""?NaN:Number(t))}var Pde=Tt({number:function(t){return parseFloat(t)},time:function(t){return+rl(t)},trim:function(t){return ft(t)?Il(t):t}});function Pq(t){return Pde.get(t)}var Lq={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},Lde=function(){function t(e,r){if(!Ur(r)){var n="";nn(n)}this._opFn=Lq[e],this._rvalFloat=Oc(r)}return t.prototype.evaluate=function(e){return Ur(e)?this._opFn(e,this._rvalFloat):this._opFn(Oc(e),this._rvalFloat)},t}(),Dq=function(){function t(e,r){var n=e==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,r){var n=Ur(e)?e:Oc(e),i=Ur(r)?r:Oc(r),a=isNaN(n),o=isNaN(i);if(a&&(n=this._incomparable),o&&(i=this._incomparable),a&&o){var s=ft(e),l=ft(r);s&&(n=l?e:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},t}(),Dde=function(){function t(e,r){this._rval=r,this._isEQ=e,this._rvalTypeof=typeof r,this._rvalFloat=Oc(r)}return t.prototype.evaluate=function(e){var r=e===this._rval;if(!r){var n=typeof e;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Oc(e)===this._rvalFloat)}return this._isEQ?r:!r},t}();function Ide(t,e){return t==="eq"||t==="ne"?new Dde(t==="eq",e):_t(Lq,t)?new Lde(t,e):null}var Nde=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,r){},t.prototype.retrieveValueFromItem=function(e,r){},t.prototype.convertValue=function(e,r){return dh(e,r)},t}();function Ode(t,e){var r=new Nde,n=t.data,i=r.sourceFormat=t.sourceFormat,a=t.startIndex,o="";t.seriesLayoutBy!==Au&&nn(o);var s=[],l={},u=t.dimensionsDefine;if(u)G(u,function(v,g){var m=v.name,x={index:g,name:m,displayName:v.displayName};if(s.push(x),m!=null){var S="";_t(l,m)&&nn(S),l[m]=x}});else for(var c=0;c<t.dimensionsDetectedCount;c++)s.push({index:c});var f=Aq(i,Au);e.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,a,s,v)},r.getRawData=pt(kde,null,t)),r.cloneRawData=pt(Fde,null,t);var h=Mq(i,Au);r.count=pt(h,null,n,a,s);var d=Rq(i);r.retrieveValue=function(v,g){var m=f(n,a,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=pt(Bde,null,s,l),r.cloneAllDimensionInfo=pt(zde,null,s),r}function kde(t){var e=t.sourceFormat;if(!VL(e)){var r="";nn(r)}return t.data}function Fde(t){var e=t.sourceFormat,r=t.data;if(!VL(e)){var n="";nn(n)}if(e===qa){for(var i=[],a=0,o=r.length;a<o;a++)i.push(r[a].slice());return i}else if(e===sl){for(var i=[],a=0,o=r.length;a<o;a++)i.push(Ae({},r[a]));return i}}function Bde(t,e,r){if(r!=null){if(Ur(r)||!isNaN(r)&&!_t(e,r))return t[r];if(_t(e,r))return e[r]}}function zde(t){return Ft(t)}var Iq=Tt();function Ude(t){t=Ft(t);var e=t.type,r="";e||nn(r);var n=e.split(":");n.length!==2&&nn(r);var i=!1;n[0]==="echarts"&&(e=n[1],i=!0),t.__isBuiltIn=i,Iq.set(e,t)}function Vde(t,e,r){var n=gn(t),i=n.length,a="";i||nn(a);for(var o=0,s=i;o<s;o++){var l=n[o];e=Hde(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function Hde(t,e,r,n){var i="";e.length||nn(i),Nt(t)||nn(i);var a=t.type,o=Iq.get(a);o||nn(i);var s=Oe(e,function(u){return Ode(u,o)}),l=gn(o.transform({upstream:s[0],upstreamList:s,config:Ft(t.config)}));return Oe(l,function(u,c){var f="";Nt(u)||nn(f),u.data||nn(f);var h=Tq(u.data);VL(h)||nn(f);var d,p=e[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Au,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Au,sourceHeader:0,dimensions:u.dimensions};return I6(u.data,d,null)})}function VL(t){return t===qa||t===sl}var JT="undefined",Gde=typeof Uint32Array===JT?Array:Uint32Array,Wde=typeof Uint16Array===JT?Array:Uint16Array,Nq=typeof Int32Array===JT?Array:Int32Array,QF=typeof Float64Array===JT?Array:Float64Array,Oq={float:QF,int:Nq,ordinal:Array,number:Array,time:QF},vA;function gy(t){return t>65535?Gde:Wde}function Iv(){return[1/0,-1/0]}function $de(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function eB(t,e,r,n,i){var a=Oq[r||"float"];if(i){var o=t[e],s=o&&o.length;if(s!==n){for(var l=new a(n),u=0;u<s;u++)l[u]=o[u];t[e]=l}}else t[e]=new a(n)}var N6=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Tt()}return t.prototype.initData=function(e,r,n){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=vA[i.sourceFormat];this._dimValueGetter=n||a,this._rawExtent=[],Cq(i),this._dimensions=Oe(r,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,r){var n=this._calcDimNameToIdx,i=this._dimensions,a=n.get(e);if(a!=null){if(i[a].type===r)return a}else a=i.length;return i[a]={type:r},n.set(e,a),this._chunks[a]=new Oq[r||"float"](this._rawCount),this._rawExtent[a]=Iv(),a},t.prototype.collectOrdinalMeta=function(e,r){var n=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=n.length;o===0&&(a[e]=Iv());for(var l=a[e],u=o;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var r=this._dimensions[e],n=r.ordinalMeta;return n},t.prototype.getDimensionProperty=function(e){var r=this._dimensions[e];return r&&r.property},t.prototype.appendData=function(e){var r=this._provider,n=this.count();r.appendData(e);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},t.prototype.appendValues=function(e,r){for(var n=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,r||0),u=0;u<a;u++){var c=i[u];eB(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<a;p++){var c=i[p],v=vA.arrayRows.call(this,e[d]||f,c.property,d,p);n[p][h]=v;var g=o[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},t.prototype._initDataFromProvider=function(e,r,n){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=Oe(o,function(x){return x.property}),c=0;c<s;c++){var f=o[c];l[c]||(l[c]=Iv()),eB(a,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(e,r,a,l);else for(var h=[],d=e;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=a[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[e];return n?n[this.getRawIndex(r)]:NaN},t.prototype.getValues=function(e,r){var n=[],i=[];if(r==null){r=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)n.push(this.get(i[a],r));return n},t.prototype.getByRawIndex=function(e,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[e];return n?n[r]:NaN},t.prototype.getSum=function(e){var r=this._chunks[e],n=0;if(r)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(n+=o)}return n},t.prototype.getMedian=function(e){var r=[];this.each([e],function(a){isNaN(a)||r.push(a)});var n=r.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var r=this._indices,n=r[e];if(n!=null&&n<this._count&&n===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(r[o]<e)i=o+1;else if(r[o]>e)a=o-1;else return o}return-1},t.prototype.indicesOfNearest=function(e,r,n){var i=this._chunks,a=i[e],o=[];if(!a)return o;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-a[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(o[u++]=c))}return o.length=u,o},t.prototype.getIndices=function(){var e,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){e=new n(i);for(var a=0;a<i;a++)e[a]=r[a]}else e=new n(r.buffer,0,i)}else{var n=gy(this._rawCount);e=new n(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},t.prototype.filter=function(e,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),a=gy(n._rawCount),o=new a(i),s=[],l=e.length,u=0,c=e[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[e[g]][p];s[g]=h,d=r.apply(null,s)}d&&(o[u++]=p)}return u<i&&(n._indices=o),n._count=u,n._extent=[],n._updateGetRawIdx(),n},t.prototype.selectRange=function(e){var r=this.clone(),n=r._count;if(!n)return this;var i=Er(e),a=i.length;if(!a)return this;var o=r.count(),s=gy(r._rawCount),l=new s(o),u=0,c=i[0],f=e[c][0],h=e[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(a===1){for(var g=d[i[0]],m=0;m<n;m++){var x=g[m];(x>=f&&x<=h||isNaN(x))&&(l[u++]=v),v++}p=!0}else if(a===2){for(var g=d[i[0]],S=d[i[1]],b=e[i[1]][0],T=e[i[1]][1],m=0;m<n;m++){var x=g[m],w=S[m];(x>=f&&x<=h||isNaN(x))&&(w>=b&&w<=T||isNaN(w))&&(l[u++]=v),v++}p=!0}}if(!p)if(a===1)for(var m=0;m<o;m++){var E=r.getRawIndex(m),x=d[i[0]][E];(x>=f&&x<=h||isNaN(x))&&(l[u++]=E)}else for(var m=0;m<o;m++){for(var M=!0,E=r.getRawIndex(m),A=0;A<a;A++){var R=i[A],x=d[R][E];(x<e[R][0]||x>e[R][1])&&(M=!1)}M&&(l[u++]=r.getRawIndex(m))}return u<o&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},t.prototype.map=function(e,r){var n=this.clone(e);return this._updateDims(n,e,r),n},t.prototype.modify=function(e,r){this._updateDims(this,e,r)},t.prototype._updateDims=function(e,r,n){for(var i=e._chunks,a=[],o=r.length,s=e.count(),l=[],u=e._rawExtent,c=0;c<r.length;c++)u[r[c]]=Iv();for(var f=0;f<s;f++){for(var h=e.getRawIndex(f),d=0;d<o;d++)l[d]=i[r[d]][h];l[o]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],x=i[v];x&&(x[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},t.prototype.lttbDownSample=function(e,r){var n=this.clone([e],!0),i=n._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(gy(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));d[s++]=u;for(var p=1;p<o-1;p+=l){for(var v=Math.min(p+l,o-1),g=Math.min(p+l*2,o),m=(g+v)/2,x=0,S=v;S<g;S++){var b=this.getRawIndex(S),T=a[b];isNaN(T)||(x+=T)}x/=g-v;var w=p,E=Math.min(p+l,o),M=p-1,A=a[u];c=-1,h=w;for(var R=-1,L=0,S=w;S<E;S++){var b=this.getRawIndex(S),T=a[b];if(isNaN(T)){L++,R<0&&(R=b);continue}f=Math.abs((M-m)*(T-A)-(M-S)*(x-A)),f>c&&(c=f,h=b)}L>0&&L<E-w&&(d[s++]=Math.min(R,h),h=Math.max(R,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(o-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},t.prototype.downSample=function(e,r,n,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/r),u=o[e],c=this.count(),f=a._rawExtent[e]=Iv(),h=new(gy(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),x=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[x]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=x}return a._count=d,a._indices=h,a._updateGetRawIdx(),a},t.prototype.each=function(e,r){if(this._count)for(var n=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(n){case 0:r(a);break;case 1:r(i[e[0]][s],a);break;case 2:r(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[e[l]][s];u[l]=a,r.apply(null,u)}}},t.prototype.getDataExtent=function(e){var r=this._chunks[e],n=Iv();if(!r)return n;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=n;for(var s=o[0],l=o[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return o=[s,l],this._extent[e]=o,o},t.prototype.getRawDataItem=function(e){var r=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,a=0;a<i.length;a++)n.push(i[a][r]);return n},t.prototype.clone=function(e,r){var n=new t,i=this._chunks,a=e&&Gl(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)n._chunks[o]=a[o]?$de(i[o]):i[o];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Ft(this._extent),e._rawExtent=Ft(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,r=void 0;if(e===Array){var n=this._indices.length;r=new e(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new e(this._indices);return r}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(r,n,i,a){return dh(r[a],this._dimensions[a])}vA={arrayRows:e,objectRows:function(r,n,i,a){return dh(r[n],this._dimensions[a])},keyedColumns:e,original:function(r,n,i,a){var o=r&&(r.value==null?r:r.value);return dh(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(r,n,i,a){return r[a]}}}(),t}(),kq=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,r){this._sourceList=e,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,a;if(dS(e)){var o=e,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),l=Yo(s)?hh:ol,a=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=Jt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Jt(f.sourceHeader,h.sourceHeader),v=Jt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[I6(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=e;if(n){var x=this._applyTransform(r);i=x.sourceList,a=x.upstreamSignList}else{var S=m.get("source",!0);i=[I6(S,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},t.prototype._applyTransform=function(e){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&rB(a)}var o,s=[],l=[];return G(e,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&rB(f),s.push(c),l.push(u._getVersionSign())}),n?o=Vde(n,s,{datasetIndex:r.componentIndex}):i!=null&&(o=[bde(s[0])]),{sourceList:o,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),r=0;r<e.length;r++){var n=e[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var r=this._sourceList[e];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(e)}return r},t.prototype.getSharedDataStore=function(e){var r=e.makeStoreSchema();return this._innerGetDataStore(r.dimensions,e.source,r.hash)},t.prototype._innerGetDataStore=function(e,r,n){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[n];if(!s){var l=this._getUpstreamSourceManagers()[0];dS(this._sourceHost)&&l?s=l._innerGetDataStore(e,r,n):(s=new N6,s.initData(new Eq(r,e.length),e)),o[n]=s}return s},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(dS(e)){var r=OL(e);return r?[r.getSourceManager()]:[]}else return Oe(Zhe(e),function(n){return n.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,r,n,i;if(dS(e))r=e.get("seriesLayoutBy",!0),n=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;r=a.get("seriesLayoutBy",!0),n=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},t}();function tB(t){var e=t.option.transform;e&&K3(t.option.transform)}function dS(t){return t.mainType==="series"}function rB(t){throw new Error(t)}var Fq="line-height:1";function Bq(t,e){var r=t.color||"#6e7079",n=t.fontSize||12,i=t.fontWeight||"400",a=t.color||"#464646",o=t.fontSize||14,s=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Oi(n+"")+"px;color:"+Oi(r)+";font-weight:"+Oi(i+""),valueStyle:"font-size:"+Oi(o+"")+"px;color:"+Oi(a)+";font-weight:"+Oi(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var jde=[0,10,20,30],Xde=["",`
`,`

`,`


`];function ea(t,e){return e.type=t,e}function O6(t){return t.type==="section"}function zq(t){return O6(t)?Kde:Yde}function Uq(t){if(O6(t)){var e=0,r=t.blocks.length,n=r>1||r>0&&!t.noHeader;return G(t.blocks,function(i){var a=Uq(i);a>=e&&(e=a+ +(n&&(!a||O6(i)&&!i.noHeader)))}),e}return 0}function Kde(t,e,r,n){var i=e.noHeader,a=qde(Uq(e)),o=[],s=e.blocks||[];So(!s||De(s)),s=s||[];var l=t.orderMode;if(e.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(_t(u,l)){var c=new Dq(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}G(s,function(p,v){var g=e.valueFormatter,m=zq(p)(g?Ae(Ae({},t),{valueFormatter:g}):t,p,v>0?a.html:0,n);m!=null&&o.push(m)});var f=t.renderMode==="richText"?o.join(a.richText):k6(o.join(""),i?r:a.html);if(i)return f;var h=P6(e.header,"ordinal",t.useUTC),d=Bq(n,t.renderMode).nameStyle;return t.renderMode==="richText"?Vq(t,h,d)+a.richText+f:k6('<div style="'+d+";"+Fq+';">'+Oi(h)+"</div>"+f,r)}function Yde(t,e,r,n){var i=t.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,u=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(b){return b=De(b)?b:[b],Oe(b,function(T,w){return P6(T,De(d)?d[w]:d,u)})};if(!(a&&o)){var f=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":P6(l,"ordinal",u),d=e.valueType,p=o?[]:c(e.value,e.dataIndex),v=!s||!a,g=!s&&a,m=Bq(n,i),x=m.nameStyle,S=m.valueStyle;return i==="richText"?(s?"":f)+(a?"":Vq(t,h,x))+(o?"":Qde(t,p,v,g,S)):k6((s?"":f)+(a?"":Zde(h,!s,x))+(o?"":Jde(p,v,g,S)),r)}}function nB(t,e,r,n,i,a){if(t){var o=zq(t),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:e,valueFormatter:t.valueFormatter};return o(s,t,0,a)}}function qde(t){return{html:jde[t],richText:Xde[t]}}function k6(t,e){var r='<div style="clear:both"></div>',n="margin: "+e+"px 0 0";return'<div style="'+n+";"+Fq+';">'+t+r+"</div>"}function Zde(t,e,r){var n=e?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Oi(t)+"</span>"}function Jde(t,e,r,n){var i=r?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return t=De(t)?t:[t],'<span style="'+a+";"+n+'">'+Oe(t,function(o){return Oi(o)}).join("&nbsp;&nbsp;")+"</span>"}function Vq(t,e,r){return t.markupStyleCreator.wrapRichTextStyle(e,r)}function Qde(t,e,r,n,i){var a=[i],o=n?10:20;return r&&a.push({padding:[0,0,0,o],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(De(e)?e.join("  "):e,a)}function Hq(t,e){var r=t.getData().getItemVisual(e,"style"),n=r[t.visualDrawType];return Ep(n)}function Gq(t,e){var r=t.get("padding");return r!=null?r:e==="richText"?[8,10]:10}var gA=function(){function t(){this.richTextStyles={},this._nextStyleNameId=aY()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,r,n){var i=n==="richText"?this._generateStyleName():null,a=cq({color:r,type:e,renderMode:n,markerId:i});return ft(a)?a:(this.richTextStyles[i]=a.style,a.content)},t.prototype.wrapRichTextStyle=function(e,r){var n={};De(r)?G(r,function(a){return Ae(n,a)}):Ae(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+e+"}"},t}();function Wq(t){var e=t.series,r=t.dataIndex,n=t.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(r),l=De(s),u=Hq(e,r),c,f,h,d;if(o>1||l&&!o){var p=epe(s,e,r,a,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);d=c=sm(i,r,a[0]),f=v.type}else d=c=l?s[0]:s;var g=hL(e),m=g&&e.name||"",x=i.getName(r),S=n?m:x;return ea("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[ea("nameValue",{markerType:"item",markerColor:u,name:S,noName:!Il(S),value:c,valueType:f,dataIndex:r})].concat(h||[])})}function epe(t,e,r,n,i){var a=e.getData(),o=Gl(t,function(f,h,d){var p=a.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?G(n,function(f){c(sm(a,r,f),f)}):G(t,c);function c(f,h){var d=a.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(o?u.push(ea("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var bf=kr();function pS(t,e){return t.getName(e)||t.getId(e)}var _3="__universalTransitionEnabled",Vr=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return e.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=k1({count:rpe,reset:npe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var a=bf(this).sourceManager=new kq(this);a.prepareSource();var o=this.getInitialData(r,i);aB(o,this),this.dataTask.context.data=o,bf(this).dataBeforeProcessed=o,iB(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(r,n){var i=c_(this),a=i?e0(r):{},o=this.subType;fr.hasClass(o)&&(o+="Series"),xt(r,n.getTheme().get(this.subType)),xt(r,this.getDefaultOption()),bp(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&bh(r,a,i)},e.prototype.mergeOption=function(r,n){r=xt(this.option,r,!0),this.fillDataTextStyle(r.data);var i=c_(this);i&&bh(this.option,r,i);var a=bf(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(r,n);aB(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,bf(this).dataBeforeProcessed=o,iB(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(r){if(r&&!Yo(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&bp(r[i],"label",n)},e.prototype.getInitialData=function(r,n){},e.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},e.prototype.getData=function(r){var n=F6(this);if(n){var i=n.context.data;return r==null||!i.getLinkedData?i:i.getLinkedData(r)}else return bf(this).data},e.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},e.prototype.setData=function(r){var n=F6(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}bf(this).data=r},e.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Tt(r)},e.prototype.getSourceManager=function(){return bf(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return bf(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},e.prototype.formatTooltip=function(r,n,i){return Wq({series:this,dataIndex:r,multipleSeries:n})},e.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(br.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(r,n,i){var a=this.ecModel,o=kL.prototype.getColorFromPalette.call(this,r,n,i);return o||(o=a.getColorFromPalette(r,n,i)),o},e.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},e.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(n);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=pS(o,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(r,n){for(var i=[],a=0;a<r.length;a++)i[0]=r[a],this.isSelected(r[a],n)?this.unselect(i,n):this.select(i,n)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=Er(r),i=[],a=0;a<n.length;a++){var o=r[n[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(n);return(i==="all"||i[pS(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[_3])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},e.prototype._innerSelect=function(r,n){var i,a,o=this.option,s=o.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){Nt(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,c=0;c<l;c++){var f=n[c],h=pS(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=pS(r,d);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=r.getRawIndex(d),a)}}},e.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var a=r.getRawDataItem(i);a&&a.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},e.registerClass=function(r){return fr.registerClass(r)},e.protoInitialize=function(){var r=e.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),e}(fr);mi(Vr,ZT);mi(Vr,kL);pY(Vr,fr);function iB(t){var e=t.name;hL(t)||(t.name=tpe(t)||e)}function tpe(t){var e=t.getRawData(),r=e.mapDimensionsAll("seriesName"),n=[];return G(r,function(i){var a=e.getDimensionInfo(i);a.displayName&&n.push(a.displayName)}),n.join(" ")}function rpe(t){return t.model.getRawData().count()}function npe(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),ipe}function ipe(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function aB(t,e){G(nm(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(r){t.wrapMethod(r,Zt(ape,e))})}function ape(t,e){var r=F6(t);return r&&r.setOutputEnd((e||this).count()),e}function F6(t){var e=(t.ecModel||{}).scheduler,r=e&&e.getPipeline(t.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(t.uid))}return n}}var _n=function(){function t(){this.group=new Vt,this.uid=Jm("viewComponent")}return t.prototype.init=function(e,r){},t.prototype.render=function(e,r,n,i){},t.prototype.dispose=function(e,r){},t.prototype.updateView=function(e,r,n,i){},t.prototype.updateLayout=function(e,r,n,i){},t.prototype.updateVisual=function(e,r,n,i){},t.prototype.toggleBlurSeries=function(e,r,n){},t.prototype.eachRendered=function(e){var r=this.group;r&&r.traverse(e)},t}();pL(_n);IT(_n);function n0(){var t=kr();return function(e){var r=t(e),n=e.pipelineContext,i=!!r.large,a=!!r.progressiveRender,o=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==o||a!==s)&&"reset"}}var $q=kr(),ope=n0(),Or=function(){function t(){this.group=new Vt,this.uid=Jm("viewChart"),this.renderTask=k1({plan:spe,reset:lpe}),this.renderTask.context={view:this}}return t.prototype.init=function(e,r){},t.prototype.render=function(e,r,n,i){},t.prototype.highlight=function(e,r,n,i){var a=e.getData(i&&i.dataType);a&&sB(a,i,"emphasis")},t.prototype.downplay=function(e,r,n,i){var a=e.getData(i&&i.dataType);a&&sB(a,i,"normal")},t.prototype.remove=function(e,r){this.group.removeAll()},t.prototype.dispose=function(e,r){},t.prototype.updateView=function(e,r,n,i){this.render(e,r,n,i)},t.prototype.updateLayout=function(e,r,n,i){this.render(e,r,n,i)},t.prototype.updateVisual=function(e,r,n,i){this.render(e,r,n,i)},t.prototype.eachRendered=function(e){Eh(this.group,e)},t.markUpdateMethod=function(e,r){$q(e).updateMethod=r},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function oB(t,e,r){t&&s_(t)&&(e==="emphasis"?kc:Fc)(t,r)}function sB(t,e,r){var n=wp(t,e),i=e&&e.highlightKey!=null?Wfe(e.highlightKey):null;n!=null?G(gn(n),function(a){oB(t.getItemGraphicEl(a),r,i)}):t.eachItemGraphicEl(function(a){oB(a,r,i)})}pL(Or);IT(Or);function spe(t){return ope(t.model)}function lpe(t){var e=t.model,r=t.ecModel,n=t.api,i=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=i&&$q(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,r,n,i),upe[l]}var upe={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},fw="\0__throttleOriginMethod",lB="\0__throttleRate",uB="\0__throttleType";function HL(t,e,r){var n,i=0,a=0,o=null,s,l,u,c;e=e||0;function f(){a=new Date().getTime(),o=null,t.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||e,g=c||r;c=null,s=n-(g?i:a)-v,clearTimeout(o),g?o=setTimeout(f,v):s>=0?f():o=setTimeout(f,-s),i=n};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(d){c=d},h}function i0(t,e,r,n){var i=t[e];if(i){var a=i[fw]||i,o=i[uB],s=i[lB];if(s!==r||o!==n){if(r==null||!n)return t[e]=a;i=t[e]=HL(a,r,n==="debounce"),i[fw]=a,i[uB]=n,i[lB]=r}return i}}function h_(t,e){var r=t[e];r&&r[fw]&&(r.clear&&r.clear(),t[e]=r[fw])}var cB=kr(),fB={itemStyle:Tp(JY,!0),lineStyle:Tp(ZY,!0)},cpe={lineStyle:"stroke",itemStyle:"fill"};function jq(t,e){var r=t.visualStyleMapper||fB[e];return r||(console.warn("Unknown style type '"+e+"'."),fB.itemStyle)}function Xq(t,e){var r=t.visualDrawType||cpe[e];return r||(console.warn("Unknown style type '"+e+"'."),"fill")}var fpe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var r=t.getData(),n=t.visualStyleAccessPath||"itemStyle",i=t.getModel(n),a=jq(t,n),o=a(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=Xq(t,n),u=o[l],c=Lt(u)?u:null,f=o.fill==="auto"||o.stroke==="auto";if(!o[l]||c||f){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[l]||(o[l]=h,r.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Lt(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||Lt(o.stroke)?h:o.stroke}if(r.setVisual("style",o),r.setVisual("drawType",l),!e.isSeriesFiltered(t)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=t.getDataParams(p),g=Ae({},o);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},my=new Br,hpe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var r=t.getData(),n=t.visualStyleAccessPath||"itemStyle",i=jq(t,n),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[n]){my.option=l[n];var u=i(my),c=o.ensureUniqueItemVisual(s,"style");Ae(c,u),my.option.decal&&(o.setItemVisual(s,"decal",my.option.decal),my.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},dpe={performRawSeries:!0,overallReset:function(t){var e=Tt();t.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,a=e.get(i);a||(a={},e.set(i,a)),cB(r).scope=a}}),t.eachSeries(function(r){if(!(r.isColorBySeries()||t.isSeriesFiltered(r))){var n=r.getRawData(),i={},a=r.getData(),o=cB(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=Xq(r,s);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=a.getItemVisual(c,"colorFromPalette");if(f){var h=a.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,o,p)}})}})}},vS=Math.PI;function ppe(t,e){e=e||{},At(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Vt,n=new Mr({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});r.add(n);var i=new Ar({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Mr({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});r.add(a);var o;return e.showSpinner&&(o=new UT({shape:{startAngle:-vS/2,endAngle:-vS/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:vS*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:vS*3/2}).delay(300).start("circularInOut"),r.add(o)),r.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(t.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),c=t.getHeight()/2;e.showSpinner&&o.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},r.resize(),r}var Kq=function(){function t(e,r,n,i){this._stageTaskMap=Tt(),this.ecInstance=e,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return t.prototype.restoreData=function(e,r){e.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,r){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),i=n.context,a=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>n.blockIndex,o=a?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,r){var n=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=n.progressiveEnabled&&r.incrementalPrepareRender&&a>=n.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=n.context={progressiveRender:o,modDataCount:l,large:s}},t.prototype.restorePipelines=function(e){var r=this,n=r._pipelineMap=Tt();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;n.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,r=this.api.getModel(),n=this.api;G(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";So(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,r,n),i.overallReset&&this._createOverallStageTask(i,a,r,n)},this)},t.prototype.prepareView=function(e,r,n,i){var a=e.renderTask,o=a.context;o.model=r,o.ecModel=n,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(r,a)},t.prototype.performDataProcessorTasks=function(e,r){this._performStageTasks(this._dataProcessorHandlers,e,r,{block:!0})},t.prototype.performVisualTasks=function(e,r,n){this._performStageTasks(this._visualHandlers,e,r,n)},t.prototype._performStageTasks=function(e,r,n,i){i=i||{};var a=!1,o=this;G(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=o._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),o.updatePayload(h,n);var v=o.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(a=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var x=o.getPerformArgs(g,i.block);x.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),o.updatePayload(g,n),g.perform(x)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},t.prototype.performSeriesTasks=function(e){var r;e.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var r=e.tail;do{if(r.__block){e.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},t.prototype.updatePayload=function(e,r){r!=="remain"&&(e.context.payload=r)},t.prototype._createSeriesStageTask=function(e,r,n,i){var a=this,o=r.seriesTaskMap,s=r.seriesTaskMap=Tt(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,o&&o.get(h)||k1({plan:_pe,reset:xpe,count:bpe}));d.context={model:f,ecModel:n,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(f,d)}},t.prototype._createOverallStageTask=function(e,r,n,i){var a=this,o=r.overallTask=r.overallTask||k1({reset:vpe});o.context={ecModel:n,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=Tt(),u=e.seriesType,c=e.getTargetSeries,f=!0,h=!1,d="";So(!e.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,G(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,k1({reset:gpe,onDirty:ype})));m.context={model:v,overallProgress:f},m.agent=o,m.__block=f,a._pipe(v,m)}h&&o.dirty()},t.prototype._pipe=function(e,r){var n=e.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},t.wrapStageHandler=function(e,r){return Lt(e)&&(e={overallReset:e,seriesType:wpe(e)}),e.uid=Jm("stageHandler"),r&&(e.visualType=r),e},t}();function vpe(t){t.overallReset(t.ecModel,t.api,t.payload)}function gpe(t){return t.overallProgress&&mpe}function mpe(){this.agent.dirty(),this.getDownstream().dirty()}function ype(){this.agent&&this.agent.dirty()}function _pe(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function xpe(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=gn(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?Oe(e,function(r,n){return Yq(n)}):Spe}var Spe=Yq(0);function Yq(t){return function(e,r){var n=r.data,i=r.resetDefines[t];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(n,a);else i&&i.progress&&i.progress(e,n)}}function bpe(t){return t.data.count()}function wpe(t){hw=null;try{t(d_,qq)}catch(e){}return hw}var d_={},qq={},hw;Zq(d_,FL);Zq(qq,Sq);d_.eachSeriesByType=d_.eachRawSeriesByType=function(t){hw=t};d_.eachComponent=function(t){t.mainType==="series"&&t.subType&&(hw=t.subType)};function Zq(t,e){for(var r in e.prototype)t[r]=pi}var hB=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Tpe={color:hB,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],hB]};var so="#B9B8CE",dB="#100C2A",gS=function(){return{axisLine:{lineStyle:{color:so}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},pB=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Jq={darkMode:!0,color:pB,backgroundColor:dB,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:so}},textStyle:{color:so},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:so}},dataZoom:{borderColor:"#71708A",textStyle:{color:so},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:so}},timeline:{lineStyle:{color:so},label:{color:so},controlStyle:{color:so,borderColor:so}},calendar:{itemStyle:{color:dB},dayLabel:{color:so},monthLabel:{color:so},yearLabel:{color:so}},timeAxis:gS(),logAxis:gS(),valueAxis:gS(),categoryAxis:gS(),line:{symbol:"circle"},graph:{color:pB},gauge:{title:{color:so},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:so},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Jq.categoryAxis.splitLine.show=!1;var Cpe=function(){function t(){}return t.prototype.normalizeQuery=function(e){var r={},n={},i={};if(ft(e)){var a=bu(e);r.mainType=a.main||null,r.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};G(e,function(l,u){for(var c=!1,f=0;f<o.length;f++){var h=o[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},t.prototype.filter=function(e,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,a=n.packedEvent,o=n.model,s=n.view;if(!o||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,o,"mainType")&&c(l,o,"subType")&&c(l,o,"index","componentIndex")&&c(l,o,"name")&&c(l,o,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,r.otherQuery,i,a));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),B6=["symbol","symbolSize","symbolRotate","symbolOffset"],vB=B6.concat(["symbolKeepAspect"]),Epe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var r=t.getData();if(t.legendIcon&&r.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var n={},i={},a=!1,o=0;o<B6.length;o++){var s=B6[o],l=t.get(s);Lt(l)?(a=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||t.defaultSymbol,r.setVisual(Ae({legendIcon:t.legendIcon||n.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},n)),e.isSeriesFiltered(t))return;var u=Er(i);function c(f,h){for(var d=t.getRawValue(h),p=t.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:a?c:null}}},Ape={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var r=t.getData();function n(i,a){for(var o=i.getItemModel(a),s=0;s<vB.length;s++){var l=vB[s],u=o.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function GL(t,e,r){switch(r){case"color":var n=t.getItemVisual(e,"style");return n[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,r)}}function g2(t,e){switch(e){case"color":var r=t.getVisual("style");return r[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function Qq(t,e,r,n){switch(r){case"color":var i=t.ensureUniqueItemVisual(e,"style");i[t.getVisual("drawType")]=n,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,r,n);break}}function eZ(t,e){function r(n,i){var a=[];return n.eachComponent({mainType:"series",subType:t,query:i},function(o){a.push(o.seriesIndex)}),a}G([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(n){e(n[0],function(i,a,o){i=Ae({},i),o.dispatchAction(Ae(i,{type:n[1],seriesIndex:r(a,i)}))})})}function Nv(t,e,r,n,i){var a=t+e;r.isSilent(a)||n.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=o.getData(),h=wp(f,i.fromActionPayload);r.trigger(a,{type:a,seriesId:o.id,name:De(h)?f.getName(h[0]):f.getName(h),selected:ft(l)?l:Ae({},l)})}})}function Mpe(t,e,r){t.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Nv("map","selectchanged",e,i,n),Nv("pie","selectchanged",e,i,n)):n.fromAction==="select"?(Nv("map","selected",e,i,n),Nv("pie","selected",e,i,n)):n.fromAction==="unselect"&&(Nv("map","unselected",e,i,n),Nv("pie","unselected",e,i,n))})}function Zd(t,e,r){for(var n;t&&!(e(t)&&(n=t,r));)t=t.__hostTarget||t.parent;return n}var Rpe=Math.round(Math.random()*9),Ppe=typeof Object.defineProperty=="function",Lpe=function(){function t(){this._id="__ec_inner_"+Rpe++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,r){var n=this._guard(e);return Ppe?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}(),Dpe=yr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx,n=e.cy,i=e.width/2,a=e.height/2;t.moveTo(r,n-a),t.lineTo(r+i,n+a),t.lineTo(r-i,n+a),t.closePath()}}),Ipe=yr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx,n=e.cy,i=e.width/2,a=e.height/2;t.moveTo(r,n-a),t.lineTo(r+i,n),t.lineTo(r,n+a),t.lineTo(r-i,n),t.closePath()}}),Npe=yr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.x,n=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=n-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,f=Math.sin(u),h=Math.cos(u),d=o*.6,p=o*.7;t.moveTo(r-c,l+s),t.arc(r,l,o,Math.PI-u,Math.PI*2+u),t.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),t.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),t.closePath()}}),Ope=yr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.height,n=e.width,i=e.x,a=e.y,o=n/3*2;t.moveTo(i,a),t.lineTo(i+o,a+r),t.lineTo(i,a+r/4*3),t.lineTo(i-o,a+r),t.lineTo(i,a),t.closePath()}}),kpe={line:ji,rect:Mr,roundRect:Mr,square:Mr,circle:Xc,diamond:Ipe,pin:Npe,arrow:Ope,triangle:Dpe},Fpe={line:function(t,e,r,n,i){i.x1=t,i.y1=e+n/2,i.x2=t+r,i.y2=e+n/2},rect:function(t,e,r,n,i){i.x=t,i.y=e,i.width=r,i.height=n},roundRect:function(t,e,r,n,i){i.x=t,i.y=e,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(t,e,r,n,i){var a=Math.min(r,n);i.x=t,i.y=e,i.width=a,i.height=a},circle:function(t,e,r,n,i){i.cx=t+r/2,i.cy=e+n/2,i.r=Math.min(r,n)/2},diamond:function(t,e,r,n,i){i.cx=t+r/2,i.cy=e+n/2,i.width=r,i.height=n},pin:function(t,e,r,n,i){i.x=t+r/2,i.y=e+n/2,i.width=r,i.height=n},arrow:function(t,e,r,n,i){i.x=t+r/2,i.y=e+n/2,i.width=r,i.height=n},triangle:function(t,e,r,n,i){i.cx=t+r/2,i.cy=e+n/2,i.width=r,i.height=n}},dw={};G(kpe,function(t,e){dw[e]=new t});var Bpe=yr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,r){var n=tw(t,e,r),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(t,e,r){var n=e.symbolType;if(n!=="none"){var i=dw[n];i||(n="rect",i=dw[n]),Fpe[n](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,r)}}});function zpe(t,e){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=t,r.fill=e||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=t:r.fill=t,this.markRedraw()}}function vi(t,e,r,n,i,a,o){var s=t.indexOf("empty")===0;s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=GY(t.slice(8),new sr(e,r,n,i),o?"center":"cover"):t.indexOf("path://")===0?l=VT(t.slice(7),{},new sr(e,r,n,i),o?"center":"cover"):l=new Bpe({shape:{symbolType:t,x:e,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=zpe,a&&l.setColor(a),l}function a0(t){return De(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function Hp(t,e){if(t!=null)return De(t)||(t=[t,t]),[Ze(t[0],e[0])||0,Ze(Jt(t[1],t[0]),e[1])||0]}function Jd(t){return isFinite(t)}function Upe(t,e,r){var n=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(n=n*r.width+r.x,i=i*r.width+r.x,a=a*r.height+r.y,o=o*r.height+r.y),n=Jd(n)?n:0,i=Jd(i)?i:1,a=Jd(a)?a:0,o=Jd(o)?o:0;var s=t.createLinearGradient(n,a,i,o);return s}function Vpe(t,e,r){var n=r.width,i=r.height,a=Math.min(n,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*n+r.x,s=s*i+r.y,l=l*a),o=Jd(o)?o:.5,s=Jd(s)?s:.5,l=l>=0&&Jd(l)?l:.5;var u=t.createRadialGradient(o,s,0,o,s,l);return u}function z6(t,e,r){for(var n=e.type==="radial"?Vpe(t,e,r):Upe(t,e,r),i=e.colorStops,a=0;a<i.length;a++)n.addColorStop(i[a].offset,i[a].color);return n}function Hpe(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!0;return!1}function mS(t){return parseInt(t,10)}function Ig(t,e,r){var n=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(t);return(t[i]||mS(s[n])||mS(t.style[n]))-(mS(s[a])||0)-(mS(s[o])||0)|0}function Gpe(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:Ur(t)?[t]:De(t)?t:null}function WL(t){var e=t.style,r=e.lineDash&&e.lineWidth>0&&Gpe(e.lineDash,e.lineWidth),n=e.lineDashOffset;if(r){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(r=Oe(r,function(a){return a/i}),n/=i)}return[r,n]}var Wpe=new Nu(!0);function pw(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function gB(t){return typeof t=="string"&&t!=="none"}function vw(t){var e=t.fill;return e!=null&&e!=="none"}function mB(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var r=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=r}else t.fill()}function yB(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var r=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=r}else t.stroke()}function U6(t,e,r){var n=vL(e.image,e.__image,r);if(NT(n)){var i=t.createPattern(n,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*o3),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function $pe(t,e,r,n){var i,a=pw(r),o=vw(r),s=r.strokePercent,l=s<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||Wpe,f=e.__dirty;if(!n){var h=r.fill,d=r.stroke,p=o&&!!h.colorStops,v=a&&!!d.colorStops,g=o&&!!h.image,m=a&&!!d.image,x=void 0,S=void 0,b=void 0,T=void 0,w=void 0;(p||v)&&(w=e.getBoundingRect()),p&&(x=f?z6(t,h,w):e.__canvasFillGradient,e.__canvasFillGradient=x),v&&(S=f?z6(t,d,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),g&&(b=f||!e.__canvasFillPattern?U6(t,h,e):e.__canvasFillPattern,e.__canvasFillPattern=b),m&&(T=f||!e.__canvasStrokePattern?U6(t,d,e):e.__canvasStrokePattern,e.__canvasStrokePattern=b),p?t.fillStyle=x:g&&(b?t.fillStyle=b:o=!1),v?t.strokeStyle=S:m&&(T?t.strokeStyle=T:a=!1)}var E=e.getGlobalScale();c.setScale(E[0],E[1],e.segmentIgnoreThreshold);var M,A;t.setLineDash&&r.lineDash&&(i=WL(e),M=i[0],A=i[1]);var R=!0;(u||f&Tg)&&(c.setDPR(t.dpr),l?c.setContext(null):(c.setContext(t),R=!1),c.reset(),e.buildPath(c,e.shape,n),c.toStatic(),e.pathUpdated()),R&&c.rebuildPath(t,l?s:1),M&&(t.setLineDash(M),t.lineDashOffset=A),n||(r.strokeFirst?(a&&yB(t,r),o&&mB(t,r)):(o&&mB(t,r),a&&yB(t,r))),M&&t.setLineDash([])}function jpe(t,e,r){var n=e.__image=vL(r.image,e.__image,e,e.onload);if(!(!n||!NT(n))){var i=r.x||0,a=r.y||0,o=e.getWidth(),s=e.getHeight(),l=n.width/n.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;t.drawImage(n,u,c,r.sWidth,r.sHeight,i,a,o,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=o-u,h=s-c;t.drawImage(n,u,c,f,h,i,a,o,s)}else t.drawImage(n,i,a,o,s)}}function Xpe(t,e,r){var n,i=r.text;if(i!=null&&(i+=""),i){t.font=r.font||yh,t.textAlign=r.textAlign,t.textBaseline=r.textBaseline;var a=void 0,o=void 0;t.setLineDash&&r.lineDash&&(n=WL(e),a=n[0],o=n[1]),a&&(t.setLineDash(a),t.lineDashOffset=o),r.strokeFirst?(pw(r)&&t.strokeText(i,r.x,r.y),vw(r)&&t.fillText(i,r.x,r.y)):(vw(r)&&t.fillText(i,r.x,r.y),pw(r)&&t.strokeText(i,r.x,r.y)),a&&t.setLineDash([])}}var _B=["shadowBlur","shadowOffsetX","shadowOffsetY"],xB=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function tZ(t,e,r,n,i){var a=!1;if(!n&&(r=r||{},e===r))return!1;if(n||e.opacity!==r.opacity){jo(t,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(o)?cp.opacity:o}(n||e.blend!==r.blend)&&(a||(jo(t,i),a=!0),t.globalCompositeOperation=e.blend||cp.blend);for(var s=0;s<_B.length;s++){var l=_B[s];(n||e[l]!==r[l])&&(a||(jo(t,i),a=!0),t[l]=t.dpr*(e[l]||0))}return(n||e.shadowColor!==r.shadowColor)&&(a||(jo(t,i),a=!0),t.shadowColor=e.shadowColor||cp.shadowColor),a}function SB(t,e,r,n,i){var a=p_(e,i.inHover),o=n?null:r&&p_(r,i.inHover)||{};if(a===o)return!1;var s=tZ(t,a,o,n,i);if((n||a.fill!==o.fill)&&(s||(jo(t,i),s=!0),gB(a.fill)&&(t.fillStyle=a.fill)),(n||a.stroke!==o.stroke)&&(s||(jo(t,i),s=!0),gB(a.stroke)&&(t.strokeStyle=a.stroke)),(n||a.opacity!==o.opacity)&&(s||(jo(t,i),s=!0),t.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==u&&(s||(jo(t,i),s=!0),t.lineWidth=u)}for(var c=0;c<xB.length;c++){var f=xB[c],h=f[0];(n||a[h]!==o[h])&&(s||(jo(t,i),s=!0),t[h]=a[h]||f[1])}return s}function Kpe(t,e,r,n,i){return tZ(t,p_(e,i.inHover),r&&p_(r,i.inHover),n,i)}function rZ(t,e){var r=e.transform,n=t.dpr||1;r?t.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):t.setTransform(n,0,0,n,0,0)}function Ype(t,e,r){for(var n=!1,i=0;i<t.length;i++){var a=t[i];n=n||a.isZeroArea(),rZ(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}r.allClipped=n}function qpe(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var bB=1,wB=2,TB=3,CB=4;function Zpe(t){var e=vw(t),r=pw(t);return!(t.lineDash||!(+e^+r)||e&&typeof t.fill!="string"||r&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function jo(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function p_(t,e){return e&&t.__hoverStyle||t.style}function QT(t,e){Qd(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Qd(t,e,r,n){var i=e.transform;if(!e.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){e.__dirty&=~ds,e.__isRendered=!1;return}var a=e.__clipPaths,o=r.prevElClipPaths,s=!1,l=!1;if((!o||Hpe(a,o))&&(o&&o.length&&(jo(t,r),t.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(jo(t,r),t.save(),Ype(a,t,r),s=!0),r.prevElClipPaths=a),r.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=e instanceof yr&&e.autoBatch&&Zpe(e.style);s||qpe(i,u.transform)?(jo(t,r),rZ(t,e)):c||jo(t,r);var f=p_(e,r.inHover);e instanceof yr?(r.lastDrawType!==bB&&(l=!0,r.lastDrawType=bB),SB(t,e,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&t.beginPath(),$pe(t,e,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):e instanceof am?(r.lastDrawType!==TB&&(l=!0,r.lastDrawType=TB),SB(t,e,u,l,r),Xpe(t,e,f)):e instanceof aa?(r.lastDrawType!==wB&&(l=!0,r.lastDrawType=wB),Kpe(t,e,u,l,r),jpe(t,e,f)):e.getTemporalDisplayables&&(r.lastDrawType!==CB&&(l=!0,r.lastDrawType=CB),Jpe(t,e,r)),c&&n&&jo(t,r),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),r.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Jpe(t,e,r){var n=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},o,s;for(o=e.getCursor(),s=n.length;o<s;o++){var l=n[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Qd(t,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Qd(t,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var mA=new Lpe,EB=new $m(100),AB=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function lm(t,e){if(t==="none")return null;var r=e.getDevicePixelRatio(),n=e.getZr(),i=n.painter.type==="svg";t.dirty&&mA.delete(t);var a=mA.get(t);if(a)return a;var o=At(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/r,mA.set(t,s),t.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<AB.length;++h){var d=o[AB[h]];if(d!=null&&!De(d)&&!ft(d)&&!Ur(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=EB.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=iZ(o.dashArrayX),m=Qpe(o.dashArrayY),x=nZ(o.symbol),S=eve(g),b=aZ(m),T=!i&&_h.createCanvas(),w=i&&{tag:"g",attrs:{},key:"dcl",children:[]},E=A(),M;T&&(T.width=E.width*r,T.height=E.height*r,M=T.getContext("2d")),R(),f&&EB.put(p,T||w),u.image=T,u.svgElement=w,u.svgWidth=E.width,u.svgHeight=E.height;function A(){for(var L=1,I=0,N=S.length;I<N;++I)L=Wk(L,S[I]);for(var k=1,I=0,N=x.length;I<N;++I)k=Wk(k,x[I].length);L*=k;var z=b*S.length*x.length;return{width:Math.max(1,Math.min(L,o.maxTileWidth)),height:Math.max(1,Math.min(z,o.maxTileHeight))}}function R(){M&&(M.clearRect(0,0,T.width,T.height),o.backgroundColor&&(M.fillStyle=o.backgroundColor,M.fillRect(0,0,T.width,T.height)));for(var L=0,I=0;I<m.length;++I)L+=m[I];if(L<=0)return;for(var N=-b,k=0,z=0,B=0;N<E.height;){if(k%2===0){for(var V=z/2%x.length,F=0,$=0,W=0;F<E.width*2;){for(var H=0,I=0;I<g[B].length;++I)H+=g[B][I];if(H<=0)break;if($%2===0){var X=(1-o.symbolSize)*.5,te=F+g[B][$]*X,Y=N+m[k]*X,ee=g[B][$]*o.symbolSize,se=m[k]*o.symbolSize,ne=W/2%x[V].length;le(te,Y,ee,se,x[V][ne])}F+=g[B][$],++W,++$,$===g[B].length&&($=0)}++B,B===g.length&&(B=0)}N+=m[k],++z,++k,k===m.length&&(k=0)}function le(pe,Se,_e,Le,Be){var Q=i?1:r,tt=vi(Be,pe*Q,Se*Q,_e*Q,Le*Q,o.color,o.symbolKeepAspect);if(i){var je=n.painter.renderOneToVNode(tt);je&&w.children.push(je)}else QT(M,tt)}}}}function nZ(t){if(!t||t.length===0)return[["rect"]];if(ft(t))return[[t]];for(var e=!0,r=0;r<t.length;++r)if(!ft(t[r])){e=!1;break}if(e)return nZ([t]);for(var n=[],r=0;r<t.length;++r)ft(t[r])?n.push([t[r]]):n.push(t[r]);return n}function iZ(t){if(!t||t.length===0)return[[0,0]];if(Ur(t)){var e=Math.ceil(t);return[[e,e]]}for(var r=!0,n=0;n<t.length;++n)if(!Ur(t[n])){r=!1;break}if(r)return iZ([t]);for(var i=[],n=0;n<t.length;++n)if(Ur(t[n])){var e=Math.ceil(t[n]);i.push([e,e])}else{var e=Oe(t[n],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function Qpe(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(Ur(t)){var e=Math.ceil(t);return[e,e]}var r=Oe(t,function(n){return Math.ceil(n)});return t.length%2?r.concat(r):r}function eve(t){return Oe(t,function(e){return aZ(e)})}function aZ(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return t.length%2===1?e*2:e}function tve(t,e){t.eachRawSeries(function(r){if(!t.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(o){var s=n.getItemVisual(o,"decal");if(s){var l=n.ensureUniqueItemVisual(o,"style");l.decal=lm(s,e)}});var i=n.getVisual("decal");if(i){var a=n.getVisual("style");a.decal=lm(i,e)}}})}var Al=new al,oZ={};function rve(t,e){oZ[t]=e}function sZ(t){return oZ[t]}var nve=1,ive=800,ave=900,ove=1e3,sve=2e3,lve=5e3,lZ=1e3,uve=1100,$L=2e3,uZ=3e3,cve=4e3,e4=4500,fve=4600,hve=5e3,dve=6e3,cZ=7e3,pve={PROCESSOR:{FILTER:ove,SERIES_FILTER:ive,STATISTIC:lve},VISUAL:{LAYOUT:lZ,PROGRESSIVE_LAYOUT:uve,GLOBAL:$L,CHART:uZ,POST_CHART_LAYOUT:fve,COMPONENT:cve,BRUSH:hve,CHART_ITEM:e4,ARIA:dve,DECAL:cZ}},Ga="__flagInMainProcess",zo="__pendingUpdate",yA="__needsUpdateStatus",MB=/^[a-zA-Z0-9_]+$/,_A="__connectUpdateStatus",RB=0,vve=1,gve=2;function fZ(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(this.isDisposed()){this.id;return}return dZ(this,t,e)}}function hZ(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return dZ(this,t,e)}}function dZ(t,e,r){return r[0]=r[0]&&r[0].toLowerCase(),al.prototype[e].apply(t,r)}var pZ=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(al),vZ=pZ.prototype;vZ.on=hZ("on");vZ.off=hZ("off");var Ov,xA,yS,wf,SA,bA,wA,yy,_y,PB,LB,TA,DB,_S,IB,gZ,Ms,NB,mZ=function(t){he(e,t);function e(r,n,i){var a=t.call(this,new Cpe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},ft(n)&&(n=yZ[n]),a._dom=r;var o="canvas",s="auto",l=!1;i.ssr&&pce(function(h){var d=Ht(h),p=d.dataIndex;if(p!=null){var v=Tt();return v.set("series_index",d.seriesIndex),v.set("data_index",p),d.ssrType&&v.set("ssr_type",d.ssrType),v}});var u=a._zr=v6(r,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Jt(i.useDirtyRect,l),useCoarsePointer:Jt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=HL(pt(u.flush,u),17),n=Ft(n),n&&wq(n,!0),a._theme=n,a._locale=Fhe(i.locale||QY),a._coordSysMgr=new r0;var c=a._api=IB(a);function f(h,d){return h.__prio-d.__prio}return u3(mw,f),u3(V6,f),a._scheduler=new Kq(a,c,V6,mw),a._messageCenter=new pZ,a._initEvents(),a.resize=pt(a.resize,a),u.animation.on("frame",a._onframe,a),PB(u,a),LB(u,a),K3(a),a}return e.prototype._onframe=function(){if(!this._disposed){NB(this);var r=this._scheduler;if(this[zo]){var n=this[zo].silent;this[Ga]=!0;try{Ov(this),wf.update.call(this,null,this[zo].updateParams)}catch(l){throw this[Ga]=!1,this[zo]=null,l}this._zr.flush(),this[Ga]=!1,this[zo]=null,yy.call(this,n),_y.call(this,n)}else if(r.unfinished){var i=nve,a=this._model,o=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),bA(this,a),r.performVisualTasks(a),_S(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(r,n,i){if(!this[Ga]){if(this._disposed){this.id;return}var a,o,s;if(Nt(n)&&(i=n.lazyUpdate,a=n.silent,o=n.replaceMerge,s=n.transition,n=n.notMerge),this[Ga]=!0,!this._model||n){var l=new lde(this._api),u=this._theme,c=this._model=new FL;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:o},H6);var f={seriesTransition:s,optionChanged:!0};if(i)this[zo]={silent:a,updateParams:f},this[Ga]=!1,this.getZr().wakeUp();else{try{Ov(this),wf.update.call(this,null,f)}catch(h){throw this[zo]=null,this[Ga]=!1,h}this._ssr||this._zr.flush(),this[zo]=null,this[Ga]=!1,yy.call(this,a),_y.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||br.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},e.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},e.prototype.getSvgDataURL=function(){if(br.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return G(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},e.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,a=[],o=this;G(n,function(l){i.eachComponent({mainType:l},function(u){var c=o._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return G(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(OB[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();G(B1,function(S,b){if(S.group===i){var T=n?S.getZr().painter.getSvgDom().innerHTML:S.renderToCanvas(Ft(r)),w=S.getDom().getBoundingClientRect();l=a(w.left,l),u=a(w.top,u),c=o(w.right,c),f=o(w.bottom,f),h.push({dom:T,left:w.left,top:w.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=_h.createCanvas(),m=v6(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var x="";return G(h,function(S){var b=S.left-l,T=S.top-u;x+='<g transform="translate('+b+","+T+')">'+S.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=x,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Mr({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),G(h,function(S){var b=new aa({style:{x:S.left*d-l,y:S.top*d-u,image:S.dom}});m.add(b)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},e.prototype.convertToPixel=function(r,n){return SA(this,"convertToPixel",r,n)},e.prototype.convertFromPixel=function(r,n){return SA(this,"convertFromPixel",r,n)},e.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,a,o=L1(i,r);return G(o,function(s,l){l.indexOf("Models")>=0&&G(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(a=a||f.containPoint(n,u))}},this)},this),!!a},e.prototype.getVisual=function(r,n){var i=this._model,a=L1(i,r,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?GL(s,l,n):g2(s,n)},e.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},e.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},e.prototype._initEvents=function(){var r=this;G(mve,function(n){var i=function(a){var o=r.getModel(),s=a.target,l,u=n==="globalout";if(u?l={}:s&&Zd(s,function(p){var v=Ht(p);if(v&&v.dataIndex!=null){var g=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=Ae({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&o.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=a,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),G(F1,function(n,i){r._messageCenter.on(i,function(a){this.trigger(i,a)},r)}),G(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Mpe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&fY(this.getDom(),XL,"");var n=this,i=n._api,a=n._model;G(n._componentsViews,function(o){o.dispose(a,i)}),G(n._chartsViews,function(o){o.dispose(a,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete B1[n.id]},e.prototype.resize=function(r){if(!this[Ga]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),a=r&&r.silent;this[zo]&&(a==null&&(a=this[zo].silent),i=!0,this[zo]=null),this[Ga]=!0;try{i&&Ov(this),wf.update.call(this,{type:"resize",animation:Ae({duration:0},r&&r.animation)})}catch(o){throw this[Ga]=!1,o}this[Ga]=!1,yy.call(this,a),_y.call(this,a)}}},e.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Nt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!G6[r]){var i=G6[r](this._api,n),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(r){var n=Ae({},r);return n.type=F1[r.type],n},e.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Nt(n)||(n={silent:!!n}),!!gw[r.type]&&this._model){if(this[Ga]){this._pendingActions.push(r);return}var i=n.silent;wA.call(this,r,i);var a=n.flush;a?this._zr.flush():a!==!1&&br.browser.weChat&&this._throttledZrFlush(),yy.call(this,i),_y.call(this,i)}},e.prototype.updateLabelLayout=function(){Al.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(n);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Ov=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),xA(f,!0),xA(f,!1),h.plan()},xA=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,x=f._api,S=0;S<v.length;S++)v[S].__alive=!1;h?d.eachComponent(function(w,E){w!=="series"&&b(E)}):d.eachSeries(b);function b(w){var E=w.__requireNewView;w.__requireNewView=!1;var M="_ec_"+w.id+"_"+w.type,A=!E&&g[M];if(!A){var R=bu(w.type),L=h?_n.getClass(R.main,R.sub):Or.getClass(R.sub);A=new L,A.init(d,x),g[M]=A,v.push(A),m.add(A.group)}w.__viewId=A.__id=M,A.__alive=!0,A.__model=w,A.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!h&&p.prepareView(A,w,d,x)}for(var S=0;S<v.length;){var T=v[S];T.__alive?S++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,x),v.splice(S,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},yS=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){G([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var x={mainType:p,query:m};v&&(x.subType=v);var S=d.excludeSeriesId,b;S!=null&&(b=Tt(),G(gn(S),function(w){var E=Fi(w,null);E!=null&&b.set(E,!0)})),g&&g.eachComponent(x,function(w){var E=b&&b.get(w.id)!=null;if(!E)if(gF(d))if(w instanceof Vr)d.type===fp&&!d.notBlur&&!w.get(["emphasis","disabled"])&&kfe(w,d,f._api);else{var M=SL(w.mainType,w.componentIndex,d.name,f._api),A=M.focusSelf,R=M.dispatchers;d.type===fp&&A&&!d.notBlur&&w6(w.mainType,w.componentIndex,f._api),R&&G(R,function(L){d.type===fp?kc(L):Fc(L)})}else C6(d)&&w instanceof Vr&&(zfe(w,d,f._api),pF(w),Ms(f))},f),g&&g.eachComponent(x,function(w){var E=b&&b.get(w.id)!=null;E||T(f[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},f);function T(w){w&&w.__alive&&w[h]&&w[h](w.__model,g,f._api,d)}},wf={prepareAndUpdate:function(f){Ov(this),wf.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),bA(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),TA(this,d,p,f,h);var x=d.get("backgroundColor")||"transparent",S=d.get("darkMode");v.setBackgroundColor(x),S!=null&&S!=="auto"&&v.setDarkMode(S),Al.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,x){if(m!=="series"){var S=h.getViewOfComponentModel(x);if(S&&S.__alive)if(S.updateTransform){var b=S.updateTransform(x,d,p,f);b&&b.update&&v.push(S)}else v.push(S)}});var g=Tt();d.eachSeries(function(m){var x=h._chartsMap[m.__viewId];if(x.updateTransform){var S=x.updateTransform(m,d,p,f);S&&S.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),_S(this,d,p,f,{},g),Al.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;h&&(h.setUpdatePayload(f),Or.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),TA(this,h,this._api,f,{}),Al.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;d&&(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Or.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),Al.trigger("afterupdate",d,this._api))},updateLayout:function(f){wf.update.call(this,f)}},SA=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,x=L1(v,d),S=0;S<g.length;S++){var b=g[S];if(b[h]&&(m=b[h](v,x,p))!=null)return m}},bA=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},wA=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=gw[v],x=m.actionInfo,S=(x.update||"update").split(":"),b=S.pop(),T=S[0]!=null&&bu(S[0]);this[Ga]=!0;var w=[f],E=!1;f.batch&&(E=!0,w=Oe(f.batch,function(k){return k=At(Ae({},k),f),k.batch=null,k}));var M=[],A,R=C6(f),L=gF(f);if(L&&DY(this._api),G(w,function(k){if(A=m.action(k,d._model,d._api),A=A||Ae({},k),A.type=x.event||A.type,M.push(A),L){var z=dL(f),B=z.queryOptionMap,V=z.mainTypeSpecified,F=V?B.keys()[0]:"series";yS(d,b,k,F),Ms(d)}else R?(yS(d,b,k,"series"),Ms(d)):T&&yS(d,b,k,T.main,T.sub)}),b!=="none"&&!L&&!R&&!T)try{this[zo]?(Ov(this),wf.update.call(this,f),this[zo]=null):wf[b].call(this,f)}catch(k){throw this[Ga]=!1,k}if(E?A={type:x.event||v,escapeConnect:g,batch:M}:A=M[0],this[Ga]=!1,!h){var I=this._messageCenter;if(I.trigger(A.type,A),R){var N={type:"selectchanged",escapeConnect:g,selected:Ufe(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};I.trigger(N.type,N)}}},yy=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();wA.call(this,d,f)}},_y=function(f){!f&&this.trigger("updated")},PB=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[zo]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},LB=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Zd(p,s_);v&&(Ffe(v,d,h._api),Ms(h))}).on("mouseout",function(d){var p=d.target,v=Zd(p,s_);v&&(Bfe(v,d,h._api),Ms(h))}).on("click",function(d){var p=d.target,v=Zd(p,function(x){return Ht(x).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=Ht(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(x,S){var b=S.get("zlevel")||0,T=S.get("z")||0,w=S.getZLevelKey();p=p||!!w,(x==="series"?d:h).push({zlevel:b,z:T,idx:S.componentIndex,type:x,key:w})}),p){var v=h.concat(d),g,m;u3(v,function(x,S){return x.zlevel===S.zlevel?x.z-S.z:x.zlevel-S.zlevel}),G(v,function(x){var S=f.getComponent(x.type,x.idx),b=x.zlevel,T=x.key;g!=null&&(b=Math.max(g,b)),T?(b===g&&T!==m&&b++,m=T):m&&(b===g&&b++,m=""),g=b,S.setZLevel(b)})}}TA=function(f,h,d,p,v){n(h),DB(f,h,d,p,v),G(f._chartsViews,function(g){g.__alive=!1}),_S(f,h,d,p,v),G(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},DB=function(f,h,d,p,v,g){G(g||f._componentsViews,function(m){var x=m.__model;u(x,m),m.render(x,h,d,p),s(x,m),c(x,m)})},_S=function(f,h,d,p,v,g){var m=f._scheduler;v=Ae(v||{},{updatedSeries:h.getSeries()}),Al.trigger("series:beforeupdate",h,d,v);var x=!1;h.eachSeries(function(S){var b=f._chartsMap[S.__viewId];b.__alive=!0;var T=b.renderTask;m.updatePayload(T,p),u(S,b),g&&g.get(S.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(x=!0),b.group.silent=!!S.get("silent"),o(S,b),pF(S)}),m.unfinished=x||m.unfinished,Al.trigger("series:layoutlabels",h,d,v),Al.trigger("series:transition",h,d,v),h.eachSeries(function(S){var b=f._chartsMap[S.__viewId];s(S,b),c(S,b)}),a(f,h),Al.trigger("series:afterupdate",h,d,v)},Ms=function(f){f[yA]=!0,f.getZr().wakeUp()},NB=function(f){f[yA]&&(f.getZr().storage.traverse(function(h){Gg(h)||i(h)}),f[yA]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===FT&&f.states.emphasis?h.push("emphasis"):f.hoverState===f2&&f.states.blur&&h.push("blur"),f.useStates(h)}function a(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!br.node&&!br.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(x){x.states.emphasis&&(x.states.emphasis.hoverLayer=!0)})}})}function o(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var x=f.childrenRef(),S=0;S<x.length;S++)p=Math.max(l(x[S],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var b=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(b&&b.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Gg(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Gg(m))return;if(m instanceof yr&&$fe(m),m.__dirty){var x=m.prevStates;x&&m.useStates(x)}if(p){m.stateTransition=g;var S=m.getTextContent(),b=m.getTextGuideLine();S&&(S.stateTransition=g),b&&(b.stateTransition=g)}m.__dirty&&i(m)}})}IB=function(f){return new(function(h){he(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){kc(p,v),Ms(f)},d.prototype.leaveEmphasis=function(p,v){Fc(p,v),Ms(f)},d.prototype.enterBlur=function(p){MY(p),Ms(f)},d.prototype.leaveBlur=function(p){xL(p),Ms(f)},d.prototype.enterSelect=function(p){RY(p),Ms(f)},d.prototype.leaveSelect=function(p){PY(p),Ms(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(Sq))(f)},gZ=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[_A]=p}}G(F1,function(d,p){f._messageCenter.on(p,function(v){if(OB[f.group]&&f[_A]!==RB){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];G(B1,function(x){x!==f&&x.group===f.group&&m.push(x)}),h(m,RB),G(m,function(x){x[_A]!==vve&&x.dispatchAction(g)}),h(m,gve)}})})}}(),e}(al),jL=mZ.prototype;jL.on=fZ("on");jL.off=fZ("off");jL.one=function(t,e,r){var n=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),n.off(t,i)}this.on.call(this,t,i,r)};var mve=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],gw={},F1={},V6=[],H6=[],mw=[],yZ={},G6={},B1={},OB={},yve=+new Date-0,XL="_echarts_instance_";function Gp(t,e,r){var n=!(r&&r.ssr);if(n){var i=_ve(t);if(i)return i}var a=new mZ(t,e,r);return a.id="ec_"+yve++,B1[a.id]=a,n&&fY(t,XL,a.id),gZ(a),Al.trigger("afterinit",a),a}function _ve(t){return B1[Ice(t,XL)]}function _Z(t,e){yZ[t]=e}function KL(t){hr(H6,t)<0&&H6.push(t)}function xZ(t,e){qL(V6,t,e,sve)}function SZ(t){YL("afterinit",t)}function bZ(t){YL("afterupdate",t)}function YL(t,e){Al.on(t,e)}function Uu(t,e,r){Lt(e)&&(r=e,e="");var n=Nt(t)?t.type:[t,t={event:e}][0];t.event=(t.event||n).toLowerCase(),e=t.event,!F1[e]&&(So(MB.test(n)&&MB.test(e)),gw[n]||(gw[n]={action:r,actionInfo:t}),F1[e]=n)}function xve(t,e){r0.register(t,e)}function wZ(t){var e=r0.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function Sve(t,e){qL(mw,t,e,lZ,"layout")}function Wp(t,e){qL(mw,t,e,uZ,"visual")}var kB=[];function qL(t,e,r,n,i){if((Lt(e)||Nt(e))&&(r=e,e=n),!(hr(kB,r)>=0)){kB.push(r);var a=Kq.wrapStageHandler(r,i);a.__prio=e,a.__raw=r,t.push(a)}}function TZ(t,e){G6[t]=e}function bve(t,e,r){var n=sZ("registerMap");n&&n(t,e,r)}function W6(t){var e=sZ("getMap");return e&&e(t)}var wve=Ude;Wp($L,fpe);Wp(e4,hpe);Wp(e4,dpe);Wp($L,Epe);Wp(e4,Ape);Wp(cZ,tve);KL(wq);xZ(ave,xde);TZ("default",ppe);Uu({type:fp,event:fp,update:fp},pi);Uu({type:p3,event:p3,update:p3},pi);Uu({type:D1,event:D1,update:D1},pi);Uu({type:v3,event:v3,update:v3},pi);Uu({type:I1,event:I1,update:I1},pi);_Z("light",Tpe);_Z("dark",Jq);function xy(t){return t==null?0:t.length||1}function FB(t){return t}var Bc=function(){function t(e,r,n,i,a,o){this._old=e,this._new=r,this._oldKeyGetter=n||FB,this._newKeyGetter=i||FB,this.context=a,this._diffModeMultiple=o==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,r=this._new,n={},i=new Array(e.length),a=new Array(r.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=n[s],u=xy(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,o)}else u===1?(n[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,n)},t.prototype._executeMultiple=function(){var e=this._old,r=this._new,n={},i={},a=[],o=[];this._initIndexMap(e,n,a,"_oldKeyGetter"),this._initIndexMap(r,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=n[l],c=i[l],f=xy(u),h=xy(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},t.prototype._performRestAdd=function(e,r){for(var n=0;n<e.length;n++){var i=e[n],a=r[i],o=xy(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);r[i]=null}},t.prototype._initIndexMap=function(e,r,n,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(n[o]=s),!!r){var l=r[s],u=xy(l);u===0?(r[s]=o,a&&n.push(s)):u===1?r[s]=[l,o]:l.push(o)}}},t}(),Tve=function(){function t(e,r){this._encode=e,this._schema=r}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function Cve(t,e){var r={},n=r.encode={},i=Tt(),a=[],o=[],s={};G(t.dimensions,function(h){var d=t.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;CA(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),Eve(d.type)&&(a[0]=h),CA(s,p)[v]=t.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(h)}pq.each(function(g,m){var x=CA(n,m),S=d.otherDims[m];S!=null&&S!==!1&&(x[S]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Oe(l,function(h){return t.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(a=c.slice());var f=n.tooltip;return f&&f.length?o=f.slice():o.length||(o=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=o,r.userOutput=new Tve(s,e),r}function CA(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function yw(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function Eve(t){return!(t==="ordinal"||t==="time")}var x3=function(){function t(e){this.otherDims={},e!=null&&Ae(this,e)}return t}(),Ave=kr(),Mve={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},CZ=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=MZ(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return Jt(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var r=this.source.dimensionsDefine;if(r)return r[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,r=Cq(this.source),n=!RZ(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===o)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(l=r?h.name:null,u=h.type)}a.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Mve[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:p}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,a=this.dimensions[n];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(i=a.name),n++;else{var o=this.getSourceDimension(r);o&&(i=o.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function EZ(t){return t instanceof CZ}function AZ(t){for(var e=Tt(),r=0;r<(t||[]).length;r++){var n=t[r],i=Nt(n)?n.name:n;i!=null&&e.get(i)==null&&e.set(i,r)}return e}function MZ(t){var e=Ave(t);return e.dimNameMap||(e.dimNameMap=AZ(t.dimensionsDefine))}function RZ(t){return t>30}var Sy=Nt,Tf=Oe,Rve=typeof Int32Array=="undefined"?Array:Int32Array,Pve="e\0\0",BB=-1,Lve=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Dve=["_approximateExtent"],zB,xS,by,wy,EA,SS,AA,Kn=function(){function t(e,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;EZ(e)?(n=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,n=e),n=n||["x","y"];for(var a={},o=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=ft(f)?new x3({name:f}):f instanceof x3?f:new x3(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),a[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=Tt();G(o,function(g){v.set(a[g].storeDimIndex,g)})}}return t.prototype.getDimension=function(e){var r=this._recognizeDimIndex(e);if(r==null)return e;if(r=e,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var r=this._recognizeDimIndex(e);if(r!=null)return r;if(e==null)return-1;var n=this._getDimInfo(e);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(Ur(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var r=this.getDimensionIndex(e);return r},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var r=this._dimInfos;this._getDimInfo=e?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[e];var i=n.encode[e];return i?i[r]:null},t.prototype.mapDimensionsAll=function(e){var r=this._dimSummary,n=r.encode[e];return(n||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,r,n){var i=this,a;if(e instanceof N6&&(a=e),!a){var o=this.dimensions,s=BL(e)||Ya(e)?new Eq(e,o.length):e;a=new N6;var l=Tf(o,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(s,l,n)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Cve(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var r=this._store.appendData(e);this._doInit(r[0],r[1])},t.prototype.appendValues=function(e,r){var n=this._store.appendValues(e,r.length),i=n.start,a=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=r[l],o&&AA(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==hh&&!e.fillStorage},t.prototype._doInit=function(e,r){if(!(e>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===ol;if(l&&!i.pure)for(var u=[],c=e;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&xce(f)&&(this.hasItemOption=!0),f){var h=f.name;a[c]==null&&h!=null&&(a[c]=Fi(h,null));var d=f.id;o[c]==null&&d!=null&&(o[c]=Fi(d,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<r;c++)AA(this,c);zB(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,r){r=this.getDimension(r),this._approximateExtent[r]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,r){Sy(e)?Ae(this._calculationInfo,e):this._calculationInfo[e]=r},t.prototype.getName=function(e){var r=this.getRawIndex(e),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=by(this,this._nameDimIdx,r)),n==null&&(n=""),n},t.prototype._getCategory=function(e,r){var n=this._store.get(e,r),i=this._store.getOrdinalMeta(e);return i?i.categories[n]:n},t.prototype.getId=function(e){return xS(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,r){var n=this._store,i=this._dimInfos[e];if(i)return n.get(i.storeDimIndex,r)},t.prototype.getByRawIndex=function(e,r){var n=this._store,i=this._dimInfos[e];if(i)return n.getByRawIndex(i.storeDimIndex,r)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,r){var n=this,i=this._store;return De(e)?i.getValues(Tf(e,function(a){return n._getStoreDimIndex(a)}),r):i.getValues(e)},t.prototype.hasValue=function(e){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===e)return r;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,r){var n=e&&this._invertedIndicesMap[e],i=n[r];return i==null||isNaN(i)?BB:i},t.prototype.indicesOfNearest=function(e,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(e),r,n)},t.prototype.each=function(e,r,n){Lt(e)&&(n=r,r=e,e=[]);var i=n||this,a=Tf(wy(e),this._getStoreDimIndex,this);this._store.each(a,i?pt(r,i):r)},t.prototype.filterSelf=function(e,r,n){Lt(e)&&(n=r,r=e,e=[]);var i=n||this,a=Tf(wy(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?pt(r,i):r),this},t.prototype.selectRange=function(e){var r=this,n={},i=Er(e);return G(i,function(a){var o=r._getStoreDimIndex(a);n[o]=e[a]}),this._store=this._store.selectRange(n),this},t.prototype.mapArray=function(e,r,n){Lt(e)&&(n=r,r=e,e=[]),n=n||this;var i=[];return this.each(e,function(){i.push(r&&r.apply(this,arguments))},n),i},t.prototype.map=function(e,r,n,i){var a=n||i||this,o=Tf(wy(e),this._getStoreDimIndex,this),s=SS(this);return s._store=this._store.map(o,a?pt(r,a):r),s},t.prototype.modify=function(e,r,n,i){var a=n||i||this,o=Tf(wy(e),this._getStoreDimIndex,this);this._store.modify(o,a?pt(r,a):r)},t.prototype.downSample=function(e,r,n,i){var a=SS(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),r,n,i),a},t.prototype.lttbDownSample=function(e,r){var n=SS(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(e),r),n},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var r=this.hostModel,n=this.getRawDataItem(e);return new Br(n,r,r&&r.ecModel)},t.prototype.diff=function(e){var r=this;return new Bc(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(n){return xS(e,n)},function(n){return xS(r,n)})},t.prototype.getVisual=function(e){var r=this._visual;return r&&r[e]},t.prototype.setVisual=function(e,r){this._visual=this._visual||{},Sy(e)?Ae(this._visual,e):this._visual[e]=r},t.prototype.getItemVisual=function(e,r){var n=this._itemVisuals[e],i=n&&n[r];return i==null?this.getVisual(r):i},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,r){var n=this._itemVisuals,i=n[e];i||(i=n[e]={});var a=i[r];return a==null&&(a=this.getVisual(r),De(a)?a=a.slice():Sy(a)&&(a=Ae({},a)),i[r]=a),a},t.prototype.setItemVisual=function(e,r,n){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Sy(r)?Ae(i,r):i[r]=n},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,r){Sy(e)?Ae(this._layout,e):this._layout[e]=r},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,r,n){this._itemLayouts[e]=n?Ae(this._itemLayouts[e]||{},r):r},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,r){var n=this.hostModel&&this.hostModel.seriesIndex;S6(n,this.dataType,e,r),this._graphicEls[e]=r},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,r){G(this._graphicEls,function(n,i){n&&e&&e.call(r,n,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:Tf(this.dimensions,this._getDimInfo,this),this.hostModel)),EA(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,r){var n=this[e];Lt(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(nL(arguments)))})},t.internalField=function(){zB=function(e){var r=e._invertedIndicesMap;G(r,function(n,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){n=r[i]=new Rve(o.categories.length);for(var l=0;l<n.length;l++)n[l]=BB;for(var l=0;l<s.count();l++)n[s.get(a.storeDimIndex,l)]=l}})},by=function(e,r,n){return Fi(e._getCategory(r,n),null)},xS=function(e,r){var n=e._idList[r];return n==null&&e._idDimIdx!=null&&(n=by(e,e._idDimIdx,r)),n==null&&(n=Pve+r),n},wy=function(e){return De(e)||(e=e!=null?[e]:[]),e},SS=function(e){var r=new t(e._schema?e._schema:Tf(e.dimensions,e._getDimInfo,e),e.hostModel);return EA(r,e),r},EA=function(e,r){G(Lve.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(e[n]=r[n])}),e.__wrappedMethods=r.__wrappedMethods,G(Dve,function(n){e[n]=Ft(r[n])}),e._calculationInfo=Ae({},r._calculationInfo)},AA=function(e,r){var n=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=n[r],l=i[r];if(s==null&&a!=null&&(n[r]=s=by(e,a,r)),l==null&&o!=null&&(i[r]=l=by(e,o,r)),l==null&&s!=null){var u=e._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),t}();function m2(t,e){return o0(t,e).dimensions}function o0(t,e){BL(t)||(t=zL(t)),e=e||{};var r=e.coordDimensions||[],n=e.dimensionsDefine||t.dimensionsDefine||[],i=Tt(),a=[],o=Nve(t,r,n,e.dimensionsCount),s=e.canOmitUnusedDimensions&&RZ(o),l=n===t.dimensionsDefine,u=l?MZ(t):AZ(n),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,o));for(var f=Tt(c),h=new Nq(o),d=0;d<h.length;d++)h[d]=-1;function p(A){var R=h[A];if(R<0){var L=n[A],I=Nt(L)?L:{name:L},N=new x3,k=I.name;k!=null&&u.get(k)!=null&&(N.name=N.displayName=k),I.type!=null&&(N.type=I.type),I.displayName!=null&&(N.displayName=I.displayName);var z=a.length;return h[A]=z,N.storeDimIndex=A,a.push(N),N}return a[R]}if(!s)for(var d=0;d<o;d++)p(d);f.each(function(A,R){var L=gn(A).slice();if(L.length===1&&!ft(L[0])&&L[0]<0){f.set(R,!1);return}var I=f.set(R,[]);G(L,function(N,k){var z=ft(N)?u.get(N):N;z!=null&&z<o&&(I[k]=z,g(p(z),R,k))})});var v=0;G(r,function(A){var R,L,I,N;if(ft(A))R=A,N={};else{N=A,R=N.name;var k=N.ordinalMeta;N.ordinalMeta=null,N=Ae({},N),N.ordinalMeta=k,L=N.dimsDef,I=N.otherDims,N.name=N.coordDim=N.coordDimIndex=N.dimsDef=N.otherDims=null}var z=f.get(R);if(z!==!1){if(z=gn(z),!z.length)for(var B=0;B<(L&&L.length||1);B++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&z.push(v++)}G(z,function(V,F){var $=p(V);if(l&&N.type!=null&&($.type=N.type),g(At($,N),R,F),$.name==null&&L){var W=L[F];!Nt(W)&&(W={name:W}),$.name=$.displayName=W.name,$.defaultTooltip=W.defaultTooltip}I&&At($.otherDims,I)})}});function g(A,R,L){pq.get(R)!=null?A.otherDims[R]=L:(A.coordDim=R,A.coordDimIndex=L,i.set(R,!0))}var m=e.generateCoord,x=e.generateCoordCount,S=x!=null;x=m?x||1:0;var b=m||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(s)G(a,function(A){T(A)}),a.sort(function(A,R){return A.storeDimIndex-R.storeDimIndex});else for(var w=0;w<o;w++){var E=p(w),M=E.coordDim;M==null&&(E.coordDim=Ove(b,i,S),E.coordDimIndex=0,(!m||x<=0)&&(E.isExtraCoord=!0),x--),T(E),E.type==null&&(yq(t,w)===Pa.Must||E.isExtraCoord&&(E.otherDims.itemName!=null||E.otherDims.seriesName!=null))&&(E.type="ordinal")}return Ive(a),new CZ({source:t,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function Ive(t){for(var e=Tt(),r=0;r<t.length;r++){var n=t[r],i=n.name,a=e.get(i)||0;a>0&&(n.name=i+(a-1)),a++,e.set(i,a)}}function Nve(t,e,r,n){var i=Math.max(t.dimensionsDetectedCount||1,e.length,r.length,n||0);return G(e,function(a){var o;Nt(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function Ove(t,e,r){if(r||e.hasKey(t)){for(var n=0;e.hasKey(t+n);)n++;t+=n}return e.set(t,!0),t}var kve=function(){function t(e){this.coordSysDims=[],this.axisMap=Tt(),this.categoryAxisMap=Tt(),this.coordSysName=e}return t}();function Fve(t){var e=t.get("coordinateSystem"),r=new kve(e),n=Bve[e];if(n)return n(t,r,r.axisMap,r.categoryAxisMap),r}var Bve={cartesian2d:function(t,e,r,n){var i=t.getReferringComponents("xAxis",Ci).models[0],a=t.getReferringComponents("yAxis",Ci).models[0];e.coordSysDims=["x","y"],r.set("x",i),r.set("y",a),kv(i)&&(n.set("x",i),e.firstCategoryDimIndex=0),kv(a)&&(n.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,r,n){var i=t.getReferringComponents("singleAxis",Ci).models[0];e.coordSysDims=["single"],r.set("single",i),kv(i)&&(n.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,r,n){var i=t.getReferringComponents("polar",Ci).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",o),kv(a)&&(n.set("radius",a),e.firstCategoryDimIndex=0),kv(o)&&(n.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,r,n){e.coordSysDims=["lng","lat"]},parallel:function(t,e,r,n){var i=t.ecModel,a=i.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();G(a.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=o[l];r.set(c,u),kv(u)&&(n.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function kv(t){return t.get("type")==="category"}function PZ(t,e,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,a,o,s;zve(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(t&&t.get("stack")),u,c,f,h;if(G(a,function(x,S){ft(x)&&(a[S]=x={name:x}),l&&!x.isExtraCoord&&(!n&&!u&&x.ordinalMeta&&(u=x),!c&&x.type!=="ordinal"&&x.type!=="time"&&(!i||i===x.coordDim)&&(c=x))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;G(a,function(x){x.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),o.appendCalculationDimension(g),o.appendCalculationDimension(m)):(a.push(g),a.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function zve(t){return!EZ(t.schema)}function zc(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function ZL(t,e){return zc(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Uve(t,e){var r=t.get("coordinateSystem"),n=r0.get(r),i;return e&&e.coordSysDims&&(i=Oe(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=yw(l)}return o})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Vve(t,e,r){var n,i;return r&&G(t,function(a,o){var s=a.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(t[n].otherDims.itemName=0),n}function Vu(t,e,r){r=r||{};var n=e.getSourceManager(),i,a=!1;t?(a=!0,i=zL(t)):(i=n.getSource(),a=i.sourceFormat===ol);var o=Fve(e),s=Uve(e,o),l=r.useEncodeDefaulter,u=Lt(l)?l:l?Zt(mq,s,e):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},f=o0(i,c),h=Vve(f.dimensions,r.createInvertedIndices,o),d=a?null:n.getSharedDataStore(f),p=PZ(e,{schema:f,store:d}),v=new Kn(f,e);v.setCalculationInfo(p);var g=h!=null&&Hve(i)?function(m,x,S,b){return b===h?S:this.defaultDimValueGetter(m,x,S,b)}:null;return v.hasItemOption=!1,v.initData(a?i:d,null,g),v}function Hve(t){if(t.sourceFormat===ol){var e=Gve(t.data||[]);return!De(jm(e))}}function Gve(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}var Hu=function(){function t(e){this._setting=e||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(e){return this._setting[e]},t.prototype.unionExtent=function(e){var r=this._extent;e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1])},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(e,r){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(r)||(n[1]=r)},t.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(e){this._isBlank=e},t}();IT(Hu);var Wve=0,_w=function(){function t(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Wve}return t.createByAxisModel=function(e){var r=e.option,n=r.data,i=n&&Oe(n,$ve);return new t({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},t.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},t.prototype.parseAndCollect=function(e){var r,n=this._needCollect;if(!ft(e)&&!n)return e;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=e,r;var i=this._getOrCreateMap();return r=i.get(e),r==null&&(n?(r=this.categories.length,this.categories[r]=e,i.set(e,r)):r=NaN),r},t.prototype._getOrCreateMap=function(){return this._map||(this._map=Tt(this.categories))},t}();function $ve(t){return Nt(t)&&t.value!=null?t.value:t+""}function $6(t){return t.type==="interval"||t.type==="log"}function jve(t,e,r,n){var i={},a=t[1]-t[0],o=i.interval=nY(a/e);r!=null&&o<r&&(o=i.interval=r),n!=null&&o>n&&(o=i.interval=n);var s=i.intervalPrecision=LZ(o),l=i.niceTickExtent=[kn(Math.ceil(t[0]/o)*o,s),kn(Math.floor(t[1]/o)*o,s)];return Xve(l,t),i}function MA(t){var e=Math.pow(10,fL(t)),r=t/e;return r?r===2?r=3:r===3?r=5:r*=2:r=1,kn(r*e)}function LZ(t){return Su(t)+2}function UB(t,e,r){t[e]=Math.max(Math.min(t[e],r[1]),r[0])}function Xve(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),UB(t,0,e),UB(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function t4(t,e){return t>=e[0]&&t<=e[1]}function r4(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function n4(t,e){return t*(e[1]-e[0])+e[0]}var i4=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new _w({})),De(i)&&(i=new _w({categories:Oe(i,function(a){return Nt(a)?a.value:a})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return e.prototype.parse=function(r){return r==null?NaN:ft(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},e.prototype.contain=function(r){return r=this.parse(r),t4(r,this._extent)&&this._ordinalMeta.categories[r]!=null},e.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),r4(r,this._extent)},e.prototype.scale=function(r){return r=Math.round(n4(r,this._extent)),this.getRawOrdinalNumber(r)},e.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},e.prototype.getMinorTicks=function(r){},e.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);o<l;++o){var u=n[o];i[o]=u,a[u]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},e.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},e.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},e.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},e.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Hu);Hu.registerClass(i4);var hd=kn,Uc=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return e.prototype.parse=function(r){return r},e.prototype.contain=function(r){return t4(r,this._extent)},e.prototype.normalize=function(r){return r4(r,this._extent)},e.prototype.scale=function(r){return n4(r,this._extent)},e.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},e.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=LZ(r)},e.prototype.getTicks=function(r){var n=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<a[0]&&(r?s.push({value:hd(a[0]-n,o)}):s.push({value:i[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=hd(u+n,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(r?s.push({value:hd(c+n,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<n.length;o++){for(var s=n[o],l=n[o-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=hd(l.value+(u+1)*h);d>a[0]&&d<a[1]&&c.push(d),u++}i.push(c)}return i},e.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Su(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=hd(r.value,i,!0);return uw(a)},e.prototype.calcNiceTicks=function(r,n,i){r=r||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=jve(a,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var a=n[1]-n[0];isFinite(a)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var o=this._interval;r.fixMin||(n[0]=hd(Math.floor(n[0]/o)*o)),r.fixMax||(n[1]=hd(Math.ceil(n[1]/o)*o))},e.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},e.type="interval",e}(Hu);Hu.registerClass(Uc);var DZ=typeof Float32Array!="undefined",Kve=DZ?Float32Array:Array;function wu(t){return De(t)?DZ?new Float32Array(t):t:new Kve(t)}var j6="__ec_stack_";function JL(t){return t.get("stack")||j6+t.seriesIndex}function QL(t){return t.dim+t.index}function Yve(t){var e=[],r=t.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),a=0;a<t.count;a++)e.push(At({bandWidth:i,axisKey:n,stackId:j6+a},t));for(var o=OZ(e),s=[],a=0;a<t.count;a++){var l=o[n][j6+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function IZ(t,e){var r=[];return e.eachSeriesByType(t,function(n){BZ(n)&&r.push(n)}),r}function qve(t){var e={};G(t,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);e[h]?e[h].push(m):e[h]=[m]}});var r={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i){i.sort(function(l,u){return l-u});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}r[n]=a}}return r}function NZ(t){var e=qve(t),r=[];return G(t,function(n){var i=n.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=e[l],c=Math.abs(o[1]-o[0]),f=a.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(o[1]-o[0])/d.count()}var p=Ze(n.get("barWidth"),s),v=Ze(n.get("barMaxWidth"),s),g=Ze(n.get("barMinWidth")||(zZ(n)?.5:1),s),m=n.get("barGap"),x=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:x,axisKey:QL(a),stackId:JL(n)})}),OZ(r)}function OZ(t){var e={};G(t,function(n,i){var a=n.axisKey,o=n.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return G(e,function(n,i){r[i]={};var a=n.stacks,o=n.bandWidth,s=n.categoryGap;if(s==null){var l=Er(a).length;s=Math.max(35-l*4,15)+"%"}var u=Ze(s,o),c=Ze(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),G(a,function(m){var x=m.maxWidth,S=m.minWidth;if(m.width){var b=m.width;x&&(b=Math.min(b,x)),S&&(b=Math.max(b,S)),m.width=b,f-=b+c*b,h--}else{var b=d;x&&x<b&&(b=Math.min(x,f)),S&&S>b&&(b=S),b!==d&&(m.width=b,f-=b+c*b,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;G(a,function(m,x){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;G(a,function(m,x){r[i][x]=r[i][x]||{bandWidth:o,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function Zve(t,e,r){if(t&&e){var n=t[QL(e)];return n!=null&&r!=null?n[JL(r)]:n}}function kZ(t,e){var r=IZ(t,e),n=NZ(r);G(r,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=JL(i),u=n[QL(s)][l],c=u.offset,f=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function FZ(t){return{seriesType:t,plan:n0(),reset:function(e){if(BZ(e)){var r=e.getData(),n=e.coordinateSystem,i=n.getBaseAxis(),a=n.getOtherAxis(i),o=r.getDimensionIndex(r.mapDimension(a.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=e.get("showBackground",!0),u=r.mapDimension(a.dim),c=r.getCalculationInfo("stackResultDimension"),f=zc(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),d=Jve(i,a),p=zZ(e),v=e.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),x=r.getLayout("offset");return{progress:function(S,b){for(var T=S.count,w=p&&wu(T*3),E=p&&l&&wu(T*3),M=p&&wu(T),A=n.master.getRect(),R=h?A.width:A.height,L,I=b.getStore(),N=0;(L=S.next())!=null;){var k=I.get(f?g:o,L),z=I.get(s,L),B=d,V=void 0;f&&(V=+k-I.get(o,L));var F=void 0,$=void 0,W=void 0,H=void 0;if(h){var X=n.dataToPoint([k,z]);if(f){var te=n.dataToPoint([V,z]);B=te[0]}F=B,$=X[1]+x,W=X[0]-B,H=m,Math.abs(W)<v&&(W=(W<0?-1:1)*v)}else{var X=n.dataToPoint([z,k]);if(f){var te=n.dataToPoint([z,V]);B=te[1]}F=X[0]+x,$=B,W=m,H=X[1]-B,Math.abs(H)<v&&(H=(H<=0?-1:1)*v)}p?(w[N]=F,w[N+1]=$,w[N+2]=h?W:H,E&&(E[N]=h?A.x:F,E[N+1]=h?$:A.y,E[N+2]=R),M[L]=L):b.setItemLayout(L,{x:F,y:$,width:W,height:H}),N+=3}p&&b.setLayout({largePoints:w,largeDataIndices:M,largeBackgroundPoints:E,valueAxisHorizontal:h})}}}}}}function BZ(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function zZ(t){return t.pipelineContext&&t.pipelineContext.large}function Jve(t,e){var r=e.model.get("startValue");return r||(r=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?r>0?r:1:r))}var Qve=function(t,e,r,n){for(;r<n;){var i=r+n>>>1;t[i][1]<e?r=i+1:n=i}return r},eD=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="time",n}return e.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return WT(r.value,LF[Uhe($g(this._minLevelUnit))]||LF.second,n,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(r,n,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return Vhe(r,n,i,o,a)},e.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var a=this.getSetting("useUTC"),o=oge(this._minLevelUnit,this._approxInterval,a,n);return i=i.concat(o),i.push({value:n[1],level:0}),i},e.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Ks,n[1]+=Ks),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Ks}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},e.prototype.calcNiceTicks=function(r,n,i){r=r||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=bS.length,l=Math.min(Qve(bS,this._approxInterval,0,s),s-1);this._interval=bS[l][1],this._minLevelUnit=bS[Math.max(l-1,0)][0]},e.prototype.parse=function(r){return Ur(r)?r:+rl(r)},e.prototype.contain=function(r){return t4(this.parse(r),this._extent)},e.prototype.normalize=function(r){return r4(this.parse(r),this._extent)},e.prototype.scale=function(r){return n4(r,this._extent)},e.type="time",e}(Uc),bS=[["second",RL],["minute",PL],["hour",O1],["quarter-day",O1*6],["half-day",O1*12],["day",Ks*1.2],["half-week",Ks*3.5],["week",Ks*7],["month",Ks*31],["quarter",Ks*95],["half-year",PF/2],["year",PF]];function ege(t,e,r,n){var i=rl(e),a=rl(r),o=function(p){return DF(i,p,n)===DF(a,p,n)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},f=function(){return c()&&o("minute")},h=function(){return f()&&o("second")},d=function(){return h()&&o("millisecond")};switch(t){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function tge(t,e){return t/=Ks,t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function rge(t){var e=30*Ks;return t/=e,t>6?6:t>3?3:t>2?2:1}function nge(t){return t/=O1,t>12?12:t>6?6:t>3.5?4:t>2?2:1}function VB(t,e){return t/=e?PL:RL,t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function ige(t){return nY(t)}function age(t,e,r){var n=new Date(t);switch($g(e)){case"year":case"month":n[nq(r)](0);case"day":n[iq(r)](1);case"hour":n[aq(r)](0);case"minute":n[oq(r)](0);case"second":n[sq(r)](0),n[lq(r)](0)}return n.getTime()}function oge(t,e,r,n){var i=1e4,a=tq,o=0;function s(R,L,I,N,k,z,B){for(var V=new Date(L),F=L,$=V[N]();F<I&&F<=n[1];)B.push({value:F}),$+=R,V[k]($),F=V.getTime();B.push({value:F,notAdd:!0})}function l(R,L,I){var N=[],k=!L.length;if(!ege($g(R),n[0],n[1],r)){k&&(L=[{value:age(new Date(n[0]),R,r)},{value:n[1]}]);for(var z=0;z<L.length-1;z++){var B=L[z].value,V=L[z+1].value;if(B!==V){var F=void 0,$=void 0,W=void 0,H=!1;switch(R){case"year":F=Math.max(1,Math.round(e/Ks/365)),$=LL(r),W=Hhe(r);break;case"half-year":case"quarter":case"month":F=rge(e),$=jg(r),W=nq(r);break;case"week":case"half-week":case"day":F=tge(e),$=$T(r),W=iq(r),H=!0;break;case"half-day":case"quarter-day":case"hour":F=nge(e),$=u_(r),W=aq(r);break;case"minute":F=VB(e,!0),$=jT(r),W=oq(r);break;case"second":F=VB(e,!1),$=XT(r),W=sq(r);break;case"millisecond":F=ige(e),$=KT(r),W=lq(r);break}s(F,B,V,$,W,H,N),R==="year"&&I.length>1&&z===0&&I.unshift({value:I[0].value-F})}}for(var z=0;z<N.length;z++)I.push(N[z]);return N}}for(var u=[],c=[],f=0,h=0,d=0;d<a.length&&o++<i;++d){var p=$g(a[d]);if(zhe(a[d])){l(a[d],u[u.length-1]||[],c);var v=a[d+1]?$g(a[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(R,L){return R.value-L.value});for(var g=[],m=0;m<c.length;++m){var x=c[m].value;(m===0||c[m-1].value!==x)&&(g.push(c[m]),x>=n[0]&&x<=n[1]&&f++)}var S=(n[1]-n[0])/e;if(f>S*1.5&&h>S/1.5||(u.push(g),f>S||t===a[d]))break}c=[]}}}for(var b=hn(Oe(u,function(R){return hn(R,function(L){return L.value>=n[0]&&L.value<=n[1]&&!L.notAdd})}),function(R){return R.length>0}),T=[],w=b.length-1,d=0;d<b.length;++d)for(var E=b[d],M=0;M<E.length;++M)T.push({value:E[M].value,level:w-d});T.sort(function(R,L){return R.value-L.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Hu.registerClass(eD);var HB=Hu.prototype,z1=Uc.prototype,sge=kn,lge=Math.floor,uge=Math.ceil,wS=Math.pow,yl=Math.log,tD=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Uc,r._interval=0,r}return e.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,a=n.getExtent(),o=z1.getTicks.call(this,r);return Oe(o,function(s){var l=s.value,u=kn(wS(this.base,l));return u=l===i[0]&&this._fixMin?TS(u,a[0]):u,u=l===i[1]&&this._fixMax?TS(u,a[1]):u,{value:u}},this)},e.prototype.setExtent=function(r,n){var i=yl(this.base);r=yl(Math.max(0,r))/i,n=yl(Math.max(0,n))/i,z1.setExtent.call(this,r,n)},e.prototype.getExtent=function(){var r=this.base,n=HB.getExtent.call(this);n[0]=wS(r,n[0]),n[1]=wS(r,n[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(n[0]=TS(n[0],a[0])),this._fixMax&&(n[1]=TS(n[1],a[1])),n},e.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=yl(r[0])/yl(n),r[1]=yl(r[1])/yl(n),HB.unionExtent.call(this,r)},e.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},e.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var a=_ce(i),o=r/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[kn(uge(n[0]/a)*a),kn(lge(n[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(r){z1.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},e.prototype.parse=function(r){return r},e.prototype.contain=function(r){return r=yl(r)/yl(this.base),t4(r,this._extent)},e.prototype.normalize=function(r){return r=yl(r)/yl(this.base),r4(r,this._extent)},e.prototype.scale=function(r){return r=n4(r,this._extent),wS(this.base,r)},e.type="log",e}(Hu),UZ=tD.prototype;UZ.getMinorTicks=z1.getMinorTicks;UZ.getLabel=z1.getLabel;function TS(t,e){return sge(t,Su(e))}Hu.registerClass(tD);var cge=function(){function t(e,r,n){this._prepareParams(e,r,n)}return t.prototype._prepareParams=function(e,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=r.get("min",!0);a==null&&(a=r.get("startValue",!0));var o=this._modelMinRaw=a;Lt(o)?this._modelMinNum=CS(e,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=CS(e,o));var s=this._modelMaxRaw=r.get("max",!0);if(Lt(s)?this._modelMaxNum=CS(e,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=CS(e,s)),i)this._axisDataLen=r.getCategories().length;else{var l=r.get("boundaryGap"),u=De(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Wl(u[0],1),Wl(u[1],1)]}},t.prototype.calculate=function(){var e=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=e?i?0:NaN:r-a[0]*o),l==null&&(l=e?i?i-1:NaN:n+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=e_(s)||e_(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},t.prototype.modifyDataMinMax=function(e,r){this[hge[e]]=r},t.prototype.setDeterminedMinMax=function(e,r){var n=fge[e];this[n]=r},t.prototype.freeze=function(){this.frozen=!0},t}(),fge={min:"_determinedMin",max:"_determinedMax"},hge={min:"_dataMin",max:"_dataMax"};function VZ(t,e,r){var n=t.rawExtentInfo;return n||(n=new cge(t,e,r),t.rawExtentInfo=n,n)}function CS(t,e){return e==null?null:e_(e)?NaN:t.parse(e)}function HZ(t,e){var r=t.type,n=VZ(t,e,t.getExtent()).calculate();t.setBlank(n.isBlank);var i=n.min,a=n.max,o=e.ecModel;if(o&&r==="time"){var s=IZ("bar",o),l=!1;if(G(s,function(f){l=l||f.getBaseAxis()===e.axis}),l){var u=NZ(s),c=dge(i,a,e,u);i=c.min,a=c.max}}return{extent:[i,a],fixMin:n.minFixed,fixMax:n.maxFixed}}function dge(t,e,r,n){var i=r.axis.getExtent(),a=i[1]-i[0],o=Zve(n,r.axis);if(o===void 0)return{min:t,max:e};var s=1/0;G(o,function(d){s=Math.min(d.offset,s)});var l=-1/0;G(o,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-t,f=1-(s+l)/a,h=c/f-c;return e+=h*(l/u),t-=h*(s/u),{min:t,max:e}}function Ap(t,e){var r=e,n=HZ(t,r),i=n.extent,a=r.get("splitNumber");t instanceof tD&&(t.base=r.get("logBase"));var o=t.type,s=r.get("interval"),l=o==="interval"||o==="time";t.setExtent(i[0],i[1]),t.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&t.setInterval&&t.setInterval(s)}function y2(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new i4({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new eD({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(Hu.getClass(e)||Uc)}}function pge(t){var e=t.scale.getExtent(),r=e[0],n=e[1];return!(r>0&&n>0||r<0&&n<0)}function s0(t){var e=t.getLabelModel().get("formatter"),r=t.type==="category"?t.scale.getExtent()[0]:null;return t.scale.type==="time"?function(n){return function(i,a){return t.scale.getFormattedLabel(i,a,n)}}(e):ft(e)?function(n){return function(i){var a=t.scale.getLabel(i),o=n.replace("{value}",a!=null?a:"");return o}}(e):Lt(e)?function(n){return function(i,a){return r!=null&&(a=i.value-r),n(rD(t,i),a,i.level!=null?{level:i.level}:null)}}(e):function(n){return t.scale.getLabel(n)}}function rD(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function vge(t){var e=t.model,r=t.scale;if(!(!e.get(["axisLabel","show"])||r.isBlank())){var n,i,a=r.getExtent();r instanceof i4?i=r.count():(n=r.getTicks(),i=n.length);var o=t.getLabelModel(),s=s0(t),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:a[0]+c},h=s(f,c),d=o.getTextRect(h),p=gge(d,o.get("rotate")||0);l?l.union(p):l=p}return l}}function gge(t,e){var r=e*Math.PI/180,n=t.width,i=t.height,a=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),o=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new sr(t.x,t.y,a,o);return s}function nD(t){var e=t.get("interval");return e==null?"auto":e}function GZ(t){return t.type==="category"&&nD(t.getLabelModel())===0}function xw(t,e){var r={};return G(t.mapDimensionsAll(e),function(n){r[ZL(t,n)]=!0}),Er(r)}function mge(t,e,r){e&&G(xw(e,r),function(n){var i=e.getApproximateExtent(n);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])})}var l0=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},t.prototype.getCoordSysModel=function(){},t}();function yge(t){return Vu(null,t)}var iD={isDimensionStacked:zc,enableDataStack:PZ,getStackedDimension:ZL};function aD(t,e){var r=e;e instanceof Br||(r=new Br(e));var n=y2(r);return n.setExtent(t[0],t[1]),Ap(n,r),n}function _ge(t){mi(t,l0)}var GB=[],xge={registerPreprocessor:KL,registerProcessor:xZ,registerPostInit:SZ,registerPostUpdate:bZ,registerUpdateLifecycle:YL,registerAction:Uu,registerCoordinateSystem:xve,registerLayout:Sve,registerVisual:Wp,registerTransform:wve,registerLoading:TZ,registerMap:bve,registerImpl:rve,PRIORITY:pve,ComponentModel:fr,ComponentView:_n,SeriesModel:Vr,ChartView:Or,registerComponentModel:function(t){fr.registerClass(t)},registerComponentView:function(t){_n.registerClass(t)},registerSeriesModel:function(t){Vr.registerClass(t)},registerChartView:function(t){Or.registerClass(t)},registerSubTypeDefaulter:function(t,e){fr.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){hce(t,e)}};function Ot(t){if(De(t)){G(t,function(e){Ot(e)});return}hr(GB,t)>=0||(GB.push(t),Lt(t)&&(t={install:t}),t.install(xge))}var Sge=1e-8;function WB(t,e){return Math.abs(t-e)<Sge}function Ud(t,e,r){var n=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var o=t[a];n+=vc(i[0],i[1],o[0],o[1],e,r),i=o}var s=t[0];return(!WB(i[0],s[0])||!WB(i[1],s[1]))&&(n+=vc(i[0],i[1],s[0],s[1],e,r)),n!==0}var bge=[];function RA(t,e){for(var r=0;r<t.length;r++)qi(t[r],t[r],e)}function $B(t,e,r,n){for(var i=0;i<t.length;i++){var a=t[i];n&&(a=n.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Kf(e,e,a),Yf(r,r,a))}}function wge(t){for(var e=0,r=0,n=0,i=t.length,a=t[i-1][0],o=t[i-1][1],s=0;s<i;s++){var l=t[s][0],u=t[s][1],c=a*u-l*o;e+=c,r+=(a+l)*c,n+=(o+u)*c,a=l,o=u}return e?[r/e/3,n/e/3,e]:[t[0][0]||0,t[0][1]||0]}var WZ=function(){function t(e){this.name=e}return t.prototype.setCenter=function(e){this._center=e},t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},t}(),jB=function(){function t(e,r){this.type="polygon",this.exterior=e,this.interiors=r}return t}(),XB=function(){function t(e){this.type="linestring",this.points=e}return t}(),$Z=function(t){he(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.type="geoJSON",a.geometries=n,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var r=this.geometries,n,i=0,a=0;a<r.length;a++){var o=r[a],s=o.exterior,l=s&&s.length;l>i&&(n=o,i=l)}if(n)return wge(n.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},e.prototype.getBoundingRect=function(r){var n=this._rect;if(n&&!r)return n;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return G(o,function(s){s.type==="polygon"?$B(s.exterior,i,a,r):G(s.points,function(l){$B(l,i,a,r)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),n=new sr(i[0],i[1],a[0]-i[0],a[1]-i[1]),r||(this._rect=n),n},e.prototype.contain=function(r){var n=this.getBoundingRect(),i=this.geometries;if(!n.contain(r[0],r[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(Ud(l,r[0],r[1])){for(var c=0;c<(u?u.length:0);c++)if(Ud(u[c],r[0],r[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(r,n,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new sr(r,n,i,a),u=o.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var h=c[f];h.type==="polygon"?(RA(h.exterior,u),G(h.interiors,function(d){RA(d,u)})):G(h.points,function(d){RA(d,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(r){r==null&&(r=this.name);var n=new e(r,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e}(WZ),Tge=function(t){he(e,t);function e(r,n){var i=t.call(this,r)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return e.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,n=r.getBoundingRect(),i=[n.x+n.width/2,n.y+n.height/2],a=MT(bge),o=r;o&&!o.isGeoSVGGraphicRoot;)Ec(a,o.getLocalTransform(),a),o=o.parent;return Up(a,a),qi(i,i,a),i},e}(WZ);function Cge(t){if(!t.UTF8Encoding)return t;var e=t,r=e.UTF8Scale;r==null&&(r=1024);var n=e.features;return G(n,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=jZ(s,o,r);break;case"Polygon":PA(s,o,r);break;case"MultiLineString":PA(s,o,r);break;case"MultiPolygon":G(s,function(l,u){return PA(l,o[u],r)})}}),e.UTF8Encoding=!1,e}function PA(t,e,r){for(var n=0;n<t.length;n++)t[n]=jZ(t[n],e[n],r)}function jZ(t,e,r){for(var n=[],i=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,l=t.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,n.push([s/r,l/r])}return n}function X6(t,e){return t=Cge(t),Oe(hn(t.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var n=r.properties,i=r.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new jB(o[0],o.slice(1)));break;case"MultiPolygon":G(i.coordinates,function(l){l[0]&&a.push(new jB(l[0],l.slice(1)))});break;case"LineString":a.push(new XB([i.coordinates]));break;case"MultiLineString":a.push(new XB(i.coordinates))}var s=new $Z(n[e||"name"],a,n.cp);return s.properties=n,s})}var v_=kr();function XZ(t,e){var r=Oe(e,function(n){return t.scale.parse(n)});return t.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function Ege(t){var e=t.getLabelModel().get("customValues");if(e){var r=s0(t);return{labels:XZ(t,e).map(function(n){var i={value:n};return{formattedLabel:r(i),rawLabel:t.scale.getLabel(i),tickValue:n}})}}return t.type==="category"?Mge(t):Pge(t)}function Age(t,e){var r=t.getTickModel().get("customValues");return r?{ticks:XZ(t,r)}:t.type==="category"?Rge(t,e):{ticks:Oe(t.scale.getTicks(),function(n){return n.value})}}function Mge(t){var e=t.getLabelModel(),r=KZ(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function KZ(t,e){var r=YZ(t,"labels"),n=nD(e),i=qZ(r,n);if(i)return i;var a,o;return Lt(n)?a=QZ(t,n):(o=n==="auto"?Lge(t):n,a=JZ(t,o)),ZZ(r,n,{labels:a,labelCategoryInterval:o})}function Rge(t,e){var r=YZ(t,"ticks"),n=nD(e),i=qZ(r,n);if(i)return i;var a,o;if((!e.get("show")||t.scale.isBlank())&&(a=[]),Lt(n))a=QZ(t,n,!0);else if(n==="auto"){var s=KZ(t,t.getLabelModel());o=s.labelCategoryInterval,a=Oe(s.labels,function(l){return l.tickValue})}else o=n,a=JZ(t,o,!0);return ZZ(r,n,{ticks:a,tickCategoryInterval:o})}function Pge(t){var e=t.scale.getTicks(),r=s0(t);return{labels:Oe(e,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:t.scale.getLabel(n),tickValue:n.value}})}}function YZ(t,e){return v_(t)[e]||(v_(t)[e]=[])}function qZ(t,e){for(var r=0;r<t.length;r++)if(t[r].key===e)return t[r].value}function ZZ(t,e,r){return t.push({key:e,value:r}),r}function Lge(t){var e=v_(t).autoInterval;return e!=null?e:v_(t).autoInterval=t.calculateCategoryInterval()}function Dge(t){var e=Ige(t),r=s0(t),n=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=a[1];l+=s){var p=0,v=0,g=u2(r({value:l}),e.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,x=d/f;isNaN(m)&&(m=1/0),isNaN(x)&&(x=1/0);var S=Math.max(0,Math.floor(Math.min(m,x))),b=v_(t.model),T=t.getExtent(),w=b.lastAutoInterval,E=b.lastTickCount;return w!=null&&E!=null&&Math.abs(w-S)<=1&&Math.abs(E-o)<=1&&w>S&&b.axisExtent0===T[0]&&b.axisExtent1===T[1]?S=w:(b.lastTickCount=o,b.lastAutoInterval=S,b.axisExtent0=T[0],b.axisExtent1=T[1]),S}function Ige(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function JZ(t,e,r){var n=s0(t),i=t.scale,a=i.getExtent(),o=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),u=a[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=GZ(t),h=o.get("showMinLabel")||f,d=o.get("showMaxLabel")||f;h&&u!==a[0]&&v(a[0]);for(var p=u;p<=a[1];p+=l)v(p);d&&p-l!==a[1]&&v(a[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function QZ(t,e,r){var n=t.scale,i=s0(t),a=[];return G(n.getTicks(),function(o){var s=n.getLabel(o),l=o.value;e(o.value,s)&&a.push(r?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var KB=[0,1],Po=function(){function t(e,r,n){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=r,this._extent=n||[0,0]}return t.prototype.contain=function(e){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return e>=n&&e<=i},t.prototype.containData=function(e){return this.scale.contain(e)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(e){return tY(e||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(e,r){var n=this._extent;n[0]=e,n[1]=r},t.prototype.dataToCoord=function(e,r){var n=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(n=n.slice(),YB(n,i.count())),rn(e,KB,n,r)},t.prototype.coordToData=function(e,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),YB(n,i.count()));var a=rn(e,n,KB,r);return this.scale.scale(a)},t.prototype.pointToData=function(e,r){},t.prototype.getTicksCoords=function(e){e=e||{};var r=e.tickModel||this.getTickModel(),n=Age(this,r),i=n.ticks,a=Oe(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=r.get("alignWithLabel");return Nge(this,a,o,e.clamp),a},t.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),r=e.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Oe(n,function(a){return Oe(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},t.prototype.getViewLabels=function(){return Ege(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var e=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/n},t.prototype.calculateCategoryInterval=function(){return Dge(this)},t}();function YB(t,e){var r=t[1]-t[0],n=e,i=r/n/2;t[0]+=i,t[1]-=i}function Nge(t,e,r,n){var i=e.length;if(!t.onBand||r||!i)return;var a=t.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1]};else{var l=e[i-1].tickValue-e[0].tickValue,u=(e[i-1].coord-e[0].coord)/l;G(e,function(d){d.coord-=u/2});var c=t.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+u*s},e.push(o)}var f=a[0]>a[1];h(e[0].coord,a[0])&&(n?e[0].coord=a[0]:e.shift()),n&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(n?o.coord=a[1]:e.pop()),n&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(d,p){return d=kn(d),p=kn(p),f?d>p:d<p}}var Ty=Math.PI*2,dd=Nu.CMD,Oge=["top","right","bottom","left"];function kge(t,e,r,n,i){var a=r.width,o=r.height;switch(t){case"top":n.set(r.x+a/2,r.y-e),i.set(0,-1);break;case"bottom":n.set(r.x+a/2,r.y+o+e),i.set(0,1);break;case"left":n.set(r.x-e,r.y+o/2),i.set(-1,0);break;case"right":n.set(r.x+a+e,r.y+o/2),i.set(1,0);break}}function Fge(t,e,r,n,i,a,o,s,l){o-=t,s-=e;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var c=o*r+t,f=s*r+e;if(Math.abs(n-i)%Ty<1e-4)return l[0]=c,l[1]=f,u-r;if(a){var h=n;n=ps(i),i=ps(h)}else n=ps(n),i=ps(i);n>i&&(i+=Ty);var d=Math.atan2(s,o);if(d<0&&(d+=Ty),d>=n&&d<=i||d+Ty>=n&&d+Ty<=i)return l[0]=c,l[1]=f,u-r;var p=r*Math.cos(n)+t,v=r*Math.sin(n)+e,g=r*Math.cos(i)+t,m=r*Math.sin(i)+e,x=(p-o)*(p-o)+(v-s)*(v-s),S=(g-o)*(g-o)+(m-s)*(m-s);return x<S?(l[0]=p,l[1]=v,Math.sqrt(x)):(l[0]=g,l[1]=m,Math.sqrt(S))}function Sw(t,e,r,n,i,a,o,s){var l=i-t,u=a-e,c=r-t,f=n-e,h=Math.sqrt(c*c+f*f);c/=h,f/=h;var d=l*c+u*f,p=d/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var v=o[0]=t+p*c,g=o[1]=e+p*f;return Math.sqrt((v-i)*(v-i)+(g-a)*(g-a))}function eJ(t,e,r,n,i,a,o){r<0&&(t=t+r,r=-r),n<0&&(e=e+n,n=-n);var s=t+r,l=e+n,u=o[0]=Math.min(Math.max(i,t),s),c=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))}var Ml=[];function Bge(t,e,r){var n=eJ(e.x,e.y,e.width,e.height,t.x,t.y,Ml);return r.set(Ml[0],Ml[1]),n}function zge(t,e,r){for(var n=0,i=0,a=0,o=0,s,l,u=1/0,c=e.data,f=t.x,h=t.y,d=0;d<c.length;){var p=c[d++];d===1&&(n=c[d],i=c[d+1],a=n,o=i);var v=u;switch(p){case dd.M:a=c[d++],o=c[d++],n=a,i=o;break;case dd.L:v=Sw(n,i,c[d],c[d+1],f,h,Ml,!0),n=c[d++],i=c[d++];break;case dd.C:v=FK(n,i,c[d++],c[d++],c[d++],c[d++],c[d],c[d+1],f,h,Ml),n=c[d++],i=c[d++];break;case dd.Q:v=zK(n,i,c[d++],c[d++],c[d],c[d+1],f,h,Ml),n=c[d++],i=c[d++];break;case dd.A:var g=c[d++],m=c[d++],x=c[d++],S=c[d++],b=c[d++],T=c[d++];d+=1;var w=!!(1-c[d++]);s=Math.cos(b)*x+g,l=Math.sin(b)*S+m,d<=1&&(a=s,o=l);var E=(f-g)*S/x+g;v=Fge(g,m,S,b,b+T,w,E,h,Ml),n=Math.cos(b+T)*x+g,i=Math.sin(b+T)*S+m;break;case dd.R:a=n=c[d++],o=i=c[d++];var M=c[d++],A=c[d++];v=eJ(a,o,M,A,f,h,Ml);break;case dd.Z:v=Sw(n,i,a,o,f,h,Ml,!0),n=a,i=o;break}v<u&&(u=v,r.set(Ml[0],Ml[1]))}return u}var Nl=new or,Rn=new or,hi=new or,Tu=new or,yu=new or;function qB(t,e){if(t){var r=t.getTextGuideLine(),n=t.getTextContent();if(n&&r){var i=t.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||Oge,s=n.getBoundingRect().clone();s.applyTransform(n.getComputedTransform());var l=1/0,u=i.anchor,c=t.getComputedTransform(),f=c&&Up([],c),h=e.get("length2")||0;u&&hi.copy(u);for(var d=0;d<o.length;d++){var p=o[d];kge(p,0,s,Nl,Tu),or.scaleAndAdd(Rn,Nl,Tu,h),Rn.transform(f);var v=t.getBoundingRect(),g=u?u.distance(Rn):t instanceof yr?zge(Rn,t.path,hi):Bge(Rn,v,hi);g<l&&(l=g,Rn.transform(c),hi.transform(c),hi.toArray(a[0]),Rn.toArray(a[1]),Nl.toArray(a[2]))}tJ(a,e.get("minTurnAngle")),r.setShape({points:a})}}}var bw=[],ho=new or;function tJ(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Nl.fromArray(t[0]),Rn.fromArray(t[1]),hi.fromArray(t[2]),or.sub(Tu,Nl,Rn),or.sub(yu,hi,Rn);var r=Tu.len(),n=yu.len();if(!(r<.001||n<.001)){Tu.scale(1/r),yu.scale(1/n);var i=Tu.dot(yu),a=Math.cos(e);if(a<i){var o=Sw(Rn.x,Rn.y,hi.x,hi.y,Nl.x,Nl.y,bw,!1);ho.fromArray(bw),ho.scaleAndAdd(yu,o/Math.tan(Math.PI-e));var s=hi.x!==Rn.x?(ho.x-Rn.x)/(hi.x-Rn.x):(ho.y-Rn.y)/(hi.y-Rn.y);if(isNaN(s))return;s<0?or.copy(ho,Rn):s>1&&or.copy(ho,hi),ho.toArray(t[1])}}}}function Uge(t,e,r){if(r<=180&&r>0){r=r/180*Math.PI,Nl.fromArray(t[0]),Rn.fromArray(t[1]),hi.fromArray(t[2]),or.sub(Tu,Rn,Nl),or.sub(yu,hi,Rn);var n=Tu.len(),i=yu.len();if(!(n<.001||i<.001)){Tu.scale(1/n),yu.scale(1/i);var a=Tu.dot(e),o=Math.cos(r);if(a<o){var s=Sw(Rn.x,Rn.y,hi.x,hi.y,Nl.x,Nl.y,bw,!1);ho.fromArray(bw);var l=Math.PI/2,u=Math.acos(yu.dot(e)),c=l+u-r;if(c>=l)or.copy(ho,hi);else{ho.scaleAndAdd(yu,s/Math.tan(Math.PI/2-c));var f=hi.x!==Rn.x?(ho.x-Rn.x)/(hi.x-Rn.x):(ho.y-Rn.y)/(hi.y-Rn.y);if(isNaN(f))return;f<0?or.copy(ho,Rn):f>1&&or.copy(ho,hi)}ho.toArray(t[1])}}}}function LA(t,e,r,n){var i=r==="normal",a=i?t:t.ensureState(r);a.ignore=e;var o=n.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=n.getModel("lineStyle").getLineStyle();i?t.useStyle(s):a.style=s}function Vge(t,e){var r=e.smooth,n=e.points;if(n)if(t.moveTo(n[0][0],n[0][1]),r>0&&n.length>=3){var i=Xf(n[0],n[1]),a=Xf(n[1],n[2]);if(!i||!a){t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]);return}var o=Math.min(i,a)*r,s=l3([],n[1],n[0],o/i),l=l3([],n[1],n[2],o/a),u=l3([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],n[2][0],n[2][1])}else for(var c=1;c<n.length;c++)t.lineTo(n[c][0],n[c][1])}function oD(t,e,r){var n=t.getTextGuideLine(),i=t.getTextContent();if(!i){n&&t.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<o_.length;l++){var u=o_[l],c=e[u],f=u==="normal";if(c){var h=c.get("show"),d=f?s:Jt(i.states[u]&&i.states[u].ignore,s);if(d||!Jt(h,o)){var p=f?n:n&&n.states[u];p&&(p.ignore=!0),n&&LA(n,!0,u,c);continue}n||(n=new Ro,t.setTextGuideLine(n),!f&&(s||!o)&&LA(n,!0,"normal",e.normal),t.stateProxy&&(n.stateProxy=t.stateProxy)),LA(n,!1,u,c)}}if(n){At(n.style,r),n.style.fill=null;var v=a.get("showAbove"),g=t.textGuideLineConfig=t.textGuideLineConfig||{};g.showAbove=v||!1,n.buildPath=Vge}}function sD(t,e){e=e||"labelLine";for(var r={normal:t.getModel(e)},n=0;n<bo.length;n++){var i=bo[n];r[i]=t.getModel([i,e])}return r}function rJ(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(!n.defaultAttr.ignore){var i=n.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new iw(o,a):null;e.push({label:i,labelLine:n.labelLine,rect:u,localRect:o,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:a})}}return e}function nJ(t,e,r,n,i,a){var o=t.length;if(o<2)return;t.sort(function(M,A){return M.rect[e]-A.rect[e]});for(var s=0,l,u=!1,c=0,f=0;f<o;f++){var h=t[f],d=h.rect;l=d[e]-s,l<0&&(d[e]-=l,h.label[e]-=l,u=!0);var p=Math.max(-l,0);c+=p,s=d[e]+d[r]}c>0&&a&&T(-c/o,0,o);var v=t[0],g=t[o-1],m,x;S(),m<0&&w(-m,.8),x<0&&w(x,.8),S(),b(m,x,1),b(x,m,-1),S(),m<0&&E(-m),x<0&&E(x);function S(){m=v.rect[e]-n,x=i-g.rect[e]-g.rect[r]}function b(M,A,R){if(M<0){var L=Math.min(A,-M);if(L>0){T(L*R,0,o);var I=L+M;I<0&&w(-I*R,1)}else w(-M*R,1)}}function T(M,A,R){M!==0&&(u=!0);for(var L=A;L<R;L++){var I=t[L],N=I.rect;N[e]+=M,I.label[e]+=M}}function w(M,A){for(var R=[],L=0,I=1;I<o;I++){var N=t[I-1].rect,k=Math.max(t[I].rect[e]-N[e]-N[r],0);R.push(k),L+=k}if(L){var z=Math.min(Math.abs(M)/L,A);if(M>0)for(var I=0;I<o-1;I++){var B=R[I]*z;T(B,0,I+1)}else for(var I=o-1;I>0;I--){var B=R[I-1]*z;T(-B,I,o)}}}function E(M){var A=M<0?-1:1;M=Math.abs(M);for(var R=Math.ceil(M/(o-1)),L=0;L<o-1;L++)if(A>0?T(R,0,L+1):T(-R,o-L-1,o),M-=R,M<=0)return}return u}function Hge(t,e,r,n){return nJ(t,"x","width",e,r,n)}function iJ(t,e,r,n){return nJ(t,"y","height",e,r,n)}function aJ(t){var e=[];t.sort(function(v,g){return g.priority-v.priority});var r=new sr(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<t.length;i++){var a=t[i],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,c=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=a.obb,h=!1,d=0;d<e.length;d++){var p=e[d];if(r.intersect(p.rect)){if(o&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new iw(p.localRect,p.transform)),f||(f=new iw(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function Gge(t){if(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].slice());return e}}function Wge(t,e){var r=t.label,n=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:Gge(n&&n.shape.points)}}var ZB=["align","verticalAlign","width","height","fontSize"],no=new _c,DA=kr(),$ge=kr();function ES(t,e,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]!=null&&(t[i]=e[i])}}var AS=["x","y","rotation"],jge=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(e,r,n,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},u=i.getComputedTransform(),c=i.getBoundingRect().plain();sr.applyTransform(c,c,u),u?no.setLocalTransform(u):(no.x=no.y=no.rotation=no.originX=no.originY=0,no.scaleX=no.scaleY=1),no.rotation=ps(no.rotation);var f=i.__hostTarget,h;if(f){h=f.getBoundingRect().plain();var d=f.getComputedTransform();sr.applyTransform(h,h,d)}var p=h&&f.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:n,dataIndex:e,dataType:r,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:no.x,y:no.y,scaleX:no.scaleX,scaleY:no.scaleY,rotation:no.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},t.prototype.addLabelsOfSeries=function(e){var r=this;this._chartViewList.push(e);var n=e.__model,i=n.get("labelLayout");(Lt(i)||Er(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Ht(a);o&&!o.disableLabelLayout&&r._addLabel(s.dataIndex,s.dataType,n,o,i)})},t.prototype.updateLayoutConfig=function(e){var r=e.getWidth(),n=e.getHeight();function i(S,b){return function(){qB(S,b)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,c=void 0;Lt(o.layoutOption)?c=o.layoutOption(Wge(o,l)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var f=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*f:u.attachedRot,offset:[c.dx||0,c.dy||0]});var h=!1;if(c.x!=null?(s.x=Ze(c.x,r),s.setStyle("x",0),h=!0):(s.x=u.x,s.setStyle("x",u.style.x)),c.y!=null?(s.y=Ze(c.y,n),s.setStyle("y",0),h=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var d=l.getTextGuideLine();d&&(d.setShape({points:c.labelLinePoints}),h=!1)}var p=DA(s);p.needsUpdateLabelLine=h,s.rotation=c.rotate!=null?c.rotate*f:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var v=0;v<ZB.length;v++){var g=ZB[v];s.setStyle(g,c[g]!=null?c[g]:u.style[g])}if(c.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var x=o.seriesModel.getData(o.dataType);m=x.getItemModel(o.dataIndex)}s.on("drag",i(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},t.prototype.layout=function(e){var r=e.getWidth(),n=e.getHeight(),i=rJ(this._labelList),a=hn(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=hn(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});Hge(a,0,r),iJ(o,0,n);var s=hn(i,function(l){return l.layoutOption.hideOverlap});aJ(s)},t.prototype.processLabelsOverall=function(){var e=this;G(this._chartViewList,function(r){var n=r.__model,i=r.ignoreLabelLineUpdate,a=n.isAnimationEnabled();r.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=DA(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,n),a&&e._animateLabels(o,n)})})},t.prototype._updateLabelLine=function(e,r){var n=e.getTextContent(),i=Ht(e),a=i.dataIndex;if(n&&a!=null){var o=r.getData(i.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style");if(u){var c=o.getVisual("drawType");l.stroke=u[c]}var f=s.getModel("labelLine");oD(e,sD(s),l),qB(e,f)}},t.prototype._animateLabels=function(e,r){var n=e.getTextContent(),i=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!Gg(e))){var a=DA(n),o=a.oldLayout,s=Ht(e),l=s.dataIndex,u={x:n.x,y:n.y,rotation:n.rotation},c=r.getData(s.dataType);if(o){n.attr(o);var h=e.prevStates;h&&(hr(h,"select")>=0&&n.attr(a.oldLayoutSelect),hr(h,"emphasis")>=0&&n.attr(a.oldLayoutEmphasis)),Xr(n,u,r,l)}else if(n.attr(u),!Zm(n).valueAnimation){var f=Jt(n.style.opacity,1);n.style.opacity=0,Fn(n,{style:{opacity:f}},r,l)}if(a.oldLayout=u,n.states.select){var d=a.oldLayoutSelect={};ES(d,u,AS),ES(d,n.states.select,AS)}if(n.states.emphasis){var p=a.oldLayoutEmphasis={};ES(p,u,AS),ES(p,n.states.emphasis,AS)}qY(n,l,c,r,r)}if(i&&!i.ignore&&!i.invisible){var a=$ge(i),o=a.oldLayout,v={points:i.shape.points};o?(i.attr({shape:o}),Xr(i,{shape:v},r)):(i.setShape(v),i.style.strokePercent=0,Fn(i,{style:{strokePercent:1}},r)),a.oldLayout=v}},t}(),IA=kr();function oJ(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,r,n){var i=IA(r).labelManager;i||(i=IA(r).labelManager=new jge),i.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(e,r,n){var i=IA(r).labelManager;n.updatedSeries.forEach(function(a){i.addLabelsOfSeries(r.getViewOfSeriesModel(a))}),i.updateLayoutConfig(r),i.layout(r),i.processLabelsOverall()})}var NA=Math.sin,OA=Math.cos,sJ=Math.PI,pd=Math.PI*2,Xge=180/sJ,lJ=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,r){this._add("M",e,r)},t.prototype.lineTo=function(e,r){this._add("L",e,r)},t.prototype.bezierCurveTo=function(e,r,n,i,a,o){this._add("C",e,r,n,i,a,o)},t.prototype.quadraticCurveTo=function(e,r,n,i){this._add("Q",e,r,n,i)},t.prototype.arc=function(e,r,n,i,a,o){this.ellipse(e,r,n,n,0,i,a,o)},t.prototype.ellipse=function(e,r,n,i,a,o,s,l){var u=s-o,c=!l,f=Math.abs(u),h=Jf(f-pd)||(c?u>=pd:-u>=pd),d=u>0?u%pd:u%pd+pd,p=!1;h?p=!0:Jf(f)?p=!1:p=d>=sJ==!!c;var v=e+n*OA(o),g=r+i*NA(o);this._start&&this._add("M",v,g);var m=Math.round(a*Xge);if(h){var x=1/this._p,S=(c?1:-1)*(pd-x);this._add("A",n,i,m,1,+c,e+n*OA(o+S),r+i*NA(o+S)),x>.01&&this._add("A",n,i,m,0,+c,v,g)}else{var b=e+n*OA(s),T=r+i*NA(s);this._add("A",n,i,m,+p,+c,b,T)}},t.prototype.rect=function(e,r,n,i){this._add("M",e,r),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,r,n,i,a,o,s,l,u){for(var c=[],f=this._p,h=1;h<arguments.length;h++){var d=arguments[h];if(isNaN(d)){this._invalid=!0;return}c.push(Math.round(d*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),lD="none",Kge=Math.round;function Yge(t){var e=t.fill;return e!=null&&e!==lD}function qge(t){var e=t.stroke;return e!=null&&e!==lD}var K6=["lineCap","miterLimit","lineJoin"],Zge=Oe(K6,function(t){return"stroke-"+t.toLowerCase()});function Jge(t,e,r,n){var i=e.opacity==null?1:e.opacity;if(r instanceof aa){t("opacity",i);return}if(Yge(e)){var a=n_(e.fill);t("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;o<1&&t("fill-opacity",o)}else t("fill",lD);if(qge(e)){var s=n_(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?r.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,f=e.strokeFirst;if(u!==1&&t("stroke-width",u),f&&t("paint-order",f?"stroke":"fill"),c<1&&t("stroke-opacity",c),e.lineDash){var h=WL(r),d=h[0],p=h[1];d&&(p=Kge(p||0),t("stroke-dasharray",d.join(",")),(p||n)&&t("stroke-dashoffset",p))}for(var v=0;v<K6.length;v++){var g=K6[v];if(e[g]!==rw[g]){var m=e[g]||rw[g];m&&t(Zge[v],m)}}}}var uJ="http://www.w3.org/2000/svg",cJ="http://www.w3.org/1999/xlink",Qge="http://www.w3.org/2000/xmlns/",eme="http://www.w3.org/XML/1998/namespace",JB="ecmeta_";function fJ(t){return document.createElementNS(uJ,t)}function Xi(t,e,r,n,i){return{tag:t,attrs:r||{},children:n,text:i,key:e}}function tme(t,e){var r=[];if(e)for(var n in e){var i=e[n],a=n;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),r.push(a))}return"<"+t+" "+r.join(" ")+">"}function rme(t){return"</"+t+">"}function uD(t,e){e=e||{};var r=e.newline?`
`:"";function n(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return tme(o,s)+(o!=="style"?Oi(l):l||"")+(a?""+r+Oe(a,function(u){return n(u)}).join(r)+r:"")+rme(o)}return n(t)}function nme(t,e,r){r=r||{};var n=r.newline?`
`:"",i=" {"+n,a=n+"}",o=Oe(Er(t),function(l){return l+i+Oe(Er(t[l]),function(u){return u+":"+t[l][u]+";"}).join(n)+a}).join(n),s=Oe(Er(e),function(l){return"@keyframes "+l+i+Oe(Er(e[l]),function(u){return u+i+Oe(Er(e[l][u]),function(c){var f=e[l][u][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(n)+a}).join(n)+a}).join(n);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(n)}function Y6(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function QB(t,e,r,n){return Xi("svg","root",{width:t,height:e,xmlns:uJ,"xmlns:xlink":cJ,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+t+" "+e:!1},r)}var ime=0;function hJ(){return ime++}var ez={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Id="transform-origin";function ame(t,e,r){var n=Ae({},t.shape);Ae(n,e),t.buildPath(r,n);var i=new lJ;return i.reset(jK(t)),r.rebuildPath(i,1),i.generateStr(),i.getStr()}function ome(t,e){var r=e.originX,n=e.originY;(r||n)&&(t[Id]=r+"px "+n+"px")}var sme={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function dJ(t,e){var r=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[r]=t,r}function lme(t,e,r){var n=t.shape.paths,i={},a,o;if(G(n,function(l){var u=Y6(r.zrId);u.animation=!0,a4(l,{},u,!0);var c=u.cssAnims,f=u.cssNodes,h=Er(c),d=h.length;if(d){o=h[d-1];var p=c[o];for(var v in p){var g=p[v];i[v]=i[v]||{d:""},i[v].d+=g.d||""}for(var m in f){var x=f[m].animation;x.indexOf(o)>=0&&(a=x)}}}),!!a){e.d=!1;var s=dJ(i,r);return a.replace(o,s)}}function tz(t){return ft(t)?ez[t]?"cubic-bezier("+ez[t]+")":lL(t)?t:"":""}function a4(t,e,r,n){var i=t.animators,a=i.length,o=[];if(t instanceof wL){var s=lme(t,e,r);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=i[u],f=[c.getMaxTime()/1e3+"s"],h=tz(c.getClip().easing),d=c.getDelay();h?f.push(h):f.push("linear"),d&&f.push(d/1e3+"s"),c.getLoop()&&f.push("infinite");var p=f.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function v(x){var S=x[1],b=S.length,T={},w={},E={},M="animation-timing-function";function A(le,pe,Se){for(var _e=le.getTracks(),Le=le.getMaxTime(),Be=0;Be<_e.length;Be++){var Q=_e[Be];if(Q.needsAnimate()){var tt=Q.keyframes,je=Q.propName;if(Se&&(je=Se(je)),je)for(var Ye=0;Ye<tt.length;Ye++){var $e=tt[Ye],wt=Math.round($e.time/Le*100)+"%",We=tz($e.easing),q=$e.rawValue;(ft(q)||Ur(q))&&(pe[wt]=pe[wt]||{},pe[wt][je]=$e.rawValue,We&&(pe[wt][M]=We))}}}}for(var R=0;R<b;R++){var L=S[R],I=L.targetName;I?I==="shape"&&A(L,w):!n&&A(L,T)}for(var N in T){var k={};ZK(k,t),Ae(k,T[N]);var z=XK(k),B=T[N][M];E[N]=z?{transform:z}:{},ome(E[N],k),B&&(E[N][M]=B)}var V,F=!0;for(var N in w){E[N]=E[N]||{};var $=!V,B=w[N][M];$&&(V=new Nu);var W=V.len();V.reset(),E[N].d=ame(t,w[N],V);var H=V.len();if(!$&&W!==H){F=!1;break}B&&(E[N][M]=B)}if(!F)for(var N in E)delete E[N].d;if(!n)for(var R=0;R<b;R++){var L=S[R],I=L.targetName;I==="style"&&A(L,E,function(_e){return sme[_e]})}for(var X=Er(E),te=!0,Y,R=1;R<X.length;R++){var ee=X[R-1],se=X[R];if(E[ee][Id]!==E[se][Id]){te=!1;break}Y=E[ee][Id]}if(te&&Y){for(var N in E)E[N][Id]&&delete E[N][Id];e[Id]=Y}if(hn(X,function(le){return Er(E[le]).length>0}).length){var ne=dJ(E,r);return ne+" "+x[0]+" both"}}for(var g in l){var s=v(l[g]);s&&o.push(s)}if(o.length){var m=r.zrId+"-cls-"+hJ();r.cssNodes["."+m]={animation:o.join(",")},e.class=m}}function ume(t,e,r){if(!t.ignore)if(t.isSilent()){var n={"pointer-events":"none"};rz(n,e,r)}else{var i=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},a=i.fill;if(!a){var o=t.style&&t.style.fill,s=t.states.select&&t.states.select.style&&t.states.select.style.fill,l=t.currentStates.indexOf("select")>=0&&s||o;l&&(a=a6(l))}var u=i.lineWidth;if(u){var c=!i.strokeNoScale&&t.transform?t.transform[0]:1;u=u/c}var n={cursor:"pointer"};a&&(n.fill=a),i.stroke&&(n.stroke=i.stroke),u&&(n["stroke-width"]=u),rz(n,e,r)}}function rz(t,e,r,n){var i=JSON.stringify(t),a=r.cssStyleCache[i];a||(a=r.zrId+"-cls-"+hJ(),r.cssStyleCache[i]=a,r.cssNodes["."+a+":hover"]=t),e.class=e.class?e.class+" "+a:a}var g_=Math.round;function pJ(t){return t&&ft(t.src)}function vJ(t){return t&&Lt(t.toDataURL)}function cD(t,e,r,n){Jge(function(i,a){var o=i==="fill"||i==="stroke";o&&$K(a)?mJ(e,t,i,n):o&&uL(a)?yJ(r,t,i,n):o&&a==="none"?t[i]="transparent":t[i]=a},e,r,!1),gme(r,t,n)}function fD(t,e){var r=dce(e);r&&(r.each(function(n,i){n!=null&&(t[(JB+i).toLowerCase()]=n+"")}),e.isSilent()&&(t[JB+"silent"]="true"))}function nz(t){return Jf(t[0]-1)&&Jf(t[1])&&Jf(t[2])&&Jf(t[3]-1)}function cme(t){return Jf(t[4])&&Jf(t[5])}function hD(t,e,r){if(e&&!(cme(e)&&nz(e))){var n=1e4;t.transform=nz(e)?"translate("+g_(e[4]*n)/n+" "+g_(e[5]*n)/n+")":kue(e)}}function iz(t,e,r){for(var n=t.points,i=[],a=0;a<n.length;a++)i.push(g_(n[a][0]*r)/r),i.push(g_(n[a][1]*r)/r);e.points=i.join(" ")}function az(t){return!t.smooth}function fme(t){var e=Oe(t,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,i){for(var a=0;a<e.length;a++){var o=e[a],s=r[o[0]];s!=null&&(n[o[1]]=g_(s*i)/i)}}}var hme={circle:[fme(["cx","cy","r"])],polyline:[iz,az],polygon:[iz,az]};function dme(t){for(var e=t.animators,r=0;r<e.length;r++)if(e[r].targetName==="shape")return!0;return!1}function gJ(t,e){var r=t.style,n=t.shape,i=hme[t.type],a={},o=e.animation,s="path",l=t.style.strokePercent,u=e.compress&&jK(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](n))&&!(o&&dme(t))&&!(l<1)){s=t.type;var c=Math.pow(10,u);i[0](n,a,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var h=t.path;f&&(h.beginPath(),t.buildPath(h,t.shape),t.pathUpdated());var d=h.getVersion(),p=t,v=p.__svgPathBuilder;(p.__svgPathVersion!==d||!v||l!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new lJ),v.reset(u),h.rebuildPath(v,l),v.generateStr(),p.__svgPathVersion=d,p.__svgPathStrokePercent=l),a.d=v.getStr()}return hD(a,t.transform),cD(a,r,t,e),fD(a,t),e.animation&&a4(t,a,e),e.emphasis&&ume(t,a,e),Xi(s,t.id+"",a)}function pme(t,e){var r=t.style,n=r.image;if(n&&!ft(n)&&(pJ(n)?n=n.src:vJ(n)&&(n=n.toDataURL())),!!n){var i=r.x||0,a=r.y||0,o=r.width,s=r.height,l={href:n,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),hD(l,t.transform),cD(l,r,t,e),fD(l,t),e.animation&&a4(t,l,e),Xi("image",t.id+"",l)}}function vme(t,e){var r=t.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var i=r.font||yh,a=r.x||0,o=Bue(r.y||0,LT(i),r.textBaseline),s=Fue[r.textAlign]||r.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(wY(r)){var u="",c=r.fontStyle,f=bY(r.fontSize);if(!parseFloat(f))return;var h=r.fontFamily||bK,d=r.fontWeight;u+="font-size:"+f+";font-family:"+h+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),d&&d!=="normal"&&(u+="font-weight:"+d+";"),l.style=u}else l.style="font: "+i;return n.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),hD(l,t.transform),cD(l,r,t,e),fD(l,t),e.animation&&a4(t,l,e),Xi("text",t.id+"",l,void 0,n)}}function oz(t,e){if(t instanceof yr)return gJ(t,e);if(t instanceof aa)return pme(t,e);if(t instanceof am)return vme(t,e)}function gme(t,e,r){var n=t.style;if(zue(n)){var i=Uue(t),a=r.shadowCache,o=a[i];if(!o){var s=t.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=n.shadowOffsetX||0,f=n.shadowOffsetY||0,h=n.shadowBlur,d=n_(n.shadowColor),p=d.opacity,v=d.color,g=h/2/l,m=h/2/u,x=g+" "+m;o=r.zrId+"-s"+r.shadowIdx++,r.defs[o]=Xi("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Xi("feDropShadow","",{dx:c/l,dy:f/u,stdDeviation:x,"flood-color":v,"flood-opacity":p})]),a[i]=o}e.filter=RT(o)}}function mJ(t,e,r,n){var i=t[r],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(GK(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(WK(i))a="radialGradient",o.cx=Jt(i.x,.5),o.cy=Jt(i.y,.5),o.r=Jt(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var f=o6(s[u].offset)*100+"%",h=s[u].color,d=n_(h),p=d.color,v=d.opacity,g={offset:f};g["stop-color"]=p,v<1&&(g["stop-opacity"]=v),l.push(Xi("stop",u+"",g))}var m=Xi(a,"",o,l),x=uD(m),S=n.gradientCache,b=S[x];b||(b=n.zrId+"-g"+n.gradientIdx++,S[x]=b,o.id=b,n.defs[b]=Xi(a,b,o,l)),e[r]=RT(b)}function yJ(t,e,r,n){var i=t.style[r],a=t.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",f;if(HK(i)){var h=i.imageWidth,d=i.imageHeight,p=void 0,v=i.image;if(ft(v)?p=v:pJ(v)?p=v.src:vJ(v)&&(p=v.toDataURL()),typeof Image=="undefined"){var g="Image width/height must been given explictly in svg-ssr renderer.";So(h,g),So(d,g)}else if(h==null||d==null){var m=function(R,L){if(R){var I=R.elm,N=h||L.width,k=d||L.height;R.tag==="pattern"&&(u?(k=1,N/=a.width):c&&(N=1,k/=a.height)),R.attrs.width=N,R.attrs.height=k,I&&(I.setAttribute("width",N),I.setAttribute("height",k))}},x=vL(p,null,t,function(R){l||m(w,R),m(f,R)});x&&x.width&&x.height&&(h=h||x.width,d=d||x.height)}f=Xi("image","img",{href:p,width:h,height:d}),o.width=h,o.height=d}else i.svgElement&&(f=Ft(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(f){var S,b;l?S=b=1:u?(b=1,S=o.width/a.width):c?(S=1,b=o.height/a.height):o.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(o.width=S),b!=null&&!isNaN(b)&&(o.height=b);var T=XK(i);T&&(o.patternTransform=T);var w=Xi("pattern","",o,[f]),E=uD(w),M=n.patternCache,A=M[E];A||(A=n.zrId+"-p"+n.patternIdx++,M[E]=A,o.id=A,w=n.defs[A]=Xi("pattern",A,o,[f])),e[r]=RT(A)}}function mme(t,e,r){var n=r.clipPathCache,i=r.defs,a=n[t.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var o={id:a};n[t.id]=a,i[a]=Xi("clipPath",a,o,[gJ(t,r)])}e["clip-path"]=RT(a)}function sz(t){return document.createTextNode(t)}function Vd(t,e,r){t.insertBefore(e,r)}function lz(t,e){t.removeChild(e)}function uz(t,e){t.appendChild(e)}function _J(t){return t.parentNode}function xJ(t){return t.nextSibling}function kA(t,e){t.textContent=e}var cz=58,yme=120,_me=Xi("","");function q6(t){return t===void 0}function pu(t){return t!==void 0}function xme(t,e,r){for(var n={},i=e;i<=r;++i){var a=t[i].key;a!==void 0&&(n[a]=i)}return n}function d1(t,e){var r=t.key===e.key,n=t.tag===e.tag;return n&&r}function m_(t){var e,r=t.children,n=t.tag;if(pu(n)){var i=t.elm=fJ(n);if(dD(_me,t),De(r))for(e=0;e<r.length;++e){var a=r[e];a!=null&&uz(i,m_(a))}else pu(t.text)&&!Nt(t.text)&&uz(i,sz(t.text))}else t.elm=sz(t.text);return t.elm}function SJ(t,e,r,n,i){for(;n<=i;++n){var a=r[n];a!=null&&Vd(t,m_(a),e)}}function ww(t,e,r,n){for(;r<=n;++r){var i=e[r];if(i!=null)if(pu(i.tag)){var a=_J(i.elm);lz(a,i.elm)}else lz(t,i.elm)}}function dD(t,e){var r,n=e.elm,i=t&&t.attrs||{},a=e.attrs||{};if(i!==a){for(r in a){var o=a[r],s=i[r];s!==o&&(o===!0?n.setAttribute(r,""):o===!1?n.removeAttribute(r):r==="style"?n.style.cssText=o:r.charCodeAt(0)!==yme?n.setAttribute(r,o):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(Qge,r,o):r.charCodeAt(3)===cz?n.setAttributeNS(eme,r,o):r.charCodeAt(5)===cz?n.setAttributeNS(cJ,r,o):n.setAttribute(r,o))}for(r in i)r in a||n.removeAttribute(r)}}function Sme(t,e,r){for(var n=0,i=0,a=e.length-1,o=e[0],s=e[a],l=r.length-1,u=r[0],c=r[l],f,h,d,p;n<=a&&i<=l;)o==null?o=e[++n]:s==null?s=e[--a]:u==null?u=r[++i]:c==null?c=r[--l]:d1(o,u)?(Eg(o,u),o=e[++n],u=r[++i]):d1(s,c)?(Eg(s,c),s=e[--a],c=r[--l]):d1(o,c)?(Eg(o,c),Vd(t,o.elm,xJ(s.elm)),o=e[++n],c=r[--l]):d1(s,u)?(Eg(s,u),Vd(t,s.elm,o.elm),s=e[--a],u=r[++i]):(q6(f)&&(f=xme(e,n,a)),h=f[u.key],q6(h)?Vd(t,m_(u),o.elm):(d=e[h],d.tag!==u.tag?Vd(t,m_(u),o.elm):(Eg(d,u),e[h]=void 0,Vd(t,d.elm,o.elm))),u=r[++i]);(n<=a||i<=l)&&(n>a?(p=r[l+1]==null?null:r[l+1].elm,SJ(t,p,r,i,l)):ww(t,e,n,a))}function Eg(t,e){var r=e.elm=t.elm,n=t.children,i=e.children;t!==e&&(dD(t,e),q6(e.text)?pu(n)&&pu(i)?n!==i&&Sme(r,n,i):pu(i)?(pu(t.text)&&kA(r,""),SJ(r,null,i,0,i.length-1)):pu(n)?ww(r,n,0,n.length-1):pu(t.text)&&kA(r,""):t.text!==e.text&&(pu(n)&&ww(r,n,0,n.length-1),kA(r,e.text)))}function bme(t,e){if(d1(t,e))Eg(t,e);else{var r=t.elm,n=_J(r);m_(e),n!==null&&(Vd(n,e.elm,xJ(r)),ww(n,[t],0,0))}return e}var wme=0,Tme=function(){function t(e,r,n){if(this.type="svg",this.refreshHover=fz(),this.configLayer=fz(),this.storage=r,this._opts=n=Ae({},n),this.root=e,this._id="zr"+wme++,this._oldVNode=QB(n.width,n.height),e&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=fJ("svg");dD(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(n.width,n.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",bme(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return oz(e,Y6(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var r=this.storage.getDisplayList(!0),n=this._width,i=this._height,a=Y6(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis;var o=[],s=this._bgVNode=Cme(n,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=Xi("g","main",{},[]);this._paintList(r,a,l?l.children:o),l&&o.push(l);var u=Oe(Er(a.defs),function(h){return a.defs[h]});if(u.length&&o.push(Xi("defs","defs",{},u)),e.animation){var c=nme(a.cssNodes,a.cssAnims,{newline:!0});if(c){var f=Xi("style","stl",{},[],c);o.push(f)}}return QB(n,i,o,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},uD(this.renderToVNode({animation:Jt(e.cssAnimation,!0),emphasis:Jt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Jt(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,r,n){for(var i=e.length,a=[],o=0,s,l,u=0,c=0;c<i;c++){var f=e[c];if(!f.invisible){var h=f.__clipPaths,d=h&&h.length||0,p=l&&l.length||0,v=void 0;for(v=Math.max(d-1,p-1);v>=0&&!(h&&l&&h[v]===l[v]);v--);for(var g=p-1;g>v;g--)o--,s=a[o-1];for(var m=v+1;m<d;m++){var x={};mme(h[m],x,r);var S=Xi("g","clip-g-"+u++,x,[]);(s?s.children:n).push(S),a[o++]=S,s=S}l=h;var b=oz(f,r);b&&(s?s.children:n).push(b)}}},t.prototype.resize=function(e,r){var n=this._opts,i=this.root,a=this._viewport;if(e!=null&&(n.width=e),r!=null&&(n.height=r),i&&a&&(a.style.display="none",e=Ig(i,0,n),r=Ig(i,1,n),a.style.display=""),this._width!==e||this._height!==r){if(this._width=e,this._height=r,a){var o=a.style;o.width=e+"px",o.height=r+"px"}if(uL(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",r));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",r))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var r=this.renderToString(),n="data:image/svg+xml;";return e?(r=Hue(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+encodeURIComponent(r)},t}();function fz(t){return function(){}}function Cme(t,e,r,n){var i;if(r&&r!=="none")if(i=Xi("rect","bg",{width:t,height:e,x:"0",y:"0"}),$K(r))mJ({fill:r},i.attrs,"fill",n);else if(uL(r))yJ({style:{fill:r},dirty:pi,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",n);else{var a=n_(r),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function Eme(t){t.registerPainter("svg",Tme)}function hz(t,e,r){var n=_h.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=n.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",n.setAttribute("data-zr-dom-id",t)),n.width=i*r,n.height=a*r,n}var FA=function(t){he(e,t);function e(r,n,i){var a=t.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||ew,typeof r=="string"?o=hz(r,n,i):Nt(r)&&(o=r,r=o.id),a.id=r,a.dom=o;var s=o.style;return s&&(MK(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=n,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=hz("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},e.prototype.createRepaintRects=function(r,n,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new sr(0,0,0,0);function c(x){if(!(!x.isFinite()||x.isZero()))if(o.length===0){var S=new sr(0,0,0,0);S.copy(x),o.push(S)}else{for(var b=!1,T=1/0,w=0,E=0;E<o.length;++E){var M=o[E];if(M.intersect(x)){var A=new sr(0,0,0,0);A.copy(M),A.union(x),o[E]=A,b=!0;break}else if(l){u.copy(x),u.union(M);var R=x.width*x.height,L=M.width*M.height,I=u.width*u.height,N=I-R-L;N<T&&(T=N,w=E)}}if(l&&(o[w].union(x),b=!0),!b){var S=new sr(0,0,0,0);S.copy(x),o.push(S)}l||(l=o.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,a,!0,!0),p=h.__isRendered&&(h.__dirty&ds||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&ds||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h&&h.shouldBePainted(i,a,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<o.length;){if(o[f].isZero()){o.splice(f,1);continue}for(var m=f+1;m<o.length;)o[f].intersect(o[m])?(g=!0,o[f].union(o[m]),o.splice(m,1)):m++;f++}}while(g);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(r,n){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=r+"px",o.height=n+"px"),a.width=r*i,a.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(r,n,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,x){if(o.clearRect(v,g,m,x),n&&n!=="transparent"){var S=void 0;if(ET(n)){var b=n.global||n.__width===m&&n.__height===x;S=b&&n.__canvasGradient||z6(o,n,{x:0,y:0,width:m,height:x}),n.__canvasGradient=S,n.__width=m,n.__height=x}else qle(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,S=U6(o,n,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));o.save(),o.fillStyle=S||n,o.fillRect(v,g,m,x),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(d,v,g,m,x),o.restore())}!i||u?p(0,0,s,l):i.length&&G(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},e}(al),dz=1e5,vd=314159,MS=.01,Ame=.001;function Mme(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function Rme(t,e){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Pme=function(){function t(e,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=n=Ae({},n||{}),this.dpr=n.devicePixelRatio||ew,this._singleCanvas=a,this.root=e;var o=e.style;o&&(MK(e),e.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new FA(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[vd]=d,d.zlevel=vd,s.push(vd),this._domRoot=e}else{this._width=Ig(e,0,n),this._height=Ig(e,1,n);var u=this._domRoot=Rme(this._width,this._height);e.appendChild(u)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var r=e.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<r;o++){var s=e[o];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(dz)),a||(a=n.ctx,a.save()),Qd(a,s,i,o===r-1))}a&&a.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(dz)},t.prototype.paintOne=function(e,r){QT(e,r)},t.prototype._paintList=function(e,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,r,n),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Sp(function(){l._paintList(e,r,n,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(vd).ctx,r=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,r,n)})},t.prototype._doPaintList=function(e,r,n){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&a.push(u)}for(var c=!0,f=!1,h=function(v){var g=a[v],m=g.ctx,x=o&&g.createRepaintRects(e,r,d._width,d._height),S=n?g.__startIndex:g.__drawIndex,b=!n&&g.incremental&&Date.now,T=b&&Date.now(),w=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,w,x);else if(S===g.__startIndex){var E=e[S];(!E.incremental||!E.notClear||n)&&g.clear(!1,w,x)}S===-1&&(console.error("For some unknown reason. drawIndex is -1"),S=g.__startIndex);var M,A=function(N){var k={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(M=S;M<g.__endIndex;M++){var z=e[M];if(z.__inHover&&(f=!0),i._doPaintEl(z,g,o,N,k,M===g.__endIndex-1),b){var B=Date.now()-T;if(B>15)break}}k.prevElClipPaths&&m.restore()};if(x)if(x.length===0)M=g.__endIndex;else for(var R=d.dpr,L=0;L<x.length;++L){var I=x[L];m.save(),m.beginPath(),m.rect(I.x*R,I.y*R,I.width*R,I.height*R),m.clip(),A(I),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=M,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<a.length;p++)h(p);return br.wxa&&G(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,r,n,i,a,o){var s=r.ctx;if(n){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(Qd(s,e,a,o),e.setPrevPaintRect(l))}else Qd(s,e,a,o)},t.prototype.getLayer=function(e,r){this._singleCanvas&&!this._needsManuallyCompositing&&(e=vd);var n=this._layers[e];return n||(n=new FA("zr_"+e,this,this.dpr),n.zlevel=e,n.__builtin__=!0,this._layerConfig[e]?xt(n,this._layerConfig[e],!0):this._layerConfig[e-MS]&&xt(n,this._layerConfig[e-MS],!0),r&&(n.virtual=r),this.insertLayer(e,n),n.initContext()),n},t.prototype.insertLayer=function(e,r){var n=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!n[e]&&Mme(r)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=n[i[l]]}if(i.splice(l+1,0,e),n[e]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(r.dom,u.nextSibling):o.appendChild(r.dom)}else o.firstChild?o.insertBefore(r.dom,o.firstChild):o.appendChild(r.dom);r.painter||(r.painter=this)}},t.prototype.eachLayer=function(e,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i];e.call(r,this._layers[a],a)}},t.prototype.eachBuiltinLayer=function(e,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__&&e.call(r,o,a)}},t.prototype.eachOtherLayer=function(e,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var a=n[i],o=this._layers[a];o.__builtin__||e.call(r,o,a)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<e.length;n++){var i=e[n];if(i.zlevel!==e[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;s!==u&&(s=u,o=0),i.incremental?(c=this.getLayer(u+Ame,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?MS:0),this._needsManuallyCompositing),c.__builtin__||eL("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),a=c),i.__dirty&ds&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,G(this._layers,function(r){r.setUnpainted()})},t.prototype.configLayer=function(e,r){if(r){var n=this._layerConfig;n[e]?xt(n[e],r,!0):n[e]=r;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+MS){var o=this._layers[a];xt(o,n[e],!0)}}}},t.prototype.delLayer=function(e){var r=this._layers,n=this._zlevelList,i=r[e];i&&(i.dom.parentNode.removeChild(i.dom),delete r[e],n.splice(hr(n,e),1))},t.prototype.resize=function(e,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),r!=null&&(i.height=r),e=Ig(a,0,i),r=Ig(a,1,i),n.style.display="",this._width!==e||r!==this._height){n.style.width=e+"px",n.style.height=r+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,r);this.refresh(!0)}this._width=e,this._height=r}else{if(e==null||r==null)return;this._width=e,this._height=r,this.getLayer(vd).resize(e,r)}return this},t.prototype.clearLayer=function(e){var r=this._layers[e];r&&r.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[vd].dom;var r=new FA("image",this,e.pixelRatio||this.dpr);r.initContext(),r.clear(!1,e.backgroundColor||this._backgroundColor);var n=r.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,a=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Qd(n,c,o,l===u-1)}return r.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();function pD(t){t.registerPainter("canvas",Pme)}var Lme=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="dataset",r}return e.prototype.init=function(r,n,i){t.prototype.init.call(this,r,n,i),this._sourceManager=new kq(this),tB(this)},e.prototype.mergeOption=function(r,n){t.prototype.mergeOption.call(this,r,n),tB(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Au},e}(fr),Dme=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="dataset",r}return e.type="dataset",e}(_n);function bJ(t){t.registerComponentModel(Lme),t.registerComponentView(Dme)}Ot([pD,bJ]);Ot(oJ);function pz(t,e,r){typeof e=="object"&&(r=e,e=null);var n=this,i;if(!(t instanceof Function)){i=[];for(var a in t)t.hasOwnProperty(a)&&i.push(a)}var o=function(l){if(n.apply(this,arguments),t instanceof Function?vz(this,t.call(this,l)):Ime(this,t,i),this.constructor===o)for(var u=o.__initializers__,c=0;c<u.length;c++)u[c].apply(this,arguments)};o.__super__=n,n.__initializers__?o.__initializers__=n.__initializers__.slice():o.__initializers__=[],e&&o.__initializers__.push(e);var s=function(){};return s.prototype=n.prototype,o.prototype=new s,o.prototype.constructor=o,vz(o.prototype,r),o.extend=n.extend,o.derive=n.extend,o}function vz(t,e){if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function Ime(t,e,r){for(var n=0;n<r.length;n++){var i=r[n];t[i]=e[i]}}const Nme={extend:pz,derive:pz};function Ome(t,e){this.action=t,this.context=e}var vD={trigger:function(t){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(t)){var e=this.__handlers__[t],r=e.length,n=-1,i=arguments;switch(i.length){case 1:for(;++n<r;)e[n].action.call(e[n].context);return;case 2:for(;++n<r;)e[n].action.call(e[n].context,i[1]);return;case 3:for(;++n<r;)e[n].action.call(e[n].context,i[1],i[2]);return;case 4:for(;++n<r;)e[n].action.call(e[n].context,i[1],i[2],i[3]);return;case 5:for(;++n<r;)e[n].action.call(e[n].context,i[1],i[2],i[3],i[4]);return;default:for(;++n<r;)e[n].action.apply(e[n].context,Array.prototype.slice.call(i,1));return}}},on:function(t,e,r){if(!(!t||!e)){var n=this.__handlers__||(this.__handlers__={});if(!n[t])n[t]=[];else if(this.has(t,e))return;var i=new Ome(e,r||this);return n[t].push(i),this}},once:function(t,e,r){if(!t||!e)return;var n=this;function i(){n.off(t,i),e.apply(this,arguments)}return this.on(t,i,r)},before:function(t,e,r){if(!(!t||!e))return t="before"+t,this.on(t,e,r)},after:function(t,e,r){if(!(!t||!e))return t="after"+t,this.on(t,e,r)},success:function(t,e){return this.once("success",t,e)},error:function(t,e){return this.once("error",t,e)},off:function(t,e){var r=this.__handlers__||(this.__handlers__={});if(!e){r[t]=[];return}if(r[t]){for(var n=r[t],i=[],a=0;a<n.length;a++)e&&n[a].action!==e&&i.push(n[a]);r[t]=i}return this},has:function(t,e){var r=this.__handlers__;if(!r||!r[t])return!1;for(var n=r[t],i=0;i<n.length;i++)if(n[i].action===e)return!0}},kme=0,Fme=Array.prototype,Bme=Fme.forEach,di={genGUID:function(){return++kme},relative2absolute:function(t,e){if(!e||t.match(/^\//))return t;for(var r=t.split("/"),n=e.split("/"),i=r[0];i==="."||i==="..";)i===".."&&n.pop(),r.shift(),i=r[0];return n.join("/")+"/"+r.join("/")},extend:function(t,e){if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},defaults:function(t,e){if(e)for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t},extendWithPropList:function(t,e,r){if(e)for(var n=0;n<r.length;n++){var i=r[n];t[i]=e[i]}return t},defaultsWithPropList:function(t,e,r){if(e)for(var n=0;n<r.length;n++){var i=r[n];t[i]==null&&(t[i]=e[i])}return t},each:function(t,e,r){if(t&&e)if(t.forEach&&t.forEach===Bme)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,i=t.length;n<i;n++)e.call(r,t[n],n,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(r,t[a],a,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return t?t.length===+t.length:!1},clone:function(t){if(di.isObject(t)){if(di.isArray(t))return t.slice();if(di.isArrayLike(t)){for(var e=new t.constructor(t.length),r=0;r<t.length;r++)e[r]=t[r];return e}else return di.extend({},t)}else return t}},_a=function(){this.__uid__=di.genGUID()};_a.__initializers__=[function(t){di.extend(this,t)}];di.extend(_a,Nme);di.extend(_a.prototype,vD);var gz=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],mz=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function zme(t){for(var e={},r={},n=0;n<gz.length;n++){var i=gz[n];o(i)}for(var n=0;n<mz.length;n++){var a=mz[n];r[a]=t.getParameter(t[a])}this.getExtension=function(s){return s in e||o(s),e[s]},this.getParameter=function(s){return r[s]};function o(s){if(t.getExtension){var l=t.getExtension(s);l||(l=t.getExtension("MOZ_"+s)),l||(l=t.getExtension("WEBKIT_"+s)),e[s]=l}}}const ze={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444};function Ume(t){var e=new XMLHttpRequest;e.open("get",t.url),e.responseType=t.responseType||"text",t.onprogress&&(e.onprogress=function(r){if(r.lengthComputable){var n=r.loaded/r.total;t.onprogress(n,r.loaded,r.total)}else t.onprogress(null)}),e.onload=function(r){e.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(e.response)},t.onerror&&(e.onerror=t.onerror),e.send(null)}const Vme={get:Ume};var BA,ln={};ln.supportWebGL=function(){if(BA==null)try{var t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(!e)throw new Error}catch(r){BA=!1}return BA};ln.Int8Array=typeof Int8Array=="undefined"?Array:Int8Array;ln.Uint8Array=typeof Uint8Array=="undefined"?Array:Uint8Array;ln.Uint16Array=typeof Uint16Array=="undefined"?Array:Uint16Array;ln.Uint32Array=typeof Uint32Array=="undefined"?Array:Uint32Array;ln.Int16Array=typeof Int16Array=="undefined"?Array:Int16Array;ln.Float32Array=typeof Float32Array=="undefined"?Array:Float32Array;ln.Float64Array=typeof Float64Array=="undefined"?Array:Float64Array;var ep={};typeof window!="undefined"?ep=window:typeof global!="undefined"&&(ep=global);ln.requestAnimationFrame=ep.requestAnimationFrame||ep.msRequestAnimationFrame||ep.mozRequestAnimationFrame||ep.webkitRequestAnimationFrame||function(t){setTimeout(t,16)};ln.createCanvas=function(){return document.createElement("canvas")};ln.createImage=function(){return new ep.Image};ln.request={get:Vme.get};ln.addEventListener=function(t,e,r,n){t.addEventListener(e,r,n)};ln.removeEventListener=function(t,e,r){t.removeEventListener(e,r)};var ta=function(){this.head=null,this.tail=null,this._length=0};ta.prototype.insert=function(t){var e=new ta.Entry(t);return this.insertEntry(e),e};ta.prototype.insertAt=function(t,e){if(!(t<0)){for(var r=this.head,n=0;r&&n!=t;)r=r.next,n++;if(r){var i=new ta.Entry(e),a=r.prev;a?(a.next=i,i.prev=a):this.head=i,i.next=r,r.prev=i}else this.insert(e)}};ta.prototype.insertBeforeEntry=function(t,e){var r=new ta.Entry(t),n=e.prev;n?(n.next=r,r.prev=n):this.head=r,r.next=e,e.prev=r,this._length++};ta.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++};ta.prototype.remove=function(t){var e=t.prev,r=t.next;e?e.next=r:this.head=r,r?r.prev=e:this.tail=e,t.next=t.prev=null,this._length--};ta.prototype.removeAt=function(t){if(!(t<0)){for(var e=this.head,r=0;e&&r!=t;)e=e.next,r++;if(e)return this.remove(e),e.value}};ta.prototype.getHead=function(){if(this.head)return this.head.value};ta.prototype.getTail=function(){if(this.tail)return this.tail.value};ta.prototype.getAt=function(t){if(!(t<0)){for(var e=this.head,r=0;e&&r!=t;)e=e.next,r++;return e.value}};ta.prototype.indexOf=function(t){for(var e=this.head,r=0;e;){if(e.value===t)return r;e=e.next,r++}};ta.prototype.length=function(){return this._length};ta.prototype.isEmpty=function(){return this._length===0};ta.prototype.forEach=function(t,e){for(var r=this.head,n=0,i=typeof e!="undefined";r;)i?t.call(e,r.value,n):t(r.value,n),r=r.next,n++};ta.prototype.clear=function(){this.tail=this.head=null,this._length=0};ta.Entry=function(t){this.value=t,this.next=null,this.prev=null};var $p=function(t){this._list=new ta,this._map={},this._maxSize=t||10};$p.prototype.setMaxSize=function(t){this._maxSize=t};$p.prototype.put=function(t,e){if(!this._map.hasOwnProperty(t)){var r=this._list.length();if(r>=this._maxSize&&r>0){var n=this._list.head;this._list.remove(n),delete this._map[n.key]}var i=this._list.insert(e);i.key=t,this._map[t]=i}};$p.prototype.get=function(t){var e=this._map[t];if(this._map.hasOwnProperty(t))return e!==this._list.tail&&(this._list.remove(e),this._list.insertEntry(e)),e.value};$p.prototype.remove=function(t){var e=this._map[t];typeof e!="undefined"&&(delete this._map[t],this._list.remove(e))};$p.prototype.clear=function(){this._list.clear(),this._map={}};var Xn={},yz={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Bl(t){return t=Math.round(t),t<0?0:t>255?255:t}function Hme(t){return t=Math.round(t),t<0?0:t>360?360:t}function y_(t){return t<0?0:t>1?1:t}function zA(t){return t.length&&t.charAt(t.length-1)==="%"?Bl(parseFloat(t)/100*255):Bl(parseInt(t,10))}function um(t){return t.length&&t.charAt(t.length-1)==="%"?y_(parseFloat(t)/100):y_(parseFloat(t))}function UA(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function Qf(t,e,r){return t+(e-t)*r}function Tl(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Z6(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var wJ=new $p(20),RS=null;function Fv(t,e){RS&&Z6(RS,e),RS=wJ.put(t,RS||e.slice())}Xn.parse=function(t,e){if(t){e=e||[];var r=wJ.get(t);if(r)return Z6(e,r);t=t+"";var n=t.replace(/ /g,"").toLowerCase();if(n in yz)return Z6(e,yz[n]),Fv(t,e),e;if(n.charAt(0)==="#"){if(n.length===4){var i=parseInt(n.substr(1),16);if(!(i>=0&&i<=4095)){Tl(e,0,0,0,1);return}return Tl(e,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,1),Fv(t,e),e}else if(n.length===7){var i=parseInt(n.substr(1),16);if(!(i>=0&&i<=16777215)){Tl(e,0,0,0,1);return}return Tl(e,(i&16711680)>>16,(i&65280)>>8,i&255,1),Fv(t,e),e}return}var a=n.indexOf("("),o=n.indexOf(")");if(a!==-1&&o+1===n.length){var s=n.substr(0,a),l=n.substr(a+1,o-(a+1)).split(","),u=1;switch(s){case"rgba":if(l.length!==4){Tl(e,0,0,0,1);return}u=um(l.pop());case"rgb":if(l.length!==3){Tl(e,0,0,0,1);return}return Tl(e,zA(l[0]),zA(l[1]),zA(l[2]),u),Fv(t,e),e;case"hsla":if(l.length!==4){Tl(e,0,0,0,1);return}return l[3]=um(l[3]),J6(l,e),Fv(t,e),e;case"hsl":if(l.length!==3){Tl(e,0,0,0,1);return}return J6(l,e),Fv(t,e),e;default:return}}Tl(e,0,0,0,1)}};Xn.parseToFloat=function(t,e){if(e=Xn.parse(t,e),!!e)return e[0]/=255,e[1]/=255,e[2]/=255,e};function J6(t,e){var r=(parseFloat(t[0])%360+360)%360/360,n=um(t[1]),i=um(t[2]),a=i<=.5?i*(n+1):i+n-i*n,o=i*2-a;return e=e||[],Tl(e,Bl(UA(o,a,r+1/3)*255),Bl(UA(o,a,r)*255),Bl(UA(o,a,r-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function Gme(t){if(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-e)/6+o/2)/o,f=((a-r)/6+o/2)/o,h=((a-n)/6+o/2)/o;e===a?l=h-f:r===a?l=1/3+c-h:n===a&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return t[3]!=null&&d.push(t[3]),d}}Xn.lift=function(t,e){var r=Xn.parse(t);if(r){for(var n=0;n<3;n++)e<0?r[n]=r[n]*(1-e)|0:r[n]=(255-r[n])*e+r[n]|0;return Xn.stringify(r,r.length===4?"rgba":"rgb")}};Xn.toHex=function(t){var e=Xn.parse(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)};Xn.fastLerp=function(t,e,r){if(!(!(e&&e.length)||!(t>=0&&t<=1))){r=r||[];var n=t*(e.length-1),i=Math.floor(n),a=Math.ceil(n),o=e[i],s=e[a],l=n-i;return r[0]=Bl(Qf(o[0],s[0],l)),r[1]=Bl(Qf(o[1],s[1],l)),r[2]=Bl(Qf(o[2],s[2],l)),r[3]=y_(Qf(o[3],s[3],l)),r}};Xn.fastMapToColor=Xn.fastLerp;Xn.lerp=function(t,e,r){if(!(!(e&&e.length)||!(t>=0&&t<=1))){var n=t*(e.length-1),i=Math.floor(n),a=Math.ceil(n),o=Xn.parse(e[i]),s=Xn.parse(e[a]),l=n-i,u=Xn.stringify([Bl(Qf(o[0],s[0],l)),Bl(Qf(o[1],s[1],l)),Bl(Qf(o[2],s[2],l)),y_(Qf(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:a,value:n}:u}};Xn.mapToColor=Xn.lerp;Xn.modifyHSL=function(t,e,r,n){if(t=Xn.parse(t),t)return t=Gme(t),e!=null&&(t[0]=Hme(e)),r!=null&&(t[1]=um(r)),n!=null&&(t[2]=um(n)),Xn.stringify(J6(t),"rgba")};Xn.modifyAlpha=function(t,e){if(t=Xn.parse(t),t&&e!=null)return t[3]=y_(e),Xn.stringify(t,"rgba")};Xn.stringify=function(t,e){if(!(!t||!t.length)){var r=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(r+=","+t[3]),e+"("+r+")"}};var Wme=Xn.parseToFloat,VA={};function _z(t){var e=Object.keys(t);e.sort();for(var r=[],n=0;n<e.length;n++){var i=e[n],a=t[i];a===null?r.push(i):r.push(i+" "+a.toString())}return r.join(`
`)}function $me(t,e,r){r.sort();for(var n=[],i=0;i<r.length;i++){var a=r[i];n.push(a)}var o=_z(t)+`
`+_z(e)+`
`+n.join(`
`);if(VA[o])return VA[o];var s=di.genGUID();return VA[o]=s,s}var Zs=_a.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(t,e){e===void 0&&console.warn('Uniform value "'+t+'" is undefined');var r=this.uniforms[t];r&&(typeof e=="string"&&(e=Wme(e)||e),r.value=e,this.autoUpdateTextureStatus&&r.type==="t"&&(e?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var e in t){var r=t[e];this.setUniform(e,r)}},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,e){if(typeof t=="object")for(var r in t){var n=t[r];this.setUniform(r,n)}else this.setUniform(t,e)},get:function(t){var e=this.uniforms[t];if(e)return e.value},attachShader:function(t,e){var r=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var n=this.uniforms;this._enabledUniforms=Object.keys(n),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(u){var c=this.uniforms[u].type;return c==="t"||c==="tv"},this);var i=this.vertexDefines,a=this.fragmentDefines;if(this.vertexDefines=di.clone(t.vertexDefines),this.fragmentDefines=di.clone(t.fragmentDefines),e){for(var o in r)n[o]&&(n[o].value=r[o].value);di.defaults(this.vertexDefines,i),di.defaults(this.fragmentDefines,a)}var s={};for(var l in t.textures)s[l]={shaderType:t.textures[l].shaderType,type:t.textures[l].type,enabled:e&&this._textureStatus[l]?this._textureStatus[l].enabled:!1};this._textureStatus=s,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var e in this.uniforms)t.uniforms[e].value=this.uniforms[e].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=di.clone(this.vertexDefines),t.fragmentDefines=di.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,e,r){var n=this.vertexDefines,i=this.fragmentDefines;t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<3&&(r=e,e=t,t="both"),r=r!=null?r:null,(t==="vertex"||t==="both")&&n[e]!==r&&(n[e]=r,this._programKey=""),(t==="fragment"||t==="both")&&i[e]!==r&&(i[e]=r,t!=="both"&&(this._programKey=""))},undefine:function(t,e){t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<2&&(e=t,t="both"),(t==="vertex"||t==="both")&&this.isDefined("vertex",e)&&(delete this.vertexDefines[e],this._programKey=""),(t==="fragment"||t==="both")&&this.isDefined("fragment",e)&&(delete this.fragmentDefines[e],t!=="both"&&(this._programKey=""))},isDefined:function(t,e){switch(t){case"vertex":return this.vertexDefines[e]!==void 0;case"fragment":return this.fragmentDefines[e]!==void 0}},getDefine:function(t,e){switch(t){case"vertex":return this.vertexDefines[e];case"fragment":return this.fragmentDefines[e]}},enableTexture:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)this.enableTexture(t[e]);return}var r=this._textureStatus[t];if(r){var n=r.enabled;n||(r.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var t=this._textureStatus;for(var e in t)t[e].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)this.disableTexture(t[e]);return}var r=this._textureStatus[t];if(r){var n=!r.enabled;n||(r.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var t=this._textureStatus;for(var e in t)t[e].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var e=this._textureStatus;return!!e[t]&&e[t].enabled},getEnabledTextures:function(){var t=[],e=this._textureStatus;for(var r in e)e[r].enabled&&t.push(r);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=$me(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),S3=1e-6,xa=Array,Ng=Math.random,Qe={};Qe.create=function(){var t=new xa(2);return t[0]=0,t[1]=0,t};Qe.clone=function(t){var e=new xa(2);return e[0]=t[0],e[1]=t[1],e};Qe.fromValues=function(t,e){var r=new xa(2);return r[0]=t,r[1]=e,r};Qe.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t};Qe.set=function(t,e,r){return t[0]=e,t[1]=r,t};Qe.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t};Qe.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t};Qe.sub=Qe.subtract;Qe.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t};Qe.mul=Qe.multiply;Qe.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t};Qe.div=Qe.divide;Qe.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t};Qe.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t};Qe.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t};Qe.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t};Qe.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)};Qe.dist=Qe.distance;Qe.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n};Qe.sqrDist=Qe.squaredDistance;Qe.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)};Qe.len=Qe.length;Qe.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r};Qe.sqrLen=Qe.squaredLength;Qe.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t};Qe.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t};Qe.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t};Qe.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]};Qe.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t};Qe.lerp=function(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t};Qe.random=function(t,e){e=e||1;var r=GLMAT_RANDOM()*2*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t};Qe.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t};Qe.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t};Qe.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t};Qe.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t};Qe.forEach=function(){var t=Qe.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();var lr=function(t,e){t=t||0,e=e||0,this.array=Qe.fromValues(t,e),this._dirty=!0};lr.prototype={constructor:lr,add:function(t){return Qe.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e){return this.array[0]=t,this.array[1]=e,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new lr(this.x,this.y)},copy:function(t){return Qe.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,e){return Qe.cross(t.array,this.array,e.array),t._dirty=!0,this},dist:function(t){return Qe.dist(this.array,t.array)},distance:function(t){return Qe.distance(this.array,t.array)},div:function(t){return Qe.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Qe.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Qe.dot(this.array,t.array)},len:function(){return Qe.len(this.array)},length:function(){return Qe.length(this.array)},lerp:function(t,e,r){return Qe.lerp(this.array,t.array,e.array,r),this._dirty=!0,this},min:function(t){return Qe.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Qe.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Qe.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Qe.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Qe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Qe.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Qe.random(this.array,t),this._dirty=!0,this},scale:function(t){return Qe.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return Qe.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return Qe.sqrDist(this.array,t.array)},squaredDistance:function(t){return Qe.squaredDistance(this.array,t.array)},sqrLen:function(){return Qe.sqrLen(this.array)},squaredLength:function(){return Qe.squaredLength(this.array)},sub:function(t){return Qe.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Qe.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return Qe.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return Qe.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return Qe.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Qe.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};if(Object.defineProperty){var xz=lr.prototype;Object.defineProperty(xz,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(xz,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}lr.add=function(t,e,r){return Qe.add(t.array,e.array,r.array),t._dirty=!0,t};lr.set=function(t,e,r){return Qe.set(t.array,e,r),t._dirty=!0,t};lr.copy=function(t,e){return Qe.copy(t.array,e.array),t._dirty=!0,t};lr.cross=function(t,e,r){return Qe.cross(t.array,e.array,r.array),t._dirty=!0,t};lr.dist=function(t,e){return Qe.distance(t.array,e.array)};lr.distance=lr.dist;lr.div=function(t,e,r){return Qe.divide(t.array,e.array,r.array),t._dirty=!0,t};lr.divide=lr.div;lr.dot=function(t,e){return Qe.dot(t.array,e.array)};lr.len=function(t){return Qe.length(t.array)};lr.lerp=function(t,e,r,n){return Qe.lerp(t.array,e.array,r.array,n),t._dirty=!0,t};lr.min=function(t,e,r){return Qe.min(t.array,e.array,r.array),t._dirty=!0,t};lr.max=function(t,e,r){return Qe.max(t.array,e.array,r.array),t._dirty=!0,t};lr.mul=function(t,e,r){return Qe.multiply(t.array,e.array,r.array),t._dirty=!0,t};lr.multiply=lr.mul;lr.negate=function(t,e){return Qe.negate(t.array,e.array),t._dirty=!0,t};lr.normalize=function(t,e){return Qe.normalize(t.array,e.array),t._dirty=!0,t};lr.random=function(t,e){return Qe.random(t.array,e),t._dirty=!0,t};lr.scale=function(t,e,r){return Qe.scale(t.array,e.array,r),t._dirty=!0,t};lr.scaleAndAdd=function(t,e,r,n){return Qe.scaleAndAdd(t.array,e.array,r.array,n),t._dirty=!0,t};lr.sqrDist=function(t,e){return Qe.sqrDist(t.array,e.array)};lr.squaredDistance=lr.sqrDist;lr.sqrLen=function(t){return Qe.sqrLen(t.array)};lr.squaredLength=lr.sqrLen;lr.sub=function(t,e,r){return Qe.subtract(t.array,e.array,r.array),t._dirty=!0,t};lr.subtract=lr.sub;lr.transformMat2=function(t,e,r){return Qe.transformMat2(t.array,e.array,r.array),t._dirty=!0,t};lr.transformMat2d=function(t,e,r){return Qe.transformMat2d(t.array,e.array,r.array),t._dirty=!0,t};lr.transformMat3=function(t,e,r){return Qe.transformMat3(t.array,e.array,r.array),t._dirty=!0,t};lr.transformMat4=function(t,e,r){return Qe.transformMat4(t.array,e.array,r.array),t._dirty=!0,t};var Sz=1,bz=2,HA=3,wz={};function jme(t){for(var e=t.split(`
`),r=0,n=e.length;r<n;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function Tz(t,e,r){if(!t.getShaderParameter(e,t.COMPILE_STATUS))return[t.getShaderInfoLog(e),jme(r)].join(`
`)}var Cz=new ln.Float32Array(16),Xme=_a.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var e=this._locations[t];return e!=null},useTextureSlot:function(t,e,r){e&&(t.gl.activeTexture(t.gl.TEXTURE0+r),e.isRenderable()?e.bind(t):e.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,e){var r=this._textureSlot;return this.useTextureSlot(t,e,r),this._textureSlot++,r},setUniform:function(t,e,r,n){var i=this._locations,a=i[r];if(a==null)return!1;switch(e){case"m4":if(!(n instanceof Float32Array)){for(var o=0;o<n.length;o++)Cz[o]=n[o];n=Cz}t.uniformMatrix4fv(a,!1,n);break;case"2i":t.uniform2i(a,n[0],n[1]);break;case"2f":t.uniform2f(a,n[0],n[1]);break;case"3i":t.uniform3i(a,n[0],n[1],n[2]);break;case"3f":t.uniform3f(a,n[0],n[1],n[2]);break;case"4i":t.uniform4i(a,n[0],n[1],n[2],n[3]);break;case"4f":t.uniform4f(a,n[0],n[1],n[2],n[3]);break;case"1i":t.uniform1i(a,n);break;case"1f":t.uniform1f(a,n);break;case"1fv":t.uniform1fv(a,n);break;case"1iv":t.uniform1iv(a,n);break;case"2iv":t.uniform2iv(a,n);break;case"2fv":t.uniform2fv(a,n);break;case"3iv":t.uniform3iv(a,n);break;case"3fv":t.uniform3fv(a,n);break;case"4iv":t.uniform4iv(a,n);break;case"4fv":t.uniform4fv(a,n);break;case"m2":case"m2v":t.uniformMatrix2fv(a,!1,n);break;case"m3":case"m3v":t.uniformMatrix3fv(a,!1,n);break;case"m4v":if(Array.isArray(n)&&Array.isArray(n[0])){for(var s=new ln.Float32Array(n.length*16),l=0,o=0;o<n.length;o++)for(var u=n[o],c=0;c<16;c++)s[l++]=u[c];t.uniformMatrix4fv(a,!1,s)}else t.uniformMatrix4fv(a,!1,n);break}return!0},setUniformOfSemantic:function(t,e,r){var n=this.uniformSemantics[e];return n?this.setUniform(t,n.type,n.symbol,r):!1},enableAttributes:function(t,e,r){var n=t.gl,i=this._program,a=this._locations,o;r?o=r.__enabledAttributeList:o=wz[t.__uid__],o||(r?o=r.__enabledAttributeList=[]:o=wz[t.__uid__]=[]);for(var s=[],l=0;l<e.length;l++){var u=e[l];if(!this.attributes[u]){s[l]=-1;continue}var c=a[u];if(c==null){if(c=n.getAttribLocation(i,u),c===-1){s[l]=-1;continue}a[u]=c}s[l]=c,o[c]?o[c]=bz:o[c]=Sz}for(var l=0;l<o.length;l++)switch(o[l]){case Sz:n.enableVertexAttribArray(l),o[l]=HA;break;case bz:o[l]=HA;break;case HA:n.disableVertexAttribArray(l),o[l]=0;break}return s},getAttribLocation:function(t,e){var r=this._locations,n=r[e];return n==null&&(n=t.getAttribLocation(this._program,e),r[e]=n),n},buildProgram:function(t,e,r,n){var i=t.createShader(t.VERTEX_SHADER),a=t.createProgram();t.shaderSource(i,r),t.compileShader(i);var o=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(o,n),t.compileShader(o);var s=Tz(t,i,r);if(s||(s=Tz(t,o,n),s))return s;if(t.attachShader(a,i),t.attachShader(a,o),e.attributeSemantics.POSITION)t.bindAttribLocation(a,0,e.attributeSemantics.POSITION.symbol);else{var l=Object.keys(this.attributes);t.bindAttribLocation(a,0,l[0])}if(t.linkProgram(a),t.deleteShader(i),t.deleteShader(o),this._program=a,this.vertexCode=r,this.fragmentCode=n,!t.getProgramParameter(a,t.LINK_STATUS))return`Could not link program
`+t.getProgramInfoLog(a);for(var u=0;u<e.uniforms.length;u++){var c=e.uniforms[u];this._locations[c]=t.getUniformLocation(a,c)}}}),Kme=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function Ez(t,e,r){function n(o,s,l,u){var c="";isNaN(s)&&(s in e?s=e[s]:s=i[s]),isNaN(l)&&(l in e?l=e[l]:l=i[l]);for(var f=parseInt(s);f<parseInt(l);f++)c+="{"+u.replace(/float\s*\(\s*_idx_\s*\)/g,f.toFixed(1)).replace(/_idx_/g,f)+"}";return c}var i={};for(var a in r)i[a+"_COUNT"]=r[a];return t.replace(Kme,n)}function GA(t,e,r){var n=[];if(e)for(var i in e){var a=e[i];a>0&&n.push("#define "+i.toUpperCase()+"_COUNT "+a)}if(r)for(var o=0;o<r.length;o++){var s=r[o];n.push("#define "+s.toUpperCase()+"_ENABLED")}for(var s in t){var l=t[s];l===null?n.push("#define "+s):n.push("#define "+s+" "+l.toString())}return n.join(`
`)}function Yme(t){for(var e=[],r=0;r<t.length;r++)e.push("#extension GL_"+t[r]+" : enable");return e.join(`
`)}function qme(t){return["precision",t,"float"].join(" ")+`;
`+["precision",t,"int"].join(" ")+`;
`+["precision",t,"sampler2D"].join(" ")+`;
`}function TJ(t){this._renderer=t,this._cache={}}TJ.prototype.getProgram=function(t,e,r){var n=this._cache,i=t.isSkinnedMesh&&t.isSkinnedMesh(),a=t.isInstancedMesh&&t.isInstancedMesh(),o="s"+e.shader.shaderID+"m"+e.getProgramKey();r&&(o+="se"+r.getProgramKey(t.lightGroup)),i&&(o+=",sk"+t.joints.length),a&&(o+=",is");var b=n[o];if(b)return b;var s=r?r.getLightsNumbers(t.lightGroup):{},l=this._renderer,u=l.gl,c=e.getEnabledTextures(),f="";if(i){var h={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>l.getMaxJointNumber()&&(h.USE_SKIN_MATRICES_TEXTURE=null),f+=`
`+GA(h)+`
`}a&&(f+=`
#define INSTANCING
`);var d=f+GA(e.vertexDefines,s,c),p=f+GA(e.fragmentDefines,s,c),v=d+`
`+e.shader.vertex,g=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(w){return l.getGLExtension(w)!=null});g.indexOf("EXT_shader_texture_lod")>=0&&(p+=`
#define SUPPORT_TEXTURE_LOD`),g.indexOf("OES_standard_derivatives")>=0&&(p+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var m=Yme(g)+`
`+qme(e.precision)+`
`+p+`
`+e.shader.fragment,x=Ez(v,e.vertexDefines,s),S=Ez(m,e.fragmentDefines,s),b=new Xme;b.uniformSemantics=e.shader.uniformSemantics,b.attributes=e.shader.attributes;var T=b.buildProgram(u,e.shader,x,S);return b.__error=T,n[o]=b,b};var Az=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Zme=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,Mz=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Jme={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function rc(t){for(var e=[],r=0;r<t;r++)e[r]=0;return e}var Rz={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return rc(2)},vec3:function(){return rc(3)},vec4:function(){return rc(4)},ivec2:function(){return rc(2)},ivec3:function(){return rc(3)},ivec4:function(){return rc(4)},mat2:function(){return rc(4)},mat3:function(){return rc(9)},mat4:function(){return rc(16)},array:function(){return[]}},Q6=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],CJ=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],EJ=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Qme={vec4:4,vec3:3,vec2:2,float:1},WA={},AJ={};function e0e(t,e){var r="vertex:"+t+"fragment:"+e;if(WA[r])return WA[r];var n=di.genGUID();return WA[r]=n,AJ[n]={vertex:t,fragment:e},n}function Pz(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Bv(){console.error("Wrong uniform/attributes syntax")}function Lz(t,e){for(var r=/[,=\(\):]/,n=e.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),i=[],a=0;a<n.length;a++)n[a].match(r)?i.push(n[a].charAt(0),n[a].slice(1)):i.push(n[a]);n=i;var o=0,s=1,l=2,u=3,c=4,f=5,h=o,d={},p=null,v;g(n[0]);function g(S){S||Bv();var b=S.match(/\[(.*?)\]/);v=S.replace(/\[(.*?)\]/,""),d[v]={},b&&(d[v].isArray=!0,d[v].arraySize=b[1])}for(var a=1;a<n.length;a++){var m=n[a];if(m){if(m==="="){if(h!==o&&h!==u){Bv();break}h=s;continue}else if(m===":"){h=c;continue}else if(m===","){if(h===l){if(!(p instanceof Array)){Bv();break}p.push(+n[++a])}else h=f;continue}else if(m===")"){d[v].value=new ln.Float32Array(p),p=null,h=f;continue}else if(m==="("){if(h!==l){Bv();break}if(!(p instanceof Array)){Bv();break}p.push(+n[++a]);continue}else if(m.indexOf("vec")>=0){if(h!==s&&h!==c){Bv();break}h=l,p=[];continue}else if(h===s){t==="bool"?d[v].value=m==="true":d[v].value=parseFloat(m),p=null;continue}else if(h===c){var x=m;Q6.indexOf(x)>=0||CJ.indexOf(x)>=0||EJ.indexOf(x)>=0?d[v].semantic=x:x==="ignore"||x==="unconfigurable"?d[v].ignore=!0:t==="bool"?d[v].value=x==="true":d[v].value=parseFloat(x);continue}g(m),h=o}}return d}function ct(t,e){typeof t=="object"&&(e=t.fragment,t=t.vertex),t=Pz(t),e=Pz(e),this._shaderID=e0e(t,e),this._vertexCode=ct.parseImport(t),this._fragmentCode=ct.parseImport(e),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}ct.prototype={constructor:ct,createUniforms:function(){var t={};for(var e in this.uniformTemplates){var r=this.uniformTemplates[e];t[e]={type:r.type,value:r.value()}}return t},_parseImport:function(){this._vertexCode=ct.parseImport(this.vertex),this._fragmentCode=ct.parseImport(this.fragment)},_addSemanticUniform:function(t,e,r){if(Q6.indexOf(r)>=0)this.attributeSemantics[r]={symbol:t,type:e};else if(EJ.indexOf(r)>=0){var n=!1,i=r;r.match(/TRANSPOSE$/)&&(n=!0,i=r.slice(0,-9)),this.matrixSemantics[r]={symbol:t,type:e,isTranspose:n,semanticNoTranspose:i}}else CJ.indexOf(r)>=0&&(this.uniformSemantics[r]={symbol:t,type:e})},_addMaterialUniform:function(t,e,r,n,i,a){a[t]={type:r,value:i?Rz.array:n||Rz[e],semantic:null}},_parseUniforms:function(){var t={},e=this,r="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(Az,i),r="fragment",this._fragmentCode=this._fragmentCode.replace(Az,i),e.matrixSemanticKeys=Object.keys(this.matrixSemantics);function n(a){return a!=null?function(){return a}:null}function i(a,o,s){var l=Lz(o,s),u=[];for(var c in l){var f=l[c],h=f.semantic,d=c,p=Jme[o],v=n(l[c].value);l[c].isArray&&(d+="["+l[c].arraySize+"]",p+="v"),u.push(d),e._uniformList.push(c),f.ignore||((o==="sampler2D"||o==="samplerCube")&&(e.textures[c]={shaderType:r,type:o}),h?e._addSemanticUniform(c,p,h):e._addMaterialUniform(c,o,p,v,l[c].isArray,t))}return u.length>0?"uniform "+o+" "+u.join(",")+`;
`:""}this.uniformTemplates=t},_parseAttributes:function(){var t={},e=this;this._vertexCode=this._vertexCode.replace(Zme,r);function r(n,i,a){var o=Lz(i,a),s=Qme[i]||1,l=[];for(var u in o){var c=o[u].semantic;if(t[u]={type:"float",size:s,semantic:c||null},c){if(Q6.indexOf(c)<0)throw new Error('Unkown semantic "'+c+'"');e.attributeSemantics[c]={symbol:u,type:i}}l.push(u)}return"attribute "+i+" "+l.join(",")+`;
`}this.attributes=t},_parseDefines:function(){var t=this,e="vertex";this._vertexCode=this._vertexCode.replace(Mz,r),e="fragment",this._fragmentCode=this._fragmentCode.replace(Mz,r);function r(n,i,a){var o=e==="vertex"?t.vertexDefines:t.fragmentDefines;return o[i]||(a==="false"?o[i]=!1:a==="true"?o[i]=!0:o[i]=a?isNaN(parseFloat(a))?a.trim():parseFloat(a):null),""}},clone:function(){var t=AJ[this._shaderID],e=new ct(t.vertex,t.fragment);return e}};Object.defineProperty&&(Object.defineProperty(ct.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(ct.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(ct.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(ct.prototype,"uniforms",{get:function(){return this._uniformList}}));var t0e=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;ct.parseImport=function(t){return t=t.replace(t0e,function(i,r,n){var i=ct.source(n);return i?ct.parseImport(i):(console.error('Shader chunk "'+n+'" not existed in library'),"")}),t};var r0e=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;ct.import=function(t){t.replace(r0e,function(e,r,n,a){var a=a.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(a){for(var o=n.split("."),s=ct.codes,l=0,u;l<o.length-1;)u=o[l++],s[u]||(s[u]={}),s=s[u];u=o[l],s[u]=a}return a})};ct.codes={};ct.source=function(t){for(var e=t.split("."),r=ct.codes,n=0;r&&n<e.length;){var i=e[n++];r=r[i]}return typeof r!="string"?(console.error('Shader "'+t+'" not existed in library'),""):r};const MJ=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`;var Ve={};Ve.create=function(){var t=new xa(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};Ve.clone=function(t){var e=new xa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};Ve.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Ve.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};Ve.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t};Ve.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],x=r*s-n*o,S=r*l-i*o,b=r*u-a*o,T=n*l-i*s,w=n*u-a*s,E=i*u-a*l,M=c*v-f*p,A=c*g-h*p,R=c*m-d*p,L=f*g-h*v,I=f*m-d*v,N=h*m-d*g,k=x*N-S*I+b*L+T*R-w*A+E*M;return k?(k=1/k,t[0]=(s*N-l*I+u*L)*k,t[1]=(i*I-n*N-a*L)*k,t[2]=(v*E-g*w+m*T)*k,t[3]=(h*w-f*E-d*T)*k,t[4]=(l*R-o*N-u*A)*k,t[5]=(r*N-i*R+a*A)*k,t[6]=(g*b-p*E-m*S)*k,t[7]=(c*E-h*b+d*S)*k,t[8]=(o*I-s*R+u*M)*k,t[9]=(n*R-r*I-a*M)*k,t[10]=(p*w-v*b+m*x)*k,t[11]=(f*b-c*w-d*x)*k,t[12]=(s*A-o*L-l*M)*k,t[13]=(r*L-n*A+i*M)*k,t[14]=(v*S-p*T-g*x)*k,t[15]=(c*T-f*S+h*x)*k,t):null};Ve.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-d*g)-f*(l*m-u*g)+v*(l*d-u*h),t[1]=-(n*(h*m-d*g)-f*(i*m-a*g)+v*(i*d-a*h)),t[2]=n*(l*m-u*g)-s*(i*m-a*g)+v*(i*u-a*l),t[3]=-(n*(l*d-u*h)-s*(i*d-a*h)+f*(i*u-a*l)),t[4]=-(o*(h*m-d*g)-c*(l*m-u*g)+p*(l*d-u*h)),t[5]=r*(h*m-d*g)-c*(i*m-a*g)+p*(i*d-a*h),t[6]=-(r*(l*m-u*g)-o*(i*m-a*g)+p*(i*u-a*l)),t[7]=r*(l*d-u*h)-o*(i*d-a*h)+c*(i*u-a*l),t[8]=o*(f*m-d*v)-c*(s*m-u*v)+p*(s*d-u*f),t[9]=-(r*(f*m-d*v)-c*(n*m-a*v)+p*(n*d-a*f)),t[10]=r*(s*m-u*v)-o*(n*m-a*v)+p*(n*u-a*s),t[11]=-(r*(s*d-u*f)-o*(n*d-a*f)+c*(n*u-a*s)),t[12]=-(o*(f*g-h*v)-c*(s*g-l*v)+p*(s*h-l*f)),t[13]=r*(f*g-h*v)-c*(n*g-i*v)+p*(n*h-i*f),t[14]=-(r*(s*g-l*v)-o*(n*g-i*v)+p*(n*l-i*s)),t[15]=r*(s*h-l*f)-o*(n*h-i*f)+c*(n*l-i*s),t};Ve.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e*o-r*a,x=e*s-n*a,S=e*l-i*a,b=r*s-n*o,T=r*l-i*o,w=n*l-i*s,E=u*p-c*d,M=u*v-f*d,A=u*g-h*d,R=c*v-f*p,L=c*g-h*p,I=f*g-h*v;return m*I-x*L+S*R+b*A-T*M+w*E};Ve.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],x=e[15],S=r[0],b=r[1],T=r[2],w=r[3];return t[0]=S*n+b*s+T*f+w*v,t[1]=S*i+b*l+T*h+w*g,t[2]=S*a+b*u+T*d+w*m,t[3]=S*o+b*c+T*p+w*x,S=r[4],b=r[5],T=r[6],w=r[7],t[4]=S*n+b*s+T*f+w*v,t[5]=S*i+b*l+T*h+w*g,t[6]=S*a+b*u+T*d+w*m,t[7]=S*o+b*c+T*p+w*x,S=r[8],b=r[9],T=r[10],w=r[11],t[8]=S*n+b*s+T*f+w*v,t[9]=S*i+b*l+T*h+w*g,t[10]=S*a+b*u+T*d+w*m,t[11]=S*o+b*c+T*p+w*x,S=r[12],b=r[13],T=r[14],w=r[15],t[12]=S*n+b*s+T*f+w*v,t[13]=S*i+b*l+T*h+w*g,t[14]=S*a+b*u+T*d+w*m,t[15]=S*o+b*c+T*p+w*x,t};Ve.multiplyAffine=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],l=e[6],u=e[8],c=e[9],f=e[10],h=e[12],d=e[13],p=e[14],v=r[0],g=r[1],m=r[2];return t[0]=v*n+g*o+m*u,t[1]=v*i+g*s+m*c,t[2]=v*a+g*l+m*f,v=r[4],g=r[5],m=r[6],t[4]=v*n+g*o+m*u,t[5]=v*i+g*s+m*c,t[6]=v*a+g*l+m*f,v=r[8],g=r[9],m=r[10],t[8]=v*n+g*o+m*u,t[9]=v*i+g*s+m*c,t[10]=v*a+g*l+m*f,v=r[12],g=r[13],m=r[14],t[12]=v*n+g*o+m*u+h,t[13]=v*i+g*s+m*c+d,t[14]=v*a+g*l+m*f+p,t};Ve.mul=Ve.multiply;Ve.mulAffine=Ve.multiplyAffine;Ve.translate=function(t,e,r){var n=r[0],i=r[1],a=r[2],o,s,l,u,c,f,h,d,p,v,g,m;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*a+e[12],t[13]=e[1]*n+e[5]*i+e[9]*a+e[13],t[14]=e[2]*n+e[6]*i+e[10]*a+e[14],t[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],d=e[7],p=e[8],v=e[9],g=e[10],m=e[11],t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=v,t[10]=g,t[11]=m,t[12]=o*n+c*i+p*a+e[12],t[13]=s*n+f*i+v*a+e[13],t[14]=l*n+h*i+g*a+e[14],t[15]=u*n+d*i+m*a+e[15]),t};Ve.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Ve.rotate=function(t,e,r,n){var i=n[0],a=n[1],o=n[2],s=Math.sqrt(i*i+a*a+o*o),l,u,c,f,h,d,p,v,g,m,x,S,b,T,w,E,M,A,R,L,I,N,k,z;return Math.abs(s)<S3?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=e[0],h=e[1],d=e[2],p=e[3],v=e[4],g=e[5],m=e[6],x=e[7],S=e[8],b=e[9],T=e[10],w=e[11],E=i*i*c+u,M=a*i*c+o*l,A=o*i*c-a*l,R=i*a*c-o*l,L=a*a*c+u,I=o*a*c+i*l,N=i*o*c+a*l,k=a*o*c-i*l,z=o*o*c+u,t[0]=f*E+v*M+S*A,t[1]=h*E+g*M+b*A,t[2]=d*E+m*M+T*A,t[3]=p*E+x*M+w*A,t[4]=f*R+v*L+S*I,t[5]=h*R+g*L+b*I,t[6]=d*R+m*L+T*I,t[7]=p*R+x*L+w*I,t[8]=f*N+v*k+S*z,t[9]=h*N+g*k+b*z,t[10]=d*N+m*k+T*z,t[11]=p*N+x*k+w*z,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)};Ve.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+f*n,t[7]=l*i+h*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=f*i-s*n,t[11]=h*i-l*n,t};Ve.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-f*n,t[3]=l*i-h*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+f*i,t[11]=l*n+h*i,t};Ve.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+f*n,t[3]=l*i+h*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=f*i-s*n,t[7]=h*i-l*n,t};Ve.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,f=n*l,h=n*u,d=i*l,p=i*u,v=a*u,g=o*s,m=o*l,x=o*u;return t[0]=1-(d+v),t[1]=f+x,t[2]=h-m,t[3]=0,t[4]=f-x,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=h+m,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t};Ve.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[1]=c+m,t[2]=h-g,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};Ve.frustum=function(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),u=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t};Ve.perspective=function(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t};Ve.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*u,t[15]=1,t};Ve.lookAt=function(t,e,r,n){var i,a,o,s,l,u,c,f,h,d,p=e[0],v=e[1],g=e[2],m=n[0],x=n[1],S=n[2],b=r[0],T=r[1],w=r[2];return Math.abs(p-b)<S3&&Math.abs(v-T)<S3&&Math.abs(g-w)<S3?Ve.identity(t):(c=p-b,f=v-T,h=g-w,d=1/Math.sqrt(c*c+f*f+h*h),c*=d,f*=d,h*=d,i=x*h-S*f,a=S*c-m*h,o=m*f-x*c,d=Math.sqrt(i*i+a*a+o*o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-c*o,u=c*a-f*i,d=Math.sqrt(s*s+l*l+u*u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=h,t[11]=0,t[12]=-(i*p+a*v+o*g),t[13]=-(s*p+l*v+u*g),t[14]=-(c*p+f*v+h*g),t[15]=1,t)};Ve.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var oe={};oe.create=function(){var t=new xa(3);return t[0]=0,t[1]=0,t[2]=0,t};oe.clone=function(t){var e=new xa(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e};oe.fromValues=function(t,e,r){var n=new xa(3);return n[0]=t,n[1]=e,n[2]=r,n};oe.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};oe.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t};oe.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t};oe.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};oe.sub=oe.subtract;oe.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t};oe.mul=oe.multiply;oe.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t};oe.div=oe.divide;oe.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t};oe.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t};oe.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t};oe.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t};oe.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)};oe.dist=oe.distance;oe.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i};oe.sqrDist=oe.squaredDistance;oe.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)};oe.len=oe.length;oe.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n};oe.sqrLen=oe.squaredLength;oe.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t};oe.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t};oe.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t};oe.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]};oe.cross=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t};oe.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t};oe.random=function(t,e){e=e||1;var r=Ng()*2*Math.PI,n=Ng()*2-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t};oe.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t};oe.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t};oe.transformQuat=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,f=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return t[0]=c*u+d*-o+f*-l-h*-s,t[1]=f*u+d*-s+h*-o-c*-l,t[2]=h*u+d*-l+c*-s-f*-o,t};oe.rotateX=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t};oe.rotateY=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t};oe.rotateZ=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t};oe.forEach=function(){var t=oe.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();oe.angle=function(t,e){var r=oe.fromValues(t[0],t[1],t[2]),n=oe.fromValues(e[0],e[1],e[2]);oe.normalize(r,r),oe.normalize(n,n);var i=oe.dot(r,n);return i>1?0:Math.acos(i)};ct.import(MJ);var Gn=Ve.create,Dz={};function Iz(t){return t.material}function n0e(t,e,r){return e.uniforms[r].value}function i0e(t,e,r,n){return r!==n}function a0e(t){return!0}function Nz(){}var Oz={float:ze.FLOAT,byte:ze.BYTE,ubyte:ze.UNSIGNED_BYTE,short:ze.SHORT,ushort:ze.UNSIGNED_SHORT};function o0e(t,e,r){this.availableAttributes=t,this.availableAttributeSymbols=e,this.indicesBuffer=r,this.vao=null}function s0e(t){var e,r;this.bind=function(n){e||(e=ln.createCanvas(),e.width=e.height=1,e.getContext("2d"));var i=n.gl,a=!r;a&&(r=i.createTexture()),i.bindTexture(i.TEXTURE_2D,r),a&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)},this.unbind=function(n){n.gl.bindTexture(n.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Js=_a.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=ln.createCanvas());var t=this.canvas;try{var e={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!this.gl)throw new Error;this._glinfo=new zme(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(r){throw"Error creating WebGL Context "+r}this._programMgr=new TJ(this),this._placeholderTexture=new s0e},{resize:function(t,e){var r=this.canvas,n=this.devicePixelRatio;t!=null?(r.style&&(r.style.width=t+"px",r.style.height=e+"px"),r.width=t*n,r.height=e*n,this._width=t,this._height=e):(this._width=r.width/n,this._height=r.height/n),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,e,r,n,i){if(typeof t=="object"){var a=t;t=a.x,e=a.y,r=a.width,n=a.height,i=a.devicePixelRatio}i=i||this.devicePixelRatio,this.gl.viewport(t*i,e*i,r*i,n*i),this.viewport={x:t,y:e,width:r,height:n,devicePixelRatio:i}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,e,r,n){var i=this.gl,a=this.clearColor;if(this.clearBit){i.colorMask(!0,!0,!0,!0),i.depthMask(!0);var o=this.viewport,s=!1,l=o.devicePixelRatio;(o.width!==this._width||o.height!==this._height||l&&l!==this.devicePixelRatio||o.x||o.y)&&(s=!0,i.enable(i.SCISSOR_TEST),i.scissor(o.x*l,o.y*l,o.width*l,o.height*l)),i.clearColor(a[0],a[1],a[2],a[3]),i.clear(this.clearBit),s&&i.disable(i.SCISSOR_TEST)}if(r||t.update(!1),t.updateLights(),e=e||t.getMainCamera(),!e){console.error("Can't find camera in the scene.");return}e.update();var u=t.updateRenderList(e,!0);this._sceneRendering=t;var c=u.opaque,f=u.transparent,h=t.material;t.trigger("beforerender",this,t,e,u),n?(this.renderPreZ(c,t,e),i.depthFunc(i.LEQUAL)):i.depthFunc(i.LESS);for(var d=Gn(),p=oe.create(),v=0;v<f.length;v++){var g=f[v];Ve.multiplyAffine(d,e.viewMatrix.array,g.worldTransform.array),oe.transformMat4(p,g.position.array,d),g.__depth=p[2]}this.renderPass(c,e,{getMaterial:function(m){return h||m.material},sortCompare:this.opaqueSortCompare}),this.renderPass(f,e,{getMaterial:function(m){return h||m.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,e,u),this._sceneRendering=null},getProgram:function(t,e,r){return e=e||t.material,this._programMgr.getProgram(t,e,r)},validateProgram:function(t){if(t.__error){var e=t.__error;if(Dz[t.__uid__])return;if(Dz[t.__uid__]=!0,this.throwError)throw new Error(e);this.trigger("error",e)}},updatePrograms:function(t,e,r){var n=r&&r.getMaterial||Iz;e=e||null;for(var i=0;i<t.length;i++){var a=t[i],o=n.call(this,a);if(i>0){var s=t[i-1],l=s.joints?s.joints.length:0,u=a.joints?a.joints.length:0;if(u===l&&a.material===s.material&&a.lightGroup===s.lightGroup){a.__program=s.__program;continue}}var c=this._programMgr.getProgram(a,o,e);this.validateProgram(c),a.__program=c}},renderPass:function(t,e,r){this.trigger("beforerenderpass",this,t,e,r),r=r||{},r.getMaterial=r.getMaterial||Iz,r.getUniform=r.getUniform||n0e,r.isMaterialChanged=r.isMaterialChanged||i0e,r.beforeRender=r.beforeRender||Nz,r.afterRender=r.afterRender||Nz;var n=r.ifRender||a0e;this.updatePrograms(t,this._sceneRendering,r),r.sortCompare&&t.sort(r.sortCompare);var i=this.viewport,a=i.devicePixelRatio,o=[i.x*a,i.y*a,i.width*a,i.height*a],s=this.devicePixelRatio,l=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*s,this._height*s],u=[o[2],o[3]],c=Date.now();e?(Ve.copy(Hn.VIEW,e.viewMatrix.array),Ve.copy(Hn.PROJECTION,e.projectionMatrix.array),Ve.copy(Hn.VIEWINVERSE,e.worldTransform.array)):(Ve.identity(Hn.VIEW),Ve.identity(Hn.PROJECTION),Ve.identity(Hn.VIEWINVERSE)),Ve.multiply(Hn.VIEWPROJECTION,Hn.PROJECTION,Hn.VIEW),Ve.invert(Hn.PROJECTIONINVERSE,Hn.PROJECTION),Ve.invert(Hn.VIEWPROJECTIONINVERSE,Hn.VIEWPROJECTION);for(var f=this.gl,h=this._sceneRendering,d,p,v,g,m,x,S,b,T,w,E,M,A=null,R=0;R<t.length;R++){var L=t[R],I=L.worldTransform!=null,N;if(n(L)){I&&(N=L.isSkinnedMesh&&L.isSkinnedMesh()?L.offsetMatrix?L.offsetMatrix.array:Hn.IDENTITY:L.worldTransform.array);var k=L.geometry,z=r.getMaterial.call(this,L),B=L.__program,V=z.shader,F=k.__uid__+"-"+B.__uid__,$=F!==w;w=F,$&&A&&A.bindVertexArrayOES(null),I&&(Ve.copy(Hn.WORLD,N),Ve.multiply(Hn.WORLDVIEWPROJECTION,Hn.VIEWPROJECTION,N),Ve.multiplyAffine(Hn.WORLDVIEW,Hn.VIEW,N),(V.matrixSemantics.WORLDINVERSE||V.matrixSemantics.WORLDINVERSETRANSPOSE)&&Ve.invert(Hn.WORLDINVERSE,N),(V.matrixSemantics.WORLDVIEWINVERSE||V.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&Ve.invert(Hn.WORLDVIEWINVERSE,Hn.WORLDVIEW),(V.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||V.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&Ve.invert(Hn.WORLDVIEWPROJECTIONINVERSE,Hn.WORLDVIEWPROJECTION)),L.beforeRender&&L.beforeRender(this),r.beforeRender.call(this,L,z,d);var W=B!==p;W?(B.bind(this),B.setUniformOfSemantic(f,"VIEWPORT",o),B.setUniformOfSemantic(f,"WINDOW_SIZE",l),e&&(B.setUniformOfSemantic(f,"NEAR",e.near),B.setUniformOfSemantic(f,"FAR",e.far)),B.setUniformOfSemantic(f,"DEVICEPIXELRATIO",a),B.setUniformOfSemantic(f,"TIME",c),B.setUniformOfSemantic(f,"VIEWPORT_SIZE",u),h&&h.setLightUniforms(B,L.lightGroup,this)):B=p,(W||r.isMaterialChanged(L,v,z,d))&&(z.depthTest!==g&&(z.depthTest?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),g=z.depthTest),z.depthMask!==m&&(f.depthMask(z.depthMask),m=z.depthMask),z.transparent!==T&&(z.transparent?f.enable(f.BLEND):f.disable(f.BLEND),T=z.transparent),z.transparent&&(z.blend?z.blend(f):(f.blendEquationSeparate(f.FUNC_ADD,f.FUNC_ADD),f.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA))),M=this._bindMaterial(L,z,B,v||null,d||null,p||null,r.getUniform),d=z);var H=V.matrixSemanticKeys;if(I)for(var X=0;X<H.length;X++){var te=H[X],Y=V.matrixSemantics[te],ee=Hn[te];if(Y.isTranspose){var se=Hn[Y.semanticNoTranspose];Ve.transpose(ee,se)}B.setUniform(f,Y.type,Y.symbol,ee)}L.cullFace!==S&&(S=L.cullFace,f.cullFace(S)),L.frontFace!==b&&(b=L.frontFace,f.frontFace(b)),L.culling!==x&&(x=L.culling,x?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE)),this._updateSkeleton(L,B,M),$&&(E=this._bindVAO(A,V,k,B)),this._renderObject(L,E,B),r.afterRender(this,L),L.afterRender&&L.afterRender(this),p=B,v=L}}this.trigger("afterrenderpass",this,t,e,r)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,e,r){var n=this.gl,i=t.skeleton;if(i)if(i.update(),t.joints.length>this.getMaxJointNumber()){var a=i.getSubSkinMatricesTexture(t.__uid__,t.joints);e.useTextureSlot(this,a,r),e.setUniform(n,"1i","skinMatricesTexture",r),e.setUniform(n,"1f","skinMatricesTextureSize",a.width)}else{var o=i.getSubSkinMatrices(t.__uid__,t.joints);e.setUniformOfSemantic(n,"SKIN_MATRIX",o)}},_renderObject:function(t,e,r){var n=this.gl,i=t.geometry,a=t.mode;a==null&&(a=4);var o=null,s=t.isInstancedMesh&&t.isInstancedMesh();if(s&&(o=this.getGLExtension("ANGLE_instanced_arrays"),!o)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var l;if(s&&(l=this._bindInstancedAttributes(t,r,o)),e.indicesBuffer){var u=this.getGLExtension("OES_element_index_uint"),c=u&&i.indices instanceof Uint32Array,f=c?n.UNSIGNED_INT:n.UNSIGNED_SHORT;s?o.drawElementsInstancedANGLE(a,e.indicesBuffer.count,f,0,t.getInstanceCount()):n.drawElements(a,e.indicesBuffer.count,f,0)}else s?o.drawArraysInstancedANGLE(a,0,i.vertexCount,t.getInstanceCount()):n.drawArrays(a,0,i.vertexCount);if(s)for(var h=0;h<l.length;h++)n.disableVertexAttribArray(l[h])},_bindInstancedAttributes:function(t,e,r){for(var n=this.gl,i=t.getInstancedAttributesBuffers(this),a=[],o=0;o<i.length;o++){var s=i[o],l=e.getAttribLocation(n,s.symbol);if(!(l<0)){var u=Oz[s.type]||n.FLOAT;n.enableVertexAttribArray(l),n.bindBuffer(n.ARRAY_BUFFER,s.buffer),n.vertexAttribPointer(l,s.size,u,!1,0,0),r.vertexAttribDivisorANGLE(l,s.divisor),a.push(l)}}return a},_bindMaterial:function(t,e,r,n,i,a,o){for(var s=this.gl,l=a===r,u=r.currentTextureSlot(),c=e.getEnabledUniforms(),f=e.getTextureUniforms(),h=this._placeholderTexture,d=0;d<f.length;d++){var p=f[d],v=o(t,e,p),g=e.uniforms[p].type;if(g==="t"&&v)v.__slot=-1;else if(g==="tv")for(var m=0;m<v.length;m++)v[m]&&(v[m].__slot=-1)}h.__slot=-1;for(var d=0;d<c.length;d++){var p=c[d],x=e.uniforms[p],v=o(t,e,p),g=x.type,S=g==="t";if(S&&(!v||!v.isRenderable())&&(v=h),i&&l){var b=o(n,i,p);if(S&&(!b||!b.isRenderable())&&(b=h),b===v){if(S)r.takeCurrentTextureSlot(this,null);else if(g==="tv"&&v)for(var m=0;m<v.length;m++)r.takeCurrentTextureSlot(this,null);continue}}if(v!=null)if(S)if(v.__slot<0){var T=r.currentTextureSlot(),w=r.setUniform(s,"1i",p,T);w&&(r.takeCurrentTextureSlot(this,v),v.__slot=T)}else r.setUniform(s,"1i",p,v.__slot);else if(Array.isArray(v)){if(v.length===0)continue;if(g==="tv"){if(!r.hasUniform(p))continue;for(var E=[],m=0;m<v.length;m++){var M=v[m];if(M.__slot<0){var T=r.currentTextureSlot();E.push(T),r.takeCurrentTextureSlot(this,M),M.__slot=T}else E.push(M.__slot)}r.setUniform(s,"1iv",p,E)}else r.setUniform(s,x.type,p,v)}else r.setUniform(s,x.type,p,v)}var A=r.currentTextureSlot();return r.resetTextureSlot(u),A},_bindVAO:function(t,e,r,n){var i=!r.dynamic,a=this.gl,o=this.__uid__+"-"+n.__uid__,s=r.__vaoCache[o];if(!s){var l=r.getBufferChunks(this);if(!l||!l.length)return;for(var u=l[0],c=u.attributeBuffers,b=u.indicesBuffer,S=[],f=[],h=0;h<c.length;h++){var d=c[h],p=d.name,v=d.semantic,g;if(v){var m=e.attributeSemantics[v];g=m&&m.symbol}else g=p;g&&n.attributes[g]&&(S.push(d),f.push(g))}s=new o0e(S,f,b),i&&(r.__vaoCache[o]=s)}var x=!0;t&&i&&(s.vao==null?s.vao=t.createVertexArrayOES():x=!1,t.bindVertexArrayOES(s.vao));var S=s.availableAttributes,b=s.indicesBuffer;if(x){for(var T=n.enableAttributes(this,s.availableAttributeSymbols,t&&i&&s),h=0;h<S.length;h++){var w=T[h];if(w!==-1){var d=S[h],E=d.buffer,M=d.size,A=Oz[d.type]||a.FLOAT;a.bindBuffer(a.ARRAY_BUFFER,E),a.vertexAttribPointer(w,M,A,!1,0,0)}}r.isUseIndices()&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.buffer)}return s},renderPreZ:function(t,e,r){var n=this.gl,i=this._prezMaterial||new Zs({shader:new ct(ct.source("clay.prez.vertex"),ct.source("clay.prez.fragment"))});this._prezMaterial=i,n.colorMask(!1,!1,!1,!1),n.depthMask(!0),this.renderPass(t,r,{ifRender:function(a){return!a.ignorePreZ},isMaterialChanged:function(a,o){var s=a.material,l=o.material;return s.get("diffuseMap")!==l.get("diffuseMap")||(s.get("alphaCutoff")||0)!==(l.get("alphaCutoff")||0)},getUniform:function(a,o,s){if(s==="alphaMap")return a.material.get("diffuseMap");if(s==="alphaCutoff"){if(a.material.isDefined("fragment","ALPHA_TEST")&&a.material.get("diffuseMap")){var l=a.material.get("alphaCutoff");return l||0}return 0}else return s==="uvRepeat"?a.material.get("uvRepeat"):s==="uvOffset"?a.material.get("uvOffset"):o.get(s)},getMaterial:function(){return i},sort:this.opaqueSortCompare}),n.colorMask(!0,!0,!0,!0),n.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,e,r){t.getParent()&&t.getParent().remove(t);var n={};t.traverse(function(i){var a=i.material;if(i.geometry&&e&&i.geometry.dispose(this),r&&a&&!n[a.__uid__]){for(var o=a.getTextureUniforms(),s=0;s<o.length;s++){var l=o[s],u=a.uniforms[l].value,c=a.uniforms[l].type;if(u){if(c==="t")u.dispose&&u.dispose(this);else if(c==="tv")for(var f=0;f<u.length;f++)u[f]&&u[f].dispose&&u[f].dispose(this)}}n[a.__uid__]=!0}i.dispose&&i.dispose(this)},this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,e,r){r||(r=new lr),e=this._height-e;var n=this.viewport,i=r.array;return i[0]=(t-n.x)/n.width,i[0]=i[0]*2-1,i[1]=(e-n.y)/n.height,i[1]=i[1]*2-1,r}});Js.opaqueSortCompare=Js.prototype.opaqueSortCompare=function(t,e){return t.renderOrder===e.renderOrder?t.__program===e.__program?t.material===e.material?t.geometry.__uid__-e.geometry.__uid__:t.material.__uid__-e.material.__uid__:t.__program&&e.__program?t.__program.__uid__-e.__program.__uid__:0:t.renderOrder-e.renderOrder};Js.transparentSortCompare=Js.prototype.transparentSortCompare=function(t,e){return t.renderOrder===e.renderOrder?t.__depth===e.__depth?t.__program===e.__program?t.material===e.material?t.geometry.__uid__-e.geometry.__uid__:t.material.__uid__-e.material.__uid__:t.__program&&e.__program?t.__program.__uid__-e.__program.__uid__:0:t.__depth-e.__depth:t.renderOrder-e.renderOrder};var Hn={IDENTITY:Gn(),WORLD:Gn(),VIEW:Gn(),PROJECTION:Gn(),WORLDVIEW:Gn(),VIEWPROJECTION:Gn(),WORLDVIEWPROJECTION:Gn(),WORLDINVERSE:Gn(),VIEWINVERSE:Gn(),PROJECTIONINVERSE:Gn(),WORLDVIEWINVERSE:Gn(),VIEWPROJECTIONINVERSE:Gn(),WORLDVIEWPROJECTIONINVERSE:Gn(),WORLDTRANSPOSE:Gn(),VIEWTRANSPOSE:Gn(),PROJECTIONTRANSPOSE:Gn(),WORLDVIEWTRANSPOSE:Gn(),VIEWPROJECTIONTRANSPOSE:Gn(),WORLDVIEWPROJECTIONTRANSPOSE:Gn(),WORLDINVERSETRANSPOSE:Gn(),VIEWINVERSETRANSPOSE:Gn(),PROJECTIONINVERSETRANSPOSE:Gn(),WORLDVIEWINVERSETRANSPOSE:Gn(),VIEWPROJECTIONINVERSETRANSPOSE:Gn(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:Gn()};Js.COLOR_BUFFER_BIT=ze.COLOR_BUFFER_BIT;Js.DEPTH_BUFFER_BIT=ze.DEPTH_BUFFER_BIT;Js.STENCIL_BUFFER_BIT=ze.STENCIL_BUFFER_BIT;var Ne=function(t,e,r){t=t||0,e=e||0,r=r||0,this.array=oe.fromValues(t,e,r),this._dirty=!0};Ne.prototype={constructor:Ne,add:function(t){return oe.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e,r){return this.array[0]=t,this.array[1]=e,this.array[2]=r,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new Ne(this.x,this.y,this.z)},copy:function(t){return oe.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,e){return oe.cross(this.array,t.array,e.array),this._dirty=!0,this},dist:function(t){return oe.dist(this.array,t.array)},distance:function(t){return oe.distance(this.array,t.array)},div:function(t){return oe.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return oe.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return oe.dot(this.array,t.array)},len:function(){return oe.len(this.array)},length:function(){return oe.length(this.array)},lerp:function(t,e,r){return oe.lerp(this.array,t.array,e.array,r),this._dirty=!0,this},min:function(t){return oe.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return oe.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return oe.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return oe.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return oe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return oe.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return oe.random(this.array,t),this._dirty=!0,this},scale:function(t){return oe.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return oe.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return oe.sqrDist(this.array,t.array)},squaredDistance:function(t){return oe.squaredDistance(this.array,t.array)},sqrLen:function(){return oe.sqrLen(this.array)},squaredLength:function(){return oe.squaredLength(this.array)},sub:function(t){return oe.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return oe.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return oe.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return oe.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return oe.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var e=this.array;if(t=t.array,t[15]===0){var r=-1/e[2];e[0]=t[0]*e[0]*r,e[1]=t[5]*e[1]*r,e[2]=(t[10]*e[2]+t[14])*r}else e[0]=t[0]*e[0]+t[12],e[1]=t[5]*e[1]+t[13],e[2]=t[10]*e[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,e){Ne.eulerFromQuat(this,t,e)},eulerFromMat3:function(t,e){Ne.eulerFromMat3(this,t,e)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var PS=Object.defineProperty;if(PS){var $A=Ne.prototype;PS($A,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),PS($A,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),PS($A,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}Ne.add=function(t,e,r){return oe.add(t.array,e.array,r.array),t._dirty=!0,t};Ne.set=function(t,e,r,n){oe.set(t.array,e,r,n),t._dirty=!0};Ne.copy=function(t,e){return oe.copy(t.array,e.array),t._dirty=!0,t};Ne.cross=function(t,e,r){return oe.cross(t.array,e.array,r.array),t._dirty=!0,t};Ne.dist=function(t,e){return oe.distance(t.array,e.array)};Ne.distance=Ne.dist;Ne.div=function(t,e,r){return oe.divide(t.array,e.array,r.array),t._dirty=!0,t};Ne.divide=Ne.div;Ne.dot=function(t,e){return oe.dot(t.array,e.array)};Ne.len=function(t){return oe.length(t.array)};Ne.lerp=function(t,e,r,n){return oe.lerp(t.array,e.array,r.array,n),t._dirty=!0,t};Ne.min=function(t,e,r){return oe.min(t.array,e.array,r.array),t._dirty=!0,t};Ne.max=function(t,e,r){return oe.max(t.array,e.array,r.array),t._dirty=!0,t};Ne.mul=function(t,e,r){return oe.multiply(t.array,e.array,r.array),t._dirty=!0,t};Ne.multiply=Ne.mul;Ne.negate=function(t,e){return oe.negate(t.array,e.array),t._dirty=!0,t};Ne.normalize=function(t,e){return oe.normalize(t.array,e.array),t._dirty=!0,t};Ne.random=function(t,e){return oe.random(t.array,e),t._dirty=!0,t};Ne.scale=function(t,e,r){return oe.scale(t.array,e.array,r),t._dirty=!0,t};Ne.scaleAndAdd=function(t,e,r,n){return oe.scaleAndAdd(t.array,e.array,r.array,n),t._dirty=!0,t};Ne.sqrDist=function(t,e){return oe.sqrDist(t.array,e.array)};Ne.squaredDistance=Ne.sqrDist;Ne.sqrLen=function(t){return oe.sqrLen(t.array)};Ne.squaredLength=Ne.sqrLen;Ne.sub=function(t,e,r){return oe.subtract(t.array,e.array,r.array),t._dirty=!0,t};Ne.subtract=Ne.sub;Ne.transformMat3=function(t,e,r){return oe.transformMat3(t.array,e.array,r.array),t._dirty=!0,t};Ne.transformMat4=function(t,e,r){return oe.transformMat4(t.array,e.array,r.array),t._dirty=!0,t};Ne.transformQuat=function(t,e,r){return oe.transformQuat(t.array,e.array,r.array),t._dirty=!0,t};function Ws(t,e,r){return t<e?e:t>r?r:t}var Tn=Math.atan2,$s=Math.asin,zv=Math.abs;Ne.eulerFromQuat=function(t,e,h){t._dirty=!0,e=e.array;var n=t.array,i=e[0],a=e[1],o=e[2],s=e[3],l=i*i,u=a*a,c=o*o,f=s*s,h=(h||"XYZ").toUpperCase();switch(h){case"XYZ":n[0]=Tn(2*(i*s-a*o),f-l-u+c),n[1]=$s(Ws(2*(i*o+a*s),-1,1)),n[2]=Tn(2*(o*s-i*a),f+l-u-c);break;case"YXZ":n[0]=$s(Ws(2*(i*s-a*o),-1,1)),n[1]=Tn(2*(i*o+a*s),f-l-u+c),n[2]=Tn(2*(i*a+o*s),f-l+u-c);break;case"ZXY":n[0]=$s(Ws(2*(i*s+a*o),-1,1)),n[1]=Tn(2*(a*s-o*i),f-l-u+c),n[2]=Tn(2*(o*s-i*a),f-l+u-c);break;case"ZYX":n[0]=Tn(2*(i*s+o*a),f-l-u+c),n[1]=$s(Ws(2*(a*s-i*o),-1,1)),n[2]=Tn(2*(i*a+o*s),f+l-u-c);break;case"YZX":n[0]=Tn(2*(i*s-o*a),f-l+u-c),n[1]=Tn(2*(a*s-i*o),f+l-u-c),n[2]=$s(Ws(2*(i*a+o*s),-1,1));break;case"XZY":n[0]=Tn(2*(i*s+a*o),f-l+u-c),n[1]=Tn(2*(i*o+a*s),f+l-u-c),n[2]=$s(Ws(2*(o*s-i*a),-1,1));break;default:console.warn("Unkown order: "+h)}return t};Ne.eulerFromMat3=function(t,e,p){var n=e.array,i=n[0],a=n[3],o=n[6],s=n[1],l=n[4],u=n[7],c=n[2],f=n[5],h=n[8],d=t.array,p=(p||"XYZ").toUpperCase();switch(p){case"XYZ":d[1]=$s(Ws(o,-1,1)),zv(o)<.99999?(d[0]=Tn(-u,h),d[2]=Tn(-a,i)):(d[0]=Tn(f,l),d[2]=0);break;case"YXZ":d[0]=$s(-Ws(u,-1,1)),zv(u)<.99999?(d[1]=Tn(o,h),d[2]=Tn(s,l)):(d[1]=Tn(-c,i),d[2]=0);break;case"ZXY":d[0]=$s(Ws(f,-1,1)),zv(f)<.99999?(d[1]=Tn(-c,h),d[2]=Tn(-a,l)):(d[1]=0,d[2]=Tn(s,i));break;case"ZYX":d[1]=$s(-Ws(c,-1,1)),zv(c)<.99999?(d[0]=Tn(f,h),d[2]=Tn(s,i)):(d[0]=0,d[2]=Tn(-a,l));break;case"YZX":d[2]=$s(Ws(s,-1,1)),zv(s)<.99999?(d[0]=Tn(-u,l),d[1]=Tn(-c,i)):(d[0]=0,d[1]=Tn(o,h));break;case"XZY":d[2]=$s(-Ws(a,-1,1)),zv(a)<.99999?(d[0]=Tn(f,l),d[1]=Tn(o,i)):(d[0]=Tn(-u,h),d[1]=0);break;default:console.warn("Unkown order: "+p)}return t._dirty=!0,t};Object.defineProperties(Ne,{POSITIVE_X:{get:function(){return new Ne(1,0,0)}},NEGATIVE_X:{get:function(){return new Ne(-1,0,0)}},POSITIVE_Y:{get:function(){return new Ne(0,1,0)}},NEGATIVE_Y:{get:function(){return new Ne(0,-1,0)}},POSITIVE_Z:{get:function(){return new Ne(0,0,1)}},NEGATIVE_Z:{get:function(){return new Ne(0,0,-1)}},UP:{get:function(){return new Ne(0,1,0)}},ZERO:{get:function(){return new Ne}}});var jA=1e-5,vp=function(t,e){this.origin=t||new Ne,this.direction=e||new Ne};vp.prototype={constructor:vp,intersectPlane:function(t,e){var r=t.normal.array,n=t.distance,i=this.origin.array,a=this.direction.array,o=oe.dot(r,a);if(o===0)return null;e||(e=new Ne);var s=(oe.dot(r,i)-n)/o;return oe.scaleAndAdd(e.array,i,a,-s),e._dirty=!0,e},mirrorAgainstPlane:function(t){var e=oe.dot(t.normal.array,this.direction.array);oe.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,-e*2),this.direction._dirty=!0},distanceToPoint:function(){var t=oe.create();return function(e){oe.sub(t,e,this.origin.array);var r=oe.dot(t,this.direction.array);if(r<0)return oe.distance(this.origin.array,e);var n=oe.lenSquared(t);return Math.sqrt(n-r*r)}}(),intersectSphere:function(){var t=oe.create();return function(e,r,n){var i=this.origin.array,a=this.direction.array;e=e.array,oe.sub(t,e,i);var o=oe.dot(t,a),s=oe.squaredLength(t),l=s-o*o,u=r*r;if(!(l>u)){var c=Math.sqrt(u-l),f=o-c,h=o+c;return n||(n=new Ne),f<0?h<0?null:(oe.scaleAndAdd(n.array,i,a,h),n):(oe.scaleAndAdd(n.array,i,a,f),n)}}}(),intersectBoundingBox:function(t,e){var r=this.direction.array,n=this.origin.array,i=t.min.array,a=t.max.array,o=1/r[0],s=1/r[1],l=1/r[2],u,c,f,h,d,p;if(o>=0?(u=(i[0]-n[0])*o,c=(a[0]-n[0])*o):(c=(i[0]-n[0])*o,u=(a[0]-n[0])*o),s>=0?(f=(i[1]-n[1])*s,h=(a[1]-n[1])*s):(h=(i[1]-n[1])*s,f=(a[1]-n[1])*s),u>h||f>c||((f>u||u!==u)&&(u=f),(h<c||c!==c)&&(c=h),l>=0?(d=(i[2]-n[2])*l,p=(a[2]-n[2])*l):(p=(i[2]-n[2])*l,d=(a[2]-n[2])*l),u>p||d>c)||((d>u||u!==u)&&(u=d),(p<c||c!==c)&&(c=p),c<0))return null;var v=u>=0?u:c;return e||(e=new Ne),oe.scaleAndAdd(e.array,n,r,v),e},intersectTriangle:function(){var t=oe.create(),e=oe.create(),r=oe.create(),n=oe.create();return function(i,a,o,s,l,u){var c=this.direction.array,f=this.origin.array;i=i.array,a=a.array,o=o.array,oe.sub(t,a,i),oe.sub(e,o,i),oe.cross(n,e,c);var h=oe.dot(t,n);if(s){if(h>-jA)return null}else if(h>-jA&&h<jA)return null;oe.sub(r,f,i);var d=oe.dot(n,r)/h;if(d<0||d>1)return null;oe.cross(n,t,r);var p=oe.dot(c,n)/h;if(p<0||p>1||d+p>1)return null;oe.cross(n,t,e);var v=-oe.dot(r,n)/h;return v<0?null:(l||(l=new Ne),u&&Ne.set(u,1-d-p,d,p),oe.scaleAndAdd(l.array,f,c,v),l)}}(),applyTransform:function(t){Ne.add(this.direction,this.direction,this.origin),Ne.transformMat4(this.origin,this.origin,t),Ne.transformMat4(this.direction,this.direction,t),Ne.sub(this.direction,this.direction,this.origin),Ne.normalize(this.direction,this.direction)},copy:function(t){Ne.copy(this.origin,t.origin),Ne.copy(this.direction,t.direction)},clone:function(){var t=new vp;return t.copy(this),t}};var Ue={};Ue.create=function(){var t=new xa(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t};Ue.clone=function(t){var e=new xa(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};Ue.fromValues=function(t,e,r,n){var i=new xa(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i};Ue.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Ue.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t};Ue.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t};Ue.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t};Ue.sub=Ue.subtract;Ue.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t};Ue.mul=Ue.multiply;Ue.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t};Ue.div=Ue.divide;Ue.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t};Ue.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t};Ue.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t};Ue.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};Ue.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)};Ue.dist=Ue.distance;Ue.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a};Ue.sqrDist=Ue.squaredDistance;Ue.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)};Ue.len=Ue.length;Ue.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i};Ue.sqrLen=Ue.squaredLength;Ue.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t};Ue.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t};Ue.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o),t};Ue.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]};Ue.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t};Ue.random=function(t,e){return e=e||1,t[0]=Ng(),t[1]=Ng(),t[2]=Ng(),t[3]=Ng(),Ue.normalize(t,t),Ue.scale(t,t,e),t};Ue.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t};Ue.transformQuat=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,f=u*i+l*n-o*a,h=u*a+o*i-s*n,d=-o*n-s*i-l*a;return t[0]=c*u+d*-o+f*-l-h*-s,t[1]=f*u+d*-s+h*-o-c*-l,t[2]=h*u+d*-l+c*-s-f*-o,t};Ue.forEach=function(){var t=Ue.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();var qt={};qt.create=function(){var t=new xa(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};qt.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};qt.clone=function(t){var e=new xa(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e};qt.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t};qt.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};qt.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t};qt.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,h=-c*a+s*l,d=u*a-o*l,p=r*f+n*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*n+i*u)*p,t[2]=(s*n-i*o)*p,t[3]=h*p,t[4]=(c*r-i*l)*p,t[5]=(-s*r+i*a)*p,t[6]=d*p,t[7]=(-u*r+n*l)*p,t[8]=(o*r-n*a)*p,t):null};qt.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=i*u-n*c,t[2]=n*s-i*o,t[3]=s*l-a*c,t[4]=r*c-i*l,t[5]=i*a-r*s,t[6]=a*u-o*l,t[7]=n*l-r*u,t[8]=r*o-n*a,t};qt.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+r*(-u*i+o*s)+n*(l*i-a*s)};qt.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],x=r[6],S=r[7],b=r[8];return t[0]=h*n+d*o+p*u,t[1]=h*i+d*s+p*c,t[2]=h*a+d*l+p*f,t[3]=v*n+g*o+m*u,t[4]=v*i+g*s+m*c,t[5]=v*a+g*l+m*f,t[6]=x*n+S*o+b*u,t[7]=x*i+S*s+b*c,t[8]=x*a+S*l+b*f,t};qt.mul=qt.multiply;qt.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=h*n+d*o+u,t[7]=h*i+d*s+c,t[8]=h*a+d*l+f,t};qt.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*o,t[1]=d*i+h*s,t[2]=d*a+h*l,t[3]=d*o-h*n,t[4]=d*s-h*i,t[5]=d*l-h*a,t[6]=u,t[7]=c,t[8]=f,t};qt.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t};qt.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t};qt.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,f=n*s,h=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return t[0]=1-f-p,t[3]=c-m,t[6]=h+g,t[1]=c+m,t[4]=1-u-p,t[7]=d-v,t[2]=h-g,t[5]=d+v,t[8]=1-u-f,t};qt.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],x=r*s-n*o,S=r*l-i*o,b=r*u-a*o,T=n*l-i*s,w=n*u-a*s,E=i*u-a*l,M=c*v-f*p,A=c*g-h*p,R=c*m-d*p,L=f*g-h*v,I=f*m-d*v,N=h*m-d*g,k=x*N-S*I+b*L+T*R-w*A+E*M;return k?(k=1/k,t[0]=(s*N-l*I+u*L)*k,t[1]=(l*R-o*N-u*A)*k,t[2]=(o*I-s*R+u*M)*k,t[3]=(i*I-n*N-a*L)*k,t[4]=(r*N-i*R+a*A)*k,t[5]=(n*R-r*I-a*M)*k,t[6]=(v*E-g*w+m*T)*k,t[7]=(g*b-p*E-m*S)*k,t[8]=(p*w-v*b+m*x)*k,t):null};qt.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var yt={};yt.create=function(){var t=new xa(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t};yt.rotationTo=function(){var t=oe.create(),e=oe.fromValues(1,0,0),r=oe.fromValues(0,1,0);return function(n,i,a){var o=oe.dot(i,a);return o<-.999999?(oe.cross(t,e,i),oe.length(t)<1e-6&&oe.cross(t,r,i),oe.normalize(t,t),yt.setAxisAngle(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(oe.cross(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,yt.normalize(n,n))}}();yt.setAxes=function(){var t=qt.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],yt.normalize(e,yt.fromMat3(e,t))}}();yt.clone=Ue.clone;yt.fromValues=Ue.fromValues;yt.copy=Ue.copy;yt.set=Ue.set;yt.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t};yt.setAxisAngle=function(t,e,r){r=r*.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t};yt.add=Ue.add;yt.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t};yt.mul=yt.multiply;yt.scale=Ue.scale;yt.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-n*s,t};yt.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l-a*s,t[1]=i*l+o*s,t[2]=a*l+n*s,t[3]=o*l-i*s,t};yt.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*s,t[1]=i*l-n*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t};yt.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t};yt.dot=Ue.dot;yt.lerp=Ue.lerp;yt.slerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+a*u+o*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>1e-6?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),t[0]=v*i+g*l,t[1]=v*a+g*u,t[2]=v*o+g*c,t[3]=v*s+g*f,t};yt.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t};yt.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t};yt.length=Ue.length;yt.len=yt.length;yt.squaredLength=Ue.squaredLength;yt.sqrLen=yt.squaredLength;yt.normalize=Ue.normalize;yt.fromMat3=function(t,e){var r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[a*3+o]-e[o*3+a])*n,t[a]=(e[a*3+i]+e[i*3+a])*n,t[o]=(e[o*3+i]+e[i*3+o])*n}return t};var gt=function(){this._axisX=new Ne,this._axisY=new Ne,this._axisZ=new Ne,this.array=Ve.create(),this._dirty=!0};gt.prototype={constructor:gt,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},adjoint:function(){return Ve.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new gt().copy(this)},copy:function(t){return Ve.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return Ve.determinant(this.array)},fromQuat:function(t){return Ve.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,e){return Ve.fromRotationTranslation(this.array,t.array,e.array),this._dirty=!0,this},fromMat2d:function(t){return gt.fromMat2d(this,t),this},frustum:function(t,e,r,n,i,a){return Ve.frustum(this.array,t,e,r,n,i,a),this._dirty=!0,this},identity:function(){return Ve.identity(this.array),this._dirty=!0,this},invert:function(){return Ve.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,e,r){return Ve.lookAt(this.array,t.array,e.array,r.array),this._dirty=!0,this},mul:function(t){return Ve.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Ve.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Ve.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Ve.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,e,r,n,i,a){return Ve.ortho(this.array,t,e,r,n,i,a),this._dirty=!0,this},perspective:function(t,e,r,n){return Ve.perspective(this.array,t,e,r,n),this._dirty=!0,this},rotate:function(t,e){return Ve.rotate(this.array,this.array,t,e.array),this._dirty=!0,this},rotateX:function(t){return Ve.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return Ve.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return Ve.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Ve.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return Ve.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return Ve.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=oe.create(),e=oe.create(),r=oe.create(),n=qt.create();return function(i,a,o){var s=this.array;oe.set(t,s[0],s[1],s[2]),oe.set(e,s[4],s[5],s[6]),oe.set(r,s[8],s[9],s[10]);var l=oe.length(t),u=oe.length(e),c=oe.length(r),f=this.determinant();f<0&&(l=-l),i&&i.set(l,u,c),o.set(s[12],s[13],s[14]),qt.fromMat4(n,s),n[0]/=l,n[1]/=l,n[2]/=l,n[3]/=u,n[4]/=u,n[5]/=u,n[6]/=c,n[7]/=c,n[8]/=c,yt.fromMat3(a.array,n),yt.normalize(a.array,a.array),a._dirty=!0,o._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var LS=Object.defineProperty;if(LS){var XA=gt.prototype;LS(XA,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var e=this.array;t=t.array,e[8]=t[0],e[9]=t[1],e[10]=t[2],this._dirty=!0}}),LS(XA,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var e=this.array;t=t.array,e[4]=t[0],e[5]=t[1],e[6]=t[2],this._dirty=!0}}),LS(XA,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var e=this.array;t=t.array,e[0]=t[0],e[1]=t[1],e[2]=t[2],this._dirty=!0}})}gt.adjoint=function(t,e){return Ve.adjoint(t.array,e.array),t._dirty=!0,t};gt.copy=function(t,e){return Ve.copy(t.array,e.array),t._dirty=!0,t};gt.determinant=function(t){return Ve.determinant(t.array)};gt.identity=function(t){return Ve.identity(t.array),t._dirty=!0,t};gt.ortho=function(t,e,r,n,i,a,o){return Ve.ortho(t.array,e,r,n,i,a,o),t._dirty=!0,t};gt.perspective=function(t,e,r,n,i){return Ve.perspective(t.array,e,r,n,i),t._dirty=!0,t};gt.lookAt=function(t,e,r,n){return Ve.lookAt(t.array,e.array,r.array,n.array),t._dirty=!0,t};gt.invert=function(t,e){return Ve.invert(t.array,e.array),t._dirty=!0,t};gt.mul=function(t,e,r){return Ve.mul(t.array,e.array,r.array),t._dirty=!0,t};gt.multiply=gt.mul;gt.fromQuat=function(t,e){return Ve.fromQuat(t.array,e.array),t._dirty=!0,t};gt.fromRotationTranslation=function(t,e,r){return Ve.fromRotationTranslation(t.array,e.array,r.array),t._dirty=!0,t};gt.fromMat2d=function(n,r){n._dirty=!0;var r=r.array,n=n.array;return n[0]=r[0],n[4]=r[2],n[12]=r[4],n[1]=r[1],n[5]=r[3],n[13]=r[5],n};gt.rotate=function(t,e,r,n){return Ve.rotate(t.array,e.array,r,n.array),t._dirty=!0,t};gt.rotateX=function(t,e,r){return Ve.rotateX(t.array,e.array,r),t._dirty=!0,t};gt.rotateY=function(t,e,r){return Ve.rotateY(t.array,e.array,r),t._dirty=!0,t};gt.rotateZ=function(t,e,r){return Ve.rotateZ(t.array,e.array,r),t._dirty=!0,t};gt.scale=function(t,e,r){return Ve.scale(t.array,e.array,r.array),t._dirty=!0,t};gt.transpose=function(t,e){return Ve.transpose(t.array,e.array),t._dirty=!0,t};gt.translate=function(t,e,r){return Ve.translate(t.array,e.array,r.array),t._dirty=!0,t};var pn=function(t,e,r,n){t=t||0,e=e||0,r=r||0,n=n===void 0?1:n,this.array=yt.fromValues(t,e,r,n),this._dirty=!0};pn.prototype={constructor:pn,add:function(t){return yt.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return yt.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,e,r,n){return this.array[0]=t,this.array[1]=e,this.array[2]=r,this.array[3]=n,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new pn(this.x,this.y,this.z,this.w)},conjugate:function(){return yt.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return yt.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return yt.dot(this.array,t.array)},fromMat3:function(t){return yt.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=qt.create();return function(e){return qt.fromMat4(t,e.array),qt.transpose(t,t),yt.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return yt.identity(this.array),this._dirty=!0,this},invert:function(){return yt.invert(this.array,this.array),this._dirty=!0,this},len:function(){return yt.len(this.array)},length:function(){return yt.length(this.array)},lerp:function(t,e,r){return yt.lerp(this.array,t.array,e.array,r),this._dirty=!0,this},mul:function(t){return yt.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return yt.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return yt.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return yt.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return yt.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return yt.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return yt.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return yt.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,e){return yt.rotationTo(this.array,t.array,e.array),this._dirty=!0,this},setAxes:function(t,e,r){return yt.setAxes(this.array,t.array,e.array,r.array),this._dirty=!0,this},setAxisAngle:function(t,e){return yt.setAxisAngle(this.array,t.array,e),this._dirty=!0,this},slerp:function(t,e,r){return yt.slerp(this.array,t.array,e.array,r),this._dirty=!0,this},sqrLen:function(){return yt.sqrLen(this.array)},squaredLength:function(){return yt.squaredLength(this.array)},fromEuler:function(t,e){return pn.fromEuler(this,t,e)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Cy=Object.defineProperty;if(Cy){var DS=pn.prototype;Cy(DS,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Cy(DS,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Cy(DS,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Cy(DS,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}pn.add=function(t,e,r){return yt.add(t.array,e.array,r.array),t._dirty=!0,t};pn.set=function(t,e,r,n,i){yt.set(t.array,e,r,n,i),t._dirty=!0};pn.copy=function(t,e){return yt.copy(t.array,e.array),t._dirty=!0,t};pn.calculateW=function(t,e){return yt.calculateW(t.array,e.array),t._dirty=!0,t};pn.conjugate=function(t,e){return yt.conjugate(t.array,e.array),t._dirty=!0,t};pn.identity=function(t){return yt.identity(t.array),t._dirty=!0,t};pn.invert=function(t,e){return yt.invert(t.array,e.array),t._dirty=!0,t};pn.dot=function(t,e){return yt.dot(t.array,e.array)};pn.len=function(t){return yt.length(t.array)};pn.lerp=function(t,e,r,n){return yt.lerp(t.array,e.array,r.array,n),t._dirty=!0,t};pn.slerp=function(t,e,r,n){return yt.slerp(t.array,e.array,r.array,n),t._dirty=!0,t};pn.mul=function(t,e,r){return yt.multiply(t.array,e.array,r.array),t._dirty=!0,t};pn.multiply=pn.mul;pn.rotateX=function(t,e,r){return yt.rotateX(t.array,e.array,r),t._dirty=!0,t};pn.rotateY=function(t,e,r){return yt.rotateY(t.array,e.array,r),t._dirty=!0,t};pn.rotateZ=function(t,e,r){return yt.rotateZ(t.array,e.array,r),t._dirty=!0,t};pn.setAxisAngle=function(t,e,r){return yt.setAxisAngle(t.array,e.array,r),t._dirty=!0,t};pn.normalize=function(t,e){return yt.normalize(t.array,e.array),t._dirty=!0,t};pn.sqrLen=function(t){return yt.sqrLen(t.array)};pn.squaredLength=pn.sqrLen;pn.fromMat3=function(t,e){return yt.fromMat3(t.array,e.array),t._dirty=!0,t};pn.setAxes=function(t,e,r,n){return yt.setAxes(t.array,e.array,r.array,n.array),t._dirty=!0,t};pn.rotationTo=function(t,e,r){return yt.rotationTo(t.array,e.array,r.array),t._dirty=!0,t};pn.fromEuler=function(t,e,c){t._dirty=!0,e=e.array;var n=t.array,i=Math.cos(e[0]/2),a=Math.cos(e[1]/2),o=Math.cos(e[2]/2),s=Math.sin(e[0]/2),l=Math.sin(e[1]/2),u=Math.sin(e[2]/2),c=(c||"XYZ").toUpperCase();switch(c){case"XYZ":n[0]=s*a*o+i*l*u,n[1]=i*l*o-s*a*u,n[2]=i*a*u+s*l*o,n[3]=i*a*o-s*l*u;break;case"YXZ":n[0]=s*a*o+i*l*u,n[1]=i*l*o-s*a*u,n[2]=i*a*u-s*l*o,n[3]=i*a*o+s*l*u;break;case"ZXY":n[0]=s*a*o-i*l*u,n[1]=i*l*o+s*a*u,n[2]=i*a*u+s*l*o,n[3]=i*a*o-s*l*u;break;case"ZYX":n[0]=s*a*o-i*l*u,n[1]=i*l*o+s*a*u,n[2]=i*a*u-s*l*o,n[3]=i*a*o+s*l*u;break;case"YZX":n[0]=s*a*o+i*l*u,n[1]=i*l*o+s*a*u,n[2]=i*a*u-s*l*o,n[3]=i*a*o-s*l*u;break;case"XZY":n[0]=s*a*o-i*l*u,n[1]=i*l*o-s*a*u,n[2]=i*a*u+s*l*o,n[3]=i*a*o+s*l*u;break}};var Cf=oe.set,IS=oe.copy,ga=function(t,e){this.min=t||new Ne(1/0,1/0,1/0),this.max=e||new Ne(-1/0,-1/0,-1/0),this.vertices=null};ga.prototype={constructor:ga,updateFromVertices:function(t){if(t.length>0){var e=this.min,r=this.max,n=e.array,i=r.array;IS(n,t[0]),IS(i,t[0]);for(var a=1;a<t.length;a++){var o=t[a];o[0]<n[0]&&(n[0]=o[0]),o[1]<n[1]&&(n[1]=o[1]),o[2]<n[2]&&(n[2]=o[2]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1]),o[2]>i[2]&&(i[2]=o[2])}e._dirty=!0,r._dirty=!0}},union:function(t){var e=this.min,r=this.max;return oe.min(e.array,e.array,t.min.array),oe.max(r.array,r.array,t.max.array),e._dirty=!0,r._dirty=!0,this},intersection:function(t){var e=this.min,r=this.max;return oe.max(e.array,e.array,t.min.array),oe.min(r.array,r.array,t.max.array),e._dirty=!0,r._dirty=!0,this},intersectBoundingBox:function(t){var e=this.min.array,r=this.max.array,n=t.min.array,i=t.max.array;return!(e[0]>i[0]||e[1]>i[1]||e[2]>i[2]||r[0]<n[0]||r[1]<n[1]||r[2]<n[2])},containBoundingBox:function(t){var e=this.min.array,r=this.max.array,n=t.min.array,i=t.max.array;return e[0]<=n[0]&&e[1]<=n[1]&&e[2]<=n[2]&&r[0]>=i[0]&&r[1]>=i[1]&&r[2]>=i[2]},containPoint:function(t){var e=this.min.array,r=this.max.array,n=t.array;return e[0]<=n[0]&&e[1]<=n[1]&&e[2]<=n[2]&&r[0]>=n[0]&&r[1]>=n[1]&&r[2]>=n[2]},isFinite:function(){var t=this.min.array,e=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=oe.create(),e=oe.create(),r=oe.create(),n=oe.create(),i=oe.create(),a=oe.create();return function(o,s){var l=o.min.array,u=o.max.array,c=s.array;return t[0]=c[0]*l[0],t[1]=c[1]*l[0],t[2]=c[2]*l[0],e[0]=c[0]*u[0],e[1]=c[1]*u[0],e[2]=c[2]*u[0],r[0]=c[4]*l[1],r[1]=c[5]*l[1],r[2]=c[6]*l[1],n[0]=c[4]*u[1],n[1]=c[5]*u[1],n[2]=c[6]*u[1],i[0]=c[8]*l[2],i[1]=c[9]*l[2],i[2]=c[10]*l[2],a[0]=c[8]*u[2],a[1]=c[9]*u[2],a[2]=c[10]*u[2],l=this.min.array,u=this.max.array,l[0]=Math.min(t[0],e[0])+Math.min(r[0],n[0])+Math.min(i[0],a[0])+c[12],l[1]=Math.min(t[1],e[1])+Math.min(r[1],n[1])+Math.min(i[1],a[1])+c[13],l[2]=Math.min(t[2],e[2])+Math.min(r[2],n[2])+Math.min(i[2],a[2])+c[14],u[0]=Math.max(t[0],e[0])+Math.max(r[0],n[0])+Math.max(i[0],a[0])+c[12],u[1]=Math.max(t[1],e[1])+Math.max(r[1],n[1])+Math.max(i[1],a[1])+c[13],u[2]=Math.max(t[2],e[2])+Math.max(r[2],n[2])+Math.max(i[2],a[2])+c[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var e=this.min.array,r=this.max.array,n=t.array,i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],u=e[2],c=r[0],f=r[1],h=r[2];if(n[15]===1)e[0]=n[0]*i+n[12],e[1]=n[5]*a+n[13],r[2]=n[10]*o+n[14],r[0]=n[0]*c+n[12],r[1]=n[5]*f+n[13],e[2]=n[10]*h+n[14];else{var d=-1/o;e[0]=n[0]*i*d,e[1]=n[5]*a*d,r[2]=(n[10]*o+n[14])*d,d=-1/u,r[0]=n[0]*s*d,r[1]=n[5]*l*d,d=-1/h,e[2]=(n[10]*h+n[14])*d}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var e=0;e<8;e++)t[e]=oe.fromValues(0,0,0);this.vertices=t}var r=this.min.array,n=this.max.array;return Cf(t[0],r[0],r[1],r[2]),Cf(t[1],r[0],n[1],r[2]),Cf(t[2],n[0],r[1],r[2]),Cf(t[3],n[0],n[1],r[2]),Cf(t[4],r[0],r[1],n[2]),Cf(t[5],r[0],n[1],n[2]),Cf(t[6],n[0],r[1],n[2]),Cf(t[7],n[0],n[1],n[2]),this},copy:function(t){var e=this.min,r=this.max;return IS(e.array,t.min.array),IS(r.array,t.max.array),e._dirty=!0,r._dirty=!0,this},clone:function(){var t=new ga;return t.copy(this),t}};var l0e=0,Mu=_a.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+l0e++),this.position||(this.position=new Ne),this.rotation||(this.rotation=new pn),this.scale||(this.scale=new Ne(1,1,1)),this.worldTransform=new gt,this.localTransform=new gt,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var e=this._scene;if(e){var r=e._nodeRepository;delete r[this.name],r[t]=this}this.name=t},add:function(t){var e=t._parent;if(e!==this){e&&e.remove(t),t._parent=this,this._children.push(t);var r=this._scene;r&&r!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var e=this._children,r=e.indexOf(t);r<0||(e.splice(r,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,e=0;e<t.length;e++)t[e]._parent=null,this._scene&&t[e].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){for(var e=t._parent;e;){if(e===this)return!0;e=e._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var e=this._children,r=0;r<e.length;r++)if(e[r].name===t)return e[r]},getDescendantByName:function(t){for(var e=this._children,r=0;r<e.length;r++){var n=e[r];if(n.name===t)return n;var i=n.getDescendantByName(t);if(i)return i}},queryNode:function(t){if(t){for(var e=t.split("/"),r=this,n=0;n<e.length;n++){var i=e[n];if(i){for(var a=!1,o=r._children,s=0;s<o.length;s++){var l=o[s];if(l.name===i){r=l,a=!0;break}}if(!a)return}}return r}},getPath:function(t){if(!this._parent)return"/";for(var e=this._parent,r=this.name;e._parent&&(r=e.name+"/"+r,e._parent!=t);)e=e._parent;return!e._parent&&t?null:r},traverse:function(t,e){t.call(e,this);for(var r=this._children,n=0,i=r.length;n<i;n++)r[n].traverse(t,e)},eachChild:function(t,e){for(var r=this._children,n=0,i=r.length;n<i;n++){var a=r[n];t.call(e,a,n)}},setLocalTransform:function(t){Ve.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){var e=t?null:this.scale;this.localTransform.decomposeMatrix(e,this.rotation,this.position)},setWorldTransform:function(t){Ve.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=Ve.create();return function(e){var r=this.localTransform,n=this.worldTransform;this._parent?(Ve.invert(t,this._parent.worldTransform.array),Ve.multiply(r.array,t,n.array)):Ve.copy(r.array,n.array);var i=e?null:this.scale;r.decomposeMatrix(i,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,e=this.rotation,r=this.scale;if(this.transformNeedsUpdate()){var n=this.localTransform.array;Ve.fromRotationTranslation(n,e.array,t.array),Ve.scale(n,n,r.array),e._dirty=!1,r._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,e=this.worldTransform.array;this._parent?Ve.multiplyAffine(e,this._parent.worldTransform.array,t):Ve.copy(e,t)},updateWorldTransform:function(){for(var t=this;t&&t.getParent()&&t.getParent().transformNeedsUpdate();)t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].update(t)},getBoundingBox:function(){function t(i){return!i.invisible&&i.geometry}var e=new ga,r=new gt,n=new gt;return function(i,a){return a=a||new ga,this._parent?gt.invert(n,this._parent.worldTransform):gt.identity(n),this.traverse(function(o){o.geometry&&o.geometry.boundingBox&&(e.copy(o.geometry.boundingBox),gt.multiply(r,n,o.worldTransform),e.applyTransform(r),a.union(e))},this,t),a}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var e=this.worldTransform.array;if(t){var r=t.array;return r[0]=e[12],r[1]=e[13],r[2]=e[14],t}else return new Ne(e[12],e[13],e[14])},clone:function(){var t=new this.constructor,e=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var r=0;r<e.length;r++)t.add(e[r].clone());return t},rotateAround:function(){var t=new Ne,e=new gt;return function(r,n,i){t.copy(this.position).subtract(r);var a=this.localTransform;a.identity(),a.translate(r),a.rotate(i,n),e.fromRotationTranslation(this.rotation,t),a.multiply(e),a.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new gt;return function(e,r){t.lookAt(this.position,e,r||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=e}}()}),Co=Mu.extend({material:null,geometry:null,mode:ze.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:ze.BACK,frontFace:ze.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,e){},getBoundingBox:function(t,e){return e=Mu.prototype.getBoundingBox.call(this,t,e),this.geometry&&this.geometry.boundingBox&&e.union(this.geometry.boundingBox),e},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var e=Mu.prototype.clone.call(this);e.geometry=this.geometry,e.material=this.material;for(var r=0;r<t.length;r++){var n=t[r];e[n]!==this[n]&&(e[n]=this[n])}return e}}()});Co.POINTS=ze.POINTS;Co.LINES=ze.LINES;Co.LINE_LOOP=ze.LINE_LOOP;Co.LINE_STRIP=ze.LINE_STRIP;Co.TRIANGLES=ze.TRIANGLES;Co.TRIANGLE_STRIP=ze.TRIANGLE_STRIP;Co.TRIANGLE_FAN=ze.TRIANGLE_FAN;Co.BACK=ze.BACK;Co.FRONT=ze.FRONT;Co.FRONT_AND_BACK=ze.FRONT_AND_BACK;Co.CW=ze.CW;Co.CCW=ze.CCW;var gD=_a.extend({scene:null,camera:null,renderer:null},function(){this._ray=new vp,this._ndc=new lr},{pick:function(t,e,r){var n=this.pickAll(t,e,[],r);return n[0]||null},pickAll:function(t,e,r,n){return this.renderer.screenToNDC(t,e,this._ndc),this.camera.castRay(this._ndc,this._ray),r=r||[],this._intersectNode(this.scene,r,n||!1),r.sort(this._intersectionCompareFunc),r},_intersectNode:function(t,e,r){t instanceof Co&&t.isRenderable()&&(!t.ignorePicking||r)&&(t.mode===ze.TRIANGLES&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)&&this._intersectRenderable(t,e);for(var n=0;n<t._children.length;n++)this._intersectNode(t._children[n],e,r)},_intersectRenderable:function(){var t=new Ne,e=new Ne,r=new Ne,n=new vp,i=new gt;return function(a,o){var s=a.isSkinnedMesh();n.copy(this._ray),gt.invert(i,a.worldTransform),s||n.applyTransform(i);var l=a.geometry,u=s?a.skeleton.boundingBox:l.boundingBox;if(!(u&&!n.intersectBoundingBox(u))){if(l.pick){l.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,a,o);return}else if(l.pickByRay){l.pickByRay(n,a,o);return}var c=a.cullFace===ze.BACK&&a.frontFace===ze.CCW||a.cullFace===ze.FRONT&&a.frontFace===ze.CW,f,h=l.indices,d=l.attributes.position,p=l.attributes.weight,v=l.attributes.joint,g,m=[];if(!(!d||!d.value||!h)){if(s){g=a.skeleton.getSubSkinMatrices(a.__uid__,a.joints);for(var x=0;x<a.joints.length;x++){m[x]=m[x]||[];for(var S=0;S<16;S++)m[x][S]=g[x*16+S]}var b=[],T=[],w=[],E=[],M=[],A=l.attributes.skinnedPosition;(!A||!A.value)&&(l.createAttribute("skinnedPosition","f",3),A=l.attributes.skinnedPosition,A.init(l.vertexCount));for(var x=0;x<l.vertexCount;x++){d.get(x,b),p.get(x,T),v.get(x,w),T[3]=1-T[0]-T[1]-T[2],oe.set(E,0,0,0);for(var S=0;S<4;S++)w[S]>=0&&T[S]>1e-4&&(oe.transformMat4(M,b,m[w[S]]),oe.scaleAndAdd(E,E,M,T[S]));A.set(x,E)}}for(var x=0;x<h.length;x+=3){var R=h[x],L=h[x+1],I=h[x+2],N=s?l.attributes.skinnedPosition:d;if(N.get(R,t.array),N.get(L,e.array),N.get(I,r.array),c?f=n.intersectTriangle(t,e,r,a.culling):f=n.intersectTriangle(t,r,e,a.culling),f){var k=new Ne;s?Ne.copy(k,f):Ne.transformMat4(k,f,a.worldTransform),o.push(new gD.Intersection(f,k,a,[R,L,I],x/3,Ne.dist(k,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,e){return t.distance-e.distance}});gD.Intersection=function(t,e,r,n,i,a){this.point=t,this.pointWorld=e,this.target=r,this.triangle=n,this.triangleIndex=i,this.distance=a};var Ey="__dt__",cm=function(){this._contextId=0,this._caches=[],this._context={}};cm.prototype={use:function(t,e){var r=this._caches;r[t]||(r[t]={},e&&(r[t]=e())),this._contextId=t,this._context=r[t]},put:function(t,e){this._context[t]=e},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var e=Ey+t;this.put(e,!0)},dirtyAll:function(t){t=t||"";for(var e=Ey+t,r=this._caches,n=0;n<r.length;n++)r[n]&&(r[n][e]=!0)},fresh:function(t){t=t||"";var e=Ey+t;this.put(e,!1)},freshAll:function(t){t=t||"";for(var e=Ey+t,r=this._caches,n=0;n<r.length;n++)r[n]&&(r[n][e]=!1)},isDirty:function(t){t=t||"";var e=Ey+t,r=this._context;return!r.hasOwnProperty(e)||r[e]===!0},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,e){var r=Object.keys(this._caches);r.forEach(function(n){t&&t.call(e,n)})},miss:function(t){return!this._context.hasOwnProperty(t)}};cm.prototype.constructor=cm;var at=_a.extend({width:512,height:512,type:ze.UNSIGNED_BYTE,format:ze.RGBA,wrapS:ze.REPEAT,wrapT:ze.REPEAT,minFilter:ze.LINEAR_MIPMAP_LINEAR,magFilter:ze.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new cm},{getWebGLTexture:function(t){var e=t.gl,r=this._cache;return r.use(t.__uid__),r.miss("webgl_texture")&&r.put("webgl_texture",e.createTexture()),this.dynamic?this.update(t):r.isDirty()&&(this.update(t),r.fresh()),r.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var e=t.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===ze.DEPTH_COMPONENT&&(this.useMipmap=!1);var r=t.getGLExtension("EXT_sRGB");this.format===at.SRGB&&!r&&(this.format=at.RGB),this.format===at.SRGB_ALPHA&&!r&&(this.format=at.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?ze.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?ze.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===ze.NEAREST_MIPMAP_NEAREST||t===ze.NEAREST_MIPMAP_LINEAR?ze.NEAREST:t===ze.LINEAR_MIPMAP_LINEAR||t===ze.LINEAR_MIPMAP_NEAREST?ze.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var e=1;e<32;e<<=1)t=t|t>>e;return t+1},dispose:function(t){var e=this._cache;e.use(t.__uid__);var r=e.get("webgl_texture");r&&t.gl.deleteTexture(r),e.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(at.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}});Object.defineProperty(at.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}});at.BYTE=ze.BYTE;at.UNSIGNED_BYTE=ze.UNSIGNED_BYTE;at.SHORT=ze.SHORT;at.UNSIGNED_SHORT=ze.UNSIGNED_SHORT;at.INT=ze.INT;at.UNSIGNED_INT=ze.UNSIGNED_INT;at.FLOAT=ze.FLOAT;at.HALF_FLOAT=36193;at.UNSIGNED_INT_24_8_WEBGL=34042;at.DEPTH_COMPONENT=ze.DEPTH_COMPONENT;at.DEPTH_STENCIL=ze.DEPTH_STENCIL;at.ALPHA=ze.ALPHA;at.RGB=ze.RGB;at.RGBA=ze.RGBA;at.LUMINANCE=ze.LUMINANCE;at.LUMINANCE_ALPHA=ze.LUMINANCE_ALPHA;at.SRGB=35904;at.SRGB_ALPHA=35906;at.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;at.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;at.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;at.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;at.NEAREST=ze.NEAREST;at.LINEAR=ze.LINEAR;at.NEAREST_MIPMAP_NEAREST=ze.NEAREST_MIPMAP_NEAREST;at.LINEAR_MIPMAP_NEAREST=ze.LINEAR_MIPMAP_NEAREST;at.NEAREST_MIPMAP_LINEAR=ze.NEAREST_MIPMAP_LINEAR;at.LINEAR_MIPMAP_LINEAR=ze.LINEAR_MIPMAP_LINEAR;at.REPEAT=ze.REPEAT;at.CLAMP_TO_EDGE=ze.CLAMP_TO_EDGE;at.MIRRORED_REPEAT=ze.MIRRORED_REPEAT;var Ki=Co.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=Co.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});Ki.POINTS=ze.POINTS;Ki.LINES=ze.LINES;Ki.LINE_LOOP=ze.LINE_LOOP;Ki.LINE_STRIP=ze.LINE_STRIP;Ki.TRIANGLES=ze.TRIANGLES;Ki.TRIANGLE_STRIP=ze.TRIANGLE_STRIP;Ki.TRIANGLE_FAN=ze.TRIANGLE_FAN;Ki.BACK=ze.BACK;Ki.FRONT=ze.FRONT;Ki.FRONT_AND_BACK=ze.FRONT_AND_BACK;Ki.CW=ze.CW;Ki.CCW=ze.CCW;var _2={};_2.isPowerOfTwo=function(t){return(t&t-1)===0};_2.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t};_2.nearestPowerOfTwo=function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))};var kz=_2.isPowerOfTwo;function Fz(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function u0e(t,e){var r=Fz(t.width),n=Fz(t.height);e=e||document.createElement("canvas"),e.width=r,e.height=n;var i=e.getContext("2d");return i.drawImage(t.image,0,0,r,n),e}var Sr=at.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(t){var e=t.gl;e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var r=this.format,n=this.type,i=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===at.REPEAT||this.wrapT===at.REPEAT)&&this.NPOT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,i?this.wrapS:this.getAvailableWrapS()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,i?this.wrapT:this.getAvailableWrapT()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i?this.magFilter:this.getAvailableMagFilter()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i?this.minFilter:this.getAvailableMinFilter());var a=t.getGLExtension("EXT_texture_filter_anisotropic");if(a&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),n===36193){var o=t.getGLExtension("OES_texture_half_float");o||(n=ze.FLOAT)}if(this.mipmaps.length)for(var s=this.width,l=this.height,u=0;u<this.mipmaps.length;u++){var c=this.mipmaps[u];this._updateTextureData(e,c,u,s,l,r,n,!1),s/=2,l/=2}else this._updateTextureData(e,this,0,this.width,this.height,r,n,i),this.useMipmap&&(!this.NPOT||i)&&e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)},_updateTextureData:function(t,e,r,n,i,a,o,s){if(e.image){var l=e.image;s&&(this._potCanvas=u0e(this,this._potCanvas),l=this._potCanvas),t.texImage2D(t.TEXTURE_2D,r,a,a,o,l)}else a<=at.COMPRESSED_RGBA_S3TC_DXT5_EXT&&a>=at.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,r,a,n,i,0,e.pixels):t.texImage2D(t.TEXTURE_2D,r,a,n,i,0,a,o,e.pixels)},generateMipmap:function(t){var e=t.gl;this.useMipmap&&!this.NPOT&&(e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_2D))},isPowerOfTwo:function(){return kz(this.width)&&kz(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,e){var r=ln.createImage();e&&(r.crossOrigin=e);var n=this;return r.onload=function(){n.dirty(),n.trigger("success",n)},r.onerror=function(){n.trigger("error",n)},r.src=t,this.image=r,this}});Object.defineProperty(Sr.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}});Object.defineProperty(Sr.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});function RJ(t){return{byte:ln.Int8Array,ubyte:ln.Uint8Array,short:ln.Int16Array,ushort:ln.Uint16Array}[t]||ln.Float32Array}function KA(t){return"attr_"+t}function fm(t,e,r,n){switch(this.name=t,this.type=e,this.size=r,this.semantic=n||"",this.value=null,r){case 1:this.get=function(i){return this.value[i]},this.set=function(i,a){this.value[i]=a},this.copy=function(i,a){this.value[i]=this.value[i]};break;case 2:this.get=function(i,a){var o=this.value;return a[0]=o[i*2],a[1]=o[i*2+1],a},this.set=function(i,a){var o=this.value;o[i*2]=a[0],o[i*2+1]=a[1]},this.copy=function(i,a){var o=this.value;a*=2,i*=2,o[i]=o[a],o[i+1]=o[a+1]};break;case 3:this.get=function(i,a){var o=i*3,s=this.value;return a[0]=s[o],a[1]=s[o+1],a[2]=s[o+2],a},this.set=function(i,a){var o=i*3,s=this.value;s[o]=a[0],s[o+1]=a[1],s[o+2]=a[2]},this.copy=function(i,a){var o=this.value;a*=3,i*=3,o[i]=o[a],o[i+1]=o[a+1],o[i+2]=o[a+2]};break;case 4:this.get=function(i,a){var o=this.value,s=i*4;return a[0]=o[s],a[1]=o[s+1],a[2]=o[s+2],a[3]=o[s+3],a},this.set=function(i,a){var o=this.value,s=i*4;o[s]=a[0],o[s+1]=a[1],o[s+2]=a[2],o[s+3]=a[3]},this.copy=function(i,a){var o=this.value;a*=4,i*=4,o[i]=o[a],o[i+1]=o[a+1],o[i+2]=o[a+2],o[i+3]=o[a+3]}}}fm.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var e=RJ(this.type);this.value=new e(t*this.size)}};fm.prototype.fromArray=function(t){var e=RJ(this.type),r;if(t[0]&&t[0].length){var n=0,i=this.size;r=new e(t.length*i);for(var a=0;a<t.length;a++)for(var o=0;o<i;o++)r[n++]=t[a][o]}else r=new e(t);this.value=r};fm.prototype.clone=function(t){var e=new fm(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),e};function PJ(t,e,r,n,i){this.name=t,this.type=e,this.buffer=r,this.size=n,this.semantic=i,this.symbol="",this.needsRemove=!1}function LJ(t){this.buffer=t,this.count=0}var Eo=_a.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new cm,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),e=0;e<t.length;e++)this.dirtyAttribute(t[e]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(KA(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,e){if(t<this.triangleCount&&t>=0){e||(e=[]);var r=this.indices;return e[0]=r[t*3],e[1]=r[t*3+1],e[2]=r[t*3+2],e}},setTriangleIndices:function(t,e){var r=this.indices;r[t*3]=e[0],r[t*3+1]=e[1],r[t*3+2]=e[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var e,r=this.vertexCount>65535?ln.Uint32Array:ln.Uint16Array;if(t[0]&&t[0].length){var n=0,i=3;e=new r(t.length*i);for(var a=0;a<t.length;a++)for(var o=0;o<i;o++)e[n++]=t[a][o]}else e=new r(t);this.indices=e},createAttribute:function(t,e,r,n){var i=new fm(t,e,r,n);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=i,this._attributeList.push(t),i},removeAttribute:function(t){var e=this._attributeList,r=e.indexOf(t);return r>=0?(e.splice(r,1),delete this.attributes[t],!0):!1},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,e=this._attributeList;if(t)return t;for(var r=[],n=this.vertexCount,i=0;i<e.length;i++){var a=e[i],o=this.attributes[a];o.value&&o.value.length===n*o.size&&r.push(a)}return this._enabledAttributes=r,r},getBufferChunks:function(t){var e=this._cache;e.use(t.__uid__);var r=e.isDirty("attributes"),n=e.isDirty("indices");if(r||n){this._updateBuffer(t.gl,r,n);for(var i=this.getEnabledAttributes(),a=0;a<i.length;a++)e.fresh(KA(i[a]));e.fresh("attributes"),e.fresh("indices")}return e.fresh("any"),e.get("chunks")},_updateBuffer:function(t,e,r){var n=this._cache,i=n.get("chunks"),a=!1;i||(i=[],i[0]={attributeBuffers:[],indicesBuffer:null},n.put("chunks",i),a=!0);var o=i[0],s=o.attributeBuffers,l=o.indicesBuffer;if(e||a){var u=this.getEnabledAttributes(),c={};if(!a)for(var f=0;f<s.length;f++)c[s[f].name]=s[f];for(var h=0;h<u.length;h++){var d=u[h],p=this.attributes[d],v;a||(v=c[d]);var g;v?g=v.buffer:g=t.createBuffer(),n.isDirty(KA(d))&&(t.bindBuffer(t.ARRAY_BUFFER,g),t.bufferData(t.ARRAY_BUFFER,p.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),s[h]=new PJ(d,p.type,g,p.size,p.semantic)}for(var f=h;f<s.length;f++)t.deleteBuffer(s[f].buffer);s.length=h}this.isUseIndices()&&(r||a)&&(l||(l=new LJ(t.createBuffer()),o.indicesBuffer=l),l.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var e=this._cache;e.use(t.__uid__);var r=e.get("chunks");if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=0;a<i.attributeBuffers.length;a++){var o=i.attributeBuffers[a];t.gl.deleteBuffer(o.buffer)}i.indicesBuffer&&t.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var s=t.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var u=this.__vaoCache[l].vao;u&&s.deleteVertexArrayOES(u)}}this.__vaoCache={},e.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(Eo.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),!t||!t.value?0:t.value.length/t.size}}),Object.defineProperty(Eo.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}}));Eo.STATIC_DRAW=ze.STATIC_DRAW;Eo.DYNAMIC_DRAW=ze.DYNAMIC_DRAW;Eo.STREAM_DRAW=ze.STREAM_DRAW;Eo.AttributeBuffer=PJ;Eo.IndicesBuffer=LJ;Eo.Attribute=fm;var io=oe.create,Uv=oe.add,gd=oe.set,fu=Eo.Attribute,Ir=Eo.extend(function(){return{attributes:{position:new fu("position","float",3,"POSITION"),texcoord0:new fu("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new fu("texcoord1","float",2,"TEXCOORD_1"),normal:new fu("normal","float",3,"NORMAL"),tangent:new fu("tangent","float",4,"TANGENT"),color:new fu("color","float",4,"COLOR"),weight:new fu("weight","float",3,"WEIGHT"),joint:new fu("joint","float",4,"JOINT"),barycentric:new fu("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new ga);var e=this.attributes.position.value;if(e&&e.length){var r=t.min,n=t.max,i=r.array,a=n.array;oe.set(i,e[0],e[1],e[2]),oe.set(a,e[0],e[1],e[2]);for(var o=3;o<e.length;){var s=e[o++],l=e[o++],u=e[o++];s<i[0]&&(i[0]=s),l<i[1]&&(i[1]=l),u<i[2]&&(i[2]=u),s>a[0]&&(a[0]=s),l>a[1]&&(a[1]=l),u>a[2]&&(a[2]=u)}r._dirty=!0,n._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var t=this.indices,e=this.attributes,r=e.position.value,n=e.normal.value;if(!n||n.length!==r.length)n=e.normal.value=new ln.Float32Array(r.length);else for(var i=0;i<n.length;i++)n[i]=0;for(var a=io(),o=io(),s=io(),l=io(),u=io(),c=io(),f=t?t.length:this.vertexCount,h,d,p,v=0;v<f;){t?(h=t[v++],d=t[v++],p=t[v++]):(h=v++,d=v++,p=v++),gd(a,r[h*3],r[h*3+1],r[h*3+2]),gd(o,r[d*3],r[d*3+1],r[d*3+2]),gd(s,r[p*3],r[p*3+1],r[p*3+2]),oe.sub(l,a,o),oe.sub(u,o,s),oe.cross(c,l,u);for(var i=0;i<3;i++)n[h*3+i]=n[h*3+i]+c[i],n[d*3+i]=n[d*3+i]+c[i],n[p*3+i]=n[p*3+i]+c[i]}for(var i=0;i<n.length;)gd(c,n[i],n[i+1],n[i+2]),oe.normalize(c,c),n[i++]=c[0],n[i++]=c[1],n[i++]=c[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,e=this.attributes,r=e.position.value,n=e.normal.value,i=io(),a=io(),o=io(),s=io(),l=io(),u=io();n||(n=e.normal.value=new Float32Array(r.length));for(var c=t?t.length:this.vertexCount,f,h,d,p=0;p<c;){t?(f=t[p++],h=t[p++],d=t[p++]):(f=p++,h=p++,d=p++),gd(i,r[f*3],r[f*3+1],r[f*3+2]),gd(a,r[h*3],r[h*3+1],r[h*3+2]),gd(o,r[d*3],r[d*3+1],r[d*3+2]),oe.sub(s,i,a),oe.sub(l,a,o),oe.cross(u,s,l),oe.normalize(u,u);for(var v=0;v<3;v++)n[f*3+v]=u[v],n[h*3+v]=u[v],n[d*3+v]=u[v]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var t=this.vertexCount,e=this.attributes;e.tangent.value||(e.tangent.value=new Float32Array(t*4));var r=e.texcoord0.value,n=e.position.value,i=e.tangent.value,a=e.normal.value;if(!r){console.warn("Geometry without texcoords can't generate tangents.");return}for(var o=[],s=[],l=0;l<t;l++)o[l]=[0,0,0],s[l]=[0,0,0];for(var u=[0,0,0],c=[0,0,0],f=this.indices,h=f?f.length:this.vertexCount,d,p,v,l=0;l<h;){f?(d=f[l++],p=f[l++],v=f[l++]):(d=l++,p=l++,v=l++);var g=r[d*2],m=r[p*2],x=r[v*2],S=r[d*2+1],b=r[p*2+1],T=r[v*2+1],w=n[d*3],E=n[p*3],M=n[v*3],A=n[d*3+1],R=n[p*3+1],L=n[v*3+1],I=n[d*3+2],N=n[p*3+2],k=n[v*3+2],z=E-w,B=M-w,V=R-A,F=L-A,$=N-I,W=k-I,H=m-g,X=x-g,te=b-S,Y=T-S,ee=1/(H*Y-te*X);u[0]=(Y*z-te*B)*ee,u[1]=(Y*V-te*F)*ee,u[2]=(Y*$-te*W)*ee,c[0]=(H*B-X*z)*ee,c[1]=(H*F-X*V)*ee,c[2]=(H*W-X*$)*ee,Uv(o[d],o[d],u),Uv(o[p],o[p],u),Uv(o[v],o[v],u),Uv(s[d],s[d],c),Uv(s[p],s[p],c),Uv(s[v],s[v],c)}for(var se=io(),ne=io(),le=io(),l=0;l<t;l++){le[0]=a[l*3],le[1]=a[l*3+1],le[2]=a[l*3+2];var pe=o[l];oe.scale(se,le,oe.dot(le,pe)),oe.sub(se,pe,se),oe.normalize(se,se),oe.cross(ne,le,pe),i[l*4]=se[0],i[l*4+1]=se[1],i[l*4+2]=se[2],i[l*4+3]=oe.dot(ne,s[l])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new ln.Uint32Array(this.indices));for(var t=this.attributes,e=this.indices,r=this.getEnabledAttributes(),n={},i=0;i<r.length;i++){var a=r[i];n[a]=t[a].value,t[a].init(this.indices.length)}for(var o=0,s=0;s<e.length;s++){for(var l=e[s],i=0;i<r.length;i++)for(var a=r[i],u=t[a].value,c=t[a].size,f=0;f<c;f++)u[o*c+f]=n[a][l*c+f];e[s]=o,o++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,e=t.barycentric.value,r=this.indices;if(!(e&&e.length===r.length*3)){e=t.barycentric.value=new Float32Array(r.length*3);for(var n=0;n<(r?r.length:this.vertexCount/3);)for(var i=0;i<3;i++){var a=r?r[n++]:n*3+i;e[a*3+i]=1}this.dirty()}}},applyTransform:function(t){var e=this.attributes,r=e.position.value,n=e.normal.value,i=e.tangent.value;t=t.array;var a=Ve.create();Ve.invert(a,t),Ve.transpose(a,a);var o=oe.transformMat4,s=oe.forEach;s(r,3,0,null,o,t),n&&s(n,3,0,null,o,a),i&&s(i,4,0,null,o,a),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var e=this._cache;e.use(t.__uid__);var r=e.get("chunks");if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=0;a<i.attributeBuffers.length;a++){var o=i.attributeBuffers[a];t.gl.deleteBuffer(o.buffer)}i.indicesBuffer&&t.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var s=t.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var u=this.__vaoCache[l].vao;u&&s.deleteVertexArrayOES(u)}}this.__vaoCache={},e.deleteContext(t.__uid__)}});Ir.STATIC_DRAW=Eo.STATIC_DRAW;Ir.DYNAMIC_DRAW=Eo.DYNAMIC_DRAW;Ir.STREAM_DRAW=Eo.STREAM_DRAW;Ir.AttributeBuffer=Eo.AttributeBuffer;Ir.IndicesBuffer=Eo.IndicesBuffer;Ir.Attribute=fu;const c0e=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`;var _l="uniform vec3 ",Ay="uniform float ",Vv="@export clay.header.",Hv="@end",fa=":unconfigurable;";const f0e=[Vv+"directional_light",_l+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+fa,_l+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+fa,Hv,Vv+"ambient_light",_l+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+fa,Hv,Vv+"ambient_sh_light",_l+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+fa,_l+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+fa,c0e,Hv,Vv+"ambient_cubemap_light",_l+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+fa,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+fa,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+fa,Hv,Vv+"point_light",_l+"pointLightPosition[POINT_LIGHT_COUNT]"+fa,Ay+"pointLightRange[POINT_LIGHT_COUNT]"+fa,_l+"pointLightColor[POINT_LIGHT_COUNT]"+fa,Hv,Vv+"spot_light",_l+"spotLightPosition[SPOT_LIGHT_COUNT]"+fa,_l+"spotLightDirection[SPOT_LIGHT_COUNT]"+fa,Ay+"spotLightRange[SPOT_LIGHT_COUNT]"+fa,Ay+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+fa,Ay+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+fa,Ay+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+fa,_l+"spotLightColor[SPOT_LIGHT_COUNT]"+fa,Hv].join(`
`);ct.import(f0e);var jl=Mu.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var t=Mu.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}}),U1=function(t,e){this.normal=t||new Ne(0,1,0),this.distance=e||0};U1.prototype={constructor:U1,distanceToPoint:function(t){return oe.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,e){e||(e=new Ne);var r=this.distanceToPoint(t);return oe.scaleAndAdd(e.array,t.array,this.normal.array,-r),e._dirty=!0,e},normalize:function(){var t=1/oe.len(this.normal.array);oe.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var e=t.vertices,r=this.normal.array,n=oe.dot(e[0].array,r)>this.distance,i=1;i<8;i++)if(oe.dot(e[i].array,r)>this.distance!=n)return!0},intersectLine:function(){var t=oe.create();return function(e,r,n){var i=this.distanceToPoint(e),a=this.distanceToPoint(r);if(i>0&&a>0||i<0&&a<0)return null;var o=this.normal.array,s=this.distance,l=e.array;oe.sub(t,r.array,e.array),oe.normalize(t,t);var u=oe.dot(o,t);if(u===0)return null;n||(n=new Ne);var c=(oe.dot(o,l)-s)/u;return oe.scaleAndAdd(n.array,l,t,-c),n._dirty=!0,n}}(),applyTransform:function(){var t=Ve.create(),e=Ue.create(),r=Ue.create();return r[3]=1,function(n){n=n.array,oe.scale(r,this.normal.array,this.distance),Ue.transformMat4(r,r,n),this.distance=oe.dot(r,this.normal.array),Ve.invert(t,n),Ve.transpose(t,t),e[3]=0,oe.copy(e,this.normal.array),Ue.transformMat4(e,e,t),oe.copy(this.normal.array,e)}}(),copy:function(t){oe.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new U1;return t.copy(this),t}};var fi=oe.set,Bz=oe.copy,zz=oe.transformMat4,YA=Math.min,qA=Math.max,o4=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new U1);this.boundingBox=new ga,this.vertices=[];for(var t=0;t<8;t++)this.vertices[t]=oe.fromValues(0,0,0)};o4.prototype={setFromProjection:function(t){var e=this.planes,r=t.array,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],h=r[9],d=r[10],p=r[11],v=r[12],g=r[13],m=r[14],x=r[15];fi(e[0].normal.array,o-n,c-s,p-f),e[0].distance=-(x-v),e[0].normalize(),fi(e[1].normal.array,o+n,c+s,p+f),e[1].distance=-(x+v),e[1].normalize(),fi(e[2].normal.array,o+i,c+l,p+h),e[2].distance=-(x+g),e[2].normalize(),fi(e[3].normal.array,o-i,c-l,p-h),e[3].distance=-(x-g),e[3].normalize(),fi(e[4].normal.array,o-a,c-u,p-d),e[4].distance=-(x-m),e[4].normalize(),fi(e[5].normal.array,o+a,c+u,p+d),e[5].distance=-(x+m),e[5].normalize();var S=this.boundingBox,b=this.vertices;if(x===0){var T=l/n,w=-m/(d-1),E=-m/(d+1),M=-E/l,A=-w/l;S.min.set(-M*T,-M,E),S.max.set(M*T,M,w),fi(b[0],-M*T,-M,E),fi(b[1],-M*T,M,E),fi(b[2],M*T,-M,E),fi(b[3],M*T,M,E),fi(b[4],-A*T,-A,w),fi(b[5],-A*T,A,w),fi(b[6],A*T,-A,w),fi(b[7],A*T,A,w)}else{var R=(-1-v)/n,L=(1-v)/n,I=(1-g)/l,N=(-1-g)/l,k=(-1-m)/d,z=(1-m)/d;S.min.set(Math.min(R,L),Math.min(N,I),Math.min(z,k)),S.max.set(Math.max(L,R),Math.max(I,N),Math.max(k,z));var B=S.min.array,V=S.max.array;fi(b[0],B[0],B[1],B[2]),fi(b[1],B[0],V[1],B[2]),fi(b[2],V[0],B[1],B[2]),fi(b[3],V[0],V[1],B[2]),fi(b[4],B[0],B[1],V[2]),fi(b[5],B[0],V[1],V[2]),fi(b[6],V[0],B[1],V[2]),fi(b[7],V[0],V[1],V[2])}},getTransformedBoundingBox:function(){var t=oe.create();return function(e,r){var n=this.vertices,i=r.array,a=e.min,o=e.max,s=a.array,l=o.array,u=n[0];zz(t,u,i),Bz(s,t),Bz(l,t);for(var c=1;c<8;c++)u=n[c],zz(t,u,i),s[0]=YA(t[0],s[0]),s[1]=YA(t[1],s[1]),s[2]=YA(t[2],s[2]),l[0]=qA(t[0],l[0]),l[1]=qA(t[1],l[1]),l[2]=qA(t[2],l[2]);return a._dirty=!0,o._dirty=!0,e}}()};var hm=Mu.extend(function(){return{projectionMatrix:new gt,invProjectionMatrix:new gt,viewMatrix:new gt,frustum:new o4}},function(){this.update(!0)},{update:function(t){Mu.prototype.update.call(this,t),gt.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),gt.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){gt.copy(this.viewMatrix,t),gt.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){gt.copy(this.projectionMatrix,t),gt.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=Ue.create();return function(e,r){var n=r!==void 0?r:new vp,i=e.array[0],a=e.array[1];return Ue.set(t,i,a,-1,1),Ue.transformMat4(t,t,this.invProjectionMatrix.array),Ue.transformMat4(t,t,this.worldTransform.array),oe.scale(n.origin.array,t,1/t[3]),Ue.set(t,i,a,1,1),Ue.transformMat4(t,t,this.invProjectionMatrix.array),Ue.transformMat4(t,t,this.worldTransform.array),oe.scale(t,t,1/t[3]),oe.sub(n.direction.array,t,n.origin.array),oe.normalize(n.direction.array,n.direction.array),n.direction._dirty=!0,n.origin._dirty=!0,n}}()}),h0e=Ve.create(),Uz=Ve.create(),ZA={};function d0e(t){var e=[],r=Object.keys(t);r.sort();for(var n=0;n<r.length;n++){var i=r[n];e.push(i+" "+t[i])}var a=e.join(`
`);if(ZA[a])return ZA[a];var o=di.genGUID();return ZA[a]=o,o}function s4(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}s4.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0};s4.prototype.add=function(t,e){e?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t};s4.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var Mh=Mu.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new ga,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new $p(20)}},function(){this._scene=this},{addToScene:function(t){t instanceof hm?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof jl&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var e;t instanceof hm?(e=this._cameraList.indexOf(t),e>=0&&this._cameraList.splice(e,1)):t instanceof jl&&(e=this.lights.indexOf(t),e>=0&&this.lights.splice(e,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var e=this._cameraList.indexOf(t);e>=0&&this._cameraList.splice(e,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var e={},r=0;r<t.length;r++){var n=t[r];if(!n.invisible){var i=n.group;e[i]||(e[i]={}),e[i][n.type]=e[i][n.type]||0,e[i][n.type]++}}this._lightNumber=e;for(var a in e)this._lightProgramKeys[a]=d0e(e[a]);this._updateLightUniforms()},cloneNode:function(t){var e=t.clone(),r={};function n(i,a){r[i.__uid__]=a;for(var o=0;o<i._children.length;o++){var s=i._children[o],l=a._children[o];n(s,l)}}return n(t,e),e.traverse(function(i){i.skeleton&&(i.skeleton=i.skeleton.clone(r)),i.material&&(i.material=i.material.clone())}),e},updateRenderList:function(t,e){var r=t.__uid__,n=this._renderLists.get(r);n||(n=new s4,this._renderLists.put(r,n)),n.startCount(),e&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var i=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,i,n,e),n.endCount(),n},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,e,r,n,i){if(!t.invisible)for(var a=0;a<t._children.length;a++){var o=t._children[a];if(o.isRenderable()){var s=o.isSkinnedMesh()?h0e:o.worldTransform.array,l=o.geometry;Ve.multiplyAffine(Uz,e.viewMatrix.array,s),(i&&!l.boundingBox||!this.isFrustumCulled(o,e,Uz))&&n.add(o,o.material.transparent||r)}o._children.length>0&&this._doUpdateRenderList(o,e,r,n,i)}},isFrustumCulled:function(){var t=new ga,e=new gt;return function(r,n,i){var a=r.boundingBox;if(a||(r.skeleton&&r.skeleton.boundingBox?a=r.skeleton.boundingBox:a=r.geometry.boundingBox),!a)return!1;if(e.array=i,t.transformFrom(a,e),r.castShadow&&this.viewBoundingBoxLastFrame.union(t),r.frustumCulling){if(!t.intersectBoundingBox(n.frustum.boundingBox))return!0;e.array=n.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(e);var o=t.min.array,s=t.max.array;if(s[0]<-1||o[0]>1||s[1]<-1||o[1]>1||s[2]<-1||o[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(p0e);var e=this._lightUniforms;for(var r in e)for(var n in e[r])e[r][n].value.length=0;for(var i=0;i<t.length;i++){var a=t[i];if(!a.invisible){var r=a.group;for(var n in a.uniformTemplates){var o=a.uniformTemplates[n],s=o.value(a);if(s!=null){e[r]||(e[r]={}),e[r][n]||(e[r][n]={type:"",value:[]});var l=e[r][n];switch(l.type=o.type+"v",o.type){case"1i":case"1f":case"t":l.value.push(s);break;case"2f":case"3f":case"4f":for(var u=0;u<s.length;u++)l.value.push(s[u]);break;default:console.error("Unkown light uniform type "+o.type)}}}}}},getLightGroups:function(){var t=[];for(var e in this._lightNumber)t.push(e);return t},getNumberChangedLightGroups:function(){var t=[];for(var e in this._lightNumber)this.isLightNumberChanged(e)&&t.push(e);return t},isLightNumberChanged:function(t){var e=this._previousLightNumber,r=this._lightNumber;for(var n in r[t])if(!e[t]||r[t][n]!==e[t][n])return!0;for(var n in e[t])if(!r[t]||r[t][n]!==e[t][n])return!0;return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(e,r,n){for(var i in e){var a=e[i];if(a.type==="tv"){if(!r.hasUniform(i))continue;for(var o=[],s=0;s<a.value.length;s++){var l=a.value[s],u=r.takeCurrentTextureSlot(n,l);o.push(u)}r.setUniform(n.gl,"1iv",i,o)}else r.setUniform(n.gl,a.type,i,a.value)}}return function(e,r,n){t(this._lightUniforms[r],e,n),t(this.shadowUniforms,e,n)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function p0e(t,e){if(e.castShadow&&!t.castShadow)return!0}var NS=_2.isPowerOfTwo,v0e=["px","nx","py","ny","pz","nz"],Mp=at.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(t){var e=t.gl;e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var r=this.format,n=this.type;e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,this.getAvailableWrapS()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,this.getAvailableWrapT()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var i=t.getGLExtension("EXT_texture_filter_anisotropic");if(i&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_CUBE_MAP,i.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),n===36193){var a=t.getGLExtension("OES_texture_half_float");a||(n=ze.FLOAT)}if(this.mipmaps.length)for(var o=this.width,s=this.height,l=0;l<this.mipmaps.length;l++){var u=this.mipmaps[l];this._updateTextureData(e,u,l,o,s,r,n),o/=2,s/=2}else this._updateTextureData(e,this,0,this.width,this.height,r,n),!this.NPOT&&this.useMipmap&&e.generateMipmap(e.TEXTURE_CUBE_MAP);e.bindTexture(e.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,e,r,n,i,a,o){for(var s=0;s<6;s++){var l=v0e[s],u=e.image&&e.image[l];u?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,r,a,a,o,u):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,r,a,n,i,0,a,o,e.pixels&&e.pixels[l])}},generateMipmap:function(t){var e=t.gl;this.useMipmap&&!this.NPOT&&(e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?NS(this.image.px.width)&&NS(this.image.px.height):NS(this.width)&&NS(this.height)},isRenderable:function(){return this.image.px?Gv(this.image.px)&&Gv(this.image.nx)&&Gv(this.image.py)&&Gv(this.image.ny)&&Gv(this.image.pz)&&Gv(this.image.nz):!!(this.width&&this.height)},load:function(t,e){var r=0,n=this;return di.each(t,function(i,a){var o=ln.createImage();e&&(o.crossOrigin=e),o.onload=function(){r--,r===0&&(n.dirty(),n.trigger("success",n))},o.onerror=function(){r--},r++,o.src=i,n.image[a]=o}),this}});Object.defineProperty(Mp.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}});Object.defineProperty(Mp.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});function Gv(t){return t.width>0&&t.height>0}var $i=hm.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,e=Math.atan(1/t[5])*2;this.fov=e/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=hm.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}}),OS="framebuffer",yc="renderbuffer",Vz=yc+"_width",Hz=yc+"_height",JA=yc+"_attached",QA="depthtexture_attached",md=ze.FRAMEBUFFER,My=ze.RENDERBUFFER,p1=ze.DEPTH_ATTACHMENT,DJ=ze.COLOR_ATTACHMENT0,gi=_a.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new cm,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var e=t.gl;e.bindFramebuffer(md,this._getFrameBufferGL(t)),this._boundRenderer=t;var r=this._cache;r.put("viewport",t.viewport);var n=!1,i,a;for(var o in this._textures){n=!0;var s=this._textures[o];s&&(i=s.texture.width,a=s.texture.height,this._doAttach(t,s.texture,o,s.target))}this._width=i,this._height=a,!n&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,i,a,1);var l=r.get("attached_textures");if(l){for(var o in l)if(!this._textures[o]){var u=l[o];this._doDetach(e,o,u)}}if(!r.get(QA)&&this.depthBuffer){r.miss(yc)&&r.put(yc,e.createRenderbuffer());var c=r.get(yc);(i!==r.get(Vz)||a!==r.get(Hz))&&(e.bindRenderbuffer(My,c),e.renderbufferStorage(My,e.DEPTH_COMPONENT16,i,a),r.put(Vz,i),r.put(Hz,a),e.bindRenderbuffer(My,null)),r.get(JA)||(e.framebufferRenderbuffer(md,p1,My,c),r.put(JA,!0))}},unbind:function(t){t.__currentFrameBuffer=null;var e=t.gl;e.bindFramebuffer(md,null),this._boundRenderer=null,this._cache.use(t.__uid__);var r=this._cache.get("viewport");r&&t.setViewport(r),this.updateMipmap(t)},updateMipmap:function(t){var e=t.gl;for(var r in this._textures){var n=this._textures[r];if(n){var i=n.texture;if(!i.NPOT&&i.useMipmap&&i.minFilter===at.LINEAR_MIPMAP_LINEAR){var a=i.textureType==="textureCube"?ze.TEXTURE_CUBE_MAP:ze.TEXTURE_2D;e.bindTexture(a,i.getWebGLTexture(t)),e.generateMipmap(a),e.bindTexture(a,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(md)},_getFrameBufferGL:function(t){var e=this._cache;return e.use(t.__uid__),e.miss(OS)&&e.put(OS,t.gl.createFramebuffer()),e.get(OS)},attach:function(t,e,r){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");e=e||DJ,r=r||ze.TEXTURE_2D;var n=this._boundRenderer,i=n&&n.gl,a;if(i){var o=this._cache;o.use(n.__uid__),a=o.get("attached_textures")}var s=this._textures[e];if(!(s&&s.target===r&&s.texture===t&&a&&a[e]!=null)){var l=!0;n&&(l=this._doAttach(n,t,e,r),this.viewport||n.setViewport(0,0,t.width,t.height,1)),l&&(this._textures[e]=this._textures[e]||{},this._textures[e].texture=t,this._textures[e].target=r)}},_doAttach:function(t,e,r,n){var i=t.gl,a=e.getWebGLTexture(t),o=this._cache.get("attached_textures");if(o&&o[r]){var s=o[r];if(s.texture===e&&s.target===n)return}r=+r;var l=!0;if(r===p1||r===ze.DEPTH_STENCIL_ATTACHMENT){var u=t.getGLExtension("WEBGL_depth_texture");if(u||(console.error("Depth texture is not supported by the browser"),l=!1),e.format!==ze.DEPTH_COMPONENT&&e.format!==ze.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),l=!1),l){var c=this._cache.get(yc);c&&(i.framebufferRenderbuffer(md,p1,My,null),i.deleteRenderbuffer(c),this._cache.put(yc,!1)),this._cache.put(JA,!1),this._cache.put(QA,!0)}}return i.framebufferTexture2D(md,r,n,a,0),o||(o={},this._cache.put("attached_textures",o)),o[r]=o[r]||{},o[r].texture=e,o[r].target=n,l},_doDetach:function(t,e,r){t.framebufferTexture2D(md,e,r,null,0);var n=this._cache.get("attached_textures");n&&n[e]&&(n[e]=null),(e===p1||e===ze.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(QA,!1)},detach:function(t,e){if(this._textures[t]=null,this._boundRenderer){var r=this._cache;r.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,e)}},dispose:function(t){var e=t.gl,r=this._cache;r.use(t.__uid__);var n=r.get(yc);n&&e.deleteRenderbuffer(n);var i=r.get(OS);i&&e.deleteFramebuffer(i),r.deleteContext(t.__uid__),this._textures={}}});gi.DEPTH_ATTACHMENT=p1;gi.COLOR_ATTACHMENT0=DJ;gi.STENCIL_ATTACHMENT=ze.STENCIL_ATTACHMENT;gi.DEPTH_STENCIL_ATTACHMENT=ze.DEPTH_STENCIL_ATTACHMENT;var g0e=["px","nx","py","ny","pz","nz"],mD=_a.extend(function(){var t={position:new Ne,far:1e3,near:.1,texture:null,shadowMapPass:null},e=t._cameras={px:new $i({fov:90}),nx:new $i({fov:90}),py:new $i({fov:90}),ny:new $i({fov:90}),pz:new $i({fov:90}),nz:new $i({fov:90})};return e.px.lookAt(Ne.POSITIVE_X,Ne.NEGATIVE_Y),e.nx.lookAt(Ne.NEGATIVE_X,Ne.NEGATIVE_Y),e.py.lookAt(Ne.POSITIVE_Y,Ne.POSITIVE_Z),e.ny.lookAt(Ne.NEGATIVE_Y,Ne.NEGATIVE_Z),e.pz.lookAt(Ne.POSITIVE_Z,Ne.NEGATIVE_Y),e.nz.lookAt(Ne.NEGATIVE_Z,Ne.NEGATIVE_Y),t._frameBuffer=new gi,t},{getCamera:function(t){return this._cameras[t]},render:function(t,e,r){var n=t.gl;r||e.update();for(var i=this.texture.width,a=2*Math.atan(i/(i-.5))/Math.PI*180,o=0;o<6;o++){var s=g0e[o],l=this._cameras[s];if(Ne.copy(l.position,this.position),l.far=this.far,l.near=this.near,l.fov=a,this.shadowMapPass){l.update();var u=e.getBoundingBox();u.applyTransform(l.viewMatrix),e.viewBoundingBoxLastFrame.copy(u),this.shadowMapPass.render(t,e,l,!0)}this._frameBuffer.attach(this.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+o),this._frameBuffer.bind(t),t.render(e,l,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}}),l4=Ir.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,e=this.widthSegments,r=this.attributes,n=[],i=[],a=[],o=[],s=0;s<=t;s++)for(var l=s/t,u=0;u<=e;u++){var c=u/e;if(n.push([2*c-1,2*l-1,0]),i&&i.push([c,l]),a&&a.push([0,0,1]),u<e&&s<t){var f=u+s*(e+1);o.push([f,f+1,f+e+1]),o.push([f+e+1,f+1,f+e+2])}}r.position.fromArray(n),r.texcoord0.fromArray(i),r.normal.fromArray(a),this.initIndicesFromArray(o),this.boundingBox=new ga,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),Qn=new gt,IJ=Ir.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var t={px:Wv("px",this.depthSegments,this.heightSegments),nx:Wv("nx",this.depthSegments,this.heightSegments),py:Wv("py",this.widthSegments,this.depthSegments),ny:Wv("ny",this.widthSegments,this.depthSegments),pz:Wv("pz",this.widthSegments,this.heightSegments),nz:Wv("nz",this.widthSegments,this.heightSegments)},e=["position","texcoord0","normal"],r=0,n=0;for(var i in t)r+=t[i].vertexCount,n+=t[i].indices.length;for(var a=0;a<e.length;a++)this.attributes[e[a]].init(r);this.indices=new ln.Uint16Array(n);var o=0,s=0;for(var i in t){for(var l=t[i],a=0;a<e.length;a++)for(var u=e[a],c=l.attributes[u].value,f=l.attributes[u].size,h=u==="normal",d=0;d<c.length;d++){var p=c[d];this.inside&&h&&(p=-p),this.attributes[u].value[d+f*s]=p}for(var v=l.indices.length,d=0;d<l.indices.length;d++)this.indices[d+o]=s+l.indices[this.inside?v-d-1:d];o+=l.indices.length,s+=l.vertexCount}this.boundingBox=new ga,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Wv(t,e,r){Qn.identity();var n=new l4({widthSegments:e,heightSegments:r});switch(t){case"px":gt.translate(Qn,Qn,Ne.POSITIVE_X),gt.rotateY(Qn,Qn,Math.PI/2);break;case"nx":gt.translate(Qn,Qn,Ne.NEGATIVE_X),gt.rotateY(Qn,Qn,-Math.PI/2);break;case"py":gt.translate(Qn,Qn,Ne.POSITIVE_Y),gt.rotateX(Qn,Qn,-Math.PI/2);break;case"ny":gt.translate(Qn,Qn,Ne.NEGATIVE_Y),gt.rotateX(Qn,Qn,Math.PI/2);break;case"pz":gt.translate(Qn,Qn,Ne.POSITIVE_Z);break;case"nz":gt.translate(Qn,Qn,Ne.NEGATIVE_Z),gt.rotateY(Qn,Qn,Math.PI);break}return n.applyTransform(Qn),n}const m0e=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;ct.import(m0e);var __=Ki.extend(function(){var t=new ct({vertex:ct.source("clay.skybox.vertex"),fragment:ct.source("clay.skybox.fragment")}),e=new Zs({shader:t,depthMask:!1});return{scene:null,geometry:new IJ,material:e,environmentMap:null,culling:!1,_dummyCamera:new $i}},function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){t.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),t.minFilter=at.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,e,r){this.renderSkybox(t,r)},renderSkybox:function(t,e){var r=this._dummyCamera;r.aspect=t.getViewportAspect(),r.fov=e.fov||50,r.updateProjectionMatrix(),gt.invert(r.invProjectionMatrix,r.projectionMatrix),r.worldTransform.copy(e.worldTransform),r.viewMatrix.copy(e.viewMatrix),this.position.copy(e.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],r)}}),y0e=542327876,_0e=131072,x0e=512,S0e=4;function yD(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var b0e=31,w0e=yD("DXT1"),T0e=yD("DXT3"),C0e=yD("DXT5"),E0e=0,A0e=1,M0e=2,R0e=3,P0e=4,L0e=7,D0e=20,I0e=21,N0e=28,O0e={parse:function(t,e){var r=new Int32Array(t,0,b0e);if(r[E0e]!==y0e||!r(D0e)&S0e)return null;var n=r(I0e),i=r[P0e],a=r[R0e],o=r[N0e]&x0e,s=r[M0e]&_0e,l,u;switch(n){case w0e:l=8,u=at.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case T0e:l=16,u=at.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case C0e:l=16,u=at.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var c=r[A0e]+4,f=o?6:1,h=1;s&&(h=Math.max(1,r[L0e]));for(var d=[],p=0;p<f;p++){var v=i,g=a;d[p]=new Sr({width:v,height:g,format:u});for(var m=[],x=0;x<h;x++){var S=Math.max(4,v)/4*Math.max(4,g)/4*l,b=new Uint8Array(t,c,S);c+=S,v*=.5,g*=.5,m[x]=b}d[p].pixels=m[0],s&&(d[p].mipmaps=m)}if(e)e.width=d[0].width,e.height=d[0].height,e.format=d[0].format,e.pixels=d[0].pixels,e.mipmaps=d[0].mipmaps;else return d[0]}},b3=String.fromCharCode,k0e=8,F0e=32767;function B0e(t,e,r,n){if(t[3]>0){var i=Math.pow(2,t[3]-128-8+n);e[r+0]=t[0]*i,e[r+1]=t[1]*i,e[r+2]=t[2]*i}else e[r+0]=0,e[r+1]=0,e[r+2]=0;return e[r+3]=1,e}function z0e(t,e,r){for(var n="",i=e;i<r;i++)n+=b3(t[i]);return n}function U0e(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]}function Gz(t,e,r,n){for(var i=0,a=0,o=n;o>0;)if(t[a][0]=e[r++],t[a][1]=e[r++],t[a][2]=e[r++],t[a][3]=e[r++],t[a][0]===1&&t[a][1]===1&&t[a][2]===1){for(var s=t[a][3]<<i>>>0;s>0;s--)U0e(t[a-1],t[a]),a++,o--;i+=8}else a++,o--,i=0;return r}function V0e(t,e,r,n){if(n<k0e|n>F0e)return Gz(t,e,r,n);var i=e[r++];if(i!=2)return Gz(t,e,r-1,n);if(t[0][1]=e[r++],t[0][2]=e[r++],i=e[r++],(t[0][2]<<8>>>0|i)>>>0!==n)return null;for(var i=0;i<4;i++)for(var a=0;a<n;){var o=e[r++];if(o>128){o=(o&127)>>>0;for(var s=e[r++];o--;)t[a++][i]=s}else for(;o--;)t[a++][i]=e[r++]}return r}var H0e={parseRGBE:function(t,e,r){r==null&&(r=0);var n=new Uint8Array(t),i=n.length;if(z0e(n,0,2)==="#?"){for(var a=2;a<i&&!(b3(n[a])===`
`&&b3(n[a+1])===`
`);a++);if(!(a>=i)){a+=2;for(var o="";a<i;a++){var s=b3(n[a]);if(s===`
`)break;o+=s}var l=o.split(" "),u=parseInt(l[1]),c=parseInt(l[3]);if(!(!c||!u)){for(var f=a+1,h=[],d=0;d<c;d++){h[d]=[];for(var p=0;p<4;p++)h[d][p]=0}for(var v=new Float32Array(c*u*4),g=0,m=0;m<u;m++){var f=V0e(h,n,f,c);if(!f)return null;for(var d=0;d<c;d++)B0e(h[d],v,g,r),g+=4}return e||(e=new Sr),e.width=c,e.height=u,e.pixels=v,e.type=at.FLOAT,e}}}},parseRGBEFromPNG:function(t){}},Ru={loadTexture:function(t,e,r,n){var i;if(typeof e=="function"?(r=e,n=r,e={}):e=e||{},typeof t=="string"){if(t.match(/.hdr$/)||e.fileType==="hdr")return i=new Sr({width:0,height:0,sRGB:!1}),Ru._fetchTexture(t,function(a){H0e.parseRGBE(a,i,e.exposure),i.dirty(),r&&r(i)},n),i;t.match(/.dds$/)||e.fileType==="dds"?(i=new Sr({width:0,height:0}),Ru._fetchTexture(t,function(a){O0e.parse(a,i),i.dirty(),r&&r(i)},n)):(i=new Sr,i.load(t),i.success(r),i.error(n))}else typeof t=="object"&&typeof t.px!="undefined"&&(i=new Mp,i.load(t),i.success(r),i.error(n));return i},loadPanorama:function(t,e,r,n,i,a){var o=this;typeof n=="function"?(i=n,a=i,n={}):n=n||{},Ru.loadTexture(e,n,function(s){s.flipY=n.flipY||!1,o.panoramaToCubeMap(t,s,r,n),s.dispose(t),i&&i(r)},a)},panoramaToCubeMap:function(t,e,r,n){var i=new mD,a=new __({scene:new Mh});return a.setEnvironmentMap(e),n=n||{},n.encodeRGBM&&a.material.define("fragment","RGBM_ENCODE"),r.sRGB=e.sRGB,i.texture=r,i.render(t,a.scene),i.texture=null,i.dispose(t),r},heightToNormal:function(t,e){var r=document.createElement("canvas"),n=r.width=t.width,i=r.height=t.height,a=r.getContext("2d");a.drawImage(t,0,0,n,i),e=e||!1;for(var o=a.getImageData(0,0,n,i),s=a.createImageData(n,i),l=0;l<o.data.length;l+=4){if(e){var u=o.data[l],c=o.data[l+1],f=o.data[l+2],h=Math.abs(u-c)+Math.abs(c-f);if(h>20)return console.warn("Given image is not a height map"),t}var d,p,v,g;l%(n*4)===0?(d=o.data[l],v=o.data[l+4]):l%(n*4)===(n-1)*4?(d=o.data[l-4],v=o.data[l]):(d=o.data[l-4],v=o.data[l+4]),l<n*4?(p=o.data[l],g=o.data[l+n*4]):l>n*(i-1)*4?(p=o.data[l-n*4],g=o.data[l]):(p=o.data[l-n*4],g=o.data[l+n*4]),s.data[l]=d-v+127,s.data[l+1]=p-g+127,s.data[l+2]=255,s.data[l+3]=255}return a.putImageData(s,0,0),r},isHeightImage:function(t,e,r){if(!t||!t.width||!t.height)return!1;var n=document.createElement("canvas"),i=n.getContext("2d"),a=e||32;r=r||20,n.width=n.height=a,i.drawImage(t,0,0,a,a);for(var o=i.getImageData(0,0,a,a),s=0;s<o.data.length;s+=4){var l=o.data[s],u=o.data[s+1],c=o.data[s+2],f=Math.abs(l-u)+Math.abs(u-c);if(f>r)return!1}return!0},_fetchTexture:function(t,e,r){ln.request.get({url:t,responseType:"arraybuffer",onload:e,onerror:r})},createChessboard:function(t,e,r,n){t=t||512,e=e||64,r=r||"black",n=n||"white";var i=Math.ceil(t/e),a=document.createElement("canvas");a.width=t,a.height=t;var o=a.getContext("2d");o.fillStyle=n,o.fillRect(0,0,t,t),o.fillStyle=r;for(var s=0;s<i;s++)for(var l=0;l<i;l++){var u=l%2?s%2:s%2-1;u&&o.fillRect(s*e,l*e,e,e)}var c=new Sr({image:a,anisotropic:8});return c},createBlank:function(t){var e=document.createElement("canvas");e.width=1,e.height=1;var r=e.getContext("2d");r.fillStyle=t,r.fillRect(0,0,1,1);var n=new Sr({image:e});return n}},eR=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function tR(t){return"_on"+t}var rR=function(t){var e=this;this._texture=new Sr({anisotropic:32,flipY:!1,surface:this,dispose:function(r){e.dispose(),Sr.prototype.dispose.call(this,r)}}),eR.forEach(function(r){this[tR(r)]=function(n){n.triangle&&this._meshes.forEach(function(i){this.dispatchEvent(r,i,n.triangle,n.point)},this)}},this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};rR.prototype={constructor:rR,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var e=t.getDom();if(!(e instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),e=document.createElement("canvas");else{var r=this,n=t.getZr(),i=n.__oldRefreshImmediately||n.refreshImmediately;n.refreshImmediately=function(){i.call(this),r._texture.dirty(),r.onupdate&&r.onupdate()},n.__oldRefreshImmediately=i}this._texture.image=e,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new Ne,e=new Ne,r=new Ne,n=new lr,i=new lr,a=new lr,o=new lr,s=new Ne;return function(l,u,c,f){var h=u.geometry,d=h.attributes.position,p=h.attributes.texcoord0,v=Ne.dot,g=Ne.cross;d.get(c[0],t.array),d.get(c[1],e.array),d.get(c[2],r.array),p.get(c[0],n.array),p.get(c[1],i.array),p.get(c[2],a.array),g(s,e,r);var m=v(t,s),x=v(f,s)/m;g(s,r,t);var S=v(f,s)/m;g(s,t,e);var b=v(f,s)/m;lr.scale(o,n,x),lr.scaleAndAdd(o,o,i,S),lr.scaleAndAdd(o,o,a,b);var T=o.x*this._chart.getWidth(),w=o.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(l,{zrX:T,zrY:w})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(eR.forEach(function(e){t.on(e,this[tR(e)],this)},this),this._meshes.push(t))},detachFromMesh:function(t){var e=this._meshes.indexOf(t);e>=0&&this._meshes.splice(e,1),eR.forEach(function(r){t.off(r,this[tR(r)])},this)},dispose:function(){this._meshes.forEach(function(t){this.detachFromMesh(t)},this)}};var dm=hm.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=hm.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}});const G0e=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;ct.import(G0e);var W0e=new l4,Wz=new Ki({geometry:W0e,frustumCulling:!1}),$0e=new dm,Ei=_a.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var t=new ct(ct.source("clay.compositor.vertex"),this.fragment),e=new Zs({shader:t});e.enableTexturesAll(),this.material=e},{setUniform:function(t,e){this.material.setUniform(t,e)},getUniform:function(t){var e=this.material.uniforms[t];if(e)return e.value},attachOutput:function(t,e){this.outputs||(this.outputs={}),e=e||ze.COLOR_ATTACHMENT0,this.outputs[e]=t},detachOutput:function(t){for(var e in this.outputs)this.outputs[e]===t&&(this.outputs[e]=null)},bind:function(t,e){if(this.outputs)for(var r in this.outputs){var n=this.outputs[r];n&&e.attach(n,r)}e&&e.bind(t)},unbind:function(t,e){e.unbind(t)},render:function(t,e){var r=t.gl;if(e){this.bind(t,e);var n=t.getGLExtension("EXT_draw_buffers");if(n&&this.outputs){var i=[];for(var a in this.outputs)a=+a,a>=r.COLOR_ATTACHMENT0&&a<=r.COLOR_ATTACHMENT0+8&&i.push(a);n.drawBuffersEXT(i)}}this.trigger("beforerender",this,t);var o=this.clearDepth?r.DEPTH_BUFFER_BIT:0;if(r.depthMask(!0),this.clearColor){o=o|r.COLOR_BUFFER_BIT,r.colorMask(!0,!0,!0,!0);var s=this.clearColor;Array.isArray(s)&&r.clearColor(s[0],s[1],s[2],s[3])}r.clear(o),this.blendWithPrevious?(r.enable(r.BLEND),this.material.transparent=!0):(r.disable(r.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),e&&this.unbind(t,e)},renderQuad:function(t){Wz.material=this.material,t.renderPass([Wz],$0e)},dispose:function(t){}});const j0e=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,X0e=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`;var Pu={},eM=["px","nx","py","ny","pz","nz"];Pu.prefilterEnvironmentMap=function(t,e,r,n,i){(!i||!n)&&(n=Pu.generateNormalDistribution(),i=Pu.integrateBRDF(t,n)),r=r||{};var a=r.width||64,o=r.height||64,s=r.type||e.type,l=new Mp({width:a,height:o,type:s,flipY:!1,mipmaps:[]});l.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var u=Math.min(a,o),c=Math.log(u)/Math.log(2)+1,f=new Zs({shader:new ct({vertex:ct.source("clay.skybox.vertex"),fragment:X0e})});f.set("normalDistribution",n),r.encodeRGBM&&f.define("fragment","RGBM_ENCODE"),r.decodeRGBM&&f.define("fragment","RGBM_DECODE");var h=new Mh,d;if(e.textureType==="texture2D"){var p=new Mp({width:a,height:o,type:s===at.FLOAT?at.HALF_FLOAT:s});Ru.panoramaToCubeMap(t,e,p,{encodeRGBM:r.decodeRGBM}),e=p}d=new __({scene:h,material:f}),d.material.set("environmentMap",e);var v=new mD({texture:l});r.encodeRGBM&&(s=l.type=at.UNSIGNED_BYTE);for(var g=new Sr({width:a,height:o,type:s}),m=new gi({depthBuffer:!1}),x=ln[s===at.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],S=0;S<c;S++){l.mipmaps[S]={pixels:{}},d.material.set("roughness",S/(c-1));for(var b=g.width,T=2*Math.atan(b/(b-.5))/Math.PI*180,w=0;w<eM.length;w++){var E=new x(g.width*g.height*4);m.attach(g),m.bind(t);var M=v.getCamera(eM[w]);M.fov=T,t.render(h,M),t.gl.readPixels(0,0,g.width,g.height,at.RGBA,s,E),m.unbind(t),l.mipmaps[S].pixels[eM[w]]=E}g.width/=2,g.height/=2,g.dirty()}return m.dispose(t),g.dispose(t),d.dispose(t),n.dispose(t),{environmentMap:l,brdfLookup:i,normalDistribution:n,maxMipmapLevel:c}};Pu.integrateBRDF=function(t,e){e=e||Pu.generateNormalDistribution();var r=new gi({depthBuffer:!1}),n=new Ei({fragment:j0e}),i=new Sr({width:512,height:256,type:at.HALF_FLOAT,wrapS:at.CLAMP_TO_EDGE,wrapT:at.CLAMP_TO_EDGE,minFilter:at.NEAREST,magFilter:at.NEAREST,useMipmap:!1});return n.setUniform("normalDistribution",e),n.setUniform("viewportSize",[512,256]),n.attachOutput(i),n.render(t,r),r.dispose(t),i};Pu.generateNormalDistribution=function(r,n){for(var r=r||256,n=n||1024,i=new Sr({width:r,height:n,type:at.FLOAT,minFilter:at.NEAREST,magFilter:at.NEAREST,wrapS:at.CLAMP_TO_EDGE,wrapT:at.CLAMP_TO_EDGE,useMipmap:!1}),a=new Float32Array(n*r*4),o=[],s=0;s<r;s++){for(var l=s/r,u=l*l,c=0;c<n;c++){var f=(c<<16|c>>>16)>>>0;f=((f&1431655765)<<1|(f&2863311530)>>>1)>>>0,f=((f&858993459)<<2|(f&3435973836)>>>2)>>>0,f=((f&252645135)<<4|(f&4042322160)>>>4)>>>0,f=(((f&16711935)<<8|(f&4278255360)>>>8)>>>0)/4294967296;var h=Math.sqrt((1-f)/(1+(u*u-1)*f));o[c]=h}for(var c=0;c<n;c++){var d=(c*r+s)*4,h=o[c],p=Math.sqrt(1-h*h),v=c/n,g=2*Math.PI*v;a[d]=p*Math.cos(g),a[d+1]=h,a[d+2]=p*Math.sin(g),a[d+3]=1}}return i.pixels=a,i};var K0e=jl.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,e){if(!t.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=Pu.generateNormalDistribution(),this._brdfLookup=Pu.integrateBRDF(t,this._normalDistribution));var r=this.cubemap;if(!r.__prefiltered){var n=Pu.prefilterEnvironmentMap(t,r,{encodeRGBM:!0,width:e,height:e},this._normalDistribution,this._brdfLookup);this.cubemap=n.environmentMap,this.cubemap.__prefiltered=!0,r.dispose(t)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}}),Y0e=jl.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new ln.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var e=t._coefficientsTmpArr,r=0;r<t.coefficients.length;r++)e[r]=t.coefficients[r];return e}}}}),NJ={},tp=["px","nx","py","ny","pz","nz"];function q0e(t,e){var r=t[0],n=t[1],i=t[2];return e===0?1:e===1?r:e===2?n:e===3?i:e===4?r*i:e===5?n*i:e===6?r*n:e===7?3*i*i-1:r*r-n*n}var Z0e={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function J0e(t,e,r,n){for(var i=new ln.Float32Array(27),a=oe.create(),o=oe.create(),s=oe.create(),l=0;l<9;l++){for(var u=oe.create(),c=0;c<tp.length;c++){for(var f=e[tp[c]],h=oe.create(),d=0,p=0,v=Z0e[tp[c]],g=0;g<n;g++)for(var m=0;m<r;m++){a[0]=m/(r-1)*2-1,a[1]=g/(n-1)*2-1,a[2]=-1,oe.normalize(a,a),s[0]=a[v[0]]*v[3],s[1]=a[v[1]]*v[4],s[2]=a[v[2]]*v[5],o[0]=f[p++]/255,o[1]=f[p++]/255,o[2]=f[p++]/255;var x=f[p++]/255*8.12;o[0]*=x,o[1]*=x,o[2]*=x,oe.scaleAndAdd(h,h,o,q0e(s,l)*-a[2]),d+=-a[2]}oe.scaleAndAdd(u,u,h,1/d)}i[l*3]=u[0]/6,i[l*3+1]=u[1]/6,i[l*3+2]=u[2]/6}return i}NJ.projectEnvironmentMap=function(t,e,r){r=r||{},r.lod=r.lod||0;var n,i=new Mh,a=64;e.textureType==="texture2D"?n=new __({scene:i,environmentMap:e}):(a=e.image&&e.image.px?e.image.px.width:e.width,n=new __({scene:i,environmentMap:e}));var o=Math.ceil(a/Math.pow(2,r.lod)),s=Math.ceil(a/Math.pow(2,r.lod)),l=new Sr({width:o,height:s}),u=new gi;n.material.define("fragment","RGBM_ENCODE"),r.decodeRGBM&&n.material.define("fragment","RGBM_DECODE"),n.material.set("lod",r.lod);for(var c=new mD({texture:l}),f={},h=0;h<tp.length;h++){f[tp[h]]=new Uint8Array(o*s*4);var d=c.getCamera(tp[h]);d.fov=90,u.attach(l),u.bind(t),t.render(i,d),t.gl.readPixels(0,0,o,s,at.RGBA,at.UNSIGNED_BYTE,f[tp[h]]),u.unbind(t)}return n.dispose(t),u.dispose(t),l.dispose(t),J0e(t,f,o,s)};var Lr={firstNotNull:function(){for(var t=0,e=arguments.length;t<e;t++)if(arguments[t]!=null)return arguments[t]},queryDataIndex:function(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return De(e.dataIndex)?Oe(e.dataIndex,function(r){return t.indexOfRawIndex(r)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return De(e.name)?Oe(e.name,function(r){return t.indexOfName(r)}):t.indexOfName(e.name)}},Q0e=Ir.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,e=this.widthSegments,r=this.attributes.position,n=this.attributes.texcoord0,i=this.attributes.normal,a=(e+1)*(t+1);r.init(a),n.init(a),i.init(a);var o=a>65535?Uint32Array:Uint16Array,s=this.indices=new o(e*t*6),l,u,c,f,h,d,p,S=this.radius,v=this.phiStart,g=this.phiLength,m=this.thetaStart,x=this.thetaLength,S=this.radius,b=[],T=[],w=0,E=1/S;for(p=0;p<=t;p++)for(d=0;d<=e;d++)f=d/e,h=p/t,l=-S*Math.cos(v+f*g)*Math.sin(m+h*x),u=S*Math.cos(m+h*x),c=S*Math.sin(v+f*g)*Math.sin(m+h*x),b[0]=l,b[1]=u,b[2]=c,T[0]=f,T[1]=h,r.set(w,b),n.set(w,T),b[0]*=E,b[1]*=E,b[2]*=E,i.set(w,b),w++;var M,A,R,L,I=e+1,N=0;for(p=0;p<t;p++)for(d=0;d<e;d++)A=p*I+d,M=p*I+d+1,L=(p+1)*I+d+1,R=(p+1)*I+d,s[N++]=M,s[N++]=A,s[N++]=L,s[N++]=A,s[N++]=R,s[N++]=L;this.boundingBox=new ga,this.boundingBox.max.set(S,S,S),this.boundingBox.min.set(-S,-S,-S)}}),eye=jl.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}}}}),tye=jl.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new Ne,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}}},clone:function(){var t=jl.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),rye=jl.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}}},clone:function(){var t=jl.prototype.clone.call(this);return t.range=this.range,t}}),nye=jl.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new Ne,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var e=t.color,r=t.intensity;return[e[0]*r,e[1]*r,e[2]*r]}}},clone:function(){var t=jl.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Jr=function(t,e,r,n){t=t||0,e=e||0,r=r||0,n=n||0,this.array=Ue.fromValues(t,e,r,n),this._dirty=!0};Jr.prototype={constructor:Jr,add:function(t){return Ue.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e,r,n){return this.array[0]=t,this.array[1]=e,this.array[2]=r,this.array[3]=n,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new Jr(this.x,this.y,this.z,this.w)},copy:function(t){return Ue.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return Ue.dist(this.array,t.array)},distance:function(t){return Ue.distance(this.array,t.array)},div:function(t){return Ue.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Ue.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Ue.dot(this.array,t.array)},len:function(){return Ue.len(this.array)},length:function(){return Ue.length(this.array)},lerp:function(t,e,r){return Ue.lerp(this.array,t.array,e.array,r),this._dirty=!0,this},min:function(t){return Ue.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Ue.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Ue.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Ue.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Ue.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Ue.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Ue.random(this.array,t),this._dirty=!0,this},scale:function(t){return Ue.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return Ue.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return Ue.sqrDist(this.array,t.array)},squaredDistance:function(t){return Ue.squaredDistance(this.array,t.array)},sqrLen:function(){return Ue.sqrLen(this.array)},squaredLength:function(){return Ue.squaredLength(this.array)},sub:function(t){return Ue.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Ue.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Ue.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return Ue.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Ry=Object.defineProperty;if(Ry){var kS=Jr.prototype;Ry(kS,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Ry(kS,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Ry(kS,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Ry(kS,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}Jr.add=function(t,e,r){return Ue.add(t.array,e.array,r.array),t._dirty=!0,t};Jr.set=function(t,e,r,n,i){Ue.set(t.array,e,r,n,i),t._dirty=!0};Jr.copy=function(t,e){return Ue.copy(t.array,e.array),t._dirty=!0,t};Jr.dist=function(t,e){return Ue.distance(t.array,e.array)};Jr.distance=Jr.dist;Jr.div=function(t,e,r){return Ue.divide(t.array,e.array,r.array),t._dirty=!0,t};Jr.divide=Jr.div;Jr.dot=function(t,e){return Ue.dot(t.array,e.array)};Jr.len=function(t){return Ue.length(t.array)};Jr.lerp=function(t,e,r,n){return Ue.lerp(t.array,e.array,r.array,n),t._dirty=!0,t};Jr.min=function(t,e,r){return Ue.min(t.array,e.array,r.array),t._dirty=!0,t};Jr.max=function(t,e,r){return Ue.max(t.array,e.array,r.array),t._dirty=!0,t};Jr.mul=function(t,e,r){return Ue.multiply(t.array,e.array,r.array),t._dirty=!0,t};Jr.multiply=Jr.mul;Jr.negate=function(t,e){return Ue.negate(t.array,e.array),t._dirty=!0,t};Jr.normalize=function(t,e){return Ue.normalize(t.array,e.array),t._dirty=!0,t};Jr.random=function(t,e){return Ue.random(t.array,e),t._dirty=!0,t};Jr.scale=function(t,e,r){return Ue.scale(t.array,e.array,r),t._dirty=!0,t};Jr.scaleAndAdd=function(t,e,r,n){return Ue.scaleAndAdd(t.array,e.array,r.array,n),t._dirty=!0,t};Jr.sqrDist=function(t,e){return Ue.sqrDist(t.array,e.array)};Jr.squaredDistance=Jr.sqrDist;Jr.sqrLen=function(t){return Ue.sqrLen(t.array)};Jr.squaredLength=Jr.sqrLen;Jr.sub=function(t,e,r){return Ue.subtract(t.array,e.array,r.array),t._dirty=!0,t};Jr.subtract=Jr.sub;Jr.transformMat4=function(t,e,r){return Ue.transformMat4(t.array,e.array,r.array),t._dirty=!0,t};Jr.transformQuat=function(t,e,r){return Ue.transformQuat(t.array,e.array,r.array),t._dirty=!0,t};var Zr={};Zr.create=function(){var t=new xa(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t};Zr.clone=function(t){var e=new xa(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};Zr.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Zr.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t};Zr.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t};Zr.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null};Zr.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t};Zr.determinant=function(t){return t[0]*t[3]-t[2]*t[1]};Zr.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*s+a*l,t[1]=i*s+o*l,t[2]=n*u+a*c,t[3]=i*u+o*c,t};Zr.mul=Zr.multiply;Zr.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*s,t[1]=i*l+o*s,t[2]=n*-s+a*l,t[3]=i*-s+o*l,t};Zr.scale=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*l,t[3]=o*l,t};Zr.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))};Zr.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]};var mo=function(){this.array=Zr.create(),this._dirty=!0};mo.prototype={constructor:mo,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},clone:function(){return new mo().copy(this)},copy:function(t){return Zr.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return Zr.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Zr.determinant(this.array)},identity:function(){return Zr.identity(this.array),this._dirty=!0,this},invert:function(){return Zr.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return Zr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Zr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Zr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Zr.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return Zr.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Zr.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return Zr.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};mo.adjoint=function(t,e){return Zr.adjoint(t.array,e.array),t._dirty=!0,t};mo.copy=function(t,e){return Zr.copy(t.array,e.array),t._dirty=!0,t};mo.determinant=function(t){return Zr.determinant(t.array)};mo.identity=function(t){return Zr.identity(t.array),t._dirty=!0,t};mo.invert=function(t,e){return Zr.invert(t.array,e.array),t._dirty=!0,t};mo.mul=function(t,e,r){return Zr.mul(t.array,e.array,r.array),t._dirty=!0,t};mo.multiply=mo.mul;mo.rotate=function(t,e,r){return Zr.rotate(t.array,e.array,r),t._dirty=!0,t};mo.scale=function(t,e,r){return Zr.scale(t.array,e.array,r.array),t._dirty=!0,t};mo.transpose=function(t,e){return Zr.transpose(t.array,e.array),t._dirty=!0,t};var un={};un.create=function(){var t=new xa(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t};un.clone=function(t){var e=new xa(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e};un.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t};un.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t};un.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r*a-n*i;return l?(l=1/l,t[0]=a*l,t[1]=-n*l,t[2]=-i*l,t[3]=r*l,t[4]=(i*s-a*o)*l,t[5]=(n*o-r*s)*l,t):null};un.determinant=function(t){return t[0]*t[3]-t[1]*t[2]};un.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*u+a*c,t[1]=i*u+o*c,t[2]=n*f+a*h,t[3]=i*f+o*h,t[4]=n*d+a*p+s,t[5]=i*d+o*p+l,t};un.mul=un.multiply;un.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=i*c+o*u,t[2]=n*-u+a*c,t[3]=i*-u+o*c,t[4]=s,t[5]=l,t};un.scale=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n*u,t[1]=i*u,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=l,t};un.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*u+a*c+s,t[5]=i*u+o*c+l,t};un.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var Ko=function(){this.array=un.create(),this._dirty=!0};Ko.prototype={constructor:Ko,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},clone:function(){return new Ko().copy(this)},copy:function(t){return un.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return un.determinant(this.array)},identity:function(){return un.identity(this.array),this._dirty=!0,this},invert:function(){return un.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return un.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return un.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return un.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return un.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return un.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return un.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return un.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Ko.copy=function(t,e){return un.copy(t.array,e.array),t._dirty=!0,t};Ko.determinant=function(t){return un.determinant(t.array)};Ko.identity=function(t){return un.identity(t.array),t._dirty=!0,t};Ko.invert=function(t,e){return un.invert(t.array,e.array),t._dirty=!0,t};Ko.mul=function(t,e,r){return un.mul(t.array,e.array,r.array),t._dirty=!0,t};Ko.multiply=Ko.mul;Ko.rotate=function(t,e,r){return un.rotate(t.array,e.array,r),t._dirty=!0,t};Ko.scale=function(t,e,r){return un.scale(t.array,e.array,r.array),t._dirty=!0,t};Ko.translate=function(t,e,r){return un.translate(t.array,e.array,r.array),t._dirty=!0,t};var Bi=function(){this.array=qt.create(),this._dirty=!0};Bi.prototype={constructor:Bi,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},adjoint:function(){return qt.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new Bi().copy(this)},copy:function(t){return qt.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return qt.determinant(this.array)},fromMat2d:function(t){return qt.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return qt.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return qt.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return qt.identity(this.array),this._dirty=!0,this},invert:function(){return qt.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return qt.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return qt.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return qt.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return qt.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return qt.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return qt.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return qt.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return qt.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return qt.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Bi.adjoint=function(t,e){return qt.adjoint(t.array,e.array),t._dirty=!0,t};Bi.copy=function(t,e){return qt.copy(t.array,e.array),t._dirty=!0,t};Bi.determinant=function(t){return qt.determinant(t.array)};Bi.identity=function(t){return qt.identity(t.array),t._dirty=!0,t};Bi.invert=function(t,e){return qt.invert(t.array,e.array),t};Bi.mul=function(t,e,r){return qt.mul(t.array,e.array,r.array),t._dirty=!0,t};Bi.multiply=Bi.mul;Bi.fromMat2d=function(t,e){return qt.fromMat2d(t.array,e.array),t._dirty=!0,t};Bi.fromMat4=function(t,e){return qt.fromMat4(t.array,e.array),t._dirty=!0,t};Bi.fromQuat=function(t,e){return qt.fromQuat(t.array,e.array),t._dirty=!0,t};Bi.normalFromMat4=function(t,e){return qt.normalFromMat4(t.array,e.array),t._dirty=!0,t};Bi.rotate=function(t,e,r){return qt.rotate(t.array,e.array,r),t._dirty=!0,t};Bi.scale=function(t,e,r){return qt.scale(t.array,e.array,r.array),t._dirty=!0,t};Bi.transpose=function(t,e){return qt.transpose(t.array,e.array),t._dirty=!0,t};Bi.translate=function(t,e,r){return qt.translate(t.array,e.array,r.array),t._dirty=!0,t};var iye={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,e){this._animators=this._animators||[];var r=this,n;if(t){for(var i=t.split("."),a=r,o=0,s=i.length;o<s;o++)a&&(a=a[i[o]]);a&&(n=a)}else n=r;if(n==null)throw new Error("Target "+t+" not exists");var l=this._animators,u=new PT(n,e),c=this;return u.during(function(){c.__zr&&c.__zr.refresh()}).done(function(){var f=l.indexOf(u);f>=0&&l.splice(f,1)}),l.push(u),this.__zr&&this.__zr.animation.addAnimator(u),u},stopAnimation:function(t){this._animators=this._animators||[];for(var e=this._animators,r=e.length,n=0;n<r;n++)e[n].stop(t);return e.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var e=0;e<this._animators.length;e++)t.animation.addAnimator(this._animators[e])},removeAnimatorsFromZr:function(t){if(this._animators)for(var e=0;e<this._animators.length;e++)t.animation.removeAnimator(this._animators[e])}};const OJ=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,aye=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,oye=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,sye=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,lye=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,uye=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,cye=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Mu.prototype,iye);ct.import(OJ);ct.import(MJ);ct.import(aye);ct.import(oye);ct.import(sye);ct.import(lye);ct.import(uye);ct.import(cye);function fye(t){return!t||t==="none"}function kJ(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}function hye(t){return t.getZr&&t.setOption}var dye=Mh.prototype.addToScene,pye=Mh.prototype.removeFromScene;Mh.prototype.addToScene=function(t){if(dye.call(this,t),this.__zr){var e=this.__zr;t.traverse(function(r){r.__zr=e,r.addAnimatorsToZr&&r.addAnimatorsToZr(e)})}};Mh.prototype.removeFromScene=function(t){pye.call(this,t),t.traverse(function(e){var r=e.__zr;e.__zr=null,r&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(r)})};Zs.prototype.setTextureImage=function(t,e,r,n){if(this.shader){var i=r.getZr(),a=this,o;return a.autoUpdateTextureStatus=!1,a.disableTexture(t),fye(e)||(o=J.loadTexture(e,r,n,function(s){a.enableTexture(t),i&&i.refresh()}),a.set(t,o)),o}};var J={};J.Renderer=Js;J.Node=Mu;J.Mesh=Ki;J.Shader=ct;J.Material=Zs;J.Texture=at;J.Texture2D=Sr;J.Geometry=Ir;J.SphereGeometry=Q0e;J.PlaneGeometry=l4;J.CubeGeometry=IJ;J.AmbientLight=eye;J.DirectionalLight=tye;J.PointLight=rye;J.SpotLight=nye;J.PerspectiveCamera=$i;J.OrthographicCamera=dm;J.Vector2=lr;J.Vector3=Ne;J.Vector4=Jr;J.Quaternion=pn;J.Matrix2=mo;J.Matrix2d=Ko;J.Matrix3=Bi;J.Matrix4=gt;J.Plane=U1;J.Ray=vp;J.BoundingBox=ga;J.Frustum=o4;var FS=null;function vye(){return FS!==null||(FS=Ru.createBlank("rgba(255,255,255,0)").image),FS}function $z(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function jz(t){if((t.wrapS===at.REPEAT||t.wrapT===at.REPEAT)&&t.image){var e=$z(t.width),r=$z(t.height);if(e!==t.width||r!==t.height){var n=document.createElement("canvas");n.width=e,n.height=r;var i=n.getContext("2d");i.drawImage(t.image,0,0,e,r),t.image=n}}}J.loadTexture=function(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};for(var i=Object.keys(r).sort(),a="",o=0;o<i.length;o++)a+=i[o]+"_"+r[i[o]]+"_";var s=e.__textureCache=e.__textureCache||new $m(20);if(hye(t)){var l=t.__textureid__,u=s.get(a+l);if(u)u.texture.surface.setECharts(t),n&&n(u.texture);else{var c=new rR(t);c.onupdate=function(){e.getZr().refresh()},u={texture:c.getTexture()};for(var o=0;o<i.length;o++)u.texture[i[o]]=r[i[o]];l=t.__textureid__||"__ecgl_ec__"+u.texture.__uid__,t.__textureid__=l,s.put(a+l,u),n&&n(u.texture)}return u.texture}else if(kJ(t)){var l=t.__textureid__,u=s.get(a+l);if(!u){u={texture:new J.Texture2D({image:t})};for(var o=0;o<i.length;o++)u.texture[i[o]]=r[i[o]];l=t.__textureid__||"__ecgl_image__"+u.texture.__uid__,t.__textureid__=l,s.put(a+l,u),jz(u.texture),n&&n(u.texture)}return u.texture}else{var u=s.get(a+t);if(u)u.callbacks?u.callbacks.push(n):n&&n(u.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){u={callbacks:[n]};var f=Ru.loadTexture(t,{exposure:r.exposure,fileType:"hdr"},function(){f.dirty(),u.callbacks.forEach(function(p){p&&p(f)}),u.callbacks=null});u.texture=f,s.put(a+t,u)}else{for(var f=new J.Texture2D({image:new Image}),o=0;o<i.length;o++)f[i[o]]=r[i[o]];u={texture:f,callbacks:[n]};var h=f.image;h.onload=function(){f.image=h,jz(f),f.dirty(),u.callbacks.forEach(function(v){v&&v(f)}),u.callbacks=null},h.crossOrigin="Anonymous",h.src=t,f.image=vye(),s.put(a+t,u)}return u.texture}};J.createAmbientCubemap=function(t,e,r,n){t=t||{};var i=t.texture,a=Lr.firstNotNull(t.exposure,1),o=new K0e({intensity:Lr.firstNotNull(t.specularIntensity,1)}),s=new Y0e({intensity:Lr.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return o.cubemap=J.loadTexture(i,r,{exposure:a},function(){o.cubemap.flipY=!1,o.prefilter(e,32),s.coefficients=NJ.projectEnvironmentMap(e,o.cubemap,{lod:1}),n&&n()}),{specular:o,diffuse:s}};J.createBlankTexture=Ru.createBlank;J.isImage=kJ;J.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)};J.parseColor=function(t,e){return t instanceof Array?(e||(e=[]),e[0]=t[0],e[1]=t[1],e[2]=t[2],t.length>3?e[3]=t[3]:e[3]=1,e):(e=go(t||"#000",e)||[0,0,0,0],e[0]/=255,e[1]/=255,e[2]/=255,e)};J.directionFromAlphaBeta=function(t,e){var r=t/180*Math.PI+Math.PI/2,n=-e/180*Math.PI+Math.PI/2,i=[],a=Math.sin(r);return i[0]=a*Math.cos(n),i[1]=-Math.cos(r),i[2]=a*Math.sin(n),i};J.getShadowResolution=function(t){var e=1024;switch(t){case"low":e=512;break;case"medium":break;case"high":e=2048;break;case"ultra":e=4096;break}return e};J.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"];J.createShader=function(t){t==="ecgl.shadow"&&(t="ecgl.displayShadow");var e=ct.source(t+".vertex"),r=ct.source(t+".fragment");e||console.error("Vertex shader of '%s' not exits",t),r||console.error("Fragment shader of '%s' not exits",t);var n=new ct(e,r);return n.name=t,n};J.createMaterial=function(t,e){e instanceof Array||(e=[e]);var r=J.createShader(t),n=new Zs({shader:r});return e.forEach(function(i){typeof i=="string"&&n.define(i)}),n};J.setMaterialFromModel=function(t,e,r,n){e.autoUpdateTextureStatus=!1;var i=r.getModel(t+"Material"),a=i.get("detailTexture"),o=Lr.firstNotNull(i.get("textureTiling"),1),s=Lr.firstNotNull(i.get("textureOffset"),0);typeof o=="number"&&(o=[o,o]),typeof s=="number"&&(s=[s,s]);var l=o[0]>1||o[1]>1?J.Texture.REPEAT:J.Texture.CLAMP_TO_EDGE,u={anisotropic:8,wrapS:l,wrapT:l};if(t==="realistic"){var c=i.get("roughness"),f=i.get("metalness");f!=null?isNaN(f)&&(e.setTextureImage("metalnessMap",f,n,u),f=Lr.firstNotNull(i.get("metalnessAdjust"),.5)):f=0,c!=null?isNaN(c)&&(e.setTextureImage("roughnessMap",c,n,u),c=Lr.firstNotNull(i.get("roughnessAdjust"),.5)):c=.5;var h=i.get("normalTexture");e.setTextureImage("detailMap",a,n,u),e.setTextureImage("normalMap",h,n,u),e.set({roughness:c,metalness:f,detailUvRepeat:o,detailUvOffset:s})}else if(t==="lambert")e.setTextureImage("detailMap",a,n,u),e.set({detailUvRepeat:o,detailUvOffset:s});else if(t==="color")e.setTextureImage("detailMap",a,n,u),e.set({detailUvRepeat:o,detailUvOffset:s});else if(t==="hatching"){var d=i.get("hatchingTextures")||[];d.length<6;for(var p=0;p<6;p++)e.setTextureImage("hatch"+(p+1),d[p],n,{anisotropic:8,wrapS:J.Texture.REPEAT,wrapT:J.Texture.REPEAT});e.set({detailUvRepeat:o,detailUvOffset:s})}};J.updateVertexAnimation=function(t,e,r,n){var i=n.get("animation"),a=n.get("animationDurationUpdate"),o=n.get("animationEasingUpdate"),s=r.shadowDepthMaterial;if(i&&e&&a>0&&e.geometry.vertexCount===r.geometry.vertexCount){r.material.define("vertex","VERTEX_ANIMATION"),r.ignorePreZ=!0,s&&s.define("vertex","VERTEX_ANIMATION");for(var l=0;l<t.length;l++)r.geometry.attributes[t[l][0]].value=e.geometry.attributes[t[l][1]].value;r.geometry.dirty(),r.__percent=0,r.material.set("percent",0),r.stopAnimation(),r.animate().when(a,{__percent:1}).during(function(){r.material.set("percent",r.__percent),s&&s.set("percent",r.__percent)}).done(function(){r.ignorePreZ=!1,r.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")}).start(o)}else r.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")};var Cn=function(t,e){this.id=t,this.zr=e;try{this.renderer=new Js({clearBit:0,devicePixelRatio:e.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(e.painter.getWidth(),e.painter.getHeight())}catch(n){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(n);return}this.onglobalout=this.onglobalout.bind(this),e.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var r=this.dom.style;r.position="absolute",r.left="0",r.top="0",this.views=[],this._picking=new gD({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new Mr({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};Cn.prototype.setUnpainted=function(){};Cn.prototype.addView=function(t){if(t.layer!==this){var e=this._viewsToDispose.indexOf(t);e>=0&&this._viewsToDispose.splice(e,1),this.views.push(t),t.layer=this;var r=this.zr;t.scene.traverse(function(n){n.__zr=r,n.addAnimatorsToZr&&n.addAnimatorsToZr(r)})}};function FJ(t){var e=t.__zr;t.__zr=null,e&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(e)}Cn.prototype.removeView=function(t){if(t.layer===this){var e=this.views.indexOf(t);e>=0&&(this.views.splice(e,1),t.scene.traverse(FJ,this),t.layer=null,this._viewsToDispose.push(t))}};Cn.prototype.removeViewsAll=function(){this.views.forEach(function(t){t.scene.traverse(FJ,this),t.layer=null,this._viewsToDispose.push(t)},this),this.views.length=0};Cn.prototype.resize=function(t,e){var r=this.renderer;r.resize(t,e)};Cn.prototype.clear=function(){var t=this.renderer.gl,e=this._backgroundColor||[0,0,0,0];t.clearColor(e[0],e[1],e[2],e[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)};Cn.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)};Cn.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)};Cn.prototype.needsRefresh=function(){this.zr.refresh()};Cn.prototype.refresh=function(t){this._backgroundColor=t?J.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var e=0;e<this.views.length;e++)this.views[e].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var e=0;e<this._viewsToDispose.length;e++)this._viewsToDispose[e].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()};Cn.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)};Cn.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var e=0;e<this.views.length;e++)this.views[e].render(this.renderer,t);this.renderer.restoreViewport()};Cn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var gye=1;Cn.prototype._startAccumulating=function(t){var e=this;this._stopAccumulating();for(var r=!1,n=0;n<this.views.length;n++)r=this.views[n].needsAccumulate()||r;if(!r)return;function i(a){if(!(!e._accumulatingId||a!==e._accumulatingId)){for(var o=!0,s=0;s<e.views.length;s++)o=e.views[s].isAccumulateFinished()&&r;o||(e._doRender(!0),t?i(a):Sp(function(){i(a)}))}}this._accumulatingId=gye++,t?i(e._accumulatingId):this._accumulatingTimeout=setTimeout(function(){i(e._accumulatingId)},50)};Cn.prototype._trackAndClean=function(){var t=[],e=[];this._textureList&&(Tw(this._textureList),Tw(this._geometriesList));for(var r=0;r<this.views.length;r++)mye(this.views[r].scene,t,e);this._textureList&&(Cw(this.renderer,this._textureList),Cw(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=e};function Tw(t){for(var e=0;e<t.length;e++)t[e].__used__=0}function Cw(t,e){for(var r=0;r<e.length;r++)e[r].__used__||e[r].dispose(t)}function BS(t,e){t.__used__=t.__used__||0,t.__used__++,t.__used__===1&&e.push(t)}function mye(t,e,r){var n,i;t.traverse(function(o){if(o.isRenderable()){var s=o.geometry,l=o.material;if(l!==n)for(var u=l.getTextureUniforms(),c=0;c<u.length;c++){var f=u[c],h=l.uniforms[f].value;if(h){if(h instanceof at)BS(h,e);else if(h instanceof Array)for(var d=0;d<h.length;d++)h[d]instanceof at&&BS(h[d],e)}}s!==i&&BS(s,r),n=l,i=s}});for(var a=0;a<t.lights.length;a++)t.lights[a].cubemap&&BS(t.lights[a].cubemap,e)}Cn.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Tw(this._textureList),Tw(this._geometriesList),Cw(this.renderer,this._textureList),Cw(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)};Cn.prototype.onmousedown=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY);e&&(this._dispatchEvent("mousedown",t,e),this._dispatchDataEvent("mousedown",t,e)),this._downX=t.offsetX,this._downY=t.offsetY}};Cn.prototype.onmousemove=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY),r=e&&e.target,n=this._hovered;this._hovered=e,n&&r!==n.target&&(n.relatedTarget=r,this._dispatchEvent("mouseout",t,n),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,e),e&&(this.zr.setCursorStyle("pointer"),(!n||r!==n.target)&&this._dispatchEvent("mouseover",t,e)),this._dispatchDataEvent("mousemove",t,e)}};Cn.prototype.onmouseup=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY);e&&(this._dispatchEvent("mouseup",t,e),this._dispatchDataEvent("mouseup",t,e)),this._upX=t.offsetX,this._upY=t.offsetY}};Cn.prototype.onclick=Cn.prototype.dblclick=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){var e=this._upX-this._downX,r=this._upY-this._downY;if(!(Math.sqrt(e*e+r*r)>20)){t=t.event;var n=this.pickObject(t.offsetX,t.offsetY);n&&(this._dispatchEvent(t.type,t,n),this._dispatchDataEvent(t.type,t,n));var i=this._clickToSetFocusPoint(t);if(i){var a=i.view.setDOFFocusOnPoint(i.distance);a&&this.zr.refresh()}}}};Cn.prototype._clickToSetFocusPoint=function(t){for(var e=this.renderer,r=e.viewport,n=this.views.length-1;n>=0;n--){var i=this.views[n];if(i.hasDOF()&&i.containPoint(t.offsetX,t.offsetY)){this._picking.scene=i.scene,this._picking.camera=i.camera,e.viewport=i.viewport;var a=this._picking.pick(t.offsetX,t.offsetY,!0);if(a)return a.view=i,a}}e.viewport=r};Cn.prototype.onglobalout=function(t){var e=this._hovered;e&&this._dispatchEvent("mouseout",t,{target:e.target})};Cn.prototype.pickObject=function(t,e){for(var r=[],n=this.renderer,i=n.viewport,a=0;a<this.views.length;a++){var o=this.views[a];o.containPoint(t,e)&&(this._picking.scene=o.scene,this._picking.camera=o.camera,n.viewport=o.viewport,this._picking.pickAll(t,e,r))}return n.viewport=i,r.sort(function(s,l){return s.distance-l.distance}),r[0]};Cn.prototype._dispatchEvent=function(t,e,r){r||(r={});var n=r.target;for(r.cancelBubble=!1,r.event=e,r.type=t,r.offsetX=e.offsetX,r.offsetY=e.offsetY;n&&(n.trigger(t,r),n=n.getParent(),!r.cancelBubble););this._dispatchToView(t,r)};Cn.prototype._dispatchDataEvent=function(t,e,r){var n=r&&r.target,i=n&&n.dataIndex,a=n&&n.seriesIndex,o=n&&n.eventData,s=!1,l=this._zrEventProxy;l.x=e.offsetX,l.y=e.offsetY,l.update();var u={target:l};const c=Ht(l);t==="mousemove"&&(i!=null?i!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(c.dataIndex=this._lastDataIndex,c.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(u,"mouseout",e)),s=!0):o!=null&&o!==this._lastEventData&&(this._lastEventData!=null&&(c.eventData=this._lastEventData,this.zr.handler.dispatchToElement(u,"mouseout",e)),s=!0),this._lastEventData=o,this._lastDataIndex=i,this._lastSeriesIndex=a),c.eventData=o,c.dataIndex=i,c.seriesIndex=a,(o!=null||parseInt(i,10)>=0&&parseInt(a,10)>=0)&&(this.zr.handler.dispatchToElement(u,t,e),s&&this.zr.handler.dispatchToElement(u,"mouseover",e))};Cn.prototype._dispatchToView=function(t,e){for(var r=0;r<this.views.length;r++)this.views[r].containPoint(e.offsetX,e.offsetY)&&this.views[r].trigger(t,e)};Object.assign(Cn.prototype,vD);var yye=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function v1(t,e){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,n=t[e].emphasis;r&&(t[e]=r),n&&(t.emphasis=t.emphasis||{},t.emphasis[e]=n)}}function _ye(t){v1(t,"itemStyle"),v1(t,"lineStyle"),v1(t,"areaStyle"),v1(t,"label")}function zS(t){t&&(t instanceof Array||(t=[t]),G(t,function(e){if(e.axisLabel){var r=e.axisLabel;Object.assign(r,r.textStyle),r.textStyle=null}}))}function xye(t){G(t.series,function(e){hr(yye,e.type)>=0&&(_ye(e),e.coordinateSystem==="mapbox"&&(e.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))}),zS(t.xAxis3D),zS(t.yAxis3D),zS(t.zAxis3D),zS(t.grid3D),v1(t.geo3D)}function BJ(t){this._layers={},this._zr=t}BJ.prototype.update=function(t,e){var r=this,n=e.getZr();if(!n.getWidth()||!n.getHeight()){console.warn("Dom has no width or height");return}function i(s){n.setSleepAfterStill(0);var l;s.coordinateSystem&&s.coordinateSystem.model,l=s.get("zlevel");var u=r._layers,c=u[l];if(!c){if(c=u[l]=new Cn("gl-"+l,n),n.painter.isSingleCanvas()){c.virtual=!0;var f=new aa({z:1e4,style:{image:c.renderer.canvas},silent:!0});c.__hostImage=f,n.add(f)}n.painter.insertLayer(l,c)}return c.__hostImage&&c.__hostImage.setStyle({width:c.renderer.getWidth(),height:c.renderer.getHeight()}),c}function a(s,l){s&&s.traverse(function(u){u.isRenderable&&u.isRenderable()&&(u.ignorePicking=u.$ignorePicking!=null?u.$ignorePicking:l)})}for(var o in this._layers)this._layers[o].removeViewsAll();t.eachComponent(function(s,l){if(s!=="series"){var u=e.getViewOfComponentModel(l),c=l.coordinateSystem;if(u.__ecgl__){var f;if(c){if(!c.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+l.id);return}f=c.viewGL}else{if(!l.viewGL){console.error("Can't find viewGL of component "+l.id);return}f=c.viewGL}var f=c.viewGL,h=i(l);h.addView(f),u.afterRender&&u.afterRender(l,t,e,h),a(u.groupGL,l.get("silent"))}}}),t.eachSeries(function(s){var l=e.getViewOfSeriesModel(s),u=s.coordinateSystem;if(l.__ecgl__){if(u&&!u.viewGL&&!l.viewGL){console.error("Can't find viewGL of series "+l.id);return}var c=u&&u.viewGL||l.viewGL,f=i(s);f.addView(c),l.afterRender&&l.afterRender(s,t,e,f),a(l.groupGL,s.get("silent"))}})};SZ(function(t){var e=t.getZr(),r=e.painter.dispose;e.painter.dispose=function(){typeof this.eachOtherLayer=="function"&&this.eachOtherLayer(function(n){n instanceof Cn&&n.dispose()}),r.call(this)},e.painter.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas)return this._layers[0].dom;var i=document.createElement("canvas"),a=n.pixelRatio||this.dpr;i.width=this.getWidth()*a,i.height=this.getHeight()*a;var o=i.getContext("2d");o.dpr=a,o.clearRect(0,0,i.width,i.height),n.backgroundColor&&(o.fillStyle=n.backgroundColor,o.fillRect(0,0,i.width,i.height));var s=this.storage.getDisplayList(!0),l={},u,c=this;function f(v,g){var m=c._zlevelList;v==null&&(v=-1/0);for(var x,S=0;S<m.length;S++){var b=m[S],T=c._layers[b];if(!T.__builtin__&&b>v&&b<g){x=T;break}}x&&x.renderToCanvas&&(o.save(),x.renderToCanvas(o),o.restore())}for(var h={ctx:o},d=0;d<s.length;d++){var p=s[d];p.zlevel!==u&&(f(u,p.zlevel),u=p.zlevel),this._doPaintEl(p,h,!0,null,l)}return f(u,1/0),i}});bZ(function(t,e){var r=e.getZr(),n=r.__egl=r.__egl||new BJ(r);n.update(t,e)});KL(xye);const u4={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},t.alpha!=null&&(this.option.viewControl.alpha=t.alpha),t.beta!=null&&(this.option.viewControl.beta=t.beta),t.distance!=null&&(this.option.viewControl.distance=t.distance),t.center!=null&&(this.option.viewControl.center=t.center)}},u0={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},c0={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var c4=fr.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});xt(c4.prototype,u4);xt(c4.prototype,u0);xt(c4.prototype,c0);var Py=Lr.firstNotNull,Xz={left:0,middle:1,right:2};function Kz(t){return t instanceof Array||(t=[t,t]),t}var x2=_a.extend(function(){return{zr:null,viewGL:null,_center:new Ne,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new lr,_panVelocity:new lr,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(t){this[t]=this[t].bind(this)},this)},{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,e){e=e||{};var r=e.baseDistance||0,n=e.baseOrthoSize||1,i=t.get("projection");i!=="perspective"&&i!=="orthographic"&&i!=="isometric"&&(i="perspective"),this._projection=i,this.viewGL.setProjection(i);var a=t.get("distance")+r,o=t.get("orthographicSize")+n;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(h){this[h[0]]=Py(t.get(h[0]),h[1])},this),this.minDistance+=r,this.maxDistance+=r,this.minOrthographicSize+=n,this.maxOrthographicSize+=n;var s=t.ecModel,l={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(h){l[h]=Py(t.get(h),s&&s.get(h))});var u=Py(e.alpha,t.get("alpha"))||0,c=Py(e.beta,t.get("beta"))||0,f=Py(e.center,t.get("center"))||[0,0,0];l.animation&&l.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:u,beta:c,center:f,distance:a,orthographicSize:o,easing:l.animationEasingUpdate,duration:l.animationDurationUpdate}):(this.setDistance(a),this.setAlpha(u),this.setBeta(c),this.setCenter(f),this.setOrthographicSize(o)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(t){var e=this.zr,r=this,n={},i={};return t.distance!=null&&(n.distance=this.getDistance(),i.distance=t.distance),t.orthographicSize!=null&&(n.orthographicSize=this.getOrthographicSize(),i.orthographicSize=t.orthographicSize),t.alpha!=null&&(n.alpha=this.getAlpha(),i.alpha=t.alpha),t.beta!=null&&(n.beta=this.getBeta(),i.beta=t.beta),t.center!=null&&(n.center=this.getCenter(),i.center=t.center),this._addAnimator(e.animation.animate(n).when(t.duration||1e3,i).during(function(){n.alpha!=null&&r.setAlpha(n.alpha),n.beta!=null&&r.setBeta(n.beta),n.distance!=null&&r.setDistance(n.distance),n.center!=null&&r.setCenter(n.center),n.orthographicSize!=null&&r.setOrthographicSize(n.orthographicSize),r._needsUpdate=!0})).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var e=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=e*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var e=this._rotateVelocity;this._phi=e.y*t/20+this._phi,this._theta=e.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(e,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var e=this.getCamera(),r=this._orthoSize,n=r/this.viewGL.viewport.height*this.viewGL.viewport.width;e.left=-n/2,e.right=n/2,e.top=r/2,e.bottom=-r/2},_updatePan:function(t){var e=this._panVelocity,r=this._distance,n=this.getCamera(),i=n.worldTransform.y,a=n.worldTransform.x;this._center.scaleAndAdd(a,-e.x*r/200).scaleAndAdd(i,-e.y*r/200),this._vectorDamping(e,0)},_updateTransform:function(){var t=this.getCamera(),e=new Ne,r=this._theta+Math.PI/2,n=this._phi+Math.PI/2,i=Math.sin(r);e.x=i*Math.cos(n),e.y=-Math.cos(r),e.z=i*Math.sin(n),t.position.copy(this._center).scaleAndAdd(e,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,e=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout(function(){e._rotating=!0},t*1e3))},_vectorDamping:function(t,e){var r=t.len();r=r*e,r<1e-4&&(r=0),t.normalize().scale(r)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,e=Math.asin(t.y),r=Math.atan2(t.x,t.z);this._theta=e,this._phi=-r,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){if(!t.target&&!this._isAnimating()){var e=t.offsetX,r=t.offsetY;this.viewGL&&!this.viewGL.containPoint(e,r)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?t.event.targetTouches.length===1&&(this._mode="rotate"):t.event.button===Xz[this.rotateMouseButton]?this._mode="rotate":t.event.button===Xz[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)}},_mouseMoveHandler:function(t){if(!(t.target&&t.target.__isGLToZRProxy)&&!this._isAnimating()){var e=Kz(this.panSensitivity),r=Kz(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*r[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*r[1]):this._mode==="pan"&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*e[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*e[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){if(!this._isAnimating()){var e=t.event.wheelDelta||-t.event.detail;this._zoomHandler(t,e)}},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,e){if(e!==0){var r=t.offsetX,n=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(r,n))){var i;this._projection==="perspective"?i=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):i=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(e>0?-1:1)*i*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),t.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var e=this._animators;return e.push(t),t.done(function(){var r=e.indexOf(t);r>=0&&e.splice(r,1)}),t}});Object.defineProperty(x2.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});const S2={convertToDynamicArray:function(t){t&&this.resetOffset();var e=this.attributes;for(var r in e)t||!e[r].value?e[r].value=[]:e[r].value=Array.prototype.slice.call(e[r].value);t||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var e in t)t[e].value&&t[e].value.length>0?t[e].value=new Float32Array(t[e].value):t[e].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},yi={vec2:Qe,vec3:oe,vec4:Ue,mat2:Zr,mat2d:un,mat3:qt,mat4:Ve,quat:yt};var tM=yi.vec3,Yz=[[0,0],[1,1]],Rh=Ir.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Ir.Attribute("position","float",3,"POSITION"),positionPrev:new Ir.Attribute("positionPrev","float",3),positionNext:new Ir.Attribute("positionNext","float",3),prevPositionPrev:new Ir.Attribute("prevPositionPrev","float",3),prevPosition:new Ir.Attribute("prevPosition","float",3),prevPositionNext:new Ir.Attribute("prevPositionNext","float",3),offset:new Ir.Attribute("offset","float",1),color:new Ir.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var e=this.attributes;this.vertexCount!==t&&(e.position.init(t),e.color.init(t),this.useNativeLine||(e.positionPrev.init(t),e.positionNext.init(t),e.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,e,r,n){var i=tM.dist(t,e)+tM.dist(r,e)+tM.dist(n,r),a=1/(i+1)*this.segmentScale;return a},getCubicCurveVertexCount:function(t,e,r,n){var i=this._getCubicCurveApproxStep(t,e,r,n),a=Math.ceil(1/i);return this.useNativeLine?a*2:a*2+2},getCubicCurveTriangleCount:function(t,e,r,n){var i=this._getCubicCurveApproxStep(t,e,r,n),a=Math.ceil(1/i);return this.useNativeLine?0:a*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Yz)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Yz)},getPolylineVertexCount:function(t){var e;if(typeof t=="number")e=t;else{var r=typeof t[0]!="number";e=r?t.length:t.length/3}return this.useNativeLine?(e-1)*2:(e-1)*2+2},getPolylineTriangleCount:function(t){var e;if(typeof t=="number")e=t;else{var r=typeof t[0]!="number";e=r?t.length:t.length/3}return this.useNativeLine?0:Math.max(e-1,0)*2},addCubicCurve:function(t,e,r,n,i,a){a==null&&(a=1);for(var o=t[0],s=t[1],l=t[2],u=e[0],c=e[1],f=e[2],h=r[0],d=r[1],p=r[2],v=n[0],g=n[1],m=n[2],x=this._getCubicCurveApproxStep(t,e,r,n),S=x*x,b=S*x,T=3*x,w=3*S,E=6*S,M=6*b,A=o-u*2+h,R=s-c*2+d,L=l-f*2+p,I=(u-h)*3-o+v,N=(c-d)*3-s+g,k=(f-p)*3-l+m,z=o,B=s,V=l,F=(u-o)*T+A*w+I*b,$=(c-s)*T+R*w+N*b,W=(f-l)*T+L*w+k*b,H=A*E+I*M,X=R*E+N*M,te=L*E+k*M,Y=I*M,ee=N*M,se=k*M,ne=0,le=0,pe=Math.ceil(1/x),Se=new Float32Array((pe+1)*3),Se=[],_e=0,le=0;le<pe+1;le++)Se[_e++]=z,Se[_e++]=B,Se[_e++]=V,z+=F,B+=$,V+=W,F+=H,$+=X,W+=te,H+=Y,X+=ee,te+=se,ne+=x,ne>1&&(z=F>0?Math.min(z,v):Math.max(z,v),B=$>0?Math.min(B,g):Math.max(B,g),V=W>0?Math.min(V,m):Math.max(V,m));return this.addPolyline(Se,i,a)},addLine:function(t,e,r,n){return this.addPolyline([t,e],r,n)},addPolyline:function(t,e,r,n,i){if(t.length){var a=typeof t[0]!="number";if(i==null&&(i=a?t.length:t.length/3),!(i<2)){n==null&&(n=0),r==null&&(r=1),this._itemVertexOffsets.push(this._vertexOffset);var a=typeof t[0]!="number",o=a?typeof e[0]!="number":e.length/4===i,s=this.attributes.position,l=this.attributes.positionPrev,u=this.attributes.positionNext,c=this.attributes.color,f=this.attributes.offset,h=this.indices,d=this._vertexOffset,p,v;r=Math.max(r,.01);for(var g=n;g<i;g++){if(a)p=t[g],o?v=e[g]:v=e;else{var m=g*3;if(p=p||[],p[0]=t[m],p[1]=t[m+1],p[2]=t[m+2],o){var x=g*4;v=v||[],v[0]=e[x],v[1]=e[x+1],v[2]=e[x+2],v[3]=e[x+3]}else v=e}if(this.useNativeLine?g>1&&(s.copy(d,d-1),c.copy(d,d-1),d++):(g<i-1&&(l.set(d+2,p),l.set(d+3,p)),g>0&&(u.set(d-2,p),u.set(d-1,p)),s.set(d,p),s.set(d+1,p),c.set(d,v),c.set(d+1,v),f.set(d,r/2),f.set(d+1,-r/2),d+=2),this.useNativeLine)c.set(d,v),s.set(d,p),d++;else if(g>0){var S=this._triangleOffset*3,h=this.indices;h[S]=d-4,h[S+1]=d-3,h[S+2]=d-2,h[S+3]=d-3,h[S+4]=d-1,h[S+5]=d-2,this._triangleOffset+=2}}if(!this.useNativeLine){var b=this._vertexOffset,T=this._vertexOffset+i*2;l.copy(b,b+2),l.copy(b+1,b+3),u.copy(T-1,T-3),u.copy(T-2,T-4)}return this._vertexOffset=d,this._vertexOffset}}},setItemColor:function(t,e){for(var r=this._itemVertexOffsets[t],n=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,i=r;i<n;i++)this.attributes.color.set(i,e);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});At(Rh.prototype,S2);function Ew(t,e,r,n,i,a,o){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=n,this.height=i,this.offsetX=e,this.offsetY=r,this.dpr=o,this.gap=a}Ew.prototype={constructor:Ew,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,e,r){var n=t.getBoundingRect();e==null&&(e=n.width),r==null&&(r=n.height),e*=this.dpr,r*=this.dpr,this._fitElement(t,e,r);var i=this._x,a=this._y,o=this.width*this.dpr,s=this.height*this.dpr,l=this.gap;if(i+e+l>o&&(i=this._x=0,a+=this._rowHeight+l,this._y=a,this._rowHeight=0),this._x+=e+l,this._rowHeight=Math.max(this._rowHeight,r),a+r+l>s)return null;t.x+=this.offsetX*this.dpr+i,t.y+=this.offsetY*this.dpr+a,this._zr.add(t);var u=[this.offsetX/this.width,this.offsetY/this.height],c=[[i/o+u[0],a/s+u[1]],[(i+e)/o+u[0],(a+r)/s+u[1]]];return c},_fitElement:function(t,e,r){var n=t.getBoundingRect(),i=e/n.width,a=r/n.height;t.x=-n.x*i,t.y=-n.y*a,t.scaleX=i,t.scaleY=a,t.update()}};function Aw(t){t=t||{},t.width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=t.gap==null?2:t.gap;var e=document.createElement("canvas");e.width=t.width*t.devicePixelRatio,e.height=t.height*t.devicePixelRatio,this._canvas=e,this._texture=new Sr({image:e,flipY:!1});var r=this;this._zr=v6(e);var n=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){n.call(this),r._texture.dirty(),r.onupdate&&r.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new Ew(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}Aw.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,e=this._textureAtlasNodes,r=e.length,n=r*this._nodeWidth%t,i=Math.floor(r*this._nodeWidth/t)*this._nodeHeight;if(!(i>=t)){var a=(n+this._nodeWidth)*this._dpr,o=(i+this._nodeHeight)*this._dpr;try{this._zr.resize({width:a,height:o})}catch(l){this._canvas.width=a,this._canvas.height=o}var s=new Ew(this._zr,n,i,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(s),s}},add:function(t,e,r){if(this._coords[t.id])return this._coords[t.id];var n=this._getCurrentNode().add(t,e,r);if(!n){var i=this._expand();if(!i)return;n=i.add(t,e,r)}return this._coords[t.id]=n,n},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};function wh(){}wh.prototype={constructor:wh,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new J.DirectionalLight({shadowBias:.005}),this.ambientLight=new J.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var e=this.mainLight,r=this.ambientLight,n=t.getModel("light"),i=n.getModel("main"),a=n.getModel("ambient");e.intensity=i.get("intensity"),r.intensity=a.get("intensity"),e.color=J.parseColor(i.get("color")).slice(0,3),r.color=J.parseColor(a.get("color")).slice(0,3);var o=i.get("alpha")||0,s=i.get("beta")||0;e.position.setArray(J.directionFromAlphaBeta(o,s)),e.lookAt(J.Vector3.ZERO),e.castShadow=i.get("shadow"),e.shadowResolution=J.getShadowResolution(i.get("shadowQuality"))},updateAmbientCubemap:function(t,e,r){var n=e.getModel("light.ambientCubemap"),i=n.get("texture");if(i){this._cubemapLightsCache=this._cubemapLightsCache||{};var a=this._cubemapLightsCache[i];if(!a){var o=this;a=this._cubemapLightsCache[i]=J.createAmbientCubemap(n.option,t,r,function(){o._isSkyboxFromAmbientCubemap&&o._skybox.setEnvironmentMap(a.specular.cubemap),r.getZr().refresh()})}this._lightRoot.add(a.diffuse),this._lightRoot.add(a.specular),this._currentCubemapLights=a}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,e,r){var n=e.get("environment"),i=this;function a(){return i._skybox=i._skybox||new __,i._skybox}var o=a();if(n&&n!=="none")if(n==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var s=this._currentCubemapLights.specular.cubemap;o.setEnvironmentMap(s),this._scene&&o.attachScene(this._scene),o.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof n=="object"&&n.colorStops||typeof n=="string"&&go(n)){this._isSkyboxFromAmbientCubemap=!1;var l=new J.Texture2D({anisotropic:8,flipY:!1});o.setEnvironmentMap(l);var u=l.image=document.createElement("canvas");u.width=u.height=16;var c=u.getContext("2d"),f=new Mr({shape:{x:0,y:0,width:16,height:16},style:{fill:n}});QT(c,f),o.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var l=J.loadTexture(n,r,{anisotropic:8,flipY:!1});o.setEnvironmentMap(l),o.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var h=e.coordinateSystem;if(this._skybox)if(h&&h.viewGL&&n!=="auto"&&!(n.match&&n.match(/.hdr$/))){var d=h.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[d]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var yd=yi.vec3,zJ=Ir.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Ir.Attribute("position","float",3,"POSITION"),normal:new Ir.Attribute("normal","float",3,"NORMAL"),color:new Ir.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var e=this.attributes,r=this.getQuadVertexCount()*t,n=this.getQuadTriangleCount()*t;this.vertexCount!==r&&(e.position.init(r),e.normal.init(r),e.color.init(r)),this.triangleCount!==n&&(this.indices=r>65535?new Uint32Array(n*3):new Uint16Array(n*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=yd.create(),e=yd.create(),r=yd.create(),n=[0,3,1,3,2,1];return function(i,a){var o=this.attributes.position,s=this.attributes.normal,l=this.attributes.color;yd.sub(t,i[1],i[0]),yd.sub(e,i[2],i[1]),yd.cross(r,t,e),yd.normalize(r,r);for(var u=0;u<4;u++)o.set(this._vertexOffset+u,i[u]),l.set(this._vertexOffset+u,a),s.set(this._vertexOffset+u,r);for(var c=this._faceOffset*3,u=0;u<6;u++)this.indices[c+u]=n[u]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});At(zJ.prototype,S2);var nR=Lr.firstNotNull,Sye={x:0,y:2,z:1};function bye(t,e,r,n){var i=[0,0,0],a=n<0?r.getExtentMin():r.getExtentMax();i[Sye[r.dim]]=a,t.position.setArray(i),t.rotation.identity(),e.distance=-Math.abs(a),e.normal.set(0,0,0),r.dim==="x"?(t.rotation.rotateY(n*Math.PI/2),e.normal.x=-n):r.dim==="z"?(t.rotation.rotateX(-n*Math.PI/2),e.normal.y=-n):(n>0&&t.rotation.rotateY(Math.PI),e.normal.z=-n)}function f4(t,e,r){this.rootNode=new J.Node;var n=new J.Mesh({geometry:new Rh({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),i=new J.Mesh({geometry:new zJ,material:r,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(i),this.rootNode.add(n),this.faceInfo=t,this.plane=new J.Plane,this.linesMesh=n,this.quadsMesh=i}f4.prototype.update=function(t,e,r){var n=t.coordinateSystem,i=[n.getAxis(this.faceInfo[0]),n.getAxis(this.faceInfo[1])],a=this.linesMesh.geometry,o=this.quadsMesh.geometry;a.convertToDynamicArray(!0),o.convertToDynamicArray(!0),this._updateSplitLines(a,i,t,r),this._udpateSplitAreas(o,i,t,r),a.convertToTypedArray(),o.convertToTypedArray();var s=n.getAxis(this.faceInfo[2]);bye(this.rootNode,this.plane,s,this.faceInfo[3])};f4.prototype._updateSplitLines=function(t,e,r,n){var i=n.getDevicePixelRatio();e.forEach(function(a,o){var s=a.model,l=e[1-o].getExtent();if(!a.scale.isBlank()){var u=s.getModel("splitLine",r.getModel("splitLine"));if(u.get("show")){var c=u.getModel("lineStyle"),f=c.get("color"),h=nR(c.get("opacity"),1),d=nR(c.get("width"),1);f=De(f)?f:[f];for(var p=a.getTicksCoords({tickModel:u}),v=0,g=0;g<p.length;g++){var m=p[g].coord,x=J.parseColor(f[v%f.length]);x[3]*=h;var S=[0,0,0],b=[0,0,0];S[o]=b[o]=m,S[1-o]=l[0],b[1-o]=l[1],t.addLine(S,b,x,d*i),v++}}}})};f4.prototype._udpateSplitAreas=function(t,e,r,n){e.forEach(function(i,a){var o=i.model,s=e[1-a].getExtent();if(!i.scale.isBlank()){var l=o.getModel("splitArea",r.getModel("splitArea"));if(l.get("show")){var u=l.getModel("areaStyle"),c=u.get("color"),f=nR(u.get("opacity"),1);c=De(c)?c:[c];for(var h=i.getTicksCoords({tickModel:l,clamp:!0}),d=0,p=[0,0,0],v=[0,0,0],g=0;g<h.length;g++){var m=h[g].coord,x=[0,0,0],S=[0,0,0];if(x[a]=S[a]=m,x[1-a]=s[0],S[1-a]=s[1],g===0){p=x,v=S;continue}var b=J.parseColor(c[d%c.length]);b[3]*=f,t.addQuad([p,x,S,v],b),p=x,v=S,d++}}}})};var qz=[0,1,2,0,2,3],UJ=Ir.extend(function(){return{attributes:{position:new Ir.Attribute("position","float",3,"POSITION"),texcoord:new Ir.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Ir.Attribute("offset","float",2),color:new Ir.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var e=t*4,r=t*2;this.vertexCount!==e&&(this.attributes.position.init(e),this.attributes.offset.init(e),this.attributes.color.init(e)),this.triangleCount!==r&&(this.indices=e>65535?new Uint32Array(r*3):new Uint16Array(r*3))},setSpriteAlign:function(t,e,r,n,i){r==null&&(r="left"),n==null&&(n="top");var a,o,s,l;switch(i=i||0,r){case"left":a=i,s=e[0]+i;break;case"center":case"middle":a=-e[0]/2,s=e[0]/2;break;case"right":a=-e[0]-i,s=-i;break}switch(n){case"bottom":o=i,l=e[1]+i;break;case"middle":o=-e[1]/2,l=e[1]/2;break;case"top":o=-e[1]-i,l=-i;break}var u=t*4,c=this.attributes.offset;c.set(u,[a,l]),c.set(u+1,[s,l]),c.set(u+2,[s,o]),c.set(u+3,[a,o])},addSprite:function(t,e,r,n,i,a){var o=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,e,r,n,i,a);for(var s=0;s<qz.length;s++)this.indices[this._faceOffset*3+s]=qz[s]+o;return this._faceOffset+=2,this._vertexOffset+=4,o/4},setSprite:function(t,e,r,n,i,a,o){for(var s=t*4,l=this.attributes,u=0;u<4;u++)l.position.set(s+u,e);var c=l.texcoord;c.set(s,[n[0][0],n[0][1]]),c.set(s+1,[n[1][0],n[0][1]]),c.set(s+2,[n[1][0],n[1][1]]),c.set(s+3,[n[0][0],n[1][1]]),this.setSpriteAlign(t,r,i,a,o)}});At(UJ.prototype,S2);const wye=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;J.Shader.import(wye);const _D=J.Mesh.extend(function(){var t=new UJ({dynamic:!0}),e=new J.Material({shader:J.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:t,material:e,culling:!1,castShadow:!1,ignorePicking:!0}});var _d=Lr.firstNotNull,xd={x:0,y:2,z:1};function xD(t,e){var r=new J.Mesh({geometry:new Rh({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,renderOrder:2}),n=new _D;n.material.depthMask=!1;var i=new J.Node;i.add(r),i.add(n),this.rootNode=i,this.dim=t,this.linesMesh=r,this.labelsMesh=n,this.axisLineCoords=null,this.labelElements=[]}var rM={x:"y",y:"x",z:"y"};xD.prototype.update=function(t,e,r){var n=t.coordinateSystem,i=n.getAxis(this.dim),a=this.linesMesh.geometry,o=this.labelsMesh.geometry;a.convertToDynamicArray(!0),o.convertToDynamicArray(!0);var s=i.model,l=i.getExtent(),L=r.getDevicePixelRatio(),u=s.getModel("axisLine",t.getModel("axisLine")),c=s.getModel("axisTick",t.getModel("axisTick")),f=s.getModel("axisLabel",t.getModel("axisLabel")),h=u.get("lineStyle.color");if(u.get("show")){var d=u.getModel("lineStyle"),p=[0,0,0],v=[0,0,0],g=xd[i.dim];p[g]=l[0],v[g]=l[1],this.axisLineCoords=[p,v];var m=J.parseColor(h),x=_d(d.get("width"),1),S=_d(d.get("opacity"),1);m[3]*=S,a.addLine(p,v,m,x*L)}if(c.get("show")){var b=c.getModel("lineStyle"),T=J.parseColor(_d(b.get("color"),h)),x=_d(b.get("width"),1);T[3]*=_d(b.get("opacity"),1);for(var w=i.getTicksCoords(),E=c.get("length"),M=0;M<w.length;M++){var A=w[M].coord,p=[0,0,0],v=[0,0,0],g=xd[i.dim],R=xd[rM[i.dim]];p[g]=v[g]=A,v[R]=E,a.addLine(p,v,T,x*L)}}this.labelElements=[];var L=r.getDevicePixelRatio();if(f.get("show"))for(var w=i.getTicksCoords(),I=s.get("data"),N=f.get("margin"),k=i.getViewLabels(),M=0;M<k.length;M++){var z=k[M].tickValue,B=k[M].formattedLabel,V=k[M].rawLabel,A=i.dataToCoord(z),F=[0,0,0],g=xd[i.dim],R=xd[rM[i.dim]];F[g]=F[g]=A,F[R]=N;var $=f;I&&I[z]&&I[z].textStyle&&($=new Br(I[z].textStyle,f,s.ecModel));var W=_d($.get("color"),h),H=new Ar({style:dn($,{text:B,fill:typeof W=="function"?W(i.type==="category"?V:i.type==="value"?z+"":z,M):W,verticalAlign:"top",align:"left"})}),X=e.add(H),te=H.getBoundingRect();o.addSprite(F,[te.width*L,te.height*L],X),this.labelElements.push(H)}if(s.get("name")){var Y=s.getModel("nameTextStyle"),F=[0,0,0],g=xd[i.dim],R=xd[rM[i.dim]],ee=_d(Y.get("color"),h),se=Y.get("borderColor"),x=Y.get("borderWidth");F[g]=F[g]=(l[0]+l[1])/2,F[R]=s.get("nameGap");var H=new Ar({style:dn(Y,{text:s.get("name"),fill:ee,stroke:se,lineWidth:x})}),X=e.add(H),te=H.getBoundingRect();o.addSprite(F,[te.width*L,te.height*L],X),H.__idx=this.labelElements.length,this.nameLabelElement=H}this.labelsMesh.material.set("textureAtlas",e.getTexture()),this.labelsMesh.material.set("uvScale",e.getCoordsScale()),a.convertToTypedArray(),o.convertToTypedArray()};xD.prototype.setSpriteAlign=function(t,e,r){for(var n=r.getDevicePixelRatio(),i=this.labelsMesh.geometry,a=0;a<this.labelElements.length;a++){var o=this.labelElements[a],s=o.getBoundingRect();i.setSpriteAlign(a,[s.width*n,s.height*n],t,e)}var l=this.nameLabelElement;if(l){var s=l.getBoundingRect();i.setSpriteAlign(l.__idx,[s.width*n,s.height*n],t,e),i.dirty()}this.textAlign=t,this.textVerticalAlign=e};const h4=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`;var Zz=Lr.firstNotNull;J.Shader.import(h4);var Sd={x:0,y:2,z:1};const Tye=_n.extend({type:"grid3D",__ecgl__:!0,init:function(t,e){var r=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],n=["x","y","z"],i=new J.Material({shader:J.createShader("ecgl.color"),depthMask:!1,transparent:!0}),a=new J.Material({shader:J.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});i.define("fragment","DOUBLE_SIDED"),i.define("both","VERTEX_COLOR"),this.groupGL=new J.Node,this._control=new x2({zr:e.getZr()}),this._control.init(),this._faces=r.map(function(s){var l=new f4(s,a,i);return this.groupGL.add(l.rootNode),l},this),this._axes=n.map(function(s){var l=new xD(s,a);return this.groupGL.add(l.rootNode),l},this);var o=e.getDevicePixelRatio();this._axisLabelSurface=new Aw({width:256,height:256,devicePixelRatio:o}),this._axisLabelSurface.onupdate=function(){e.getZr().refresh()},this._axisPointerLineMesh=new J.Mesh({geometry:new Rh({useNativeLine:!1}),material:a,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new Aw({width:128,height:128,devicePixelRatio:o}),this._axisPointerLabelsMesh=new _D({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new J.Node,this._sceneHelper=new wh,this._sceneHelper.initLight(this._lightRoot)},render:function(t,e,r){this._model=t,this._api=r;var n=t.coordinateSystem;n.viewGL.add(this._lightRoot),t.get("show")?n.viewGL.add(this.groupGL):n.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(n.viewGL);var a=t.getModel("viewControl");i.setFromViewControlModel(a,0),this._axisLabelSurface.clear(),i.off("update"),t.get("show")&&(this._faces.forEach(function(o){o.update(t,e,r)},this),this._axes.forEach(function(o){o.update(t,this._axisLabelSurface,r)},this)),i.on("update",this._onCameraChange.bind(this,t,r),this),this._sceneHelper.setScene(n.viewGL.scene),this._sceneHelper.updateLight(t),n.viewGL.setPostEffect(t.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,e,r,n){var i=n.renderer;this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r)},showAxisPointer:function(t,e,r,n){this._doShowAxisPointer(),this._updateAxisPointer(n.value)},hideAxisPointer:function(t,e,r,n){this._doHideAxisPointer()},_initMouseHandler:function(t){var e=t.coordinateSystem,r=e.viewGL;t.get("show")&&t.get("axisPointer.show")?r.on("mousemove",this._updateAxisPointerOnMousePosition,this):r.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var e=this._model,r=e.coordinateSystem,n=r.viewGL,i=n.castRay(t.offsetX,t.offsetY,new J.Ray),a,o=0;o<this._faces.length;o++){var s=this._faces[o];if(!s.rootNode.invisible){s.plane.normal.dot(n.camera.worldTransform.z)<0&&s.plane.normal.negate();var l=i.intersectPlane(s.plane);if(l){var u=r.getAxis(s.faceInfo[0]),c=r.getAxis(s.faceInfo[1]),f=Sd[s.faceInfo[0]],h=Sd[s.faceInfo[1]];u.contain(l.array[f])&&c.contain(l.array[h])&&(a=l)}}}if(a){var d=r.pointToData(a.array,[],!0);this._updateAxisPointer(d),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,e){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var r=this._control;e.dispatchAction({type:"grid3DChangeCamera",alpha:r.getAlpha(),beta:r.getBeta(),distance:r.getDistance(),center:r.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),e=new J.Vector3;t.update();for(var r=0;r<this._faces.length/2;r++){for(var n=[],i=0;i<2;i++){var a=this._faces[r*2+i];a.rootNode.getWorldPosition(e),e.transformMat4(t.viewMatrix),n[i]=e.z}var o=n[0]>n[1]?0:1,s=this._faces[r*2+o],l=this._faces[r*2+1-o];s.rootNode.invisible=!0,l.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,e=t.getAxis("x"),r=t.getAxis("y"),n=t.getAxis("z"),i=n.getExtentMax(),a=n.getExtentMin(),o=e.getExtentMin(),s=e.getExtentMax(),l=r.getExtentMax(),u=r.getExtentMin(),c=this._axes[0].rootNode,f=this._axes[1].rootNode,h=this._axes[2].rootNode,d=this._faces,p=d[4].rootNode.invisible?u:l,v=d[2].rootNode.invisible?i:a,g=d[0].rootNode.invisible?o:s,m=d[2].rootNode.invisible?i:a,x=d[0].rootNode.invisible?s:o,S=d[4].rootNode.invisible?u:l;c.rotation.identity(),f.rotation.identity(),h.rotation.identity(),d[4].rootNode.invisible&&(this._axes[0].flipped=!0,c.rotation.rotateX(Math.PI)),d[0].rootNode.invisible&&(this._axes[1].flipped=!0,f.rotation.rotateZ(Math.PI)),d[4].rootNode.invisible&&(this._axes[2].flipped=!0,h.rotation.rotateY(Math.PI)),c.position.set(0,v,p),f.position.set(g,m,0),h.position.set(x,0,S),c.update(),f.update(),h.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),e=[new J.Vector4,new J.Vector4],r=new J.Vector4;this.groupGL.getWorldPosition(r),r.w=1,r.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),r.x/=r.w,r.y/=r.w,this._axes.forEach(function(n){var i=n.axisLineCoords;n.labelsMesh.geometry;for(var a=0;a<e.length;a++)e[a].setArray(i[a]),e[a].w=1,e[a].transformMat4(n.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),e[a].x/=e[a].w,e[a].y/=e[a].w;var o=e[1].x-e[0].x,s=e[1].y-e[0].y,l=(e[1].x+e[0].x)/2,u=(e[1].y+e[0].y)/2,c,f;Math.abs(s/o)<.5?(c="center",f=u>r.y?"bottom":"top"):(f="middle",c=l>r.x?"left":"right"),n.setSpriteAlign(c,f,this._api)},this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var e=this._model.coordinateSystem,r=e.dataToPoint(t),n=this._axisPointerLineMesh,i=n.geometry,a=this._model.getModel("axisPointer"),o=this._api.getDevicePixelRatio();i.convertToDynamicArray(!0);function s(M){return Lr.firstNotNull(M.model.get("axisPointer.show"),a.get("show"))}function l(M){var A=M.model.getModel("axisPointer",a),R=A.getModel("lineStyle"),L=J.parseColor(R.get("color")),I=Zz(R.get("width"),1),N=Zz(R.get("opacity"),1);return L[3]*=N,{color:L,lineWidth:I}}for(var u=0;u<this._faces.length;u++){var c=this._faces[u];if(!c.rootNode.invisible){for(var f=c.faceInfo,h=f[3]<0?e.getAxis(f[2]).getExtentMin():e.getAxis(f[2]).getExtentMax(),d=Sd[f[2]],p=0;p<2;p++){var v=f[p],g=f[1-p],m=e.getAxis(v),x=e.getAxis(g);if(s(m)){var S=[0,0,0],b=[0,0,0],T=Sd[v],w=Sd[g];S[T]=b[T]=r[T],S[d]=b[d]=h,S[w]=x.getExtentMin(),b[w]=x.getExtentMax();var E=l(m);i.addLine(S,b,E.color,E.lineWidth*o)}}if(s(e.getAxis(f[2]))){var S=r.slice(),b=r.slice();b[d]=h;var E=l(e.getAxis(f[2]));i.addLine(S,b,E.color,E.lineWidth*o)}}}i.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var e=this._model,r=this._axisPointerLabelsMesh,n=this._axisPointerLabelsSurface,i=e.coordinateSystem,a=e.getModel("axisPointer");r.geometry.convertToDynamicArray(!0),n.clear();var o={x:"y",y:"x",z:"y"};this._axes.forEach(function(s,l){var u=i.getAxis(s.dim),c=u.model,f=c.getModel("axisPointer",a),h=f.getModel("label"),d=f.get("lineStyle.color");if(!(!h.get("show")||!f.get("show"))){var p=t[l],v=h.get("formatter"),g=u.scale.getLabel({value:p});if(v!=null)g=v(g,t);else if(u.scale.type==="interval"||u.scale.type==="log"){var m=cL(u.scale.getTicks()[0]);g=p.toFixed(m+2)}var x=h.get("color"),S=new Ar({style:dn(h,{text:g,fill:x||d,align:"left",verticalAlign:"top"})}),b=n.add(S),T=S.getBoundingRect(),w=this._api.getDevicePixelRatio(),E=s.rootNode.position.toArray(),M=Sd[o[s.dim]];E[M]+=(s.flipped?-1:1)*h.get("margin"),E[Sd[s.dim]]=u.dataToCoord(t[l]),r.geometry.addSprite(E,[T.width*w,T.height*w],b,s.textAlign,s.textVerticalAlign)}},this),n.getZr().refreshImmediately(),r.material.set("uvScale",n.getCoordsScale()),r.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});var SD=function(){function t(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return t.prototype.getAxis=function(e){return this._axes[e]},t.prototype.getAxes=function(){return Oe(this._dimList,function(e){return this._axes[e]},this)},t.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),hn(this.getAxes(),function(r){return r.scale.type===e})},t.prototype.addAxis=function(e){var r=e.dim;this._axes[r]=e,this._dimList.push(r)},t}();function x_(t){SD.call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}x_.prototype={constructor:x_,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,e,r){return e=e||[],e[0]=this.getAxis("x").dataToCoord(t[0],r),e[2]=this.getAxis("y").dataToCoord(t[1],r),e[1]=this.getAxis("z").dataToCoord(t[2],r),e},pointToData:function(t,e,r){return e=e||[],e[0]=this.getAxis("x").coordToData(t[0],r),e[1]=this.getAxis("y").coordToData(t[2],r),e[2]=this.getAxis("z").coordToData(t[1],r),e}};rL(x_,SD);function Mw(t,e,r){Po.call(this,t,e,r)}Mw.prototype={constructor:Mw,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}};rL(Mw,Po);var Rw=function(){this._pool={},this._allocatedTextures=[]};Rw.prototype={constructor:Rw,get:function(t){var e=Jz(t);this._pool.hasOwnProperty(e)||(this._pool[e]=[]);var r=this._pool[e];if(!r.length){var n=new Sr(t);return this._allocatedTextures.push(n),n}return r.pop()},put:function(t){var e=Jz(t);this._pool.hasOwnProperty(e)||(this._pool[e]=[]);var r=this._pool[e];r.push(t)},clear:function(t){for(var e=0;e<this._allocatedTextures.length;e++)this._allocatedTextures[e].dispose(t);this._pool={},this._allocatedTextures=[]}};var VJ={width:512,height:512,type:ze.UNSIGNED_BYTE,format:ze.RGBA,wrapS:ze.CLAMP_TO_EDGE,wrapT:ze.CLAMP_TO_EDGE,minFilter:ze.LINEAR_MIPMAP_LINEAR,magFilter:ze.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},nM=Object.keys(VJ);function Jz(t){di.defaultsWithPropList(t,VJ,nM),Cye(t);for(var e="",r=0;r<nM.length;r++){var n=nM[r],i=t[n].toString();e+=i}return e}function Cye(t){var e=Eye(t.width,t.height);t.format===ze.DEPTH_COMPONENT&&(t.useMipmap=!1),(!e||!t.useMipmap)&&(t.minFilter==ze.NEAREST_MIPMAP_NEAREST||t.minFilter==ze.NEAREST_MIPMAP_LINEAR?t.minFilter=ze.NEAREST:(t.minFilter==ze.LINEAR_MIPMAP_LINEAR||t.minFilter==ze.LINEAR_MIPMAP_NEAREST)&&(t.minFilter=ze.LINEAR)),e||(t.wrapS=ze.CLAMP_TO_EDGE,t.wrapT=ze.CLAMP_TO_EDGE)}function Eye(t,e){return(t&t-1)===0&&(e&e-1)===0}const Aye=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`;var Ef=["px","nx","py","ny","pz","nz"];ct.import(Aye);function iM(t,e,r){if(r==="alphaMap")return t.material.get("diffuseMap");if(r==="alphaCutoff"){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var n=t.material.get("alphaCutoff");return n||0}return 0}else return r==="uvRepeat"?t.material.get("uvRepeat"):r==="uvOffset"?t.material.get("uvOffset"):e.get(r)}function Qz(t,e){var r=t.material,n=e.material;return r.get("diffuseMap")!==n.get("diffuseMap")||(r.get("alphaCutoff")||0)!==(n.get("alphaCutoff")||0)}var vu=_a.extend(function(){return{softShadow:vu.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new gi,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Rw}},function(){this._gaussianPassH=new Ei({fragment:ct.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new Ei({fragment:ct.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new Ei({fragment:ct.source("clay.sm.debug_depth")})},{render:function(t,e,r,n){r||(r=e.getMainCamera()),this.trigger("beforerender",this,t,e,r),this._renderShadowPass(t,e,r,n),this.trigger("afterrender",this,t,e,r)},renderDebug:function(t,e){t.saveClear();var r=t.viewport,n=0,i=0,a=e||r.width/4,o=a;this.softShadow===vu.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var s in this._textures){var l=this._textures[s];t.setViewport(n,i,a*l.width/l.height,o),this._outputDepthPass.setUniform("depthMap",l),this._outputDepthPass.render(t),n+=a*l.width/l.height}t.setViewport(r),t.restoreClear()},_updateReceivers:function(t,e){if(e.receiveShadow?(this._receivers.push(e),e.material.set("shadowEnabled",1),e.material.set("pcfKernel",this.kernelPCF)):e.material.set("shadowEnabled",0),this.softShadow===vu.VSM)e.material.define("fragment","USE_VSM"),e.material.undefine("fragment","PCF_KERNEL_SIZE");else{e.material.undefine("fragment","USE_VSM");var r=this.kernelPCF;r&&r.length?e.material.define("fragment","PCF_KERNEL_SIZE",r.length/2):e.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,e){var r=this;e.traverse(function(a){a.isRenderable()&&r._updateReceivers(t,a)});for(var n=0;n<e.lights.length;n++){var i=e.lights[n];i.castShadow&&!i.invisible&&this._lightsCastShadow.push(i)}},_renderShadowPass:function(t,e,r,n){for(var i in this._shadowMapNumber)this._shadowMapNumber[i]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var a=t.gl;if(n||e.update(),r&&r.update(),e.updateLights(),this._update(t,e),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,a.enable(a.DEPTH_TEST),a.depthMask(!0),a.disable(a.BLEND),a.clearColor(1,1,1,1);for(var o=[],s=[],l=[],u=[],c=[],f=[],h,d=0;d<this._lightsCastShadow.length;d++){var p=this._lightsCastShadow[d];if(p.type==="DIRECTIONAL_LIGHT"){if(h){console.warn("Only one direectional light supported with shadow cascade");continue}if(p.shadowCascade>4){console.warn("Support at most 4 cascade");continue}p.shadowCascade>1&&(h=p),this.renderDirectionalLightShadow(t,e,r,p,c,u,l)}else p.type==="SPOT_LIGHT"?this.renderSpotLightShadow(t,e,p,s,o):p.type==="POINT_LIGHT"&&this.renderPointLightShadow(t,e,p,f);this._shadowMapNumber[p.type]++}for(var v in this._shadowMapNumber)for(var g=this._shadowMapNumber[v],m=v+"_SHADOWMAP_COUNT",d=0;d<this._receivers.length;d++){var x=this._receivers[d],S=x.material;S.fragmentDefines[m]!==g&&(g>0?S.define("fragment",m,g):S.isDefined("fragment",m)&&S.undefine("fragment",m))}for(var d=0;d<this._receivers.length;d++){var x=this._receivers[d],S=x.material;h?S.define("fragment","SHADOW_CASCADE",h.shadowCascade):S.undefine("fragment","SHADOW_CASCADE")}var b=e.shadowUniforms;function T(R){return R.height}if(l.length>0){var w=l.map(T);if(b.directionalLightShadowMaps={value:l,type:"tv"},b.directionalLightMatrices={value:u,type:"m4v"},b.directionalLightShadowMapSizes={value:w,type:"1fv"},h){var E=c.slice(),M=c.slice();E.pop(),M.shift(),E.reverse(),M.reverse(),u.reverse(),b.shadowCascadeClipsNear={value:E,type:"1fv"},b.shadowCascadeClipsFar={value:M,type:"1fv"}}}if(o.length>0){var A=o.map(T),b=e.shadowUniforms;b.spotLightShadowMaps={value:o,type:"tv"},b.spotLightMatrices={value:s,type:"m4v"},b.spotLightShadowMapSizes={value:A,type:"1fv"}}f.length>0&&(b.pointLightShadowMaps={value:f,type:"tv"})},renderDirectionalLightShadow:function(){var t=new o4,e=new gt,r=new ga,n=new gt,i=new gt,a=new gt,o=new gt;return function(s,l,u,c,f,h,d){var p=this._getDepthMaterial(c),v={getMaterial:function(te){return te.shadowDepthMaterial||p},isMaterialChanged:Qz,getUniform:iM,ifRender:function(te){return te.castShadow},sortCompare:Js.opaqueSortCompare};if(!l.viewBoundingBoxLastFrame.isFinite()){var g=l.getBoundingBox();l.viewBoundingBoxLastFrame.copy(g).applyTransform(u.viewMatrix)}var m=Math.min(-l.viewBoundingBoxLastFrame.min.z,u.far),x=Math.max(-l.viewBoundingBoxLastFrame.max.z,u.near),S=this._getDirectionalLightCamera(c,l,u),b=a.array;o.copy(S.projectionMatrix),Ve.invert(i.array,S.worldTransform.array),Ve.multiply(i.array,i.array,u.worldTransform.array),Ve.multiply(b,o.array,i.array);for(var T=[],w=u instanceof $i,E=(u.near+u.far)/(u.near-u.far),M=2*u.near*u.far/(u.near-u.far),A=0;A<=c.shadowCascade;A++){var R=x*Math.pow(m/x,A/c.shadowCascade),L=x+(m-x)*A/c.shadowCascade,I=R*c.cascadeSplitLogFactor+L*(1-c.cascadeSplitLogFactor);T.push(I),f.push(-(-I*E+M)/-I)}var N=this._getTexture(c,c.shadowCascade);d.push(N);var k=s.viewport,z=s.gl;this._frameBuffer.attach(N),this._frameBuffer.bind(s),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT);for(var A=0;A<c.shadowCascade;A++){var B=T[A],V=T[A+1];w?Ve.perspective(e.array,u.fov/180*Math.PI,u.aspect,B,V):Ve.ortho(e.array,u.left,u.right,u.bottom,u.top,B,V),t.setFromProjection(e),t.getTransformedBoundingBox(r,i),r.applyProjection(o);var F=r.min.array,$=r.max.array;F[0]=Math.max(F[0],-1),F[1]=Math.max(F[1],-1),$[0]=Math.min($[0],1),$[1]=Math.min($[1],1),n.ortho(F[0],$[0],F[1],$[1],1,-1),S.projectionMatrix.multiplyLeft(n);var W=c.shadowResolution||512;s.setViewport((c.shadowCascade-A-1)*W,0,W,W,1);var H=l.updateRenderList(S);s.renderPass(H.opaque,S,v),this.softShadow===vu.VSM&&this._gaussianFilter(s,N,N.width);var X=new gt;X.copy(S.viewMatrix).multiplyLeft(S.projectionMatrix),h.push(X.array),S.projectionMatrix.copy(o)}this._frameBuffer.unbind(s),s.setViewport(k)}}(),renderSpotLightShadow:function(t,e,r,n,i){var a=this._getTexture(r),o=this._getSpotLightCamera(r),s=t.gl;this._frameBuffer.attach(a),this._frameBuffer.bind(t),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var l=this._getDepthMaterial(r),u={getMaterial:function(h){return h.shadowDepthMaterial||l},isMaterialChanged:Qz,getUniform:iM,ifRender:function(h){return h.castShadow},sortCompare:Js.opaqueSortCompare},c=e.updateRenderList(o);t.renderPass(c.opaque,o,u),this._frameBuffer.unbind(t),this.softShadow===vu.VSM&&this._gaussianFilter(t,a,a.width);var f=new gt;f.copy(o.worldTransform).invert().multiplyLeft(o.projectionMatrix),i.push(a),n.push(f.array)},renderPointLightShadow:function(t,e,r,n){var i=this._getTexture(r),a=t.gl;n.push(i);var o=this._getDepthMaterial(r),s={getMaterial:function(x){return x.shadowDepthMaterial||o},getUniform:iM,sortCompare:Js.opaqueSortCompare},l={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},u=new ga,c=r.getWorldPosition().array,f=new ga,h=r.range;f.min.setArray(c),f.max.setArray(c);var d=new Ne(h,h,h);f.max.add(d),f.min.sub(d);var p={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};e.traverse(function(x){if(x.isRenderable()&&x.castShadow){var S=x.geometry;if(!S.boundingBox){for(var b=0;b<Ef.length;b++)l[Ef[b]].push(x);return}if(u.transformFrom(S.boundingBox,x.worldTransform),!u.intersectBoundingBox(f))return;u.updateVertices();for(var b=0;b<Ef.length;b++)p[Ef[b]]=!1;for(var b=0;b<8;b++){var T=u.vertices[b],w=T[0]-c[0],E=T[1]-c[1],M=T[2]-c[2],A=Math.abs(w),R=Math.abs(E),L=Math.abs(M);A>R?A>L?p[w>0?"px":"nx"]=!0:p[M>0?"pz":"nz"]=!0:R>L?p[E>0?"py":"ny"]=!0:p[M>0?"pz":"nz"]=!0}for(var b=0;b<Ef.length;b++)p[Ef[b]]&&l[Ef[b]].push(x)}});for(var v=0;v<6;v++){var g=Ef[v],m=this._getPointLightCamera(r,g);this._frameBuffer.attach(i,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+v),this._frameBuffer.bind(t),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),t.renderPass(l[g],m,s)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var e=this._lightMaterials[t.__uid__],r=t.type==="POINT_LIGHT";if(!e){var n=r?"clay.sm.distance.":"clay.sm.depth.";e=new Zs({precision:this.precision,shader:new ct(ct.source(n+"vertex"),ct.source(n+"fragment"))}),this._lightMaterials[t.__uid__]=e}return t.shadowSlopeScale!=null&&e.setUniform("slopeScale",t.shadowSlopeScale),t.shadowBias!=null&&e.setUniform("bias",t.shadowBias),this.softShadow===vu.VSM?e.define("fragment","USE_VSM"):e.undefine("fragment","USE_VSM"),r&&(e.set("lightPosition",t.getWorldPosition().array),e.set("range",t.range)),e},_gaussianFilter:function(t,e,r){var n={width:r,height:r,type:at.FLOAT},i=this._texturePool.get(n);this._frameBuffer.attach(i),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",e),this._gaussianPassH.setUniform("textureWidth",r),this._gaussianPassH.render(t),this._frameBuffer.attach(e),this._gaussianPassV.setUniform("texture",i),this._gaussianPassV.setUniform("textureHeight",r),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(i)},_getTexture:function(t,e){var r=t.__uid__,n=this._textures[r],i=t.shadowResolution||512;return e=e||1,n||(t.type==="POINT_LIGHT"?n=new Mp:n=new Sr,n.width=i*e,n.height=i,this.softShadow===vu.VSM?(n.type=at.FLOAT,n.anisotropic=4):(n.minFilter=ze.NEAREST,n.magFilter=ze.NEAREST,n.useMipmap=!1),this._textures[r]=n),n},_getPointLightCamera:function(t,e){this._lightCameras.point||(this._lightCameras.point={px:new $i,nx:new $i,py:new $i,ny:new $i,pz:new $i,nz:new $i});var r=this._lightCameras.point[e];switch(r.far=t.range,r.fov=90,r.position.set(0,0,0),e){case"px":r.lookAt(Ne.POSITIVE_X,Ne.NEGATIVE_Y);break;case"nx":r.lookAt(Ne.NEGATIVE_X,Ne.NEGATIVE_Y);break;case"py":r.lookAt(Ne.POSITIVE_Y,Ne.POSITIVE_Z);break;case"ny":r.lookAt(Ne.NEGATIVE_Y,Ne.NEGATIVE_Z);break;case"pz":r.lookAt(Ne.POSITIVE_Z,Ne.NEGATIVE_Y);break;case"nz":r.lookAt(Ne.NEGATIVE_Z,Ne.NEGATIVE_Y);break}return t.getWorldPosition(r.position),r.update(),r},_getDirectionalLightCamera:function(){var t=new gt,e=new ga,r=new ga;return function(n,i,a){this._lightCameras.directional||(this._lightCameras.directional=new dm);var o=this._lightCameras.directional;e.copy(i.viewBoundingBoxLastFrame),e.intersection(a.frustum.boundingBox),o.position.copy(e.min).add(e.max).scale(.5).transformMat4(a.worldTransform),o.rotation.copy(n.rotation),o.scale.copy(n.scale),o.updateWorldTransform(),gt.invert(t,o.worldTransform),gt.multiply(t,t,a.worldTransform),r.copy(e).applyTransform(t);var s=r.min.array,l=r.max.array;return o.position.set((s[0]+l[0])/2,(s[1]+l[1])/2,l[2]).transformMat4(o.worldTransform),o.near=0,o.far=-s[2]+l[2],isNaN(this.lightFrustumBias)?o.far*=4:o.far+=this.lightFrustumBias,o.left=s[0],o.right=l[0],o.top=l[1],o.bottom=s[1],o.update(!0),o}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new $i);var e=this._lightCameras.spot;return e.fov=t.penumbraAngle*2,e.far=t.range,e.worldTransform.copy(t.worldTransform),e.updateProjectionMatrix(),Ve.invert(e.viewMatrix.array,e.worldTransform.array),e},dispose:function(t){var e=t.gl||t;this._frameBuffer&&this._frameBuffer.dispose(e);for(var r in this._textures)this._textures[r].dispose(e);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var n=0;n<this._receivers.length;n++){var i=this._receivers[n];if(i.material){var a=i.material;a.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),a.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),a.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),a.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});vu.VSM=1;vu.PCF=2;var S_=_a.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(t,e){var r=this.outputs[t],n=r.parameters,i=r._parametersCopy;if(i||(i=r._parametersCopy={}),n)for(var a in n)a!=="width"&&a!=="height"&&(i[a]=n[a]);var o,s;return n.width instanceof Function?o=n.width.call(this,e):o=n.width,n.height instanceof Function?s=n.height.call(this,e):s=n.height,(i.width!==o||i.height!==s)&&this._outputTextures[t]&&this._outputTextures[t].dispose(e.gl),i.width=o,i.height=s,i},setParameter:function(t,e){},getParameter:function(t){},setParameters:function(t){for(var e in t)this.setParameter(e,t[e])},render:function(){},getOutput:function(t,e){if(e==null)return e=t,this._outputTextures[e];var r=this.outputs[e];if(r)return this._rendered?r.outputLastFrame?this._prevOutputTextures[e]:this._outputTextures[e]:this._rendering?(this._prevOutputTextures[e]||(this._prevOutputTextures[e]=this._compositor.allocateTexture(r.parameters||{})),this._prevOutputTextures[e]):(this.render(t),this._outputTextures[e])},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,e,r){this.inputLinks[t]={node:e,pin:r},e.outputLinks[r]||(e.outputLinks[r]=[]),e.outputLinks[r].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){this._rendering=!0;for(var e in this.inputLinks){var r=this.inputLinks[e];r.node.updateReference(r.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){this._rendered=!1;for(var t in this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),eU=_a.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){typeof t=="string"&&(t=this.getNodeByName(t));var e=this.nodes.indexOf(t);e>=0&&(this.nodes.splice(e,1),this._dirty=!0)},getNodeByName:function(t){for(var e=0;e<this.nodes.length;e++)if(this.nodes[e].name===t)return this.nodes[e]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];if(e.inputs){for(var r in e.inputs)if(e.inputs[r]){if(e.pass&&!e.pass.material.isUniformEnabled(r)){console.warn("Pin "+e.name+"."+r+" not used.");continue}var n=e.inputs[r],i=this.findPin(n);i?e.link(r,i.node,i.pin):console.warn(typeof n=="string"?"Node "+n+" not exist":"Pin of "+n.node+"."+n.pin+" not exist")}}}},findPin:function(t){var e;if((typeof t=="string"||t instanceof S_)&&(t={node:t}),typeof t.node=="string")for(var r=0;r<this.nodes.length;r++){var n=this.nodes[r];n.name===t.node&&(e=n)}else e=t.node;if(e){var i=t.pin;if(i||e.outputs&&(i=Object.keys(e.outputs)[0]),e.outputs[i])return{node:e,pin:i}}}}),Mye=eU.extend(function(){return{_outputs:[],_texturePool:new Rw,_frameBuffer:new gi({depthBuffer:!1})}},{addNode:function(t){eU.prototype.addNode.call(this,t),t._compositor=this},render:function(t,e){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var r=0;r<this.nodes.length;r++)this.nodes[r].outputs||this._outputs.push(this.nodes[r])}for(var r=0;r<this.nodes.length;r++)this.nodes[r].beforeFrame();for(var r=0;r<this._outputs.length;r++)this._outputs[r].updateReference();for(var r=0;r<this._outputs.length;r++)this._outputs[r].render(t,e);for(var r=0;r<this.nodes.length;r++)this.nodes[r].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),Rye=S_.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new gi},{render:function(t){this._rendering=!0;var e=t.gl;this.trigger("beforerender");var r;if(!this.outputs)r=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var n=this.frameBuffer;for(var i in this.outputs){var a=this.updateParameter(i,t),o=this.outputs[i],s=this._compositor.allocateTexture(a);this._outputTextures[i]=s;var l=o.attachment||e.COLOR_ATTACHMENT0;typeof l=="string"&&(l=e[l]),n.attach(s,l)}n.bind(t);var u=t.getGLExtension("EXT_draw_buffers");if(u){var c=[];for(var l in this.outputs)l=parseInt(l),l>=e.COLOR_ATTACHMENT0&&l<=e.COLOR_ATTACHMENT0+8&&c.push(l);u.drawBuffersEXT(c)}t.saveClear(),t.clearBit=ze.DEPTH_BUFFER_BIT|ze.COLOR_BUFFER_BIT,r=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),n.unbind(t)}this.trigger("afterrender",r),this._rendering=!1,this._rendered=!0}}),Pye=S_.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(t,e){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),Lye=S_.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new Ei({fragment:this.shader});this.pass=t},{render:function(t,e){this.trigger("beforerender",t),this._rendering=!0;var r=t.gl;for(var n in this.inputLinks){var i=this.inputLinks[n],a=i.node.getOutput(t,i.pin);this.pass.setUniform(n,a)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,e);else{this.pass.outputs={};var o={};for(var s in this.outputs){var l=this.updateParameter(s,t);isNaN(l.width)&&this.updateParameter(s,t);var u=this.outputs[s],c=this._compositor.allocateTexture(l);this._outputTextures[s]=c;var f=u.attachment||r.COLOR_ATTACHMENT0;typeof f=="string"&&(f=r[f]),o[f]=c}this._compositor.getFrameBuffer().bind(t);for(var f in o)this._compositor.getFrameBuffer().attach(o[f],f);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}for(var n in this.inputLinks){var i=this.inputLinks[n];i.node.removeReference(i.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,e){var r=this.outputs[t],n=r.parameters,i=r._parametersCopy;if(i||(i=r._parametersCopy={}),n)for(var a in n)a!=="width"&&a!=="height"&&(i[a]=n[a]);var o,s;return typeof n.width=="function"?o=n.width.call(this,e):o=n.width,typeof n.height=="function"?s=n.height.call(this,e):s=n.height,o=Math.ceil(o),s=Math.ceil(s),(i.width!==o||i.height!==s)&&this._outputTextures[t]&&this._outputTextures[t].dispose(e),i.width=o,i.height=s,i},setParameter:function(t,e){this.pass.setUniform(t,e)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var e in t)this.setParameter(e,t[e])},define:function(t,e){this.pass.material.define("fragment",t,e)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){S_.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const Dye=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,HJ=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,Iye=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,GJ=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,Nye=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,WJ=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,$J=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,jJ=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,XJ=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,KJ=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Oye=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,YJ=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,qJ=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function kye(t){t.import(Dye),t.import(HJ),t.import(Iye),t.import(GJ),t.import(Nye),t.import(WJ),t.import($J),t.import(jJ),t.import(XJ),t.import(KJ),t.import(Oye),t.import(YJ),t.import(qJ)}kye(ct);var Fye=/^#source\((.*?)\)/;function Bye(t,e){var r=new Mye;e=e||{};var n={textures:{},parameters:{}},i=function(s,l){for(var u=0;u<t.nodes.length;u++){var c=t.nodes[u],f=zye(c,n,e);f&&r.addNode(f)}};for(var a in t.parameters){var o=t.parameters[a];n.parameters[a]=bD(o)}return Hye(t,n,e,function(s){n.textures=s,i()}),r}function zye(t,e,r){var n=t.type||"filter",i,a,o;if(n==="filter"){var s=t.shader.trim(),l=Fye.exec(s);if(l?i=ct.source(l[1].trim()):s.charAt(0)==="#"&&(i=e.shaders[s.substr(1)]),i||(i=s),!i)return}if(t.inputs){a={};for(var u in t.inputs)typeof t.inputs[u]=="string"?a[u]=t.inputs[u]:a[u]={node:t.inputs[u].node,pin:t.inputs[u].pin}}if(t.outputs){o={};for(var u in t.outputs){var c=t.outputs[u];o[u]={},c.attachment!=null&&(o[u].attachment=c.attachment),c.keepLastFrame!=null&&(o[u].keepLastFrame=c.keepLastFrame),c.outputLastFrame!=null&&(o[u].outputLastFrame=c.outputLastFrame),c.parameters&&(o[u].parameters=bD(c.parameters))}}var f;if(n==="scene"?f=new Rye({name:t.name,scene:r.scene,camera:r.camera,outputs:o}):n==="texture"?f=new Pye({name:t.name,outputs:o}):f=new Lye({name:t.name,shader:i,inputs:a,outputs:o}),f){if(t.parameters)for(var u in t.parameters){var h=t.parameters[u];typeof h=="string"?(h=h.trim(),h.charAt(0)==="#"?h=e.textures[h.substr(1)]:f.on("beforerender",Gye(u,ZJ(h)))):typeof h=="function"&&f.on("beforerender",h),f.setParameter(u,h)}if(t.defines&&f.pass)for(var u in t.defines){var h=t.defines[u];f.pass.material.define("fragment",u,h)}}return f}function Uye(t,e){return t}function Vye(t,e){return e}function bD(t){var e={};if(!t)return e;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(n){var i=t[n];i!=null&&(typeof i=="string"&&(i=at[i]),e[n]=i)});var r=t.scale||1;return["width","height"].forEach(function(n){if(t[n]!=null){var i=t[n];typeof i=="string"?(i=i.trim(),e[n]=Wye(n,ZJ(i),r)):e[n]=i}}),e.width||(e.width=Uye),e.height||(e.height=Vye),t.useMipmap!=null&&(e.useMipmap=t.useMipmap),e}function Hye(t,e,r,n){if(!t.textures){n({});return}var i={},a=0,o=!1,s=r.textureRootPath;di.each(t.textures,function(l,u){var c,f=l.path,h=bD(l.parameters);if(Array.isArray(f)&&f.length===6)s&&(f=f.map(function(d){return di.relative2absolute(d,s)})),c=new Mp(h);else if(typeof f=="string")s&&(f=di.relative2absolute(f,s)),c=new Sr(h);else return;c.load(f),a++,c.once("success",function(){i[u]=c,a--,a===0&&(n(i),o=!0)})}),a===0&&!o&&n(i)}function Gye(t,e){return function(r){var n=r.getDevicePixelRatio(),i=r.getWidth(),a=r.getHeight(),o=e(i,a,n);this.setParameter(t,o)}}function Wye(t,e,r){return r=r||1,function(n){var i=n.getDevicePixelRatio(),a=n.getWidth()*r,o=n.getHeight()*r;return e(a,o,i)}}function ZJ(t){var e=/^expr\((.*)\)$/.exec(t);if(e)try{var r=new Function("width","height","dpr","return "+e[1]);return r(1,1),r}catch(n){throw new Error("Invalid expression.")}}function pm(t,e){for(var r=0,n=1/e,i=t;i>0;)r=r+n*(i%e),i=Math.floor(i/e),n=n/e;return r}const $ye=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;ct.import($ye);function JJ(t){for(var e=new Uint8Array(t*t*4),r=0,n=new Ne,i=0;i<t;i++)for(var a=0;a<t;a++)n.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),e[r++]=(n.x*.5+.5)*255,e[r++]=(n.y*.5+.5)*255,e[r++]=0,e[r++]=255;return e}function tU(t){return new Sr({pixels:JJ(t),wrapS:at.REPEAT,wrapT:at.REPEAT,width:t,height:t})}function jye(t,e,r){var n=new Float32Array(t*3);e=e||0;for(var i=0;i<t;i++){var a=pm(i+e,2)*(r?1:2)*Math.PI,o=pm(i+e,3)*Math.PI,s=Math.random(),l=Math.cos(a)*Math.sin(o)*s,u=Math.cos(o)*s,c=Math.sin(a)*Math.sin(o)*s;n[i*3]=l,n[i*3+1]=u,n[i*3+2]=c}return n}function Kc(t){t=t||{},this._ssaoPass=new Ei({fragment:ct.source("ecgl.ssao.estimate")}),this._blurPass=new Ei({fragment:ct.source("ecgl.ssao.blur")}),this._framebuffer=new gi({depthBuffer:!1}),this._ssaoTexture=new Sr,this._blurTexture=new Sr,this._blurTexture2=new Sr,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),t.radius!=null&&this.setParameter("radius",t.radius),t.power!=null&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}Kc.prototype.setDepthTexture=function(t){this._depthTex=t};Kc.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)};Kc.prototype.update=function(t,e,r){var n=t.getWidth(),i=t.getHeight(),a=this._ssaoPass,o=this._blurPass;a.setUniform("kernel",this._kernels[r%this._kernels.length]),a.setUniform("depthTex",this._depthTex),this._normalTex!=null&&a.setUniform("normalTex",this._normalTex),a.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var s=new gt;gt.transpose(s,e.worldTransform),a.setUniform("projection",e.projectionMatrix.array),a.setUniform("projectionInv",e.invProjectionMatrix.array),a.setUniform("viewInverseTranspose",s.array);var l=this._ssaoTexture,u=this._blurTexture,c=this._blurTexture2;l.width=n/2,l.height=i/2,u.width=n,u.height=i,c.width=n,c.height=i,this._framebuffer.attach(l),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),a.render(t),o.setUniform("textureSize",[n/2,i/2]),o.setUniform("projection",e.projectionMatrix.array),this._framebuffer.attach(u),o.setUniform("direction",0),o.setUniform("ssaoTexture",l),o.render(t),this._framebuffer.attach(c),o.setUniform("textureSize",[n,i]),o.setUniform("direction",1),o.setUniform("ssaoTexture",u),o.render(t),this._framebuffer.unbind(t);var f=t.clearColor;t.gl.clearColor(f[0],f[1],f[2],f[3])};Kc.prototype.getTargetTexture=function(){return this._blurTexture2};Kc.prototype.setParameter=function(t,e){t==="noiseTexSize"?this.setNoiseSize(e):t==="kernelSize"?this.setKernelSize(e):t==="intensity"?this._ssaoPass.material.set("intensity",e):this._ssaoPass.setUniform(t,e)};Kc.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var e=0;e<30;e++)this._kernels[e]=jye(t,e*t,!!this._normalTex)};Kc.prototype.setNoiseSize=function(t){var e=this._ssaoPass.getUniform("noiseTex");e?(e.data=JJ(t),e.width=e.height=t,e.dirty()):(e=tU(t),this._ssaoPass.setUniform("noiseTex",tU(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])};Kc.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};const Xye=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;ct.import(Xye);function Yc(t){t=t||{},this._ssrPass=new Ei({fragment:ct.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new Ei({fragment:ct.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new Ei({fragment:ct.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new Ei({fragment:ct.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Sr({type:at.HALF_FLOAT}),this._texture2=new Sr({type:at.HALF_FLOAT}),this._texture3=new Sr({type:at.HALF_FLOAT}),this._prevTexture=new Sr({type:at.HALF_FLOAT}),this._currentTexture=new Sr({type:at.HALF_FLOAT}),this._frameBuffer=new gi({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Yc.prototype.setAmbientCubemap=function(t,e){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",e);var r=t&&e;this._ssrPass.material[r?"enableTexture":"disableTexture"]("specularCubemap")};Yc.prototype.update=function(t,e,r,n){var i=t.getWidth(),a=t.getHeight(),o=this._ssrTexture,s=this._texture2,l=this._texture3;o.width=this._prevTexture.width=this._currentTexture.width=i/this._downScale,o.height=this._prevTexture.height=this._currentTexture.height=a/this._downScale,s.width=l.width=i,s.height=l.height=a;var u=this._frameBuffer,c=this._ssrPass,f=this._blurPass1,h=this._blurPass2,d=this._blendPass,p=new gt,v=new gt;gt.transpose(p,e.worldTransform),gt.transpose(v,e.viewMatrix),c.setUniform("sourceTexture",r),c.setUniform("projection",e.projectionMatrix.array),c.setUniform("projectionInv",e.invProjectionMatrix.array),c.setUniform("toViewSpace",p.array),c.setUniform("toWorldSpace",v.array),c.setUniform("nearZ",e.near);var g=n/this._totalSamples*this._samplePerFrame;if(c.setUniform("jitterOffset",g),c.setUniform("sampleOffset",n*this._samplePerFrame),f.setUniform("textureSize",[o.width,o.height]),h.setUniform("textureSize",[i,a]),h.setUniform("sourceTexture",r),f.setUniform("projection",e.projectionMatrix.array),h.setUniform("projection",e.projectionMatrix.array),u.attach(o),u.bind(t),c.render(t),this._physicallyCorrect&&(u.attach(this._currentTexture),d.setUniform("texture1",this._prevTexture),d.setUniform("texture2",o),d.material.set({weight1:n>=1?.95:0,weight2:n>=1?.05:1}),d.render(t)),u.attach(s),f.setUniform("texture",this._physicallyCorrect?this._currentTexture:o),f.render(t),u.attach(l),h.setUniform("texture",s),h.render(t),u.unbind(t),this._physicallyCorrect){var m=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=m}};Yc.prototype.getTargetTexture=function(){return this._texture3};Yc.prototype.setParameter=function(t,e){t==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",e):this._ssrPass.setUniform(t,e)};Yc.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=Pu.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t};Yc.prototype.setSSAOTexture=function(t){var e=this._blurPass2;t?(e.material.enableTexture("ssaoTex"),e.material.set("ssaoTex",t)):e.material.disableTexture("ssaoTex")};Yc.prototype.isFinished=function(t){return this._physicallyCorrect?t>this._totalSamples/this._samplePerFrame:!0};Yc.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};const rU=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],Kye=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;ct.import(Kye);function aM(t,e,r,n,i){var a=t.gl;e.setUniform(a,"1i",r,i),a.activeTexture(a.TEXTURE0+i),n.isRenderable()?n.bind(t):n.unbind(t)}function Yye(t,e,r,n,i){var a,o,s,l,u=t.gl;return function(c,f,h){if(!(l&&l.material===c.material)){var d=c.material,p=c.__program,v=d.get("roughness");v==null&&(v=1);var g=d.get("normalMap")||e,m=d.get("roughnessMap"),x=d.get("bumpMap"),S=d.get("uvRepeat"),b=d.get("uvOffset"),T=d.get("detailUvRepeat"),w=d.get("detailUvOffset"),E=!!x&&d.isTextureEnabled("bumpMap"),M=!!m&&d.isTextureEnabled("roughnessMap"),A=d.isDefined("fragment","DOUBLE_SIDED");x=x||r,m=m||n,h!==f?(f.set("normalMap",g),f.set("bumpMap",x),f.set("roughnessMap",m),f.set("useBumpMap",E),f.set("useRoughnessMap",M),f.set("doubleSide",A),S!=null&&f.set("uvRepeat",S),b!=null&&f.set("uvOffset",b),T!=null&&f.set("detailUvRepeat",T),w!=null&&f.set("detailUvOffset",w),f.set("roughness",v)):(p.setUniform(u,"1f","roughness",v),a!==g&&aM(t,p,"normalMap",g,0),o!==x&&x&&aM(t,p,"bumpMap",x,1),s!==m&&m&&aM(t,p,"roughnessMap",m,2),S!=null&&p.setUniform(u,"2f","uvRepeat",S),b!=null&&p.setUniform(u,"2f","uvOffset",b),T!=null&&p.setUniform(u,"2f","detailUvRepeat",T),w!=null&&p.setUniform(u,"2f","detailUvOffset",w),p.setUniform(u,"1i","useBumpMap",+E),p.setUniform(u,"1i","useRoughnessMap",+M),p.setUniform(u,"1i","doubleSide",+A)),a=g,o=x,s=m,l=c}}}function f0(t){this._depthTex=new Sr({format:at.DEPTH_COMPONENT,type:at.UNSIGNED_INT}),this._normalTex=new Sr({type:at.HALF_FLOAT}),this._framebuffer=new gi,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,gi.DEPTH_ATTACHMENT),this._normalMaterial=new Zs({shader:new ct(ct.source("ecgl.normal.vertex"),ct.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Ru.createBlank("#000"),this._defaultBumpMap=Ru.createBlank("#000"),this._defaultRoughessMap=Ru.createBlank("#000"),this._debugPass=new Ei({fragment:ct.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}f0.prototype.getDepthTexture=function(){return this._depthTex};f0.prototype.getNormalTexture=function(){return this._normalTex};f0.prototype.update=function(t,e,r){var n=t.getWidth(),i=t.getHeight(),a=this._depthTex,o=this._normalTex,s=this._normalMaterial;a.width=n,a.height=i,o.width=n,o.height=i;var l=e.getRenderList(r).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(l,r,{getMaterial:function(){return s},ifRender:function(u){return u.renderNormal},beforeRender:Yye(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)};f0.prototype.renderDebug=function(t){this._debugPass.render(t)};f0.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};function b2(t){t=t||{},this._edgePass=new Ei({fragment:ct.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new Sr({type:at.HALF_FLOAT}),this._frameBuffer=new gi,this._frameBuffer.attach(this._targetTexture)}b2.prototype.update=function(t,e,r,n){var i=t.getWidth(),a=t.getHeight(),o=this._targetTexture;o.width=i,o.height=a;var s=this._frameBuffer;s.bind(t),this._edgePass.setUniform("projectionInv",e.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[i,a]),this._edgePass.setUniform("texture",r),this._edgePass.render(t),s.unbind(t)};b2.prototype.getTargetTexture=function(){return this._targetTexture};b2.prototype.setParameter=function(t,e){this._edgePass.setUniform(t,e)};b2.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};const qye={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},Zye=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,Jye=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;ct.import(HJ);ct.import(GJ);ct.import(WJ);ct.import($J);ct.import(jJ);ct.import(XJ);ct.import(KJ);ct.import(YJ);ct.import(qJ);ct.import(Zye);ct.import(Jye);function QJ(t,e){return{color:{parameters:{width:t,height:e}}}}var wD=["composite","FXAA"];function Hr(){this._width,this._height,this._dpr,this._sourceTexture=new Sr({type:at.HALF_FLOAT}),this._depthTexture=new Sr({format:at.DEPTH_COMPONENT,type:at.UNSIGNED_INT}),this._framebuffer=new gi,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,gi.DEPTH_ATTACHMENT),this._normalPass=new f0,this._compositor=Bye(qye);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var e=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=e,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(n){return this._compositor.getNodeByName(n)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=wD.map(function(n){return this._compositor.getNodeByName(n)},this);var r={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new Kc(r),this._ssrPass=new Yc(r),this._edgePass=new b2(r)}Hr.prototype.resize=function(n,i,r){r=r||1;var n=n*r,i=i*r,a=this._sourceTexture,o=this._depthTexture;a.width=n,a.height=i,o.width=n,o.height=i;var s={getWidth:function(){return n},getHeight:function(){return i},getDevicePixelRatio:function(){return r}};function l(u,c){if(typeof u[c]=="function"){var f=u[c].__original||u[c];u[c]=function(h){return f.call(this,s)},u[c].__original=f}}this._compositor.nodes.forEach(function(u){for(var c in u.outputs){var f=u.outputs[c].parameters;f&&(l(f,"width"),l(f,"height"))}for(var h in u.parameters)l(u.parameters,h)}),this._width=n,this._height=i,this._dpr=r};Hr.prototype.getWidth=function(){return this._width};Hr.prototype.getHeight=function(){return this._height};Hr.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR};Hr.prototype._getPrevNode=function(t){for(var e=wD.indexOf(t.name)-1,r=this._finalNodesChain[e];r&&!this._compositor.getNodeByName(r.name);)e-=1,r=this._finalNodesChain[e];return r};Hr.prototype._getNextNode=function(t){for(var e=wD.indexOf(t.name)+1,r=this._finalNodesChain[e];r&&!this._compositor.getNodeByName(r.name);)e+=1,r=this._finalNodesChain[e];return r};Hr.prototype._addChainNode=function(t){var e=this._getPrevNode(t),r=this._getNextNode(t);e&&(t.inputs.texture=e.name,r?(t.outputs=QJ(this.getWidth.bind(this),this.getHeight.bind(this)),r.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))};Hr.prototype._removeChainNode=function(t){var e=this._getPrevNode(t),r=this._getNextNode(t);e&&(r?(e.outputs=QJ(this.getWidth.bind(this),this.getHeight.bind(this)),r.inputs.texture=e.name):e.outputs=null,this._compositor.removeNode(t))};Hr.prototype.updateNormal=function(t,e,r,n){this._ifRenderNormalPass()&&this._normalPass.update(t,e,r)};Hr.prototype.updateSSAO=function(t,e,r,n){this._ssaoPass.update(t,r,n)};Hr.prototype.enableSSAO=function(){this._enableSSAO=!0};Hr.prototype.disableSSAO=function(){this._enableSSAO=!1};Hr.prototype.enableSSR=function(){this._enableSSR=!0};Hr.prototype.disableSSR=function(){this._enableSSR=!1};Hr.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()};Hr.prototype.getSourceFrameBuffer=function(){return this._framebuffer};Hr.prototype.getSourceTexture=function(){return this._sourceTexture};Hr.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)};Hr.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)};Hr.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()};Hr.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()};Hr.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()};Hr.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()};Hr.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0};Hr.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1};Hr.prototype.enableEdge=function(){this._enableEdge=!0};Hr.prototype.disableEdge=function(){this._enableEdge=!1};Hr.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)};Hr.prototype.setSSAOParameter=function(t,e){switch(t){case"quality":var r={low:6,medium:12,high:32,ultra:62}[e]||12;this._ssaoPass.setParameter("kernelSize",r);break;case"radius":this._ssaoPass.setParameter(t,e),this._ssaoPass.setParameter("bias",e/200);break;case"intensity":this._ssaoPass.setParameter(t,e);break}};Hr.prototype.setDOFParameter=function(t,e){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,e);break;case"blurRadius":for(var r=0;r<this._dofBlurNodes.length;r++)this._dofBlurNodes[r].setParameter("blurRadius",e);break;case"quality":var n={low:4,medium:8,high:16,ultra:32}[e]||8;this._dofBlurKernelSize=n;for(var r=0;r<this._dofBlurNodes.length;r++)this._dofBlurNodes[r].pass.material.define("POISSON_KERNEL_SIZE",n);this._dofBlurKernel=new Float32Array(n*2);break}};Hr.prototype.setSSRParameter=function(t,e){if(e!=null)switch(t){case"quality":var r={low:10,medium:15,high:30,ultra:80}[e]||20,n={low:32,medium:16,high:8,ultra:4}[e]||16;this._ssrPass.setParameter("maxIteration",r),this._ssrPass.setParameter("pixelStride",n);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-e,1),0));break;case"physical":this.setPhysicallyCorrectSSR(e);break;default:console.warn("Unkown SSR parameter "+t)}};Hr.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)};Hr.prototype.setEdgeColor=function(t){var e=J.parseColor(t);this._edgePass.setParameter("edgeColor",e)};Hr.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))};Hr.prototype.setColorLookupTexture=function(t,e){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",e,{minFilter:J.Texture.NEAREST,magFilter:J.Texture.NEAREST,flipY:!1})};Hr.prototype.setColorCorrection=function(t,e){this._compositeNode.setParameter(t,e)};Hr.prototype.isSSREnabled=function(){return this._enableSSR};Hr.prototype.composite=function(t,e,r,n,i){var a=this._sourceTexture,o=a;this._enableEdge&&(this._edgePass.update(t,r,a,i),a=o=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,r,a,i),o=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=o,this._cocNode.setParameter("depth",this._depthTexture);for(var s=this._dofBlurKernel,l=this._dofBlurKernelSize,u=Math.floor(rU.length/2/l),c=i%u,f=0;f<l*2;f++)s[f]=rU[f+c*l*2];for(var f=0;f<this._dofBlurNodes.length;f++)this._dofBlurNodes[f].setParameter("percent",i/30),this._dofBlurNodes[f].setParameter("poissonKernel",s);this._cocNode.setParameter("zNear",r.near),this._cocNode.setParameter("zFar",r.far),this._compositor.render(t,n)};Hr.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};function iR(t){for(var e=[],r=0;r<30;r++)e.push([pm(r,2),pm(r,3)]);this._haltonSequence=e,this._frame=0,this._sourceTex=new Sr,this._sourceFb=new gi,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Sr,this._outputTex=new Sr;var n=this._blendPass=new Ei({fragment:ct.source("clay.compositor.blend")});n.material.disableTexturesAll(),n.material.enableTexture(["texture1","texture2"]),this._blendFb=new gi({depthBuffer:!1}),this._outputPass=new Ei({fragment:ct.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(i){i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}}iR.prototype={constructor:iR,jitterProjection:function(t,e){var r=t.viewport,n=r.devicePixelRatio||t.getDevicePixelRatio(),i=r.width*n,a=r.height*n,o=this._haltonSequence[this._frame%this._haltonSequence.length],s=new gt;s.array[12]=(o[0]*2-1)/i,s.array[13]=(o[1]*2-1)/a,gt.mul(e.projectionMatrix,s,e.projectionMatrix),gt.invert(e.invProjectionMatrix,e.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,e){this._prevFrameTex.width=t,this._prevFrameTex.height=e,this._outputTex.width=t,this._outputTex.height=e,this._sourceTex.width=t,this._sourceTex.height=e,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,e,r){var n=this._blendPass;this._frame===0?(n.setUniform("weight1",0),n.setUniform("weight2",1)):(n.setUniform("weight1",.9),n.setUniform("weight2",.1)),n.setUniform("texture1",this._prevFrameTex),n.setUniform("texture2",e||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),n.render(t),this._blendFb.unbind(t),r||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var i=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=i,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};function mn(t){t=t||"perspective",this.layer=null,this.scene=new Mh,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new Hr,this._temporalSS=new iR,this._shadowMapPass=new vu;for(var e=[],r=0,n=0;n<30;n++){for(var i=[],a=0;a<6;a++)i.push(pm(r,2)*4-2),i.push(pm(r,3)*4-2),r++;e.push(i)}this._pcfKernels=e,this.scene.on("beforerender",function(o,s,l){this.needsTemporalSS()&&this._temporalSS.jitterProjection(o,l)},this)}mn.prototype.setProjection=function(t){var e=this.camera;e&&e.update(),t==="perspective"?this.camera instanceof $i||(this.camera=new $i,e&&this.camera.setLocalTransform(e.localTransform)):this.camera instanceof dm||(this.camera=new dm,e&&this.camera.setLocalTransform(e.localTransform)),this.camera.near=.1,this.camera.far=2e3};mn.prototype.setViewport=function(t,e,r,n,i){this.camera instanceof $i&&(this.camera.aspect=r/n),i=i||1,this.viewport.x=t,this.viewport.y=e,this.viewport.width=r,this.viewport.height=n,this.viewport.devicePixelRatio=i,this._compositor.resize(r*i,n*i),this._temporalSS.resize(r*i,n*i)};mn.prototype.containPoint=function(t,e){var r=this.viewport,n=this.layer.renderer.getHeight();return e=n-e,t>=r.x&&e>=r.y&&t<=r.x+r.width&&e<=r.y+r.height};var nU=new lr;mn.prototype.castRay=function(t,e,r){var n=this.layer.renderer,i=n.viewport;return n.viewport=this.viewport,n.screenToNDC(t,e,nU),this.camera.castRay(nU,r),n.viewport=i,r};mn.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var e=0;e<t.transparent.length;e++){var r=t.transparent[e],n=r.geometry;n.needsSortVerticesProgressively&&n.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),n.needsSortTrianglesProgressively&&n.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()};mn.prototype.render=function(t,e){this._doRender(t,e,this._frame),this._frame++};mn.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively};mn.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return t==="auto"&&(t=this._enablePostEffect),t};mn.prototype.hasDOF=function(){return this._enableDOF};mn.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30};mn.prototype._doRender=function(t,e,r){var n=this.scene,i=this.camera;r=r||0,this._updateTransparent(t,n,i,r),e||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,n,i,!0)),this._updateShadowPCFKernel(r);var a=t.clearColor;if(t.gl.clearColor(a[0],a[1],a[2],a[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,i),this._compositor.updateNormal(t,n,i,this._temporalSS.getFrame())),this._updateSSAO(t,n,i,this._temporalSS.getFrame()),this._enablePostEffect){var o=this._compositor.getSourceFrameBuffer();o.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(n,i,!0,!0),o.unbind(t),this.needsTemporalSS()&&e?(this._compositor.composite(t,n,i,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,n,i,null,0))}else if(this.needsTemporalSS()&&e){var o=this._temporalSS.getSourceFrameBuffer();o.bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(n,i,!0,!0),t.restoreClear(),o.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(n,i,!0,!0)};mn.prototype._updateTransparent=function(t,e,r,n){for(var i=new Ne,a=new gt,o=r.getWorldPosition(),s=e.getRenderList(r).transparent,l=0;l<s.length;l++){var u=s[l],c=u.geometry;gt.invert(a,u.worldTransform),Ne.transformMat4(i,o,a),c.needsSortTriangles&&c.needsSortTriangles()&&c.doSortTriangles(i,n),c.needsSortVertices&&c.needsSortVertices()&&c.doSortVertices(i,n)}};mn.prototype._updateSSAO=function(t,e,r){var n=this._enableSSAO&&this._enablePostEffect;n&&this._compositor.updateSSAO(t,e,r,this._temporalSS.getFrame());for(var i=e.getRenderList(r),a=0;a<i.opaque.length;a++){var o=i.opaque[a];o.renderNormal&&o.material[n?"enableTexture":"disableTexture"]("ssaoMap"),n&&o.material.set("ssaoMap",this._compositor.getSSAOTexture())}};mn.prototype._updateShadowPCFKernel=function(t){for(var e=this._pcfKernels[t%this._pcfKernels.length],r=this.scene.getRenderList(this.camera),n=r.opaque,i=0;i<n.length;i++)n[i].receiveShadow&&(n[i].material.set("pcfKernel",e),n[i].material.define("fragment","PCF_KERNEL_SIZE",e.length/2))};mn.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)};mn.prototype.setPostEffect=function(t,e){var r=this._compositor;this._enablePostEffect=t.get("enable");var n=t.getModel("bloom"),i=t.getModel("edge"),a=t.getModel("DOF",t.getModel("depthOfField")),o=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),s=t.getModel("SSR",t.getModel("screenSpaceReflection")),l=t.getModel("FXAA"),u=t.getModel("colorCorrection");n.get("enable")?r.enableBloom():r.disableBloom(),a.get("enable")?r.enableDOF():r.disableDOF(),s.get("enable")?r.enableSSR():r.disableSSR(),u.get("enable")?r.enableColorCorrection():r.disableColorCorrection(),i.get("enable")?r.enableEdge():r.disableEdge(),l.get("enable")?r.enableFXAA():r.disableFXAA(),this._enableDOF=a.get("enable"),this._enableSSAO=o.get("enable"),this._enableSSAO?r.enableSSAO():r.disableSSAO(),r.setBloomIntensity(n.get("intensity")),r.setEdgeColor(i.get("color")),r.setColorLookupTexture(u.get("lookupTexture"),e),r.setExposure(u.get("exposure")),["radius","quality","intensity"].forEach(function(c){r.setSSAOParameter(c,o.get(c))}),["quality","maxRoughness","physical"].forEach(function(c){r.setSSRParameter(c,s.get(c))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(c){r.setDOFParameter(c,a.get(c))}),["brightness","contrast","saturation"].forEach(function(c){r.setColorCorrection(c,u.get(c))})};mn.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect)return t>this.camera.far||t<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",t),!0)};mn.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")};mn.prototype.isLinearSpace=function(){return this._enablePostEffect};mn.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var e=this.rootNode.children(),r=0;r<e.length;r++)t.add(e[r]);t!==this.scene&&this.scene.add(t),this.rootNode=t}};mn.prototype.add=function(t){this.rootNode.add(t)};mn.prototype.remove=function(t){this.rootNode.remove(t)};mn.prototype.removeAll=function(t){this.rootNode.removeAll(t)};Object.assign(mn.prototype,vD);function Qye(t,e){var r=t.getBoxLayoutParams(),n=ri(r,{width:e.getWidth(),height:e.getHeight()});n.y=e.getHeight()-n.y-n.height,this.viewGL.setViewport(n.x,n.y,n.width,n.height,e.getDevicePixelRatio());var i=t.get("boxWidth"),a=t.get("boxHeight"),o=t.get("boxDepth");this.getAxis("x").setExtent(-i/2,i/2),this.getAxis("y").setExtent(o/2,-o/2),this.getAxis("z").setExtent(-a/2,a/2),this.size=[i,a,o]}function e1e(t,e){var r={};function n(i,a){r[i]=r[i]||[1/0,-1/0],r[i][0]=Math.min(a[0],r[i][0]),r[i][1]=Math.max(a[1],r[i][1])}t.eachSeries(function(i){if(i.coordinateSystem===this){var a=i.getData();["x","y","z"].forEach(function(o){a.mapDimensionsAll(o,!0).forEach(function(s){n(o,a.getDataExtent(s,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(i){t.eachComponent(i,function(a){var o=i.charAt(0),s=a.getReferringComponents("grid3D").models[0],l=s.coordinateSystem;if(l===this){var u=l.getAxis(o);if(!u){var c=aD(r[o]||[1/0,-1/0],a);u=new Mw(o,c),u.type=a.get("type");var f=u.type==="category";u.onBand=f&&a.get("boundaryGap"),u.inverse=a.get("inverse"),a.axis=u,u.model=a,u.getLabelModel=function(){return a.getModel("axisLabel",s.getModel("axisLabel"))},u.getTickModel=function(){return a.getModel("axisTick",s.getModel("axisTick"))},l.addAxis(u)}}},this)},this),this.resize(this.model,e)}var t1e={dimensions:x_.prototype.dimensions,create:function(t,e){var r=[];t.eachComponent("grid3D",function(a){a.__viewGL=a.__viewGL||new mn;var o=new x_;o.model=a,o.viewGL=a.__viewGL,a.coordinateSystem=o,r.push(o),o.resize=Qye,o.update=e1e});var n=["xAxis3D","yAxis3D","zAxis3D"];function i(a,o){return n.map(function(s){var l=a.getReferringComponents(s).models[0];return l==null&&(l=o.getComponent(s)),l})}return t.eachSeries(function(a){if(a.get("coordinateSystem")==="cartesian3D"){var o=a.getReferringComponents("grid3D").models[0];if(o==null){var s=i(a,t),o=s[0].getCoordSysModel();s.forEach(function(c){c.getCoordSysModel()})}var l=o.coordinateSystem;a.coordinateSystem=l}}),r}},eQ=fr.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});_ge(eQ);var tQ={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},r1e=xt({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},tQ),TD=xt({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},tQ),n1e=At({scale:!0,min:"dataMin",max:"dataMax"},TD),rQ=At({logBase:10},TD);rQ.scale=!0;const i1e={categoryAxis3D:r1e,valueAxis3D:TD,timeAxis3D:n1e,logAxis3D:rQ};var a1e=["value","category","time","log"];function o1e(t,e,r,n,i){a1e.forEach(function(a){var o=r.extend({type:e+"Axis3D."+a,__ordinalMeta:null,mergeDefaultAndTheme:function(s,l){var u=l.getTheme();xt(s,u.get(a+"Axis3D")),xt(s,this.getDefaultOption()),s.type=n(e,s)},optionUpdated:function(){var s=this.option;s.type==="category"&&(this.__ordinalMeta=_w.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:xt(Ft(i1e[a+"Axis3D"]),i||{},!0)});t.registerComponentModel(o)}),t.registerSubTypeDefaulter(e+"Axis3D",Zt(n,e))}function s1e(t,e){return e.type||(e.data?"category":"value")}function l1e(t){t.registerComponentModel(c4),t.registerComponentView(Tye),t.registerCoordinateSystem("grid3D",t1e),["x","y","z"].forEach(function(e){o1e(t,e,eQ,s1e,{name:e.toUpperCase()});const r=t.ComponentView.extend({type:e+"Axis3D"});t.registerComponentView(r)}),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(e,r){r.eachComponent({mainType:"grid3D",query:e},function(n){n.setView(e)})}),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(e,r){}),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(e,r){})}const h0={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},nQ={getFilledRegions:function(t,e){var r=(t||[]).slice(),n;if(typeof e=="string"?(e=W6(e),n=e&&e.geoJson):e&&e.features&&(n=e),!n)return[];for(var i={},a=n.features,o=0;o<r.length;o++)i[r[o].name]=r[o];for(var o=0;o<a.length;o++){var s=a[o].properties.name;i[s]||r.push({name:s})}return r},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var d0=fr.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var e=m2(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),r=new Kn(e,this);r.initData(t.regions);var n={};r.each(function(i){var a=r.getName(i),o=r.getItemModel(i);n[a]=o}),this._regionModelMap=n,this._data=r},getData:function(){return this._data},getRegionModel:function(t){var e=this.getData().getName(t);return this._regionModelMap[e]||new Br(null,this)},getRegionPolygonCoords:function(t){var e=this.getData().getName(t),r=this.coordinateSystem.getRegion(e);return r?r.geometries:[]},getFormattedLabel:function(t,e){var r=this._data.getName(t),n=this.getRegionModel(t),i=n.get(e==="normal"?["label","formatter"]:["emphasis","label","formatter"]);i==null&&(i=n.get(["label","formatter"]));var a={name:r};if(typeof i=="function")return a.status=e,i(a);if(typeof i=="string"){var o=a.seriesName;return i.replace("{a}",o!=null?o:"")}else return r},defaultOption:{regions:[]}});xt(d0.prototype,nQ);xt(d0.prototype,u4);xt(d0.prototype,u0);xt(d0.prototype,c0);xt(d0.prototype,h0);function iQ(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,a=aQ(t,0,i,r,!0),o=[];if(!a)return o;var s,l,u,c,f,h,d;if(n&&(a=d1e(t,e,a,r)),t.length>80*r){s=u=t[0],l=c=t[1];for(var p=r;p<i;p+=r)f=t[p],h=t[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l)}return w_(a,o,r,s,l,d),o}function aQ(t,e,r,n,i){var a,o;if(i===sR(t,e,r,n)>0)for(a=e;a<r;a+=n)o=iU(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=iU(a,t[a],t[a+1],o);return o&&rp(o,o.next)&&(C_(o),o=o.next),o}function b_(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(rp(r,r.next)||vo(r.prev,r,r.next)===0)){if(C_(r),r=e=r.prev,r===r.next)return null;n=!0}else r=r.next;while(n||r!==e);return e}function w_(t,e,r,n,i,a,o){if(t){!o&&a&&m1e(t,n,i,a);for(var s=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,a?c1e(t,n,i,a):u1e(t)){e.push(l.i/r),e.push(t.i/r),e.push(u.i/r),C_(t),t=u.next,s=u.next;continue}if(t=u,t===s){o?o===1?(t=f1e(t,e,r),w_(t,e,r,n,i,a,2)):o===2&&h1e(t,e,r,n,i,a):w_(b_(t),e,r,n,i,a,1);break}}}}function u1e(t){var e=t.prev,r=t,n=t.next;if(vo(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Pw(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&vo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function c1e(t,e,r,n){var i=t.prev,a=t,o=t.next;if(vo(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=aR(s,l,e,r,n),h=aR(u,c,e,r,n),d=t.nextZ;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&Pw(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&vo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&Pw(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&vo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function f1e(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!rp(i,a)&&oQ(i,n,n.next,a)&&T_(i,a)&&T_(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),C_(n),C_(n.next),n=t=a),n=n.next}while(n!==t);return n}function h1e(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&x1e(o,s)){var l=sQ(o,s);o=b_(o,o.next),l=b_(l,l.next),w_(o,e,r,n,i,a),w_(l,e,r,n,i,a);return}s=s.next}o=o.next}while(o!==t)}function d1e(t,e,r,n){var i=[],a,o,s,l,u;for(a=0,o=e.length;a<o;a++)s=e[a]*n,l=a<o-1?e[a+1]*n:t.length,u=aQ(t,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(_1e(u));for(i.sort(p1e),a=0;a<i.length;a++)v1e(i[a],r),r=b_(r,r.next);return r}function p1e(t,e){return t.x-e.x}function v1e(t,e){if(e=g1e(t,e),e){var r=sQ(e,t);b_(r,r.next)}}function g1e(t,e){var r=e,n=t.x,i=t.y,a=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!o)return null;if(n===a)return o.prev;var l=o,u=o.x,c=o.y,f=1/0,h;for(r=o.next;r!==l;)n>=r.x&&r.x>=u&&n!==r.x&&Pw(i<c?n:a,i,u,c,i<c?a:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),(h<f||h===f&&r.x>o.x)&&T_(r,t)&&(o=r,f=h)),r=r.next;return o}function m1e(t,e,r,n){var i=t;do i.z===null&&(i.z=aR(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,y1e(i)}function y1e(t){var e,r,n,i,a,o,s,l,u=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<u&&(s++,n=n.nextZ,!!n);e++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1);return t}function aR(t,e,r,n,i){return t=32767*(t-r)/i,e=32767*(e-n)/i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function _1e(t){var e=t,r=t;do e.x<r.x&&(r=e),e=e.next;while(e!==t);return r}function Pw(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function x1e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S1e(t,e)&&T_(t,e)&&T_(e,t)&&b1e(t,e)}function vo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function rp(t,e){return t.x===e.x&&t.y===e.y}function oQ(t,e,r,n){return rp(t,e)&&rp(r,n)||rp(t,n)&&rp(r,e)?!0:vo(t,e,r)>0!=vo(t,e,n)>0&&vo(r,n,t)>0!=vo(r,n,e)>0}function S1e(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&oQ(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function T_(t,e){return vo(t.prev,t,t.next)<0?vo(t,e,t.next)>=0&&vo(t,t.prev,e)>=0:vo(t,e,t.prev)<0||vo(t,t.next,e)<0}function b1e(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function sQ(t,e){var r=new oR(t.i,t.x,t.y),n=new oR(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function iU(t,e,r,n){var i=new oR(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function C_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function oR(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}iQ.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(sR(t,0,a,r));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;o-=Math.abs(sR(t,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function sR(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function oM(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function lQ(t,e,r,n,i){var a=r,o=t[e];oM(t,e,n);for(var s=r;s<n;s++)i(t[s],o)<0&&(oM(t,s,a),a++);return oM(t,n,a),a}function Lw(t,e,r,n){if(r<n){var i=Math.floor((r+n)/2),a=lQ(t,i,r,n,e);Lw(t,e,r,a-1),Lw(t,e,a+1,n)}}function vm(){this._parts=[]}vm.prototype.step=function(t,e,r){var n=t.length;if(r===0){this._parts=[],this._sorted=!1;var i=Math.floor(n/2);this._parts.push({pivot:i,left:0,right:n-1}),this._currentSortPartIdx=0}if(!this._sorted){var a=this._parts;if(a.length===0)return this._sorted=!0,!0;if(a.length<512){for(var o=0;o<a.length;o++)a[o].pivot=lQ(t,a[o].pivot,a[o].left,a[o].right,e);for(var s=[],o=0;o<a.length;o++){var l=a[o].left,u=a[o].pivot-1;u>l&&s.push({pivot:Math.floor((u+l)/2),left:l,right:u});var l=a[o].pivot+1,u=a[o].right;u>l&&s.push({pivot:Math.floor((u+l)/2),left:l,right:u})}a=this._parts=s}else for(var o=0;o<Math.floor(a.length/10);o++){var c=a.length-1-this._currentSortPartIdx;if(Lw(t,e,a[c].left,a[c].right),this._currentSortPartIdx++,this._currentSortPartIdx===a.length)return this._sorted=!0,!0}return!1}};vm.sort=Lw;var Xg=yi.vec3,aU=Xg.create(),oU=Xg.create(),sU=Xg.create();const CD={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,e){var r=this.indices;if(e===0){var n=this.attributes.position,t=t.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new r.constructor(r.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var i=0,a,o=0;o<r.length;){n.get(r[o++],aU),n.get(r[o++],oU),n.get(r[o++],sU);var s=Xg.sqrDist(aU,t),l=Xg.sqrDist(oU,t),u=Xg.sqrDist(sU,t),c=Math.min(s,l);c=Math.min(c,u),o===3?(a=c,c=0):c=c-a,this._triangleZList[i++]=c}}for(var f=this._sortedTriangleIndices,o=0;o<f.length;o++)f[o]=o;if(this.triangleCount<2e4)e===0&&this._simpleSort(!0);else for(var o=0;o<3;o++)this._progressiveQuickSort(e*3+o);for(var h=this._indicesTmp,d=this._triangleZListTmp,p=this._triangleZList,o=0;o<this.triangleCount;o++){var v=f[o]*3,g=o*3;h[g++]=r[v++],h[g++]=r[v++],h[g]=r[v],d[o]=p[f[o]]}var m=this._indicesTmp;this._indicesTmp=this.indices,this.indices=m;var m=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=m,this.dirtyIndices()},_simpleSort:function(t){var e=this._triangleZList,r=this._sortedTriangleIndices;function n(i,a){return e[a]-e[i]}t?Array.prototype.sort.call(r,n):vm.sort(r,n,0,r.length-1)},_progressiveQuickSort:function(t){var e=this._triangleZList,r=this._sortedTriangleIndices;this._quickSort=this._quickSort||new vm,this._quickSort.step(r,function(n,i){return e[i]-e[n]},t)}};function w1e(t){const e=t.getVisual("style");if(e){const r=t.getVisual("drawType");return e[r]}}function T1e(t){return t.getVisual("style").opacity}function Zi(t,e){const r=t.getItemVisual(e,"style");if(r){const n=t.getVisual("drawType");return r[n]}}function Yi(t,e){const r=t.getItemVisual(e,"style");return r&&r.opacity}var uQ=1,cQ=2;function qc(t,e,r){this._labelsMesh=new _D,this._labelTextureSurface=new Aw({width:512,height:512,devicePixelRatio:r.getDevicePixelRatio(),onupdate:function(){r.getZr().refresh()}}),this._api=r,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}qc.prototype.getLabelPosition=function(t,e,r){return[0,0,0]};qc.prototype.getLabelDistance=function(t,e,r){return 0};qc.prototype.getMesh=function(){return this._labelsMesh};qc.prototype.updateData=function(t,e,r){e==null&&(e=0),r==null&&(r=t.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==r-e)&&(this._labelsVisibilitiesBits=new Uint8Array(r-e));for(var n=["label","show"],i=["emphasis","label","show"],a=e;a<r;a++){var o=t.getItemModel(a),s=o.get(n),l=o.get(i);l==null&&(l=s);var u=(s?uQ:0)|(l?cQ:0);this._labelsVisibilitiesBits[a-e]=u}this._start=e,this._end=r,this._data=t};qc.prototype.updateLabels=function(t){if(this._data){t=t||[];for(var e=t.length>0,r={},n=0;n<t.length;n++)r[t[n]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var i=["label"],a=["emphasis","label"],o=this._data.hostModel,s=this._data,l=o.getModel(i),u=o.getModel(a,l),c={left:"right",right:"left",top:"center",bottom:"center"},f={left:"middle",right:"middle",top:"bottom",bottom:"top"},h=this._start;h<this._end;h++){var d=!1;e&&r[h]&&(d=!0);var p=this._labelsVisibilitiesBits[h-this._start]&(d?cQ:uQ);if(p){var v=s.getItemModel(h),g=v.getModel(d?a:i,d?u:l),m=g.get("distance")||0,x=g.get("position"),S=this._api.getDevicePixelRatio(),b=o.getFormattedLabel(h,d?"emphasis":"normal");if(b==null||b==="")return;var T=new Ar({style:dn(g,{text:b,fill:g.get("color")||Zi(s,h)||"#000",align:"left",verticalAlign:"top",opacity:Lr.firstNotNull(g.get("opacity"),Yi(s,h),1)})}),w=T.getBoundingRect(),E=1.2;w.height*=E;var M=this._labelTextureSurface.add(T),A=c[x]||"center",R=f[x]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(h,x,m),[w.width*S,w.height*S],M,A,R,this.getLabelDistance(h,x,m)*S)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}};qc.prototype.dispose=function(){this._labelTextureSurface.dispose()};var Uo=yi.vec3;J.Shader.import(h4);function gm(t){this.rootNode=new J.Node,this._triangulationResults={},this._shadersMap=J.COMMON_SHADERS.filter(function(r){return r!=="shadow"}).reduce(function(r,n){return r[n]=J.createShader("ecgl."+n),r},{}),this._linesShader=J.createShader("ecgl.meshLines3D");var e={};J.COMMON_SHADERS.forEach(function(r){e[r]=new J.Material({shader:J.createShader("ecgl."+r)})}),this._groundMaterials=e,this._groundMesh=new J.Mesh({geometry:new J.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new qc(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}gm.prototype={constructor:gm,extrudeY:!0,update:function(t,e,r,n,i){var a=t.getData();n==null&&(n=0),i==null&&(i=a.count()),this._startIndex=n,this._endIndex=i-1,this._triangulation(t,n,i);var o=this._getShader(t.get("shading"));this._prepareMesh(t,o,r,n,i),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,r,n,i);var s=t.coordinateSystem;s.type==="geo3D"&&this._updateGroundPlane(t,s,r);var l=this;this._labelsBuilder.updateData(a,n,i),this._labelsBuilder.getLabelPosition=function(u,c,f){var h=a.getName(u),d,p=f;if(s.type==="geo3D"){var v=s.getRegion(h);if(!v)return[NaN,NaN,NaN];d=v.getCenter();var g=s.dataToPoint([d[0],d[1],p]);return g}else var m=l._triangulationResults[u-l._startIndex],d=l.extrudeY?[(m.max[0]+m.min[0])/2,m.max[1]+p,(m.max[2]+m.min[2])/2]:[(m.max[0]+m.min[0])/2,(m.max[1]+m.min[1])/2,m.max[2]+p]},this._data=a,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this;function e(){var i=new J.Mesh({name:"Polygon",material:new J.Material({shader:t._shadersMap.lambert}),geometry:new J.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(i.geometry,CD),i}var r=e(),n=new J.Mesh({material:new J.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Rh({useNativeLine:!1})});this.rootNode.add(r),this.rootNode.add(n),r.material.define("both","VERTEX_COLOR"),r.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=r,this._linesMesh=n,this.rootNode.add(this._groundMesh)},_getShader:function(t){var e=this._shadersMap[t];return e||(e=this._shadersMap.lambert),e.__shading=t,e},_prepareMesh:function(t,e,r,n,i){for(var a=0,o=0,s=0,l=0,u=n;u<i;u++){var c=this._getRegionPolygonInfo(u),f=this._getRegionLinesInfo(u,t,this._linesMesh.geometry);a+=c.vertexCount,o+=c.triangleCount,s+=f.vertexCount,l+=f.triangleCount}var h=this._polygonMesh,d=h.geometry;["position","normal","texcoord0","color"].forEach(function(p){d.attributes[p].init(a)}),d.indices=a>65535?new Uint32Array(o*3):new Uint16Array(o*3),h.material.shader!==e&&h.material.attachShader(e,!0),J.setMaterialFromModel(e.__shading,h.material,t,r),s>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(s),this._linesMesh.geometry.setTriangleCount(l)),this._dataIndexOfVertex=new Uint32Array(a),this._vertexRangeOfDataIndex=new Uint32Array((i-n)*2)},_updateRegionMesh:function(t,e,r,n){for(var i=t.getData(),a=0,o=0,s=!1,w=this._polygonMesh,l=this._linesMesh,u=r;u<n;u++){var c=t.getRegionModel(u),f=c.getModel("itemStyle"),h=Lr.firstNotNull(Zi(i,u),f.get("color"),"#fff"),d=Lr.firstNotNull(Yi(i,u),f.get("opacity"),1),p=J.parseColor(h),v=J.parseColor(f.get("borderColor"));p[3]*=d,v[3]*=d;var g=p[3]<.99;w.material.set("color",[1,1,1,1]),s=s||g;for(var m=Lr.firstNotNull(c.get("height",!0),t.get("regionHeight")),x=this._updatePolygonGeometry(t,w.geometry,u,m,a,o,p),S=a;S<x.vertexOffset;S++)this._dataIndexOfVertex[S]=u;this._vertexRangeOfDataIndex[(u-r)*2]=a,this._vertexRangeOfDataIndex[(u-r)*2+1]=x.vertexOffset,a=x.vertexOffset,o=x.triangleOffset;var b=f.get("borderWidth"),T=b>0;T&&(b*=e.getDevicePixelRatio(),this._updateLinesGeometry(l.geometry,t,u,m,b,t.coordinateSystem.transform)),l.invisible=!T,l.material.set({color:v})}var w=this._polygonMesh;w.material.transparent=s,w.material.depthMask=!s,w.geometry.updateBoundingBox(),w.frontFace=this.extrudeY?J.Mesh.CCW:J.Mesh.CW,w.material.get("normalMap")&&w.geometry.generateTangents(),w.seriesIndex=t.seriesIndex,w.on("mousemove",this._onmousemove,this),w.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var e=t.getModel("debug.wireframe");if(e.get("show")){var r=J.parseColor(e.get("lineStyle.color")||"rgba(0,0,0,0.5)"),n=Lr.firstNotNull(e.get("lineStyle.width"),1),i=this._polygonMesh;i.geometry.generateBarycentric(),i.material.define("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",r),i.material.set("wireframeLineWidth",n)}},_onmousemove:function(t){var e=this._dataIndexOfVertex[t.triangle[0]];e==null&&(e=-1),e!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(e),this._labelsBuilder.updateLabels([e])),this._lastHoverDataIndex=e,this._polygonMesh.dataIndex=e},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,e,r){var n=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!n.get("show",!0),!this._groundMesh.invisible){var i=t.get("shading"),a=this._groundMaterials[i];a||(a=this._groundMaterials.lambert),J.setMaterialFromModel(i,a,n,r),a.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=a,this._groundMesh.material.set("color",J.parseColor(n.get("color"))),this._groundMesh.scale.set(e.size[0],e.size[2],1)}},_triangulation:function(t,e,r){this._triangulationResults=[];for(var n=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=t.coordinateSystem,o=e;o<r;o++){for(var s=[],l=t.getRegionPolygonCoords(o),u=0;u<l.length;u++){var c=l[u].exterior,f=l[u].interiors,h=[],d=[];if(!(c.length<3)){for(var p=0,v=0;v<c.length;v++){var g=c[v];h[p++]=g[0],h[p++]=g[1]}for(var v=0;v<f.length;v++)if(!(f[v].length<3)){for(var m=h.length/2,x=0;x<f[v].length;x++){var g=f[v][x];h.push(g[0]),h.push(g[1])}d.push(m)}for(var S=iQ(h,d),b=new Float64Array(h.length/2*3),T=[],w=[1/0,1/0,1/0],E=[-1/0,-1/0,-1/0],M=0,v=0;v<h.length;)Uo.set(T,h[v++],0,h[v++]),a&&a.transform&&Uo.transformMat4(T,T,a.transform),Uo.min(w,w,T),Uo.max(E,E,T),b[M++]=T[0],b[M++]=T[1],b[M++]=T[2];Uo.min(n,n,w),Uo.max(i,i,E),s.push({points:b,indices:S,min:w,max:E})}}this._triangulationResults.push(s)}this._geoBoundingBox=[n,i]},_getRegionPolygonInfo:function(t){for(var e=this._triangulationResults[t-this._startIndex],r=0,n=0,i=0;i<e.length;i++)r+=e[i].points.length/3,n+=e[i].indices.length/3;var a=r*2+r*4,o=n*2+r*2;return{vertexCount:a,triangleCount:o}},_updatePolygonGeometry:function(t,e,r,n,i,a,o){var s=t.get("projectUVOnGround"),l=e.attributes.position,u=e.attributes.normal,c=e.attributes.texcoord0,f=e.attributes.color,h=this._triangulationResults[r-this._startIndex],d=f.value&&o,p=e.indices,v=this.extrudeY?1:2,g=this.extrudeY?2:1,m=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],x=Uo.mul([],this._geoBoundingBox[0],m),S=Uo.mul([],this._geoBoundingBox[1],m),b=Math.max(S[0]-x[0],S[2]-x[2]);function T(le,pe,Se){for(var _e=le.points,Le=_e.length,Be=[],Q=[],tt=0;tt<Le;tt+=3)Be[0]=_e[tt],Be[v]=pe,Be[g]=_e[tt+2],Q[0]=(_e[tt]*m[0]-x[0])/b,Q[1]=(_e[tt+2]*m[g]-x[2])/b,l.set(i,Be),d&&f.set(i,o),c.set(i++,Q)}function w(le,pe,Se){var _e=i;T(le,pe);for(var Le=le.indices.length,Be=0;Be<Le;Be++)p[a*3+Be]=le.indices[Be]+_e;a+=le.indices.length/3}for(var E=this.extrudeY?[0,1,0]:[0,0,1],M=Uo.negate([],E),A=0;A<h.length;A++){var R=i,L=h[A];w(L,0),w(L,n);for(var I=L.points.length/3,N=0;N<I;N++)u.set(R+N,M),u.set(R+N+I,E);for(var k=[0,3,1,1,3,2],z=[[],[],[],[]],B=[],V=[],F=[],$=[],W=0,N=0;N<I;N++){for(var H=(N+1)%I,X=(L.points[H*3]-L.points[N*3])*m[0],te=(L.points[H*3+2]-L.points[N*3+2])*m[g],Y=Math.sqrt(X*X+te*te),ee=0;ee<4;ee++){var se=ee===0||ee===3,ne=(se?N:H)*3;z[ee][0]=L.points[ne],z[ee][v]=ee>1?n:0,z[ee][g]=L.points[ne+2],l.set(i+ee,z[ee]),s?($[0]=(L.points[ne]*m[0]-x[0])/b,$[1]=(L.points[ne+2]*m[g]-x[g])/b):($[0]=(se?W:W+Y)/b,$[1]=(z[ee][v]*m[v]-x[v])/b),c.set(i+ee,$)}Uo.sub(B,z[1],z[0]),Uo.sub(V,z[3],z[0]),Uo.cross(F,B,V),Uo.normalize(F,F);for(var ee=0;ee<4;ee++)u.set(i+ee,F),d&&f.set(i+ee,o);for(var ee=0;ee<6;ee++)p[a*3+ee]=k[ee]+i;i+=4,a+=2,W+=Y}}return e.dirty(),{vertexOffset:i,triangleOffset:a}},_getRegionLinesInfo:function(t,e,r){var n=0,i=0,a=e.getRegionModel(t),o=a.getModel("itemStyle"),s=o.get("borderWidth");if(s>0){var l=e.getRegionPolygonCoords(t);l.forEach(function(u){var c=u.exterior,f=u.interiors;n+=r.getPolylineVertexCount(c),i+=r.getPolylineTriangleCount(c);for(var h=0;h<f.length;h++)n+=r.getPolylineVertexCount(f[h]),i+=r.getPolylineTriangleCount(f[h])},this)}return{vertexCount:n,triangleCount:i}},_updateLinesGeometry:function(t,e,r,n,i,a){function o(u){for(var c=new Float64Array(u.length*3),f=0,h=[],d=0;d<u.length;d++)h[0]=u[d][0],h[1]=n+.1,h[2]=u[d][1],a&&Uo.transformMat4(h,h,a),c[f++]=h[0],c[f++]=h[1],c[f++]=h[2];return c}var s=[1,1,1,1],l=e.getRegionPolygonCoords(r);l.forEach(function(u){var c=u.exterior,f=u.interiors;t.addPolyline(o(c),s,i);for(var h=0;h<f.length;h++)t.addPolyline(o(f[h]),s,i)})},highlight:function(t){var e=this._data;if(e){var r=e.getItemModel(t),n=r.getModel(["emphasis","itemStyle"]),i=n.get("color"),a=Lr.firstNotNull(n.get("opacity"),Yi(e,t),1);if(i==null){var o=Zi(e,t);i=im(o,-.4)}a==null&&(a=Yi(e,t));var s=J.parseColor(i);s[3]*=a,this._setColorOfDataIndex(e,t,s)}},downplay:function(t){var e=this._data;if(e){var r=e.getItemModel(t),n=Lr.firstNotNull(Zi(e,t),r.get(["itemStyle","color"]),"#fff"),i=Lr.firstNotNull(Yi(e,t),r.get(["itemStyle","opacity"]),1),a=J.parseColor(n);a[3]*=i,this._setColorOfDataIndex(e,t,a)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,e,r){if(!(e<this._startIndex&&e>this._endIndex)){e-=this._startIndex;for(var n=this._vertexRangeOfDataIndex[e*2];n<this._vertexRangeOfDataIndex[e*2+1];n++)this._polygonMesh.geometry.attributes.color.set(n,r);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const C1e=_n.extend({type:"geo3D",__ecgl__:!0,init:function(t,e){this._geo3DBuilder=new gm(e),this.groupGL=new J.Node,this._lightRoot=new J.Node,this._sceneHelper=new wh(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new x2({zr:e.getZr()}),this._control.init()},render:function(t,e,r){this.groupGL.add(this._geo3DBuilder.rootNode);var n=t.coordinateSystem;if(!(!n||!n.viewGL)){n.viewGL.add(this._lightRoot),t.get("show")?n.viewGL.add(this.groupGL):n.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(n.viewGL);var a=t.getModel("viewControl");i.setFromViewControlModel(a,0),this._sceneHelper.setScene(n.viewGL.scene),this._sceneHelper.updateLight(t),n.viewGL.setPostEffect(t.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,e,r,0,t.getData().count());var o=n.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(s){s.material&&s.material[o]("fragment","SRGB_DECODE")}),i.off("update"),i.on("update",function(){r.dispatchAction({type:"geo3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),center:i.getCenter(),from:this.uid,geo3DId:t.id})}),i.update()}},afterRender:function(t,e,r,n){var i=n.renderer;this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var E1e={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function fQ(t,e){if(t==="china"){var r=E1e[e.name];if(r){var n=e.getCenter();n[0]+=r[0]/10.5,n[1]+=-r[1]/(10.5/.75),e.setCenter(n)}}}var A1e={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function M1e(t,e){if(t==="world"){var r=A1e[e.name];if(r){var n=[r[0],r[1]];e.setCenter(n)}}}var R1e=yi.vec3,Og=yi.mat4,P1e=[fQ,M1e];function Dw(t,e,r,n,i){this.name=t,this.map=e,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(r,n,i),this.transform=Og.identity(new Float64Array(16)),this.invTransform=Og.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}Dw.prototype={constructor:Dw,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,e,r){var n=X6||X6;try{this.regions=t?n(t):[]}catch(u){throw`Invalid geoJson format
`+u}e=e||{},r=r||{};for(var i=this.regions,a={},o=0;o<i.length;o++){var s=i[o].name;s=r[s]||s,i[o].name=s,a[s]=i[o],this.addGeoCoord(s,i[o].getCenter());var l=e[s];l&&i[o].transformTo(l.left,l.top,l.width,l.height)}this._regionsMap=a,this._geoRect=null,P1e.forEach(function(u){u(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,e=this.regions,r=0;r<e.length;r++){var n=e[r].getBoundingRect();t=t||n.clone(),t.union(n)}return this._geoRect=t||new sr(0,0,0,0)},addGeoCoord:function(t,e){this._nameCoordMap[t]=e},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var e=this.regions,r=0;r<e.length;r++)if(e[r].contain(t))return e[r]},setSize:function(t,e,r){this.size=[t,e,r];var n=this.getGeoBoundingRect(),i=t/n.width,a=-r/n.height,o=-t/2-n.x*i,s=r/2-n.y*a,l=this.extrudeY?[o,0,s]:[o,s,0],u=this.extrudeY?[i,1,a]:[i,a,1],c=this.transform;Og.identity(c),Og.translate(c,c,l),Og.scale(c,c,u),Og.invert(this.invTransform,c)},dataToPoint:function(t,e){e=e||[];var r=this.extrudeY?1:2,n=this.extrudeY?2:1,i=t[2];return isNaN(i)&&(i=0),e[0]=t[0],e[n]=t[1],this.altitudeAxis?e[r]=this.altitudeAxis.dataToCoord(i):e[r]=0,e[r]+=this.regionHeight,R1e.transformMat4(e,e,this.transform),e},pointToData:function(t,e){}};function L1e(t,e){var r=t.getBoxLayoutParams(),n=ri(r,{width:e.getWidth(),height:e.getHeight()});n.y=e.getHeight()-n.y-n.height,this.viewGL.setViewport(n.x,n.y,n.width,n.height,e.getDevicePixelRatio());var i=this.getGeoBoundingRect(),a=i.width/i.height*(t.get("aspectScale")||.75),o=t.get("boxWidth"),s=t.get("boxDepth"),l=t.get("boxHeight");l==null&&(l=5),isNaN(o)&&isNaN(s)&&(o=100),isNaN(s)?s=o/a:isNaN(o)&&(o=s/a),this.setSize(o,l,s),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(l-this.regionHeight,0))}function D1e(t,e){var r=[1/0,-1/0];if(t.eachSeries(function(i){if(i.coordinateSystem===this&&i.type!=="series.map3D"){var a=i.getData(),o=i.coordDimToDataDim("alt"),s=o&&o[0];if(s){var l=a.getDataExtent(s,!0);r[0]=Math.min(r[0],l[0]),r[1]=Math.max(r[1],l[1])}}},this),r&&isFinite(r[1]-r[0])){var n=aD(r,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Po("altitude",n),this.resize(this.model,e)}}var lU=0,ED={dimensions:Dw.prototype.dimensions,create:function(t,e){var r=[];if(!W6)throw new Error("geo3D component depends on geo component");function n(i,a){var o=ED.createGeo3D(i);i.__viewGL=i.__viewGL||new mn,o.viewGL=i.__viewGL,i.coordinateSystem=o,o.model=i,r.push(o),o.resize=L1e,o.resize(i,e),o.update=D1e}return t.eachComponent("geo3D",function(i,a){n(i)}),t.eachSeriesByType("map3D",function(i,a){var o=i.get("coordinateSystem");o==null&&(o="geo3D"),o==="geo3D"&&n(i)}),t.eachSeries(function(i){if(i.get("coordinateSystem")==="geo3D"){if(i.type==="series.map3D")return;var a=i.getReferringComponents("geo3D").models[0];if(a||(a=t.getComponent("geo3D")),!a)throw new Error('geo "'+Lr.firstNotNull(i.get("geo3DIndex"),i.get("geo3DId"),0)+'" not found');i.coordinateSystem=a.coordinateSystem}}),r},createGeo3D:function(t){var e=t.get("map"),r;return typeof e=="string"?(r=e,e=W6(e)):e&&e.features&&(e={geoJson:e}),r==null&&(r="GEO_ANONYMOUS_"+lU++),new Dw(r+lU++,r,e&&e.geoJson,e&&e.specialAreas,t.get("nameMap"))}};function hQ(t){t.registerComponentModel(d0),t.registerComponentView(C1e),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(e,r){r.eachComponent({mainType:"geo3D",query:e},function(n){n.setView(e)})}),t.registerCoordinateSystem("geo3D",ED)}function uU(t,e){t.id=t.id||t.name||e+""}var Rp=fr.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){Rp.superApply(this,"init",arguments),G(this.option.layers,function(t,e){xt(t,this.defaultLayerOption),uU(t,e)},this)},mergeOption:function(t){var e=this.option.layers;this.option.layers=null,Rp.superApply(this,"mergeOption",arguments);function r(o){return Gl(o,function(s,l,u){return uU(l,u),s[l.id]=l,s},{})}if(e&&e.length){var n=r(t.layers),i=r(e);for(var a in n)i[a]?xt(i[a],n[a],!0):e.push(t.layers[a]);this.option.layers=e}G(this.option.layers,function(o){xt(o,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,e,r){this.displacementData=t,this.displacementWidth=e,this.displacementHeight=r},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),e=this.get("displacementScale");return(!t||t==="none")&&(e=0),e},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),e=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==e,this._displacementTexture=t,this._displacementScale=e},isDisplacementChanged:function(){return this._displacementChanged}});xt(Rp.prototype,u4);xt(Rp.prototype,u0);xt(Rp.prototype,c0);xt(Rp.prototype,h0);var dQ=Math.PI,Qs=Math.sin,Mc=Math.cos,pQ=Math.tan,vQ=Math.asin,gQ=Math.atan2,Pp=dQ/180,I1e=1e3*60*60*24,N1e=2440588,O1e=2451545;function k1e(t){return t.valueOf()/I1e-.5+N1e}function F1e(t){return k1e(t)-O1e}var Iw=Pp*23.4397;function B1e(t,e){return gQ(Qs(t)*Mc(Iw)-pQ(e)*Qs(Iw),Mc(t))}function z1e(t,e){return vQ(Qs(e)*Mc(Iw)+Mc(e)*Qs(Iw)*Qs(t))}function U1e(t,e,r){return gQ(Qs(t),Mc(t)*Qs(e)-pQ(r)*Mc(e))}function V1e(t,e,r){return vQ(Qs(e)*Qs(r)+Mc(e)*Mc(r)*Mc(t))}function H1e(t,e){return Pp*(280.16+360.9856235*t)-e}function G1e(t){return Pp*(357.5291+.98560028*t)}function W1e(t){var e=Pp*(1.9148*Qs(t)+.02*Qs(2*t)+3e-4*Qs(3*t)),r=Pp*102.9372;return t+e+r+dQ}function $1e(t){var e=G1e(t),r=W1e(e);return{dec:z1e(r,0),ra:B1e(r,0)}}var mQ={};mQ.getPosition=function(t,e,r){var n=Pp*-r,i=Pp*e,a=F1e(t),o=$1e(a),s=H1e(a,n)-o.ra;return{azimuth:U1e(s,i,o.dec),altitude:V1e(s,i,o.dec)}};const j1e=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;J.Shader.import(OJ);J.Shader.import(j1e);const X1e=_n.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,e){this.groupGL=new J.Node,this._sphereGeometry=new J.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new J.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new J.PlaneGeometry,this._earthMesh=new J.Mesh({renderNormal:!0}),this._atmosphereMesh=new J.Mesh,this._atmosphereGeometry=new J.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new J.Material({shader:new J.Shader(J.Shader.source("ecgl.atmosphere.vertex"),J.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=J.Mesh.CW,this._lightRoot=new J.Node,this._sceneHelper=new wh,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new x2({zr:e.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,e,r){var n=t.coordinateSystem,i=t.get("shading");n.viewGL.add(this._lightRoot),t.get("show")?n.viewGL.add(this.groupGL):n.viewGL.remove(this.groupGL),this._sceneHelper.setScene(n.viewGL.scene),n.viewGL.setPostEffect(t.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var a=this._earthMesh;a.geometry=this._sphereGeometry;var o="ecgl."+i;(!a.material||a.material.shader.name!==o)&&(a.material=J.createMaterial(o)),J.setMaterialFromModel(i,a.material,t,r),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(f){var h=a.material.get(f);h&&(h.flipY=!1)}),a.material.set("color",J.parseColor(t.get("baseColor")));var s=n.radius*.99;if(a.scale.set(s,s,s),t.get("atmosphere.show")){a.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),a.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var l=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(s+l,s+l,s+l)}else a.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var u=a.material.setTextureImage("diffuseMap",t.get("baseTexture"),r,{flipY:!1,anisotropic:8});u&&u.surface&&u.surface.attachToMesh(a);var c=a.material.setTextureImage("bumpMap",t.get("heightTexture"),r,{flipY:!1,anisotropic:8});c&&c.surface&&c.surface.attachToMesh(a),a.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,r),this._displaceVertices(t,r),this._updateViewControl(t,r),this._updateLayers(t,r)},afterRender:function(t,e,r,n){var i=n.renderer;this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r)},_updateLayers:function(t,e){var r=t.coordinateSystem,n=t.get("layers"),i=r.radius,a=[],o=[],s=[],l=[];G(n,function(d){var p=new Br(d),v=p.get("type"),g=J.loadTexture(p.get("texture"),e,{flipY:!1,anisotropic:8});if(g.surface&&g.surface.attachToMesh(this._earthMesh),v==="blend"){var m=p.get("blendTo"),x=Lr.firstNotNull(p.get("intensity"),1);m==="emission"?(s.push(g),l.push(x)):(a.push(g),o.push(x))}else{var S=p.get("id"),b=this._layerMeshes[S];b||(b=this._layerMeshes[S]=new J.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var T=p.get("shading");T==="lambert"?(b.material=b.__lambertMaterial||new J.Material({autoUpdateTextureStatus:!1,shader:J.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),b.__lambertMaterial=b.material):(b.material=b.__colorMaterial||new J.Material({autoUpdateTextureStatus:!1,shader:J.createShader("ecgl.color"),transparent:!0,depthMask:!1}),b.__colorMaterial=b.material),b.material.enableTexture("diffuseMap");var w=p.get("distance"),E=i+(w==null?r.radius/100:w);b.scale.set(E,E,E),i=E;var M=this._blankTexture||(this._blankTexture=J.createBlankTexture("rgba(255, 255, 255, 0)"));b.material.set("diffuseMap",M),J.loadTexture(p.get("texture"),e,{flipY:!1,anisotropic:8},function(A){A.surface&&A.surface.attachToMesh(b),b.material.set("diffuseMap",A),e.getZr().refresh()}),p.get("show")?this.groupGL.add(b):this.groupGL.remove(b)}},this);var u=this._earthMesh.material;u.define("fragment","LAYER_DIFFUSEMAP_COUNT",a.length),u.define("fragment","LAYER_EMISSIVEMAP_COUNT",s.length),u.set("layerDiffuseMap",a),u.set("layerDiffuseIntensity",o),u.set("layerEmissiveMap",s),u.set("layerEmissionIntensity",l);var c=t.getModel("debug.wireframe");if(c.get("show")){u.define("both","WIREFRAME_TRIANGLE");var f=J.parseColor(c.get("lineStyle.color")||"rgba(0,0,0,0.5)"),h=Lr.firstNotNull(c.get("lineStyle.width"),1);u.set("wireframeLineWidth",h),u.set("wireframeLineColor",f)}else u.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,e){var r=t.coordinateSystem,n=t.getModel("viewControl");r.viewGL.camera;var i=this;function a(){return{type:"globeChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance()-r.radius,center:o.getCenter(),from:i.uid,globeId:t.id}}var o=this._control;o.setViewGL(r.viewGL);var s=n.get("targetCoord"),l,u;s!=null&&(u=s[0]+90,l=s[1]),o.setFromViewControlModel(n,{baseDistance:r.radius,alpha:l,beta:u}),o.off("update"),o.on("update",function(){e.dispatchAction(a())})},_displaceVertices:function(t,e){var r=t.get("displacementQuality"),n=t.get("debug.wireframe.show"),i=t.coordinateSystem;if(!(!t.isDisplacementChanged()&&r===this._displacementQuality&&n===this._showDebugWireframe)){this._displacementQuality=r,this._showDebugWireframe=n;var a=this._sphereGeometry,o={low:100,medium:200,high:400,ultra:800}[r]||200,s=o/2;(a.widthSegments!==o||n)&&(a.widthSegments=o,a.heightSegments=s,a.build()),this._doDisplaceVertices(a,i),n&&a.generateBarycentric()}},_doDisplaceVertices:function(t,e){var r=t.attributes.position.value,n=t.attributes.texcoord0.value,i=t.__originalPosition;(!i||i.length!==r.length)&&(i=new Float32Array(r.length),i.set(r),t.__originalPosition=i);for(var a=e.displacementWidth,o=e.displacementHeight,s=e.displacementData,l=0;l<t.vertexCount;l++){var u=l*3,c=l*2,f=i[u+1],h=i[u+2],d=i[u+3],p=n[c++],v=n[c++],g=Math.round(p*(a-1)),m=Math.round(v*(o-1)),x=m*a+g,S=s?s[x]:0;r[u+1]=f+f*S,r[u+2]=h+h*S,r[u+3]=d+d*S}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,e){var r=this._earthMesh;this._sceneHelper.updateLight(t);var n=this._sceneHelper.mainLight,i=t.get("light.main.time")||new Date,a=mQ.getPosition(rl(i),0,0),o=Math.cos(a.altitude);n.position.y=-o*Math.cos(a.azimuth),n.position.x=Math.sin(a.altitude),n.position.z=o*Math.sin(a.azimuth),n.lookAt(r.getWorldPosition())},dispose:function(t,e){this.groupGL.removeAll(),this._control.dispose()}});var K1e=yi.vec3;function Nw(t){this.radius=t,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}Nw.prototype={constructor:Nw,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,e,r){this.displacementData=t,this.displacementWidth=e,this.displacementHeight=r},_getDisplacementScale:function(t,e){var r=(t+180)/360*(this.displacementWidth-1),n=(90-e)/180*(this.displacementHeight-1),i=Math.round(r)+Math.round(n)*this.displacementWidth;return this.displacementData[i]},dataToPoint:function(t,e){var r=t[0],n=t[1],i=t[2]||0,a=this.radius;this.displacementData&&(a*=1+this._getDisplacementScale(r,n)),this.altitudeAxis&&(a+=this.altitudeAxis.dataToCoord(i)),r=r*Math.PI/180,n=n*Math.PI/180;var o=Math.cos(n)*a;return e=e||[],e[0]=-o*Math.cos(r+Math.PI),e[1]=Math.sin(n)*a,e[2]=o*Math.sin(r+Math.PI),e},pointToData:function(t,e){var r=t[0],n=t[1],i=t[2],a=K1e.len(t);r/=a,n/=a,i/=a;var o=Math.asin(n),s=Math.atan2(i,-r);s<0&&(s=Math.PI*2+s);var l=o*180/Math.PI,u=s*180/Math.PI-180;return e=e||[],e[0]=u,e[1]=l,e[2]=a-this.radius,this.altitudeAxis&&(e[2]=this.altitudeAxis.coordToData(e[2])),e}};function Y1e(t,e){var r=document.createElement("canvas"),n=r.getContext("2d"),i=t.width,a=t.height;r.width=i,r.height=a,n.drawImage(t,0,0,i,a);for(var o=n.getImageData(0,0,i,a).data,s=new Float32Array(o.length/4),l=0;l<o.length/4;l++){var u=o[l*4];s[l]=u/255*e}return{data:s,width:i,height:a}}function q1e(t,e){var r=t.getBoxLayoutParams(),n=ri(r,{width:e.getWidth(),height:e.getHeight()});n.y=e.getHeight()-n.y-n.height,this.viewGL.setViewport(n.x,n.y,n.width,n.height,e.getDevicePixelRatio()),this.radius=t.get("globeRadius");var i=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,i-this.radius)}function Z1e(t,e){var r=[1/0,-1/0];if(t.eachSeries(function(i){if(i.coordinateSystem===this){var a=i.getData(),o=i.coordDimToDataDim("alt"),s=o&&o[0];if(s){var l=a.getDataExtent(s,!0);r[0]=Math.min(r[0],l[0]),r[1]=Math.max(r[1],l[1])}}},this),r&&isFinite(r[1]-r[0])){var n=aD(r,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Po("altitude",n),this.resize(this.model,e)}}var J1e={dimensions:Nw.prototype.dimensions,create:function(t,e){var r=[];return t.eachComponent("globe",function(n){n.__viewGL=n.__viewGL||new mn;var i=new Nw;i.viewGL=n.__viewGL,n.coordinateSystem=i,i.model=n,r.push(i),i.resize=q1e,i.resize(n,e),i.update=Z1e}),t.eachSeries(function(n){if(n.get("coordinateSystem")==="globe"){var i=n.getReferringComponents("globe").models[0];if(i||(i=t.getComponent("globe")),!i)throw new Error('globe "'+Lr.firstNotNull(n.get("globe3DIndex"),n.get("globe3DId"),0)+'" not found');var a=i.coordinateSystem;n.coordinateSystem=a}}),t.eachComponent("globe",function(n,i){var a=n.coordinateSystem,o=n.getDisplacementTexture(),s=n.getDisplacemenScale();if(n.isDisplacementChanged()){if(n.hasDisplacement()){var l=!0;J.loadTexture(o,e,function(u){var c=u.image,f=Y1e(c,s);n.setDisplacementData(f.data,f.width,f.height),l||e.dispatchAction({type:"globeUpdateDisplacment"})}),l=!1}else a.setDisplacementData(null,0,0);a.setDisplacementData(n.displacementData,n.displacementWidth,n.displacementHeight)}}),r}};function yQ(t){t.registerComponentModel(Rp),t.registerComponentView(X1e),t.registerCoordinateSystem("globe",J1e),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(e,r){r.eachComponent({mainType:"globe",query:e},function(n){n.setView(e)})}),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(e,r){})}var cU=["zoom","center","pitch","bearing"],AD=fr.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return cU.reduce(function(e,r){return e[r]=t.get(r),e},{})},setMapboxCameraOption:function(t){t!=null&&cU.forEach(function(e){t[e]!=null&&(this.option[e]=t[e])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});xt(AD.prototype,u0);xt(AD.prototype,c0);function Ph(t,e){if(this.id=t,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Ph.prototype.setUnpainted=function(){};Ph.prototype.resize=function(){this._mapbox.resize()};Ph.prototype.getMapbox=function(){return this._mapbox};Ph.prototype.clear=function(){};Ph.prototype.refresh=function(){this._mapbox.resize()};var _Q=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Ph.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(e){return e.preventDefault(),!1}},_Q.forEach(function(e){this._handlers[e]=function(r){var n={};for(var i in r)n[i]=r[i];n.bubbles=!1;var a=new r.constructor(r.type,n);t.dispatchEvent(a)},this.zr.dom.addEventListener(e,this._handlers[e])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};Ph.prototype.dispose=function(){_Q.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this)};const xQ=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;J.Shader.import(xQ);const Q1e=_n.extend({type:"mapbox3D",__ecgl__:!0,init:function(t,e){var r=e.getZr();this._zrLayer=new Ph("mapbox3D",r),r.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new J.Node,this._sceneHelper=new wh(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var n=this._zrLayer.getMapbox(),i=this._dispatchInteractAction.bind(this,e,n);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(a){n.on(a,i)}),this._groundMesh=new J.Mesh({geometry:new J.PlaneGeometry,material:new J.Material({shader:new J.Shader({vertex:J.Shader.source("ecgl.displayShadow.vertex"),fragment:J.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,e,r){var n=this._zrLayer.getMapbox(),i=t.get("style"),a=JSON.stringify(i);a!==this._oldStyleStr&&i&&n.setStyle(i),this._oldStyleStr=a,n.setCenter(t.get("center")),n.setZoom(t.get("zoom")),n.setPitch(t.get("pitch")),n.setBearing(t.get("bearing")),t.setMapbox(n);var o=t.coordinateSystem;o.viewGL.scene.add(this._lightRoot),o.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(o.viewGL.scene),this._sceneHelper.updateLight(t),o.viewGL.setPostEffect(t.getModel("postEffect"),r),o.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,e,r,n){var i=n.renderer;this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r),t.coordinateSystem.viewGL.scene.traverse(function(a){a.material&&(a.material.define("fragment","NORMAL_UP_AXIS",2),a.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,e,r,n){t.coordinateSystem.setCameraOption(n),this._updateGroundMesh(),r.getZr().refresh()},_dispatchInteractAction:function(t,e,r){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:e.getPitch(),zoom:e.getZoom(),center:e.getCenter().toArray(),bearing:e.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,e=t.dataToPoint(t.center);this._groundMesh.position.set(e[0],e[1],-.001);var r=new J.Plane(new J.Vector3(0,0,1),0),n=t.viewGL.camera.castRay(new J.Vector2(-1,-1)),i=t.viewGL.camera.castRay(new J.Vector2(1,1)),a=n.intersectPlane(r),o=i.intersectPlane(r),s=a.dist(o)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(t,e){this._zrLayer&&this._zrLayer.dispose(),e.getZr().painter.delLayer(-1e3)}});var Af=yi.mat4,Ly=512,sM=.6435011087932844,Vo=Math.PI,$v=1/10;function mm(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}mm.prototype={constructor:mm,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,Ly)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var t=.5/Math.tan(sM/2)*this.height*$v,e=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,r=sM/2,n=Math.PI/2+e,i=Math.sin(r)*t/Math.sin(Math.PI-n-r),a=Math.cos(Math.PI/2-e)*i+t,o=a*1.1;this.pitch>50&&(o=1e3);var s=[];Af.perspective(s,sM,this.width/this.height,1,o),this.viewGL.camera.projectionMatrix.setArray(s),this.viewGL.camera.decomposeProjectionMatrix();var s=Af.identity([]),l=this.dataToPoint(this.center);Af.scale(s,s,[1,-1,1]),Af.translate(s,s,[0,0,-t]),Af.rotateX(s,s,e),Af.rotateZ(s,s,-this.bearing/180*Math.PI),Af.translate(s,s,[-l[0]*this.getScale()*$v,-l[1]*this.getScale()*$v,0]),this.viewGL.camera.viewMatrix.array=s;var u=[];Af.invert(u,s),this.viewGL.camera.worldTransform.array=u,this.viewGL.camera.decomposeWorldTransform();var c=Ly*this.getScale(),f;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var h=this.altitudeExtent[1]-this.altitudeExtent[0];f=this.boxHeight/h*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else f=c/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*$v;this.viewGL.rootNode.scale.set(this.getScale()*$v,this.getScale()*$v,f)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,e){return this.projectOnTileWithScale(t,this.getScale()*Ly,e)},projectOnTileWithScale:function(t,e,r){var n=t[0],i=t[1],a=n*Vo/180,o=i*Vo/180,s=e*(a+Vo)/(2*Vo),l=e*(Vo-Math.log(Math.tan(Vo/4+o*.5)))/(2*Vo);return r=r||[],r[0]=s,r[1]=l,r},unprojectFromTile:function(t,e){return this.unprojectOnTileWithScale(t,this.getScale()*Ly,e)},unprojectOnTileWithScale:function(t,e,r){var n=t[0],i=t[1],a=n/e*(2*Vo)-Vo,o=2*(Math.atan(Math.exp(Vo-i/e*(2*Vo)))-Vo/4);return r=r||[],r[0]=a*180/Vo,r[1]=o*180/Vo,r},dataToPoint:function(t,e){return e=this.projectOnTileWithScale(t,Ly,e),e[0]-=this._origin[0],e[1]-=this._origin[1],e[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(e[2]=t[2],this.altitudeExtent&&(e[2]-=this.altitudeExtent[0])),e}};function E_(){mm.apply(this,arguments)}E_.prototype=new mm;E_.prototype.constructor=E_;E_.prototype.type="mapbox3D";function SQ(t,e,r){function n(a,o){var s=o.getWidth(),l=o.getHeight(),u=o.getDevicePixelRatio();this.viewGL.setViewport(0,0,s,l,u),this.width=s,this.height=l,this.altitudeScale=a.get("altitudeScale"),this.boxHeight=a.get("boxHeight")}function i(a,o){if(this.model.get("boxHeight")!=="auto"){var s=[1/0,-1/0];a.eachSeries(function(l){if(l.coordinateSystem===this){var u=l.getData(),c=l.coordDimToDataDim("alt")[0];if(c){var f=u.getDataExtent(c,!0);s[0]=Math.min(s[0],f[0]),s[1]=Math.max(s[1],f[1])}}},this),s&&isFinite(s[1]-s[0])&&(this.altitudeExtent=s)}}return{dimensions:e.prototype.dimensions,create:function(a,o){var s=[];return a.eachComponent(t,function(l){var u=l.__viewGL;u||(u=l.__viewGL=new mn,u.setRootNode(new J.Node));var c=new e;c.viewGL=l.__viewGL,c.resize=n,c.resize(l,o),s.push(c),l.coordinateSystem=c,c.model=l,c.update=i}),a.eachSeries(function(l){if(l.get("coordinateSystem")===t){var u=l.getReferringComponents(t).models[0];if(u||(u=a.getComponent(t)),!u)throw new Error(t+' "'+Lr.firstNotNull(l.get(t+"Index"),l.get(t+"Id"),0)+'" not found');l.coordinateSystem=u.coordinateSystem}}),r&&r(s,a,o),s}}}var e_e=SQ("mapbox3D",E_,function(t){t.forEach(function(e){e.setCameraOption(e.model.getMapboxCameraOption())})});function t_e(t){t.registerComponentModel(AD),t.registerComponentView(Q1e),t.registerCoordinateSystem("mapbox3D",e_e),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(e,r){r.eachComponent({mainType:"mapbox3D",query:e},function(n){n.setMapboxCameraOption(e)})})}var fU=["zoom","center","pitch","bearing"],MD=fr.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return fU.reduce(function(e,r){return e[r]=t.get(r),e},{})},setMaptalksCameraOption:function(t){t!=null&&fU.forEach(function(e){t[e]!=null&&(this.option[e]=t[e])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});xt(MD.prototype,u0);xt(MD.prototype,c0);function Lh(t,e,r,n){if(this.id=t,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:r,zoom:n,doubleClickZoom:!1,fog:!1}),this._initEvents()}Lh.prototype.setUnpainted=function(){};Lh.prototype.resize=function(){this._maptalks.checkSize()};Lh.prototype.getMaptalks=function(){return this._maptalks};Lh.prototype.clear=function(){};Lh.prototype.refresh=function(){this._maptalks.checkSize()};var bQ=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Lh.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(e){return e.preventDefault(),!1}},bQ.forEach(function(e){this._handlers[e]=function(r){var n={};for(var i in r)n[i]=r[i];n.bubbles=!1;var a=new r.constructor(r.type,n);e==="mousewheel"||e==="DOMMouseScroll"?t.dispatchEvent(a):t.firstElementChild.dispatchEvent(a)},this.zr.dom.addEventListener(e,this._handlers[e])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};Lh.prototype.dispose=function(){bQ.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this),this._maptalks.remove()};J.Shader.import(xQ);const r_e=_n.extend({type:"maptalks3D",__ecgl__:!0,init:function(t,e){this._groundMesh=new J.Mesh({geometry:new J.PlaneGeometry,material:new J.Material({shader:new J.Shader({vertex:J.Shader.source("ecgl.displayShadow.vertex"),fragment:J.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,e){var r=e.getZr();this._zrLayer=new Lh("maptalks3D",r,t.get("center"),t.get("zoom")),r.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new J.Node,this._sceneHelper=new wh(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var n=this._zrLayer.getMaptalks(),i=this._dispatchInteractAction.bind(this,e,n);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(a){n.on(a,i)})},render:function(t,e,r){this._zrLayer||this._initMaptalksLayer(t,r);var n=this._zrLayer.getMaptalks(),i=t.get("urlTemplate"),a=n.getBaseLayer();i!==this._oldUrlTemplate&&(a?a.setOptions({urlTemplate:i,attribution:t.get("attribution")}):(a=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:i,subdomains:["a","b","c"],attribution:t.get("attribution")}),n.setBaseLayer(a))),this._oldUrlTemplate=i,n.setCenter(t.get("center")),n.setZoom(t.get("zoom"),{animation:!1}),n.setPitch(t.get("pitch")),n.setBearing(t.get("bearing")),t.setMaptalks(n);var o=t.coordinateSystem;o.viewGL.scene.add(this._lightRoot),o.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(o.viewGL.scene),this._sceneHelper.updateLight(t),o.viewGL.setPostEffect(t.getModel("postEffect"),r),o.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,e,r,n){var i=n.renderer;this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r),t.coordinateSystem.viewGL.scene.traverse(function(a){a.material&&(a.material.define("fragment","NORMAL_UP_AXIS",2),a.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,e,r,n){t.coordinateSystem.setCameraOption(n),this._updateGroundMesh(),r.getZr().refresh()},_dispatchInteractAction:function(t,e,r){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:e.getPitch(),zoom:i_e(e.getResolution())+1,center:e.getCenter().toArray(),bearing:e.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,e=t.dataToPoint(t.center);this._groundMesh.position.set(e[0],e[1],-.001);var r=new J.Plane(new J.Vector3(0,0,1),0),n=t.viewGL.camera.castRay(new J.Vector2(-1,-1)),i=t.viewGL.camera.castRay(new J.Vector2(1,1)),a=n.intersectPlane(r),o=i.intersectPlane(r),s=a.dist(o)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(t,e){this._zrLayer&&this._zrLayer.dispose(),e.getZr().painter.delLayer(-1e3)}}),n_e=2*6378137*Math.PI/(256*Math.pow(2,20));function i_e(t){return 19-Math.log(t/n_e)/Math.LN2}function A_(){mm.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}A_.prototype=new mm;A_.prototype.constructor=A_;A_.prototype.type="maptalks3D";var a_e=SQ("maptalks3D",A_,function(t){t.forEach(function(e){e.setCameraOption(e.model.getMaptalksCameraOption())})});function o_e(t){t.registerComponentModel(MD),t.registerComponentView(r_e),t.registerCoordinateSystem("maptalks3D",a_e),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(e,r){r.eachComponent({mainType:"maptalks3D",query:e},function(n){n.setMaptalksCameraOption(e)})})}var s_e=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(fr),lR=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Ci).models[0]},e.type="cartesian2dAxis",e}(fr);mi(lR,l0);var wQ={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},l_e=xt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},wQ),RD=xt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},wQ),u_e=xt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},RD),c_e=At({logBase:10},RD);const TQ={category:l_e,value:RD,time:u_e,log:c_e};var f_e={value:1,category:1,time:1,log:1};function ym(t,e,r,n){G(f_e,function(i,a){var o=xt(xt({},TQ[a],!0),n,!0),s=function(l){he(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=c_(this),d=h?e0(c):{},p=f.getTheme();xt(c,p.get(a+"Axis")),xt(c,this.getDefaultOption()),c.type=hU(c),h&&bh(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=_w.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+a,u.defaultOption=o,u}(r);t.registerComponentModel(s)}),t.registerSubTypeDefaulter(e+"Axis",hU)}function hU(t){return t.type||(t.data?"category":"value")}var uR=["x","y"];function dU(t){return t.type==="interval"||t.type==="time"}var h_e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=uR,r}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!dU(r)||!dU(n))){var i=r.getExtent(),a=n.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,f=(s[1]-o[1])/u,h=o[0]-i[0]*c,d=o[1]-a[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=Up([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},e.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},e.prototype.containZone=function(r,n){var i=this.dataToPoint(r),a=this.dataToPoint(n),o=this.getArea(),s=new sr(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(r,n,i){i=i||[];var a=r[0],o=r[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return qi(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,n)),i[1]=l.toGlobalCoord(l.dataToCoord(o,n)),i},e.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(r[0]),u=a.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},e.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return qi(i,r,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(r[0]),n),i[1]=o.coordToData(o.toLocalCoord(r[1]),n),i},e.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},e.prototype.getArea=function(r){r=r||0;var n=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(n[0],n[1])-r,o=Math.min(i[0],i[1])-r,s=Math.max(n[0],n[1])-a+r,l=Math.max(i[0],i[1])-o+r;return new sr(a,o,s,l)},e}(SD),d_e=function(t){he(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},e.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},e.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},e.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},e}(Po);function cR(t,e,r){r=r||{};var n=t.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=g[s],a.labelOffset=o?p[h[s]]-p[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),ma(r.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-m:m,a.z2=1,a}function pU(t){return t.get("coordinateSystem")==="cartesian2d"}function vU(t){var e={xAxisModel:null,yAxisModel:null};return G(e,function(r,n){var i=n.replace(/Model$/,""),a=t.getReferringComponents(i,Ci).models[0];e[n]=a}),e}var lM=Math.log;function CQ(t,e,r){var n=Uc.prototype,i=n.getTicks.call(r),a=n.getTicks.call(r,!0),o=i.length-1,s=n.getInterval.call(r),l=HZ(t,e),u=l.extent,c=l.fixMin,f=l.fixMax;if(t.type==="log"){var h=lM(t.base);u=[lM(u[0])/h,lM(u[1])/h]}t.setExtent(u[0],u[1]),t.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var d=n.getExtent.call(t);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(t),v=u[0],g=u[1];if(c&&f)p=(g-v)/o;else if(c)for(g=u[0]+p*o;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=MA(p),g=u[0]+p*o;else if(f)for(v=u[1]-p*o;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=MA(p),v=u[1]-p*o;else{var m=t.getTicks().length-1;m>o&&(p=MA(p));var x=p*o;g=Math.ceil(u[1]/p)*p,v=kn(g-x),v<0&&u[0]>=0?(v=0,g=kn(x)):g>0&&u[1]<=0&&(g=0,v=-kn(x))}var S=(i[0].value-a[0].value)/s,b=(i[o].value-a[o].value)/s;n.setExtent.call(t,v+p*S,g+p*b),n.setInterval.call(t,p),(S||b)&&n.setNiceExtent.call(t,v+p,g-p)}var p_e=function(){function t(e,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=uR,this._initCartesian(e,r,n),this.model=e}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(e,r){var n=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Er(o),u=l.length;if(u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=o[h],p=d.model,v=d.scale;$6(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(Ap(v,p),$6(v)&&(s=d))}c.length&&(s||(s=c.pop(),Ap(s.scale,s.model)),G(c,function(g){CQ(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var a={};G(n.x,function(o){gU(n,"y",o,a)}),G(n.y,function(o){gU(n,"x",o,a)}),this.resize(this.model,r)},t.prototype.resize=function(e,r,n){var i=e.getBoxLayoutParams(),a=!n&&e.get("containLabel"),o=ri(i,{width:r.getWidth(),height:r.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(G(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=vge(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);o[f]-=c[f]+h,u.position==="top"?o.y+=c.height+h:u.position==="left"&&(o.x+=c.width+h)}}}),l()),G(this._coordsList,function(u){u.calcAffineTransform()});function l(){G(s,function(u){var c=u.isHorizontal(),f=c?[0,o.width]:[0,o.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),v_e(u,c?o.x:o.y)})}},t.prototype.getAxis=function(e,r){var n=this._axesMap[e];if(n!=null)return n[r||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(e,r){if(e!=null&&r!=null){var n="x"+e+"y"+r;return this._coordsMap[n]}Nt(e)&&(r=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===r)return a[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(e,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(e,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(e){var r=e.seriesModel,n=e.xAxisModel||r&&r.getReferringComponents("xAxis",Ci).models[0],i=e.yAxisModel||r&&r.getReferringComponents("yAxis",Ci).models[0],a=e.gridModel,o=this._coordsList,s,l;if(r)s=r.coordinateSystem,hr(o,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},t.prototype.containPoint=function(e){var r=this._coordsList[0];if(r)return r.containPoint(e)},t.prototype._initCartesian=function(e,r,n){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,G(s.x,function(c,f){G(s.y,function(h,d){var p="x"+f+"y"+d,v=new h_e(p);v.master=i,v.model=e,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(uM(f,e)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var p=new d_e(c,y2(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=a,p.index=h,a._axesList.push(p),s[c][h]=p,l[c]++}}}},t.prototype._updateScale=function(e,r){G(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(pU(i)){var a=vU(i),o=a.xAxisModel,s=a.yAxisModel;if(!uM(o,r)||!uM(s,r))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,a){G(xw(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},t.prototype.getTooltipAxes=function(e){var r=[],n=[];return G(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);hr(r,a)<0&&r.push(a),hr(n,o)<0&&n.push(o)}),{baseAxes:r,otherAxes:n}},t.create=function(e,r){var n=[];return e.eachComponent("grid",function(i,a){var o=new t(i,e,r);o.name="grid_"+a,o.resize(i,r,!0),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if(pU(i)){var a=vU(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),n},t.dimensions=uR,t}();function uM(t,e){return t.getCoordSysModel()===e}function gU(t,e,r,n){r.getAxesOnZeroOf=function(){return a?[a]:[]};var i=t[e],a,o=r.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)mU(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&mU(i[u])&&!n[c(i[u])]){a=i[u];break}a&&(n[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function mU(t){return t&&t.type!=="category"&&t.type!=="time"&&pge(t)}function v_e(t,e){var r=t.getExtent(),n=r[0]+r[1];t.toGlobalCoord=t.dim==="x"?function(i){return i+e}:function(i){return n-i+e},t.toLocalCoord=t.dim==="x"?function(i){return i-e}:function(i){return n-i+e}}var eh=Math.PI,yo=function(){function t(e,r){this.group=new Vt,this.opt=r,this.axisModel=e,At(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Vt({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(e){return!!yU[e]},t.prototype.add=function(e){yU[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,r,n){var i=rY(r-e),a,o;return i_(i)?(o=n>0?"top":"bottom",a="center"):i_(i-eh)?(o=n>0?"bottom":"top",a="center"):(o="middle",i>0&&i<eh?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},t.makeAxisEventDataBase=function(e){var r={componentType:e.mainType,componentIndex:e.componentIndex};return r[e.mainType+"Index"]=e.componentIndex,r},t.isLabelSilent=function(e){var r=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||r&&r.show)},t}(),yU={axisLine:function(t,e,r,n){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=n.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(qi(s,s,o),qi(l,l,o));var c=Ae({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new ji({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});om(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);ft(h)&&(h=[h,h]),(ft(d)||Ur(d))&&(d=[d,d]);var p=Hp(e.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];G([{rotate:t.rotation+Math.PI/2,offset:p[0],r:0},{rotate:t.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,x){if(h[x]!=="none"&&h[x]!=null){var S=vi(h[x],-v/2,-g/2,v,g,c.stroke,!0),b=m.r+m.offset,T=u?l:s;S.attr({rotation:m.rotate,x:T[0]+b*Math.cos(t.rotation),y:T[1]-b*Math.sin(t.rotation),silent:!0,z2:11}),r.add(S)}})}}},axisTickLabel:function(t,e,r,n){var i=y_e(r,n,e,t),a=x_e(r,n,e,t);if(m_e(e,a,i),__e(r,n,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=rJ(Oe(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));aJ(o)}},axisName:function(t,e,r,n){var i=ma(t.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,xU(a)?t.labelOffset+o*l:0],h,d=e.get("nameRotate");d!=null&&(d=d*eh/180);var p;xU(a)?h=yo.innerTextLayout(t.rotation,d!=null?d:t.rotation,o):(h=g_e(t.rotation,a,d||0,u),p=t.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=e.get("nameTruncate",!0)||{},m=g.ellipsis,x=ma(t.nameTruncateMaxWidth,g.maxWidth,p),S=new Ar({x:f[0],y:f[1],rotation:h.rotation,silent:yo.isLabelSilent(e),style:dn(s,{text:i,font:v,overflow:"truncate",width:x,ellipsis:m,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(qm({el:S,componentModel:e,itemName:i}),S.__fullText=i,S.anid="name",e.get("triggerEvent")){var b=yo.makeAxisEventDataBase(e);b.targetType="axisName",b.name=i,Ht(S).eventData=b}n.add(S),S.updateTransform(),r.add(S),S.decomposeTransform()}}};function g_e(t,e,r,n){var i=rY(r-t),a,o,s=n[0]>n[1],l=e==="start"&&!s||e!=="start"&&s;return i_(i-eh/2)?(o=l?"bottom":"top",a="center"):i_(i-eh*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<eh*1.5&&i>eh/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function m_e(t,e,r){if(!GZ(t.axis)){var n=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],r=r||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Rs(a),Rs(u)):_U(a,o)&&(n?(Rs(o),Rs(c)):(Rs(a),Rs(u))),i===!1?(Rs(s),Rs(f)):_U(l,s)&&(i?(Rs(l),Rs(h)):(Rs(s),Rs(f)))}}function Rs(t){t&&(t.ignore=!0)}function _U(t,e){var r=t&&t.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(!(!r||!n)){var i=MT([]);return zp(i,i,-t.rotation),r.applyTransform(Ec([],i,t.getLocalTransform())),n.applyTransform(Ec([],i,e.getLocalTransform())),r.intersect(n)}}function xU(t){return t==="middle"||t==="center"}function EQ(t,e,r,n,i){for(var a=[],o=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=r,e&&(qi(o,o,e),qi(s,s,e));var c=new ji({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});om(c.shape,c.style.lineWidth),c.anid=i+"_"+t[l].tickValue,a.push(c)}return a}function y_e(t,e,r,n){var i=r.axis,a=r.getModel("axisTick"),o=a.get("show");if(o==="auto"&&n.handleAutoShown&&(o=n.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=n.tickDirection*a.get("length"),u=i.getTicksCoords(),c=EQ(u,e.transform,l,At(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function __e(t,e,r,n){var i=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=n*a.get("length"),u=At(s.getLineStyle(),At(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var f=EQ(o[c],e.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)t.add(f[h])}}function x_e(t,e,r,n){var i=r.axis,a=ma(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=r.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(ma(n.labelRotate,o.get("rotate"))||0)*eh/180,c=yo.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=yo.isLabelSilent(r),p=r.get("triggerEvent");return G(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,x=v.formattedLabel,S=v.rawLabel,b=o;if(f&&f[m]){var T=f[m];Nt(T)&&T.textStyle&&(b=new Br(T.textStyle,o,r.ecModel))}var w=b.getTextColor()||r.get(["axisLine","lineStyle","color"]),E=i.dataToCoord(m),M=b.getShallow("align",!0)||c.textAlign,A=Jt(b.getShallow("alignMinLabel",!0),M),R=Jt(b.getShallow("alignMaxLabel",!0),M),L=b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,I=Jt(b.getShallow("verticalAlignMinLabel",!0),L),N=Jt(b.getShallow("verticalAlignMaxLabel",!0),L),k=new Ar({x:E,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:dn(b,{text:x,align:g===0?A:g===l.length-1?R:M,verticalAlign:g===0?I:g===l.length-1?N:L,fill:Lt(w)?w(i.type==="category"?S:i.type==="value"?m+"":m,g):w})});if(k.anid="label_"+m,p){var z=yo.makeAxisEventDataBase(r);z.targetType="axisLabel",z.value=S,z.tickIndex=g,i.type==="category"&&(z.dataIndex=m),Ht(k).eventData=z}e.add(k),k.updateTransform(),h.push(k),t.add(k),k.decomposeTransform()}),h}}function S_e(t,e){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return b_e(r,t,e),r.seriesInvolved&&T_e(r,t),r}function b_e(t,e,r){var n=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];G(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=M_(s.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(G(s.getAxes(),Zt(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&G(p.baseAxes,Zt(v,d?"cross":!0,h)),d&&G(p.otherAxes,Zt(v,"cross",!1))}function v(g,m,x){var S=x.model.getModel("axisPointer",i),b=S.get("show");if(!(!b||b==="auto"&&!g&&!fR(S))){m==null&&(m=S.get("triggerTooltip")),S=g?w_e(x,f,i,e,g,m):S;var T=S.get("snap"),w=S.get("triggerEmphasis"),E=M_(x.model),M=m||T||x.type==="category",A=t.axesInfo[E]={key:E,axis:x,coordSys:s,axisPointerModel:S,triggerTooltip:m,triggerEmphasis:w,involveSeries:M,snap:T,useHandle:fR(S),seriesModels:[],linkGroup:null};u[E]=A,t.seriesInvolved=t.seriesInvolved||M;var R=C_e(a,x);if(R!=null){var L=o[R]||(o[R]={axesInfo:{}});L.axesInfo[E]=A,L.mapper=a[R].mapper,A.linkGroup=L}}}})}function w_e(t,e,r,n,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};G(s,function(h){l[h]=Ft(o.get(h))}),l.snap=t.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=o.get(["label","show"]);if(u.show=c!=null?c:!0,!a){var f=l.lineStyle=o.get("crossStyle");f&&At(u,f.textStyle)}}return t.model.getModel("axisPointer",new Br(l,r,n))}function T_e(t,e){e.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||G(t.coordSysAxesInfo[M_(n.model)],function(o){var s=o.axis;n.getAxis(s.dim)===s&&(o.seriesModels.push(r),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=r.getData().count())})})}function C_e(t,e){for(var r=e.model,n=e.dim,i=0;i<t.length;i++){var a=t[i]||{};if(cM(a[n+"AxisId"],r.id)||cM(a[n+"AxisIndex"],r.componentIndex)||cM(a[n+"AxisName"],r.name))return i}}function cM(t,e){return t==="all"||De(t)&&hr(t,e)>=0||t===e}function E_e(t){var e=PD(t);if(e){var r=e.axisPointerModel,n=e.axis.scale,i=r.option,a=r.get("status"),o=r.get("value");o!=null&&(o=n.parse(o));var s=fR(r);a==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function PD(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[M_(t)]}function A_e(t){var e=PD(t);return e&&e.axisPointerModel}function fR(t){return!!t.get(["handle","show"])}function M_(t){return t.type+"||"+t.id}var SU={},jp=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i,a){this.axisPointerClass&&E_e(r),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},e.prototype.updateAxisPointer=function(r,n,i,a){this._doUpdateAxisPointerClass(r,i,!1)},e.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},e.prototype.dispose=function(r,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(r,n,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=A_e(r);o?(this._axisPointer||(this._axisPointer=new a)).render(r,o,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},e.registerAxisPointerClass=function(r,n){SU[r]=n},e.getAxisPointerClass=function(r){return r&&SU[r]},e.type="axis",e}(_n),hR=kr();function AQ(t,e,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,f=hR(t).splitAreaColors,h=Tt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=o.getAreaStyle();s=De(s)?s:[s];for(var p=1;p<u.length;p++){var x=i.toGlobalCoord(u[p].coord),S=void 0,b=void 0,T=void 0,w=void 0;i.isHorizontal()?(S=g,b=l.y,T=x-S,w=l.height,g=S+T):(S=l.x,b=g,T=l.width,w=x-b,g=b+w);var E=u[p-1].tickValue;E!=null&&h.set(E,d),e.add(new Mr({anid:E!=null?"area_"+E:null,shape:{x:S,y:b,width:T,height:w},style:At({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}hR(t).splitAreaColors=h}}}function MQ(t){hR(t).splitAreaColors=null}var M_e=["axisLine","axisTickLabel","axisName"],R_e=["splitArea","splitLine","minorSplitLine"],RQ=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.axisPointerClass="CartesianAxisPointer",r}return e.prototype.render=function(r,n,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Vt,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=cR(s,r),u=new yo(r,Ae({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if($6(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));G(M_e,u.add,u),this._axisGroup.add(u.getGroup()),G(R_e,function(f){r.get([f,"show"])&&P_e[f](this,this._axisGroup,r,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||p2(o,this._axisGroup,r),t.prototype.render.call(this,r,n,i,a)}},e.prototype.remove=function(){MQ(this)},e.type="cartesianAxis",e}(jp),P_e={splitLine:function(t,e,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=De(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:a}),h=[],d=[],p=o.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,x=f[v].tickValue,S=new ji({anid:x!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:At({stroke:s[m]},p),silent:!0});om(S.shape,p.lineWidth),e.add(S)}}},minorSplitLine:function(t,e,r,n){var i=r.axis,a=r.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var c=[],f=[],h=o.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new ji({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});om(g.shape,h.lineWidth),e.add(g)}},splitArea:function(t,e,r,n){AQ(t,e,r,n)}},PQ=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="xAxis",e}(RQ),L_e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=PQ.type,r}return e.type="yAxis",e}(RQ),D_e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="grid",r}return e.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Mr({shape:r.coordinateSystem.getRect(),style:At({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(_n),bU={offset:0};function LQ(t){t.registerComponentView(D_e),t.registerComponentModel(s_e),t.registerCoordinateSystem("cartesian2d",p_e),ym(t,"x",lR,bU),ym(t,"y",lR,bU),t.registerComponentView(PQ),t.registerComponentView(L_e),t.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var Hd=kr(),wU=Ft,fM=pt,LD=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,r,n,i){var a=r.get("value"),o=r.get("status");if(this._axisModel=e,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,e,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,r);if(!s)s=this._group=new Vt,this.createPointerEl(s,u,e,r),this.createLabelEl(s,u,e,r),n.getZr().add(s);else{var h=Zt(TU,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}EU(s,r,!0),this._renderHandle(a)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,r){var n=r.get("animation"),i=e.axis,a=i.type==="category",o=r.get("snap");if(!o&&!a)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=PD(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},t.prototype.makeElOption=function(e,r,n,i,a){},t.prototype.createPointerEl=function(e,r,n,i){var a=r.pointer;if(a){var o=Hd(e).pointerEl=new Vp[a.type](wU(r.pointer));e.add(o)}},t.prototype.createLabelEl=function(e,r,n,i){if(r.label){var a=Hd(e).labelEl=new Ar(wU(r.label));e.add(a),CU(a,i)}},t.prototype.updatePointerEl=function(e,r,n){var i=Hd(e).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},t.prototype.updateLabelEl=function(e,r,n,i){var a=Hd(e).labelEl;a&&(a.setStyle(r.label.style),n(a,{x:r.label.x,y:r.label.y}),CU(a,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=r.getModel("handle"),o=r.get("status");if(!a.get("show")||!o||o==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=v2(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Nc(u.event)},onmousedown:fM(this._onHandleDragMove,this,0,0),drift:fM(this._onHandleDragMove,this),ondragend:fM(this._onHandleDragEnd,this)}),n.add(i)),EU(i,r,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");De(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,i0(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},t.prototype._moveHandleToValue=function(e,r){TU(this._axisPointerModel,!r&&this._moveAnimation,this._handle,hM(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,r){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(hM(n),[e,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(hM(i)),Hd(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var r=e.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),h_(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,r,n){return n=n||0,{x:e[n],y:e[1-n],width:r[n],height:r[1-n]}},t}();function TU(t,e,r,n){DQ(Hd(r).lastProp,n)||(Hd(r).lastProp=n,e?Xr(r,n,t):(r.stopAnimation(),r.attr(n)))}function DQ(t,e){if(Nt(t)&&Nt(e)){var r=!0;return G(e,function(n,i){r=r&&DQ(t[i],n)}),!!r}else return t===e}function CU(t,e){t[e.get(["label","show"])?"show":"hide"]()}function hM(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function EU(t,e,r){var n=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=r)})}function DD(t){var e=t.get("type"),r=t.getModel(e+"Style"),n;return e==="line"?(n=r.getLineStyle(),n.fill=null):e==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function IQ(t,e,r,n,i){var a=r.get("value"),o=NQ(a,e.axis,e.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=Qm(s.get("padding")||0),u=s.getFont(),c=u2(o,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),I_e(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:dn(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function I_e(t,e,r,n){var i=n.getWidth(),a=n.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+r,a)-r,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function NQ(t,e,r,n,i){t=e.scale.parse(t);var a=e.scale.getLabel({value:t},{precision:i.precision}),o=i.formatter;if(o){var s={value:rD(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};G(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),ft(o)?a=o.replace("{value}",a):Lt(o)&&(a=o(s))}return a}function ID(t,e,r){var n=Xo();return zp(n,n,r.rotation),Du(n,n,r.position),Fl([t.dataToCoord(e),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function OQ(t,e,r,n,i,a){var o=yo.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),IQ(e,n,i,a,{position:ID(n.axis,t,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function ND(t,e,r){return r=r||0,{x1:t[r],y1:t[1-r],x2:e[r],y2:e[1-r]}}function kQ(t,e,r){return r=r||0,{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}}function AU(t,e,r,n,i,a){return{cx:t,cy:e,r0:r,r:n,startAngle:i,endAngle:a,clockwise:!0}}var N_e=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(r,n,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),c=MU(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=DD(a),d=O_e[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=cR(l.model,i);OQ(n,r,p,i,a,o)},e.prototype.getHandleTransform=function(r,n,i){var a=cR(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=ID(n.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(r,n,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=MU(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},e}(LD);function MU(t,e){var r={};return r[e.dim+"AxisIndex"]=e.index,t.getCartesian(r)}var O_e={line:function(t,e,r){var n=ND([e,r[0]],[e,r[1]],RU(t));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(t,e,r){var n=Math.max(1,t.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:kQ([e-n/2,r[0]],[n,i],RU(t))}}};function RU(t){return t.dim==="x"?0:1}var k_e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(fr),xc=kr(),F_e=G;function FQ(t,e,r){if(!br.node){var n=e.getZr();xc(n).records||(xc(n).records={}),B_e(n,e);var i=xc(n).records[t]||(xc(n).records[t]={});i.handler=r}}function B_e(t,e){if(xc(t).initialized)return;xc(t).initialized=!0,r("click",Zt(PU,"click")),r("mousemove",Zt(PU,"mousemove")),r("globalout",U_e);function r(n,i){t.on(n,function(a){var o=V_e(e);F_e(xc(t).records,function(s){s&&i(s,a,o.dispatchAction)}),z_e(o.pendings,e)})}}function z_e(t,e){var r=t.showTip.length,n=t.hideTip.length,i;r?i=t.showTip[r-1]:n&&(i=t.hideTip[n-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function U_e(t,e,r){t.handler("leave",null,r)}function PU(t,e,r,n){e.handler(t,r,n)}function V_e(t){var e={showTip:[],hideTip:[]},r=function(n){var i=e[n.type];i?i.push(n):(n.dispatchAction=r,t.dispatchAction(n))};return{dispatchAction:r,pendings:e}}function dR(t,e){if(!br.node){var r=e.getZr(),n=(xc(r).records||{})[t];n&&(xc(r).records[t]=null)}}var H_e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=n.getComponent("tooltip"),o=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";FQ("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(r,n){dR("axisPointer",n)},e.prototype.dispose=function(r,n){dR("axisPointer",n)},e.type="axisPointer",e}(_n);function BQ(t,e){var r=[],n=t.seriesIndex,i;if(n==null||!(i=e.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),o=wp(a,t);if(o==null||o<0||De(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(t.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=a.mapDimension(h),v=[];v[d]=a.get(p,o),v[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(a.getValues(Oe(l.dimensions,function(m){return a.mapDimension(m)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var LU=kr();function G_e(t,e,r){var n=t.currTrigger,i=[t.x,t.y],a=t,o=t.dispatchAction||pt(r.dispatchAction,r),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){w3(i)&&(i=BQ({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=w3(i),u=a.axesInfo,c=s.axesInfo,f=n==="leave"||w3(i),h={},d={},p={list:[],map:{}},v={showPointer:Zt($_e,d),showTooltip:Zt(j_e,p)};G(s.coordSysMap,function(m,x){var S=l||m.containPoint(i);G(s.coordSysAxesInfo[x],function(b,T){var w=b.axis,E=q_e(u,b);if(!f&&S&&(!u||E)){var M=E&&E.value;M==null&&!l&&(M=w.pointToData(i)),M!=null&&DU(b,M,v,!1,h)}})});var g={};return G(c,function(m,x){var S=m.linkGroup;S&&!d[x]&&G(S.axesInfo,function(b,T){var w=d[T];if(b!==m&&w){var E=w.value;S.mapper&&(E=m.axis.scale.parse(S.mapper(E,IU(b),IU(m)))),g[m.key]=E}})}),G(g,function(m,x){DU(c[x],m,v,!0,h)}),X_e(d,c,h),K_e(p,i,t,o),Y_e(c,o,r),h}}function DU(t,e,r,n,i){var a=t.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!t.involveSeries){r.showPointer(t,e);return}var o=W_e(e,t),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&Ae(i,s[0]),!n&&t.snap&&a.containData(l)&&l!=null&&(e=l),r.showPointer(t,e,s),r.showTooltip(t,o,l)}}function W_e(t,e){var r=e.axis,n=r.dim,i=t,a=[],o=Number.MAX_VALUE,s=-1;return G(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,t,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],t,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=t-f,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,i=f,a.length=0),G(h,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:i}}function $_e(t,e,r,n){t[e.key]={value:r,payloadBatch:n}}function j_e(t,e,r,n){var i=r.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=M_(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function X_e(t,e,r){var n=r.axesInfo=[];G(e,function(i,a){var o=i.axisPointerModel.option,s=t[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function K_e(t,e,r,n){if(w3(e)||!t.list.length){n({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function Y_e(t,e,r){var n=r.getZr(),i="axisPointerLastHighlights",a=LU(n)[i]||{},o=LU(n)[i]={};G(t,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&u.triggerEmphasis&&G(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;o[d]=h})});var s=[],l=[];G(a,function(u,c){!o[c]&&l.push(u)}),G(o,function(u,c){!a[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function q_e(t,e){for(var r=0;r<(t||[]).length;r++){var n=t[r];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}function IU(t){var e=t.axis.model,r={},n=r.axisDim=t.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=e.componentIndex,r.axisName=r[n+"AxisName"]=e.name,r.axisId=r[n+"AxisId"]=e.id,r}function w3(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function w2(t){jp.registerAxisPointerClass("CartesianAxisPointer",N_e),t.registerComponentModel(k_e),t.registerComponentView(H_e),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var r=e.axisPointer.link;r&&!De(r)&&(e.axisPointer.link=[r])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,r){e.getComponent("axisPointer").coordSysAxesInfo=S_e(e,r)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},G_e)}function zQ(t){Ot(LQ),Ot(w2)}var Z_e=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(r,n,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),c=u.getExtent(),f=s.dataToCoord(n),h=a.get("type");if(h&&h!=="none"){var d=DD(a),p=Q_e[h](s,l,f,c);p.style=d,r.graphicKey=p.type,r.pointer=p}var v=a.get(["label","margin"]),g=J_e(n,i,a,l,v);IQ(r,i,a,o,g)},e}(LD);function J_e(t,e,r,n,i){var a=e.axis,o=a.dataToCoord(t),s=n.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=n.getRadiusAxis().getExtent(),u,c,f;if(a.dim==="radius"){var h=Xo();zp(h,h,s),Du(h,h,[n.cx,n.cy]),u=Fl([o,-i],h);var d=e.getModel("axisLabel").get("rotate")||0,p=yo.innerTextLayout(s,d*Math.PI/180,-1);c=p.textAlign,f=p.textVerticalAlign}else{var v=l[1];u=n.coordToPoint([v+i,o]);var g=n.cx,m=n.cy;c=Math.abs(u[0]-g)/v<.3?"center":u[0]>g?"left":"right",f=Math.abs(u[1]-m)/v<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:c,verticalAlign:f}}var Q_e={line:function(t,e,r,n){return t.dim==="angle"?{type:"Line",shape:ND(e.coordToPoint([n[0],r]),e.coordToPoint([n[1],r]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r}}},shadow:function(t,e,r,n){var i=Math.max(1,t.getBandWidth()),a=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:AU(e.cx,e.cy,n[0],n[1],(-r-i/2)*a,(-r+i/2)*a)}:{type:"Sector",shape:AU(e.cx,e.cy,r-i/2,r+i/2,0,Math.PI*2)}}},e2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.findAxisModel=function(r){var n,i=this.ecModel;return i.eachComponent(r,function(a){a.getCoordSysModel()===this&&(n=a)},this),n},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(fr),OD=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Ci).models[0]},e.type="polarAxis",e}(fr);mi(OD,l0);var t2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="angleAxis",e}(OD),r2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="radiusAxis",e}(OD),kD=function(t){he(e,t);function e(r,n){return t.call(this,"radius",r,n)||this}return e.prototype.pointToData=function(r,n){return this.polar.pointToData(r,n)[this.dim==="radius"?0:1]},e}(Po);kD.prototype.dataToRadius=Po.prototype.dataToCoord;kD.prototype.radiusToData=Po.prototype.coordToData;var n2e=kr(),FD=function(t){he(e,t);function e(r,n){return t.call(this,"angle",r,n||[0,360])||this}return e.prototype.pointToData=function(r,n){return this.polar.pointToData(r,n)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var r=this,n=r.getLabelModel(),i=r.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=r.dataToCoord(s+1)-r.dataToCoord(s),u=Math.abs(l),c=u2(s==null?"":s+"",n.getFont(),"center","top"),f=Math.max(c.height,7),h=f/u;isNaN(h)&&(h=1/0);var d=Math.max(0,Math.floor(h)),p=n2e(r.model),v=p.lastAutoInterval,g=p.lastTickCount;return v!=null&&g!=null&&Math.abs(v-d)<=1&&Math.abs(g-o)<=1&&v>d?d=v:(p.lastTickCount=o,p.lastAutoInterval=d),d},e}(Po);FD.prototype.dataToAngle=Po.prototype.dataToCoord;FD.prototype.angleToData=Po.prototype.coordToData;var UQ=["radius","angle"],i2e=function(){function t(e){this.dimensions=UQ,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new kD,this._angleAxis=new FD,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(e){var r=this.pointToCoord(e);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},t.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},t.prototype.getAxis=function(e){var r="_"+e+"Axis";return this[r]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(e){var r=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===e&&r.push(n),i.scale.type===e&&r.push(i),r},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(e){var r=this._angleAxis;return e===r?this._radiusAxis:r},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(e){var r=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},t.prototype.dataToPoint=function(e,r){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],r),this._angleAxis.dataToAngle(e[1],r)])},t.prototype.pointToData=function(e,r){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],r),this._angleAxis.angleToData(n[1],r)]},t.prototype.pointToCoord=function(e){var r=e[0]-this.cx,n=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(r*r+n*n);r/=l,n/=l;for(var u=Math.atan2(-n,r)/Math.PI*180,c=u<o?1:-1;u<o||u>s;)u+=c*360;return[l,u]},t.prototype.coordToPoint=function(e){var r=e[0],n=e[1]/180*Math.PI,i=Math.cos(n)*r+this.cx,a=-Math.sin(n)*r+this.cy;return[i,a]},t.prototype.getArea=function(){var e=this.getAngleAxis(),r=this.getRadiusAxis(),n=r.getExtent().slice();n[0]>n[1]&&n.reverse();var i=e.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(o,s){var l=o-this.cx,u=s-this.cy,c=l*l+u*u-1e-4,f=this.r,h=this.r0;return c<=f*f&&c>=h*h}}},t.prototype.convertToPixel=function(e,r,n){var i=NU(r);return i===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var i=NU(r);return i===this?this.pointToData(n):null},t}();function NU(t){var e=t.seriesModel,r=t.polarModel;return r&&r.coordinateSystem||e&&e.coordinateSystem}function a2e(t,e,r){var n=e.get("center"),i=r.getWidth(),a=r.getHeight();t.cx=Ze(n[0],i),t.cy=Ze(n[1],a);var o=t.getRadiusAxis(),s=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:De(l)||(l=[0,l]);var u=[Ze(l[0],s),Ze(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function o2e(t,e){var r=this,n=r.getAngleAxis(),i=r.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),t.eachSeries(function(s){if(s.coordinateSystem===r){var l=s.getData();G(xw(l,"radius"),function(u){i.scale.unionExtentFromData(l,u)}),G(xw(l,"angle"),function(u){n.scale.unionExtentFromData(l,u)})}}),Ap(n.scale,n.model),Ap(i.scale,i.model),n.type==="category"&&!n.onBand){var a=n.getExtent(),o=360/n.scale.count();n.inverse?a[1]+=o:a[1]-=o,n.setExtent(a[0],a[1])}}function s2e(t){return t.mainType==="angleAxis"}function OU(t,e){var r;if(t.type=e.get("type"),t.scale=y2(e),t.onBand=e.get("boundaryGap")&&t.type==="category",t.inverse=e.get("inverse"),s2e(e)){t.inverse=t.inverse!==e.get("clockwise");var n=e.get("startAngle"),i=(r=e.get("endAngle"))!==null&&r!==void 0?r:n+(t.inverse?-360:360);t.setExtent(n,i)}e.axis=t,t.model=e}var l2e={dimensions:UQ,create:function(t,e){var r=[];return t.eachComponent("polar",function(n,i){var a=new i2e(i+"");a.update=o2e;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=n.findAxisModel("radiusAxis"),u=n.findAxisModel("angleAxis");OU(o,l),OU(s,u),a2e(a,n,e),r.push(a),n.coordinateSystem=a,a.model=n}),t.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var i=n.getReferringComponents("polar",Ci).models[0];n.coordinateSystem=i.coordinateSystem}}),r}},u2e=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function US(t,e,r){e[1]>e[0]&&(e=e.slice().reverse());var n=t.coordToPoint([e[0],r]),i=t.coordToPoint([e[1],r]);return{x1:n[0],y1:n[1],x2:i[0],y2:i[1]}}function VS(t){var e=t.getRadiusAxis();return e.inverse?0:1}function kU(t){var e=t[0],r=t[t.length-1];e&&r&&Math.abs(Math.abs(e.coord-r.coord)-360)<1e-4&&t.pop()}var c2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.axisPointerClass="PolarAxisPointer",r}return e.prototype.render=function(r,n){if(this.group.removeAll(),!!r.get("show")){var i=r.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),u=Oe(i.getViewLabels(),function(c){c=Ft(c);var f=i.scale,h=f.type==="ordinal"?f.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(h),c});kU(u),kU(s),G(u2e,function(c){r.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&f2e[c](this.group,r,a,s,l,o,u)},this)}},e.type="angleAxis",e}(jp),f2e={axisLine:function(t,e,r,n,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=r.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),c=VS(r),f=c?0:1,h,d=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[f]===0?h=new Vp[d]({shape:{cx:r.cx,cy:r.cy,r:a[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):h=new h2({shape:{cx:r.cx,cy:r.cy,r:a[c],r0:a[f]},style:o.getLineStyle(),z2:1,silent:!0}),h.style.fill=null,t.add(h)},axisTick:function(t,e,r,n,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[VS(r)],u=Oe(n,function(c){return new ji({shape:US(r,[l,l+s],c.coord)})});t.add(Xs(u,{style:At(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,r,n,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[VS(r)],c=[],f=0;f<i.length;f++)for(var h=0;h<i[f].length;h++)c.push(new ji({shape:US(r,[u,u+l],i[f][h].coord)}));t.add(Xs(c,{style:At(s.getModel("lineStyle").getLineStyle(),At(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,r,n,i,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),c=e.get("triggerEvent");G(o,function(f,h){var d=l,p=f.tickValue,v=a[VS(r)],g=r.coordToPoint([v+u,f.coord]),m=r.cx,x=r.cy,S=Math.abs(g[0]-m)/v<.3?"center":g[0]>m?"left":"right",b=Math.abs(g[1]-x)/v<.3?"middle":g[1]>x?"top":"bottom";if(s&&s[p]){var T=s[p];Nt(T)&&T.textStyle&&(d=new Br(T.textStyle,l,l.ecModel))}var w=new Ar({silent:yo.isLabelSilent(e),style:dn(d,{x:g[0],y:g[1],fill:d.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:f.formattedLabel,align:S,verticalAlign:b})});if(t.add(w),c){var E=yo.makeAxisEventDataBase(e);E.targetType="axisLabel",E.value=f.rawLabel,Ht(w).eventData=E}},this)},splitLine:function(t,e,r,n,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],f=0;f<n.length;f++){var h=u++%l.length;c[h]=c[h]||[],c[h].push(new ji({shape:US(r,a,n[f].coord)}))}for(var f=0;f<c.length;f++)t.add(Xs(c[f],{style:At({stroke:l[f%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,r,n,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<i.length;u++)for(var c=0;c<i[u].length;c++)l.push(new ji({shape:US(r,a,i[u][c].coord)}));t.add(Xs(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,r,n,i,a){if(n.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],f=Math.PI/180,h=-n[0].coord*f,d=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),v=e.get("clockwise"),g=1,m=n.length;g<=m;g++){var x=g===m?n[0].coord:n[g].coord,S=u++%l.length;c[S]=c[S]||[],c[S].push(new wo({shape:{cx:r.cx,cy:r.cy,r0:d,r:p,startAngle:h,endAngle:-x*f,clockwise:v},silent:!0})),h=-x*f}for(var g=0;g<c.length;g++)t.add(Xs(c[g],{style:At({fill:l[g%l.length]},s.getAreaStyle()),silent:!0}))}}},h2e=["axisLine","axisTickLabel","axisName"],d2e=["splitLine","splitArea","minorSplitLine"],p2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.axisPointerClass="PolarAxisPointer",r}return e.prototype.render=function(r,n){if(this.group.removeAll(),!!r.get("show")){var i=this._axisGroup,a=this._axisGroup=new Vt;this.group.add(a);var o=r.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),c=o.getMinorTicksCoords(),f=l.getExtent()[0],h=o.getExtent(),d=g2e(s,r,f),p=new yo(r,d);G(h2e,p.add,p),a.add(p.getGroup()),p2(i,a,r),G(d2e,function(v){r.get([v,"show"])&&!o.scale.isBlank()&&v2e[v](this.group,r,s,f,h,u,c)},this)}},e.type="radiusAxis",e}(jp),v2e={splitLine:function(t,e,r,n,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,c=r.getAngleAxis(),f=Math.PI/180,h=c.getExtent(),d=Math.abs(h[1]-h[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],v=0;v<a.length;v++){var g=u++%l.length;p[g]=p[g]||[],p[g].push(new Vp[d]({shape:{cx:r.cx,cy:r.cy,r:Math.max(a[v].coord,0),startAngle:-h[0]*f,endAngle:-h[1]*f,clockwise:c.inverse}}))}for(var v=0;v<p.length;v++)t.add(Xs(p[v],{style:At({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,r,n,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],c=0;c<o.length;c++)for(var f=0;f<o[c].length;f++)u.push(new Xc({shape:{cx:r.cx,cy:r.cy,r:o[c][f].coord}}));t.add(Xs(u,{style:At({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(t,e,r,n,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],f=a[0].coord,h=1;h<a.length;h++){var d=u++%l.length;c[d]=c[d]||[],c[d].push(new wo({shape:{cx:r.cx,cy:r.cy,r0:f,r:a[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),f=a[h].coord}for(var h=0;h<c.length;h++)t.add(Xs(c[h],{style:At({fill:l[h%l.length]},s.getAreaStyle()),silent:!0}))}}};function g2e(t,e,r){return{position:[t.cx,t.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function VQ(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function HQ(t,e){return e.dim+t.model.componentIndex}function m2e(t,e,r){var n={},i=y2e(hn(e.getSeriesByType(t),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(t,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=HQ(s,l),c=VQ(a),f=i[u][c],h=f.offset,d=f.width,p=s.getOtherAxis(l),v=a.coordinateSystem.cx,g=a.coordinateSystem.cy,m=a.get("barMinHeight")||0,x=a.get("barMinAngle")||0;n[c]=n[c]||[];for(var S=o.mapDimension(p.dim),b=o.mapDimension(l.dim),T=zc(o,S),w=l.dim!=="radius"||!a.get("roundCap",!0),E=p.model,M=E.get("startValue"),A=p.dataToCoord(M||0),R=0,L=o.count();R<L;R++){var I=o.get(S,R),N=o.get(b,R),k=I>=0?"p":"n",z=A;T&&(n[c][N]||(n[c][N]={p:A,n:A}),z=n[c][N][k]);var B=void 0,V=void 0,F=void 0,$=void 0;if(p.dim==="radius"){var W=p.dataToCoord(I)-A,H=l.dataToCoord(N);Math.abs(W)<m&&(W=(W<0?-1:1)*m),B=z,V=z+W,F=H-h,$=F-d,T&&(n[c][N][k]=V)}else{var X=p.dataToCoord(I,w)-A,te=l.dataToCoord(N);Math.abs(X)<x&&(X=(X<0?-1:1)*x),B=te+h,V=B+d,F=z,$=z+X,T&&(n[c][N][k]=$)}o.setItemLayout(R,{cx:v,cy:g,r0:B,r:V,startAngle:-F*Math.PI/180,endAngle:-$*Math.PI/180,clockwise:F>=$})}}})}function y2e(t){var e={};G(t,function(n,i){var a=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=HQ(o,s),u=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),f=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=f.stacks;e[l]=f;var d=VQ(n);h[d]||f.autoWidthCount++,h[d]=h[d]||{width:0,maxWidth:0};var p=Ze(n.get("barWidth"),c),v=Ze(n.get("barMaxWidth"),c),g=n.get("barGap"),m=n.get("barCategoryGap");p&&!h[d].width&&(p=Math.min(f.remainedWidth,p),h[d].width=p,f.remainedWidth-=p),v&&(h[d].maxWidth=v),g!=null&&(f.gap=g),m!=null&&(f.categoryGap=m)});var r={};return G(e,function(n,i){r[i]={};var a=n.stacks,o=n.bandWidth,s=Ze(n.categoryGap,o),l=Ze(n.gap,1),u=n.remainedWidth,c=n.autoWidthCount,f=(u-s)/(c+(c-1)*l);f=Math.max(f,0),G(a,function(v,g){var m=v.maxWidth;m&&m<f&&(m=Math.min(m,u),v.width&&(m=Math.min(m,v.width)),u-=m,v.width=m,c--)}),f=(u-s)/(c+(c-1)*l),f=Math.max(f,0);var h=0,d;G(a,function(v,g){v.width||(v.width=f),d=v,h+=v.width*(1+l)}),d&&(h-=d.width*l);var p=-h/2;G(a,function(v,g){r[i][g]=r[i][g]||{offset:p,width:v.width},p+=v.width*(1+l)})}),r}var _2e={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},x2e={splitNumber:5},S2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="polar",e}(_n);function b2e(t){Ot(w2),jp.registerAxisPointerClass("PolarAxisPointer",Z_e),t.registerCoordinateSystem("polar",l2e),t.registerComponentModel(e2e),t.registerComponentView(S2e),ym(t,"angle",t2e,_2e),ym(t,"radius",r2e,x2e),t.registerComponentView(c2e),t.registerComponentView(p2e),t.registerLayout(Zt(m2e,"bar"))}var Dy=TQ.value;function HS(t,e){return At({show:e},t)}var w2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),n=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),f=this.get("axisNameGap"),h=this.get("triggerEvent"),d=Oe(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var v=l;p.color!=null&&(v=At({color:p.color},l));var g=xt(Ft(p),{boundaryGap:r,splitNumber:n,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:f,nameTextStyle:v,triggerEvent:h},!1);if(ft(c)){var m=g.name;g.name=c.replace("{value}",m!=null?m:"")}else Lt(c)&&(g.name=c(g.name,g));var x=new Br(g,null,this.ecModel);return mi(x,l0.prototype),x.mainType="radar",x.componentIndex=this.componentIndex,x},this);this._indicatorModels=d},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:xt({lineStyle:{color:"#bbb"}},Dy.axisLine),axisLabel:HS(Dy.axisLabel,!1),axisTick:HS(Dy.axisTick,!1),splitLine:HS(Dy.splitLine,!0),splitArea:HS(Dy.splitArea,!0),indicator:[]},e}(fr),T2e=["axisLine","axisTickLabel","axisName"],C2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=this.group;a.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},e.prototype._buildAxes=function(r){var n=r.coordinateSystem,i=n.getIndicatorAxes(),a=Oe(i,function(o){var s=o.model.get("showName")?o.name:"",l=new yo(o.model,{axisName:s,position:[n.cx,n.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});G(a,function(o){G(T2e,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(r){var n=r.coordinateSystem,i=n.getIndicatorAxes();if(!i.length)return;var a=r.get("shape"),o=r.getModel("splitLine"),s=r.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),f=s.get("show"),h=l.get("color"),d=u.get("color"),p=De(h)?h:[h],v=De(d)?d:[d],g=[],m=[];function x(z,B,V){var F=V%B.length;return z[F]=z[F]||[],F}if(a==="circle")for(var S=i[0].getTicksCoords(),b=n.cx,T=n.cy,w=0;w<S.length;w++){if(c){var E=x(g,p,w);g[E].push(new Xc({shape:{cx:b,cy:T,r:S[w].coord}}))}if(f&&w<S.length-1){var E=x(m,v,w);m[E].push(new h2({shape:{cx:b,cy:T,r0:S[w].coord,r:S[w+1].coord}}))}}else for(var M,A=Oe(i,function(z,B){var V=z.getTicksCoords();return M=M==null?V.length-1:Math.min(V.length-1,M),Oe(V,function(F){return n.coordToPoint(F.coord,B)})}),R=[],w=0;w<=M;w++){for(var L=[],I=0;I<i.length;I++)L.push(A[I][w]);if(L[0]&&L.push(L[0].slice()),c){var E=x(g,p,w);g[E].push(new Ro({shape:{points:L}}))}if(f&&R){var E=x(m,v,w-1);m[E].push(new To({shape:{points:L.concat(R)}}))}R=L.slice().reverse()}var N=l.getLineStyle(),k=u.getAreaStyle();G(m,function(z,B){this.group.add(Xs(z,{style:At({stroke:"none",fill:v[B%v.length]},k),silent:!0}))},this),G(g,function(z,B){this.group.add(Xs(z,{style:At({fill:"none",stroke:p[B%p.length]},N),silent:!0}))},this)},e.type="radar",e}(_n),E2e=function(t){he(e,t);function e(r,n,i){var a=t.call(this,r,n,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(Po),A2e=function(){function t(e,r,n){this.dimensions=[],this._model=e,this._indicatorAxes=Oe(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new E2e(o,new Uc);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(e,r){var n=this._indicatorAxes[r];return this.coordToPoint(n.dataToCoord(e),r)},t.prototype.coordToPoint=function(e,r){var n=this._indicatorAxes[r],i=n.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},t.prototype.pointToData=function(e){var r=e[0]-this.cx,n=e[1]-this.cy,i=Math.sqrt(r*r+n*n);r/=i,n/=i;for(var a=Math.atan2(-n,r),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],f=Math.abs(a-c.angle);f<o&&(s=c,l=u,o=f)}return[l,+(s&&s.coordToData(i))]},t.prototype.resize=function(e,r){var n=e.get("center"),i=r.getWidth(),a=r.getHeight(),o=Math.min(i,a)/2;this.cx=Ze(n[0],i),this.cy=Ze(n[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(ft(s)||Ur(s))&&(s=[0,s]),this.r0=Ze(s[0],o),this.r=Ze(s[1],o),G(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},t.prototype.update=function(e,r){var n=this._indicatorAxes,i=this._model;G(n,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var u=s.getData();G(n,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),o=new Uc;o.setExtent(0,a),o.setInterval(1),G(n,function(s,l){CQ(s.scale,s.model,o)})},t.prototype.convertToPixel=function(e,r,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(e,r,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.create=function(e,r){var n=[];return e.eachComponent("radar",function(i){var a=new t(i,e,r);n.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},t.dimensions=[],t}();function M2e(t){t.registerCoordinateSystem("radar",A2e),t.registerComponentModel(w2e),t.registerComponentView(C2e),t.registerVisual({seriesType:"radar",reset:function(e){var r=e.getData();r.each(function(n){r.setItemVisual(n,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}var FU=qi,T2=function(t){he(e,t);function e(r){var n=t.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new _c,n._rawTransformable=new _c,n.name=r,n}return e.prototype.setBoundingRect=function(r,n,i,a){return this._rect=new sr(r,n,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(r,n,i,a){this._transformTo(r,n,i,a),this._viewRect=new sr(r,n,i,a)},e.prototype._transformTo=function(r,n,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new sr(r,n,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(r,n){r&&(this._center=[Ze(r[0],n.getWidth()),Ze(r[1],n.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=qi([],a,r),i=qi([],i,r),n.originX=a[0],n.originY=a[1],n.x=i[0]-a[0],n.y=i[1]-a[1],n.scaleX=n.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),oL(this.transform||(this.transform=[]),n.transform||Xo()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],Up(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new _c;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},e.prototype.dataToPoint=function(r,n,i){var a=n?this._rawTransform:this.transform;return i=i||[],a?FU(i,r,a):uo(i,r)},e.prototype.pointToData=function(r){var n=this.invTransform;return n?FU([],r,n):[r[0],r[1]]},e.prototype.convertToPixel=function(r,n,i){var a=BU(n);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(r,n,i){var a=BU(n);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},e.dimensions=["x","y"],e}(_c);function BU(t){var e=t.seriesModel;return e?e.coordinateSystem:null}function GQ(t){if(ft(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}var r=t;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var dM,Ow={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},zU=Er(Ow),kw={"alignment-baseline":"textBaseline","stop-color":"stopColor"},UU=Er(kw),R2e=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(e,r){r=r||{};var n=GQ(e);this._defsUsePending=[];var i=new Vt;this._root=i;var a=[],o=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||r.width),l=parseFloat(n.getAttribute("height")||r.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),os(n,i,null,!0,!1);for(var u=n.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;D2e(this._defs,this._defsUsePending),this._defsUsePending=[];var c,f;if(o){var h=d4(o);h.length>=4&&(c={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(c&&s!=null&&l!=null&&(f=$Q(c,{x:0,y:0,width:s,height:l}),!r.ignoreViewBox)){var d=i;i=new Vt,i.add(d),d.scaleX=d.scaleY=f.scale,d.x=f.x,d.y=f.y}return!r.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new Mr({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:c,viewBoxTransform:f,named:a}},t.prototype._parseNode=function(e,r,n,i,a,o){var s=e.nodeName.toLowerCase(),l,u=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=r;else{if(!a){var c=dM[s];if(c&&_t(dM,s)){l=c.call(this,e,r);var f=e.getAttribute("name");if(f){var h={name:f,namedFrom:null,svgNodeTagLower:s,el:l};n.push(h),s==="g"&&(u=h)}else i&&n.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});r.add(l)}}var d=VU[s];if(d&&_t(VU,s)){var p=d.call(this,e),v=e.getAttribute("id");v&&(this._defs[v]=p)}}if(l&&l.isGroup)for(var g=e.firstChild;g;)g.nodeType===1?this._parseNode(g,l,n,u,a,o):g.nodeType===3&&o&&this._parseText(g,l),g=g.nextSibling},t.prototype._parseText=function(e,r){var n=new am({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ps(r,n),os(e,n,this._defsUsePending,!1,!1),P2e(n,r);var i=n.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,n.scaleX*=a/9,n.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=n.getBoundingRect();return this._textX+=s.width,r.add(n),n},t.internalField=function(){dM={g:function(e,r){var n=new Vt;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n},rect:function(e,r){var n=new Mr;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,r){var n=new Xc;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,r){var n=new ji;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,r){var n=new zT;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,r){var n=e.getAttribute("points"),i;n&&(i=WU(n));var a=new To({shape:{points:i||[]},silent:!0});return Ps(r,a),os(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,r){var n=e.getAttribute("points"),i;n&&(i=WU(n));var a=new Ro({shape:{points:i||[]},silent:!0});return Ps(r,a),os(e,a,this._defsUsePending,!1,!1),a},image:function(e,r){var n=new aa;return Ps(r,n),os(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,r){var n=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new Vt;return Ps(r,s),os(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,r){var n=e.getAttribute("x"),i=e.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new Vt;return Ps(r,s),os(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,r){var n=e.getAttribute("d")||"",i=FY(n);return Ps(r,i),os(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),t}(),VU={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),r=parseInt(t.getAttribute("y1")||"0",10),n=parseInt(t.getAttribute("x2")||"10",10),i=parseInt(t.getAttribute("y2")||"0",10),a=new Km(e,r,n,i);return HU(t,a),GU(t,a),a},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),r=parseInt(t.getAttribute("cy")||"0",10),n=parseInt(t.getAttribute("r")||"0",10),i=new VY(e,r,n);return HU(t,i),GU(t,i),i}};function HU(t,e){var r=t.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(e.global=!0)}function GU(t,e){for(var r=t.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var n=r.getAttribute("offset"),i=void 0;n&&n.indexOf("%")>0?i=parseInt(n,10)/100:n?i=parseFloat(n):i=0;var a={};WQ(r,a,a);var o=a.stopColor||r.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:o})}r=r.nextSibling}}function Ps(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),At(e.__inheritedStyle,t.__inheritedStyle))}function WU(t){for(var e=d4(t),r=[],n=0;n<e.length;n+=2){var i=parseFloat(e[n]),a=parseFloat(e[n+1]);r.push([i,a])}return r}function os(t,e,r,n,i){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};t.nodeType===1&&(O2e(t,e),WQ(t,o,s),n||k2e(t,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=$U(a,"fill",o.fill,r)),o.stroke!=null&&(a.style.stroke=$U(a,"stroke",o.stroke,r)),G(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),G(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=Oe(d4(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function P2e(t,e){var r=e.__selfStyle;if(r){var n=r.textBaseline,i=n;!n||n==="auto"||n==="baseline"?i="alphabetic":n==="before-edge"||n==="text-before-edge"?i="top":n==="after-edge"||n==="text-after-edge"?i="bottom":(n==="central"||n==="mathematical")&&(i="middle"),t.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),t.style.textAlign=s)}}var L2e=/^url\(\s*#(.*?)\)/;function $U(t,e,r,n){var i=r&&r.match(L2e);if(i){var a=Il(i[1]);n.push([t,e,a]);return}return r==="none"&&(r=null),r}function D2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n[0].style[n[1]]=t[n[2]]}}var I2e=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function d4(t){return t.match(I2e)||[]}var N2e=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,pM=Math.PI/180;function O2e(t,e){var r=t.getAttribute("transform");if(r){r=r.replace(/,/g," ");var n=[],i=null;r.replace(N2e,function(f,h,d){return n.push(h,d),""});for(var a=n.length-1;a>0;a-=2){var o=n[a],s=n[a-1],l=d4(o);switch(i=i||Xo(),s){case"translate":Du(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":sL(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":zp(i,i,-parseFloat(l[0])*pM,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*pM);Ec(i,[1,0,u,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*pM);Ec(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var jU=/([^\s:;]+)\s*:\s*([^:;]+)/g;function WQ(t,e,r){var n=t.getAttribute("style");if(n){jU.lastIndex=0;for(var i;(i=jU.exec(n))!=null;){var a=i[1],o=_t(Ow,a)?Ow[a]:null;o&&(e[o]=i[2]);var s=_t(kw,a)?kw[a]:null;s&&(r[s]=i[2])}}}function k2e(t,e,r){for(var n=0;n<zU.length;n++){var i=zU[n],a=t.getAttribute(i);a!=null&&(e[Ow[i]]=a)}for(var n=0;n<UU.length;n++){var i=UU[n],a=t.getAttribute(i);a!=null&&(r[kw[i]]=a)}}function $Q(t,e){var r=e.width/t.width,n=e.height/t.height,i=Math.min(r,n);return{scale:i,x:-(t.x+t.width/2)*i+(e.x+e.width/2),y:-(t.y+t.height/2)*i+(e.y+e.height/2)}}function F2e(t,e){var r=new R2e;return r.parse(t,e)}var B2e=Tt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),z2e=function(){function t(e,r){this.type="geoSVG",this._usedGraphicMap=Tt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=GQ(r)}return t.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=V2e(e.named),n=r.regions,i=r.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(e){var r,n;try{r=e&&F2e(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=r.root,So(n!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var i=new Vt;i.add(n),i.isGeoSVGGraphicRoot=!0;var a=r.width,o=r.height,s=r.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,f=void 0,h=void 0;if(a!=null?(u=0,f=a):s&&(u=s.x,f=s.width),o!=null?(c=0,h=o):s&&(c=s.y,h=s.height),u==null||c==null){var d=n.getBoundingRect();u==null&&(u=d.x,f=d.width),c==null&&(c=d.y,h=d.height)}l=this._boundingRect=new sr(u,c,f,h)}if(s){var p=$Q(s,l);n.scaleX=n.scaleY=p.scale,n.x=p.x,n.y=p.y}i.setClipPath(new Mr({shape:l.plain()}));var v=[];return G(r.named,function(g){B2e.get(g.svgNodeTagLower)!=null&&(v.push(g),U2e(g.el))}),{root:i,boundingRect:l,named:v}},t.prototype.useGraphic=function(e){var r=this._usedGraphicMap,n=r.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(e,n),n)},t.prototype.freeGraphic=function(e){var r=this._usedGraphicMap,n=r.get(e);n&&(r.removeKey(e),this._freedGraphics.push(n))},t}();function U2e(t){t.silent=!1,t.isGroup&&t.traverse(function(e){e.silent=!1})}function V2e(t){var e=[],r=Tt();return G(t,function(n){if(n.namedFrom==null){var i=new Tge(n.name,n.el);e.push(i),r.set(n.name,i)}}),{regions:e,regionsMap:r}}var pR=[126,25],XU="",Nd=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var bd=0;bd<Nd.length;bd++)for(var jv=0;jv<Nd[bd].length;jv++)Nd[bd][jv][0]/=10.5,Nd[bd][jv][1]/=-10.5/.75,Nd[bd][jv][0]+=pR[0],Nd[bd][jv][1]+=pR[1];function H2e(t,e){if(t==="china"){for(var r=0;r<e.length;r++)if(e[r].name===XU)return;e.push(new $Z(XU,Oe(Nd,function(n){return{type:"polygon",exterior:n}}),pR))}}var G2e=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function W2e(t,e){t==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:G2e[0]})}var $2e="name",j2e=function(){function t(e,r,n){this.type="geoJSON",this._parsedMap=Tt(),this._mapName=e,this._specialAreas=n,this._geoJSON=K2e(r)}return t.prototype.load=function(e,r){r=r||$2e;var n=this._parsedMap.get(r);if(!n){var i=this._parseToRegions(r);n=this._parsedMap.set(r,{regions:i,boundingRect:X2e(i)})}var a=Tt(),o=[];return G(n.regions,function(s){var l=s.name;e&&_t(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:n.boundingRect||new sr(0,0,0,0),regionsMap:a}},t.prototype._parseToRegions=function(e){var r=this._mapName,n=this._geoJSON,i;try{i=n?X6(n,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return H2e(r,i),G(i,function(a){var o=a.name;fQ(r,a),W2e(r,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function X2e(t){for(var e,r=0;r<t.length;r++){var n=t[r].getBoundingRect();e=e||n.clone(),e.union(n)}return e}function K2e(t){return ft(t)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var Iy=Tt();const Vc={registerMap:function(t,e,r){if(e.svg){var n=new z2e(t,e.svg);Iy.set(t,n)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?r=e.specialAreas:i=e;var n=new j2e(t,i,r);Iy.set(t,n)}},getGeoResource:function(t){return Iy.get(t)},getMapForUser:function(t){var e=Iy.get(t);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(t,e,r){var n=Iy.get(t);if(n)return n.load(e,r)}};var Y2e={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},jQ=["lng","lat"],vR=function(t){he(e,t);function e(r,n,i){var a=t.call(this,r)||this;a.dimensions=jQ,a.type="geo",a._nameCoordMap=Tt(),a.map=n;var o=i.projection,s=Vc.load(n,i.nameMap,i.nameProperty),l=Vc.getGeoResource(n);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=Y2e[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var f;if(o)for(var h=0;h<u.length;h++){var d=u[h].getBoundingRect(o);f=f||d.clone(),f.union(d)}else f=s.boundingRect;return a.setBoundingRect(f.x,f.y,f.width,f.height),a.aspectScale=o?1:Jt(i.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return e.prototype._transformTo=function(r,n,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new sr(r,n,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(r){return this._regionsMap.get(r)},e.prototype.getRegionByCoord=function(r){for(var n=this.regions,i=0;i<n.length;i++){var a=n[i];if(a.type==="geoJSON"&&a.contain(r))return n[i]}},e.prototype.addGeoCoord=function(r,n){this._nameCoordMap.set(r,n)},e.prototype.getGeoCoord=function(r){var n=this._regionsMap.get(r);return this._nameCoordMap.get(r)||n&&n.getCenter()},e.prototype.dataToPoint=function(r,n,i){if(ft(r)&&(r=this.getGeoCoord(r)),r){var a=this.projection;return a&&(r=a.project(r)),r&&this.projectedToPoint(r,n,i)}},e.prototype.pointToData=function(r){var n=this.projection;return n&&(r=n.unproject(r)),r&&this.pointToProjected(r)},e.prototype.pointToProjected=function(r){return t.prototype.pointToData.call(this,r)},e.prototype.projectedToPoint=function(r,n,i){return t.prototype.dataToPoint.call(this,r,n,i)},e.prototype.convertToPixel=function(r,n,i){var a=KU(n);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(r,n,i){var a=KU(n);return a===this?a.pointToData(i):null},e}(T2);mi(vR,T2);function KU(t){var e=t.geoModel,r=t.seriesModel;return e?e.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",Ci).models[0]||{}).coordinateSystem:null}function YU(t,e){var r=t.get("boundingCoords");if(r!=null){var n=r[0],i=r[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=n[0],s=n[1],l=i[0],u=i[1];n=[1/0,1/0],i=[-1/0,-1/0];var c=function(w,E,M,A){for(var R=M-w,L=A-E,I=0;I<=100;I++){var N=I/100,k=a.project([w+R*N,E+L*N]);Kf(n,n,k),Yf(i,i,k)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(n[0],n[1],i[0]-n[0],i[1]-n[1])}}var f=this.getBoundingRect(),h=t.get("layoutCenter"),d=t.get("layoutSize"),p=e.getWidth(),v=e.getHeight(),g=f.width/f.height*this.aspectScale,m=!1,x,S;h&&d&&(x=[Ze(h[0],p),Ze(h[1],v)],S=Ze(d,Math.min(p,v)),!isNaN(x[0])&&!isNaN(x[1])&&!isNaN(S)&&(m=!0));var b;if(m)b={},g>1?(b.width=S,b.height=S/g):(b.height=S,b.width=S*g),b.y=x[1]-b.height/2,b.x=x[0]-b.width/2;else{var T=t.getBoxLayoutParams();T.aspect=g,b=ri(T,{width:p,height:v})}this.setViewRect(b.x,b.y,b.width,b.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}function q2e(t,e){G(e.get("geoCoord"),function(r,n){t.addGeoCoord(n,r)})}var Z2e=function(){function t(){this.dimensions=jQ}return t.prototype.create=function(e,r){var n=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),u=new vR(l+s,l,Ae({nameMap:o.get("nameMap")},i(o)));u.zoomLimit=o.get("scaleLimit"),n.push(u),o.coordinateSystem=u,u.model=o,u.resize=YU,u.resize(o,r)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=n[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),G(a,function(o,s){var l=Oe(o,function(c){return c.get("nameMap")}),u=new vR(s,s,Ae({nameMap:tL(l)},i(o[0])));u.zoomLimit=ma.apply(null,Oe(o,function(c){return c.get("scaleLimit")})),n.push(u),u.resize=YU,u.resize(o[0],r),G(o,function(c){c.coordinateSystem=u,q2e(u,c)})}),n},t.prototype.getFilledRegions=function(e,r,n,i){for(var a=(e||[]).slice(),o=Tt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=Vc.load(r,n,i);return G(l.regions,function(u){var c=u.name;!o.get(c)&&a.push({name:c})}),a},t}(),XQ=new Z2e,J2e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n,i){var a=Vc.getGeoResource(r.map);if(a&&a.type==="geoJSON"){var o=r.itemStyle=r.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(r,i),bp(r,"label",["show"])},e.prototype.optionUpdated=function(){var r=this,n=this.option;n.regions=XQ.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var i={};this._optionModelMap=Gl(n.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Br(o,r,r.ecModel)),o.selected&&(i[s]=!0)),a},Tt()),n.selectedMap||(n.selectedMap=i)},e.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Br(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(r,n){var i=this.getRegionModel(r),a=n==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:r};if(Lt(a))return o.status=n,a(o);if(ft(a))return a.replace("{a}",r!=null?r:"")},e.prototype.setZoom=function(r){this.option.zoom=r},e.prototype.setCenter=function(r){this.option.center=r},e.prototype.select=function(r){var n=this.option,i=n.selectedMode;if(i){i!=="multiple"&&(n.selectedMap=null);var a=n.selectedMap||(n.selectedMap={});a[r]=!0}},e.prototype.unSelect=function(r){var n=this.option.selectedMap;n&&(n[r]=!1)},e.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},e.prototype.isSelected=function(r){var n=this.option.selectedMap;return!!(n&&n[r])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(fr);function qU(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function BD(t,e,r,n){var i=t.getZoom(),a=t.getCenter(),o=e.zoom,s=t.projectedToPoint?t.projectedToPoint(a):t.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,t.setCenter(qU(t,s),n)),o!=null){if(r){var l=r.min||0,u=r.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}t.scaleX*=o,t.scaleY*=o;var c=(e.originX-t.x)*(o-1),f=(e.originY-t.y)*(o-1);t.x-=c,t.y-=f,t.updateTransform(),t.setCenter(qU(t,s),n),t.setZoom(o*i)}return{center:t.getCenter(),zoom:t.getZoom()}}var ZU="\0_ec_interaction_mutex";function Q2e(t,e,r){var n=zD(t);n[e]=r}function exe(t,e,r){var n=zD(t),i=n[e];i===r&&(n[e]=null)}function JU(t,e){return!!zD(t)[e]}function zD(t){return t[ZU]||(t[ZU]={})}Uu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},pi);var C2=function(t){he(e,t);function e(r){var n=t.call(this)||this;n._zr=r;var i=pt(n._mousedownHandler,n),a=pt(n._mousemoveHandler,n),o=pt(n._mouseupHandler,n),s=pt(n._mousewheelHandler,n),l=pt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=At(Ft(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",a),r.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",a),r.off("mouseup",o),r.off("mousewheel",s),r.off("pinch",l)},n}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(r){this.pointerChecker=r},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(r){if(!_k(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,a=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!T3("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||JU(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,a=this._x,o=this._y,s=n-a,l=i-o;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Nc(r.event),KQ(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:a,oldY:o,newX:n,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(r){_k(r)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(r){var n=T3("zoomOnMouseWheel",r,this._opt),i=T3("moveOnMouseWheel",r,this._opt),a=r.wheelDelta,o=Math.abs(a),s=r.offsetX,l=r.offsetY;if(!(a===0||!n&&!i)){if(n){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;vM(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(a),h=(a>0?1:-1)*(f>3?.4:f>1?.15:.05);vM(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(r){if(!JU(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;vM(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},e}(al);function vM(t,e,r,n,i){t.pointerChecker&&t.pointerChecker(n,i.originX,i.originY)&&(Nc(n.event),KQ(t,e,r,n,i))}function KQ(t,e,r,n,i){i.isAvailableBehavior=pt(T3,null,r,n),t.trigger(e,i)}function T3(t,e,r){var n=r[t];return!t||n&&(!ft(n)||e.event[n+"Key"])}function UD(t,e,r){var n=t.target;n.x+=e,n.y+=r,n.dirty()}function VD(t,e,r,n){var i=t.target,a=t.zoomLimit,o=t.zoom=t.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/t.zoom;t.zoom=o,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var txe={axisPointer:1,tooltip:1,brush:1};function p4(t,e,r){var n=e.getComponentByElement(t.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!txe.hasOwnProperty(n.mainType)&&i&&i.model!==r}var HD=["rect","circle","line","ellipse","polygon","polyline","path"],rxe=Tt(HD),nxe=Tt(HD.concat(["g"])),ixe=Tt(HD.concat(["g"])),YQ=kr();function GS(t){var e=t.getItemStyle(),r=t.get("areaColor");return r!=null&&(e.fill=r),e}function QU(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var qQ=function(){function t(e){var r=new Vt;this.uid=Jm("ec_map_draw"),this._controller=new C2(e.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Vt),r.add(this._svgGroup=new Vt)}return t.prototype.draw=function(e,r,n,i,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&r.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===e&&(s=m.getData())});var l=e.coordinateSystem,u=this._regionsGroup,c=this.group,f=l.getTransformInfo(),h=f.raw,d=f.roam,p=!u.childAt(0)||a;p?(c.x=d.x,c.y=d.y,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.dirty()):Xr(c,d,e);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,g={api:n,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:h};l.resourceType==="geoJSON"?this._buildGeoJSON(g):l.resourceType==="geoSVG"&&this._buildSVG(g),this._updateController(e,r,n),this._updateMapSelectHandler(e,u,n,i)},t.prototype._buildGeoJSON=function(e){var r=this._regionsGroupByName=Tt(),n=Tt(),i=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,u=l&&l.stream;function c(d,p){return p&&(d=p(d)),d&&[d[0]*a.scaleX+a.x,d[1]*a.scaleY+a.y]}function f(d){for(var p=[],v=!u&&l&&l.project,g=0;g<d.length;++g){var m=c(d[g],v);m&&p.push(m)}return p}function h(d){return{shape:{points:f(d)}}}i.removeAll(),G(e.geo.regions,function(d){var p=d.name,v=r.get(p),g=n.get(p)||{},m=g.dataIdx,x=g.regionModel;v||(v=r.set(p,new Vt),i.add(v),m=s?s.indexOfName(p):null,x=e.isGeo?o.getRegionModel(p):s?s.getItemModel(m):null,n.set(p,{dataIdx:m,regionModel:x}));var S=[],b=[];G(d.geometries,function(E){if(E.type==="polygon"){var M=[E.exterior].concat(E.interiors||[]);u&&(M=aV(M,u)),G(M,function(R){S.push(new To(h(R)))})}else{var A=E.points;u&&(A=aV(A,u,!0)),G(A,function(R){b.push(new Ro(h(R)))})}});var T=c(d.getCenter(),l&&l.project);function w(E,M){if(E.length){var A=new wL({culling:!0,segmentIgnoreThreshold:1,shape:{paths:E}});v.add(A),eV(e,A,m,x),tV(e,A,p,x,o,m,T),M&&(QU(A),G(A.states,QU))}}w(S),w(b,!0)}),r.each(function(d,p){var v=n.get(p),g=v.dataIdx,m=v.regionModel;rV(e,d,p,m,o,g),nV(e,d,p,m,o),iV(e,d,p,m,o)},this)},t.prototype._buildSVG=function(e){var r=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var i=this._svgDispatcherMap=Tt(),a=!1;G(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,u=e.data,c=o.svgNodeTagLower,f=o.el,h=u?u.indexOfName(s):null,d=l.getRegionModel(s);if(rxe.get(c)!=null&&f instanceof nl&&eV(e,f,h,d),f instanceof nl&&(f.culling=!0),f.z2EmphasisLift=0,!o.namedFrom&&(ixe.get(c)!=null&&tV(e,f,s,d,l,h,null),rV(e,f,s,d,l,h),nV(e,f,s,d,l),nxe.get(c)!=null)){var p=iV(e,f,s,d,l);p==="self"&&(a=!0);var v=i.get(s)||i.set(s,[]);v.push(f)}},this),this._enableBlurEntireSVG(a,e)},t.prototype._enableBlurEntireSVG=function(e,r){if(e&&r.isGeo){var n=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=n.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Cp(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(e,r){if(e==null)return[];var n=r.coordinateSystem;if(n.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},t.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},t.prototype._useSVG=function(e){var r=Vc.getGeoResource(e);if(r&&r.type==="geoSVG"){var n=r.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},t.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var r=Vc.getGeoResource(e);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(e,r,n){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=e.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,UD(o,u.dx,u.dy),n.dispatchAction(Ae(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,VD(o,u.scale,u.originX,u.originY),n.dispatchAction(Ae(l(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,f){return i.containPoint([c,f])&&!p4(u,n,e)})},t.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var r=e.getTextContent();r&&(r.ignore=YQ(r).ignore)})},t.prototype._updateMapSelectHandler=function(e,r,n,i){var a=this;r.off("mousedown"),r.off("click"),e.get("selectedMode")&&(r.on("mousedown",function(){a._mouseDownFlag=!0}),r.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},t}();function eV(t,e,r,n){var i=n.getModel("itemStyle"),a=n.getModel(["emphasis","itemStyle"]),o=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=GS(i),u=GS(a),c=GS(s),f=GS(o),h=t.data;if(h){var d=h.getItemVisual(r,"style"),p=h.getItemVisual(r,"decal");t.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),p&&(l.decal=lm(p,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=c,e.ensureState("blur").style=f,Cp(e)}function tV(t,e,r,n,i,a,o){var s=t.data,l=t.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var f=l?r:a,h=void 0;(!s||a>=0)&&(h=i);var d=o?{normal:{align:"center",verticalAlign:"middle"}}:null;ka(e,Qi(n),{labelFetcher:h,labelDataIndex:f,defaultText:r},d);var p=e.getTextContent();if(p&&(YQ(p).ignore=p.ignore,e.textConfig&&o)){var v=e.getBoundingRect().clone();e.textConfig.layoutRect=v,e.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function rV(t,e,r,n,i,a){t.data?t.data.setItemGraphicEl(a,e):Ht(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:r,region:n&&n.option||{}}}function nV(t,e,r,n,i){t.data||qm({el:e,componentModel:i,itemName:r,itemTooltipOption:n.get("tooltip")})}function iV(t,e,r,n,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=n.getModel("emphasis"),o=a.get("focus");return ti(e,o,a.get("blurScope"),a.get("disabled")),t.isGeo&&Gfe(e,i,r),o}function aV(t,e,r){var n=[],i;function a(){i=[]}function o(){i.length&&(n.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!r&&s.polygonStart(),G(t,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!r&&s.polygonEnd(),n}var axe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.focusBlurEnabled=!0,r}return e.prototype.init=function(r,n){this._api=n},e.prototype.render=function(r,n,i,a){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new qQ(i));var o=this._mapDraw;o.draw(r,n,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=r.get("silent"),this.group.add(o.group),this.updateSelectStatus(r,n,i)},e.prototype._handleRegionClick=function(r){var n;Zd(r.target,function(i){return(n=Ht(i).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},e.prototype.updateSelectStatus=function(r,n,i){var a=this;this._mapDraw.group.traverse(function(o){var s=Ht(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(_n);function oxe(t,e,r){Vc.registerMap(t,e,r)}function GD(t){t.registerCoordinateSystem("geo",XQ),t.registerComponentModel(J2e),t.registerComponentView(axe),t.registerImpl("registerMap",oxe),t.registerImpl("getMap",function(r){return Vc.getMapForUser(r)});function e(r,n){n.update="geo:updateSelectStatus",t.registerAction(n,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[r](i.name);var u=l.coordinateSystem;G(u.regions,function(f){o[f.name]=l.isSelected(f.name)||!1});var c=[];G(o,function(f,h){o[h]&&c.push(h)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,n,i){var a=r.componentType||"series";n.eachComponent({mainType:a,query:r},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=BD(s,r,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&G(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function gR(t,e){e=e||{};var r=t.coordinateSystem,n=t.axis,i={},a=n.position,o=n.orient,s=r.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};i.rotation=Math.PI/2*c[o];var f={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=f[a],t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),ma(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var h=e.rotate;return h==null&&(h=t.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-h:h,i.z2=1,i}var sxe=["axisLine","axisTickLabel","axisName"],lxe=["splitArea","splitLine"],uxe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.axisPointerClass="SingleAxisPointer",r}return e.prototype.render=function(r,n,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Vt;var l=gR(r),u=new yo(r,l);G(sxe,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),G(lxe,function(c){r.get([c,"show"])&&cxe[c](this,this.group,this._axisGroup,r)},this),p2(s,this._axisGroup,r),t.prototype.render.call(this,r,n,i,a)},e.prototype.remove=function(){MQ(this)},e.type="singleAxis",e}(jp),cxe={splitLine:function(t,e,r,n){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=n.coordinateSystem.getRect(),c=i.isHorizontal(),f=[],h=0,d=i.getTicksCoords({tickModel:a}),p=[],v=[],g=0;g<d.length;++g){var m=i.toGlobalCoord(d[g].coord);c?(p[0]=m,p[1]=u.y,v[0]=m,v[1]=u.y+u.height):(p[0]=u.x,p[1]=m,v[0]=u.x+u.width,v[1]=m);var x=new ji({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},silent:!0});om(x.shape,l);var S=h++%s.length;f[S]=f[S]||[],f[S].push(x)}for(var b=o.getLineStyle(["color"]),g=0;g<f.length;++g)e.add(Xs(f[g],{style:At({stroke:s[g%s.length]},b),silent:!0}))}},splitArea:function(t,e,r,n){AQ(t,r,n,n)}},C3=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(fr);mi(C3,l0.prototype);var fxe=function(t){he(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},e.prototype.pointToData=function(r,n){return this.coordinateSystem.pointToData(r)[0]},e}(Po),ZQ=["single"],hxe=function(){function t(e,r,n){this.type="single",this.dimension="single",this.dimensions=ZQ,this.axisPointerEnabled=!0,this.model=e,this._init(e,r,n)}return t.prototype._init=function(e,r,n){var i=this.dimension,a=new fxe(i,y2(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},t.prototype.update=function(e,r){e.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();G(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),Ap(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(e,r){this._rect=ri({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var e=this._rect,r=this._axis,n=r.isHorizontal(),i=n?[0,e.width]:[0,e.height],a=r.inverse?1:0;r.setExtent(i[a],i[1-a]),this._updateAxisTransform(r,n?e.x:e.y)},t.prototype._updateAxisTransform=function(e,r){var n=e.getExtent(),i=n[0]+n[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+r}:function(o){return i-o+r},e.toLocalCoord=a?function(o){return o-r}:function(o){return i-o+r}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(e){var r=this.getRect(),n=this.getAxis(),i=n.orient;return i==="horizontal"?n.contain(n.toLocalCoord(e[0]))&&e[1]>=r.y&&e[1]<=r.y+r.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=r.y&&e[0]<=r.y+r.height},t.prototype.pointToData=function(e){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(e[r.orient==="horizontal"?0:1]))]},t.prototype.dataToPoint=function(e){var r=this.getAxis(),n=this.getRect(),i=[],a=r.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=r.toGlobalCoord(r.dataToCoord(+e)),i[1-a]=a===0?n.y+n.height/2:n.x+n.width/2,i},t.prototype.convertToPixel=function(e,r,n){var i=oV(r);return i===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var i=oV(r);return i===this?this.pointToData(n):null},t}();function oV(t){var e=t.seriesModel,r=t.singleAxisModel;return r&&r.coordinateSystem||e&&e.coordinateSystem}function dxe(t,e){var r=[];return t.eachComponent("singleAxis",function(n,i){var a=new hxe(n,t,e);a.name="single_"+i,a.resize(n,e),n.coordinateSystem=a,r.push(a)}),t.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var i=n.getReferringComponents("singleAxis",Ci).models[0];n.coordinateSystem=i&&i.coordinateSystem}}),r}var pxe={create:dxe,dimensions:ZQ},sV=["x","y"],vxe=["width","height"],gxe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(r,n,i,a,o){var s=i.axis,l=s.coordinateSystem,u=gM(l,1-Fw(s)),c=l.dataToPoint(n)[0],f=a.get("type");if(f&&f!=="none"){var h=DD(a),d=mxe[f](s,c,u);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=gR(i);OQ(n,r,p,i,a,o)},e.prototype.getHandleTransform=function(r,n,i){var a=gR(n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=ID(n.axis,r,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(r,n,i,a){var o=i.axis,s=o.coordinateSystem,l=Fw(o),u=gM(s,l),c=[r.x,r.y];c[l]+=n[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var f=gM(s,1-l),h=(f[1]+f[0])/2,d=[h,h];return d[l]=c[l],{x:c[0],y:c[1],rotation:r.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},e}(LD),mxe={line:function(t,e,r){var n=ND([e,r[0]],[e,r[1]],Fw(t));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(t,e,r){var n=t.getBandWidth(),i=r[1]-r[0];return{type:"Rect",shape:kQ([e-n/2,r[0]],[n,i],Fw(t))}}};function Fw(t){return t.isHorizontal()?0:1}function gM(t,e){var r=t.getRect();return[r[sV[e]],r[sV[e]]+r[vxe[e]]]}var yxe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="single",e}(_n);function _xe(t){Ot(w2),jp.registerAxisPointerClass("SingleAxisPointer",gxe),t.registerComponentView(yxe),t.registerComponentView(uxe),t.registerComponentModel(C3),ym(t,"single",C3,C3.defaultOption),t.registerCoordinateSystem("single",pxe)}function xxe(t){Sxe(t),bxe(t)}function Sxe(t){if(!t.parallel){var e=!1;G(t.series,function(r){r&&r.type==="parallel"&&(e=!0)}),e&&(t.parallel=[{}])}}function bxe(t){var e=gn(t.parallelAxis);G(e,function(r){if(Nt(r)){var n=r.parallelIndex||0,i=gn(t.parallel)[n];i&&i.parallelAxisDefault&&xt(r,i.parallelAxisDefault,!1)}})}var wxe=5,Txe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){this._model=r,this._api=i,this._handlers||(this._handlers={},G(Cxe,function(a,o){i.getZr().on(o,this._handlers[o]=pt(a,this))},this)),i0(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(r,n){h_(this,"_throttledDispatchExpand"),G(this._handlers,function(i,a){n.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},e.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(Ae({type:"parallelAxisExpand"},r))},e.type="parallel",e}(_n),Cxe={mousedown:function(t){mM(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(mM(this,"click")&&e){var r=[t.offsetX,t.offsetY],n=Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2);if(n>wxe)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!mM(this,"mousemove"))){var e=this._model,r=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),n=r.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function mM(t,e){var r=t._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===e}var Exe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(r){var n=this.option;r&&xt(n,r,!0),this._initDimensions()},e.prototype.contains=function(r,n){var i=r.get("parallelIndex");return i!=null&&n.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(r){G(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){r.hasOwnProperty(n)&&(this.option[n]=r[n])},this)},e.prototype._initDimensions=function(){var r=this.dimensions=[],n=this.parallelAxisIndex=[],i=hn(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);G(i,function(a){r.push("dim"+a.get("dim")),n.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(fr),Axe=function(t){he(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(Po);function Xp(t,e,r,n,i,a){t=t||0;var o=r[1]-r[0];if(i!=null&&(i=Xv(i,[0,o])),a!=null&&(a=Math.max(a,i!=null?i:0)),n==="all"){var s=Math.abs(e[1]-e[0]);s=Xv(s,[0,o]),i=a=Xv(s,[i,a]),n=0}e[0]=Xv(e[0],r),e[1]=Xv(e[1],r);var l=yM(e,n);e[n]+=t;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,e[n]=Xv(e[n],c);var f;return f=yM(e,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(e[1-n]=e[n]+l.sign*i),f=yM(e,n),a!=null&&f.span>a&&(e[1-n]=e[n]+f.sign*a),e}function yM(t,e){var r=t[e]-t[1-e];return{span:Math.abs(r),sign:r>0?-1:r<0?1:e?-1:1}}function Xv(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var _M=G,JQ=Math.min,QQ=Math.max,lV=Math.floor,Mxe=Math.ceil,uV=kn,Rxe=Math.PI,Pxe=function(){function t(e,r,n){this.type="parallel",this._axesMap=Tt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,r,n)}return t.prototype._init=function(e,r,n){var i=e.dimensions,a=e.parallelAxisIndex;_M(i,function(o,s){var l=a[s],u=r.getComponent("parallelAxis",l),c=this._axesMap.set(o,new Axe(o,y2(u),[0,0],u.get("type"),l)),f=c.type==="category";c.onBand=f&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},t.prototype.update=function(e,r){this._updateAxesFromSeries(this._model,e)},t.prototype.containPoint=function(e){var r=this._makeLayoutInfo(),n=r.axisBase,i=r.layoutBase,a=r.pixelDimIndex,o=e[1-a],s=e[a];return o>=n&&o<=n+r.axisLength&&s>=i&&s<=i+r.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(e,r){r.eachSeries(function(n){if(e.contains(n,r)){var i=n.getData();_M(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),Ap(o.scale,o.model)},this)}},this)},t.prototype.resize=function(e,r){this._rect=ri(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var e=this._model,r=this._rect,n=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=r[i[o]],l=[0,s],u=this.dimensions.length,c=WS(e.get("axisExpandWidth"),l),f=WS(e.get("axisExpandCount")||0,[0,u]),h=e.get("axisExpandable")&&u>3&&u>f&&f>1&&c>0&&s>0,d=e.get("axisExpandWindow"),p;if(d)p=WS(d[1]-d[0],l),d[1]=d[0]+p;else{p=WS(c*(f-1),l);var v=e.get("axisExpandCenter")||lV(u/2);d=[c*v-p/2],d[1]=d[0]+p}var g=(s-p)/(u-f);g<3&&(g=0);var m=[lV(uV(d[0]/c,1))+1,Mxe(uV(d[1]/c,1))-1],x=g/c*d[0];return{layout:a,pixelDimIndex:o,layoutBase:r[n[o]],layoutLength:s,axisBase:r[n[1-o]],axisLength:r[i[1-o]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:d,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:x}},t.prototype._layoutAxes=function(){var e=this._rect,r=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;r.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),_M(n,function(o,s){var l=(i.axisExpandable?Dxe:Lxe)(s,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Rxe/2,vertical:0},f=[u[a].x+e.x,u[a].y+e.y],h=c[a],d=Xo();zp(d,d,h),Du(d,d,f),this._axesLayout[o]={position:f,rotation:h,transform:d,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(e){return this._axesMap.get(e)},t.prototype.dataToPoint=function(e,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(e),r)},t.prototype.eachActiveState=function(e,r,n,i){n==null&&(n=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];G(o,function(g){s.push(e.mapDimension(g)),l.push(a.get(g).model)});for(var u=this.hasAxisBrushed(),c=n;c<i;c++){var f=void 0;if(!u)f="normal";else{f="active";for(var h=e.getValues(s,c),d=0,p=o.length;d<p;d++){var v=l[d].getActiveState(h[d]);if(v==="inactive"){f="inactive";break}}}r(f,c)}},t.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,r=this._axesMap,n=!1,i=0,a=e.length;i<a;i++)r.get(e[i]).model.getActiveState()!=="normal"&&(n=!0);return n},t.prototype.axisCoordToPoint=function(e,r){var n=this._axesLayout[r];return Fl([e,0],n.transform)},t.prototype.getAxisLayout=function(e){return Ft(this._axesLayout[e])},t.prototype.getSlidedAxisExpandWindow=function(e){var r=this._makeLayoutInfo(),n=r.pixelDimIndex,i=r.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[n]-r.layoutBase-r.axisExpandWindow0Pos,l,u="slide",c=r.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),h=f[0]!=null;if(c)h&&c&&s<a*f[0]?(u="jump",l=s-a*f[2]):h&&c&&s>a*(1-f[0])?(u="jump",l=s-a*(1-f[2])):(l=s-a*f[1])>=0&&(l=s-a*(1-f[1]))<=0&&(l=0),l*=r.axisExpandWidth/c,l?Xp(l,i,o,"all"):u="none";else{var d=i[1]-i[0],p=o[1]*s/d;i=[QQ(0,p-d/2)],i[1]=JQ(o[1],i[0]+d),i[0]=i[1]-d}return{axisExpandWindow:i,behavior:u}},t}();function WS(t,e){return JQ(QQ(t,e[0]),e[1])}function Lxe(t,e){var r=e.layoutLength/(e.axisCount-1);return{position:r*t,axisNameAvailableWidth:r,axisLabelShow:!0}}function Dxe(t,e){var r=e.layoutLength,n=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,u=!1,c;return t<o[0]?(s=t*a,c=a):t<=o[1]?(s=e.axisExpandWindow0Pos+t*n-e.axisExpandWindow[0],l=n,u=!0):(s=r-(i-1-t)*a,c=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function Ixe(t,e){var r=[];return t.eachComponent("parallel",function(n,i){var a=new Pxe(n,t,e);a.name="parallel_"+i,a.resize(n,e),n.coordinateSystem=a,a.model=n,r.push(a)}),t.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var i=n.getReferringComponents("parallel",Ci).models[0];n.coordinateSystem=i.coordinateSystem}}),r}var Nxe={create:Ixe},mR=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.activeIntervals=[],r}return e.prototype.getAreaSelectStyle=function(){return Tp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(r){var n=this.activeIntervals=Ft(r);if(n)for(var i=n.length-1;i>=0;i--)Ys(n[i])},e.prototype.getActiveState=function(r){var n=this.activeIntervals;if(!n.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(n.length===1){var i=n[0];if(i[0]<=r&&r<=i[1])return"active"}else for(var a=0,o=n.length;a<o;a++)if(n[a][0]<=r&&r<=n[a][1])return"active";return"inactive"},e}(fr);mi(mR,l0);var Lp=!0,R_=Math.min,_m=Math.max,Oxe=Math.pow,kxe=1e4,Fxe=6,Bxe=6,cV="globalPan",zxe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Uxe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},fV={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Vxe=0,WD=function(t){he(e,t);function e(r){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=r,n.group=new Vt,n._uid="brushController_"+Vxe++,G(Kxe,function(i,a){this._handlers[a]=pt(i,this)},n),n}return e.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},e.prototype._doEnableBrush=function(r){var n=this._zr;this._enableGlobalPan||Q2e(n,cV,this._uid),G(this._handlers,function(i,a){n.on(a,i)}),this._brushType=r.brushType,this._brushOption=xt(Ft(fV),r,!0)},e.prototype._doDisableBrush=function(){var r=this._zr;exe(r,cV,this._uid),G(this._handlers,function(n,i){r.off(i,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(r){if(r&&r.length){var n=this._panels={};G(r,function(i){n[i.panelId]=Ft(i)})}else this._panels=null;return this},e.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(r){r=Oe(r,function(h){return xt(Ft(fV),h,!0)});var n="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Bc(i,r,u,l).add(c).update(c).remove(f).execute(),this;function l(h,d){return(h.id!=null?h.id:n+d)+"-"+h.brushType}function u(h,d){return l(h.__brushOption,d)}function c(h,d){var p=r[h];if(d!=null&&i[d]===s)a[h]=i[d];else{var v=a[h]=d!=null?(i[d].__brushOption=p,i[d]):tee(o,eee(o,p));$D(o,v)}}function f(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),yR(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(al);function eee(t,e){var r=v4[e.brushType].createCover(t,e);return r.__brushOption=e,nee(r,e),t.group.add(r),r}function tee(t,e){var r=jD(e);return r.endCreating&&(r.endCreating(t,e),nee(e,e.__brushOption)),e}function ree(t,e){var r=e.__brushOption;jD(e).updateCoverShape(t,e,r.range,r)}function nee(t,e){var r=e.z;r==null&&(r=kxe),t.traverse(function(n){n.z=r,n.z2=r})}function $D(t,e){jD(e).updateCommon(t,e),ree(t,e)}function jD(t){return v4[t.__brushOption.brushType]}function XD(t,e,r){var n=t._panels;if(!n)return Lp;var i,a=t._transform;return G(n,function(o){o.isTargetByCursor(e,r,a)&&(i=o)}),i}function iee(t,e){var r=t._panels;if(!r)return Lp;var n=e.__brushOption.panelId;return n!=null?r[n]:Lp}function yR(t){var e=t._covers,r=e.length;return G(e,function(n){t.group.remove(n)},t),e.length=0,!!r}function Dp(t,e){var r=Oe(t._covers,function(n){var i=n.__brushOption,a=Ft(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});t.trigger("brush",{areas:r,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Hxe(t){var e=t._track;if(!e.length)return!1;var r=e[e.length-1],n=e[0],i=r[0]-n[0],a=r[1]-n[1],o=Oxe(i*i+a*a,.5);return o>Fxe}function aee(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function oee(t,e,r,n){var i=new Vt;return i.add(new Mr({name:"main",style:KD(r),silent:!0,draggable:!0,cursor:"move",drift:Zt(hV,t,e,i,["n","s","w","e"]),ondragend:Zt(Dp,e,{isEnd:!0})})),G(n,function(a){i.add(new Mr({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Zt(hV,t,e,i,a),ondragend:Zt(Dp,e,{isEnd:!0})}))}),i}function see(t,e,r,n){var i=n.brushStyle.lineWidth||0,a=_m(i,Bxe),o=r[0][0],s=r[1][0],l=o-i/2,u=s-i/2,c=r[0][1],f=r[1][1],h=c-a+i/2,d=f-a+i/2,p=c-o,v=f-s,g=p+i,m=v+i;nc(t,e,"main",o,s,p,v),n.transformable&&(nc(t,e,"w",l,u,a,m),nc(t,e,"e",h,u,a,m),nc(t,e,"n",l,u,g,a),nc(t,e,"s",l,d,g,a),nc(t,e,"nw",l,u,a,a),nc(t,e,"ne",h,u,a,a),nc(t,e,"sw",l,d,a,a),nc(t,e,"se",h,d,a,a))}function _R(t,e){var r=e.__brushOption,n=r.transformable,i=e.childAt(0);i.useStyle(KD(r)),i.attr({silent:!n,cursor:n?"move":"default"}),G([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?xR(t,a[0]):Wxe(t,a);o&&o.attr({silent:!n,invisible:!n,cursor:n?Uxe[s]+"-resize":null})})}function nc(t,e,r,n,i,a,o){var s=e.childOfName(r);s&&s.setShape(jxe(YD(t,e,[[n,i],[n+a,i+o]])))}function KD(t){return At({strokeNoScale:!0},t.brushStyle)}function lee(t,e,r,n){var i=[R_(t,r),R_(e,n)],a=[_m(t,r),_m(e,n)];return[[i[0],a[0]],[i[1],a[1]]]}function Gxe(t){return dp(t.group)}function xR(t,e){var r={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},i=HT(r[e],Gxe(t));return n[i]}function Wxe(t,e){var r=[xR(t,e[0]),xR(t,e[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function hV(t,e,r,n,i,a){var o=r.__brushOption,s=t.toRectRange(o.range),l=uee(e,i,a);G(n,function(u){var c=zxe[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=t.fromRectRange(lee(s[0][0],s[1][0],s[0][1],s[1][1])),$D(e,r),Dp(e,{isEnd:!1})}function $xe(t,e,r,n){var i=e.__brushOption.range,a=uee(t,r,n);G(i,function(o){o[0]+=a[0],o[1]+=a[1]}),$D(t,e),Dp(t,{isEnd:!1})}function uee(t,e,r){var n=t.group,i=n.transformCoordToLocal(e,r),a=n.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function YD(t,e,r){var n=iee(t,e);return n&&n!==Lp?n.clipPath(r,t._transform):Ft(r)}function jxe(t){var e=R_(t[0][0],t[1][0]),r=R_(t[0][1],t[1][1]),n=_m(t[0][0],t[1][0]),i=_m(t[0][1],t[1][1]);return{x:e,y:r,width:n-e,height:i-r}}function Xxe(t,e,r){if(!(!t._brushType||Yxe(t,e.offsetX,e.offsetY))){var n=t._zr,i=t._covers,a=XD(t,e,r);if(!t._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Lp||s.panelId===a.panelId)&&v4[s.brushType].contain(i[o],r[0],r[1]))return}a&&n.setCursorStyle("crosshair")}}function SR(t){var e=t.event;e.preventDefault&&e.preventDefault()}function bR(t,e,r){return t.childOfName("main").contain(e,r)}function cee(t,e,r,n){var i=t._creatingCover,a=t._creatingPanel,o=t._brushOption,s;if(t._track.push(r.slice()),Hxe(t)||i){if(a&&!i){o.brushMode==="single"&&yR(t);var l=Ft(o);l.brushType=dV(l.brushType,a),l.panelId=a===Lp?null:a.panelId,i=t._creatingCover=eee(t,l),t._covers.push(i)}if(i){var u=v4[dV(t._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(YD(t,i,t._track)),n&&(tee(t,i),u.updateCommon(t,i)),ree(t,i),s={isEnd:n}}}else n&&o.brushMode==="single"&&o.removeOnClick&&XD(t,e,r)&&yR(t)&&(s={isEnd:n,removeOnClick:!0});return s}function dV(t,e){return t==="auto"?e.defaultBrushType:t}var Kxe={mousedown:function(t){if(this._dragging)pV(this,t);else if(!t.target||!t.target.draggable){SR(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var r=this._creatingPanel=XD(this,t,e);r&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,r=t.offsetY,n=this.group.transformCoordToLocal(e,r);if(Xxe(this,t,n),this._dragging){SR(t);var i=cee(this,t,n,!1);i&&Dp(this,i)}},mouseup:function(t){pV(this,t)}};function pV(t,e){if(t._dragging){SR(e);var r=e.offsetX,n=e.offsetY,i=t.group.transformCoordToLocal(r,n),a=cee(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&Dp(t,a)}}function Yxe(t,e,r){var n=t._zr;return e<0||e>n.getWidth()||r<0||r>n.getHeight()}var v4={lineX:vV(0),lineY:vV(1),rect:{createCover:function(t,e){function r(n){return n}return oee({toRectRange:r,fromRectRange:r},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=aee(t);return lee(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,r,n){see(t,e,r,n)},updateCommon:_R,contain:bR},polygon:{createCover:function(t,e){var r=new Vt;return r.add(new Ro({name:"main",style:KD(e),silent:!0})),r},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new To({name:"main",draggable:!0,drift:Zt($xe,t,e),ondragend:Zt(Dp,t,{isEnd:!0})}))},updateCoverShape:function(t,e,r,n){e.childAt(0).setShape({points:YD(t,e,r)})},updateCommon:_R,contain:bR}};function vV(t){return{createCover:function(e,r){return oee({toRectRange:function(n){var i=[n,[0,100]];return t&&i.reverse(),i},fromRectRange:function(n){return n[t]}},e,r,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var r=aee(e),n=R_(r[0][t],r[1][t]),i=_m(r[0][t],r[1][t]);return[n,i]},updateCoverShape:function(e,r,n,i){var a,o=iee(e,r);if(o!==Lp&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,a];t&&l.reverse(),see(e,r,l,i)},updateCommon:_R,contain:bR}}function fee(t){return t=qD(t),function(e){return jY(e,t)}}function hee(t,e){return t=qD(t),function(r){var n=e!=null?e:r,i=n?t.width:t.height,a=n?t.x:t.y;return[a,a+(i||0)]}}function dee(t,e,r){var n=qD(t);return function(i,a){return n.contain(a[0],a[1])&&!p4(i,e,r)}}function qD(t){return sr.create(t)}var qxe=["axisLine","axisTickLabel","axisName"],Zxe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n){t.prototype.init.apply(this,arguments),(this._brushController=new WD(n.getZr())).on("brush",pt(this._onBrush,this))},e.prototype.render=function(r,n,i,a){if(!Jxe(r,n,a)){this.axisModel=r,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Vt,this.group.add(this._axisGroup),!!r.get("show")){var s=eSe(r,n),l=s.coordinateSystem,u=r.getAreaSelectStyle(),c=u.width,f=r.axis.dim,h=l.getAxisLayout(f),d=Ae({strokeContainThreshold:c},h),p=new yo(r,d);G(qxe,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(d,u,r,s,c,i),p2(o,this._axisGroup,r)}}},e.prototype._refreshBrushController=function(r,n,i,a,o,s){var l=i.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),f=sr.create({x:l[0],y:-o/2,width:u,height:o});f.x-=c,f.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:fee(f),isTargetByCursor:dee(f,s,a),getLinearBrushOtherExtent:hee(f,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(Qxe(i))},e.prototype._onBrush=function(r){var n=r.areas,i=this.axisModel,a=i.axis,o=Oe(n,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(_n);function Jxe(t,e,r){return r&&r.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:r})[0]===t}function Qxe(t){var e=t.axis;return Oe(t.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(r[0],!0),e.dataToCoord(r[1],!0)]}})}function eSe(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var tSe={type:"axisAreaSelect",event:"axisAreaSelected"};function rSe(t){t.registerAction(tSe,function(e,r){r.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,r){r.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})})}var nSe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function pee(t){t.registerComponentView(Txe),t.registerComponentModel(Exe),t.registerCoordinateSystem("parallel",Nxe),t.registerPreprocessor(xxe),t.registerComponentModel(mR),t.registerComponentView(Zxe),ym(t,"parallel",mR,nSe),rSe(t)}var iSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n,i){var a=e0(r);t.prototype.init.apply(this,arguments),gV(r,a)},e.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),gV(this.option,r)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(fr);function gV(t,e){var r=t.cellSize,n;De(r)?n=r:n=t.cellSize=[r,r],n.length===1&&(n[1]=n[0]);var i=Oe([0,1],function(a){return jhe(e,a)&&(n[a]="auto"),n[a]!=null&&n[a]!=="auto"});bh(t,e,{type:"box",ignoreSize:i})}var aSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=this.group;a.removeAll();var o=r.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=n.getLocaleModel();this._renderDayRect(r,s,a),this._renderLines(r,s,l,a),this._renderYearText(r,s,l,a),this._renderMonthText(r,u,l,a),this._renderWeekText(r,u,s,l,a)},e.prototype._renderDayRect=function(r,n,i){for(var a=r.coordinateSystem,o=r.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=n.start.time;u<=n.end.time;u=a.getNextNDay(u,1).time){var c=a.dataToRect([u],!1).tl,f=new Mr({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:o});i.add(f)}},e.prototype._renderLines=function(r,n,i,a){var o=this,s=r.coordinateSystem,l=r.getModel(["splitLine","lineStyle"]).getLineStyle(),u=r.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var f=n.start,h=0;f.time<=n.end.time;h++){p(f.formatedDate),h===0&&(f=s.getDateInfo(n.start.y+"-"+n.start.m));var d=f.date;d.setMonth(d.getMonth()+1),f=s.getDateInfo(d)}p(s.getNextNDay(n.end.time,1).formatedDate);function p(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var g=o._getLinePointsOfOneWeek(r,v,i);o._tlpoints.push(g[0]),o._blpoints.push(g[g.length-1]),u&&o._drawSplitline(g,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,i),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,i),l,a)},e.prototype._getEdgesPoints=function(r,n,i){var a=[r[0].slice(),r[r.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-n/2,a[1][o]=a[1][o]+n/2,a},e.prototype._drawSplitline=function(r,n,i){var a=new Ro({z2:20,shape:{points:r},style:n});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(r,n,i){for(var a=r.coordinateSystem,o=a.getDateInfo(n),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),c=a.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[i==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(r,n){return ft(r)&&r?Ghe(r,n):Lt(r)?r(n):n.nameMap},e.prototype._yearTextPositionControl=function(r,n,i,a,o){var s=n[0],l=n[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(r,n,i,a){var o=r.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,f=(u[0][1]+u[1][1])/2,h=i==="horizontal"?0:1,d={top:[c,u[h][1]],bottom:[c,u[1-h][1]],left:[u[1-h][0],f],right:[u[h][0],f]},p=n.start.y;+n.end.y>+n.start.y&&(p=p+"-"+n.end.y);var v=o.get("formatter"),g={start:n.start.y,end:n.end.y,nameMap:p},m=this._formatterLabel(v,g),x=new Ar({z2:30,style:dn(o,{text:m})});x.attr(this._yearTextPositionControl(x,d[l],i,l,s)),a.add(x)}},e.prototype._monthTextPositionControl=function(r,n,i,a,o){var s="left",l="top",u=r[0],c=r[1];return i==="horizontal"?(c=c+o,n&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,n&&(l="middle"),a==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(r,n,i,a){var o=r.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),c=o.get("align"),f=[this._tlpoints,this._blpoints];(!s||ft(s))&&(s&&(n=R6(s)||n),s=n.get(["time","monthAbbr"])||[]);var h=u==="start"?0:1,d=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",v=0;v<f[h].length-1;v++){var g=f[h][v].slice(),m=this._firstDayOfMonth[v];if(p){var x=this._firstDayPoints[v];g[d]=(x[d]+f[0][v+1][d])/2}var S=o.get("formatter"),b=s[+m.m-1],T={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:b},w=this._formatterLabel(S,T),E=new Ar({z2:30,style:Ae(dn(o,{text:w}),this._monthTextPositionControl(g,p,i,u,l))});a.add(E)}}},e.prototype._weekTextPositionControl=function(r,n,i,a,o){var s="center",l="middle",u=r[0],c=r[1],f=i==="start";return n==="horizontal"?(u=u+a+(f?1:-1)*o[0]/2,s=f?"right":"left"):(c=c+a+(f?1:-1)*o[1]/2,l=f?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(r,n,i,a,o){var s=r.getModel("dayLabel");if(s.get("show")){var l=r.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),f=s.get("margin"),h=l.getFirstDayOfWeek();if(!c||ft(c)){c&&(n=R6(c)||n);var d=n.get(["time","dayOfWeekShort"]);c=d||Oe(n.get(["time","dayOfWeekAbbr"]),function(T){return T[0]})}var p=l.getNextNDay(i.end.time,7-i.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];f=Ze(f,Math.min(v[1],v[0])),u==="start"&&(p=l.getNextNDay(i.start.time,-(7+i.fweek)).time,f=-f);for(var g=0;g<7;g++){var m=l.getNextNDay(p,g),x=l.dataToRect([m.time],!1).center,S=g;S=Math.abs((g+h)%7);var b=new Ar({z2:30,style:Ae(dn(s,{text:c[S]}),this._weekTextPositionControl(x,a,u,f,v))});o.add(b)}}},e.type="calendar",e}(_n),xM=864e5,oSe=function(){function t(e,r,n){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=rl(e);var r=e.getFullYear(),n=e.getMonth()+1,i=n<10?"0"+n:""+n,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:r+"",m:i,d:o,day:s,time:e.getTime(),formatedDate:r+"-"+i+"-"+o,date:e}},t.prototype.getNextNDay=function(e,r){return r=r||0,r===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+r),this.getDateInfo(e))},t.prototype.update=function(e,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];G([0,1],function(f){c(a,f)&&(o[i[f]]=a[f]*s[f])});var l={width:r.getWidth(),height:r.getHeight()},u=this._rect=ri(o,l);G([0,1],function(f){c(a,f)||(a[f]=u[i[f]]/s[f])});function c(f,h){return f[h]!=null&&f[h]!=="auto"}this._sw=a[0],this._sh=a[1]},t.prototype.dataToPoint=function(e,r){De(e)&&(e=e[0]),r==null&&(r=!0);var n=this.getDateInfo(e),i=this._rangeInfo,a=n.formatedDate;if(r&&!(n.time>=i.start.time&&n.time<i.end.time+xM))return[NaN,NaN];var o=n.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var r=this.pointToDate(e);return r&&r.time},t.prototype.dataToRect=function(e,r){var n=this.dataToPoint(e,r);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var r=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,r-1,i):this._getDateByWeeksAndDay(r,n-1,i)},t.prototype.convertToPixel=function(e,r,n){var i=mV(r);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,r,n){var i=mV(r);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),r;if(De(e)&&e.length===1&&(e=e[0]),De(e))r=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(r=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);r=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(r=[n,n])}if(!r)return e;var s=this._getRangeInfo(r);return s.start.time>s.end.time&&r.reverse(),r},t.prototype._getRangeInfo=function(e){var r=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],n;r[0].time>r[1].time&&(n=!0,r.reverse());var i=Math.floor(r[1].time/xM)-Math.floor(r[0].time/xM)+1,a=new Date(r[0].time),o=a.getDate(),s=r[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-r[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-r[1].time)*u>0;)i-=u,a.setDate(l-u);var c=Math.floor((i+r[0].day+6)/7),f=n?-c+1:c-1;return n&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:i,weeks:c,nthWeek:f,fweek:r[0].day,lweek:r[1].day}},t.prototype._getDateByWeeksAndDay=function(e,r,n){var i=this._getRangeInfo(n);if(e>i.weeks||e===0&&r<i.fweek||e===i.weeks&&r>i.lweek)return null;var a=(e-1)*7-i.fweek+r,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},t.create=function(e,r){var n=[];return e.eachComponent("calendar",function(i){var a=new t(i);n.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},t.dimensions=["time","value"],t}();function mV(t){var e=t.calendarModel,r=t.seriesModel,n=e?e.coordinateSystem:r?r.coordinateSystem:null;return n}function sSe(t){t.registerComponentModel(iSe),t.registerComponentView(aSe),t.registerCoordinateSystem("calendar",oSe)}function lSe(t,e){var r=t.existing;if(e.id=t.keyInfo.id,!e.type&&r&&(e.type=r.type),e.parentId==null){var n=e.parentOption;n?e.parentId=n.id:r&&(e.parentId=r.parentId)}e.parentOption=null}function yV(t,e){var r;return G(e,function(n){t[n]!=null&&t[n]!=="auto"&&(r=!0)}),r}function uSe(t,e,r){var n=Ae({},r),i=t[e],a=r.$action||"merge";a==="merge"?i?(xt(i,n,!0),bh(i,n,{ignoreSize:!0}),hq(r,i),$S(r,i),$S(r,i,"shape"),$S(r,i,"style"),$S(r,i,"extra"),r.clipPath=i.clipPath):t[e]=n:a==="replace"?t[e]=n:a==="remove"&&i&&(t[e]=null)}var vee=["transition","enterFrom","leaveTo"],cSe=vee.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function $S(t,e,r){if(r&&(!t[r]&&e[r]&&(t[r]={}),t=t[r],e=e[r]),!(!t||!e))for(var n=r?vee:cSe,i=0;i<n.length;i++){var a=n[i];t[a]==null&&e[a]!=null&&(t[a]=e[a])}}function fSe(t,e){if(t&&(t.hv=e.hv=[yV(e,["left","right"]),yV(e,["top","bottom"])],t.type==="group")){var r=t,n=e;r.width==null&&(r.width=n.width=0),r.height==null&&(r.height=n.height=0)}}var hSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.preventAutoZ=!0,r}return e.prototype.mergeOption=function(r,n){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,r,n),this.option.elements=i},e.prototype.optionUpdated=function(r,n){var i=this.option,a=(n?i:r).elements,o=i.elements=n?[]:i.elements,s=[];this._flatten(a,s,null);var l=uY(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];G(l,function(c,f){var h=c.newOption;h&&(u.push(h),lSe(c,h),uSe(o,f,h),fSe(o[f],h))},this),i.elements=hn(o,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(r,n,i){G(r,function(a){if(a){i&&(a.parentOption=i),n.push(a);var o=a.children;o&&o.length&&this._flatten(o,n,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},e.type="graphic",e.defaultOption={elements:[]},e}(fr);function gee(t,e,r,n){return t&&(t.legacy||t.legacy!==!1&&!r&&!n&&e!=="tspan"&&(e==="text"||_t(t,"text")))}function mee(t,e,r){var n=t,i,a,o;if(e==="text")o=n;else{o={},_t(n,"text")&&(o.text=n.text),_t(n,"rich")&&(o.rich=n.rich),_t(n,"textFill")&&(o.fill=n.textFill),_t(n,"textStroke")&&(o.stroke=n.textStroke),_t(n,"fontFamily")&&(o.fontFamily=n.fontFamily),_t(n,"fontSize")&&(o.fontSize=n.fontSize),_t(n,"fontStyle")&&(o.fontStyle=n.fontStyle),_t(n,"fontWeight")&&(o.fontWeight=n.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=_t(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),_t(n,"textPosition")&&(i.position=n.textPosition),_t(n,"textOffset")&&(i.offset=n.textOffset),_t(n,"textRotation")&&(i.rotation=n.textRotation),_t(n,"textDistance")&&(i.distance=n.textDistance)}return _V(o,t),G(o.rich,function(l){_V(l,l)}),{textConfig:i,textContent:a}}function _V(t,e){e&&(e.font=e.textFont||e.font,_t(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),_t(e,"textAlign")&&(t.align=e.textAlign),_t(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),_t(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),_t(e,"textWidth")&&(t.width=e.textWidth),_t(e,"textHeight")&&(t.height=e.textHeight),_t(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),_t(e,"textPadding")&&(t.padding=e.textPadding),_t(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),_t(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),_t(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),_t(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),_t(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),_t(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),_t(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function xV(t,e,r){var n=t;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,a=t.fill||"#000";SV(n,e);var o=n.textFill==null;return i?o&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=a),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(o&&(n.textFill=t.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=e.text,n.rich=e.rich,G(e.rich,function(s){SV(s,s)}),n}function SV(t,e){e&&(_t(e,"fill")&&(t.textFill=e.fill),_t(e,"stroke")&&(t.textStroke=e.fill),_t(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),_t(e,"font")&&(t.font=e.font),_t(e,"fontStyle")&&(t.fontStyle=e.fontStyle),_t(e,"fontWeight")&&(t.fontWeight=e.fontWeight),_t(e,"fontSize")&&(t.fontSize=e.fontSize),_t(e,"fontFamily")&&(t.fontFamily=e.fontFamily),_t(e,"align")&&(t.textAlign=e.align),_t(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),_t(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),_t(e,"width")&&(t.textWidth=e.width),_t(e,"height")&&(t.textHeight=e.height),_t(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),_t(e,"padding")&&(t.textPadding=e.padding),_t(e,"borderColor")&&(t.textBorderColor=e.borderColor),_t(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),_t(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),_t(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),_t(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),_t(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),_t(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),_t(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),_t(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),_t(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),_t(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var yee={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},bV=Er(yee);Gl(Iu,function(t,e){return t[e]=1,t},{});Iu.join(", ");var Bw=["","style","shape","extra"],xm=kr();function ZD(t,e,r,n,i){var a=t+"Animation",o=Ym(t,n,i)||{},s=xm(e).userDuring;return o.duration>0&&(o.during=s?pt(mSe,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=t),Ae(o,r[a]),o}function E3(t,e,r,n){n=n||{};var i=n.dataIndex,a=n.isInit,o=n.clearStyle,s=r.isAnimationEnabled(),l=xm(t),u=e.style;l.userDuring=e.during;var c={},f={};if(_Se(t,e,f),TV("shape",e,f),TV("extra",e,f),!a&&s&&(ySe(t,e,c),wV("shape",t,e,c),wV("extra",t,e,c),xSe(t,e,u,c)),f.style=u,dSe(t,f,o),vSe(t,e),s)if(a){var h={};G(Bw,function(p){var v=p?e[p]:e;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),Ae(p?h[p]:h,v.enterFrom))});var d=ZD("enter",t,e,r,i);d.duration>0&&t.animateFrom(h,d)}else pSe(t,e,i||0,r,c);_ee(t,e),u?t.dirty():t.markRedraw()}function _ee(t,e){for(var r=xm(t).leaveToProps,n=0;n<Bw.length;n++){var i=Bw[n],a=i?e[i]:e;a&&a.leaveTo&&(r||(r=xm(t).leaveToProps={}),i&&(r[i]=r[i]||{}),Ae(i?r[i]:r,a.leaveTo))}}function g4(t,e,r,n){if(t){var i=t.parent,a=xm(t).leaveToProps;if(a){var o=ZD("update",t,e,r,0);o.done=function(){i.remove(t)},t.animateTo(a,o)}else i.remove(t)}}function gp(t){return t==="all"}function dSe(t,e,r){var n=e.style;if(!t.isGroup&&n){if(r){t.useStyle({});for(var i=t.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(t.style)}}t.setStyle(n)}e&&(e.style=null,e&&t.attr(e),e.style=n)}function pSe(t,e,r,n,i){if(i){var a=ZD("update",t,e,n,r);a.duration>0&&t.animateFrom(i,a)}}function vSe(t,e){_t(e,"silent")&&(t.silent=e.silent),_t(e,"ignore")&&(t.ignore=e.ignore),t instanceof nl&&_t(e,"invisible")&&(t.invisible=e.invisible),t instanceof yr&&_t(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var hu={},gSe={setTransform:function(t,e){return hu.el[t]=e,this},getTransform:function(t){return hu.el[t]},setShape:function(t,e){var r=hu.el,n=r.shape||(r.shape={});return n[t]=e,r.dirtyShape&&r.dirtyShape(),this},getShape:function(t){var e=hu.el.shape;if(e)return e[t]},setStyle:function(t,e){var r=hu.el,n=r.style;return n&&(n[t]=e,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(t){var e=hu.el.style;if(e)return e[t]},setExtra:function(t,e){var r=hu.el.extra||(hu.el.extra={});return r[t]=e,this},getExtra:function(t){var e=hu.el.extra;if(e)return e[t]}};function mSe(){var t=this,e=t.el;if(e){var r=xm(e).userDuring,n=t.userDuring;if(r!==n){t.el=t.userDuring=null;return}hu.el=e,n(gSe)}}function wV(t,e,r,n){var i=r[t];if(i){var a=e[t],o;if(a){var s=r.transition,l=i.transition;if(l)if(!o&&(o=n[t]={}),gp(l))Ae(o,a);else for(var u=gn(l),c=0;c<u.length;c++){var f=u[c],h=a[f];o[f]=h}else if(gp(s)||hr(s,t)>=0){!o&&(o=n[t]={});for(var d=Er(a),c=0;c<d.length;c++){var f=d[c],h=a[f];SSe(i[f],h)&&(o[f]=h)}}}}}function TV(t,e,r){var n=e[t];if(n)for(var i=r[t]={},a=Er(n),o=0;o<a.length;o++){var s=a[o];i[s]=R1(n[s])}}function ySe(t,e,r){for(var n=e.transition,i=gp(n)?Iu:gn(n||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=t[o];r[o]=s}}}function _Se(t,e,r){for(var n=0;n<bV.length;n++){var i=bV[n],a=yee[i],o=e[i];o&&(r[a[0]]=o[0],r[a[1]]=o[1])}for(var n=0;n<Iu.length;n++){var s=Iu[n];e[s]!=null&&(r[s]=e[s])}}function xSe(t,e,r,n){if(r){var i=t.style,a;if(i){var o=r.transition,s=e.transition;if(o&&!gp(o)){var l=gn(o);!a&&(a=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];a[c]=f}}else if(t.getAnimationStyleProps&&(gp(s)||gp(o)||hr(s,"style")>=0)){var h=t.getAnimationStyleProps(),d=h?h.style:null;if(d){!a&&(a=n.style={});for(var p=Er(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];a[c]=f}}}}}}}function SSe(t,e){return Ya(t)?t!==e:t!=null&&isFinite(t)}var xee=kr(),bSe=["percent","easing","shape","style","extra"];function See(t){t.stopAnimation("keyframe"),t.attr(xee(t))}function zw(t,e,r){if(!(!r.isAnimationEnabled()||!e)){if(De(e)){G(e,function(s){zw(t,s,r)});return}var n=e.keyframes,i=e.duration;if(r&&i==null){var a=Ym("enter",r,0);i=a&&a.duration}if(!(!n||!i)){var o=xee(t);G(Bw,function(s){if(!(s&&!t[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),G(n,function(u){var c=t.animators,f=s?u[s]:u;if(f){var h=Er(f);if(s||(h=hn(h,function(v){return hr(bSe,v)<0})),!!h.length){l||(l=t.animate(s,e.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(o[s]=o[s]||{});var p=s?o[s]:o;G(h,function(v){p[v]=((s?t[s]:t)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var CV={path:null,compoundPath:null,group:Vt,image:aa,text:Ar},Hs=kr(),wSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(){this._elMap=Tt()},e.prototype.render=function(r,n,i){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,i)},e.prototype._updateElements=function(r){var n=r.useElOptionsToUpdate();if(n){var i=this._elMap,a=this.group,o=r.get("z"),s=r.get("zlevel");G(n,function(l){var u=Fi(l.id,null),c=u!=null?i.get(u):null,f=Fi(l.parentId,null),h=f!=null?i.get(f):a,d=l.type,p=l.style;d==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var v=l.textContent,g=l.textConfig;if(p&&gee(p,d,!!g,!!v)){var m=mee(p,d,!0);!g&&m.textConfig&&(g=l.textConfig=m.textConfig),!v&&m.textContent&&(v=m.textContent)}var x=TSe(l),S=l.$action||"merge",b=S==="merge",T=S==="replace";if(b){var w=!c,E=c;w?E=EV(u,h,l.type,i):(E&&(Hs(E).isNew=!1),See(E)),E&&(E3(E,x,r,{isInit:w}),AV(E,l,o,s))}else if(T){A3(c,l,i,r);var M=EV(u,h,l.type,i);M&&(E3(M,x,r,{isInit:!0}),AV(M,l,o,s))}else S==="remove"&&(_ee(c,l),A3(c,l,i,r));var A=i.get(u);if(A&&v)if(b){var R=A.getTextContent();R?R.attr(v):A.setTextContent(new Ar(v))}else T&&A.setTextContent(new Ar(v));if(A){var L=l.clipPath;if(L){var I=L.type,N=void 0,w=!1;if(b){var k=A.getClipPath();w=!k||Hs(k).type!==I,N=w?wR(I):k}else T&&(w=!0,N=wR(I));A.setClipPath(N),E3(N,L,r,{isInit:w}),zw(N,L.keyframeAnimation,r)}var z=Hs(A);A.setTextConfig(g),z.option=l,CSe(A,r,l),qm({el:A,componentModel:r,itemName:A.name,itemTooltipOption:l.tooltip}),zw(A,l.keyframeAnimation,r)}})}},e.prototype._relocate=function(r,n){for(var i=r.option.elements,a=this.group,o=this._elMap,s=n.getWidth(),l=n.getHeight(),u=["x","y"],c=0;c<i.length;c++){var f=i[c],h=Fi(f.id,null),d=h!=null?o.get(h):null;if(!(!d||!d.isGroup)){var p=d.parent,v=p===a,g=Hs(d),m=Hs(p);g.width=Ze(g.option.width,v?s:m.width)||0,g.height=Ze(g.option.height,v?l:m.height)||0}}for(var c=i.length-1;c>=0;c--){var f=i[c],h=Fi(f.id,null),d=h!=null?o.get(h):null;if(d){var p=d.parent,m=Hs(p),x=p===a?{width:s,height:l}:{width:m.width,height:m.height},S={},b=YT(d,f,x,null,{hv:f.hv,boundingMode:f.bounding},S);if(!Hs(d).isNew&&b){for(var T=f.transition,w={},E=0;E<u.length;E++){var M=u[E],A=S[M];T&&(gp(T)||hr(T,M)>=0)?w[M]=A:d[M]=A}Xr(d,w,r,0)}else d.attr(S)}}},e.prototype._clear=function(){var r=this,n=this._elMap;n.each(function(i){A3(i,Hs(i).option,n,r._lastGraphicModel)}),this._elMap=Tt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(_n);function wR(t){var e=_t(CV,t)?CV[t]:CL(t),r=new e({});return Hs(r).type=t,r}function EV(t,e,r,n){var i=wR(r);return e.add(i),n.set(t,i),Hs(i).id=t,Hs(i).isNew=!0,i}function A3(t,e,r,n){var i=t&&t.parent;i&&(t.type==="group"&&t.traverse(function(a){A3(a,e,r,n)}),g4(t,e,n),r.removeKey(Hs(t).id))}function AV(t,e,r,n){t.isGroup||G([["cursor",nl.prototype.cursor],["zlevel",n||0],["z",r||0],["z2",0]],function(i){var a=i[0];_t(e,a)?t[a]=Jt(e[a],i[1]):t[a]==null&&(t[a]=i[1])}),G(Er(e),function(i){if(i.indexOf("on")===0){var a=e[i];t[i]=Lt(a)?a:null}}),_t(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function TSe(t){return t=Ae({},t),G(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(fq),function(e){delete t[e]}),t}function CSe(t,e,r){var n=Ht(t).eventData;!t.silent&&!t.ignore&&!n&&(n=Ht(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=r.info)}function ESe(t){t.registerComponentModel(hSe),t.registerComponentView(wSe),t.registerPreprocessor(function(e){var r=e.graphic;De(r)?!r[0]||!r[0].elements?e.graphic=[{elements:r}]:e.graphic=[e.graphic[0]]:r&&!r.elements&&(e.graphic=[{elements:[r]}])})}var MV=["x","y","radius","angle","single"],ASe=["cartesian2d","polar","singleAxis"];function MSe(t){var e=t.get("coordinateSystem");return hr(ASe,e)>=0}function th(t){return t+"Axis"}function RSe(t,e){var r=Tt(),n=[],i=Tt();t.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,t.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),n.push(c),u(c)}function l(c){var f=!1;return c.eachTargetAxis(function(h,d){var p=r.get(h);p&&p[d]&&(f=!0)}),f}function u(c){c.eachTargetAxis(function(f,h){(r.get(f)||r.set(f,[]))[h]=!0})}return n}function bee(t){var e=t.ecModel,r={infoList:[],infoMap:Tt()};return t.eachTargetAxis(function(n,i){var a=e.getComponent(th(n),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=r.infoMap.get(s);l||(l={model:o,axisModels:[]},r.infoList.push(l),r.infoMap.set(s,l)),l.axisModels.push(a)}}}),r}var SM=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),P_=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return e.prototype.init=function(r,n,i){var a=RV(r);this.settledOption=a,this.mergeDefaultAndTheme(r,i),this._doInit(a)},e.prototype.mergeOption=function(r){var n=RV(r);xt(this.option,r,!0),xt(this.settledOption,n,!0),this._doInit(n)},e.prototype._doInit=function(r){var n=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var i=this.settledOption;G([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(n[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var r=this.get("orient",!0),n=this._targetAxisInfoMap=Tt(),i=this._fillSpecifiedTargetAxis(n);i?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(r){var n=!1;return G(MV,function(i){var a=this.getReferringComponents(th(i),Dce);if(a.specified){n=!0;var o=new SM;G(a.models,function(s){o.add(s.componentIndex)}),r.set(i,o)}},this),n},e.prototype._fillAutoTargetAxisByOrient=function(r,n){var i=this.ecModel,a=!0;if(a){var o=n==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===n}});l(s,"single")}function l(u,c){var f=u[0];if(f){var h=new SM;if(h.add(f.componentIndex),r.set(c,h),a=!1,c==="x"||c==="y"){var d=f.getReferringComponents("grid",Ci).models[0];d&&G(u,function(p){f.componentIndex!==p.componentIndex&&d===p.getReferringComponents("grid",Ci).models[0]&&h.add(p.componentIndex)})}}}a&&G(MV,function(u){if(a){var c=i.findComponents({mainType:th(u),filter:function(h){return h.get("type",!0)==="category"}});if(c[0]){var f=new SM;f.add(c[0].componentIndex),r.set(u,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(n){!r&&(r=n)},this),r==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(r){var n=this._rangePropMode,i=this.get("rangeMode");G([["start","startValue"],["end","endValue"]],function(a,o){var s=r[a[0]]!=null,l=r[a[1]]!=null;s&&!l?n[o]="percent":!s&&l?n[o]="value":i?n[o]=i[o]:s&&(n[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(n,i){r==null&&(r=this.ecModel.getComponent(th(n),i))},this),r},e.prototype.eachTargetAxis=function(r,n){this._targetAxisInfoMap.each(function(i,a){G(i.indexList,function(o){r.call(n,a,o)})})},e.prototype.getAxisProxy=function(r,n){var i=this.getAxisModel(r,n);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(r,n){var i=this._targetAxisInfoMap.get(r);if(i&&i.indexMap[n])return this.ecModel.getComponent(th(r),n)},e.prototype.setRawRange=function(r){var n=this.option,i=this.settledOption;G([["start","startValue"],["end","endValue"]],function(a){(r[a[0]]!=null||r[a[1]]!=null)&&(n[a[0]]=i[a[0]]=r[a[0]],n[a[1]]=i[a[1]]=r[a[1]])},this),this._updateRangeUse(r)},e.prototype.setCalculatedRange=function(r){var n=this.option;G(["start","startValue","end","endValue"],function(i){n[i]=r[i]})},e.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},e.prototype.getValueRange=function(r,n){if(r==null&&n==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(r,n).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var n,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;n||(n=u)}return n},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(fr);function RV(t){var e={};return G(["start","end","startValue","endValue","throttle"],function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var PSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="dataZoom.select",e}(P_),JD=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i,a){this.dataZoomModel=r,this.ecModel=n,this.api=i},e.type="dataZoom",e}(_n),LSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="dataZoom.select",e}(JD),Ag=G,PV=Ys,DSe=function(){function t(e,r,n,i){this._dimName=e,this._axisIndex=r,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(r){if(MSe(r)){var n=th(this._dimName),i=r.getReferringComponents(n,Ci).models[0];i&&this._axisIndex===i.componentIndex&&e.push(r)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return Ft(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var r=this._dataExtent,n=this.getAxisModel(),i=n.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Ag(["start","end"],function(h,d){var p=e[h],v=e[h+"Value"];a[d]==="percent"?(p==null&&(p=o[d]),v=i.parse(rn(p,o,r))):(u=!0,v=v==null?r[d]:i.parse(v),p=rn(v,r,o)),l[d]=v==null||isNaN(v)?r[d]:v,s[d]=p==null||isNaN(p)?o[d]:p}),PV(l),PV(s);var c=this._minMaxSpan;u?f(l,s,r,o,!1):f(s,l,o,r,!0);function f(h,d,p,v,g){var m=g?"Span":"ValueSpan";Xp(0,h,p,"all",c["min"+m],c["max"+m]);for(var x=0;x<2;x++)d[x]=rn(h[x],p,v,!0),g&&(d[x]=i.parse(d[x]))}return{valueWindow:l,percentWindow:s}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=ISe(this,this._dimName,r),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,r){if(e!==this._dataZoomModel)return;var n=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Ag(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(n);if(c.length){if(a==="weakFilter"){var f=u.getStore(),h=Oe(c,function(d){return u.getDimensionIndex(d)},u);u.filterSelf(function(d){for(var p,v,g,m=0;m<c.length;m++){var x=f.get(h[m],d),S=!isNaN(x),b=x<o[0],T=x>o[1];if(S&&!b&&!T)return!0;S&&(g=!0),b&&(p=!0),T&&(v=!0)}return g&&p&&v})}else Ag(c,function(d){if(a==="empty")l.setData(u=u.map(d,function(v){return s(v)?v:NaN}));else{var p={};p[d]=o,u.selectRange(p)}});Ag(c,function(d){u.setApproximateExtent(o,d)})}});function s(l){return l>=o[0]&&l<=o[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},r=this._dataZoomModel,n=this._dataExtent;Ag(["min","max"],function(i){var a=r.get(i+"Span"),o=r.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=rn(n[0]+o,n,[0,100],!0):a!=null&&(o=rn(a,[0,100],n,!0)-n[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),r=this._percentWindow,n=this._valueWindow;if(r){var i=tY(n,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;r[0]!==0&&a.setDeterminedMinMax("min",+n[0].toFixed(i)),r[1]!==100&&a.setDeterminedMinMax("max",+n[1].toFixed(i)),a.freeze()}},t}();function ISe(t,e,r){var n=[1/0,-1/0];Ag(r,function(o){mge(n,o.getData(),e)});var i=t.getAxisModel(),a=VZ(i.axis.scale,i,n).calculate();return[a.min,a.max]}var NSe={getTargetSeries:function(t){function e(i){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=t.getComponent(th(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var r=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new DSe(i,a,s,t),r.push(o.__dzAxisProxy))});var n=Tt();return G(r,function(i){G(i.getTargetSeriesModels(),function(a){n.set(a.uid,a)})}),n},overallReset:function(t,e){t.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(n,i){r.getAxisProxy(n,i).reset(r)}),r.eachTargetAxis(function(n,i){r.getAxisProxy(n,i).filterData(r,e)})}),t.eachComponent("dataZoom",function(r){var n=r.findRepresentativeAxisProxy();if(n){var i=n.getDataPercentWindow(),a=n.getDataValueWindow();r.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function OSe(t){t.registerAction("dataZoom",function(e,r){var n=RSe(r,e);G(n,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var LV=!1;function QD(t){LV||(LV=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,NSe),OSe(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function kSe(t){t.registerComponentModel(PSe),t.registerComponentView(LSe),QD(t)}var js=function(){function t(){}return t}(),wee={};function Mg(t,e){wee[t]=e}function Tee(t){return wee[t]}var FSe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;G(this.option.feature,function(n,i){var a=Tee(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(r)),xt(n,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(fr);function BSe(t,e,r){var n=e.getBoxLayoutParams(),i=e.get("padding"),a={width:r.getWidth(),height:r.getHeight()},o=ri(n,a,i);pp(e.get("orient"),t,e.get("itemGap"),o.width,o.height),YT(t,n,a,i)}function Cee(t,e){var r=Qm(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),t=new Mr({shape:{x:t.x-r[3],y:t.y-r[0],width:t.width+r[1]+r[3],height:t.height+r[0]+r[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1}),t}var zSe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(r,n,i,a){var o=this.group;if(o.removeAll(),!r.get("show"))return;var s=+r.get("itemSize"),l=r.get("orient")==="vertical",u=r.get("feature")||{},c=this._features||(this._features={}),f=[];G(u,function(p,v){f.push(v)}),new Bc(this._featureNames||[],f).add(h).update(h).remove(Zt(h,null)).execute(),this._featureNames=f;function h(p,v){var g=f[p],m=f[v],x=u[g],S=new Br(x,r,r.ecModel),b;if(a&&a.newTitle!=null&&a.featureName===g&&(x.title=a.newTitle),g&&!m){if(USe(g))b={onclick:S.option.onclick,featureName:g};else{var T=Tee(g);if(!T)return;b=new T}c[g]=b}else if(b=c[m],!b)return;b.uid=Jm("toolbox-feature"),b.model=S,b.ecModel=n,b.api=i;var w=b instanceof js;if(!g&&m){w&&b.dispose&&b.dispose(n,i);return}if(!S.get("show")||w&&b.unusable){w&&b.remove&&b.remove(n,i);return}d(S,b,g),S.setIconStatus=function(E,M){var A=this.option,R=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[E]=M,R[E]&&(M==="emphasis"?kc:Fc)(R[E])},b instanceof js&&b.render&&b.render(S,n,i,a)}function d(p,v,g){var m=p.getModel("iconStyle"),x=p.getModel(["emphasis","iconStyle"]),S=v instanceof js&&v.getIcons?v.getIcons():p.get("icon"),b=p.get("title")||{},T,w;ft(S)?(T={},T[g]=S):T=S,ft(b)?(w={},w[g]=b):w=b;var E=p.iconPaths={};G(T,function(M,A){var R=v2(M,{},{x:-s/2,y:-s/2,width:s,height:s});R.setStyle(m.getItemStyle());var L=R.ensureState("emphasis");L.style=x.getItemStyle();var I=new Ar({style:{text:w[A],align:x.get("textAlign"),borderRadius:x.get("textBorderRadius"),padding:x.get("textPadding"),fill:null,font:EL({fontStyle:x.get("textFontStyle"),fontFamily:x.get("textFontFamily"),fontSize:x.get("textFontSize"),fontWeight:x.get("textFontWeight")},n)},ignore:!0});R.setTextContent(I),qm({el:R,componentModel:r,itemName:A,formatterParamsExtra:{title:w[A]}}),R.__title=w[A],R.on("mouseover",function(){var N=x.getItemStyle(),k=l?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";I.setStyle({fill:x.get("textFill")||N.fill||N.stroke||"#000",backgroundColor:x.get("textBackgroundColor")}),R.setTextConfig({position:x.get("textPosition")||k}),I.ignore=!r.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",A])!=="emphasis"&&i.leaveEmphasis(this),I.hide()}),(p.get(["iconStatus",A])==="emphasis"?kc:Fc)(R),o.add(R),R.on("click",pt(v.onclick,v,n,i,A)),E[A]=R})}BSe(o,r,i),o.add(Cee(o.getBoundingRect(),r)),l||o.eachChild(function(p){var v=p.__title,g=p.ensureState("emphasis"),m=g.textConfig||(g.textConfig={}),x=p.getTextContent(),S=x&&x.ensureState("emphasis");if(S&&!Lt(S)&&v){var b=S.style||(S.style={}),T=u2(v,Ar.makeFont(b)),w=p.x+o.x,E=p.y+o.y+s,M=!1;E+T.height>i.getHeight()&&(m.position="top",M=!0);var A=M?-5-T.height:s+10;w+T.width/2>i.getWidth()?(m.position=["100%",A],b.align="right"):w-T.width/2<0&&(m.position=[0,A],b.align="left")}})},e.prototype.updateView=function(r,n,i,a){G(this._features,function(o){o instanceof js&&o.updateView&&o.updateView(o.model,n,i,a)})},e.prototype.remove=function(r,n){G(this._features,function(i){i instanceof js&&i.remove&&i.remove(r,n)}),this.group.removeAll()},e.prototype.dispose=function(r,n){G(this._features,function(i){i instanceof js&&i.dispose&&i.dispose(r,n)})},e.type="toolbox",e}(_n);function USe(t){return t.indexOf("my")===0}var VSe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(r,n){var i=this.model,a=i.get("name")||r.get("title.0.text")||"echarts",o=n.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=br.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),d=h[0].indexOf("base64")>-1,p=o?decodeURIComponent(h[1]):h[1];d&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,m=new Uint8Array(g);g--;)m[g]=p.charCodeAt(g);var x=new Blob([m]);window.navigator.msSaveOrOpenBlob(x,v)}else{var S=document.createElement("iframe");document.body.appendChild(S);var b=S.contentWindow,T=b.document;T.open("image/svg+xml","replace"),T.write(p),T.close(),b.focus(),T.execCommand("SaveAs",!0,v),document.body.removeChild(S)}}else{var w=i.get("lang"),E='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',M=window.open();M.document.write(E),M.document.title=a}},e.getDefaultOption=function(r){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(js),DV="__ec_magicType_stack__",HSe=[["line","bar"],["stack"]],GSe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var r=this.model,n=r.get("icon"),i={};return G(r.get("type"),function(a){n[a]&&(i[a]=n[a])}),i},e.getDefaultOption=function(r){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(r,n,i){var a=this.model,o=a.get(["seriesIndex",i]);if(IV[i]){var s={series:[]},l=function(f){var h=f.subType,d=f.id,p=IV[i](h,d,f,a);p&&(At(p,f.option),s.series.push(p));var v=f.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var g=v.getAxesByScale("ordinal")[0];if(g){var m=g.dim,x=m+"Axis",S=f.getReferringComponents(x,Ci).models[0],b=S.componentIndex;s[x]=s[x]||[];for(var T=0;T<=b;T++)s[x][b]=s[x][b]||{};s[x][b].boundaryGap=i==="bar"}}};G(HSe,function(f){hr(f,i)>=0&&G(f,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),r.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=xt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),n.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(js),IV={line:function(t,e,r,n){if(t==="bar")return xt({id:e,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(t,e,r,n){if(t==="line")return xt({id:e,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(t,e,r,n){var i=r.get("stack")===DV;if(t==="line"||t==="bar")return n.setIconStatus("stack",i?"normal":"emphasis"),xt({id:e,stack:i?"":DV},n.get(["option","stack"])||{},!0)}};Uu({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var m4=new Array(60).join("-"),Sm="	";function WSe(t){var e={},r=[],n=[];return t.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else r.push(i)}else r.push(i)}),{seriesGroupByCategoryAxis:e,other:r,meta:n}}function $Se(t){var e=[];return G(t,function(r,n){var i=r.categoryAxis,a=r.valueAxis,o=a.dim,s=[" "].concat(Oe(r.series,function(d){return d.name})),l=[i.model.getCategories()];G(r.series,function(d){var p=d.getRawData();l.push(d.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var u=[s.join(Sm)],c=0;c<l[0].length;c++){for(var f=[],h=0;h<l.length;h++)f.push(l[h][c]);u.push(f.join(Sm))}e.push(u.join(`
`))}),e.join(`

`+m4+`

`)}function jSe(t){return Oe(t,function(e){var r=e.getRawData(),n=[e.name],i=[];return r.each(r.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=r.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];n.push((s?s+Sm:"")+i.join(Sm))}),n.join(`
`)}).join(`

`+m4+`

`)}function XSe(t){var e=WSe(t);return{value:hn([$Se(e.seriesGroupByCategoryAxis),jSe(e.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+m4+`

`),meta:e.meta}}function Uw(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function KSe(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Sm)>=0)return!0}var TR=new RegExp("["+Sm+"]+","g");function YSe(t){for(var e=t.split(/\n+/g),r=Uw(e.shift()).split(TR),n=[],i=Oe(r,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=Uw(e[a]).split(TR);n.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:n}}function qSe(t){for(var e=t.split(/\n+/g),r=Uw(e.shift()),n=[],i=0;i<e.length;i++){var a=Uw(e[i]);if(a){var o=a.split(TR),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),n[i]={name:s,value:[]},l=n[i].value):l=n[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?n[i].value=l[0]:n[i]=l[0])}}return{name:r,data:n}}function ZSe(t,e){var r=t.split(new RegExp(`
*`+m4+`
*`,"g")),n={series:[]};return G(r,function(i,a){if(KSe(i)){var o=YSe(i),s=e[a],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else{var o=qSe(i);n.series.push(o)}}),n}var JSe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(r,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var i=n.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var f=a.get("optionToContent"),h=a.get("contentToOption"),d=XSe(r);if(Lt(f)){var p=f(n.getOption());ft(p)?u.innerHTML=p:rm(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=d.value,u.appendChild(c)}var g=d.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+a.get("buttonColor"),x+=";color:"+a.get("buttonTextColor");var T=this;function w(){i.removeChild(o),T._dom=null}t6(S,"click",w),t6(b,"click",function(){if(h==null&&f!=null||h!=null&&f==null){w();return}var E;try{Lt(h)?E=h(u,n.getOption()):E=ZSe(c.value,g)}catch(M){throw w(),new Error("Data view format error "+M)}E&&n.dispatchAction({type:"changeDataView",newOption:E}),w()}),S.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=S.style.cssText=x,!a.get("readOnly")&&m.appendChild(b),m.appendChild(S),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(r,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(r,n){this.remove(r,n)},e.getDefaultOption=function(r){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(js);function QSe(t,e){return Oe(t,function(r,n){var i=e&&e[n];if(Nt(i)&&!De(i)){var a=Nt(r)&&!De(r);a||(r={value:r});var o=i.name!=null&&r.name==null;return r=At(r,i),o&&delete r.name,r}else return r})}Uu({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var r=[];G(t.newOption.series,function(n){var i=e.getSeriesByName(n.name)[0];if(!i)r.push(Ae({type:"scatter"},n));else{var a=i.get("data");r.push({name:n.name,data:QSe(n.data,a)})}}),e.mergeOption(At({series:r},t.newOption))});var Eee=G,Aee=kr();function ebe(t,e){var r=eI(t);Eee(e,function(n,i){for(var a=r.length-1;a>=0;a--){var o=r[a];if(o[i])break}if(a<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();r[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),r.push(e)}function tbe(t){var e=eI(t),r=e[e.length-1];e.length>1&&e.pop();var n={};return Eee(r,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){n[a]=i;break}}),n}function rbe(t){Aee(t).snapshots=null}function nbe(t){return eI(t).length}function eI(t){var e=Aee(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var ibe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(r,n){rbe(r),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(r){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(js);Uu({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var abe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],tI=function(){function t(e,r,n){var i=this;this._targetInfoList=[];var a=NV(r,e);G(obe,function(o,s){(!n||!n.include||hr(n.include,s)>=0)&&o(a,i._targetInfoList)})}return t.prototype.setOutputRanges=function(e,r){return this.matchOutputRanges(e,r,function(n,i,a){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var o=bM[n.brushType](0,a,i);n.__rangeOffset={offset:BV[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,r,n){G(e,function(i){var a=this.findTargetInfo(i,r);a&&a!==!0&&G(a.coordSyses,function(o){var s=bM[i.brushType](1,o,i.range,!0);n(i,s.values,o,r)})},this)},t.prototype.setInputRanges=function(e,r){G(e,function(n){var i=this.findTargetInfo(n,r);if(n.range=n.range||[],i&&i!==!0){n.panelId=i.panelId;var a=bM[n.brushType](0,i.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?BV[n.brushType](a.values,o.offset,sbe(a.xyMinMax,o.xyMinMax)):a.values}},this)},t.prototype.makePanelOpts=function(e,r){return Oe(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:r?r(n):null,clipPath:fee(i),isTargetByCursor:dee(i,e,n.coordSysModel),getLinearBrushOtherExtent:hee(i)}})},t.prototype.controlSeries=function(e,r,n){var i=this.findTargetInfo(e,n);return i===!0||i&&hr(i.coordSyses,r.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,r){for(var n=this._targetInfoList,i=NV(r,e),a=0;a<n.length;a++){var o=n[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<OV.length;l++)if(OV[l](i,o))return o}return!0},t}();function CR(t){return t[0]>t[1]&&t.reverse(),t}function NV(t,e){return L1(t,e,{includeMainTypes:abe})}var obe={grid:function(t,e){var r=t.xAxisModels,n=t.yAxisModels,i=t.gridModels,a=Tt(),o={},s={};!r&&!n&&!i||(G(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),G(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),G(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];G(u.getCartesians(),function(f,h){(hr(r,f.getAxis("x").model)>=0||hr(n,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:kV.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){G(t.geoModels,function(r){var n=r.coordinateSystem;e.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:n,coordSyses:[n],getPanelRect:kV.geo})})}},OV=[function(t,e){var r=t.xAxisModel,n=t.yAxisModel,i=t.gridModel;return!i&&r&&(i=r.axis.grid.model),!i&&n&&(i=n.axis.grid.model),i&&i===e.gridModel},function(t,e){var r=t.geoModel;return r&&r===e.geoModel}],kV={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(dp(t)),e}},bM={lineX:Zt(FV,0),lineY:Zt(FV,1),rect:function(t,e,r,n){var i=t?e.pointToData([r[0][0],r[1][0]],n):e.dataToPoint([r[0][0],r[1][0]],n),a=t?e.pointToData([r[0][1],r[1][1]],n):e.dataToPoint([r[0][1],r[1][1]],n),o=[CR([i[0],a[0]]),CR([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(t,e,r,n){var i=[[1/0,-1/0],[1/0,-1/0]],a=Oe(r,function(o){var s=t?e.pointToData(o,n):e.dataToPoint(o,n);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function FV(t,e,r,n){var i=r.getAxis(["x","y"][t]),a=CR(Oe([0,1],function(s){return e?i.coordToData(i.toLocalCoord(n[s]),!0):i.toGlobalCoord(i.dataToCoord(n[s]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var BV={lineX:Zt(zV,0),lineY:Zt(zV,1),rect:function(t,e,r){return[[t[0][0]-r[0]*e[0][0],t[0][1]-r[0]*e[0][1]],[t[1][0]-r[1]*e[1][0],t[1][1]-r[1]*e[1][1]]]},polygon:function(t,e,r){return Oe(t,function(n,i){return[n[0]-r[0]*e[i][0],n[1]-r[1]*e[i][1]]})}};function zV(t,e,r,n){return[e[0]-n[t]*r[0],e[1]-n[t]*r[1]]}function sbe(t,e){var r=UV(t),n=UV(e),i=[r[0]/n[0],r[1]/n[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function UV(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var ER=G,lbe=Ace("toolbox-dataZoom_"),ube=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(r,n,i,a){this._brushController||(this._brushController=new WD(i.getZr()),this._brushController.on("brush",pt(this._onBrush,this)).mount()),hbe(r,n,this,a,i),fbe(r,n)},e.prototype.onclick=function(r,n,i){cbe[i].call(this)},e.prototype.remove=function(r,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(r,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(r){var n=r.areas;if(!r.isEnd||!n.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new tI(rI(this.model),a,{include:["grid"]});o.matchOutputRanges(n,a,function(u,c,f){if(f.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[h],f,c)}}),ebe(a,i),this._dispatchZoomAction(i);function s(u,c,f){var h=c.getAxis(u),d=h.model,p=l(u,d,a),v=p.findRepresentativeAxisProxy(d).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(f=Xp(0,f.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function l(u,c,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var p=d.getAxisModel(u,c.componentIndex);p&&(h=d)}),h}},e.prototype._dispatchZoomAction=function(r){var n=[];ER(r,function(i,a){n.push(Ft(i))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(r){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(js),cbe={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(tbe(this.ecModel))}};function rI(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function fbe(t,e){t.setIconStatus("back",nbe(e)>1?"emphasis":"normal")}function hbe(t,e,r,n,i){var a=r._isZoomActive;n&&n.type==="takeGlobalCursor"&&(a=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),r._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new tI(rI(t),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}Jhe("dataZoom",function(t){var e=t.getComponent("toolbox",0),r=["feature","dataZoom"];if(!e||e.get(r)==null)return;var n=e.getModel(r),i=[],a=rI(n),o=L1(t,a);ER(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),ER(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var f=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:lbe+u+f};h[c]=f,i.push(h)}return i});function dbe(t){t.registerComponentModel(FSe),t.registerComponentView(zSe),Mg("saveAsImage",VSe),Mg("magicType",GSe),Mg("dataView",JSe),Mg("dataZoom",ube),Mg("restore",ibe),Ot(kSe)}var pbe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(fr);function Mee(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function Ree(t){if(br.domSupported){for(var e=document.documentElement.style,r=0,n=t.length;r<n;r++)if(t[r]in e)return t[r]}}var Pee=Ree(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vbe=Ree(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Lee(t,e){if(!t)return e;e=uq(e,!0);var r=t.indexOf(e);return t=r===-1?e:"-"+t.slice(0,r)+"-"+e,t.toLowerCase()}function gbe(t,e){var r=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return r?r[e]:null}var mbe=Lee(vbe,"transition"),nI=Lee(Pee,"transform"),ybe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(br.transform3dSupported?"will-change:transform;":"");function _be(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function xbe(t,e,r){if(!ft(r)||r==="inside")return"";var n=t.get("backgroundColor"),i=t.get("borderWidth");e=Ep(e);var a=_be(r),o=Math.max(Math.round(i)*1.5,6),s="",l=nI+":",u;hr(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=o+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+a+":-"+d+"px";var p=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Sbe(t,e){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+t/2+"s "+r,i="opacity"+n+",visibility"+n;return e||(n=" "+t+"s "+r,i+=br.transformSupported?","+nI+n:",left"+n+",top"+n),mbe+":"+i}function VV(t,e,r){var n=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!br.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=br.transform3dSupported,o="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return r?"top:0;left:0;"+nI+":"+o+";":[["top",0],["left",0],[Pee,o]]}function bbe(t){var e=[],r=t.get("fontSize"),n=t.getTextColor();n&&e.push("color:"+n),e.push("font:"+t.getFont()),r&&e.push("line-height:"+Math.round(r*3/2)+"px");var i=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,o=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),G(["decoration","align"],function(l){var u=t.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function wbe(t,e,r){var n=[],i=t.get("transitionDuration"),a=t.get("backgroundColor"),o=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=Gq(t,"html"),h=l+"px "+u+"px "+o+"px "+s;return n.push("box-shadow:"+h),e&&i&&n.push(Sbe(i,r)),a&&n.push("background-color:"+a),G(["width","color","radius"],function(d){var p="border-"+d,v=uq(p),g=t.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(bbe(c)),f!=null&&n.push("padding:"+Qm(f).join("px ")+"px"),n.join(";")+";"}function HV(t,e,r,n,i){var a=e&&e.painter;if(r){var o=a&&a.getViewportRoot();o&&oue(t,o,r,n,i)}else{t[0]=n,t[1]=i;var s=a&&a.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Tbe=function(){function t(e,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,br.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var i=this._zr=e.getZr(),a=r.appendTo,o=a&&(ft(a)?document.querySelector(a):rm(a)?a:Lt(a)&&a(e.getDom()));HV(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(n),this._api=e,this._container=o;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,c=i.painter.getViewportRoot();Bs(c,l,!0),u.dispatch("mousemove",l)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(e){if(!this._container){var r=this._api.getDom(),n=gbe(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},t.prototype.show=function(e,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=ybe+wbe(e,!this._firstShow,this._longHide)+VV(a[0],a[1],!0)+("border-color:"+Ep(r)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,r,n,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(ft(a)&&n.get("trigger")==="item"&&!Mee(n)&&(s=xbe(n,i,a)),ft(e))o.innerHTML=e+s;else if(e){o.innerHTML="",De(e)||(e=[e]);for(var l=0;l<e.length;l++)rm(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},t.prototype.moveTo=function(e,r){var n=this._styleCoord;if(HV(n,this._zr,this._container,e,r),n[0]!=null&&n[1]!=null){var i=this.el.style,a=VV(n[0],n[1]);G(a,function(o){i[o[0]]=o[1]})}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),r*this._zr.getHeight())},t.prototype.hide=function(){var e=this,r=this.el.style;r.visibility="hidden",r.opacity="0",br.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(pt(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},t}(),Cbe=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),WV(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var r=e.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,r,n,i,a){var o=this;Nt(e)&&nn(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Ar({style:{rich:r.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:Gq(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),G(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=n.get(u)}),G(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,r=this.el.getBoundingRect(),n=GV(e.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},t.prototype.moveTo=function(e,r){var n=this.el;if(n){var i=this._styleCoord;WV(i,this._zr,e,r),e=i[0],r=i[1];var a=n.style,o=Hf(a.borderWidth||0),s=GV(a);n.x=e+o+s.left,n.y=r+o+s.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),r*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(pt(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Hf(t){return Math.max(0,t)}function GV(t){var e=Hf(t.shadowBlur||0),r=Hf(t.shadowOffsetX||0),n=Hf(t.shadowOffsetY||0);return{left:Hf(e-r),right:Hf(e+r),top:Hf(e-n),bottom:Hf(e+n)}}function WV(t,e,r,n){t[0]=r,t[1]=n,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Ebe=new Mr({shape:{x:-1,y:-1,width:2,height:2}}),Abe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n){if(!(br.node||!n.getDom())){var i=r.getComponent("tooltip"),a=this._renderMode=Nce(i.get("renderMode"));this._tooltipContent=a==="richText"?new Cbe(n):new Tbe(n,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(r,n,i){if(!(br.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i;var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?i0(this,"_updatePosition",50,"fixRate"):h_(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");FQ("itemTooltip",this._api,pt(function(i,a,o){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(r,n,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(r,n,i,a){if(!(a.from===this.uid||br.node||!i.getDom())){var o=$V(a,i);this._ticket="";var s=a.dataByCoordSys,l=Lbe(a,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=Ebe;c.x=a.x,c.y=a.y,c.update(),Ht(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,a))return;var f=BQ(a,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(r,n,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide($V(a,i))},e.prototype._manuallyAxisShowTip=function(r,n,i,a){var o=a.seriesIndex,s=a.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=n.getSeriesByIndex(o);if(u){var c=u.getData(),f=Ny([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(r,n){var i=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var o=r.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,r);else if(i){var s=Ht(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Zd(i,function(c){if(Ht(c).dataIndex!=null)return l=c,!0;if(Ht(c).tooltipConfig!=null)return u=c,!0},!0),l?this._showSeriesItemTooltip(r,l,n):u?this._showComponentItemTooltip(r,u,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},e.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=pt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},e.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,a=this._tooltipModel,o=[n.offsetX,n.offsetY],s=Ny([n.tooltipOption],a),l=this._renderMode,u=[],c=ea("section",{blocks:[],noHeader:!0}),f=[],h=new gA;G(r,function(x){G(x.dataByAxis,function(S){var b=i.getComponent(S.axisDim+"Axis",S.axisIndex),T=S.value;if(!(!b||T==null)){var w=NQ(T,b.axis,i,S.seriesDataIndices,S.valueLabelOpt),E=ea("section",{header:w,noHeader:!Il(w),sortBlocks:!0,blocks:[]});c.blocks.push(E),G(S.seriesDataIndices,function(M){var A=i.getSeriesByIndex(M.seriesIndex),R=M.dataIndexInside,L=A.getDataParams(R);if(!(L.dataIndex<0)){L.axisDim=S.axisDim,L.axisIndex=S.axisIndex,L.axisType=S.axisType,L.axisId=S.axisId,L.axisValue=rD(b.axis,{value:T}),L.axisValueLabel=w,L.marker=h.makeTooltipMarker("item",Ep(L.color),l);var I=ZF(A.formatTooltip(R,!0,null)),N=I.frag;if(N){var k=Ny([A],a).get("valueFormatter");E.blocks.push(k?Ae({valueFormatter:k},N):N)}I.text&&f.push(I.text),u.push(L)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=nB(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",o[0],o[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(r,n,i){var a=this._ecModel,o=Ht(n),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,f=o.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=Ny([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),x=new gA;m.marker=x.makeTooltipMarker("item",Ep(m.color),d);var S=ZF(u.formatTooltip(c,!1,f)),b=v.get("order"),T=v.get("valueFormatter"),w=S.frag,E=w?nB(T?Ae({valueFormatter:T},w):w,x,d,b,a.get("useUTC"),v.get("textStyle")):S.text,M="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,E,m,M,r.offsetX,r.offsetY,r.position,r.target,x)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(r,n,i){var a=this._renderMode==="html",o=Ht(n),s=o.tooltipConfig,l=s.option||{},u=l.encodeHTMLContent;if(ft(l)){var c=l;l={content:c,formatter:c},u=!0}u&&a&&l.content&&(l=Ft(l),l.content=Oi(l.content));var f=[l],h=this._ecModel.getComponent(o.componentMainType,o.componentIndex);h&&f.push(h),f.push({formatter:l.content});var d=r.positionDefault,p=Ny(f,this._tooltipModel,d?{position:d}:null),v=p.get("content"),g=Math.random()+"",m=new gA;this._showOrMove(p,function(){var x=Ft(p.get("formatterParams")||{});this._showTooltipContent(p,v,x,g,r.offsetX,r.offsetY,r.position,n,m)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(r,n,i,a,o,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([o,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(ft(h)){var g=r.ecModel.get("useUTC"),m=De(i)?i[0]:i,x=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,x&&(d=WT(m.axisValue,d,g)),d=DL(d,i,!0)}else if(Lt(h)){var S=pt(function(b,T){b===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,o,s,f,i,u))},this);this._ticket=a,d=h(i,a,S)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,o,s,f,i,u)}},e.prototype._getNearestPoint=function(r,n,i,a){if(i==="axis"||De(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!De(n))return{color:a||n.color||n.borderColor}},e.prototype._updatePosition=function(r,n,i,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=o.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Lt(n)&&(n=n([i,a],s,o.el,p,{viewSize:[u,c],contentSize:f.slice()})),De(n))i=Ze(n[0],u),a=Ze(n[1],c);else if(Nt(n)){var v=n;v.width=f[0],v.height=f[1];var g=ri(v,{width:u,height:c});i=g.x,a=g.y,h=null,d=null}else if(ft(n)&&l){var m=Pbe(n,p,f,r.get("borderWidth"));i=m[0],a=m[1]}else{var m=Mbe(i,a,o,u,c,h?null:20,d?null:20);i=m[0],a=m[1]}if(h&&(i-=jV(h)?f[0]/2:h==="right"?f[0]:0),d&&(a-=jV(d)?f[1]/2:d==="bottom"?f[1]:0),Mee(r)){var m=Rbe(i,a,o,u,c);i=m[0],a=m[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===r.length;return o&&G(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];o=o&&u.length===f.length,o&&G(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];o=o&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,o&&G(v,function(m,x){var S=g[x];o=o&&m.seriesIndex===S.seriesIndex&&m.dataIndex===S.dataIndex}),a&&G(h.seriesDataIndices,function(m){var x=m.seriesIndex,S=n[x],b=a[x];S&&b&&b.data!==S.data&&(o=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!o},e.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},e.prototype.dispose=function(r,n){br.node||!n.getDom()||(h_(this,"_updatePosition"),this._tooltipContent.dispose(),dR("itemTooltip",n))},e.type="tooltip",e}(_n);function Ny(t,e,r){var n=e.ecModel,i;r?(i=new Br(r,n,n),i=new Br(e.option,i,n)):i=e;for(var a=t.length-1;a>=0;a--){var o=t[a];o&&(o instanceof Br&&(o=o.get("tooltip",!0)),ft(o)&&(o={formatter:o}),o&&(i=new Br(o,i,n)))}return i}function $V(t,e){return t.dispatchAction||pt(e.dispatchAction,e)}function Mbe(t,e,r,n,i,a,o){var s=r.getSize(),l=s[0],u=s[1];return a!=null&&(t+l+a+2>n?t-=l+a:t+=a),o!=null&&(e+u+o>i?e-=u+o:e+=o),[t,e]}function Rbe(t,e,r,n,i){var a=r.getSize(),o=a[0],s=a[1];return t=Math.min(t+o,n)-o,e=Math.min(e+s,i)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function Pbe(t,e,r,n){var i=r[0],a=r[1],o=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=e.width,c=e.height;switch(t){case"inside":s=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":s=e.x+u/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+c+o;break;case"left":s=e.x-i-o,l=e.y+c/2-a/2;break;case"right":s=e.x+u+o,l=e.y+c/2-a/2}return[s,l]}function jV(t){return t==="center"||t==="middle"}function Lbe(t,e,r){var n=dL(t).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=c2(e,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=r.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=Ht(u).tooltipConfig;if(c&&c.name===t.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function Dbe(t){Ot(w2),t.registerComponentModel(pbe),t.registerComponentView(Abe),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},pi),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},pi)}var Ibe=["rect","polygon","keep","clear"];function Nbe(t,e){var r=gn(t?t.brush:[]);if(r.length){var n=[];G(r,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(n=n.concat(u))});var i=t&&t.toolbox;De(i)&&(i=i[0]),i||(i={feature:{}},t.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,n),Obe(s),e&&!s.length&&s.push.apply(s,Ibe)}}function Obe(t){var e={};G(t,function(r){e[r]=1}),t.length=0,G(e,function(r,n){t.push(n)})}var L_=G,kbe=Nt,Vw=-1,Ji=function(){function t(e){var r=e.mappingMethod,n=e.type,i=this.option=Ft(e);this.type=n,this.mappingMethod=r,this._normalizeData=zbe[r];var a=t.visualHandlers[n];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[r],r==="piecewise"?(wM(i),Fbe(i)):r==="category"?i.categories?Bbe(i):wM(i,!0):(So(r!=="linear"||i.dataExtent),wM(i))}return t.prototype.mapValueToVisual=function(e){var r=this._normalizeData(e);return this._normalizedToVisual(r,e)},t.prototype.getNormalizer=function(){return pt(this._normalizeData,this)},t.listVisualTypes=function(){return Er(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,r,n){Nt(e)?G(e,r,n):r.call(n,e)},t.mapVisual=function(e,r,n){var i,a=De(e)?[]:Nt(e)?{}:(i=!0,null);return t.eachVisual(e,function(o,s){var l=r.call(n,o,s);i?a=l:a[s]=l}),a},t.retrieveVisuals=function(e){var r={},n;return e&&L_(t.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(r[a]=e[a],n=!0)}),n?r:null},t.prepareVisualTypes=function(e){if(De(e))e=e.slice();else if(kbe(e)){var r=[];L_(e,function(n,i){r.push(i)}),e=r}else return[];return e.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,r){return r==="color"?!!(e&&e.indexOf(r)===0):e===r},t.findPieceIndex=function(e,r,n){for(var i,a=1/0,o=0,s=r.length;o<s;o++){var l=r[o].value;if(l!=null){if(l===e||ft(l)&&l===e+"")return o;n&&h(l,o)}}for(var o=0,s=r.length;o<s;o++){var u=r[o],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(XS(f[1],e,c[1]))return o}else if(c[1]===1/0){if(XS(f[0],c[0],e))return o}else if(XS(f[0],c[0],e)&&XS(f[1],e,c[1]))return o;n&&h(c[0],o),n&&h(c[1],o)}}if(n)return e===1/0?r.length-1:e===-1/0?0:i;function h(d,p){var v=Math.abs(d-e);v<a&&(a=v,i=p)}},t.visualHandlers={color:{applyVisual:Oy("color"),getColorMapper:function(){var e=this.option;return pt(e.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),g1.call(this,r)}:function(r,n,i){var a=!!i;return!n&&(r=this._normalizeData(r)),i=DE(r,e.parsedVisual,i),a?i:Ac(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Ac(DE(e,this.option.parsedVisual),"rgba")},category:g1,piecewise:function(e,r){var n=MR.call(this,r);return n==null&&(n=Ac(DE(e,this.option.parsedVisual),"rgba")),n},fixed:Od}},colorHue:jS(function(e,r){return M1(e,r)}),colorSaturation:jS(function(e,r){return M1(e,null,r)}),colorLightness:jS(function(e,r){return M1(e,null,null,r)}),colorAlpha:jS(function(e,r){return Z3(e,r)}),decal:{applyVisual:Oy("decal"),_normalizedToVisual:{linear:null,category:g1,piecewise:null,fixed:null}},opacity:{applyVisual:Oy("opacity"),_normalizedToVisual:AR([0,1])},liftZ:{applyVisual:Oy("liftZ"),_normalizedToVisual:{linear:Od,category:Od,piecewise:Od,fixed:Od}},symbol:{applyVisual:function(e,r,n){var i=this.mapValueToVisual(e);n("symbol",i)},_normalizedToVisual:{linear:XV,category:g1,piecewise:function(e,r){var n=MR.call(this,r);return n==null&&(n=XV.call(this,e)),n},fixed:Od}},symbolSize:{applyVisual:Oy("symbolSize"),_normalizedToVisual:AR([0,1])}},t}();function Fbe(t){var e=t.pieceList;t.hasSpecialVisual=!1,G(e,function(r,n){r.originIndex=n,r.visual!=null&&(t.hasSpecialVisual=!0)})}function Bbe(t){var e=t.categories,r=t.categoryMap={},n=t.visual;if(L_(e,function(o,s){r[o]=s}),!De(n)){var i=[];Nt(n)?L_(n,function(o,s){var l=r[s];i[l!=null?l:Vw]=o}):i[Vw]=n,n=Dee(t,i)}for(var a=e.length-1;a>=0;a--)n[a]==null&&(delete r[e[a]],e.pop())}function wM(t,e){var r=t.visual,n=[];Nt(r)?L_(r,function(a){n.push(a)}):r!=null&&n.push(r);var i={color:1,symbol:1};!e&&n.length===1&&!i.hasOwnProperty(t.type)&&(n[1]=n[0]),Dee(t,n)}function jS(t){return{applyVisual:function(e,r,n){var i=this.mapValueToVisual(e);n("color",t(r("color"),i))},_normalizedToVisual:AR([0,1])}}function XV(t){var e=this.option.visual;return e[Math.round(rn(t,[0,1],[0,e.length-1],!0))]||{}}function Oy(t){return function(e,r,n){n(t,this.mapValueToVisual(e))}}function g1(t){var e=this.option.visual;return e[this.option.loop&&t!==Vw?t%e.length:t]}function Od(){return this.option.visual[0]}function AR(t){return{linear:function(e){return rn(e,t,this.option.visual,!0)},category:g1,piecewise:function(e,r){var n=MR.call(this,r);return n==null&&(n=rn(e,t,this.option.visual,!0)),n},fixed:Od}}function MR(t){var e=this.option,r=e.pieceList;if(e.hasSpecialVisual){var n=Ji.findPieceIndex(t,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function Dee(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=Oe(e,function(r){var n=go(r);return n||[0,0,0,1]})),e}var zbe={linear:function(t){return rn(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,r=Ji.findPieceIndex(t,e,!0);if(r!=null)return rn(r,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e==null?Vw:e},fixed:pi};function XS(t,e,r){return t?e<=r:e<r}var KV=G;function YV(t){if(t){for(var e in t)if(t.hasOwnProperty(e))return!0}}function RR(t,e,r){var n={};return KV(e,function(a){var o=n[a]=i();KV(t[a],function(s,l){if(Ji.isValidType(l)){var u={type:l,visual:s};r&&r(u,a),o[l]=new Ji(u),l==="opacity"&&(u=Ft(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ji(u))}})}),n;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function Iee(t,e,r){var n;G(r,function(i){e.hasOwnProperty(i)&&YV(e[i])&&(n=!0)}),n&&G(r,function(i){e.hasOwnProperty(i)&&YV(e[i])?t[i]=Ft(e[i]):delete t[i]})}function Ube(t,e,r,n,i,a){var o={};G(t,function(f){var h=Ji.prepareVisualTypes(e[f]);o[f]=h});var s;function l(f){return GL(r,s,f)}function u(f,h){Qq(r,s,f,h)}r.each(c);function c(f,h){s=f;var d=r.getRawDataItem(s);if(!(d&&d.visualMap===!1))for(var p=n.call(i,f),v=e[p],g=o[p],m=0,x=g.length;m<x;m++){var S=g[m];v[S]&&v[S].applyVisual(f,l,u)}}}function Vbe(t,e,r,n){var i={};return G(t,function(a){var o=Ji.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return GL(s,f,T)}function c(T,w){Qq(s,f,T,w)}for(var f,h=s.getStore();(f=o.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=e[v],m=i[v],x=0,S=m.length;x<S;x++){var b=m[x];g[b]&&g[b].applyVisual(p,u,c)}}}}}function Hbe(t){var e=t.brushType,r={point:function(n){return qV[e].point(n,r,t)},rect:function(n){return qV[e].rect(n,r,t)}};return r}var qV={lineX:ZV(0),lineY:ZV(1),rect:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])},rect:function(t,e,r){return t&&r.boundingRect.intersect(t)}},polygon:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])&&Ud(r.range,t[0],t[1])},rect:function(t,e,r){var n=r.range;if(!t||n.length<=1)return!1;var i=t.x,a=t.y,o=t.width,s=t.height,l=n[0];if(Ud(n,i,a)||Ud(n,i+o,a)||Ud(n,i,a+s)||Ud(n,i+o,a+s)||sr.create(t).contain(l[0],l[1])||c1(i,a,i+o,a,n)||c1(i,a,i,a+s,n)||c1(i+o,a,i+o,a+s,n)||c1(i,a+s,i+o,a+s,n))return!0}}};function ZV(t){var e=["x","y"],r=["width","height"];return{point:function(n,i,a){if(n){var o=a.range,s=n[t];return ky(s,o)}},rect:function(n,i,a){if(n){var o=a.range,s=[n[e[t]],n[e[t]]+n[r[t]]];return s[1]<s[0]&&s.reverse(),ky(s[0],o)||ky(s[1],o)||ky(o[0],s)||ky(o[1],s)}}}}function ky(t,e){return e[0]<=t&&t<=e[1]}var JV=["inBrush","outOfBrush"],TM="__ecBrushSelect",PR="__ecInBrushSelectEvent";function Nee(t){t.eachComponent({mainType:"brush"},function(e){var r=e.brushTargetManager=new tI(e.option,t);r.setInputRanges(e.areas,t)})}function Gbe(t,e,r){var n=[],i,a;t.eachComponent({mainType:"brush"},function(o){r&&r.type==="takeGlobalCursor"&&o.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),Nee(t),t.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Ft(o.areas),selected:[]};n.push(l);var u=o.option,c=u.brushLink,f=[],h=[],d=[],p=!1;s||(i=u.throttleType,a=u.throttleDelay);var v=Oe(o.areas,function(T){var w=Xbe[T.brushType],E=At({boundingRect:w?w(T):void 0},T);return E.selectors=Hbe(E),E}),g=RR(o.option,JV,function(T){T.mappingMethod="fixed"});De(c)&&G(c,function(T){f[T]=1});function m(T){return c==="all"||!!f[T]}function x(T){return!!T.length}t.eachSeries(function(T,w){var E=d[w]=[];T.subType==="parallel"?S(T,w):b(T,w,E)});function S(T,w){var E=T.coordinateSystem;p=p||E.hasAxisBrushed(),m(w)&&E.eachActiveState(T.getData(),function(M,A){M==="active"&&(h[A]=1)})}function b(T,w,E){if(!(!T.brushSelector||jbe(o,w))&&(G(v,function(A){o.brushTargetManager.controlSeries(A,T,t)&&E.push(A),p=p||x(E)}),m(w)&&x(E))){var M=T.getData();M.each(function(A){QV(T,E,M,A)&&(h[A]=1)})}}t.eachSeries(function(T,w){var E={seriesId:T.id,seriesIndex:w,seriesName:T.name,dataIndex:[]};l.selected.push(E);var M=d[w],A=T.getData(),R=m(w)?function(L){return h[L]?(E.dataIndex.push(A.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return QV(T,M,A,L)?(E.dataIndex.push(A.getRawIndex(L)),"inBrush"):"outOfBrush"};(m(w)?p:x(M))&&Ube(JV,g,A,R)})}),Wbe(e,i,a,n,r)}function Wbe(t,e,r,n,i){if(i){var a=t.getZr();if(!a[PR]){a[TM]||(a[TM]=$be);var o=i0(a,TM,r,e);o(t,n)}}}function $be(t,e){if(!t.isDisposed()){var r=t.getZr();r[PR]=!0,t.dispatchAction({type:"brushSelect",batch:e}),r[PR]=!1}}function QV(t,e,r,n){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(t.brushSelector(n,r,o.selectors,o))return!0}}function jbe(t,e){var r=t.option.seriesIndex;return r!=null&&r!=="all"&&(De(r)?hr(r,e)<0:e!==r)}var Xbe={rect:function(t){return eH(t.range)},polygon:function(t){for(var e,r=t.range,n=0,i=r.length;n<i;n++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=r[n];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&eH(e)}};function eH(t){return new sr(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var Kbe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n){this.ecModel=r,this.api=n,this.model,(this._brushController=new WD(n.getZr())).on("brush",pt(this._onBrush,this)).mount()},e.prototype.render=function(r,n,i,a){this.model=r,this._updateController(r,n,i,a)},e.prototype.updateTransform=function(r,n,i,a){Nee(n),this._updateController(r,n,i,a)},e.prototype.updateVisual=function(r,n,i,a){this.updateTransform(r,n,i,a)},e.prototype.updateView=function(r,n,i,a){this._updateController(r,n,i,a)},e.prototype._updateController=function(r,n,i,a){(!a||a.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(i)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(r){var n=this.model.id,i=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:Ft(i),$from:n}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Ft(i),$from:n})},e.type="brush",e}(_n),Ybe="#ddd",qbe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.areas=[],r.brushOption={},r}return e.prototype.optionUpdated=function(r,n){var i=this.option;!n&&Iee(i,r,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:Ybe},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(r){r&&(this.areas=Oe(r,function(n){return tH(this.option,n)},this))},e.prototype.setBrushOption=function(r){this.brushOption=tH(this.option,r),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(fr);function tH(t,e){return xt({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Br(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var Zbe=["rect","polygon","lineX","lineY","keep","clear"],Jbe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(r,n,i){var a,o,s;n.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,G(r.get("type",!0),function(l){r.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(r,n,i){this.render(r,n,i)},e.prototype.getIcons=function(){var r=this.model,n=r.get("icon",!0),i={};return G(r.get("type",!0),function(a){n[a]&&(i[a]=n[a])}),i},e.prototype.onclick=function(r,n,i){var a=this._brushType,o=this._brushMode;i==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(r){var n={show:!0,type:Zbe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return n},e}(js);function Qbe(t){t.registerComponentView(Kbe),t.registerComponentModel(qbe),t.registerPreprocessor(Nbe),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,Gbe),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,r){r.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},pi),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},pi),Mg("brush",Jbe)}var e3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.layoutMode={type:"box",ignoreSize:!0},r}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(fr),t3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var a=this.group,o=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Jt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Ar({style:dn(o,{text:r.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Ar({style:dn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){cw(p,"_"+r.get("target"))}),v&&d.on("click",function(){cw(v,"_"+r.get("subtarget"))}),Ht(c).eventData=Ht(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(c),h&&a.add(d);var m=a.getBoundingRect(),x=r.getBoxLayoutParams();x.width=m.width,x.height=m.height;var S=ri(x,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?S.x+=S.width:l==="center"&&(S.x+=S.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?S.y+=S.height:u==="middle"&&(S.y+=S.height/2),u=u||"top"),a.x=S.x,a.y=S.y,a.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),d.setStyle(b),m=a.getBoundingRect();var T=S.margin,w=r.getItemStyle(["color","opacity"]);w.fill=r.get("backgroundColor");var E=new Mr({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});a.add(E)}},e.type="title",e}(_n);function r3e(t){t.registerComponentModel(e3e),t.registerComponentView(t3e)}var rH=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.layoutMode="box",r}return e.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._initData()},e.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var n=this._data.count();this.option.loop?r=(r%n+n)%n:(r>=n&&(r=n-1),r<0&&(r=0)),this.option.currentIndex=r},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(r){this.option.autoPlay=!!r},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var r=this.option,n=r.data||[],i=r.axisType,a=this._names=[],o;i==="category"?(o=[],G(n,function(u,c){var f=Fi(jm(u),""),h;Nt(u)?(h=Ft(u),h.value=c):h=c,o.push(h),a.push(f)})):o=n;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new Kn([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(fr),Oee=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="timeline.slider",e.defaultOption=Ah(rH.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(rH);mi(Oee,ZT.prototype);var n3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="timeline",e}(_n),i3e=function(t){he(e,t);function e(r,n,i,a){var o=t.call(this,r,n,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Po),CM=Math.PI,nH=kr(),a3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n){this.api=n},e.prototype.render=function(r,n,i){if(this.model=r,this.api=i,this.ecModel=n,this.group.removeAll(),r.get("show",!0)){var a=this._layout(r,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,r);r.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return ea("nameValue",{noName:!0,value:c})},G(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,r)},this),this._renderAxisLabel(a,s,l,r),this._position(a,r)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(r,n){var i=r.get(["label","position"]),a=r.get("orient"),o=s3e(r,n),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<n.getHeight()/2?"-":"+":o.x+o.width/2<n.getWidth()/2?"+":"-":ft(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:CM/2},f=a==="vertical"?o.height:o.width,h=r.getModel("controlStyle"),d=h.get("show",!0),p=d?h.get("itemSize"):0,v=d?h.get("itemGap"):0,g=p+v,m=r.get(["label","rotate"])||0;m=m*CM/180;var x,S,b,T=h.get("position",!0),w=d&&h.get("showPlayBtn",!0),E=d&&h.get("showPrevBtn",!0),M=d&&h.get("showNextBtn",!0),A=0,R=f;T==="left"||T==="bottom"?(w&&(x=[0,0],A+=g),E&&(S=[A,0],A+=g),M&&(b=[R-p,0],R-=g)):(w&&(x=[R-p,0],R-=g),E&&(S=[0,0],A+=g),M&&(b=[R-p,0],R-=g));var L=[A,R];return r.get("inverse")&&L.reverse(),{viewRect:o,mainLength:f,orient:a,rotation:c[a],labelRotation:m,labelPosOpt:s,labelAlign:r.get(["label","align"])||l[a],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||u[a],playPosition:x,prevBtnPosition:S,nextBtnPosition:b,axisExtent:L,controlSize:p,controlGap:v}},e.prototype._position=function(r,n){var i=this._mainGroup,a=this._labelGroup,o=r.viewRect;if(r.orient==="vertical"){var s=Xo(),l=o.x,u=o.y+o.height;Du(s,s,[-l,-u]),zp(s,s,-CM/2),Du(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=x(o),f=x(i.getBoundingRect()),h=x(a.getBoundingRect()),d=[i.x,i.y],p=[a.x,a.y];p[0]=d[0]=c[0][0];var v=r.labelPosOpt;if(v==null||ft(v)){var g=v==="+"?0:1;S(d,f,c,1,g),S(p,h,c,1,1-g)}else{var g=v>=0?0:1;S(d,f,c,1,g),p[1]=d[1]+v}i.setPosition(d),a.setPosition(p),i.rotation=a.rotation=r.rotation,m(i),m(a);function m(b){b.originX=c[0][0]-b.x,b.originY=c[1][0]-b.y}function x(b){return[[b.x,b.x+b.width],[b.y,b.y+b.height]]}function S(b,T,w,E,M){b[E]+=w[E][M]-T[E][M]}},e.prototype._createAxis=function(r,n){var i=n.getData(),a=n.get("axisType"),o=o3e(n,a);o.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new i3e("value",o,r.axisExtent,a);return l.model=n,l},e.prototype._createGroup=function(r){var n=this[r]=new Vt;return this.group.add(n),n},e.prototype._renderAxisLine=function(r,n,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new ji({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Ae({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new ji({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:At({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},e.prototype._renderAxisTick=function(r,n,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],G(l,function(u){var c=i.dataToCoord(u.value),f=s.getItemModel(u.value),h=f.getModel("itemStyle"),d=f.getModel(["emphasis","itemStyle"]),p=f.getModel(["progress","itemStyle"]),v={x:c,y:0,onclick:pt(o._changeTimeline,o,u.value)},g=iH(f,h,n,v);g.ensureState("emphasis").style=d.getItemStyle(),g.ensureState("progress").style=p.getItemStyle(),hp(g);var m=Ht(g);f.get("tooltip")?(m.dataIndex=u.value,m.dataModel=a):m.dataIndex=m.dataModel=null,o._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(r,n,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],G(u,function(c){var f=c.tickValue,h=l.getItemModel(f),d=h.getModel("label"),p=h.getModel(["emphasis","label"]),v=h.getModel(["progress","label"]),g=i.dataToCoord(c.tickValue),m=new Ar({x:g,y:0,rotation:r.labelRotation-r.rotation,onclick:pt(o._changeTimeline,o,f),silent:!1,style:dn(d,{text:c.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});m.ensureState("emphasis").style=dn(p),m.ensureState("progress").style=dn(v),n.add(m),hp(m),nH(m).dataIndex=f,o._tickLabels.push(m)})}},e.prototype._renderControl=function(r,n,i,a){var o=r.controlSize,s=r.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),f=a.get("inverse",!0);h(r.nextBtnPosition,"next",pt(this._changeTimeline,this,f?"-":"+")),h(r.prevBtnPosition,"prev",pt(this._changeTimeline,this,f?"+":"-")),h(r.playPosition,c?"stop":"play",pt(this._handlePlayClick,this,!c),!0);function h(d,p,v,g){if(d){var m=Wl(Jt(a.get(["controlStyle",p+"BtnSize"]),o),o),x=[0,-m/2,m,m],S=l3e(a,p+"Icon",x,{x:d[0],y:d[1],originX:o/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:v});S.ensureState("emphasis").style=u,n.add(S),hp(S)}}},e.prototype._renderCurrentPointer=function(r,n,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(f){f.draggable=!0,f.drift=pt(u._handlePointerDrag,u),f.ondragend=pt(u._handlePointerDragend,u),aH(f,u._progressLine,s,i,a,!0)},onUpdate:function(f){aH(f,u._progressLine,s,i,a)}};this._currentPointer=iH(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},e.prototype._handlePointerDrag=function(r,n,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},e.prototype._pointerChangeTimeline=function(r,n){var i=this._toAxisCoord(r)[0],a=this._axis,o=Ys(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=r.model;r._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(r){var n=this._mainGroup.getLocalTransform();return Fl(r,n,!0)},e.prototype._findNearestTick=function(r){var n=this.model.getData(),i=1/0,a,o=this._axis;return n.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-r);c<i&&(i=c,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(r){var n=this.model.getCurrentIndex();r==="+"?r=n+1:r==="-"&&(r=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},e.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),n=this._tickSymbols,i=this._tickLabels;if(n)for(var a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",a<r);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",nH(i[a]).dataIndex<=r)},e.type="timeline.slider",e}(n3e);function o3e(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new i4({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new eD({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new Uc}}function s3e(t,e){return ri(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function l3e(t,e,r,n){var i=n.style,a=v2(t.get(["controlStyle",e]),n||{},new sr(r[0],r[1],r[2],r[3]));return i&&a.setStyle(i),a}function iH(t,e,r,n,i,a){var o=e.get("color");if(i)i.setColor(o),r.add(i),a&&a.onUpdate(i);else{var s=t.get("symbol");i=vi(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),r.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),n=xt({rectHover:!0,z2:100},n,!0);var u=a0(t.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var c=Hp(t.get("symbolOffset"),u);c&&(n.x=(n.x||0)+c[0],n.y=(n.y||0)+c[1]);var f=t.get("symbolRotate");return n.rotation=(f||0)*Math.PI/180||0,i.attr(n),i.updateTransform(),i}function aH(t,e,r,n,i,a){if(!t.dragging){var o=i.getModel("checkpointStyle"),s=n.dataToCoord(i.getData().get("value",r));if(a||!o.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function u3e(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,r,n){var i=r.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),r.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),At({currentIndex:i.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,r){var n=r.getComponent("timeline");n&&e.playState!=null&&n.setPlayState(e.playState)})}function c3e(t){var e=t&&t.timeline;De(e)||(e=e?[e]:[]),G(e,function(r){r&&f3e(r)})}function f3e(t){var e=t.type,r={number:"value",time:"time"};if(r[e]&&(t.axisType=r[e],delete t.type),oH(t),Gd(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});Gd(n,"position")||(n.position=t.controlPosition),n.position==="none"&&!Gd(n,"show")&&(n.show=!1,delete n.position),delete t.controlPosition}G(t.data||[],function(i){Nt(i)&&!De(i)&&(!Gd(i,"value")&&Gd(i,"name")&&(i.value=i.name),oH(i))})}function oH(t){var e=t.itemStyle||(t.itemStyle={}),r=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},i=n.normal||(n.normal={}),a={normal:1,emphasis:1};G(n,function(o,s){!a[s]&&!Gd(i,s)&&(i[s]=o)}),r.label&&!Gd(n,"emphasis")&&(n.emphasis=r.label,delete r.label)}function Gd(t,e){return t.hasOwnProperty(e)}function h3e(t){t.registerComponentModel(Oee),t.registerComponentView(a3e),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),u3e(t),t.registerPreprocessor(c3e)}function iI(t,e){if(!t)return!1;for(var r=De(t)?t:[t],n=0;n<r.length;n++)if(r[n]&&r[n][e])return!0;return!1}function KS(t){bp(t,"label",["show"])}var YS=kr(),Hc=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.createdBySelf=!1,r}return e.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(br.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},e.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},e.prototype._mergeOption=function(r,n,i,a){var o=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=YS(s)[o];if(!l||!l.data){YS(s)[o]=null;return}u?u._mergeOption(l,n,!0):(a&&KS(l),G(l.data,function(c){c instanceof Array?(KS(c[0]),KS(c[1])):KS(c)}),u=this.createMarkerModelFromSeries(l,this,n),Ae(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),YS(s)[o]=u},this)},e.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return ea("section",{header:this.name,blocks:[ea("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(r){this._data=r},e.prototype.getDataParams=function(r,n){var i=ZT.prototype.getDataParams.call(this,r,n),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(r,n){return YS(r)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(fr);mi(Hc,ZT.prototype);var d3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.createMarkerModelFromSeries=function(r,n,i){return new e(r,n,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Hc);function bm(t,e){var r=t.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=sm(t,e,r[0]);return i!=null?i+"":null}else if(n){for(var a=[],o=0;o<r.length;o++)a.push(sm(t,e,r[o]));return a.join(" ")}}function kee(t,e){var r=t.mapDimensionsAll("defaultedLabel");if(!De(e))return e+"";for(var n=[],i=0;i<r.length;i++){var a=t.getDimensionIndex(r[i]);a>=0&&n.push(e[a])}return n.join(" ")}var E2=function(t){he(e,t);function e(r,n,i,a){var o=t.call(this)||this;return o.updateData(r,n,i,a),o}return e.prototype._createSymbol=function(r,n,i,a,o){this.removeAll();var s=vi(r,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=p3e,this._symbolType=r,this.add(s)},e.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){kc(this.childAt(0))},e.prototype.downplay=function(){Fc(this.childAt(0))},e.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},e.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},e.prototype.updateData=function(r,n,i,a){this.silent=!1;var o=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=e.getSymbolSize(r,n),u=o!==this._symbolType,c=a&&a.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):Xr(h,d,s,n),$l(h)}if(this._updateCommon(r,n,l,i,a),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Fn(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(r,n,i,a,o){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,f=a.selectItemStyle,h=a.focus,d=a.blurScope,v=a.labelStatesModels,g=a.hoverScale,m=a.cursorStyle,p=a.emphasisDisabled),!a||r.hasItemOption){var x=a&&a.itemModel?a.itemModel:r.getItemModel(n),S=x.getModel("emphasis");u=S.getModel("itemStyle").getItemStyle(),f=x.getModel(["select","itemStyle"]).getItemStyle(),c=x.getModel(["blur","itemStyle"]).getItemStyle(),h=S.get("focus"),d=S.get("blurScope"),p=S.get("disabled"),v=Qi(x),g=S.getShallow("scale"),m=x.getShallow("cursor")}var b=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(b||0)*Math.PI/180||0);var T=Hp(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var w=r.getItemVisual(n,"style"),E=w.fill;if(s instanceof aa){var M=s.style;s.useStyle(Ae({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},w))}else s.__isEmptyBrush?s.useStyle(Ae({},w)):s.useStyle(w),s.style.decal=null,s.setColor(E,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),R=this._z2;A!=null?R==null&&(this._z2=s.z2,s.z2+=A):R!=null&&(s.z2=R,this._z2=null);var L=o&&o.useNameLabel;ka(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:I,inheritColor:E,defaultOpacity:w.opacity});function I(z){return L?r.getName(z):bm(r,z)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var N=s.ensureState("emphasis");N.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var k=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;N.scaleX=this._sizeX*k,N.scaleY=this._sizeY*k,this.setSymbolScale(1),ti(this,h,d,p)},e.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},e.prototype.fadeOut=function(r,n,i){var a=this.childAt(0),o=Ht(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&Sh(l,{style:{opacity:0}},n,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Sh(a,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:o,cb:r,removeOpt:s})},e.getSymbolSize=function(r,n){return a0(r.getItemVisual(n,"symbolSize"))},e}(Vt);function p3e(t,e){this.parent.drift(t,e)}function EM(t,e,r,n){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(e[0],e[1]))&&t.getItemVisual(r,"symbol")!=="none"}function sH(t){return t!=null&&!Nt(t)&&(t={isIgnore:t}),t||{}}function lH(t){var e=t.hostModel,r=e.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Qi(e),cursorStyle:e.get("cursor")}}var A2=function(){function t(e){this.group=new Vt,this._SymbolCtor=e||E2}return t.prototype.updateData=function(e,r){this._progressiveEls=null,r=sH(r);var n=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=r.disableAnimation,l=lH(e),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return e.getItemLayout(f)};a||n.removeAll(),e.diff(a).add(function(f){var h=c(f);if(EM(e,h,f,r)){var d=new o(e,f,l,u);d.setPosition(h),e.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=a.getItemGraphicEl(h),p=c(f);if(!EM(e,p,f,r)){n.remove(d);return}var v=e.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new o(e,f,l,u),d.setPosition(p);else{d.updateData(e,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):Xr(d,m,i)}n.add(d),e.setItemGraphicEl(f,d)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=e},t.prototype.updateLayout=function(){var e=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var a=e._getSymbolPoint(i);n.setPosition(a),n.markRedraw()})},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=lH(e),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,r,n){this._progressiveEls=[],n=sH(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=r.getItemLayout(a);if(EM(r,o,a,n)){var s=new this._SymbolCtor(r,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),r.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},t.prototype.eachRendered=function(e){Eh(this._progressiveEls||this.group,e)},t.prototype.remove=function(e){var r=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},t}();function LR(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function v3e(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function qS(t,e,r,n,i,a){var o=[],s=zc(e,n),l=s?e.getCalculationInfo("stackResultDimension"):n,u=aI(e,l,t),c=e.indicesOfNearest(l,u)[0];o[i]=e.get(r,c),o[a]=e.get(l,c);var f=e.get(n,c),h=Su(e.get(n,c));return h=Math.min(h,20),h>=0&&(o[a]=+o[a].toFixed(h)),[o,f]}var AM={min:Zt(qS,"min"),max:Zt(qS,"max"),average:Zt(qS,"average"),median:Zt(qS,"median")};function D_(t,e){if(e){var r=t.getData(),n=t.coordinateSystem,i=n&&n.dimensions;if(!v3e(e)&&!De(e.coord)&&De(i)){var a=Fee(e,r,n,t);if(e=Ft(e),e.type&&AM[e.type]&&a.baseAxis&&a.valueAxis){var o=hr(i,a.baseAxis.dim),s=hr(i,a.valueAxis.dim),l=AM[e.type](r,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!De(i))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)AM[u[c]]&&(u[c]=aI(r,r.mapDimension(i[c]),u[c]));return e}}function Fee(t,e,r,n){var i={};return t.valueIndex!=null||t.valueDim!=null?(i.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,i.valueAxis=r.getAxis(g3e(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function g3e(t,e){var r=t.getData().getDimensionInfo(e);return r&&r.coordDim}function I_(t,e){return t&&t.containData&&e.coord&&!LR(e)?t.containData(e.coord):!0}function m3e(t,e,r){return t&&t.containZone&&e.coord&&r.coord&&!LR(e)&&!LR(r)?t.containZone(e.coord,r.coord):!0}function Bee(t,e){return t?function(r,n,i,a){var o=a<2?r.coord&&r.coord[a]:r.value;return dh(o,e[a])}:function(r,n,i,a){return dh(r.value,e[a])}}function aI(t,e,r){if(r==="average"){var n=0,i=0;return t.each(e,function(a,o){isNaN(a)||(n+=a,i++)}),n/i}else return r==="median"?t.getMedian(e):t.getDataExtent(e)[r==="max"?1:0]}var MM=kr(),oI=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(){this.markerGroupMap=Tt()},e.prototype.render=function(r,n,i){var a=this,o=this.markerGroupMap;o.each(function(s){MM(s).keep=!1}),n.eachSeries(function(s){var l=Hc.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,n,i)}),o.each(function(s){!MM(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(r){MM(r).keep=!0},e.prototype.toggleBlurSeries=function(r,n){var i=this;G(r,function(a){var o=Hc.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(n?MY(l):xL(l))})}})},e.type="marker",e}(_n);function uH(t,e,r){var n=e.coordinateSystem;t.each(function(i){var a=t.getItemModel(i),o,s=Ze(a.get("x"),r.getWidth()),l=Ze(a.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,i));else if(n){var u=t.get(n.dimensions[0],i),c=t.get(n.dimensions[1],i);o=n.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(i,o)})}var y3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.updateTransform=function(r,n,i){n.eachSeries(function(a){var o=Hc.getMarkerModelFromSeries(a,"markPoint");o&&(uH(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(r,n,i,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new A2),f=_3e(o,r,n);n.setData(f),uH(n.getData(),r,a),f.each(function(h){var d=f.getItemModel(h),p=d.getShallow("symbol"),v=d.getShallow("symbolSize"),g=d.getShallow("symbolRotate"),m=d.getShallow("symbolOffset"),x=d.getShallow("symbolKeepAspect");if(Lt(p)||Lt(v)||Lt(g)||Lt(m)){var S=n.getRawValue(h),b=n.getDataParams(h);Lt(p)&&(p=p(S,b)),Lt(v)&&(v=v(S,b)),Lt(g)&&(g=g(S,b)),Lt(m)&&(m=m(S,b))}var T=d.getModel("itemStyle").getItemStyle(),w=g2(l,"color");T.fill||(T.fill=w),f.setItemVisual(h,{symbol:p,symbolSize:v,symbolRotate:g,symbolOffset:m,symbolKeepAspect:x,style:T})}),c.updateData(f),this.group.add(c.group),f.eachItemGraphicEl(function(h){h.traverse(function(d){Ht(d).dataModel=n})}),this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},e.type="markPoint",e}(oI);function _3e(t,e,r){var n;t?n=Oe(t&&t.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return Ae(Ae({},l),{name:s,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Kn(n,r),a=Oe(r.get("data"),Zt(D_,e));t&&(a=hn(a,Zt(I_,t)));var o=Bee(!!t,n);return i.initData(a,null,o),i}function x3e(t){t.registerComponentModel(d3e),t.registerComponentView(y3e),t.registerPreprocessor(function(e){iI(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var S3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.createMarkerModelFromSeries=function(r,n,i){return new e(r,n,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Hc),cH=ji.prototype,RM=d2.prototype,zee=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(zee);function PM(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var b3e=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="ec-line",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zee},e.prototype.buildPath=function(r,n){PM(n)?cH.buildPath.call(this,r,n):RM.buildPath.call(this,r,n)},e.prototype.pointAt=function(r){return PM(this.shape)?cH.pointAt.call(this,r):RM.pointAt.call(this,r)},e.prototype.tangentAt=function(r){var n=this.shape,i=PM(n)?[n.x2-n.x1,n.y2-n.y1]:RM.tangentAt.call(this,r);return Wm(i,i)},e}(yr),LM=["fromSymbol","toSymbol"];function fH(t){return"_"+t+"Type"}function hH(t,e,r){var n=e.getItemVisual(r,t);if(!n||n==="none")return n;var i=e.getItemVisual(r,t+"Size"),a=e.getItemVisual(r,t+"Rotate"),o=e.getItemVisual(r,t+"Offset"),s=e.getItemVisual(r,t+"KeepAspect"),l=a0(i),u=Hp(o||0,l);return n+l+u+(a||"")+(s||"")}function dH(t,e,r){var n=e.getItemVisual(r,t);if(!(!n||n==="none")){var i=e.getItemVisual(r,t+"Size"),a=e.getItemVisual(r,t+"Rotate"),o=e.getItemVisual(r,t+"Offset"),s=e.getItemVisual(r,t+"KeepAspect"),l=a0(i),u=Hp(o||0,l),c=vi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=t,c}}function w3e(t){var e=new b3e({name:"line",subPixelOptimize:!0});return DR(e.shape,t),e}function DR(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var r=e[2];r?(t.cpx1=r[0],t.cpy1=r[1]):(t.cpx1=NaN,t.cpy1=NaN)}var sI=function(t){he(e,t);function e(r,n,i){var a=t.call(this)||this;return a._createLine(r,n,i),a}return e.prototype._createLine=function(r,n,i){var a=r.hostModel,o=r.getItemLayout(n),s=w3e(o);s.shape.percent=0,Fn(s,{shape:{percent:1}},a,n),this.add(s),G(LM,function(l){var u=dH(l,r,n);this.add(u),this[fH(l)]=hH(l,r,n)},this),this._updateCommonStl(r,n,i)},e.prototype.updateData=function(r,n,i){var a=r.hostModel,o=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};DR(l.shape,s),Xr(o,l,a,n),G(LM,function(u){var c=hH(u,r,n),f=fH(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=dH(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(r,n,i){var a=r.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=Qi(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,G(LM,function(w){var E=this.childOfName(w);if(E){E.setColor(m),E.style.opacity=g.opacity;for(var M=0;M<bo.length;M++){var A=bo[M],R=o.getState(A);if(R){var L=R.style||{},I=E.ensureState(A),N=I.style||(I.style={});L.stroke!=null&&(N[E.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(N.opacity=L.opacity)}}E.markRedraw()}},this);var x=a.getRawValue(n);ka(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(w,E){return a.getFormattedLabel(w,E,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(x==null?r.getName(n):isFinite(x)?kn(x):x)+""});var S=this.getTextContent();if(S){var b=c.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=b.get("position")||"middle";var T=b.get("distance");De(T)||(T=[T,T]),S.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),ti(this,h,d,f)},e.prototype.highlight=function(){kc(this)},e.prototype.downplay=function(){Fc(this)},e.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},e.prototype.setLinePoints=function(r){var n=this.childOfName("line");DR(n.shape,r),n.dirty()},e.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),a=r.getTextContent();if(!n&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=Xd([],f,c);Wm(h,h);function d(R,L){var I=R.__specifiedRotation;if(I==null){var N=l.tangentAt(L);R.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(N[1],N[0]))}else R.attr("rotation",I)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=o*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,v=void 0,g=a.__labelDistance,m=g[0]*o,x=g[1]*o,S=u/2,b=l.tangentAt(S),T=[b[1],-b[0]],w=l.pointAt(S);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var E=b[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var M=-Math.atan2(b[1],b[0]);f[0]<c[0]&&(M=Math.PI+M),a.rotation=M}var A=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-x,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=x,v="top";break;default:A=0,v="middle"}switch(a.__position){case"end":a.x=h[0]*m+f[0],a.y=h[1]*x+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":a.x=-h[0]*m+c[0],a.y=-h[1]*x+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=m*E+c[0],a.y=c[1]+A,p=b[0]<0?"right":"left",a.originX=-m*E,a.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=w[0],a.y=w[1]+A,p="center",a.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-m*E+f[0],a.y=f[1]+A,p=b[0]>=0?"right":"left",a.originX=m*E,a.originY=-A;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||p})}},e}(Vt),lI=function(){function t(e){this.group=new Vt,this._LineCtor=e||sI}return t.prototype.updateData=function(e){var r=this;this._progressiveEls=null;var n=this,i=n.group,a=n._lineData;n._lineData=e,a||i.removeAll();var o=pH(e);e.diff(a).add(function(s){r._doAdd(e,s,o)}).update(function(s,l){r._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(r,n){r.updateLayout(e,n)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=pH(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,r){this._progressiveEls=[];function n(s){!s.isGroup&&!T3e(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=r.getItemLayout(i);if(DM(a)){var o=new this._LineCtor(r,i,this._seriesScope);o.traverse(n),this.group.add(o),r.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){Eh(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,r,n){var i=e.getItemLayout(r);if(DM(i)){var a=new this._LineCtor(e,r,n);e.setItemGraphicEl(r,a),this.group.add(a)}},t.prototype._doUpdate=function(e,r,n,i,a){var o=e.getItemGraphicEl(n);if(!DM(r.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(r,i,a):o=new this._LineCtor(r,i,a),r.setItemGraphicEl(i,o),this.group.add(o)},t}();function T3e(t){return t.animators&&t.animators.length>0}function pH(t){var e=t.hostModel,r=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Qi(e)}}function vH(t){return isNaN(t[0])||isNaN(t[1])}function DM(t){return t&&!vH(t[0])&&!vH(t[1])}function Kp(t,e){return t.type===e}var ZS=kr(),C3e=function(t,e,r,n){var i=t.getData(),a;if(De(n))a=n;else{var o=n.type;if(o==="min"||o==="max"||o==="average"||o==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=e.getAxis(n.yAxis!=null?"y":"x"),l=ma(n.yAxis,n.xAxis);else{var u=Fee(n,i,e,t);s=u.valueAxis;var c=ZL(i,u.valueDataDim);l=aI(i,c,o)}var f=s.dim==="x"?0:1,h=1-f,d=Ft(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&Ur(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,a=[d,p,{type:o,valueIndex:n.valueIndex,value:l}]}else a=[]}var g=[D_(t,a[0]),D_(t,a[1]),Ae({},a[2])];return g[2].type=g[2].type||null,xt(g[2],g[0]),xt(g[2],g[1]),g};function Hw(t){return!isNaN(t)&&!isFinite(t)}function gH(t,e,r,n){var i=1-t,a=n.dimensions[t];return Hw(e[i])&&Hw(r[i])&&e[t]===r[t]&&n.getAxis(a).containData(e[t])}function E3e(t,e){if(t.type==="cartesian2d"){var r=e[0].coord,n=e[1].coord;if(r&&n&&(gH(1,r,n,t)||gH(0,r,n,t)))return!0}return I_(t,e[0])&&I_(t,e[1])}function IM(t,e,r,n,i){var a=n.coordinateSystem,o=t.getItemModel(e),s,l=Ze(o.get("x"),i.getWidth()),u=Ze(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=a.dimensions,f=t.get(c[0],e),h=t.get(c[1],e);s=a.dataToPoint([f,h])}if(Kp(a,"cartesian2d")){var d=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;Hw(t.get(c[0],e))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Hw(t.get(c[1],e))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}t.setItemLayout(e,s)}var A3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.updateTransform=function(r,n,i){n.eachSeries(function(a){var o=Hc.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=ZS(o).from,u=ZS(o).to;l.each(function(c){IM(l,c,!0,a,i),IM(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(r,n,i,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new lI);this.group.add(c.group);var f=M3e(o,r,n),h=f.from,d=f.to,p=f.line;ZS(n).from=h,ZS(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),x=n.get("symbolOffset");De(v)||(v=[v,v]),De(g)||(g=[g,g]),De(m)||(m=[m,m]),De(x)||(x=[x,x]),f.from.each(function(b){S(h,b,!0),S(d,b,!1)}),p.each(function(b){var T=p.getItemModel(b).getModel("lineStyle").getLineStyle();p.setItemLayout(b,[h.getItemLayout(b),d.getItemLayout(b)]),T.stroke==null&&(T.stroke=h.getItemVisual(b,"style").fill),p.setItemVisual(b,{fromSymbolKeepAspect:h.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(b,"symbolOffset"),fromSymbolRotate:h.getItemVisual(b,"symbolRotate"),fromSymbolSize:h.getItemVisual(b,"symbolSize"),fromSymbol:h.getItemVisual(b,"symbol"),toSymbolKeepAspect:d.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(b,"symbolOffset"),toSymbolRotate:d.getItemVisual(b,"symbolRotate"),toSymbolSize:d.getItemVisual(b,"symbolSize"),toSymbol:d.getItemVisual(b,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(b){Ht(b).dataModel=n,b.traverse(function(T){Ht(T).dataModel=n})});function S(b,T,w){var E=b.getItemModel(T);IM(b,T,w,r,a);var M=E.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=g2(l,"color")),b.setItemVisual(T,{symbolKeepAspect:E.get("symbolKeepAspect"),symbolOffset:Jt(E.get("symbolOffset",!0),x[w?0:1]),symbolRotate:Jt(E.get("symbolRotate",!0),m[w?0:1]),symbolSize:Jt(E.get("symbolSize"),g[w?0:1]),symbol:Jt(E.get("symbol",!0),v[w?0:1]),style:M})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},e.type="markLine",e}(oI);function M3e(t,e,r){var n;t?n=Oe(t&&t.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return Ae(Ae({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Kn(n,r),a=new Kn(n,r),o=new Kn([],r),s=Oe(r.get("data"),Zt(C3e,e,t,r));t&&(s=hn(s,Zt(E3e,t)));var l=Bee(!!t,n);return i.initData(Oe(s,function(u){return u[0]}),null,l),a.initData(Oe(s,function(u){return u[1]}),null,l),o.initData(Oe(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function R3e(t){t.registerComponentModel(S3e),t.registerComponentView(A3e),t.registerPreprocessor(function(e){iI(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var P3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.createMarkerModelFromSeries=function(r,n,i){return new e(r,n,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Hc),JS=kr(),L3e=function(t,e,r,n){var i=n[0],a=n[1];if(!(!i||!a)){var o=D_(t,i),s=D_(t,a),l=o.coord,u=s.coord;l[0]=ma(l[0],-1/0),l[1]=ma(l[1],-1/0),u[0]=ma(u[0],1/0),u[1]=ma(u[1],1/0);var c=tL([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function Gw(t){return!isNaN(t)&&!isFinite(t)}function mH(t,e,r,n){var i=1-t;return Gw(e[i])&&Gw(r[i])}function D3e(t,e){var r=e.coord[0],n=e.coord[1],i={coord:r,x:e.x0,y:e.y0},a={coord:n,x:e.x1,y:e.y1};return Kp(t,"cartesian2d")?r&&n&&(mH(1,r,n)||mH(0,r,n))?!0:m3e(t,i,a):I_(t,i)||I_(t,a)}function yH(t,e,r,n,i){var a=n.coordinateSystem,o=t.getItemModel(e),s,l=Ze(o.get(r[0]),i.getWidth()),u=Ze(o.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition){var c=t.getValues(["x0","y0"],e),f=t.getValues(["x1","y1"],e),h=a.clampData(c),d=a.clampData(f),p=[];r[0]==="x0"?p[0]=h[0]>d[0]?f[0]:c[0]:p[0]=h[0]>d[0]?c[0]:f[0],r[1]==="y0"?p[1]=h[1]>d[1]?f[1]:c[1]:p[1]=h[1]>d[1]?c[1]:f[1],s=n.getMarkerPosition(p,r,!0)}else{var v=t.get(r[0],e),g=t.get(r[1],e),m=[v,g];a.clampData&&a.clampData(m,m),s=a.dataToPoint(m,!0)}if(Kp(a,"cartesian2d")){var x=a.getAxis("x"),S=a.getAxis("y"),v=t.get(r[0],e),g=t.get(r[1],e);Gw(v)?s[0]=x.toGlobalCoord(x.getExtent()[r[0]==="x0"?0:1]):Gw(g)&&(s[1]=S.toGlobalCoord(S.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var _H=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],I3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.updateTransform=function(r,n,i){n.eachSeries(function(a){var o=Hc.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=Oe(_H,function(f){return yH(s,l,f,a,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(r,n,i,a){var o=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new Vt});this.group.add(c.group),this.markKeep(c);var f=N3e(o,r,n);n.setData(f),f.each(function(h){var d=Oe(_H,function(M){return yH(f,h,M,r,a)}),p=o.getAxis("x").scale,v=o.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),x=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],S=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Ys(x),Ys(S);var b=!(g[0]>x[1]||g[1]<x[0]||m[0]>S[1]||m[1]<S[0]),T=!b;f.setItemLayout(h,{points:d,allClipped:T});var w=f.getItemModel(h).getModel("itemStyle").getItemStyle(),E=g2(l,"color");w.fill||(w.fill=E,ft(w.fill)&&(w.fill=Z3(w.fill,.4))),w.stroke||(w.stroke=E),f.setItemVisual(h,"style",w)}),f.diff(JS(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new To({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=JS(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?Xr(p,{shape:{points:v.points}},n,h):p=new To({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=JS(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),ka(h,Qi(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:ft(v.fill)?Z3(v.fill,1):"#000"}),Oa(h,p),ti(h,null,null,p.get(["emphasis","disabled"])),Ht(h).dataModel=n}),JS(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},e.type="markArea",e}(oI);function N3e(t,e,r){var n,i,a=["x0","y0","x1","y1"];if(t){var o=Oe(t&&t.dimensions,function(u){var c=e.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return Ae(Ae({},f),{name:u,ordinalMeta:null})});i=Oe(a,function(u,c){return{name:u,type:o[c%2].type}}),n=new Kn(i,r)}else i=[{name:"value",type:"float"}],n=new Kn(i,r);var s=Oe(r.get("data"),Zt(L3e,e,t,r));t&&(s=hn(s,Zt(D3e,t)));var l=t?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return dh(d,i[h])}:function(u,c,f,h){return dh(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}function O3e(t){t.registerComponentModel(P3e),t.registerComponentView(I3e),t.registerPreprocessor(function(e){iI(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var k3e=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},IR=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.layoutMode={type:"box",ignoreSize:!0},r}return e.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},e.prototype.mergeOption=function(r,n){t.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},e.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),De(n)&&G(n,function(a,o){ft(a)&&(a={type:a}),n[o]=xt(a,k3e(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var a=r[i].get("name");if(this.isSelected(a)){this.select(a),n=!0;break}}!n&&this.select(r[0].get("name"))}},e.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,h=f.getAllNames();r.isSeriesFiltered(l)||(i=i.concat(h)),h.length?n=n.concat(h):c=!0}else c=!0;c&&hL(l)&&n.push(l.name)}),this._availableNames=i;var a=this.get("data")||n,o=Tt(),s=Oe(a,function(l){return(ft(l)||Ur(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Br(l,this,this.ecModel))},this);this._data=hn(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;G(a,function(o){n[o.get("name")]=!1})}n[r]=!0},e.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},e.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},e.prototype.allSelect=function(){var r=this._data,n=this.option.selected;G(r,function(i){n[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;G(r,function(i){var a=i.get("name",!0);n.hasOwnProperty(a)||(n[a]=!0),n[a]=!n[a]})},e.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&hr(this._availableNames,r)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(fr),Kv=Zt,NR=G,QS=Vt,Uee=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.newlineDisabled=!1,r}return e.prototype.init=function(){this.group.add(this._contentGroup=new QS),this.group.add(this._selectorGroup=new QS),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(r,n,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var o=r.get("align"),s=r.get("orient");(!o||o==="auto")&&(o=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=ri(c,f,h),p=this.layoutInner(r,o,d,a,l,u),v=ri(At({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Cee(p,r))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(r,n,i,a,o,s,l){var u=this.getContentGroup(),c=Tt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),NR(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new QS;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var x=m.getData(),S=x.getVisual("legendLineStyle")||{},b=x.getVisual("legendIcon"),T=x.getVisual("style"),w=this._createItem(m,v,p,d,n,r,S,T,b,f,a);w.on("click",Kv(xH,v,null,a,h)).on("mouseover",Kv(OR,m.name,null,a,h)).on("mouseout",Kv(kR,m.name,null,a,h)),i.ssr&&w.eachChild(function(E){var M=Ht(E);M.seriesIndex=m.seriesIndex,M.dataIndex=p,M.ssrType="legend"}),c.set(v,!0)}else i.eachRawSeries(function(E){if(!c.get(v)&&E.legendVisualProvider){var M=E.legendVisualProvider;if(!M.containName(v))return;var A=M.indexOfName(v),R=M.getItemVisual(A,"style"),L=M.getItemVisual(A,"legendIcon"),I=go(R.fill);I&&I[3]===0&&(I[3]=.2,R=Ae(Ae({},R),{fill:Ac(I,"rgba")}));var N=this._createItem(E,v,p,d,n,r,{},R,L,f,a);N.on("click",Kv(xH,null,v,a,h)).on("mouseover",Kv(OR,null,v,a,h)).on("mouseout",Kv(kR,null,v,a,h)),i.ssr&&N.eachChild(function(k){var z=Ht(k);z.seriesIndex=E.seriesIndex,z.dataIndex=p,z.ssrType="legend"}),c.set(v,!0)}},this)},this),o&&this._createSelector(o,n,a,s,l)},e.prototype._createSelector=function(r,n,i,a,o){var s=this.getSelectorGroup();NR(r,function(u){var c=u.type,f=new Ar({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);ka(f,{normal:h,emphasis:d},{defaultText:u.title}),hp(f)})},e.prototype._createItem=function(r,n,i,a,o,s,l,u,c,f,h){var d=r.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),g=o.isSelected(n),m=a.get("symbolRotate"),x=a.get("symbolKeepAspect"),S=a.get("icon");c=S||c||"roundRect";var b=F3e(c,a,l,u,d,g,h),T=new QS,w=a.getModel("textStyle");if(Lt(r.getLegendIcon)&&(!S||S==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}));else{var E=S==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add(B3e({itemWidth:p,itemHeight:v,icon:c,iconRotate:E,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}))}var M=s==="left"?p+5:-5,A=s,R=o.get("formatter"),L=n;ft(R)&&R?L=R.replace("{name}",n!=null?n:""):Lt(R)&&(L=R(n));var I=g?w.getTextColor():a.get("inactiveColor");T.add(new Ar({style:dn(w,{text:L,x:M,y:v/2,fill:I,align:A,verticalAlign:"middle"},{inheritColor:I})}));var N=new Mr({shape:T.getBoundingRect(),style:{fill:"transparent"}}),k=a.getModel("tooltip");return k.get("show")&&qm({el:N,componentModel:o,itemName:n,itemTooltipOption:k.option}),T.add(N),T.eachChild(function(z){z.silent=!0}),N.silent=!f,this.getContentGroup().add(T),hp(T),T.__legendDataIndex=i,T},e.prototype.layoutInner=function(r,n,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();pp(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){pp("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",x=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var S={x:0,y:0};return S[g]=c[g]+p+h[g],S[m]=Math.max(c[m],h[m]),S[x]=Math.min(0,h[x]+d[1-v]),S}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(_n);function F3e(t,e,r,n,i,a,o){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),NR(g,function(x,S){g[S]==="inherit"&&(g[S]=m[S])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:lm(f,o),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!a){var p=e.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function B3e(t){var e=t.icon||"roundRect",r=vi(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return r.setStyle(t.itemStyle),r.rotation=(t.iconRotate||0)*Math.PI/180,r.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function xH(t,e,r,n){kR(t,e,r,n),r.dispatchAction({type:"legendToggleSelect",name:t!=null?t:e}),OR(t,e,r,n)}function Vee(t){for(var e=t.getZr().storage.getDisplayList(),r,n=0,i=e.length;n<i&&!(r=e[n].states.emphasis);)n++;return r&&r.hoverLayer}function OR(t,e,r,n){Vee(r)||r.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:n})}function kR(t,e,r,n){Vee(r)||r.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:n})}function z3e(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(r){for(var n=0;n<e.length;n++)if(!e[n].isSelected(r.name))return!1;return!0})}function Fy(t,e,r){var n={},i=t==="toggleSelected",a;return r.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?o[t]():(o[t](e.name),a=o.isSelected(e.name));var s=o.getData();G(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),t==="allSelect"||t==="inverseSelect"?{selected:n}:{name:e.name,selected:n}}function U3e(t){t.registerAction("legendToggleSelect","legendselectchanged",Zt(Fy,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Zt(Fy,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Zt(Fy,"inverseSelect")),t.registerAction("legendSelect","legendselected",Zt(Fy,"select")),t.registerAction("legendUnSelect","legendunselected",Zt(Fy,"unSelect"))}function Hee(t){t.registerComponentModel(IR),t.registerComponentView(Uee),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,z3e),t.registerSubTypeDefaulter("legend",function(){return"plain"}),U3e(t)}var V3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},e.prototype.init=function(r,n,i){var a=e0(r);t.prototype.init.call(this,r,n,i),SH(this,r,a)},e.prototype.mergeOption=function(r,n){t.prototype.mergeOption.call(this,r,n),SH(this,this.option,r)},e.type="legend.scroll",e.defaultOption=Ah(IR.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(IR);function SH(t,e,r){var n=t.getOrient(),i=[1,1];i[n.index]=0,bh(e,r,{type:"box",ignoreSize:!!i})}var bH=Vt,NM=["width","height"],OM=["x","y"],H3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.newlineDisabled=!0,r._currentIndex=0,r}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new bH),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new bH)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(r,n,i,a,o,s,l){var u=this;t.prototype.renderInner.call(this,r,n,i,a,o,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=De(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Ar({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",x=v2(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:pt(u._pageGo,u,m,n,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});x.name=v,c.add(x)}},e.prototype.layoutInner=function(r,n,i,a,o,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=NM[u],f=OM[u],h=NM[1-u],d=OM[1-u];o&&pp("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=Ft(i);o&&(m[c]=i[c]-v[c]-p);var x=this._layoutContentAndController(r,a,m,u,c,h,d,f);if(o){if(s==="end")g[u]+=x[c]+p;else{var S=v[c]+p;g[u]-=S,x[f]-=S}x[c]+=v[c]+p,g[1-u]+=x[d]+x[h]/2-v[h]/2,x[h]=Math.max(x[h],v[h]),x[d]=Math.min(x[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return x},e.prototype._layoutContentAndController=function(r,n,i,a,o,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;pp(r.get("orient"),c,r.get("itemGap"),a?i.width:null,a?null:i.height),pp("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[o]>i[o],g=[-d.x,-d.y];n||(g[a]=c[u]);var m=[0,0],x=[-p.x,-p.y],S=Jt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var b=r.get("pageButtonPosition",!0);b==="end"?x[a]+=i[o]-p[o]:m[a]+=p[o]+S}x[1-a]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(x);var T={x:0,y:0};if(T[o]=v?i[o]:d[o],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+x[1-a]),f.__rectSize=i[o],v){var w={x:0,y:0};w[o]=Math.max(i[o]-p[o]-S,0),w[s]=T[s],f.setClipPath(new Mr({shape:w})),f.__rectSize=w[o]}else h.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var E=this._getPageInfo(r);return E.pageIndex!=null&&Xr(c,{x:E.contentPosition[0],y:E.contentPosition[1]},v?r:null),this._updatePageInfoView(r,E),T},e.prototype._pageGo=function(r,n,i){var a=this._getPageInfo(n)[r];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:n.id})},e.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;G(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;a&&o&&a.setStyle("text",ft(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=r.getOrient().index,s=NM[o],l=OM[o],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=b(f);p.contentPosition[o]=-v.s;for(var g=u+1,m=v,x=v,S=null;g<=h;++g)S=b(c[g]),(!S&&x.e>m.s+a||S&&!T(S,m.s))&&(x.i>m.i?m=x:m=S,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),x=S;for(var g=u-1,m=v,x=v,S=null;g>=-1;--g)S=b(c[g]),(!S||!T(x,S.s))&&m.i<x.i&&(x=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=S;return p;function b(w){if(w){var E=w.getBoundingRect(),M=E[l]+w[l];return{s:M,e:M+E[s],i:w.__legendDataIndex}}}function T(w,E){return w.e>=E&&w.s<=E+a}},e.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===r&&(n=s)}),n!=null?n:a},e.type="legend.scroll",e}(Uee);function G3e(t){t.registerAction("legendScroll","legendscroll",function(e,r){var n=e.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(n)})})}function W3e(t){Ot(Hee),t.registerComponentModel(V3e),t.registerComponentView(H3e),G3e(t)}function $3e(t){Ot(Hee),Ot(W3e)}var j3e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="dataZoom.inside",e.defaultOption=Ah(P_.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(P_),uI=kr();function X3e(t,e,r){uI(t).coordSysRecordMap.each(function(n){var i=n.dataZoomInfoMap.get(e.uid);i&&(i.getRange=r)})}function K3e(t,e){for(var r=uI(t).coordSysRecordMap,n=r.keys(),i=0;i<n.length;i++){var a=n[i],o=r.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||Gee(r,o))}}}function Gee(t,e){if(e){t.removeKey(e.model.uid);var r=e.controller;r&&r.dispose()}}function Y3e(t,e){var r={model:e,containsPoint:Zt(Z3e,e),dispatchAction:Zt(q3e,t),dataZoomInfoMap:null,controller:null},n=r.controller=new C2(t.getZr());return G(["pan","zoom","scrollMove"],function(i){n.on(i,function(a){var o=[];r.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,r.model.mainType,r.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&r.dispatchAction(o)})}),r}function q3e(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Z3e(t,e,r,n){return t.coordinateSystem.containPoint([r,n])}function J3e(t){var e,r="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;n[r+s]>n[r+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Q3e(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(e,r){var n=uI(r),i=n.coordSysRecordMap||(n.coordSysRecordMap=Tt());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=bee(a);G(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,Y3e(r,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=Tt());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){Gee(i,a);return}var c=J3e(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),i0(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var ewe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return e.prototype.render=function(r,n,i){if(t.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),X3e(i,r,{pan:pt(kM.pan,this),zoom:pt(kM.zoom,this),scrollMove:pt(kM.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){K3e(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(JD),kM={zoom:function(t,e,r,n){var i=this.range,a=i.slice(),o=t.axisModels[0];if(o){var s=FM[e](null,[n.originX,n.originY],o,r,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/n.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Xp(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:wH(function(t,e,r,n,i,a){var o=FM[n]([a.oldX,a.oldY],[a.newX,a.newY],e,i,r);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength}),scrollMove:wH(function(t,e,r,n,i,a){var o=FM[n]([0,0],[a.scrollDelta,a.scrollDelta],e,i,r);return o.signal*(t[1]-t[0])*a.scrollDelta})};function wH(t){return function(e,r,n,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=t(o,s,e,r,n,i);if(Xp(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var FM={grid:function(t,e,r,n,i){var a=r.axis,o={},s=i.model.coordinateSystem.getRect();return t=t||[0,0],a.dim==="x"?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,r,n,i){var a=r.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),r.mainType==="radiusAxis"?(o.pixel=e[0]-t[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,r,n,i){var a=r.axis,o=i.model.coordinateSystem.getRect(),s={};return t=t||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function Wee(t){QD(t),t.registerComponentModel(j3e),t.registerComponentView(ewe),Q3e(t)}var twe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Ah(P_.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(P_),By=Mr,TH=7,rwe=1,BM=30,nwe=7,zy="horizontal",CH="vertical",iwe=5,awe=["line","bar","candlestick","scatter"],owe={easing:"cubicOut",duration:100,delay:0},swe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._displayables={},r}return e.prototype.init=function(r,n){this.api=n,this._onBrush=pt(this._onBrush,this),this._onBrushEnd=pt(this._onBrushEnd,this)},e.prototype.render=function(r,n,i,a){if(t.prototype.render.apply(this,arguments),i0(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){h_(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Vt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(n),this._positionGroup()},e.prototype._resetLocation=function(){var r=this.dataZoomModel,n=this.api,i=r.get("brushSelect"),a=i?nwe:0,o=this._findCoordRect(),s={width:n.getWidth(),height:n.getHeight()},l=this._orient===zy?{right:s.width-o.x-o.width,top:s.height-BM-TH-a,width:o.width,height:BM}:{right:TH,top:o.y,width:BM,height:o.height},u=e0(r.option);G(["right","top","width","height"],function(f){u[f]==="ph"&&(u[f]=l[f])});var c=ri(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===CH&&this._size.reverse()},e.prototype._positionGroup=function(){var r=this.group,n=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===zy&&!o?{scaleY:l?1:-1,scaleX:1}:i===zy&&o?{scaleY:l?1:-1,scaleX:-1}:i===CH&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=r.getBoundingRect([s]);r.x=n.x-u.x,r.y=n.y-u.y,r.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var r=this.dataZoomModel,n=this._size,i=this._displayables.sliderGroup,a=r.get("brushSelect");i.add(new By({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var o=new By({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:pt(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var n=this._size,i=this._shadowSize||[],a=r.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():r.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||n[0]!==i[0]||n[1]!==i[1]){var f=o.getDataExtent(l),h=(f[1]-f[0])*.3;f=[f[0]-h,f[1]+h];var d=[0,n[1]],p=[0,n[0]],v=[[n[0],0],[0,0]],g=[],m=p[1]/(o.count()-1),x=0,S=Math.round(o.count()/n[0]),b;o.each([l],function(A,R){if(S>0&&R%S){x+=m;return}var L=A==null||isNaN(A)||A==="",I=L?0:rn(A,f,d,!0);L&&!b&&R?(v.push([v[v.length-1][0],0]),g.push([g[g.length-1][0],0])):!L&&b&&(v.push([x,0]),g.push([x,0])),v.push([x,I]),g.push([x,I]),x+=m,b=L}),u=this._shadowPolygonPts=v,c=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[n[0],n[1]];var T=this.dataZoomModel;function w(A){var R=T.getModel(A?"selectedDataBackground":"dataBackground"),L=new Vt,I=new To({shape:{points:u},segmentIgnoreThreshold:1,style:R.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),N=new Ro({shape:{points:c},segmentIgnoreThreshold:1,style:R.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(I),L.add(N),L}for(var E=0;E<3;E++){var M=w(E===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},e.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,n=r.get("showDataShadow");if(n!==!1){var i,a=this.ecModel;return r.eachTargetAxis(function(o,s){var l=r.getAxisProxy(o,s).getTargetSeriesModels();G(l,function(u){if(!i&&!(n!==!0&&hr(awe,u.get("type"))<0)){var c=a.getComponent(th(o),s).axis,f=lwe(o),h,d=u.coordinateSystem;f!=null&&d.getOtherAxis&&(h=d.getOtherAxis(c).inverse),f=u.getData().mapDimension(f),i={thisAxis:c,series:u,thisDim:o,otherDim:f,otherAxisInverse:h}}},this)},this),i}},e.prototype._renderHandle=function(){var r=this.group,n=this._displayables,i=n.handles=[null,null],a=n.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,f=l.get("brushSelect"),h=n.filler=new By({silent:f,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(h),o.add(new By({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:rwe,fill:"rgba(0,0,0,0)"}})),G([0,1],function(S){var b=l.get("handleIcon");!dw[b]&&b.indexOf("path://")<0&&b.indexOf("image://")<0&&(b="path://"+b);var T=vi(b,-1,0,2,2,null,!0);T.attr({cursor:EH(this._orient),draggable:!0,drift:pt(this._onDragMove,this,S),ondragend:pt(this._onDragEnd,this),onmouseover:pt(this._showDataInfo,this,!0),onmouseout:pt(this._showDataInfo,this,!1),z2:5});var w=T.getBoundingRect(),E=l.get("handleSize");this._handleHeight=Ze(E,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,T.setStyle(l.getModel("handleStyle").getItemStyle()),T.style.strokeNoScale=!0,T.rectHover=!0,T.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),hp(T);var M=l.get("handleColor");M!=null&&(T.style.fill=M),o.add(i[S]=T);var A=l.getModel("textStyle");r.add(a[S]=new Ar({silent:!0,invisible:!0,style:dn(A,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:A.getTextColor(),font:A.getFont()}),z2:10}))},this);var d=h;if(f){var p=Ze(l.get("moveHandleSize"),s[1]),v=n.moveHandle=new Mr({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),g=p*.8,m=n.moveHandleIcon=vi(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var x=Math.min(s[1]/2,Math.max(p,10));d=n.moveZone=new Mr({invisible:!0,shape:{y:s[1]-x,height:p+x}}),d.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(m),o.add(d)}d.attr({draggable:!0,cursor:EH(this._orient),drift:pt(this._onDragMove,this,"all"),ondragstart:pt(this._showDataInfo,this,!0),ondragend:pt(this._onDragEnd,this),onmouseover:pt(this._showDataInfo,this,!0),onmouseout:pt(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[rn(r[0],[0,100],n,!0),rn(r[1],[0,100],n,!0)]},e.prototype._updateInterval=function(r,n){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Xp(n,a,o,i.get("zoomLock")?"all":r,s.minSpan!=null?rn(s.minSpan,l,o,!0):null,s.maxSpan!=null?rn(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Ys([rn(a[0],o,l,!0),rn(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},e.prototype._updateView=function(r){var n=this._displayables,i=this._handleEnds,a=Ys(i.slice()),o=this._size;G([0,1],function(d){var p=n.handles[d],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:i[d]+(d?-1:1),y:o[1]/2-v/2})},this),n.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};n.moveHandle&&(n.moveHandle.setShape(s),n.moveZone.setShape(s),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=n.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var f=l[c],h=f.getClipPath();h||(h=new Mr,f.setClipPath(h)),h.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(r)},e.prototype._updateDataInfo=function(r){var n=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,f=r?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(f[0],u),this._formatLabel(f[1],u)]}}var h=Ys(this._handleEnds.slice());d.call(this,0),d.call(this,1);function d(p){var v=dp(i.handles[p].parent,this.group),g=HT(p===0?"right":"left",v),m=this._handleWidth/2+iwe,x=Fl([h[p]+(p===0?-m:m),this._size[1]/2],v);a[p].setStyle({x:x[0],y:x[1],verticalAlign:o===zy?"middle":g,align:o===zy?g:"center",text:s[p]})}},e.prototype._formatLabel=function(r,n){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=n.getPixelPrecision());var s=r==null||isNaN(r)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(o,20));return Lt(a)?a(r,s):ft(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(r){r=this._dragging||r;var n=this._displayables,i=n.handleLabels;i[0].attr("invisible",!r),i[1].attr("invisible",!r),n.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},e.prototype._onDragMove=function(r,n,i,a){this._dragging=!0,Nc(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Fl([n,i],o,!0),l=this._updateInterval(r,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(r){var n=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(i[0]<0||i[0]>n[0]||i[1]<0||i[1]>n[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(r){var n=r.offsetX,i=r.offsetY;this._brushStart=new or(n,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(r){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var i=n.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Ys([rn(i.x,o,s,!0),rn(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(r){this._brushing&&(Nc(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},e.prototype._updateBrushRect=function(r,n){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new By({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(r,n),c=l.transformCoordToLocal(s.x,s.y),f=this._size;u[0]=Math.max(Math.min(f[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:f[1]})},e.prototype._dispatchZoomAction=function(r){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?owe:null,start:n[0],end:n[1]})},e.prototype._findCoordRect=function(){var r,n=bee(this.dataZoomModel).infoList;if(!r&&n.length){var i=n[0].model.coordinateSystem;r=i.getRect&&i.getRect()}if(!r){var a=this.api.getWidth(),o=this.api.getHeight();r={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return r},e.type="dataZoom.slider",e}(JD);function lwe(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function EH(t){return t==="vertical"?"ns-resize":"ew-resize"}function $ee(t){t.registerComponentModel(twe),t.registerComponentView(swe),QD(t)}function uwe(t){Ot(Wee),Ot($ee)}var jee={get:function(t,e,r){var n=Ft((cwe[t]||{})[e]);return r&&De(n)?n[n.length-1]:n}},cwe={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},AH=Ji.mapVisual,fwe=Ji.eachVisual,hwe=De,MH=G,dwe=Ys,pwe=rn,Ww=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return e.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},e.prototype.optionUpdated=function(r,n){var i=this.option;!n&&Iee(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(r){var n=this.stateList;r=pt(r,this),this.controllerVisuals=RR(this.option.controller,n,r),this.targetVisuals=RR(this.option.target,n,r)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,a){n.push(a)}):n=gn(r),n},e.prototype.eachTargetSeries=function(r,n){G(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&r.call(n,a)},this)},e.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},e.prototype.formatValueText=function(r,n,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],De(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(ft(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Lt(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var r=this.option,n=dwe([r.min,r.max]);this._dataExtent=n},e.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=r.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},a=n.target||(n.target={}),o=n.controller||(n.controller={});xt(a,i),xt(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(f){hwe(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},MH(p,function(g,m){if(Ji.isValidType(m)){var x=jee.get(m,"inactive",s);x!=null&&(v[m]=x,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";MH(this.stateList,function(m){var x=this.itemSize,S=f[m];S||(S=f[m]={color:s?p:[p]}),S.symbol==null&&(S.symbol=h&&Ft(h)||(s?g:[g])),S.symbolSize==null&&(S.symbolSize=d&&Ft(d)||(s?x[0]:[x[0],x[0]])),S.symbol=AH(S.symbol,function(w){return w==="none"?g:w});var b=S.symbolSize;if(b!=null){var T=-1/0;fwe(b,function(w){w>T&&(T=w)}),S.symbolSize=AH(b,function(w){return pwe(w,[0,T],[0,x[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(r){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(r){return null},e.prototype.getVisualMeta=function(r){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(fr),RH=[20,140],vwe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.optionUpdated=function(r,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=RH[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=RH[1])},e.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):De(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),G(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},e.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},e.prototype.getSelected=function(){var r=this.getExtent(),n=Ys((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},e.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){r[0]<=s&&s<=r[1]&&a.push(l)},this),n.push({seriesId:i.id,dataIndex:a})},this),n},e.prototype.getVisualMeta=function(r){var n=PH(this,"outOfRange",this.getExtent()),i=PH(this,"inRange",this.option.range.slice()),a=[];function o(d,p){a.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&o(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(a.length&&o(a[a.length-1].value,"outOfRange"),f=0),o(n[l],"outOfRange"));var h=a.length;return{stops:a,outerColors:[h?a[0].color:"transparent",h?a[h-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Ah(Ww.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(Ww);function PH(t,e,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,a=r[0],o=[],s=0;s<=n&&a<r[1];s++)o.push(a),a+=i;return o.push(r[1]),o}var Xee=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return e.prototype.init=function(r,n){this.ecModel=r,this.api=n},e.prototype.render=function(r,n,i,a){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,a)},e.prototype.renderBackground=function(r){var n=this.visualMapModel,i=Qm(n.get("padding")||0),a=r.getBoundingRect();r.add(new Mr({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},e.prototype.getControllerVisual=function(r,n,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(n==="color"){var l=o.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=o.controllerVisuals[a||o.getValueState(r)],h=Ji.prepareVisualTypes(f);return G(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),Ji.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},e.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;YT(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(r,n,i,a){},e.type="visualMap",e}(_n),LH=[["left","right","width"],["top","bottom","height"]];function Kee(t,e,r){var n=t.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=n.orient==="horizontal"?1:0,s=LH[o],l=[0,null,10],u={},c=0;c<3;c++)u[LH[1-o][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][o],h=ri(u,a,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<a[f[1]]*.5?0:1]}function M3(t,e){return G(t||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var du=rn,gwe=G,DH=Math.min,zM=Math.max,mwe=12,ywe=6,_we=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return e.prototype.init=function(r,n){t.prototype.init.call(this,r,n),this._hoverLinkFromSeriesMouseOver=pt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=pt(this._hideIndicator,this)},e.prototype.doRender=function(r,n,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},e.prototype._renderEndsText=function(r,n,i){if(n){var a=n[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Ar({style:dn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:a})}))}},e.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,a=n.itemSize,o=this._orient,s=this._useHandle,l=Kee(n,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new Vt;u.add(c),c.add(i.outOfRange=IH()),c.add(i.inRange=IH(null,s?OH(this._orient):null,pt(this._dragHandle,this,"all",!1),pt(this._dragHandle,this,"all",!0))),c.setClipPath(new Mr({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var f=n.textStyleModel.getTextRect(""),h=zM(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,a,h,o),this._createHandle(n,u,1,a,h,o)),this._createIndicator(n,u,a,h,o),r.add(u)},e.prototype._createHandle=function(r,n,i,a,o,s){var l=pt(this._dragHandle,this,i,!1),u=pt(this._dragHandle,this,i,!0),c=Wl(r.get("handleSize"),a[0]),f=vi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=OH(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){Nc(m.event)}}),f.x=a[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Yd(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Ar({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Nc(m.event)},ondragend:u,style:dn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},e.prototype._createIndicator=function(r,n,i,a,o){var s=Wl(r.get("indicatorSize"),i[0]),l=vi(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof aa){var c=l.style;l.useStyle(Ae({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Ar({silent:!0,invisible:!0,style:dn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(o==="horizontal"?a/2:ywe)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},e.prototype._dragHandle=function(r,n,i,a){if(this._useHandle){if(this._dragging=!n,!n){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(r,o[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():NH(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},e.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),a=[0,r.itemSize[1]];this._handleEnds=[du(n[0],i,a,!0),du(n[1],i,a,!0)]},e.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];Xp(n,a,o,r,0);var s=i.getExtent();this._dataInterval=[du(a[0],o,s,!0),du(a[1],o,s,!0)]},e.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),a=this._shapes,o=[0,n.itemSize[1]],s=r?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(r,n,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,o),l=[this.getControllerVisual(r[0],"symbolSize",o),this.getControllerVisual(r[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new Km(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(r,n){var i=100,a=[],o=(r[1]-r[0])/i;a.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+o*s;if(l>r[1])break;a.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return a.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),a},e.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},e.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new Vt(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},e.prototype._updateHandle=function(r,n){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent();gwe([0,1],function(c){var f=o[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=du(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Fl(i.handleLabelPoints[c],dp(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:a.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(r,n,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=du(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var x=Fl(c.indicatorLabelPoint,dp(f,this.group)),S=c.indicatorLabel;S.attr("invisible",!1);var b=this._applyTransform("left",c.mainGroup),T=this._orient,w=T==="horizontal";S.setStyle({text:(i||"")+o.formatValueText(n),verticalAlign:w?b:"middle",align:w?"center":b});var E={x:g,y:v,style:{fill:d}},M={style:{x:x[0],y:x[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(E,A),S.animateTo(M,A)}else f.attr(E),S.attr(M);this._firstShowIndicator=!1;var R=this._shapes.handleLabels;if(R)for(var L=0;L<R.length;L++)this.api.enterBlur(R[L])}},e.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,a=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);a[1]=DH(zM(0,a[1]),i[1]),r._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();r=DH(zM(o[0],r),o[1]);var l=xwe(i,s,o),u=[r-l,r+l],c=du(r,o,s,!0),f=[du(u[0],o,s,!0),du(u[1],o,s,!0)];u[0]<o[0]&&(f[0]=-1/0),u[1]>o[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c," ",l));var h=this._hoverLinkDataIndices,d=[];(n||NH(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=Pce(h,d);this._dispatchHighDown("downplay",M3(p[0],i)),this._dispatchHighDown("highlight",M3(p[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(Zd(r.target,function(l){var u=Ht(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(n.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this.api.leaveBlur(n[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",M3(r,this.visualMapModel)),r.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(r,n,i,a){var o=dp(n,a?null:this.group);return De(r)?Fl(r,o,i):HT(r,o,i)},e.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(Xee);function IH(t,e,r,n){return new To({shape:{points:t},draggable:!!r,cursor:e,drift:r,onmousemove:function(i){Nc(i.event)},ondragend:n})}function xwe(t,e,r){var n=mwe/2,i=t.get("hoverLinkDataSize");return i&&(n=du(i,e,r,!0)/2),n}function NH(t){var e=t.get("hoverLinkOnHandle");return!!(e==null?t.get("realtime"):e)}function OH(t){return t==="vertical"?"ns-resize":"ew-resize"}var Swe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},bwe=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(r){r.setSelected(t.selected)})},wwe=[{createOnAllSeries:!0,reset:function(t,e){var r=[];return e.eachComponent("visualMap",function(n){var i=t.pipelineContext;!n.isTargetSeries(t)||i&&i.large||r.push(Vbe(n.stateList,n.targetVisuals,pt(n.getValueState,n),n.getDataDimensionIndex(t.getData())))}),r}},{createOnAllSeries:!0,reset:function(t,e){var r=t.getData(),n=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(t)){var a=i.getVisualMeta(pt(Twe,null,t,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(r);o>=0&&(a.dimension=o,n.push(a))}}),t.getData().setVisual("visualMeta",n)}}];function Twe(t,e,r,n){for(var i=e.targetVisuals[n],a=Ji.prepareVisualTypes(i),o={color:g2(t.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return o.color;function f(d){return o[d]}function h(d,p){o[d]=p}}var kH=G;function Cwe(t){var e=t&&t.visualMap;De(e)||(e=e?[e]:[]),kH(e,function(r){if(r){Yv(r,"splitList")&&!Yv(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&De(n)&&kH(n,function(i){Nt(i)&&(Yv(i,"start")&&!Yv(i,"min")&&(i.min=i.start),Yv(i,"end")&&!Yv(i,"max")&&(i.max=i.end))})}})}function Yv(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var FH=!1;function Yee(t){FH||(FH=!0,t.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),t.registerAction(Swe,bwe),G(wwe,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(Cwe))}function qee(t){t.registerComponentModel(vwe),t.registerComponentView(_we),Yee(t)}var Ewe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._pieceList=[],r}return e.prototype.optionUpdated=function(r,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],Awe[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Ft(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Oe(this._pieceList,function(l){return l=Ft(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var r=this.option,n={},i=Ji.listVisualTypes(),a=this.isCategory();G(r.pieces,function(s){G(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),G(n,function(s,l){var u=!1;G(this.stateList,function(c){u=u||o(r,c,l)||o(r.target,c,l)},this),!u&&G(this.stateList,function(c){(r[c]||(r[c]={}))[l]=jee.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(r,n){var i=this.option,a=this._pieceList,o=(n?i:r).selected||{};if(i.selected=o,G(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),i.selectedMode==="single"){var s=!1;G(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(r){this.option.selected=Ft(r)},e.prototype.getValueState=function(r){var n=Ji.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=Ji.findPieceIndex(l,i);c===r&&o.push(u)},this),n.push({seriesId:a.id,dataIndex:o})},this),n},e.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},e.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],a=this;function o(c,f){var h=a.getRepresentValue({interval:c});f||(f=a.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return G(s,function(c){var f=c.interval;f&&(f[0]>u&&o([u,f[0]],"outOfRange"),o(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=Ah(Ww.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(Ww),Awe={splitNumber:function(t){var e=this.option,r=Math.min(e.precision,20),n=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(n[1]-n[0])/i;+a.toFixed(r)!==a&&r<5;)r++;e.precision=r,a=+a.toFixed(r),e.minOpen&&t.push({interval:[-1/0,n[0]],close:[0,0]});for(var o=0,s=n[0];o<i;s+=a,o++){var l=o===i-1?n[1]:s+a;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[n[1],1/0],close:[0,0]}),Gk(t),G(t,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(t){var e=this.option;G(e.categories,function(r){t.push({text:this.formatValueText(r,!0),value:r})},this),BH(e,t)},pieces:function(t){var e=this.option;G(e.pieces,function(r,n){Nt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var a=i.value=r.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&o[f]==null;d++)o[f]=r[h[d]],s[f]=l[d],c[f]=d===2;o[f]==null&&(o[f]=u[f])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=Ji.retrieveVisuals(r),t.push(i)},this),BH(e,t),Gk(t),G(t,function(r){var n=r.close,i=[["<",""][n[1]],[">",""][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function BH(t,e){var r=t.inverse;(t.orient==="vertical"?!r:r)&&e.reverse()}var Mwe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),a=n.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=ma(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),G(c.viewPieceList,function(d){var p=d.piece,v=new Vt;v.onclick=pt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Ar({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),pp(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},e.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:M3(s.findTargetDataIndices(n),s)})}},e.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return Kee(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(r,n,i,a,o){if(n){var s=new Vt,l=this.visualMapModel.textStyleModel;s.add(new Ar({style:dn(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:n})})),r.add(s)}},e.prototype._getViewData=function(){var r=this.visualMapModel,n=Oe(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),a=r.get("orient"),o=r.get("inverse");return(a==="horizontal"?o:!o)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},e.prototype._createItemSymbol=function(r,n,i){r.add(vi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},e.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,a=i.selectedMode;if(a){var o=Ft(i.selected),s=n.getSelectedMapKey(r);a==="single"||a===!0?(o[s]=!0,G(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(Xee);function Zee(t){t.registerComponentModel(Ewe),t.registerComponentView(Mwe),Yee(t)}function Rwe(t){Ot(qee),Ot(Zee)}var Pwe={label:{enabled:!0},decal:{show:!1}},zH=kr(),Lwe={};function Dwe(t,e){var r=t.getModel("aria");if(!r.get("enabled"))return;var n=Ft(Pwe);xt(n.label,t.getLocaleModel().get("aria"),!1),xt(r.option,n,!1),i(),a();function i(){var u=r.getModel("decal"),c=u.get("show");if(c){var f=Tt();t.eachSeries(function(h){if(!h.isColorBySeries()){var d=f.get(h.type);d||(d={},f.set(h.type,d)),zH(h).scope=d}}),t.eachRawSeries(function(h){if(t.isSeriesFiltered(h))return;if(Lt(h.enableAriaDecal)){h.enableAriaDecal();return}var d=h.getData();if(h.isColorBySeries()){var x=D6(h.ecModel,h.name,Lwe,t.getSeriesCount()),S=d.getVisual("decal");d.setVisual("decal",b(S,x))}else{var p=h.getRawData(),v={},g=zH(h).scope;d.each(function(T){var w=d.getRawIndex(T);v[w]=T});var m=p.count();p.each(function(T){var w=v[T],E=p.getName(T)||T+"",M=D6(h.ecModel,E,g,m),A=d.getItemVisual(w,"decal");d.setItemVisual(w,"decal",b(A,M))})}function b(T,w){var E=T?Ae(Ae({},w),T):w;return E.dirty=!0,E}})}}function a(){var u=e.getZr().dom;if(u){var c=t.getLocaleModel().get("aria"),f=r.getModel("label");if(f.option=At(f.option,c),!!f.get("enabled")){if(f.get("description")){u.setAttribute("aria-label",f.get("description"));return}var h=t.getSeriesCount(),d=f.get(["data","maxCount"])||10,p=f.get(["series","maxCount"])||10,v=Math.min(h,p),g;if(!(h<1)){var m=s();if(m){var x=f.get(["general","withTitle"]);g=o(x,{title:m})}else g=f.get(["general","withoutTitle"]);var S=[],b=h>1?f.get(["series","multiple","prefix"]):f.get(["series","single","prefix"]);g+=o(b,{seriesCount:h}),t.eachSeries(function(M,A){if(A<v){var R=void 0,L=M.get("name"),I=L?"withName":"withoutName";R=h>1?f.get(["series","multiple",I]):f.get(["series","single",I]),R=o(R,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:l(M.subType)});var N=M.getData();if(N.count()>d){var k=f.get(["data","partialData"]);R+=o(k,{displayCnt:d})}else R+=f.get(["data","allData"]);for(var z=f.get(["data","separator","middle"]),B=f.get(["data","separator","end"]),V=[],F=0;F<N.count();F++)if(F<d){var $=N.getName(F),W=N.getValues(F),H=f.get(["data",$?"withName":"withoutName"]);V.push(o(H,{name:$,value:W.join(z)}))}R+=V.join(z)+B,S.push(R)}});var T=f.getModel(["series","multiple","separator"]),w=T.get("middle"),E=T.get("end");g+=S.join(w)+E,u.setAttribute("aria-label",g)}}}}function o(u,c){if(!ft(u))return u;var f=u;return G(c,function(h,d){f=f.replace(new RegExp("\\{\\s*"+d+"\\s*\\}","g"),h)}),f}function s(){var u=t.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=t.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function Iwe(t){if(!(!t||!t.aria)){var e=t.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},G(["description","general","series","data"],function(r){e[r]!=null&&(e.label[r]=e[r])})}}function Nwe(t){t.registerPreprocessor(Iwe),t.registerVisual(t.PRIORITY.VISUAL.ARIA,Dwe)}var UH={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Owe=function(){function t(e){var r=this._condVal=ft(e)?new RegExp(e):Zle(e)?e:null;if(r==null){var n="";nn(n)}}return t.prototype.evaluate=function(e){var r=typeof e;return ft(r)?this._condVal.test(e):Ur(r)?this._condVal.test(e+""):!1},t}(),kwe=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),Fwe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,r=0;r<e.length;r++)if(!e[r].evaluate())return!1;return!0},t}(),Bwe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=this.children,r=0;r<e.length;r++)if(e[r].evaluate())return!0;return!1},t}(),zwe=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),Uwe=function(){function t(){}return t.prototype.evaluate=function(){for(var e=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=e?this.valueParser(n):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:n))return!1;return!0},t}();function cI(t,e){if(t===!0||t===!1){var r=new kwe;return r.value=t,r}var n="";return Jee(t)||nn(n),t.and?VH("and",t,e):t.or?VH("or",t,e):t.not?Vwe(t,e):Hwe(t,e)}function VH(t,e,r){var n=e[t],i="";De(n)||nn(i),n.length||nn(i);var a=t==="and"?new Fwe:new Bwe;return a.children=Oe(n,function(o){return cI(o,r)}),a.children.length||nn(i),a}function Vwe(t,e){var r=t.not,n="";Jee(r)||nn(n);var i=new zwe;return i.child=cI(r,e),i.child||nn(n),i}function Hwe(t,e){for(var r="",n=e.prepareGetValue(t),i=[],a=Er(t),o=t.parser,s=o?Pq(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||e.valueGetterAttrMap.get(u))){var c=_t(UH,u)?UH[u]:u,f=t[u],h=s?s(f):f,d=Ide(c,h)||c==="reg"&&new Owe(h);d||nn(r),i.push(d)}}i.length||nn(r);var p=new Uwe;return p.valueGetterParam=n,p.valueParser=s,p.getValue=e.getValue,p.subCondList=i,p}function Jee(t){return Nt(t)&&!Ya(t)}var Gwe=function(){function t(e,r){this._cond=cI(e,r)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function Wwe(t,e){return new Gwe(t,e)}var $we={type:"echarts:filter",transform:function(t){for(var e=t.upstream,r,n=Wwe(t.config,{valueGetterAttrMap:Tt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;_t(s,"dimension")||nn(l);var c=e.getDimensionInfo(u);return c||nn(l),{dimIdx:c.index}},getValue:function(s){return e.retrieveValueFromItem(r,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)r=e.getRawDataItem(a),n.evaluate()&&i.push(r);return{data:i}}},jwe={type:"echarts:sort",transform:function(t){var e=t.upstream,r=t.config,n="",i=gn(r);i.length||nn(n);var a=[];G(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&nn(n),h!=="asc"&&h!=="desc"&&nn(n),p&&p!=="min"&&p!=="max"){var v="";nn(v)}if(h!=="asc"&&h!=="desc"){var g="";nn(g)}var m=e.getDimensionInfo(f);m||nn(n);var x=d?Pq(d):null;d&&!x&&nn(n),a.push({dimIdx:m.index,parser:x,comparator:new Dq(h,p)})});var o=e.sourceFormat;o!==qa&&o!==sl&&nn(n);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<a.length;h++){var d=a[h],p=e.retrieveValueFromItem(c,d.dimIdx),v=e.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function Xwe(t){t.registerTransform($we),t.registerTransform(jwe)}var Kwe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r}return e.prototype.getInitialData=function(r){return Vu(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(r){var n=new Vt,i=vi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=r.itemHeight*.8,u=vi(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?o:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Vr);function Qee(t,e,r){var n=t.getBaseAxis(),i=t.getOtherAxis(n),a=Ywe(i,r),o=n.dim,s=i.dim,l=e.mapDimension(s),u=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,f=Oe(t.dimensions,function(p){return e.mapDimension(p)}),h=!1,d=e.getCalculationInfo("stackResultDimension");return zc(e,f[0])&&(h=!0,f[0]=d),zc(e,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Ywe(t,e){var r=0,n=t.scale.getExtent();return e==="start"?r=n[0]:e==="end"?r=n[1]:Ur(e)&&!isNaN(e)?r=e:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function ete(t,e,r,n){var i=NaN;t.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=r.get(t.baseDim,n),o[1-a]=i,e.dataToPoint(o)}function qwe(t,e){var r=[];return e.diff(t).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Zwe(t,e,r,n,i,a,o,s){for(var l=qwe(t,e),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=Qee(i,e,o),m=t.getLayout("points")||[],x=e.getLayout("points")||[],S=0;S<l.length;S++){var b=l[S],T=!0,w=void 0,E=void 0;switch(b.cmd){case"=":w=b.idx*2,E=b.idx1*2;var M=m[w],A=m[w+1],R=x[E],L=x[E+1];(isNaN(M)||isNaN(A))&&(M=R,A=L),u.push(M,A),c.push(R,L),f.push(r[w],r[w+1]),h.push(n[E],n[E+1]),v.push(e.getRawIndex(b.idx1));break;case"+":var I=b.idx,N=g.dataDimsForPoint,k=i.dataToPoint([e.get(N[0],I),e.get(N[1],I)]);E=I*2,u.push(k[0],k[1]),c.push(x[E],x[E+1]);var z=ete(g,i,e,I);f.push(z[0],z[1]),h.push(n[E],n[E+1]),v.push(e.getRawIndex(I));break;case"-":T=!1}T&&(d.push(b),p.push(p.length))}p.sort(function(ee,se){return v[ee]-v[se]});for(var B=u.length,V=wu(B),F=wu(B),$=wu(B),W=wu(B),H=[],S=0;S<p.length;S++){var X=p[S],te=S*2,Y=X*2;V[te]=u[Y],V[te+1]=u[Y+1],F[te]=c[Y],F[te+1]=c[Y+1],$[te]=f[Y],$[te+1]=f[Y+1],W[te]=h[Y],W[te+1]=h[Y+1],H[S]=d[X]}return{current:V,next:F,stackedOnCurrent:$,stackedOnNext:W,status:H}}var Mf=Math.min,Rf=Math.max;function mp(t,e){return isNaN(t)||isNaN(e)}function FR(t,e,r,n,i,a,o,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=e[v*2],x=e[v*2+1];if(v>=i||v<0)break;if(mp(m,x)){if(l){v+=a;continue}break}if(v===r)t[a>0?"moveTo":"lineTo"](m,x),f=m,h=x;else{var S=m-u,b=x-c;if(S*S+b*b<.5){v+=a;continue}if(o>0){for(var T=v+a,w=e[T*2],E=e[T*2+1];w===m&&E===x&&g<n;)g++,T+=a,v+=a,w=e[T*2],E=e[T*2+1],m=e[v*2],x=e[v*2+1],S=m-u,b=x-c;var M=g+1;if(l)for(;mp(w,E)&&M<n;)M++,T+=a,w=e[T*2],E=e[T*2+1];var A=.5,R=0,L=0,I=void 0,N=void 0;if(M>=n||mp(w,E))d=m,p=x;else{R=w-u,L=E-c;var k=m-u,z=w-m,B=x-c,V=E-x,F=void 0,$=void 0;if(s==="x"){F=Math.abs(k),$=Math.abs(z);var W=R>0?1:-1;d=m-W*F*o,p=x,I=m+W*$*o,N=x}else if(s==="y"){F=Math.abs(B),$=Math.abs(V);var H=L>0?1:-1;d=m,p=x-H*F*o,I=m,N=x+H*$*o}else F=Math.sqrt(k*k+B*B),$=Math.sqrt(z*z+V*V),A=$/($+F),d=m-R*o*(1-A),p=x-L*o*(1-A),I=m+R*o*A,N=x+L*o*A,I=Mf(I,Rf(w,m)),N=Mf(N,Rf(E,x)),I=Rf(I,Mf(w,m)),N=Rf(N,Mf(E,x)),R=I-m,L=N-x,d=m-R*F/$,p=x-L*F/$,d=Mf(d,Rf(u,m)),p=Mf(p,Rf(c,x)),d=Rf(d,Mf(u,m)),p=Rf(p,Mf(c,x)),R=m-d,L=x-p,I=m+R*$/F,N=x+L*$/F}t.bezierCurveTo(f,h,d,p,m,x),f=I,h=N}else t.lineTo(m,x)}u=m,c=x,v+=a}return g}var tte=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),Jwe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="ec-polyline",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new tte},e.prototype.buildPath=function(r,n){var i=n.points,a=0,o=i.length/2;if(n.connectNulls){for(;o>0&&mp(i[o*2-2],i[o*2-1]);o--);for(;a<o&&mp(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=FR(r,i,a,o,o,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},e.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=Nu.CMD,s,l,u=n==="x",c=[],f=0;f<a.length;){var h=a[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,x=void 0,S=void 0;switch(h){case o.M:s=a[f++],l=a[f++];break;case o.L:if(d=a[f++],p=a[f++],S=u?(r-s)/(d-s):(r-l)/(p-l),S<=1&&S>=0){var b=u?(p-l)*S+l:(d-s)*S+s;return u?[r,b]:[b,r]}s=d,l=p;break;case o.C:d=a[f++],p=a[f++],v=a[f++],g=a[f++],m=a[f++],x=a[f++];var T=u?q3(s,d,v,m,r,c):q3(l,p,g,x,r,c);if(T>0)for(var w=0;w<T;w++){var E=c[w];if(E<=1&&E>=0){var b=u?Wi(l,p,g,x,E):Wi(s,d,v,m,E);return u?[r,b]:[b,r]}}s=m,l=x;break}}},e}(yr),Qwe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(tte),rte=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="ec-polygon",n}return e.prototype.getDefaultShape=function(){return new Qwe},e.prototype.buildPath=function(r,n){var i=n.points,a=n.stackedOnPoints,o=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&mp(i[s*2-2],i[s*2-1]);s--);for(;o<s&&mp(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=FR(r,i,o,s,s,1,n.smooth,l,n.connectNulls);FR(r,a,o+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),o+=u+1,r.closePath()}},e}(yr);function nte(t,e,r,n,i){var a=t.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=r.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var f=new Mr({shape:{x:o,y:s,width:l,height:u}});if(e){var h=t.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Lt(i)?function(g){i(g,f)}:null;Fn(f,{shape:{width:l,height:u,x:o,y:s}},r,null,n,v)}return f}function ite(t,e,r){var n=t.getArea(),i=kn(n.r0,1),a=kn(n.r,1),o=new wo({shape:{cx:kn(t.cx,1),cy:kn(t.cy,1),r0:i,r:a,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(e){var s=t.getBaseAxis().dim==="angle";s?o.shape.endAngle=n.startAngle:o.shape.r=i,Fn(o,{shape:{endAngle:n.endAngle,r:a}},r)}return o}function M2(t,e,r,n,i){if(t){if(t.type==="polar")return ite(t,e,r);if(t.type==="cartesian2d")return nte(t,e,r,n,i)}else return null;return null}function HH(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return;return!0}}function GH(t){for(var e=1/0,r=1/0,n=-1/0,i=-1/0,a=0;a<t.length;){var o=t[a++],s=t[a++];isNaN(o)||(e=Math.min(o,e),n=Math.max(o,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[e,r],[n,i]]}function WH(t,e){var r=GH(t),n=r[0],i=r[1],a=GH(e),o=a[0],s=a[1];return Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function $H(t){return Ur(t)?t:t?.5:0}function eTe(t,e,r){if(!r.valueDim)return[];for(var n=e.count(),i=wu(n*2),a=0;a<n;a++){var o=ete(r,t,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Pf(t,e,r,n){var i=e.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<t.length;s+=2)!isNaN(t[s])&&!isNaN(t[s+1])&&f.push(t[s],t[s+1]);t=f}for(s=0;s<t.length-2;s+=2)switch(c[0]=t[s+2],c[1]=t[s+3],u[0]=t[s],u[1]=t[s+1],o.push(u[0],u[1]),r){case"end":l[a]=c[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var h=(u[a]+c[a])/2,d=[];l[a]=d[a]=h,l[1-a]=u[1-a],d[1-a]=c[1-a],o.push(l[0],l[1]),o.push(d[0],d[1]);break;default:l[a]=u[a],l[1-a]=c[1-a],o.push(l[0],l[1])}return o.push(t[s++],t[s++]),o}function tTe(t,e){var r=[],n=t.length,i,a;function o(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=Oue(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=t[s],u=l.coord;if(u<0)i=l;else if(u>e){a?r.push(o(a,l,e)):i&&r.push(o(i,l,0),o(i,l,e));break}else i&&(r.push(o(i,l,0)),i=null),r.push(l),a=l}return r}function rTe(t,e,r){var n=t.getVisual("visualMeta");if(!(!n||!n.length||!t.count())&&e.type==="cartesian2d"){for(var i,a,o=n.length-1;o>=0;o--){var s=t.getDimensionInfo(n[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=n[o];break}}if(a){var l=e.getAxis(i),u=Oe(a.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),c=u.length,f=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=tTe(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";G(h,function(S){S.offset=(S.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var x=new Km(0,0,0,0,h,!0);return x[i]=v,x[i+"2"]=g,x}}}function nTe(t,e,r){var n=t.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var a=r.getAxesByScale("ordinal")[0];if(a&&!(i&&iTe(a,e))){var o=e.mapDimension(a.dim),s={};return G(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function iTe(t,e){var r=t.getExtent(),n=Math.abs(r[1]-r[0])/t.scale.count();isNaN(n)&&(n=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(E2.getSymbolSize(e,o)[t.isHorizontal()?1:0]*1.5>n)return!1;return!0}function aTe(t,e){return isNaN(t)||isNaN(e)}function oTe(t){for(var e=t.length/2;e>0&&aTe(t[e*2-2],t[e*2-1]);e--);return e-1}function jH(t,e){return[t[e*2],t[e*2+1]]}function sTe(t,e,r){for(var n=t.length/2,i=r==="x"?0:1,a,o,s=0,l=-1,u=0;u<n;u++)if(o=t[u*2+i],!(isNaN(o)||isNaN(t[u*2+1-i]))){if(u===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=u;break}s=u,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function ate(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<bo.length;e++)if(t.get([bo[e],"endLabel","show"]))return!0;return!1}function UM(t,e,r,n){if(Kp(e,"cartesian2d")){var i=n.getModel("endLabel"),a=i.get("valueAnimation"),o=n.getData(),s={lastFrameIndex:0},l=ate(n)?function(d,p){t._endLabelOnDuring(d,p,o,s,a,i,e)}:null,u=e.getBaseAxis().isHorizontal(),c=nte(e,r,n,function(){var d=t._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return ite(e,r,n)}function lTe(t,e){var r=e.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,a=n?i?"right":"left":"center",o=n?"middle":i?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||o}}}var uTe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var r=new Vt,n=new A2;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},e.prototype.render=function(r,n,i){var a=this,o=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=o.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,x=!n.ssr&&r.get("animation"),S=!c.isEmpty(),b=c.get("origin"),T=Qee(o,l,b),w=S&&eTe(o,l,T),E=r.get("showSymbol"),M=r.get("connectNulls"),A=E&&!h&&nTe(r,l,o),R=this._data;R&&R.eachItemGraphicEl(function(se,ne){se.__temp&&(s.remove(se),R.setItemGraphicEl(ne,null))}),E||p.remove(),s.add(m);var L=h?!1:r.get("step"),I;o&&o.getArea&&r.get("clip",!0)&&(I=o.getArea(),I.width!=null?(I.x-=.1,I.y-=.1,I.width+=.2,I.height+=.2):I.r0&&(I.r0-=.5,I.r+=.5)),this._clipShapeForSymbol=I;var N=rTe(l,o,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===o.type&&L===this._step))E&&p.updateData(l,{isIgnore:A,clipShape:I,disableAnimation:!0,getSymbolPoint:function(se){return[f[se*2],f[se*2+1]]}}),x&&this._initSymbolLabelAnimation(l,o,I),L&&(f=Pf(f,o,L,M),w&&(w=Pf(w,o,L,M))),v=this._newPolyline(f),S?g=this._newPolygon(f,w):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,o,Ep(N)),m.setClipPath(UM(this,o,!0,r));else{S&&!g?g=this._newPolygon(f,w):g&&!S&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,o,Ep(N));var k=m.getClipPath();if(k){var z=UM(this,o,!1,r);Fn(k,{shape:z.shape},r)}else m.setClipPath(UM(this,o,!0,r));E&&p.updateData(l,{isIgnore:A,clipShape:I,disableAnimation:!0,getSymbolPoint:function(se){return[f[se*2],f[se*2+1]]}}),(!HH(this._stackedOnPoints,w)||!HH(this._points,f))&&(x?this._doUpdateAnimation(l,w,o,i,L,b,M):(L&&(f=Pf(f,o,L,M),w&&(w=Pf(w,o,L,M))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:w})))}var B=r.getModel("emphasis"),V=B.get("focus"),F=B.get("blurScope"),$=B.get("disabled");if(v.useStyle(At(u.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),Oa(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var W=v.getState("emphasis").style;W.lineWidth=+v.style.lineWidth+1}Ht(v).seriesIndex=r.seriesIndex,ti(v,V,F,$);var H=$H(r.get("smooth")),X=r.get("smoothMonotone");if(v.setShape({smooth:H,smoothMonotone:X,connectNulls:M}),g){var te=l.getCalculationInfo("stackedOnSeries"),Y=0;g.useStyle(At(c.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),te&&(Y=$H(te.get("smooth"))),g.setShape({smooth:H,stackedOnSmooth:Y,smoothMonotone:X,connectNulls:M}),Oa(g,r,"areaStyle"),Ht(g).seriesIndex=r.seriesIndex,ti(g,V,F,$)}var ee=function(se){a._changePolyState(se)};l.eachItemGraphicEl(function(se){se&&(se.onHoverStateChange=ee)}),this._polyline.onHoverStateChange=ee,this._data=l,this._coordSys=o,this._stackedOnPoints=w,this._points=f,this._step=L,this._valueOrigin=b,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},e.prototype.packEventData=function(r,n){Ht(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},e.prototype.highlight=function(r,n,i,a){var o=r.getData(),s=wp(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new E2(o,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Or.prototype.highlight.call(this,r,n,i,a)},e.prototype.downplay=function(r,n,i,a){var o=r.getData(),s=wp(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Or.prototype.downplay.call(this,r,n,i,a)},e.prototype._changePolyState=function(r){var n=this._polygon;nw(this._polyline,r),n&&nw(n,r)},e.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Jwe({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},e.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new rte({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(r,n,i){var a,o,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):n.type==="polar"&&(a=s.dim==="angle",o=!0);var u=r.hostModel,c=u.get("animationDuration");Lt(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Lt(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,x=void 0,S=void 0;if(i)if(o){var b=i,T=n.pointToCoord(g);a?(m=b.startAngle,x=b.endAngle,S=-T[1]/180*Math.PI):(m=b.r0,x=b.r,S=T[0])}else{var w=i;a?(m=w.x,x=w.x+w.width,S=d.x):(m=w.y+w.height,x=w.y,S=d.y)}var E=x===m?0:(S-m)/(x-m);l&&(E=1-E);var M=Lt(f)?f(p):c*E+h,A=v.getSymbolPath(),R=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),R&&R.animateFrom({style:{opacity:0}},{duration:300,delay:M}),A.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(r,n,i){var a=r.getModel("endLabel");if(ate(r)){var o=r.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Ar({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=oTe(l);c>=0&&(ka(s,Qi(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?kee(o,d):bm(o,f)},enableTextSetter:!0},lTe(a,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(r,n,i,a,o,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),x=g.inverse,S=n.shape,b=x?m?S.x:S.y+S.height:m?S.x+S.width:S.y,T=(m?v:0)*(x?-1:1),w=(m?0:-v)*(x?-1:1),E=m?"x":"y",M=sTe(f,b,E),A=M.range,R=A[1]-A[0],L=void 0;if(R>=1){if(R>1&&!d){var I=jH(f,A[0]);u.attr({x:I[0]+T,y:I[1]+w}),o&&(L=h.getRawValue(A[0]))}else{var I=c.getPointOn(b,E);I&&u.attr({x:I[0]+T,y:I[1]+w});var N=h.getRawValue(A[0]),k=h.getRawValue(A[1]);o&&(L=hY(i,p,N,k,M.t))}a.lastFrameIndex=A[0]}else{var z=r===1||a.lastFrameIndex>0?A[0]:0,I=jH(f,z);o&&(L=h.getRawValue(z)),u.attr({x:I[0]+T,y:I[1]+w})}if(o){var B=Zm(u);typeof B.setLabelText=="function"&&B.setLabelText(L)}}},e.prototype._doUpdateAnimation=function(r,n,i,a,o,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Zwe(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(o&&(d=Pf(h.current,i,o,l),p=Pf(h.stackedOnCurrent,i,o,l),v=Pf(h.next,i,o,l),g=Pf(h.stackedOnNext,i,o,l)),WH(d,v)>3e3||c&&WH(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),Xr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),Xr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var x=[],S=h.status,b=0;b<S.length;b++){var T=S[b].cmd;if(T==="="){var w=r.getItemGraphicEl(S[b].idx1);w&&x.push({el:w,ptIdx:b})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var E=u.shape.__points,M=0;M<x.length;M++){var A=x[M].el,R=x[M].ptIdx*2;A.x=E[R],A.y=E[R+1],A.markRedraw()}})},e.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(n.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Or);function R2(t,e){return{seriesType:t,plan:n0(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,a=r.pipelineContext,o=e||a.large;if(i){var s=Oe(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");zc(n,s[0])&&(s[0]=u),zc(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=o&&wu(v*l),m=[],x=[],S=d.start,b=0;S<d.end;S++){var T=void 0;if(l===1){var w=c.get(f,S);T=i.dataToPoint(w,null,x)}else m[0]=c.get(f,S),m[1]=c.get(h,S),T=i.dataToPoint(m,null,x);o?(g[b++]=T[0],g[b++]=T[1]):p.setItemLayout(S,T.slice())}o&&p.setLayout("points",g)}}}}}}var cTe={average:function(t){for(var e=0,r=0,n=0;n<t.length;n++)isNaN(t[n])||(e+=t[n],r++);return r===0?NaN:e/r},sum:function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r]||0;return e},max:function(t){for(var e=-1/0,r=0;r<t.length;r++)t[r]>e&&(e=t[r]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,r=0;r<t.length;r++)t[r]<e&&(e=t[r]);return isFinite(e)?e:NaN},minmax:function(t){for(var e=-1/0,r=-1/0,n=0;n<t.length;n++){var i=t[n],a=Math.abs(i);a>e&&(e=a,r=i)}return isFinite(r)?r:NaN},nearest:function(t){return t[0]}},fTe=function(t){return Math.round(t.length/2)};function ote(t){return{seriesType:t,reset:function(e,r,n){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){a==="lttb"&&e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;ft(a)?p=cTe[a]:Lt(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(u.dim),1/d,p,fTe))}}}}}function hTe(t){t.registerChartView(uTe),t.registerSeriesModel(Kwe),t.registerLayout(R2("line",!0)),t.registerVisual({seriesType:"line",reset:function(e){var r=e.getData(),n=e.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,ote("line"))}var N_=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.getInitialData=function(r,n){return Vu(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(r,n,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(r),s=a.dataToPoint(o);if(i)G(a.getAxes(),function(h,d){if(h.type==="category"&&n!=null){var p=h.getTicksCoords(),v=h.getTickModel().get("alignWithLabel"),g=o[d],m=n[d]==="x1"||n[d]==="y1";if(m&&!v&&(g+=1),p.length<2)return;if(p.length===2){s[d]=h.toGlobalCoord(h.getExtent()[m?1:0]);return}for(var x=void 0,S=void 0,b=1,T=0;T<p.length;T++){var w=p[T].coord,E=T===p.length-1?p[T-1].tickValue+b:p[T].tickValue;if(E===g){S=w;break}else if(E<g)x=w;else if(x!=null&&E>g){S=(w+x)/2;break}T===1&&(b=E-p[0].tickValue)}S==null&&(x?x&&(S=p[p.length-1].coord):S=p[0].coord),s[d]=h.toGlobalCoord(S)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;s[f]+=u+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Vr);Vr.registerClass(N_);var dTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.getInitialData=function(){return Vu(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},e.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Ah(N_.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(N_),pTe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),$w=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="sausage",n}return e.prototype.getDefaultShape=function(){return new pTe},e.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,o=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-o)*.5,u=o+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),x=Math.sin(f);p?(r.moveTo(v*o+i,g*o+a),r.arc(v*u+i,g*u+a,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+a),r.arc(i,a,s,c,f,!h),r.arc(m*u+i,x*u+a,l,f-Math.PI*2,f-Math.PI,!h),o!==0&&r.arc(i,a,o,f,c,h)},e}(yr);function vTe(t,e){e=e||{};var r=e.isRoundCap;return function(n,i,a){var o=i.position;if(!o||o instanceof Array)return tw(n,i,a);var s=t(o),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,x=r?Math.abs(h-d)/2:0,S=Math.cos,b=Math.sin,T=c+h*S(v),w=f+h*b(v),E="left",M="top";switch(s){case"startArc":T=c+(d-l)*S(m),w=f+(d-l)*b(m),E="center",M="top";break;case"insideStartArc":T=c+(d+l)*S(m),w=f+(d+l)*b(m),E="center",M="bottom";break;case"startAngle":T=c+p*S(v)+eb(v,l+x,!1),w=f+p*b(v)+tb(v,l+x,!1),E="right",M="middle";break;case"insideStartAngle":T=c+p*S(v)+eb(v,-l+x,!1),w=f+p*b(v)+tb(v,-l+x,!1),E="left",M="middle";break;case"middle":T=c+p*S(m),w=f+p*b(m),E="center",M="middle";break;case"endArc":T=c+(h+l)*S(m),w=f+(h+l)*b(m),E="center",M="bottom";break;case"insideEndArc":T=c+(h-l)*S(m),w=f+(h-l)*b(m),E="center",M="top";break;case"endAngle":T=c+p*S(g)+eb(g,l+x,!0),w=f+p*b(g)+tb(g,l+x,!0),E="left",M="middle";break;case"insideEndAngle":T=c+p*S(g)+eb(g,-l+x,!0),w=f+p*b(g)+tb(g,-l+x,!0),E="right",M="middle";break;default:return tw(n,i,a)}return n=n||{},n.x=T,n.y=w,n.align=E,n.verticalAlign=M,n}}function gTe(t,e,r,n){if(Ur(n)){t.setTextConfig({rotation:n});return}else if(De(e)){t.setTextConfig({rotation:0});return}var i=t.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=r(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function eb(t,e,r){return e*Math.sin(t)*(r?-1:1)}function tb(t,e,r){return e*Math.cos(t)*(r?1:-1)}function np(t,e,r){var n=t.get("borderRadius");if(n==null)return r?{cornerRadius:0}:null;De(n)||(n=[n,n,n,n]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Oe(n,function(a){return Wl(a,i)})}}var VM=Math.max,HM=Math.min;function mTe(t,e){var r=t.getArea&&t.getArea();if(Kp(t,"cartesian2d")){var n=t.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=e.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var yTe=function(t){he(e,t);function e(){var r=t.call(this)||this;return r.type=e.type,r._isFirstFrame=!0,r}return e.prototype.render=function(r,n,i,a){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var o=r.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,a))},e.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},e.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},e.prototype.eachRendered=function(r){Eh(this._progressiveEls||this.group,r)},e.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(r,n,i,a){var o=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=_Te(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=mTe(u,s);o.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),x=r.getModel("backgroundStyle"),S=x.get("borderRadius")||0,b=[],T=this._backgroundEls,w=a&&a.isInitSort,E=a&&a.type==="changeAxisOrder";function M(L){var I=rb[u.type](s,L),N=ETe(u,f,I);return N.useStyle(x.getItemStyle()),u.type==="cartesian2d"?N.setShape("r",S):N.setShape("cornerRadius",S),b[L]=N,N}s.diff(l).add(function(L){var I=s.getItemModel(L),N=rb[u.type](s,L,I);if(m&&M(L),!(!s.hasValue(L)||!ZH[u.type](N))){var k=!1;p&&(k=XH[u.type](v,N));var z=KH[u.type](r,s,L,N,f,h,c.model,!1,g);d&&(z.forceLabelAnimation=!0),JH(z,s,L,I,N,r,f,u.type==="polar"),w?z.attr({shape:N}):d?YH(d,h,z,N,L,f,!1,!1):Fn(z,{shape:N},r,L),s.setItemGraphicEl(L,z),o.add(z),z.ignore=k}}).update(function(L,I){var N=s.getItemModel(L),k=rb[u.type](s,L,N);if(m){var z=void 0;T.length===0?z=M(I):(z=T[I],z.useStyle(x.getItemStyle()),u.type==="cartesian2d"?z.setShape("r",S):z.setShape("cornerRadius",S),b[L]=z);var B=rb[u.type](s,L),V=lte(f,B,u);Xr(z,{shape:V},h,L)}var F=l.getItemGraphicEl(I);if(!s.hasValue(L)||!ZH[u.type](k)){o.remove(F);return}var $=!1;if(p&&($=XH[u.type](v,k),$&&o.remove(F)),F?$l(F):F=KH[u.type](r,s,L,k,f,h,c.model,!!F,g),d&&(F.forceLabelAnimation=!0),E){var W=F.getTextContent();if(W){var H=Zm(W);H.prevValue!=null&&(H.prevValue=H.value)}}else JH(F,s,L,N,k,r,f,u.type==="polar");w?F.attr({shape:k}):d?YH(d,h,F,k,L,f,!0,E):Xr(F,{shape:k},r,L,null),s.setItemGraphicEl(L,F),F.ignore=$,o.add(F)}).remove(function(L){var I=l.getItemGraphicEl(L);I&&l_(I,r,L)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new Vt);A.removeAll();for(var R=0;R<b.length;++R)A.add(b[R]);o.add(A),this._backgroundEls=b,this._data=s},e.prototype._renderLarge=function(r,n,i){this._clear(),eG(r,this.group),this._updateLargeClip(r)},e.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),eG(n,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&M2(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},e.prototype._enableRealtimeSort=function(r,n,i){var a=this;if(n.count()){var o=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(n,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(r,n,i){var a=[];return r.each(r.mapDimension(n.dim),function(o,s){var l=i(s);l=l==null?NaN:l,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Oe(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var a=i.scale,o=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(o,a.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},e.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(r.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(r,n,i,a){if(this._isOrderChangedWithinSameData(r,n,i)){var o=this._dataSort(r,i,n);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(r,n,i){var a=n.baseAxis,o=this._dataSort(r,a,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},e.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},e.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){l_(a,r,Ht(a).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Or),XH={cartesian2d:function(t,e){var r=e.width<0?-1:1,n=e.height<0?-1:1;r<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,a=t.y+t.height,o=VM(e.x,t.x),s=HM(e.x+e.width,i),l=VM(e.y,t.y),u=HM(e.y+e.height,a),c=s<o,f=u<l;return e.x=c&&o>i?s:o,e.y=f&&l>a?u:l,e.width=c?0:s-o,e.height=f?0:u-l,r<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var r=e.r0<=e.r?1:-1;if(r<0){var n=e.r;e.r=e.r0,e.r0=n}var i=HM(e.r,t.r),a=VM(e.r0,t.r0);e.r=i,e.r0=a;var o=i-a<0;if(r<0){var n=e.r;e.r=e.r0,e.r0=n}return o}},KH={cartesian2d:function(t,e,r,n,i,a,o,s,l){var u=new Mr({shape:Ae({},n),z2:1});if(u.__dataIndex=r,u.name="item",a){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(t,e,r,n,i,a,o,s,l){var u=!i&&l?$w:wo,c=new u({shape:n,z2:1});c.name="item";var f=ste(i);if(c.calculateTextPosition=vTe(f,{isRoundCap:u===$w}),a){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?n.r0:n.startAngle,p[d]=n[d],(s?Xr:Fn)(c,{shape:p},a)}return c}};function _Te(t,e){var r=t.get("realtimeSort",!0),n=e.getBaseAxis();if(r&&n.type==="category"&&e.type==="cartesian2d")return{baseAxis:n,otherAxis:e.getOtherAxis(n)}}function YH(t,e,r,n,i,a,o,s){var l,u;a?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(o?Xr:Fn)(r,{shape:l},e,i,null);var c=e?t.baseAxis.model:null;(o?Xr:Fn)(r,{shape:u},c,i)}function qH(t,e){for(var r=0;r<e.length;r++)if(!isFinite(t[e[r]]))return!0;return!1}var xTe=["x","y","width","height"],STe=["cx","cy","r","startAngle","endAngle"],ZH={cartesian2d:function(t){return!qH(t,xTe)},polar:function(t){return!qH(t,STe)}},rb={cartesian2d:function(t,e,r){var n=t.getItemLayout(e),i=r?wTe(r,n):0,a=n.width>0?1:-1,o=n.height>0?1:-1;return{x:n.x+a*i/2,y:n.y+o*i/2,width:n.width-a*i,height:n.height-o*i}},polar:function(t,e,r){var n=t.getItemLayout(e);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function bTe(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function ste(t){return function(e){var r=e?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(t)}function JH(t,e,r,n,i,a,o,s){var l=e.getItemVisual(r,"style");if(s){if(!a.get("roundCap")){var c=t.shape,f=np(n.getModel("itemStyle"),c,!0);Ae(c,f),t.setShape(c)}}else{var u=n.get(["itemStyle","borderRadius"])||0;t.setShape("r",u)}t.useStyle(l);var h=n.getShallow("cursor");h&&t.attr("cursor",h);var d=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Qi(n);ka(t,p,{labelFetcher:a,labelDataIndex:r,defaultText:bm(a.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var v=t.getTextContent();if(s&&v){var g=n.get(["label","position"]);t.textConfig.inside=g==="middle"?!0:null,gTe(t,g==="outside"?d:g,ste(o),n.get(["label","rotate"]))}YY(v,p,a.getRawValue(r),function(x){return kee(e,x)});var m=n.getModel(["emphasis"]);ti(t,m.get("focus"),m.get("blurScope"),m.get("disabled")),Oa(t,n),bTe(i)&&(t.style.fill="none",t.style.stroke="none",G(t.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function wTe(t,e){var r=t.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,i,a)}var TTe=function(){function t(){}return t}(),QH=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="largeBar",n}return e.prototype.getDefaultShape=function(){return new TTe},e.prototype.buildPath=function(r,n){for(var i=n.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],r.rect(s[0],s[1],l[0],l[1])},e}(yr);function eG(t,e,r,n){var i=t.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=t.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new QH({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),r&&r.push(c)}var f=new QH({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,e.add(f),f.useStyle(i.getVisual("style")),Ht(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",tG),f.on("mousemove",tG)),r&&r.push(f)}var tG=HL(function(t){var e=this,r=CTe(e,t.offsetX,t.offsetY);Ht(e).dataIndex=r>=0?r:null},30,!1);function CTe(t,e,r){for(var n=t.baseDimIdx,i=1-n,a=t.shape.points,o=t.largeDataIndices,s=[],l=[],u=t.barWidth,c=0,f=a.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=a[h+2],s[n]=a[h+n],s[i]=a[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return o[c]}return-1}function lte(t,e,r){if(Kp(r,"cartesian2d")){var n=e,i=r.getArea();return{x:t?n.x:i.x,y:t?i.y:n.y,width:t?n.width:i.width,height:t?i.height:n.height}}else{var i=r.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:a.r0,r:t?i.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:Math.PI*2}}}function ETe(t,e,r){var n=t.type==="polar"?wo:Mr;return new n({shape:lte(e,r,t),silent:!0,z2:0})}function ATe(t){t.registerChartView(yTe),t.registerSeriesModel(dTe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Zt(kZ,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,FZ("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,ote("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,r){var n=e.componentType||"series";r.eachComponent({mainType:n,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var rG=Math.PI*2,nb=Math.PI/180;function ute(t,e){return ri(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function cte(t,e){var r=ute(t,e),n=t.get("center"),i=t.get("radius");De(i)||(i=[0,i]);var a=Ze(r.width,e.getWidth()),o=Ze(r.height,e.getHeight()),s=Math.min(a,o),l=Ze(i[0],s/2),u=Ze(i[1],s/2),c,f,h=t.coordinateSystem;if(h){var d=h.dataToPoint(n);c=d[0]||0,f=d[1]||0}else De(n)||(n=[n,n]),c=Ze(n[0],a)+r.x,f=Ze(n[1],o)+r.y;return{cx:c,cy:f,r0:l,r:u}}function MTe(t,e,r){e.eachSeriesByType(t,function(n){var i=n.getData(),a=i.mapDimension("value"),o=ute(n,r),s=cte(n,r),l=s.cx,u=s.cy,c=s.r,f=s.r0,h=-n.get("startAngle")*nb,d=n.get("endAngle"),p=n.get("padAngle")*nb;d=d==="auto"?h-rG:-d*nb;var v=n.get("minAngle")*nb,g=v+p,m=0;i.each(a,function(V){!isNaN(V)&&m++});var x=i.getSum(a),S=Math.PI/(x||m)*2,b=n.get("clockwise"),T=n.get("roseType"),w=n.get("stillShowZeroSum"),E=i.getDataExtent(a);E[0]=0;var M=b?1:-1,A=[h,d],R=M*p/2;gL(A,!b),h=A[0],d=A[1];var L=fte(n);L.startAngle=h,L.endAngle=d,L.clockwise=b;var I=Math.abs(d-h),N=I,k=0,z=h;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(V,F){var $;if(isNaN(V)){i.setItemLayout(F,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:l,cy:u,r0:f,r:T?NaN:c});return}T!=="area"?$=x===0&&w?S:V*S:$=I/m,$<g?($=g,N-=g):k+=V;var W=z+M*$,H=0,X=0;p>$?(H=z+M*$/2,X=H):(H=z+R,X=W-R),i.setItemLayout(F,{angle:$,startAngle:H,endAngle:X,clockwise:b,cx:l,cy:u,r0:f,r:T?rn(V,E,[f,c]):c}),z=W}),N<rG&&m)if(N<=.001){var B=I/m;i.each(a,function(V,F){if(!isNaN(V)){var $=i.getItemLayout(F);$.angle=B;var W=0,H=0;B<p?(W=h+M*(F+1/2)*B,H=W):(W=h+M*F*B+R,H=h+M*(F+1)*B-R),$.startAngle=W,$.endAngle=H}})}else S=N/k,z=h,i.each(a,function(V,F){if(!isNaN(V)){var $=i.getItemLayout(F),W=$.angle===g?g:V*S,H=0,X=0;W<p?(H=z+M*W/2,X=H):(H=z+R,X=z+M*W-R),$.startAngle=H,$.endAngle=X,z+=M*W}})})}var fte=kr();function P2(t){return{seriesType:t,reset:function(e,r){var n=r.findComponents({mainType:"legend"});if(!(!n||!n.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<n.length;s++)if(!n[s].isSelected(o))return!1;return!0})}}}}var RTe=Math.PI/180;function nG(t,e,r,n,i,a,o,s,l,u){if(t.length<2)return;function c(v){for(var g=v.rB,m=g*g,x=0;x<v.list.length;x++){var S=v.list[x],b=Math.abs(S.label.y-r),T=n+S.len,w=T*T,E=Math.sqrt((1-Math.abs(b*b/m))*w),M=e+(E+S.len2)*i,A=M-S.label.x,R=S.targetTextWidth-A*i;hte(S,R,!0),S.label.x=M}}function f(v){for(var g={list:[],maxY:0},m={list:[],maxY:0},x=0;x<v.length;x++)if(v[x].labelAlignTo==="none"){var S=v[x],b=S.label.y>r?m:g,T=Math.abs(S.label.y-r);if(T>=b.maxY){var w=S.label.x-e-S.len2*i,E=n+S.len,M=Math.abs(w)<E?Math.sqrt(T*T/(1-w*w/E/E)):E;b.rB=M,b.maxY=T}b.list.push(S)}c(g),c(m)}for(var h=t.length,d=0;d<h;d++)if(t[d].position==="outer"&&t[d].labelAlignTo==="labelLine"){var p=t[d].label.x-u;t[d].linePoints[1][0]+=p,t[d].label.x=u}iJ(t,l,l+o)&&f(t)}function PTe(t,e,r,n,i,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<t.length;h++){var d=t[h].label;GM(t[h])||(d.x<e?(c=Math.min(c,d.x),l.push(t[h])):(f=Math.max(f,d.x),u.push(t[h])))}for(var h=0;h<t.length;h++){var p=t[h];if(!GM(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var d=p.label,v=p.linePoints,g=void 0;p.labelAlignTo==="edge"?d.x<e?g=v[2][0]-p.labelDistance-o-p.edgeDistance:g=o+i-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?d.x<e?g=c-o-p.bleedMargin:g=o+i-f-p.bleedMargin:d.x<e?g=d.x-o-p.bleedMargin:g=o+i-d.x-p.bleedMargin,p.targetTextWidth=g,hte(p,g)}}nG(u,e,r,n,1,i,a,o,s,f),nG(l,e,r,n,-1,i,a,o,s,c);for(var h=0;h<t.length;h++){var p=t[h];if(!GM(p)&&p.linePoints){var d=p.label,v=p.linePoints,m=p.labelAlignTo==="edge",x=d.style.padding,S=x?x[1]+x[3]:0,b=d.style.backgroundColor?0:S,T=p.rect.width+b,w=v[1][0]-v[2][0];m?d.x<e?v[2][0]=o+p.edgeDistance+T+p.labelDistance:v[2][0]=o+i-p.edgeDistance-T-p.labelDistance:(d.x<e?v[2][0]=d.x+p.labelDistance:v[2][0]=d.x-p.labelDistance,v[1][0]=v[2][0]+w),v[1][1]=v[2][1]=d.y}}}function hte(t,e,r){if(r===void 0&&(r=!1),t.labelStyleWidth==null){var n=t.label,i=n.style,a=t.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=a.width+(o?0:l);if(e<c||r){var f=a.height;if(u&&u.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",e-l);var h=n.getBoundingRect();n.setStyle("width",Math.ceil(h.width)),n.setStyle("backgroundColor",o)}else{var d=e-l,p=e<c?d:r?d>t.unconstrainedWidth?null:d:null;n.setStyle("width",p)}var v=n.getBoundingRect();a.width=v.width;var g=(n.style.margin||0)+2.1;a.height=v.height+g,a.y-=(a.height-f)/2}}}function GM(t){return t.position==="center"}function LTe(t){var e=t.getData(),r=[],n,i,a=!1,o=(t.get("minShowLabelAngle")||0)*RTe,s=e.getLayout("viewRect"),l=e.getLayout("r"),u=s.width,c=s.x,f=s.y,h=s.height;function d(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var E in w.states)if(w.states[E].ignore===!1)return!0;return!1}e.each(function(w){var E=e.getItemGraphicEl(w),M=E.shape,A=E.getTextContent(),R=E.getTextGuideLine(),L=e.getItemModel(w),I=L.getModel("label"),N=I.get("position")||L.get(["emphasis","label","position"]),k=I.get("distanceToLabelLine"),z=I.get("alignTo"),B=Ze(I.get("edgeDistance"),u),V=I.get("bleedMargin"),F=L.getModel("labelLine"),$=F.get("length");$=Ze($,u);var W=F.get("length2");if(W=Ze(W,u),Math.abs(M.endAngle-M.startAngle)<o){G(A.states,d),A.ignore=!0,R&&(G(R.states,d),R.ignore=!0);return}if(p(A)){var H=(M.startAngle+M.endAngle)/2,X=Math.cos(H),te=Math.sin(H),Y,ee,se,ne;n=M.cx,i=M.cy;var le=N==="inside"||N==="inner";if(N==="center")Y=M.cx,ee=M.cy,ne="center";else{var pe=(le?(M.r+M.r0)/2*X:M.r*X)+n,Se=(le?(M.r+M.r0)/2*te:M.r*te)+i;if(Y=pe+X*3,ee=Se+te*3,!le){var _e=pe+X*($+l-M.r),Le=Se+te*($+l-M.r),Be=_e+(X<0?-1:1)*W,Q=Le;z==="edge"?Y=X<0?c+B:c+u-B:Y=Be+(X<0?-k:k),ee=Q,se=[[pe,Se],[_e,Le],[Be,Q]]}ne=le?"center":z==="edge"?X>0?"right":"left":X>0?"left":"right"}var tt=Math.PI,je=0,Ye=I.get("rotate");if(Ur(Ye))je=Ye*(tt/180);else if(N==="center")je=0;else if(Ye==="radial"||Ye===!0){var $e=X<0?-H+tt:-H;je=$e}else if(Ye==="tangential"&&N!=="outside"&&N!=="outer"){var wt=Math.atan2(X,te);wt<0&&(wt=tt*2+wt);var We=te>0;We&&(wt=tt+wt),je=wt-tt}if(a=!!je,A.x=Y,A.y=ee,A.rotation=je,A.setStyle({verticalAlign:"middle"}),le){A.setStyle({align:ne});var ie=A.states.select;ie&&(ie.x+=A.x,ie.y+=A.y)}else{var q=A.getBoundingRect().clone();q.applyTransform(A.getComputedTransform());var j=(A.style.margin||0)+2.1;q.y-=j/2,q.height+=j,r.push({label:A,labelLine:R,position:N,len:$,len2:W,minTurnAngle:F.get("minTurnAngle"),maxSurfaceAngle:F.get("maxSurfaceAngle"),surfaceNormal:new or(X,te),linePoints:se,textAlign:ne,labelDistance:k,labelAlignTo:z,edgeDistance:B,bleedMargin:V,rect:q,unconstrainedWidth:q.width,labelStyleWidth:A.style.width})}E.setTextConfig({inside:le})}}),!a&&t.get("avoidLabelOverlap")&&PTe(r,n,i,l,u,h,c,f);for(var v=0;v<r.length;v++){var g=r[v],m=g.label,x=g.labelLine,S=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),S&&(G(m.states,d),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(x){var T=g.linePoints;S||!T?(G(x.states,d),x.ignore=!0):(tJ(T,g.minTurnAngle),Uge(T,g.surfaceNormal,g.maxSurfaceAngle),x.setShape({points:T}),m.__hostTarget.textGuideLineConfig={anchor:new or(T[0][0],T[0][1])})}}}var DTe=function(t){he(e,t);function e(r,n,i){var a=t.call(this)||this;a.z2=2;var o=new Ar;return a.setTextContent(o),a.updateData(r,n,i,!0),a}return e.prototype.updateData=function(r,n,i,a){var o=this,s=r.hostModel,l=r.getItemModel(n),u=l.getModel("emphasis"),c=r.getItemLayout(n),f=Ae(np(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var h=s.getShallow("animationType");s.ecModel.ssr?(Fn(o,{scaleX:0,scaleY:0},s,{dataIndex:n,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):h==="scale"?(o.shape.r=c.r0,Fn(o,{shape:{r:c.r}},s,n)):i!=null?(o.setShape({startAngle:i,endAngle:i}),Fn(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,n)):(o.shape.endAngle=c.startAngle,Xr(o,{shape:{endAngle:c.endAngle}},s,n))}else $l(o),Xr(o,{shape:f},s,n);o.useStyle(r.getItemVisual(n,"style")),Oa(o,l);var d=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(d)*p,g=Math.sin(d)*p,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,r,n),o.ensureState("emphasis").shape=Ae({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},np(u.getModel("itemStyle"),c)),Ae(o.ensureState("select"),{x:v,y:g,shape:np(l.getModel(["select","itemStyle"]),c)}),Ae(o.ensureState("blur"),{shape:np(l.getModel(["blur","itemStyle"]),c)});var x=o.getTextGuideLine(),S=o.getTextContent();x&&Ae(x.ensureState("select"),{x:v,y:g}),Ae(S.ensureState("select"),{x:v,y:g}),ti(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(r,n,i){var a=this,o=n.getItemModel(i),s=o.getModel("labelLine"),l=n.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;ka(a,Qi(o),{labelFetcher:n.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:r.getFormattedLabel(i,"normal")||n.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=r.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Ro,this.setTextGuideLine(d)),oD(this,sD(o),{stroke:u,opacity:Eu(s.get(["lineStyle","opacity"]),c,1)})}},e}(wo),ITe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return e.prototype.render=function(r,n,i,a){var o=r.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&r.get("showEmptyCircle")){var h=fte(r),d=new wo({shape:Ae(cte(r,i),h)});d.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}o.diff(s).add(function(p){var v=new DTe(o,p,u);o.setItemGraphicEl(p,v),l.add(v)}).update(function(p,v){var g=s.getItemGraphicEl(v);g.updateData(o,p,u),g.off("click"),l.add(g),o.setItemGraphicEl(p,g)}).remove(function(p){var v=s.getItemGraphicEl(p);l_(v,r,p)}).execute(),LTe(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(r,n){var i=n.getData(),a=i.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Or);function p0(t,e,r){e=De(e)&&{coordDimensions:e}||Ae({encodeDefine:t.getEncode()},e);var n=t.getSource(),i=o0(n,e).dimensions,a=new Kn(i,t);return a.initData(n,r),a}var L2=function(){function t(e,r){this._getDataWithEncodedVisual=e,this._getRawData=r}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var r=this._getRawData();return r.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var r=this._getDataWithEncodedVisual();return r.indexOfName(e)},t.prototype.getItemVisual=function(e,r){var n=this._getDataWithEncodedVisual();return n.getItemVisual(e,r)},t}(),NTe=kr(),OTe=function(t){he(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new L2(pt(this.getData,this),pt(this.getRawData,this)),this._defaultLabelLine(r)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return p0(this,{coordDimensions:["value"],encodeDefaulter:Zt(NL,this)})},e.prototype.getDataParams=function(r){var n=this.getData(),i=NTe(n),a=i.seats;if(!a){var o=[];n.each(n.mapDimension("value"),function(l){o.push(l)}),a=i.seats=gce(o,n.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,r);return s.percent=a[r]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(r){bp(r,"labelLine",["show"]);var n=r.labelLine,i=r.emphasis.labelLine;n.show=n.show&&r.label.show,i.show=i.show&&r.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Vr);function kTe(t){return{seriesType:t,reset:function(e,r){var n=e.getData();n.filterSelf(function(i){var a=n.mapDimension("value"),o=n.get(a,i);return!(Ur(o)&&!isNaN(o)&&o<0)})}}}function FTe(t){t.registerChartView(ITe),t.registerSeriesModel(OTe),eZ("pie",t.registerAction),t.registerLayout(Zt(MTe,"pie")),t.registerProcessor(P2("pie")),t.registerProcessor(kTe("pie"))}var BTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r}return e.prototype.getInitialData=function(r,n){return Vu(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},e.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},e.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Vr),dte=4,zTe=function(){function t(){}return t}(),UTe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.getDefaultShape=function(){return new zTe},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(r,n){var i=n.points,a=n.size,o=this.symbolProxy,s=o.shape,l=r.getContext?r.getContext():r,u=l&&a[0]<dte,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-a[0]/2,s.y=d-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(r,n){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,f=a[c]-s/2,h=a[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},e.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var o=this.hoverDataIdx=this.findDataIndex(r,n);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,a=n.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new sr(l-o/2,u-s/2,c-l+o,f-u+s)}return r},e}(yr),VTe=function(){function t(){this.group=new Vt}return t.prototype.updateData=function(e,r){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,r)},t.prototype.updateLayout=function(e){var r=e.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,a=n.startIndex*4*2;r=new Float32Array(r.buffer,a,i)}n.setShape("points",r),n.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,r,n){var i=this._newAdded[0],a=r.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,r,n)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new UTe({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,r,n){var i=r.hostModel;n=n||{};var a=r.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=n.clipShape||null,e.symbolProxy=vi(r.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<dte;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Ht(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(u.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),HTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),o=this._updateSymbolDraw(a,r);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},e.prototype.updateTransform=function(r,n,i){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=R2("").reset(r,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},e.prototype._getClipShape=function(r){if(r.get("clip",!0)){var n=r.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},e.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,a=n.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new VTe:new A2,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Or);function GTe(t){Ot(LQ),t.registerSeriesModel(BTe),t.registerChartView(HTe),t.registerLayout(R2("scatter"))}function WTe(t){t.eachSeriesByType("radar",function(e){var r=e.getData(),n=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();G(a,function(o,s){r.each(r.mapDimension(a[s].dim),function(l,u){n[u]=n[u]||[];var c=i.dataToPoint(l,s);n[u][s]=iG(c)?c:aG(i)})}),r.each(function(o){var s=Kle(n[o],function(l){return iG(l)})||aG(i);n[o].push(s.slice()),r.setItemLayout(o,n[o])})}})}function iG(t){return!isNaN(t[0])&&!isNaN(t[1])}function aG(t){return[t.cx,t.cy]}function $Te(t){var e=t.polar;if(e){De(e)||(e=[e]);var r=[];G(e,function(n,i){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),t.radar=t.radar||[],De(t.radar)||(t.radar=[t.radar]),t.radar.push(n)):r.push(n)}),t.polar=r}G(t.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var jTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=r.coordinateSystem,o=this.group,s=r.getData(),l=this._data;function u(h,d){var p=h.getItemVisual(d,"symbol")||"circle";if(p!=="none"){var v=a0(h.getItemVisual(d,"symbolSize")),g=vi(p,-1,-1,2,2),m=h.getItemVisual(d,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:m*Math.PI/180||0}),g}}function c(h,d,p,v,g,m){p.removeAll();for(var x=0;x<d.length-1;x++){var S=u(v,g);S&&(S.__dimIdx=x,h[x]?(S.setPosition(h[x]),Vp[m?"initProps":"updateProps"](S,{x:d[x][0],y:d[x][1]},r,g)):S.setPosition(d[x]),p.add(S))}}function f(h){return Oe(h,function(d){return[a.cx,a.cy]})}s.diff(l).add(function(h){var d=s.getItemLayout(h);if(d){var p=new To,v=new Ro,g={shape:{points:d}};p.shape.points=f(d),v.shape.points=f(d),Fn(p,g,r,h),Fn(v,g,r,h);var m=new Vt,x=new Vt;m.add(v),m.add(p),m.add(x),c(v.shape.points,d,x,s,h,!0),s.setItemGraphicEl(h,m)}}).update(function(h,d){var p=l.getItemGraphicEl(d),v=p.childAt(0),g=p.childAt(1),m=p.childAt(2),x={shape:{points:s.getItemLayout(h)}};x.shape.points&&(c(v.shape.points,x.shape.points,m,s,h,!1),$l(g),$l(v),Xr(v,x,r),Xr(g,x,r),s.setItemGraphicEl(h,p))}).remove(function(h){o.remove(l.getItemGraphicEl(h))}).execute(),s.eachItemGraphicEl(function(h,d){var p=s.getItemModel(d),v=h.childAt(0),g=h.childAt(1),m=h.childAt(2),x=s.getItemVisual(d,"style"),S=x.fill;o.add(h),v.useStyle(At(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),Oa(v,p,"lineStyle"),Oa(g,p,"areaStyle");var b=p.getModel("areaStyle"),T=b.isEmpty()&&b.parentModel.isEmpty();g.ignore=T,G(["emphasis","select","blur"],function(M){var A=p.getModel([M,"areaStyle"]),R=A.isEmpty()&&A.parentModel.isEmpty();g.ensureState(M).ignore=R&&T}),g.useStyle(At(b.getAreaStyle(),{fill:S,opacity:.7,decal:x.decal}));var w=p.getModel("emphasis"),E=w.getModel("itemStyle").getItemStyle();m.eachChild(function(M){if(M instanceof aa){var A=M.style;M.useStyle(Ae({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},x))}else M.useStyle(x),M.setColor(S),M.style.strokeNoScale=!0;var R=M.ensureState("emphasis");R.style=Ft(E);var L=s.getStore().get(s.getDimensionIndex(M.__dimIdx),d);(L==null||isNaN(L))&&(L=""),ka(M,Qi(p),{labelFetcher:s.hostModel,labelDataIndex:d,labelDimIndex:M.__dimIdx,defaultText:L,inheritColor:S,defaultOpacity:x.opacity})}),ti(h,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Or),XTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r}return e.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new L2(pt(this.getData,this),pt(this.getRawData,this))},e.prototype.getInitialData=function(r,n){return p0(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(r),u=l===""?this.name:l,c=Hq(this,r);return ea("section",{header:u,sortBlocks:!0,blocks:Oe(s,function(f){var h=a.get(a.mapDimension(f.dim),r);return ea("nameValue",{markerType:"subItem",markerColor:c,name:f.name,value:h,sortParam:h})})})},e.prototype.getTooltipPosition=function(r){if(r!=null){for(var n=this.getData(),i=this.coordinateSystem,a=n.getValues(Oe(i.dimensions,function(u){return n.mapDimension(u)}),r),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Vr);function KTe(t){Ot(M2e),t.registerChartView(jTe),t.registerSeriesModel(XTe),t.registerLayout(WTe),t.registerProcessor(P2("radar")),t.registerPreprocessor($Te)}var YTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===r.id){var s=this._mapDraw;s&&o.add(s.group)}else if(r.needsDrawMap){var s=this._mapDraw||new qQ(i);o.add(s.group),s.draw(r,n,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(r,n,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(r,n,i){var a=r.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,f=u.offset,h=new Xc({style:{fill:r.getData().getVisual("style").fill},shape:{cx:c[0]+f*9,cy:c[1],r:3},silent:!0,z2:8+(f?0:Xm+1)});if(!f){var d=r.mainSeries.getData(),p=a.getName(l),v=d.indexOfName(p),g=a.getItemModel(l),m=g.getModel("label"),x=d.getItemGraphicEl(v);ka(h,Qi(g),{labelFetcher:{getFormattedLabel:function(S,b){return r.getFormattedLabel(v,b)}},defaultText:p}),h.disableLabelAnimation=!0,m.get("position")||h.setTextConfig({position:"bottom"}),x.onHoverStateChange=function(S){nw(h,S)}}o.add(h)}}})},e.type="map",e}(Or),qTe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(n){if(n!=null){var i=this.getData().getName(n),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},r}return e.prototype.getInitialData=function(r){for(var n=p0(this,{coordDimensions:["value"],encodeDefaulter:Zt(NL,this)}),i=Tt(),a=[],o=0,s=n.count();o<s;o++){var l=n.getName(o);i.set(l,!0)}var u=Vc.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return G(u.regions,function(c){var f=c.name;i.get(f)||a.push(f)}),n.appendValues([],a),n},e.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(r){var n=this.getData();return n.get(n.mapDimension("value"),r)},e.prototype.getRegionModel=function(r){var n=this.getData();return n.getItemModel(n.indexOfName(r))},e.prototype.formatTooltip=function(r,n,i){for(var a=this.getData(),o=this.getRawValue(r),s=a.getName(r),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var f=l[c].originalData.indexOfName(s),h=a.mapDimension("value");isNaN(l[c].originalData.get(h,f))||u.push(l[c].name)}return ea("section",{header:u.join(", "),noHeader:!u.length,blocks:[ea("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(r){this.option.zoom=r},e.prototype.setCenter=function(r){this.option.center=r},e.prototype.getLegendIcon=function(r){var n=r.icon||"roundRect",i=vi(n,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return i.setStyle(r.itemStyle),i.style.stroke="none",n.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Vr);function ZTe(t,e){var r={};return G(t,function(n){n.each(n.mapDimension("value"),function(i,a){var o="ec-"+n.getName(a);r[o]=r[o]||[],isNaN(i)||r[o].push(i)})}),t[0].map(t[0].mapDimension("value"),function(n,i){for(var a="ec-"+t[0].getName(i),o=0,s=1/0,l=-1/0,u=r[a].length,c=0;c<u;c++)s=Math.min(s,r[a][c]),l=Math.max(l,r[a][c]),o+=r[a][c];var f;return e==="min"?f=s:e==="max"?f=l:e==="average"?f=o/u:f=o,u===0?NaN:f})}function JTe(t){var e={};t.eachSeriesByType("map",function(r){var n=r.getHostGeoModel(),i=n?"o"+n.id:"i"+r.getMapType();(e[i]=e[i]||[]).push(r)}),G(e,function(r,n){for(var i=ZTe(Oe(r,function(o){return o.getData()}),r[0].get("mapValueCalculation")),a=0;a<r.length;a++)r[a].originalData=r[a].getData();for(var a=0;a<r.length;a++)r[a].seriesGroup=r,r[a].needsDrawMap=a===0&&!r[a].getHostGeoModel(),r[a].setData(i.cloneShallow()),r[a].mainSeries=r[0]})}function QTe(t){var e={};t.eachSeriesByType("map",function(r){var n=r.getMapType();if(!(r.getHostGeoModel()||e[n])){var i={};G(r.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&t.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var f=l.getName(c),h=s.getRegion(f);if(!(!h||isNaN(u))){var d=i[f]||0,p=s.dataToPoint(h.getCenter());i[f]=d+1,l.setItemLayout(c,{point:p,offset:d})}})});var a=r.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),e[n]=!0}})}function e4e(t){Ot(GD),t.registerChartView(YTe),t.registerSeriesModel(qTe),t.registerLayout(QTe),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,JTe),eZ("map",t.registerAction)}function t4e(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[e],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},r.push(s)}}function r4e(t,e){var r=t.isExpand?t.children:[],n=t.parentNode.children,i=t.hierNode.i?n[t.hierNode.i-1]:null;if(r.length){a4e(t);var a=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(t.hierNode.prelim=i.hierNode.prelim+e(t,i),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else i&&(t.hierNode.prelim=i.hierNode.prelim+e(t,i));t.parentNode.hierNode.defaultAncestor=o4e(t,i,t.parentNode.hierNode.defaultAncestor||n[0],e)}function n4e(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function oG(t){return arguments.length?t:u4e}function m1(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function i4e(t,e){return ri(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function a4e(t){for(var e=t.children,r=e.length,n=0,i=0;--r>=0;){var a=e[r];a.hierNode.prelim+=n,a.hierNode.modifier+=n,i+=a.hierNode.change,n+=a.hierNode.shift+i}}function o4e(t,e,r,n){if(e){for(var i=t,a=t,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,f=s.hierNode.modifier;s=WM(s),a=$M(a),s&&a;){i=WM(i),o=$M(o),i.hierNode.ancestor=t;var h=s.hierNode.prelim+f-a.hierNode.prelim-u+n(s,a);h>0&&(l4e(s4e(s,t,r),t,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=o.hierNode.modifier}s&&!WM(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),a&&!$M(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,r=t)}return r}function WM(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function $M(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function s4e(t,e,r){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:r}function l4e(t,e,r){var n=r/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=n,e.hierNode.shift+=r,e.hierNode.modifier+=r,e.hierNode.prelim+=r,t.hierNode.change+=n}function u4e(t,e){return t.parentNode===e.parentNode?1:2}var c4e=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),f4e=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new c4e},e.prototype.buildPath=function(r,n){var i=n.childPoints,a=i.length,o=n.parentPoint,s=i[0],l=i[a-1];if(a===1){r.moveTo(o[0],o[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=Ze(n.forkPosition,1),d=[];d[c]=o[c],d[f]=o[f]+(l[f]-o[f])*h,r.moveTo(o[0],o[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},e}(yr),h4e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._mainGroup=new Vt,r}return e.prototype.init=function(r,n){this._controller=new C2(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(r,n,i){var a=r.getData(),o=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;a.diff(u).add(function(c){sG(a,c)&&lG(a,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!sG(a,c)){h&&cG(u,f,h,s,r);return}lG(a,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&cG(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=a},e.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),a=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&a.push([+h.x,+h.y])});var o=[],s=[];kT(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new T2;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(r,n,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!p4(u,i,r)}),o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){UD(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){VD(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(r),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,a=n.scaleX||1,o=n.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Or);function sG(t,e){var r=t.getItemLayout(e);return r&&!isNaN(r.x)&&!isNaN(r.y)}function lG(t,e,r,n,i){var a=!r,o=t.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=t.tree.root,f=o.parentNode===c?o:o.parentNode||o,h=t.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=o.getLayout();a?(r=new E2(t,e,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(t,e,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),t.setItemGraphicEl(e,r),r.__oldX=r.x,r.__oldY=r.y,Xr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],x=m.getLayout(),S=m.children.length,b=void 0,T=void 0;if(v.x===x.x&&o.isExpand===!0&&m.children.length){var w={x:(m.children[0].getLayout().x+m.children[S-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[S-1].getLayout().y)/2};b=Math.atan2(w.y-x.y,w.x-x.x),b<0&&(b=Math.PI*2+b),T=w.x<x.x,T&&(b=b-Math.PI)}else b=Math.atan2(v.y-x.y,v.x-x.x),b<0&&(b=Math.PI*2+b),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(T=v.x<x.x,T&&(b=b-Math.PI)):(T=v.x>x.x,T||(b=b-Math.PI));var E=T?"left":"right",M=s.getModel("label"),A=M.get("rotate"),R=A*(Math.PI/180),L=g.getTextContent();L&&(g.setTextConfig({position:M.get("position")||E,rotation:A==null?-b:R,origin:"center"}),L.setStyle("verticalAlign","middle"))}var I=s.get(["emphasis","focus"]),N=I==="relative"?nm(o.getAncestorsIndices(),o.getDescendantIndices()):I==="ancestor"?o.getAncestorsIndices():I==="descendant"?o.getDescendantIndices():null;N&&(Ht(r).focus=N),d4e(i,o,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(k){if(k!=="blur"){var z=o.parentNode&&t.getItemGraphicEl(o.parentNode.dataIndex);z&&z.hoverState===f2||nw(r.__edge,k)}})}function d4e(t,e,r,n,i,a,o,s){var l=e.getModel(),u=t.get("edgeShape"),c=t.get("layout"),f=t.getOrient(),h=t.get(["lineStyle","curveness"]),d=t.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")e.parentNode&&e.parentNode!==r&&(v||(v=n.__edge=new d2({shape:BR(c,f,h,i,i)})),Xr(v,{shape:BR(c,f,h,a,o)},t));else if(u==="polyline"&&c==="orthogonal"&&e!==r&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var g=e.children,m=[],x=0;x<g.length;x++){var S=g[x].getLayout();m.push([S.x,S.y])}v||(v=n.__edge=new f4e({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:f,forkPosition:d}})),Xr(v,{shape:{parentPoint:[o.x,o.y],childPoints:m}},t)}v&&!(u==="polyline"&&!e.isExpand)&&(v.useStyle(At({strokeNoScale:!0,fill:null},p)),Oa(v,l,"lineStyle"),Cp(v),s.add(v))}function uG(t,e,r,n,i){var a=e.tree.root,o=pte(a,t),s=o.source,l=o.sourceLayout,u=e.getItemGraphicEl(t.dataIndex);if(u){var c=e.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?Sh(h,{shape:BR(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&Sh(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function pte(t,e){for(var r=e.parentNode===t?e:e.parentNode||e,n;n=r.getLayout(),n==null;)r=r.parentNode===t?r:r.parentNode||r;return{source:r,sourceLayout:n}}function cG(t,e,r,n,i){var a=t.tree.getNodeByDataIndex(e),o=t.tree.root,s=pte(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Sh(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),t.setItemGraphicEl(e,null)},removeOpt:l}),r.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){uG(u,t,n,i,l)}),uG(a,t,n,i,l)}function BR(t,e,r,n,i){var a,o,s,l,u,c,f,h;if(t==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=m1(u,f),p=m1(u,f+(h-f)*r),v=m1(c,h+(f-h)*r),g=m1(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(e==="LR"||e==="RL")&&(a=u+(c-u)*r,o=f,s=c+(u-c)*r,l=h),(e==="TB"||e==="BT")&&(a=u,o=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var el=kr();function fI(t){var e=t.mainData,r=t.datas;r||(r={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,vte(e,r,t),G(r,function(n){G(e.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,Zt(p4e,t))})}),e.wrapMethod("cloneShallow",Zt(g4e,t)),G(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,Zt(v4e,t))}),So(r[e.dataType]===e)}function p4e(t,e){if(_4e(this)){var r=Ae({},el(this).datas);r[this.dataType]=e,vte(e,r,t)}else hI(e,this.dataType,el(this).mainData,t);return e}function v4e(t,e){return t.struct&&t.struct.update(),e}function g4e(t,e){return G(el(e).datas,function(r,n){r!==e&&hI(r.cloneShallow(),n,e,t)}),e}function m4e(t){var e=el(this).mainData;return t==null||e==null?e:el(e).datas[t]}function y4e(){var t=el(this).mainData;return t==null?[{data:t}]:Oe(Er(el(t).datas),function(e){return{type:e,data:el(t).datas[e]}})}function _4e(t){return el(t).mainData===t}function vte(t,e,r){el(t).datas={},G(e,function(n,i){hI(n,i,t,r)})}function hI(t,e,r,n){el(r).datas[e]=t,el(t).mainData=r,t.dataType=e,n.struct&&(t[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=t),t.getLinkedData=m4e,t.getLinkedDataAll=y4e}var x4e=function(){function t(e,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=r}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,r,n){Lt(e)&&(n=r,r=e,e=null),e=e||{},ft(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=r.call(n,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,r,n);i==="postorder"&&r.call(n,this)},t.prototype.updateDepthAndHeight=function(e){var r=0;this.depth=e;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(e+1),i.height>r&&(r=i.height)}this.height=r+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var a=n[r].getNodeById(e);if(a)return a}},t.prototype.contains=function(e){if(e===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var a=n[r].contains(e);if(a)return a}},t.prototype.getAncestors=function(e){for(var r=[],n=e?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},t.prototype.getAncestorsIndices=function(){for(var e=[],r=this;r;)e.push(r.dataIndex),r=r.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(r){e.push(r.dataIndex)}),e},t.prototype.getValue=function(e){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,r)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,r)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,r=0;r<e.length;++r)if(e[r]===this)return r;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var r=e.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),dI=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,r,n){this.root.eachNode(e,r,n)},t.prototype.getNodeByDataIndex=function(e){var r=this.data.getRawIndex(e);return this._nodes[r]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=e.count();n<i;n++)r[e.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,r,n){var i=new t(r),a=[],o=1;s(e);function s(c,f){var h=c.value;o=Math.max(o,De(h)?h.length:1),a.push(c);var d=new x4e(Fi(c.name,""),i);f?S4e(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=o0(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new Kn(l,r);return u.initData(a),n&&n(u),fI({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},t}();function S4e(t,e){var r=e.children;t.parentNode!==e&&(r.push(t),t.parentNode=e)}function O_(t,e,r){if(t&&hr(e,t.type)>=0){var n=r.getData().tree.root,i=t.targetNode;if(ft(i)&&(i=n.getNodeById(i)),i&&n.contains(i))return{node:i};var a=t.targetNodeId;if(a!=null&&(i=n.getNodeById(a)))return{node:i}}}function gte(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function pI(t,e){var r=gte(t);return hr(r,e)>=0}function y4(t,e){for(var r=[];t;){var n=t.dataIndex;r.push({name:t.name,dataIndex:n,value:e.getRawValue(n)}),t=t.parentNode}return r.reverse(),r}var b4e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return e.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},a=new Br(i,this,this.ecModel),o=dI.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=o.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=a),h})}var l=0;o.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return o.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),o.data},e.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},e.prototype.setZoom=function(r){this.option.zoom=r},e.prototype.setCenter=function(r){this.option.center=r},e.prototype.formatTooltip=function(r,n,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return ea("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(r){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=y4(i,this),n.collapsed=!i.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Vr);function w4e(t,e,r){for(var n=[t],i=[],a;a=n.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)n.push(o[s])}for(;a=i.pop();)e(a,r)}function Uy(t,e){for(var r=[t],n;n=r.pop();)if(e(n),n.isExpand){var i=n.children;if(i.length)for(var a=i.length-1;a>=0;a--)r.push(i[a])}}function T4e(t,e){t.eachSeriesByType("tree",function(r){C4e(r,e)})}function C4e(t,e){var r=i4e(t,e);t.layoutInfo=r;var n=t.get("layout"),i=0,a=0,o=null;n==="radial"?(i=2*Math.PI,a=Math.min(r.height,r.width)/2,o=oG(function(S,b){return(S.parentNode===b.parentNode?1:2)/S.depth})):(i=r.width,a=r.height,o=oG());var s=t.getData().tree.root,l=s.children[0];if(l){t4e(s),w4e(l,r4e,o),s.hierNode.modifier=-l.hierNode.prelim,Uy(l,n4e);var u=l,c=l,f=l;Uy(l,function(S){var b=S.getLayout().x;b<u.getLayout().x&&(u=S),b>c.getLayout().x&&(c=S),S.depth>f.depth&&(f=S)});var h=u===c?1:o(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=a/(f.depth-1||1),Uy(l,function(S){g=(S.getLayout().x+d)*p,m=(S.depth-1)*v;var b=m1(g,m);S.setLayout({x:b.x,y:b.y,rawX:g,rawY:m},!0)});else{var x=t.getOrient();x==="RL"||x==="LR"?(v=a/(c.getLayout().x+h+d),p=i/(f.depth-1||1),Uy(l,function(S){m=(S.getLayout().x+d)*v,g=x==="LR"?(S.depth-1)*p:i-(S.depth-1)*p,S.setLayout({x:g,y:m},!0)})):(x==="TB"||x==="BT")&&(p=i/(c.getLayout().x+h+d),v=a/(f.depth-1||1),Uy(l,function(S){g=(S.getLayout().x+d)*p,m=x==="TB"?(S.depth-1)*v:a-(S.depth-1)*v,S.setLayout({x:g,y:m},!0)}))}}}function E4e(t){t.eachSeriesByType("tree",function(e){var r=e.getData(),n=r.tree;n.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");Ae(s,o)})})}function A4e(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,r){r.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=e.dataIndex,a=n.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,r,n){r.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=BD(a,e,void 0,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function M4e(t){t.registerChartView(h4e),t.registerSeriesModel(b4e),t.registerLayout(T4e),t.registerVisual(E4e),A4e(t)}var fG=["treemapZoomToNode","treemapRender","treemapMove"];function R4e(t){for(var e=0;e<fG.length;e++)t.registerAction({type:fG[e],update:"updateView"},pi);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,n){n.eachComponent({mainType:"series",subType:"treemap",query:r},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=O_(r,s,a);if(l){var u=a.getViewRoot();u&&(r.direction=pI(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function mte(t){var e=t.getData(),r=e.tree,n={};r.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=D6(t.ecModel,a.name||a.dataIndex+"",n);i.setVisual("decal",o)})}var P4e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.preventUsingHoverLayer=!0,r}return e.prototype.getInitialData=function(r,n){var i={name:r.name,children:r.data};yte(i);var a=r.levels||[],o=this.designatedVisualItemStyle={},s=new Br({itemStyle:o},this,n);a=r.levels=L4e(a,n);var l=Oe(a||[],function(f){return new Br(f,s,n)},this),u=dI.createTree(i,this,c);function c(f){f.wrapMethod("getItemModel",function(h,d){var p=u.getNodeByDataIndex(d),v=p?l[p.depth]:null;return h.parentModel=v||s,h})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=this.getRawValue(r),s=a.getName(r);return ea("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(r){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=y4(i,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},Ae(this.layoutInfo,r)},e.prototype.mapIdToIndex=function(r){var n=this._idIndexMap;n||(n=this._idIndexMap=Tt(),this._idIndexMapCount=0);var i=n.get(r);return i==null&&n.set(r,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var n=this.getRawData().tree.root;(!r||r!==n&&!n.contains(r))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){mte(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Vr);function yte(t){var e=0;G(t.children,function(n){yte(n);var i=n.value;De(i)&&(i=i[0]),e+=i});var r=t.value;De(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=e),r<0&&(r=0),De(t.value)?t.value[0]=r:t.value=r}function L4e(t,e){var r=gn(e.get("color")),n=gn(e.get(["aria","decal","decals"]));if(r){t=t||[];var i,a;G(t,function(s){var l=new Br(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var o=t[0]||(t[0]={});return i||(o.color=r.slice()),!a&&n&&(o.decal=n.slice()),t}}var D4e=8,hG=8,jM=5,I4e=function(){function t(e){this.group=new Vt,e.add(this.group)}return t.prototype.render=function(e,r,n,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!n)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),f={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,f,u),this._renderContent(e,f,s,l,u,c,i),YT(o,f.pos,f.box)}},t.prototype._prepare=function(e,r,n){for(var i=e;i;i=i.parentNode){var a=Fi(i.getModel().get("name"),""),o=n.getTextRect(a),s=Math.max(o.width+D4e*2,r.emptyItemWidth);r.totalWidth+=s+hG,r.renderList.push({node:i,text:a,width:s})}},t.prototype._renderContent=function(e,r,n,i,a,o,s){for(var l=0,u=r.emptyItemWidth,c=e.get(["breadcrumb","height"]),f=$he(r.pos,r.box),h=r.totalWidth,d=r.renderList,p=i.getModel("itemStyle").getItemStyle(),v=d.length-1;v>=0;v--){var g=d[v],m=g.node,x=g.width,S=g.text;h>f.width&&(h-=x-u,x=u,S=null);var b=new To({shape:{points:N4e(l,0,x,c,v===d.length-1,v===0)},style:At(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ar({style:dn(a,{text:S})}),textConfig:{position:"inside"},z2:Xm*1e4,onclick:Zt(s,m)});b.disableLabelAnimation=!0,b.getTextContent().ensureState("emphasis").style=dn(o,{text:S}),b.ensureState("emphasis").style=p,ti(b,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(b),O4e(b,e,m),l+=x+hG}},t.prototype.remove=function(){this.group.removeAll()},t}();function N4e(t,e,r,n,i,a){var o=[[i?t:t-jM,e],[t+r,e],[t+r,e+n],[i?t:t-jM,e+n]];return!a&&o.splice(2,0,[t+r+jM,e+n/2]),!i&&o.push([t,e+n/2]),o}function O4e(t,e,r){Ht(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&y4(r,e)}}var k4e=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(e,r,n,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:r,duration:n,delay:i,easing:a}),!0)},t.prototype.finished=function(e){return this._finishedCallback=e,this},t.prototype.start=function(){for(var e=this,r=this._storage.length,n=function(){r--,r<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},t}();function F4e(){return new k4e}var zR=Vt,dG=Mr,pG=3,vG="label",gG="upperLabel",B4e=Xm*10,z4e=Xm*2,U4e=Xm*3,kd=Tp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mG=function(t){var e=kd(t);return e.stroke=e.fill=e.lineWidth=null,e},jw=kr(),V4e=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._state="ready",r._storage=Vy(),r}return e.prototype.render=function(r,n,i,a){var o=n.findComponents({mainType:"series",subType:"treemap",query:a});if(!(hr(o,r)<0)){this.seriesModel=r,this.api=i,this.ecModel=n;var s=["treemapZoomToNode","treemapRootToNode"],l=O_(a,s,r),u=a&&a.type,c=r.layoutInfo,f=!this._oldTree,h=this._storage,d=u==="treemapRootToNode"&&l&&h?{rootNodeGroup:h.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),v=r.get("animation"),g=this._doRender(p,r,d);v&&!f&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,g,r,d):g.renderFinally(),this._resetController(i),this._renderBreadcrumb(r,i,l)}},e.prototype._giveContainerGroup=function(r){var n=this._containerGroup;return n||(n=this._containerGroup=new zR,this._initEvents(n),this.group.add(n)),n.x=r.x,n.y=r.y,n},e.prototype._doRender=function(r,n,i){var a=n.getData().tree,o=this._oldTree,s=Vy(),l=Vy(),u=this._storage,c=[];function f(x,S,b,T){return H4e(n,l,u,i,s,c,x,S,b,T)}v(a.root?[a.root]:[],o&&o.root?[o.root]:[],r,a===o||!o,0);var h=g(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var d=this.seriesModel.layoutInfo,p=a.root.getLayout();p.width===d.width&&p.height===d.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:h,renderFinally:m};function v(x,S,b,T,w){T?(S=x,G(x,function(A,R){!A.isRemoved()&&M(R,R)})):new Bc(S,x,E,E).add(M).update(M).remove(Zt(M,null)).execute();function E(A){return A.getId()}function M(A,R){var L=A!=null?x[A]:null,I=R!=null?S[R]:null,N=f(L,I,b,w);N&&v(L&&L.viewChildren||[],I&&I.viewChildren||[],N,T,w+1)}}function g(x){var S=Vy();return x&&G(x,function(b,T){var w=S[T];G(b,function(E){E&&(w.push(E),jw(E).willDelete=!0)})}),S}function m(){G(h,function(x){G(x,function(S){S.parent&&S.parent.remove(S)})}),G(c,function(x){x.invisible=!0,x.dirty()})}},e.prototype._doAnimation=function(r,n,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(Lt(o)?0:o)||0,u=(Lt(s)?null:s)||"cubicOut",c=F4e();G(n.willDeleteEls,function(f,h){G(f,function(d,p){if(!d.invisible){var v=d.parent,g,m=jw(v);if(a&&a.direction==="drillDown")g=v===a.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var x=0,S=0;m.willDelete||(x=m.nodeWidth/2,S=m.nodeHeight/2),g=h==="nodeGroup"?{x,y:S,style:{opacity:0}}:{shape:{x,y:S,width:0,height:0},style:{opacity:0}}}g&&c.add(d,g,l,0,u)}})}),G(this._storage,function(f,h){G(f,function(d,p){var v=n.lastsForAnimation[h][p],g={};v&&(d instanceof Vt?v.oldX!=null&&(g.x=d.x,g.y=d.y,d.x=v.oldX,d.y=v.oldY):(v.oldShape&&(g.shape=Ae({},d.shape),d.setShape(v.oldShape)),v.fadein?(d.setStyle("opacity",0),g.style={opacity:1}):d.style.opacity!==1&&(g.style={opacity:1})),c.add(d,g,l,0,u))})},this),this._state="animating",c.finished(pt(function(){this._state="ready",n.renderFinally()},this)).start()},e.prototype._resetController=function(r){var n=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),n||(n=this._controller=new C2(r.getZr()),n.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),n.on("pan",pt(this._onPan,this)),n.on("zoom",pt(this._onZoom,this)));var a=new sr(0,0,r.getWidth(),r.getHeight());n.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},e.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>pG||Math.abs(r.dy)>pG)){var n=this.seriesModel.getData().tree.root;if(!n)return;var i=n.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+r.dx,y:i.y+r.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(r){var n=r.originX,i=r.originY,a=r.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new sr(s.x,s.y,s.width,s.height),u=null,c=this._controllerHost;u=c.zoomLimit;var f=c.zoom=c.zoom||1;if(f*=a,u){var h=u.min||0,d=u.max||1/0;f=Math.max(Math.min(d,f),h)}var p=f/c.zoom;c.zoom=f;var v=this.seriesModel.layoutInfo;n-=v.x,i-=v.y;var g=Xo();Du(g,g,[-n,-i]),sL(g,g,[p,p]),Du(g,g,[n,i]),l.applyTransform(g),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(r){var n=this;r.on("click",function(i){if(n._state==="ready"){var a=n.seriesModel.get("nodeClick",!0);if(a){var o=n.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)n._rootToNode(o);else if(a==="zoomToNode")n._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&cw(u,c)}}}}},this)},e.prototype._renderBreadcrumb=function(r,n,i){var a=this;i||(i=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),i||(i={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new I4e(this.group))).render(r,n,i.node,function(o){a._state!=="animating"&&(pI(r.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Vy(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},e.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},e.prototype.findTarget=function(r,n){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(r,n),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(Or);function Vy(){return{nodeGroup:[],background:[],content:[]}}function H4e(t,e,r,n,i,a,o,s,l,u){if(!o)return;var c=o.getLayout(),f=t.getData(),h=o.getModel();if(f.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var d=c.width,p=c.height,v=c.borderWidth,g=c.invisible,m=o.getRawIndex(),x=s&&s.getRawIndex(),S=o.viewChildren,b=c.upperHeight,T=S&&S.length,w=h.getModel("itemStyle"),E=h.getModel(["emphasis","itemStyle"]),M=h.getModel(["blur","itemStyle"]),A=h.getModel(["select","itemStyle"]),R=w.get("borderRadius")||0,L=Y("nodeGroup",zR);if(!L)return;if(l.add(L),L.x=c.x||0,L.y=c.y||0,L.markRedraw(),jw(L).nodeWidth=d,jw(L).nodeHeight=p,c.isAboveViewRoot)return L;var I=Y("background",dG,u,z4e);I&&$(L,I,T&&c.upperLabelHeight);var N=h.getModel("emphasis"),k=N.get("focus"),z=N.get("blurScope"),B=N.get("disabled"),V=k==="ancestor"?o.getAncestorsIndices():k==="descendant"?o.getDescendantIndices():k;if(T)s_(L)&&Yd(L,!1),I&&(Yd(I,!B),f.setItemGraphicEl(o.dataIndex,I),T6(I,V,z));else{var F=Y("content",dG,u,U4e);F&&W(L,F),I.disableMorphing=!0,I&&s_(I)&&Yd(I,!1),Yd(L,!B),f.setItemGraphicEl(o.dataIndex,L),T6(L,V,z)}return L;function $(ne,le,pe){var Se=Ht(le);if(Se.dataIndex=o.dataIndex,Se.seriesIndex=t.seriesIndex,le.setShape({x:0,y:0,width:d,height:p,r:R}),g)H(le);else{le.invisible=!1;var _e=o.getVisual("style"),Le=_e.stroke,Be=mG(w);Be.fill=Le;var Q=kd(E);Q.fill=E.get("borderColor");var tt=kd(M);tt.fill=M.get("borderColor");var je=kd(A);if(je.fill=A.get("borderColor"),pe){var Ye=d-2*v;X(le,Le,_e.opacity,{x:v,y:0,width:Ye,height:b})}else le.removeTextContent();le.setStyle(Be),le.ensureState("emphasis").style=Q,le.ensureState("blur").style=tt,le.ensureState("select").style=je,Cp(le)}ne.add(le)}function W(ne,le){var pe=Ht(le);pe.dataIndex=o.dataIndex,pe.seriesIndex=t.seriesIndex;var Se=Math.max(d-2*v,0),_e=Math.max(p-2*v,0);if(le.culling=!0,le.setShape({x:v,y:v,width:Se,height:_e,r:R}),g)H(le);else{le.invisible=!1;var Le=o.getVisual("style"),Be=Le.fill,Q=mG(w);Q.fill=Be,Q.decal=Le.decal;var tt=kd(E),je=kd(M),Ye=kd(A);X(le,Be,Le.opacity,null),le.setStyle(Q),le.ensureState("emphasis").style=tt,le.ensureState("blur").style=je,le.ensureState("select").style=Ye,Cp(le)}ne.add(le)}function H(ne){!ne.invisible&&a.push(ne)}function X(ne,le,pe,Se){var _e=h.getModel(Se?gG:vG),Le=Fi(h.get("name"),null),Be=_e.getShallow("show");ka(ne,Qi(h,Se?gG:vG),{defaultText:Be?Le:null,inheritColor:le,defaultOpacity:pe,labelFetcher:t,labelDataIndex:o.dataIndex});var Q=ne.getTextContent();if(Q){var tt=Q.style,je=iL(tt.padding||0);Se&&(ne.setTextConfig({layoutRect:Se}),Q.disableLabelLayout=!0),Q.beforeUpdate=function(){var $e=Math.max((Se?Se.width:ne.shape.width)-je[1]-je[3],0),wt=Math.max((Se?Se.height:ne.shape.height)-je[0]-je[2],0);(tt.width!==$e||tt.height!==wt)&&Q.setStyle({width:$e,height:wt})},tt.truncateMinChar=2,tt.lineOverflow="truncate",te(tt,Se,c);var Ye=Q.getState("emphasis");te(Ye?Ye.style:null,Se,c)}}function te(ne,le,pe){var Se=ne?ne.text:null;if(!le&&pe.isLeafRoot&&Se!=null){var _e=t.get("drillDownIcon",!0);ne.text=_e?_e+" "+Se:Se}}function Y(ne,le,pe,Se){var _e=x!=null&&r[ne][x],Le=i[ne];return _e?(r[ne][x]=null,ee(Le,_e)):g||(_e=new le,_e instanceof nl&&(_e.z2=G4e(pe,Se)),se(Le,_e)),e[ne][m]=_e}function ee(ne,le){var pe=ne[m]={};le instanceof zR?(pe.oldX=le.x,pe.oldY=le.y):pe.oldShape=Ae({},le.shape)}function se(ne,le){var pe=ne[m]={},Se=o.parentNode,_e=le instanceof Vt;if(Se&&(!n||n.direction==="drillDown")){var Le=0,Be=0,Q=i.background[Se.getRawIndex()];!n&&Q&&Q.oldShape&&(Le=Q.oldShape.width,Be=Q.oldShape.height),_e?(pe.oldX=0,pe.oldY=Be):pe.oldShape={x:Le,y:Be,width:0,height:0}}pe.fadein=!_e}}function G4e(t,e){return t*B4e+e}var W4e="itemStyle",_te=kr();const $4e={seriesType:"treemap",reset:function(t){var e=t.getData().tree,r=e.root;r.isRemoved()||xte(r,{},t.getViewRoot().getAncestors(),t)}};function xte(t,e,r,n){var i=t.getModel(),a=t.getLayout(),o=t.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(W4e),l=j4e(s,e,n),u=o.ensureUniqueItemVisual(t.dataIndex,"style"),c=s.get("borderColor"),f=s.get("borderColorSaturation"),h;f!=null&&(h=yG(l),c=X4e(f,h)),u.stroke=c;var d=t.viewChildren;if(!d||!d.length)h=yG(l),u.fill=h;else{var p=K4e(t,i,a,s,l,d);G(d,function(v,g){if(v.depth>=r.length||v===r[v.depth]){var m=Y4e(i,l,v,g,p,n);xte(v,m,r,n)}})}}}function j4e(t,e,r){var n=Ae({},e),i=r.designatedVisualItemStyle;return G(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=t.get(a);i[a]=null,o!=null&&(n[a]=o)}),n}function yG(t){var e=XM(t,"color");if(e){var r=XM(t,"colorAlpha"),n=XM(t,"colorSaturation");return n&&(e=M1(e,null,null,n)),r&&(e=Z3(e,r)),e}}function X4e(t,e){return e!=null?M1(e,null,null,t):null}function XM(t,e){var r=t[e];if(r!=null&&r!=="none")return r}function K4e(t,e,r,n,i,a){if(!(!a||!a.length)){var o=KM(e,"color")||i.color!=null&&i.color!=="none"&&(KM(e,"colorAlpha")||KM(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),u=r.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),f={type:o.name,dataExtent:u,visual:o.range};f.type==="color"&&(c==="index"||c==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var h=new Ji(f);return _te(h).drColorMappingBy=c,h}}}function KM(t,e){var r=t.get(e);return De(r)&&r.length?{name:e,range:r}:null}function Y4e(t,e,r,n,i,a){var o=Ae({},e);if(i){var s=i.type,l=s==="color"&&_te(i).drColorMappingBy,u=l==="index"?n:l==="id"?a.mapIdToIndex(r.getId()):r.getValue(t.get("visualDimension"));o[s]=i.mapValueToVisual(u)}return o}var k_=Math.max,Xw=Math.min,_G=ma,vI=G,Ste=["itemStyle","borderWidth"],q4e=["itemStyle","gapWidth"],Z4e=["upperLabel","show"],J4e=["upperLabel","height"];const Q4e={seriesType:"treemap",reset:function(t,e,r,n){var i=r.getWidth(),a=r.getHeight(),o=t.option,s=ri(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),l=o.size||[],u=Ze(_G(s.width,l[0]),i),c=Ze(_G(s.height,l[1]),a),f=n&&n.type,h=["treemapZoomToNode","treemapRootToNode"],d=O_(n,h,t),p=f==="treemapRender"||f==="treemapMove"?n.rootRect:null,v=t.getViewRoot(),g=gte(v);if(f!=="treemapMove"){var m=f==="treemapZoomToNode"?aCe(t,d,v,u,c):p?[p.width,p.height]:[u,c],x=o.sort;x&&x!=="asc"&&x!=="desc"&&(x="desc");var S={squareRatio:o.squareRatio,sort:x,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};v.setLayout(b),bte(v,S,!1,0),b=v.getLayout(),vI(g,function(w,E){var M=(g[E+1]||v).getValue();w.setLayout(Ae({dataExtent:[M,M],borderWidth:0,upperHeight:0},b))})}var T=t.getData().tree.root;T.setLayout(oCe(s,p,d),!0),t.setLayoutInfo(s),wte(T,new sr(-s.x,-s.y,i,a),g,v,0)}};function bte(t,e,r,n){var i,a;if(!t.isRemoved()){var o=t.getLayout();i=o.width,a=o.height;var s=t.getModel(),l=s.get(Ste),u=s.get(q4e)/2,c=Tte(s),f=Math.max(l,c),h=l-u,d=f-u;t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:c},!0),i=k_(i-2*h,0),a=k_(a-h-d,0);var p=i*a,v=eCe(t,s,p,e,r,n);if(v.length){var g={x:h,y:d,width:i,height:a},m=Xw(i,a),x=1/0,S=[];S.area=0;for(var b=0,T=v.length;b<T;){var w=v[b];S.push(w),S.area+=w.getLayout().area;var E=iCe(S,m,e.squareRatio);E<=x?(b++,x=E):(S.area-=S.pop().getLayout().area,xG(S,m,g,u,!1),m=Xw(g.width,g.height),S.length=S.area=0,x=1/0)}if(S.length&&xG(S,m,g,u,!0),!r){var M=s.get("childrenVisibleMin");M!=null&&p<M&&(r=!0)}for(var b=0,T=v.length;b<T;b++)bte(v[b],e,r,n+1)}}}function eCe(t,e,r,n,i,a){var o=t.children||[],s=n.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=n.leafDepth!=null&&n.leafDepth<=a;if(i&&!l)return t.viewChildren=[];o=hn(o,function(d){return!d.isRemoved()}),rCe(o,s);var u=nCe(e,o,s);if(u.sum===0)return t.viewChildren=[];if(u.sum=tCe(e,r,u.sum,s,o),u.sum===0)return t.viewChildren=[];for(var c=0,f=o.length;c<f;c++){var h=o[c].getValue()/u.sum*r;o[c].setLayout({area:h})}return l&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:u.dataExtent},!0),o}function tCe(t,e,r,n,i){if(!n)return r;for(var a=t.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i[n==="asc"?o-l-1:l].getValue();u/r*e<a&&(s=l,r-=u)}return n==="asc"?i.splice(0,o-s):i.splice(s,o-s),r}function rCe(t,e){return e&&t.sort(function(r,n){var i=e==="asc"?r.getValue()-n.getValue():n.getValue()-r.getValue();return i===0?e==="asc"?r.dataIndex-n.dataIndex:n.dataIndex-r.dataIndex:i}),t}function nCe(t,e,r){for(var n=0,i=0,a=e.length;i<a;i++)n+=e[i].getValue();var o=t.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&r?(s=[e[e.length-1].getValue(),e[0].getValue()],r==="asc"&&s.reverse()):(s=[1/0,-1/0],vI(e,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:n,dataExtent:s}}function iCe(t,e,r){for(var n=0,i=1/0,a=0,o=void 0,s=t.length;a<s;a++)o=t[a].getLayout().area,o&&(o<i&&(i=o),o>n&&(n=o));var l=t.area*t.area,u=e*e*r;return l?k_(u*n/l,l/(u*i)):1/0}function xG(t,e,r,n,i){var a=e===r.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=r[s[a]],c=e?t.area/e:0;(i||c>r[l[o]])&&(c=r[l[o]]);for(var f=0,h=t.length;f<h;f++){var d=t[f],p={},v=c?d.getLayout().area/c:0,g=p[l[o]]=k_(c-2*n,0),m=r[s[a]]+r[l[a]]-u,x=f===h-1||m<v?m:v,S=p[l[a]]=k_(x-2*n,0);p[s[o]]=r[s[o]]+Xw(n,g/2),p[s[a]]=u+Xw(n,S/2),u+=x,d.setLayout(p,!0)}r[s[o]]+=c,r[l[o]]-=c}function aCe(t,e,r,n,i){var a=(e||{}).node,o=[n,i];if(!a||a===r)return o;for(var s,l=n*i,u=l*t.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,f=s.children,h=0,d=f.length;h<d;h++)c+=f[h].getValue();var p=a.getValue();if(p===0)return o;u*=c/p;var v=s.getModel(),g=v.get(Ste),m=Math.max(g,Tte(v));u+=4*g*g+(3*g+m)*Math.pow(u,.5),u>Hk&&(u=Hk),a=s}u<l&&(u=l);var x=Math.pow(u/l,.5);return[n*x,i*x]}function oCe(t,e,r){if(e)return{x:e.x,y:e.y};var n={x:0,y:0};if(!r)return n;var i=r.node,a=i.getLayout();if(!a)return n;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}function wte(t,e,r,n,i){var a=t.getLayout(),o=r[i],s=o&&o===t;if(!(o&&!s||i===r.length&&t!==n)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new sr(e.x-a.x,e.y-a.y,e.width,e.height);vI(t.viewChildren||[],function(u){wte(u,l,r,n,i+1)})}}function Tte(t){return t.get(Z4e)?t.get(J4e):0}function sCe(t){t.registerSeriesModel(P4e),t.registerChartView(V4e),t.registerVisual($4e),t.registerLayout(Q4e),R4e(t)}function lCe(t){var e=t.findComponents({mainType:"legend"});!e||!e.length||t.eachSeriesByType("graph",function(r){var n=r.getCategoriesData(),i=r.getGraph(),a=i.data,o=n.mapArray(n.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){Ur(u)&&(u=o[u]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(u))return!1}return!0})})}function uCe(t){var e={};t.eachSeriesByType("graph",function(r){var n=r.getCategoriesData(),i=r.getData(),a={};n.each(function(o){var s=n.getName(o);a["ec-"+s]=o;var l=n.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=r.getColorFromPalette(s,e)),n.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++){var h=l.getShallow(c[f],!0);h!=null&&n.setItemVisual(o,c[f],h)}}),n.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){ft(l)&&(l=a["ec-"+l]);var u=n.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(o,"style");Ae(c,u);for(var f=["symbol","symbolSize","symbolKeepAspect"],h=0;h<f.length;h++)i.setItemVisual(o,f[h],n.getItemVisual(l,f[h]))}})})}function ib(t){return t instanceof Array||(t=[t,t]),t}function cCe(t){t.eachSeriesByType("graph",function(e){var r=e.getGraph(),n=e.getEdgeData(),i=ib(e.get("edgeSymbol")),a=ib(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",a&&a[0]),n.setVisual("toSymbolSize",a&&a[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each(function(o){var s=n.getItemModel(o),l=r.getEdgeByIndex(o),u=ib(s.getShallow("symbol",!0)),c=ib(s.getShallow("symbolSize",!0)),f=s.getModel("lineStyle").getLineStyle(),h=n.ensureUniqueItemVisual(o,"style");switch(Ae(h,f),h.stroke){case"source":{var d=l.node1.getVisual("style");h.stroke=d&&d.fill;break}case"target":{var d=l.node2.getVisual("style");h.stroke=d&&d.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var UR="-->",_4=function(t){return t.get("autoCurveness")||null},Cte=function(t,e){var r=_4(t),n=20,i=[];if(Ur(r))n=r;else if(De(r)){t.__curvenessList=r;return}e>n&&(n=e);var a=n%2?n+2:n+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));t.__curvenessList=i},F_=function(t,e,r){var n=[t.id,t.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[r.uid,n,i].join(UR)},Ete=function(t){var e=t.split(UR);return[e[0],e[2],e[1]].join(UR)},fCe=function(t,e){var r=F_(t.node1,t.node2,e);return e.__edgeMap[r]},hCe=function(t,e){var r=VR(F_(t.node1,t.node2,e),e),n=VR(F_(t.node2,t.node1,e),e);return r+n},VR=function(t,e){var r=e.__edgeMap;return r[t]?r[t].length:0};function dCe(t){_4(t)&&(t.__curvenessList=[],t.__edgeMap={},Cte(t))}function pCe(t,e,r,n){if(_4(r)){var i=F_(t,e,r),a=r.__edgeMap,o=a[Ete(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(n)}}function gI(t,e,r,n){var i=_4(e),a=De(i);if(!i)return null;var o=fCe(t,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===r){s=l;break}var u=hCe(t,e);Cte(e,u),t.lineStyle=t.lineStyle||{};var c=F_(t.node1,t.node2,e),f=e.__curvenessList,h=a||u%2?0:1;if(o.isForward)return f[h+s];var d=Ete(c),p=VR(d,e),v=f[s+p+h];return n?a?i&&i[0]===0?(p+h)%2?v:-v:((p%2?0:1)+h)%2?v:-v:(p+h)%2?v:-v:f[s+p+h]}function Ate(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view")){var r=t.getGraph();r.eachNode(function(n){var i=n.getModel();n.setLayout([+i.get("x"),+i.get("y")])}),mI(r,t)}}function mI(t,e){t.eachEdge(function(r,n){var i=Eu(r.getModel().get(["lineStyle","curveness"]),-gI(r,e,n,!0),0),a=Cc(r.node1.getLayout()),o=Cc(r.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),r.setLayout(s)})}function vCe(t,e){t.eachSeriesByType("graph",function(r){var n=r.get("layout"),i=r.coordinateSystem;if(i&&i.type!=="view"){var a=r.getData(),o=[];G(i.dimensions,function(h){o=o.concat(a.mapDimensionsAll(h))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var f=a.get(o[c],s);isNaN(f)||(u=!0),l.push(f)}u?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}mI(a.graph,r)}else(!n||n==="none")&&Ate(r)})}function y1(t){var e=t.coordinateSystem;if(e.type!=="view")return 1;var r=t.option.nodeScaleRatio,n=e.scaleX,i=e.getZoom(),a=(i-1)*r+1;return a/n}function _1(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var SG=Math.PI,YM=[];function yI(t,e,r,n){var i=t.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=t.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,f=o.count();if(o.setLayout({cx:l,cy:u}),!!f){if(r){var h=i.pointToData(n),d=h[0],p=h[1],v=[d-l,p-u];Wm(v,v),s3(v,v,c),r.setLayout([l+v[0],u+v[1]],!0);var g=t.get(["circular","rotateLabel"]);Mte(r,g,l,u)}gCe[e](t,s,o,c,l,u,f),s.eachEdge(function(m,x){var S=Eu(m.getModel().get(["lineStyle","curveness"]),gI(m,t,x),0),b=Cc(m.node1.getLayout()),T=Cc(m.node2.getLayout()),w,E=(b[0]+T[0])/2,M=(b[1]+T[1])/2;+S&&(S*=3,w=[l*S+E*(1-S),u*S+M*(1-S)]),m.setLayout([b,T,w])})}}}var gCe={value:function(t,e,r,n,i,a,o){var s=0,l=r.getSum("value"),u=Math.PI*2/(l||o);e.eachNode(function(c){var f=c.getValue("value"),h=u*(l?f:1)/2;s+=h,c.setLayout([n*Math.cos(s)+i,n*Math.sin(s)+a]),s+=h})},symbolSize:function(t,e,r,n,i,a,o){var s=0;YM.length=o;var l=y1(t);e.eachNode(function(f){var h=_1(f);isNaN(h)&&(h=2),h<0&&(h=0),h*=l;var d=Math.asin(h/2/n);isNaN(d)&&(d=SG/2),YM[f.dataIndex]=d,s+=d*2});var u=(2*SG-s)/o/2,c=0;e.eachNode(function(f){var h=u+YM[f.dataIndex];c+=h,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([n*Math.cos(c)+i,n*Math.sin(c)+a]),c+=h})}};function Mte(t,e,r,n){var i=t.getGraphicEl();if(i){var a=t.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=t.getLayout(),u=Math.atan2(l[1]-n,l[0]-r);u<0&&(u=Math.PI*2+u);var c=l[0]<r;c&&(u=u-Math.PI);var f=c?"left":"right";s.setTextConfig({rotation:-u,position:f,origin:"center"});var h=s.ensureState("emphasis");Ae(h.textConfig||(h.textConfig={}),{position:f})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function mCe(t){t.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&yI(e,"symbolSize")})}var qv=Y9;function yCe(t,e,r){for(var n=t,i=e,a=r.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=r.gravity==null?.1:r.gravity,c=0;c<n.length;c++){var f=n[c];f.p||(f.p=Bp(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),f.pp=Cc(f.p),f.edges=null}var h=r.friction==null?.6:r.friction,d=h,p,v;return{warmUp:function(){d=h*.8},setFixed:function(g){n[g].fixed=!0},setUnfixed:function(g){n[g].fixed=!1},beforeStep:function(g){p=g},afterStep:function(g){v=g},step:function(g){p&&p(n,i);for(var m=[],x=n.length,S=0;S<i.length;S++){var b=i[S];if(!b.ignoreForceLayout){var T=b.n1,w=b.n2;Xd(m,w.p,T.p);var E=q9(m)-b.d,M=w.w/(T.w+w.w);isNaN(M)&&(M=0),Wm(m,m),!T.fixed&&qv(T.p,T.p,m,M*E*d),!w.fixed&&qv(w.p,w.p,m,-(1-M)*E*d)}}for(var S=0;S<x;S++){var A=n[S];A.fixed||(Xd(m,l,A.p),qv(A.p,A.p,m,u*d))}for(var S=0;S<x;S++)for(var T=n[S],R=S+1;R<x;R++){var w=n[R];Xd(m,w.p,T.p);var E=q9(m);E===0&&(tue(m,Math.random()-.5,Math.random()-.5),E=1);var L=(T.rep+w.rep)/E/E;!T.fixed&&qv(T.pp,T.pp,m,L),!w.fixed&&qv(w.pp,w.pp,m,-L)}for(var I=[],S=0;S<x;S++){var A=n[S];A.fixed||(Xd(I,A.p,A.pp),qv(A.p,A.p,I,d),uo(A.pp,A.p))}d=d*.992;var N=d<.01;v&&v(n,i,N),g&&g(N)}}}function _Ce(t){t.eachSeriesByType("graph",function(e){var r=e.coordinateSystem;if(!(r&&r.type!=="view"))if(e.get("layout")==="force"){var n=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(S){var b=a.getId(S);a.setItemLayout(S,n[b]||[NaN,NaN])}):!l||l==="none"?Ate(e):l==="circular"&&yI(e,"value");var u=a.getDataExtent("value"),c=o.getDataExtent("value"),f=s.get("repulsion"),h=s.get("edgeLength"),d=De(f)?f:[f,f],p=De(h)?h:[h,h];p=[p[1],p[0]];var v=a.mapArray("value",function(S,b){var T=a.getItemLayout(b),w=rn(S,u,d);return isNaN(w)&&(w=(d[0]+d[1])/2),{w,rep:w,fixed:a.getItemModel(b).get("fixed"),p:!T||isNaN(T[0])||isNaN(T[1])?null:T}}),g=o.mapArray("value",function(S,b){var T=i.getEdgeByIndex(b),w=rn(S,c,p);isNaN(w)&&(w=(p[0]+p[1])/2);var E=T.getModel(),M=Eu(T.getModel().get(["lineStyle","curveness"]),-gI(T,e,b,!0),0);return{n1:v[T.node1.dataIndex],n2:v[T.node2.dataIndex],d:w,curveness:M,ignoreForceLayout:E.get("ignoreForceLayout")}}),m=r.getBoundingRect(),x=yCe(v,g,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});x.beforeStep(function(S,b){for(var T=0,w=S.length;T<w;T++)S[T].fixed&&uo(S[T].p,i.getNodeByIndex(T).getLayout())}),x.afterStep(function(S,b,T){for(var w=0,E=S.length;w<E;w++)S[w].fixed||i.getNodeByIndex(w).setLayout(S[w].p),n[a.getId(w)]=S[w].p;for(var w=0,E=b.length;w<E;w++){var M=b[w],A=i.getEdgeByIndex(w),R=M.n1.p,L=M.n2.p,I=A.getLayout();I=I?I.slice():[],I[0]=I[0]||[],I[1]=I[1]||[],uo(I[0],R),uo(I[1],L),+M.curveness&&(I[2]=[(R[0]+L[0])/2-(R[1]-L[1])*M.curveness,(R[1]+L[1])/2-(L[0]-R[0])*M.curveness]),A.setLayout(I)}}),e.forceLayout=x,e.preservedPoints=n,x.step()}else e.forceLayout=null})}function xCe(t,e,r){var n=Ae(t.getBoxLayoutParams(),{aspect:r});return ri(n,{width:e.getWidth(),height:e.getHeight()})}function SCe(t,e){var r=[];return t.eachSeriesByType("graph",function(n){var i=n.get("coordinateSystem");if(!i||i==="view"){var a=n.getData(),o=a.mapArray(function(g){var m=a.getItemModel(g);return[+m.get("x"),+m.get("y")]}),s=[],l=[];kT(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=xCe(n,e,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var f=l[0]-s[0],h=l[1]-s[1],d=c.width,p=c.height,v=n.coordinateSystem=new T2;v.zoomLimit=n.get("scaleLimit"),v.setBoundingRect(s[0],s[1],f,h),v.setViewRect(c.x,c.y,d,p),v.setCenter(n.get("center"),e),v.setZoom(n.get("zoom")),r.push(v)}}),r}var qM=[],ZM=[],JM=[],Zv=pa,QM=lp,bG=Math.abs;function wG(t,e,r){for(var n=t[0],i=t[1],a=t[2],o=1/0,s,l=r*r,u=.1,c=.1;c<=.9;c+=.1){qM[0]=Zv(n[0],i[0],a[0],c),qM[1]=Zv(n[1],i[1],a[1],c);var f=bG(QM(qM,e)-l);f<o&&(o=f,s=c)}for(var h=0;h<32;h++){var d=s+u;ZM[0]=Zv(n[0],i[0],a[0],s),ZM[1]=Zv(n[1],i[1],a[1],s),JM[0]=Zv(n[0],i[0],a[0],d),JM[1]=Zv(n[1],i[1],a[1],d);var f=QM(ZM,e)-l;if(bG(f)<.01)break;var p=QM(JM,e)-l;u/=2,f<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function e5(t,e){var r=[],n=t_,i=[[],[],[]],a=[[],[]],o=[];e/=2,t.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),f=s.getVisual("toSymbol");u.__original||(u.__original=[Cc(u[0]),Cc(u[1])],u[2]&&u.__original.push(Cc(u[2])));var h=u.__original;if(u[2]!=null){if(uo(i[0],h[0]),uo(i[1],h[2]),uo(i[2],h[1]),c&&c!=="none"){var d=_1(s.node1),p=wG(i,h[0],d*e);n(i[0][0],i[1][0],i[2][0],p,r),i[0][0]=r[3],i[1][0]=r[4],n(i[0][1],i[1][1],i[2][1],p,r),i[0][1]=r[3],i[1][1]=r[4]}if(f&&f!=="none"){var d=_1(s.node2),p=wG(i,h[1],d*e);n(i[0][0],i[1][0],i[2][0],p,r),i[1][0]=r[1],i[2][0]=r[2],n(i[0][1],i[1][1],i[2][1],p,r),i[1][1]=r[1],i[2][1]=r[2]}uo(u[0],i[0]),uo(u[1],i[2]),uo(u[2],i[1])}else{if(uo(a[0],h[0]),uo(a[1],h[1]),Xd(o,a[1],a[0]),Wm(o,o),c&&c!=="none"){var d=_1(s.node1);Y9(a[0],a[0],o,d*e)}if(f&&f!=="none"){var d=_1(s.node2);Y9(a[1],a[1],o,-d*e)}uo(u[0],a[0]),uo(u[1],a[1])}})}function TG(t){return t.type==="view"}var bCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r,n){var i=new A2,a=new lI,o=this.group;this._controller=new C2(n.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(r,n,i){var a=this,o=r.coordinateSystem;this._model=r;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(TG(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):Xr(u,c,r)}e5(r.getGraph(),y1(r));var f=r.getData();s.updateData(f);var h=r.getEdgeData();l.updateData(h),this._updateNodeAndLinkScale(),this._updateController(r,n,i),clearTimeout(this._layoutTimeout);var d=r.forceLayout,p=r.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,p);var v=r.get("layout");f.graph.eachNode(function(S){var b=S.dataIndex,T=S.getGraphicEl(),w=S.getModel();if(T){T.off("drag").off("dragend");var E=w.get("draggable");E&&T.on("drag",function(A){switch(v){case"force":d.warmUp(),!a._layouting&&a._startForceLayoutIteration(d,p),d.setFixed(b),f.setItemLayout(b,[T.x,T.y]);break;case"circular":f.setItemLayout(b,[T.x,T.y]),S.setLayout({fixed:!0},!0),yI(r,"symbolSize",S,[A.offsetX,A.offsetY]),a.updateLayout(r);break;case"none":default:f.setItemLayout(b,[T.x,T.y]),mI(r.getGraph(),r),a.updateLayout(r);break}}).on("dragend",function(){d&&d.setUnfixed(b)}),T.setDraggable(E,!!w.get("cursor"));var M=w.get(["emphasis","focus"]);M==="adjacency"&&(Ht(T).focus=S.getAdjacentDataIndices())}}),f.graph.eachEdge(function(S){var b=S.getGraphicEl(),T=S.getModel().get(["emphasis","focus"]);b&&T==="adjacency"&&(Ht(b).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var g=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),m=f.getLayout("cx"),x=f.getLayout("cy");f.graph.eachNode(function(S){Mte(S,g,m,x)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(r,n){var i=this;(function a(){r.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(n?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(r,n,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!p4(u,i,r)}),!TG(r.coordinateSystem)){o.disable();return}o.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){UD(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){VD(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),e5(r.getGraph(),y1(r)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var r=this._model,n=r.getData(),i=y1(r);n.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(r){e5(r.getGraph(),y1(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Or);function Jv(t){return"_EC_"+t}var Rte=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,r){e=e==null?""+r:""+e;var n=this._nodesMap;if(!n[Jv(e)]){var i=new Fd(e,r);return i.hostGraph=this,this.nodes.push(i),n[Jv(e)]=i,i}},t.prototype.getNodeByIndex=function(e){var r=this.data.getRawIndex(e);return this.nodes[r]},t.prototype.getNodeById=function(e){return this._nodesMap[Jv(e)]},t.prototype.addEdge=function(e,r,n){var i=this._nodesMap,a=this._edgesMap;if(Ur(e)&&(e=this.nodes[e]),Ur(r)&&(r=this.nodes[r]),e instanceof Fd||(e=i[Jv(e)]),r instanceof Fd||(r=i[Jv(r)]),!(!e||!r)){var o=e.id+"-"+r.id,s=new Pte(e,r,n);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),r.inEdges.push(s)),e.edges.push(s),e!==r&&r.edges.push(s),this.edges.push(s),a[o]=s,s}},t.prototype.getEdgeByIndex=function(e){var r=this.edgeData.getRawIndex(e);return this.edges[r]},t.prototype.getEdge=function(e,r){e instanceof Fd&&(e=e.id),r instanceof Fd&&(r=r.id);var n=this._edgesMap;return this._directed?n[e+"-"+r]:n[e+"-"+r]||n[r+"-"+e]},t.prototype.eachNode=function(e,r){for(var n=this.nodes,i=n.length,a=0;a<i;a++)n[a].dataIndex>=0&&e.call(r,n[a],a)},t.prototype.eachEdge=function(e,r){for(var n=this.edges,i=n.length,a=0;a<i;a++)n[a].dataIndex>=0&&n[a].node1.dataIndex>=0&&n[a].node2.dataIndex>=0&&e.call(r,n[a],a)},t.prototype.breadthFirstTraverse=function(e,r,n,i){if(r instanceof Fd||(r=this._nodesMap[Jv(r)]),!!r){for(var a=n==="out"?"outEdges":n==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,r,null))for(var s=[r];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var c=u[o],f=c.node1===l?c.node2:c.node1;if(!f.__visited){if(e.call(i,f,l))return;s.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,r=this.edgeData,n=this.nodes,i=this.edges,a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)n[e.getRawIndex(a)].dataIndex=a;r.filterSelf(function(s){var l=i[r.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=r.count();a<o;a++)i[r.getRawIndex(a)].dataIndex=a},t.prototype.clone=function(){for(var e=new t(this._directed),r=this.nodes,n=this.edges,i=0;i<r.length;i++)e.addNode(r[i].id,r[i].dataIndex);for(var i=0;i<n.length;i++){var a=n[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},t}(),Fd=function(){function t(e,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e==null?"":e,this.dataIndex=r==null?-1:r}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var r=this.hostGraph,n=r.data.getItemModel(this.dataIndex);return n.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},r=0;r<this.edges.length;r++){var n=this.edges[r];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=Tt(),r=Tt(),n=0;n<this.edges.length;n++){var i=this.edges[n];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,r.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)e.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,r.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)e.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:e.keys(),node:r.keys()}},t}(),Pte=function(){function t(e,r,n){this.dataIndex=-1,this.node1=e,this.node2=r,this.dataIndex=n==null?-1:n}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var r=this.hostGraph,n=r.edgeData.getItemModel(this.dataIndex);return n.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=Tt(),r=Tt();e.set(this.dataIndex,!0);for(var n=[this.node1],i=[this.node2],a=0;a<n.length;){var o=n[a];a++,r.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),n.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,r.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:r.keys()}},t}();function Lte(t,e){return{getValue:function(r){var n=this[t][e];return n.getStore().get(n.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,n){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,r,n)},getVisual:function(r){return this[t][e].getItemVisual(this.dataIndex,r)},setLayout:function(r,n){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,r,n)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}mi(Fd,Lte("hostGraph","data"));mi(Pte,Lte("hostGraph","edgeData"));function Dte(t,e,r,n,i){for(var a=new Rte(n),o=0;o<t.length;o++)a.addNode(ma(t[o].id,t[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<e.length;o++){var c=e[o],f=c.source,h=c.target;a.addEdge(f,h,u)&&(l.push(c),s.push(ma(Fi(c.id,null),f+" > "+h)),u++)}var d=r.get("coordinateSystem"),p;if(d==="cartesian2d"||d==="polar")p=Vu(t,r);else{var v=r0.get(d),g=v?v.dimensions||[]:[];hr(g,"value")<0&&g.concat(["value"]);var m=o0(t,{coordDimensions:g,encodeDefine:r.getEncode()}).dimensions;p=new Kn(m,r),p.initData(t)}var x=new Kn(["value"],r);return x.initData(l,s),i&&i(p,x),fI({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:x},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var wCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r}return e.prototype.init=function(r){t.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new L2(i,i),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},e.prototype.mergeOption=function(r){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(r){t.prototype.mergeDefaultAndTheme.apply(this,arguments),bp(r,"edgeLabel",["show"])},e.prototype.getInitialData=function(r,n){var i=r.edges||r.links||[],a=r.data||r.nodes||[],o=this;if(a&&i){dCe(this);var s=Dte(a,i,this,!0,l);return G(s.edges,function(u){pCe(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var v=o._categoriesModels,g=p.getShallow("category"),m=v[g];return m&&(m.parentModel=p.parentModel,p.parentModel=m),p});var f=Br.prototype.getModel;function h(p,v){var g=f.call(this,p,v);return g.resolveParentPath=d,g}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=d,p.getModel=h,p});function d(p){if(p&&(p[0]==="label"||p[1]==="label")){var v=p.slice();return p[0]==="label"?v[0]="edgeLabel":p[1]==="label"&&(v[1]="edgeLabel"),v}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(r,n,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(r,i),s=a.graph.getEdgeByIndex(r),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),ea("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var f=Wq({series:this,dataIndex:r,multipleSeries:n});return f},e.prototype._updateCategoriesData=function(){var r=Oe(this.option.categories||[],function(i){return i.value!=null?i:Ae({value:0},i)}),n=new Kn(["value"],this);n.initData(r),this._categoriesData=n,this._categoriesModels=n.mapArray(function(i){return n.getItemModel(i)})},e.prototype.setZoom=function(r){this.option.zoom=r},e.prototype.setCenter=function(r){this.option.center=r},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Vr),TCe={type:"graphRoam",event:"graphRoam",update:"none"};function CCe(t){t.registerChartView(bCe),t.registerSeriesModel(wCe),t.registerProcessor(lCe),t.registerVisual(uCe),t.registerVisual(cCe),t.registerLayout(vCe),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,mCe),t.registerLayout(_Ce),t.registerCoordinateSystem("graphView",{dimensions:T2.dimensions,create:SCe}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},pi),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},pi),t.registerAction(TCe,function(e,r,n){r.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=BD(a,e,void 0,n);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var ECe=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),ACe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="pointer",n}return e.prototype.getDefaultShape=function(){return new ECe},e.prototype.buildPath=function(r,n){var i=Math.cos,a=Math.sin,o=n.r,s=n.width,l=n.angle,u=n.x-i(l)*s*(s>=o/3?1:2),c=n.y-a(l)*s*(s>=o/3?1:2);l=n.angle-Math.PI/2,r.moveTo(u,c),r.lineTo(n.x+i(l)*s,n.y+a(l)*s),r.lineTo(n.x+i(n.angle)*o,n.y+a(n.angle)*o),r.lineTo(n.x-i(l)*s,n.y-a(l)*s),r.lineTo(u,c)},e}(yr);function MCe(t,e){var r=t.get("center"),n=e.getWidth(),i=e.getHeight(),a=Math.min(n,i),o=Ze(r[0],e.getWidth()),s=Ze(r[1],e.getHeight()),l=Ze(t.get("radius"),a/2);return{cx:o,cy:s,r:l}}function ab(t,e){var r=t==null?"":t+"";return e&&(ft(e)?r=e.replace("{value}",r):Lt(e)&&(r=e(t))),r}var RCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){this.group.removeAll();var a=r.get(["axisLine","lineStyle","color"]),o=MCe(r,i);this._renderMain(r,n,i,a,o),this._data=r.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(r,n,i,a,o){var s=this.group,l=r.get("clockwise"),u=-r.get("startAngle")/180*Math.PI,c=-r.get("endAngle")/180*Math.PI,f=r.getModel("axisLine"),h=f.get("roundCap"),d=h?$w:wo,p=f.get("show"),v=f.getModel("lineStyle"),g=v.get("width"),m=[u,c];gL(m,!l),u=m[0],c=m[1];for(var x=c-u,S=u,b=[],T=0;p&&T<a.length;T++){var w=Math.min(Math.max(a[T][0],0),1);c=u+x*w;var E=new d({shape:{startAngle:S,endAngle:c,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-g,r:o.r},silent:!0});E.setStyle({fill:a[T][1]}),E.setStyle(v.getLineStyle(["color","width"])),b.push(E),S=c}b.reverse(),G(b,function(A){return s.add(A)});var M=function(A){if(A<=0)return a[0][1];var R;for(R=0;R<a.length;R++)if(a[R][0]>=A&&(R===0?0:a[R-1][0])<A)return a[R][1];return a[R-1][1]};this._renderTicks(r,n,i,M,o,u,c,l,g),this._renderTitleAndDetail(r,n,i,M,o),this._renderAnchor(r,o),this._renderPointer(r,n,i,M,o,u,c,l,g)},e.prototype._renderTicks=function(r,n,i,a,o,s,l,u,c){for(var f=this.group,h=o.cx,d=o.cy,p=o.r,v=+r.get("min"),g=+r.get("max"),m=r.getModel("splitLine"),x=r.getModel("axisTick"),S=r.getModel("axisLabel"),b=r.get("splitNumber"),T=x.get("splitNumber"),w=Ze(m.get("length"),p),E=Ze(x.get("length"),p),M=s,A=(l-s)/b,R=A/T,L=m.getModel("lineStyle").getLineStyle(),I=x.getModel("lineStyle").getLineStyle(),N=m.get("distance"),k,z,B=0;B<=b;B++){if(k=Math.cos(M),z=Math.sin(M),m.get("show")){var V=N?N+c:c,F=new ji({shape:{x1:k*(p-V)+h,y1:z*(p-V)+d,x2:k*(p-w-V)+h,y2:z*(p-w-V)+d},style:L,silent:!0});L.stroke==="auto"&&F.setStyle({stroke:a(B/b)}),f.add(F)}if(S.get("show")){var V=S.get("distance")+N,$=ab(kn(B/b*(g-v)+v),S.get("formatter")),W=a(B/b),H=k*(p-w-V)+h,X=z*(p-w-V)+d,te=S.get("rotate"),Y=0;te==="radial"?(Y=-M+2*Math.PI,Y>Math.PI/2&&(Y+=Math.PI)):te==="tangential"?Y=-M-Math.PI/2:Ur(te)&&(Y=te*Math.PI/180),Y===0?f.add(new Ar({style:dn(S,{text:$,x:H,y:X,verticalAlign:z<-.8?"top":z>.8?"bottom":"middle",align:k<-.4?"left":k>.4?"right":"center"},{inheritColor:W}),silent:!0})):f.add(new Ar({style:dn(S,{text:$,x:H,y:X,verticalAlign:"middle",align:"center"},{inheritColor:W}),silent:!0,originX:H,originY:X,rotation:Y}))}if(x.get("show")&&B!==b){var V=x.get("distance");V=V?V+c:c;for(var ee=0;ee<=T;ee++){k=Math.cos(M),z=Math.sin(M);var se=new ji({shape:{x1:k*(p-V)+h,y1:z*(p-V)+d,x2:k*(p-E-V)+h,y2:z*(p-E-V)+d},silent:!0,style:I});I.stroke==="auto"&&se.setStyle({stroke:a((B+ee/T)/b)}),f.add(se),M+=R}M-=R}else M+=A}},e.prototype._renderPointer=function(r,n,i,a,o,s,l,u,c){var f=this.group,h=this._data,d=this._progressEls,p=[],v=r.get(["pointer","show"]),g=r.getModel("progress"),m=g.get("show"),x=r.getData(),S=x.mapDimension("value"),b=+r.get("min"),T=+r.get("max"),w=[b,T],E=[s,l];function M(R,L){var I=x.getItemModel(R),N=I.getModel("pointer"),k=Ze(N.get("width"),o.r),z=Ze(N.get("length"),o.r),B=r.get(["pointer","icon"]),V=N.get("offsetCenter"),F=Ze(V[0],o.r),$=Ze(V[1],o.r),W=N.get("keepAspect"),H;return B?H=vi(B,F-k/2,$-z,k,z,null,W):H=new ACe({shape:{angle:-Math.PI/2,width:k,r:z,x:F,y:$}}),H.rotation=-(L+Math.PI/2),H.x=o.cx,H.y=o.cy,H}function A(R,L){var I=g.get("roundCap"),N=I?$w:wo,k=g.get("overlap"),z=k?g.get("width"):c/x.count(),B=k?o.r-z:o.r-(R+1)*z,V=k?o.r:o.r-R*z,F=new N({shape:{startAngle:s,endAngle:L,cx:o.cx,cy:o.cy,clockwise:u,r0:B,r:V}});return k&&(F.z2=T-x.get(S,R)%T),F}(m||v)&&(x.diff(h).add(function(R){var L=x.get(S,R);if(v){var I=M(R,s);Fn(I,{rotation:-((isNaN(+L)?E[0]:rn(L,w,E,!0))+Math.PI/2)},r),f.add(I),x.setItemGraphicEl(R,I)}if(m){var N=A(R,s),k=g.get("clip");Fn(N,{shape:{endAngle:rn(L,w,E,k)}},r),f.add(N),S6(r.seriesIndex,x.dataType,R,N),p[R]=N}}).update(function(R,L){var I=x.get(S,R);if(v){var N=h.getItemGraphicEl(L),k=N?N.rotation:s,z=M(R,k);z.rotation=k,Xr(z,{rotation:-((isNaN(+I)?E[0]:rn(I,w,E,!0))+Math.PI/2)},r),f.add(z),x.setItemGraphicEl(R,z)}if(m){var B=d[L],V=B?B.shape.endAngle:s,F=A(R,V),$=g.get("clip");Xr(F,{shape:{endAngle:rn(I,w,E,$)}},r),f.add(F),S6(r.seriesIndex,x.dataType,R,F),p[R]=F}}).execute(),x.each(function(R){var L=x.getItemModel(R),I=L.getModel("emphasis"),N=I.get("focus"),k=I.get("blurScope"),z=I.get("disabled");if(v){var B=x.getItemGraphicEl(R),V=x.getItemVisual(R,"style"),F=V.fill;if(B instanceof aa){var $=B.style;B.useStyle(Ae({image:$.image,x:$.x,y:$.y,width:$.width,height:$.height},V))}else B.useStyle(V),B.type!=="pointer"&&B.setColor(F);B.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),B.style.fill==="auto"&&B.setStyle("fill",a(rn(x.get(S,R),w,[0,1],!0))),B.z2EmphasisLift=0,Oa(B,L),ti(B,N,k,z)}if(m){var W=p[R];W.useStyle(x.getItemVisual(R,"style")),W.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),W.z2EmphasisLift=0,Oa(W,L),ti(W,N,k,z)}}),this._progressEls=p)},e.prototype._renderAnchor=function(r,n){var i=r.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),u=i.get("keepAspect"),c=vi(s,n.cx-o/2+Ze(l[0],n.r),n.cy-o/2+Ze(l[1],n.r),o,o,null,u);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(r,n,i,a,o){var s=this,l=r.getData(),u=l.mapDimension("value"),c=+r.get("min"),f=+r.get("max"),h=new Vt,d=[],p=[],v=r.isAnimationEnabled(),g=r.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){d[m]=new Ar({silent:!0}),p[m]=new Ar({silent:!0})}).update(function(m,x){d[m]=s._titleEls[x],p[m]=s._detailEls[x]}).execute(),l.each(function(m){var x=l.getItemModel(m),S=l.get(u,m),b=new Vt,T=a(rn(S,[c,f],[0,1],!0)),w=x.getModel("title");if(w.get("show")){var E=w.get("offsetCenter"),M=o.cx+Ze(E[0],o.r),A=o.cy+Ze(E[1],o.r),R=d[m];R.attr({z2:g?0:2,style:dn(w,{x:M,y:A,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:T})}),b.add(R)}var L=x.getModel("detail");if(L.get("show")){var I=L.get("offsetCenter"),N=o.cx+Ze(I[0],o.r),k=o.cy+Ze(I[1],o.r),z=Ze(L.get("width"),o.r),B=Ze(L.get("height"),o.r),V=r.get(["progress","show"])?l.getItemVisual(m,"style").fill:T,R=p[m],F=L.get("formatter");R.attr({z2:g?0:2,style:dn(L,{x:N,y:k,text:ab(S,F),width:isNaN(z)?null:z,height:isNaN(B)?null:B,align:"center",verticalAlign:"middle"},{inheritColor:V})}),YY(R,{normal:L},S,function(W){return ab(W,F)}),v&&qY(R,m,l,r,{getFormattedLabel:function(W,H,X,te,Y,ee){return ab(ee?ee.interpolatedValue:S,F)}}),b.add(R)}h.add(b)}),this.group.add(h),this._titleEls=d,this._detailEls=p},e.type="gauge",e}(Or),PCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.visualStyleAccessPath="itemStyle",r}return e.prototype.getInitialData=function(r,n){return p0(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Vr);function LCe(t){t.registerChartView(RCe),t.registerSeriesModel(PCe)}var DCe=["itemStyle","opacity"],ICe=function(t){he(e,t);function e(r,n){var i=t.call(this)||this,a=i,o=new Ro,s=new Ar;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(r,n,!0),i}return e.prototype.updateData=function(r,n,i){var a=this,o=r.hostModel,s=r.getItemModel(n),l=r.getItemLayout(n),u=s.getModel("emphasis"),c=s.get(DCe);c=c==null?1:c,i||$l(a),a.useStyle(r.getItemVisual(n,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,Fn(a,{style:{opacity:c}},o,n)):Xr(a,{style:{opacity:c},shape:{points:l.points}},o,n),Oa(a,s),this._updateLabel(r,n),ti(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(r,n){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=r.hostModel,l=r.getItemModel(n),u=r.getItemLayout(n),c=u.label,f=r.getItemVisual(n,"style"),h=f.fill;ka(o,Qi(l),{labelFetcher:r.hostModel,labelDataIndex:n,defaultOpacity:f.opacity,defaultText:r.getName(n)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:h,outsideFill:h});var d=c.linePoints;a.setShape({points:d}),i.textGuideLineConfig={anchor:d?new or(d[0][0],d[0][1]):null},Xr(o,{style:{x:c.x,y:c.y}},s,n),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),oD(i,sD(l),{stroke:h})},e}(To),NCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.ignoreLabelLineUpdate=!0,r}return e.prototype.render=function(r,n,i){var a=r.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new ICe(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(a,l),s.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);l_(u,r,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Or),OCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new L2(pt(this.getData,this),pt(this.getRawData,this)),this._defaultLabelLine(r)},e.prototype.getInitialData=function(r,n){return p0(this,{coordDimensions:["value"],encodeDefaulter:Zt(NL,this)})},e.prototype._defaultLabelLine=function(r){bp(r,"labelLine",["show"]);var n=r.labelLine,i=r.emphasis.labelLine;n.show=n.show&&r.label.show,i.show=i.show&&r.emphasis.label.show},e.prototype.getDataParams=function(r){var n=this.getData(),i=t.prototype.getDataParams.call(this,r),a=n.mapDimension("value"),o=n.getSum(a);return i.percent=o?+(n.get(a,r)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Vr);function kCe(t,e){return ri(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function FCe(t,e){for(var r=t.mapDimension("value"),n=t.mapArray(r,function(l){return l}),i=[],a=e==="ascending",o=0,s=t.count();o<s;o++)i[o]=o;return Lt(e)?i.sort(e):e!=="none"&&i.sort(function(l,u){return a?n[l]-n[u]:n[u]-n[l]}),i}function BCe(t){var e=t.hostModel,r=e.get("orient");t.each(function(n){var i=t.getItemModel(n),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=t.getItemLayout(n),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",f,h,d,p;if(c)o==="insideLeft"?(h=(u[0][0]+u[3][0])/2+5,d=(u[0][1]+u[3][1])/2,f="left"):o==="insideRight"?(h=(u[1][0]+u[2][0])/2-5,d=(u[1][1]+u[2][1])/2,f="right"):(h=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,d=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,f="center"),p=[[h,d],[h,d]];else{var v=void 0,g=void 0,m=void 0,x=void 0,S=s.get("length");o==="left"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,m=v-S,h=m-5,f="right"):o==="right"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,m=v+S,h=m+5,f="left"):o==="top"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,x=g-S,d=x-5,f="center"):o==="bottom"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,x=g+S,d=x+5,f="center"):o==="rightTop"?(v=r==="horizontal"?u[3][0]:u[1][0],g=r==="horizontal"?u[3][1]:u[1][1],r==="horizontal"?(x=g-S,d=x-5,f="center"):(m=v+S,h=m+5,f="top")):o==="rightBottom"?(v=u[2][0],g=u[2][1],r==="horizontal"?(x=g+S,d=x+5,f="center"):(m=v+S,h=m+5,f="bottom")):o==="leftTop"?(v=u[0][0],g=r==="horizontal"?u[0][1]:u[1][1],r==="horizontal"?(x=g-S,d=x-5,f="center"):(m=v-S,h=m-5,f="right")):o==="leftBottom"?(v=r==="horizontal"?u[1][0]:u[3][0],g=r==="horizontal"?u[1][1]:u[2][1],r==="horizontal"?(x=g+S,d=x+5,f="center"):(m=v-S,h=m-5,f="right")):(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,r==="horizontal"?(x=g+S,d=x+5,f="center"):(m=v+S,h=m+5,f="left")),r==="horizontal"?(m=v,h=m):(x=g,d=x),p=[[v,g],[m,x]]}l.label={linePoints:p,x:h,y:d,verticalAlign:"middle",textAlign:f,inside:c}})}function zCe(t,e){t.eachSeriesByType("funnel",function(r){var n=r.getData(),i=n.mapDimension("value"),a=r.get("sort"),o=kCe(r,e),s=r.get("orient"),l=o.width,u=o.height,c=FCe(n,a),f=o.x,h=o.y,d=s==="horizontal"?[Ze(r.get("minSize"),u),Ze(r.get("maxSize"),u)]:[Ze(r.get("minSize"),l),Ze(r.get("maxSize"),l)],p=n.getDataExtent(i),v=r.get("min"),g=r.get("max");v==null&&(v=Math.min(p[0],0)),g==null&&(g=p[1]);var m=r.get("funnelAlign"),x=r.get("gap"),S=s==="horizontal"?l:u,b=(S-x*(n.count()-1))/n.count(),T=function(k,z){if(s==="horizontal"){var B=n.get(i,k)||0,V=rn(B,[v,g],d,!0),F=void 0;switch(m){case"top":F=h;break;case"center":F=h+(u-V)/2;break;case"bottom":F=h+(u-V);break}return[[z,F],[z,F+V]]}var $=n.get(i,k)||0,W=rn($,[v,g],d,!0),H;switch(m){case"left":H=f;break;case"center":H=f+(l-W)/2;break;case"right":H=f+l-W;break}return[[H,z],[H+W,z]]};a==="ascending"&&(b=-b,x=-x,s==="horizontal"?f+=l:h+=u,c=c.reverse());for(var w=0;w<c.length;w++){var E=c[w],M=c[w+1],A=n.getItemModel(E);if(s==="horizontal"){var R=A.get(["itemStyle","width"]);R==null?R=b:(R=Ze(R,l),a==="ascending"&&(R=-R));var L=T(E,f),I=T(M,f+R);f+=R+x,n.setItemLayout(E,{points:L.concat(I.slice().reverse())})}else{var N=A.get(["itemStyle","height"]);N==null?N=b:(N=Ze(N,u),a==="ascending"&&(N=-N));var L=T(E,h),I=T(M,h+N);h+=N+x,n.setItemLayout(E,{points:L.concat(I.slice().reverse())})}}BCe(n)})}function UCe(t){t.registerChartView(NCe),t.registerSeriesModel(OCe),t.registerLayout(zCe),t.registerProcessor(P2("funnel"))}var VCe=.3,HCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._dataGroup=new Vt,r._initialized=!1,r}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(r,n,i,a){this._progressiveEls=null;var o=this._dataGroup,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.dimensions,f=EG(r);s.diff(l).add(h).update(d).remove(p).execute();function h(g){var m=CG(s,o,g,c,u);t5(m,s,g,f)}function d(g,m){var x=l.getItemGraphicEl(m),S=Ite(s,g,c,u);s.setItemGraphicEl(g,x),Xr(x,{shape:{points:S}},r,g),$l(x),t5(x,s,g,f)}function p(g){var m=l.getItemGraphicEl(g);o.remove(m)}if(!this._initialized){this._initialized=!0;var v=GCe(u,r,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},e.prototype.incrementalPrepareRender=function(r,n,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(r,n,i){for(var a=n.getData(),o=n.coordinateSystem,s=o.dimensions,l=EG(n),u=this._progressiveEls=[],c=r.start;c<r.end;c++){var f=CG(a,this._dataGroup,c,s,o);f.incremental=!0,t5(f,a,c,l),u.push(f)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Or);function GCe(t,e,r){var n=t.model,i=t.getRect(),a=new Mr({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=n.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Fn(a,{shape:{width:i.width,height:i.height}},e,r),a}function Ite(t,e,r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a],s=t.get(t.mapDimension(o),e);WCe(s,n.getAxis(o).type)||i.push(n.dataToPoint(s,o))}return i}function CG(t,e,r,n,i){var a=Ite(t,r,n,i),o=new Ro({shape:{points:a},z2:10});return e.add(o),t.setItemGraphicEl(r,o),o}function EG(t){var e=t.get("smooth",!0);return e===!0&&(e=VCe),e=Oc(e),e_(e)&&(e=0),{smooth:e}}function t5(t,e,r,n){t.useStyle(e.getItemVisual(r,"style")),t.style.fill=null,t.setShape("smooth",n.smooth);var i=e.getItemModel(r),a=i.getModel("emphasis");Oa(t,i,"lineStyle"),ti(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function WCe(t,e){return e==="category"?t==null:t==null||isNaN(t)}var $Ce=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return e.prototype.getInitialData=function(r,n){return Vu(null,this,{useEncodeDefaulter:pt(jCe,null,this)})},e.prototype.getRawIndicesByActiveState=function(r){var n=this.coordinateSystem,i=this.getData(),a=[];return n.eachActiveState(i,function(o,s){r===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Vr);function jCe(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var r={};return G(e.dimensions,function(n){var i=XCe(n);r[n]=i}),r}}function XCe(t){return+t.replace("dim","")}var KCe=["lineStyle","opacity"],YCe={seriesType:"parallel",reset:function(t,e){var r=t.coordinateSystem,n={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(i,a){r.eachActiveState(a,function(o,s){var l=n[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(KCe,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(s,"style");c.opacity=l},i.start,i.end)}}}};function qCe(t){Ot(pee),t.registerChartView(HCe),t.registerSeriesModel($Ce),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,YCe)}var ZCe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),JCe=function(t){he(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getDefaultShape=function(){return new ZCe},e.prototype.buildPath=function(r,n){var i=n.extent;r.moveTo(n.x1,n.y1),r.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(r.lineTo(n.x2+i,n.y2),r.bezierCurveTo(n.cpx2+i,n.cpy2,n.cpx1+i,n.cpy1,n.x1+i,n.y1)):(r.lineTo(n.x2,n.y2+i),r.bezierCurveTo(n.cpx2,n.cpy2+i,n.cpx1,n.cpy1+i,n.x1,n.y1+i)),r.closePath()},e.prototype.highlight=function(){kc(this)},e.prototype.downplay=function(){Fc(this)},e}(yr),QCe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._focusAdjacencyDisabled=!1,r}return e.prototype.render=function(r,n,i){var a=this,o=r.getGraph(),s=this.group,l=r.layoutInfo,u=l.width,c=l.height,f=r.getData(),h=r.getData("edge"),d=r.get("orient");this._model=r,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var v=new JCe,g=Ht(v);g.dataIndex=p.dataIndex,g.seriesIndex=r.seriesIndex,g.dataType="edge";var m=p.getModel(),x=m.getModel("lineStyle"),S=x.get("curveness"),b=p.node1.getLayout(),T=p.node1.getModel(),w=T.get("localX"),E=T.get("localY"),M=p.node2.getLayout(),A=p.node2.getModel(),R=A.get("localX"),L=A.get("localY"),I=p.getLayout(),N,k,z,B,V,F,$,W;v.shape.extent=Math.max(1,I.dy),v.shape.orient=d,d==="vertical"?(N=(w!=null?w*u:b.x)+I.sy,k=(E!=null?E*c:b.y)+b.dy,z=(R!=null?R*u:M.x)+I.ty,B=L!=null?L*c:M.y,V=N,F=k*(1-S)+B*S,$=z,W=k*S+B*(1-S)):(N=(w!=null?w*u:b.x)+b.dx,k=(E!=null?E*c:b.y)+I.sy,z=R!=null?R*u:M.x,B=(L!=null?L*c:M.y)+I.ty,V=N*(1-S)+z*S,F=k,$=N*S+z*(1-S),W=B),v.setShape({x1:N,y1:k,x2:z,y2:B,cpx1:V,cpy1:F,cpx2:$,cpy2:W}),v.useStyle(x.getItemStyle()),AG(v.style,d,p);var H=""+m.get("value"),X=Qi(m,"edgeLabel");ka(v,X,{labelFetcher:{getFormattedLabel:function(ee,se,ne,le,pe,Se){return r.getFormattedLabel(ee,se,"edge",le,Eu(pe,X.normal&&X.normal.get("formatter"),H),Se)}},labelDataIndex:p.dataIndex,defaultText:H}),v.setTextConfig({position:"inside"});var te=m.getModel("emphasis");Oa(v,m,"lineStyle",function(ee){var se=ee.getItemStyle();return AG(se,d,p),se}),s.add(v),h.setItemGraphicEl(p.dataIndex,v);var Y=te.get("focus");ti(v,Y==="adjacency"?p.getAdjacentDataIndices():Y==="trajectory"?p.getTrajectoryDataIndices():Y,te.get("blurScope"),te.get("disabled"))}),o.eachNode(function(p){var v=p.getLayout(),g=p.getModel(),m=g.get("localX"),x=g.get("localY"),S=g.getModel("emphasis"),b=g.get(["itemStyle","borderRadius"])||0,T=new Mr({shape:{x:m!=null?m*u:v.x,y:x!=null?x*c:v.y,width:v.dx,height:v.dy,r:b},style:g.getModel("itemStyle").getItemStyle(),z2:10});ka(T,Qi(g),{labelFetcher:{getFormattedLabel:function(E,M){return r.getFormattedLabel(E,M,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),T.disableLabelAnimation=!0,T.setStyle("fill",p.getVisual("color")),T.setStyle("decal",p.getVisual("style").decal),Oa(T,g),s.add(T),f.setItemGraphicEl(p.dataIndex,T),Ht(T).dataType="node";var w=S.get("focus");ti(T,w==="adjacency"?p.getAdjacentDataIndices():w==="trajectory"?p.getTrajectoryDataIndices():w,S.get("blurScope"),S.get("disabled"))}),f.eachItemGraphicEl(function(p,v){var g=f.getItemModel(v);g.get("draggable")&&(p.drift=function(m,x){a._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=x,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:f.getRawIndex(v),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&r.isAnimationEnabled()&&s.setClipPath(eEe(s.getBoundingRect(),r,function(){s.removeClipPath()})),this._data=r.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Or);function AG(t,e,r){switch(t.fill){case"source":t.fill=r.node1.getVisual("color"),t.decal=r.node1.getVisual("style").decal;break;case"target":t.fill=r.node2.getVisual("color"),t.decal=r.node2.getVisual("style").decal;break;case"gradient":var n=r.node1.getVisual("color"),i=r.node2.getVisual("color");ft(n)&&ft(i)&&(t.fill=new Km(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:n,offset:0},{color:i,offset:1}]))}}function eEe(t,e,r){var n=new Mr({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Fn(n,{shape:{width:t.width+20}},e,r),n}var tEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.getInitialData=function(r,n){var i=r.edges||r.links,a=r.data||r.nodes,o=r.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Br(o[l],this,n));if(a&&i){var u=Dte(a,i,this,!0,c);return u.data}function c(f,h){f.wrapMethod("getItemModel",function(d,p){var v=d.parentModel,g=v.getData().getItemLayout(p);if(g){var m=g.depth,x=v.levelModels[m];x&&(d.parentModel=x)}return d}),h.wrapMethod("getItemModel",function(d,p){var v=d.parentModel,g=v.getGraph().getEdgeByIndex(p),m=g.node1.getLayout();if(m){var x=m.depth,S=v.levelModels[x];S&&(d.parentModel=S)}return d})}},e.prototype.setNodePosition=function(r,n){var i=this.option.data||this.option.nodes,a=i[r];a.localX=n[0],a.localY=n[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(r,n,i){function a(d){return isNaN(d)||d==null}if(i==="edge"){var o=this.getDataParams(r,i),s=o.data,l=o.value,u=s.source+" -- "+s.target;return ea("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(r),f=c.getLayout().value,h=this.getDataParams(r,i).data.name;return ea("nameValue",{name:h!=null?h+"":null,value:f,noValue:a(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(r,n){var i=t.prototype.getDataParams.call(this,r,n);if(i.value==null&&n==="node"){var a=this.getGraph().getNodeByIndex(r),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Vr);function rEe(t,e){t.eachSeriesByType("sankey",function(r){var n=r.get("nodeWidth"),i=r.get("nodeGap"),a=nEe(r,e);r.layoutInfo=a;var o=a.width,s=a.height,l=r.getGraph(),u=l.nodes,c=l.edges;aEe(u);var f=hn(u,function(v){return v.getLayout().value===0}),h=f.length!==0?0:r.get("layoutIterations"),d=r.get("orient"),p=r.get("nodeAlign");iEe(u,c,n,i,o,s,h,d,p)})}function nEe(t,e){return ri(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function iEe(t,e,r,n,i,a,o,s,l){oEe(t,e,r,i,a,s,l),cEe(t,e,a,i,n,o,s),_Ee(t,s)}function aEe(t){G(t,function(e){var r=ph(e.outEdges,Kw),n=ph(e.inEdges,Kw),i=e.getValue()||0,a=Math.max(r,n,i);e.setLayout({value:a},!0)})}function oEe(t,e,r,n,i,a,o){for(var s=[],l=[],u=[],c=[],f=0,h=0;h<e.length;h++)s[h]=1;for(var h=0;h<t.length;h++)l[h]=t[h].inEdges.length,l[h]===0&&u.push(t[h]);for(var d=-1;u.length;){for(var p=0;p<u.length;p++){var v=u[p],g=v.hostGraph.data.getRawDataItem(v.dataIndex),m=g.depth!=null&&g.depth>=0;m&&g.depth>d&&(d=g.depth),v.setLayout({depth:m?g.depth:f},!0),a==="vertical"?v.setLayout({dy:r},!0):v.setLayout({dx:r},!0);for(var x=0;x<v.outEdges.length;x++){var S=v.outEdges[x],b=e.indexOf(S);s[b]=0;var T=S.node2,w=t.indexOf(T);--l[w]===0&&c.indexOf(T)<0&&c.push(T)}}++f,u=c,c=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var E=d>f-1?d:f-1;o&&o!=="left"&&sEe(t,o,a,E);var M=a==="vertical"?(i-r)/E:(n-r)/E;uEe(t,M,a)}function Nte(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function sEe(t,e,r,n){if(e==="right"){for(var i=[],a=t,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++o}G(t,function(f){Nte(f)||f.setLayout({depth:Math.max(0,n-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&lEe(t,n)}function lEe(t,e){G(t,function(r){!Nte(r)&&!r.outEdges.length&&r.setLayout({depth:e},!0)})}function uEe(t,e,r){G(t,function(n){var i=n.getLayout().depth*e;r==="vertical"?n.setLayout({y:i},!0):n.setLayout({x:i},!0)})}function cEe(t,e,r,n,i,a,o){var s=fEe(t,o);hEe(s,e,r,n,i,o),r5(s,i,r,n,o);for(var l=1;a>0;a--)l*=.99,dEe(s,l,o),r5(s,i,r,n,o),yEe(s,l,o),r5(s,i,r,n,o)}function fEe(t,e){var r=[],n=e==="vertical"?"y":"x",i=m6(t,function(a){return a.getLayout()[n]});return i.keys.sort(function(a,o){return a-o}),G(i.keys,function(a){r.push(i.buckets.get(a))}),r}function hEe(t,e,r,n,i,a){var o=1/0;G(t,function(s){var l=s.length,u=0;G(s,function(f){u+=f.getLayout().value});var c=a==="vertical"?(n-(l-1)*i)/u:(r-(l-1)*i)/u;c<o&&(o=c)}),G(t,function(s){G(s,function(l,u){var c=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),G(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function r5(t,e,r,n,i){var a=i==="vertical"?"x":"y";G(t,function(o){o.sort(function(v,g){return v.getLayout()[a]-g.getLayout()[a]});for(var s,l,u,c=0,f=o.length,h=i==="vertical"?"dx":"dy",d=0;d<f;d++)l=o[d],u=c-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]+l.getLayout()[h]+e;var p=i==="vertical"?n:r;if(u=c-e-p,u>0){s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var d=f-2;d>=0;--d)l=o[d],u=l.getLayout()[a]+l.getLayout()[h]+e-c,u>0&&(s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]}})}function dEe(t,e,r){G(t.slice().reverse(),function(n){G(n,function(i){if(i.outEdges.length){var a=ph(i.outEdges,pEe,r)/ph(i.outEdges,Kw);if(isNaN(a)){var o=i.outEdges.length;a=o?ph(i.outEdges,vEe,r)/o:0}if(r==="vertical"){var s=i.getLayout().x+(a-Th(i,r))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Th(i,r))*e;i.setLayout({y:l},!0)}}})})}function pEe(t,e){return Th(t.node2,e)*t.getValue()}function vEe(t,e){return Th(t.node2,e)}function gEe(t,e){return Th(t.node1,e)*t.getValue()}function mEe(t,e){return Th(t.node1,e)}function Th(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function Kw(t){return t.getValue()}function ph(t,e,r){for(var n=0,i=t.length,a=-1;++a<i;){var o=+e(t[a],r);isNaN(o)||(n+=o)}return n}function yEe(t,e,r){G(t,function(n){G(n,function(i){if(i.inEdges.length){var a=ph(i.inEdges,gEe,r)/ph(i.inEdges,Kw);if(isNaN(a)){var o=i.inEdges.length;a=o?ph(i.inEdges,mEe,r)/o:0}if(r==="vertical"){var s=i.getLayout().x+(a-Th(i,r))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Th(i,r))*e;i.setLayout({y:l},!0)}}})})}function _Ee(t,e){var r=e==="vertical"?"x":"y";G(t,function(n){n.outEdges.sort(function(i,a){return i.node2.getLayout()[r]-a.node2.getLayout()[r]}),n.inEdges.sort(function(i,a){return i.node1.getLayout()[r]-a.node1.getLayout()[r]})}),G(t,function(n){var i=0,a=0;G(n.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),G(n.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function xEe(t){t.eachSeriesByType("sankey",function(e){var r=e.getGraph(),n=r.nodes,i=r.edges;if(n.length){var a=1/0,o=-1/0;G(n,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),G(n,function(s){var l=new Ji({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&G(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function SEe(t){t.registerChartView(QCe),t.registerSeriesModel(tEe),t.registerLayout(rEe),t.registerVisual(xEe),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,r){r.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var Ote=function(){function t(){}return t.prototype.getInitialData=function(e,r){var n,i=r.getComponent("xAxis",this.get("xAxisIndex")),a=r.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",n=i.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",n=a.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,f=this._baseAxisDim=u[c],h=u[1-c],d=[i,a],p=d[c].get("type"),v=d[1-c].get("type"),g=e.data;if(g&&l){var m=[];G(g,function(b,T){var w;De(b)?(w=b.slice(),b.unshift(T)):De(b.value)?(w=Ae({},b),w.value=w.value.slice(),b.value.unshift(T)):w=b,m.push(w)}),e.data=m}var x=this.defaultValueDimensions,S=[{name:f,type:yw(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:yw(v),dimsDef:x.slice()}];return p0(this,{coordDimensions:S,dimensionsCount:x.length+1,encodeDefaulter:Zt(mq,S,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),kte=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Vr);mi(kte,Ote,!0);var bEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=r.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=r.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),f=MG(c,a,u,l,!0);a.setItemGraphicEl(u,f),o.add(f)}}).update(function(u,c){var f=s.getItemGraphicEl(c);if(!a.hasValue(u)){o.remove(f);return}var h=a.getItemLayout(u);f?($l(f),Fte(h,f,a,u)):f=MG(h,a,u,l),o.add(f),a.setItemGraphicEl(u,f)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=a},e.prototype.remove=function(r){var n=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&n.remove(a)})},e.type="boxplot",e}(Or),wEe=function(){function t(){}return t}(),TEe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="boxplotBoxPath",n}return e.prototype.getDefaultShape=function(){return new wEe},e.prototype.buildPath=function(r,n){var i=n.points,a=0;for(r.moveTo(i[a][0],i[a][1]),a++;a<4;a++)r.lineTo(i[a][0],i[a][1]);for(r.closePath();a<i.length;a++)r.moveTo(i[a][0],i[a][1]),a++,r.lineTo(i[a][0],i[a][1])},e}(yr);function MG(t,e,r,n,i){var a=t.ends,o=new TEe({shape:{points:i?CEe(a,n,t):a}});return Fte(t,o,e,r,i),o}function Fte(t,e,r,n,i){var a=r.hostModel,o=Vp[i?"initProps":"updateProps"];o(e,{shape:{points:t.ends}},a,n),e.useStyle(r.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=r.getItemModel(n),l=s.getModel("emphasis");Oa(e,s),ti(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function CEe(t,e,r){return Oe(t,function(n){return n=n.slice(),n[e]=r.initBaseline,n})}var V1=G;function EEe(t){var e=AEe(t);V1(e,function(r){var n=r.seriesModels;n.length&&(MEe(r),V1(n,function(i,a){REe(i,r.boxOffsetList[a],r.boxWidthList[a])}))})}function AEe(t){var e=[],r=[];return t.eachSeriesByType("boxplot",function(n){var i=n.getBaseAxis(),a=hr(r,i);a<0&&(a=r.length,r[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(n)}),e}function MEe(t){var e=t.axis,r=t.seriesModels,n=r.length,i=t.boxWidthList=[],a=t.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;V1(r,function(p){l=Math.max(l,p.getData().count())});var u=e.getExtent();s=Math.abs(u[1]-u[0])/l}V1(r,function(p){var v=p.get("boxWidth");De(v)||(v=[v,v]),o.push([Ze(v[0],s)||0,Ze(v[1],s)||0])});var c=s*.8-2,f=c/n*.3,h=(c-f*(n-1))/n,d=h/2-c/2;V1(r,function(p,v){a.push(d),d+=f+h,i.push(Math.min(Math.max(h,o[v][0]),o[v][1]))})}function REe(t,e,r){var n=t.coordinateSystem,i=t.getData(),a=r/2,o=t.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),c=i.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var f=0;f<i.count();f++){var h=i.get(u,f),d=S(h,c[2],f),p=S(h,c[0],f),v=S(h,c[1],f),g=S(h,c[3],f),m=S(h,c[4],f),x=[];b(x,v,!1),b(x,g,!0),x.push(p,v,m,g),T(x,p),T(x,m),T(x,d),i.setItemLayout(f,{initBaseline:d[s],ends:x})}function S(w,E,M){var A=i.get(E,M),R=[];R[o]=w,R[s]=A;var L;return isNaN(w)||isNaN(A)?L=[NaN,NaN]:(L=n.dataToPoint(R),L[o]+=e),L}function b(w,E,M){var A=E.slice(),R=E.slice();A[o]+=a,R[o]-=a,M?w.push(A,R):w.push(R,A)}function T(w,E){var M=E.slice(),A=E.slice();M[o]-=a,A[o]+=a,w.push(M,A)}}function PEe(t,e){e=e||{};for(var r=[],n=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<t.length;o++){var s=Ys(t[o].slice()),l=WE(s,.25),u=WE(s,.5),c=WE(s,.75),f=s[0],h=s[s.length-1],d=(i==null?1.5:i)*(c-l),p=a?f:Math.max(f,l-d),v=a?h:Math.min(h,c+d),g=e.itemNameFormatter,m=Lt(g)?g({value:o}):ft(g)?g.replace("{value}",o+""):o+"";r.push([m,p,l,u,c,v]);for(var x=0;x<s.length;x++){var S=s[x];if(S<p||S>v){var b=[m,S];n.push(b)}}}return{boxData:r,outliers:n}}var LEe={type:"echarts:boxplot",transform:function(e){var r=e.upstream;if(r.sourceFormat!==qa){var n="";nn(n)}var i=PEe(r.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function DEe(t){t.registerSeriesModel(kte),t.registerChartView(bEe),t.registerLayout(EEe),t.registerTransform(LEe)}var IEe=["color","borderColor"],NEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},e.prototype.incrementalPrepareRender=function(r,n,i){this._clear(),this._updateDrawMode(r)},e.prototype.incrementalRender=function(r,n,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,n):this._incrementalRenderNormal(r,n)},e.prototype.eachRendered=function(r){Eh(this._progressiveEls||this.group,r)},e.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(r){var n=r.getData(),i=this._data,a=this.group,o=n.getLayout("isSimpleBox"),s=r.get("clip",!0),l=r.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),n.diff(i).add(function(c){if(n.hasValue(c)){var f=n.getItemLayout(c);if(s&&RG(u,f))return;var h=n5(f,c,!0);Fn(h,{shape:{points:f.ends}},r,c),i5(h,n,c,o),a.add(h),n.setItemGraphicEl(c,h)}}).update(function(c,f){var h=i.getItemGraphicEl(f);if(!n.hasValue(c)){a.remove(h);return}var d=n.getItemLayout(c);if(s&&RG(u,d)){a.remove(h);return}h?(Xr(h,{shape:{points:d.ends}},r,c),$l(h)):h=n5(d),i5(h,n,c,o),a.add(h),n.setItemGraphicEl(c,h)}).remove(function(c){var f=i.getItemGraphicEl(c);f&&a.remove(f)}).execute(),this._data=n},e.prototype._renderLarge=function(r){this._clear(),PG(r,this.group);var n=r.get("clip",!0)?M2(r.coordinateSystem,!1,r):null;n?this.group.setClipPath(n):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(r,n){for(var i=n.getData(),a=i.getLayout("isSimpleBox"),o;(o=r.next())!=null;){var s=i.getItemLayout(o),l=n5(s);i5(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(r,n){PG(n,this.group,this._progressiveEls,!0)},e.prototype.remove=function(r){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Or),OEe=function(){function t(){}return t}(),kEe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="normalCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new OEe},e.prototype.buildPath=function(r,n){var i=n.points;this.__simpleBox?(r.moveTo(i[4][0],i[4][1]),r.lineTo(i[6][0],i[6][1])):(r.moveTo(i[0][0],i[0][1]),r.lineTo(i[1][0],i[1][1]),r.lineTo(i[2][0],i[2][1]),r.lineTo(i[3][0],i[3][1]),r.closePath(),r.moveTo(i[4][0],i[4][1]),r.lineTo(i[5][0],i[5][1]),r.moveTo(i[6][0],i[6][1]),r.lineTo(i[7][0],i[7][1]))},e}(yr);function n5(t,e,r){var n=t.ends;return new kEe({shape:{points:r?FEe(n,t):n},z2:100})}function RG(t,e){for(var r=!0,n=0;n<e.ends.length;n++)if(t.contain(e.ends[n][0],e.ends[n][1])){r=!1;break}return r}function i5(t,e,r,n){var i=e.getItemModel(r);t.useStyle(e.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.__simpleBox=n,Oa(t,i)}function FEe(t,e){return Oe(t,function(r){return r=r.slice(),r[1]=e.initBaseline,r})}var BEe=function(){function t(){}return t}(),a5=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n.type="largeCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new BEe},e.prototype.buildPath=function(r,n){for(var i=n.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];r.moveTo(o,i[a++]),r.lineTo(o,i[a++])}else a+=3},e}(yr);function PG(t,e,r,n){var i=t.getData(),a=i.getLayout("largePoints"),o=new a5({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new a5({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new a5({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),o5(1,o,t),o5(-1,s,t),o5(0,l,t),n&&(o.incremental=!0,s.incremental=!0),r&&r.push(o,s)}function o5(t,e,r,n){var i=r.get(["itemStyle",t>0?"borderColor":"borderColor0"])||r.get(["itemStyle",t>0?"color":"color0"]);t===0&&(i=r.get(["itemStyle","borderColorDoji"]));var a=r.getModel("itemStyle").getItemStyle(IEe);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var Bte=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(r,n,i){var a=n.getItemLayout(r);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Vr);mi(Bte,Ote,!0);function zEe(t){!t||!De(t.series)||G(t.series,function(e){Nt(e)&&e.type==="k"&&(e.type="candlestick")})}var UEe=["itemStyle","borderColor"],VEe=["itemStyle","borderColor0"],HEe=["itemStyle","borderColorDoji"],GEe=["itemStyle","color"],WEe=["itemStyle","color0"],$Ee={seriesType:"candlestick",plan:n0(),performRawSeries:!0,reset:function(t,e){function r(a,o){return o.get(a>0?GEe:WEe)}function n(a,o){return o.get(a===0?HEe:a>0?UEe:VEe)}if(!e.isSeriesFiltered(t)){var i=t.pipelineContext.large;return!i&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,c=l.getItemStyle();c.fill=r(u,l),c.stroke=n(u,l)||c.fill;var f=o.ensureUniqueItemVisual(s,"style");Ae(f,c)}}}}}},jEe={seriesType:"candlestick",plan:n0(),reset:function(t){var e=t.coordinateSystem,r=t.getData(),n=XEe(t,r),i=0,a=1,o=["x","y"],s=r.getDimensionIndex(r.mapDimension(o[i])),l=Oe(r.mapDimensionsAll(o[a]),r.getDimensionIndex,r),u=l[0],c=l[1],f=l[2],h=l[3];if(r.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:t.pipelineContext.large?p:d};function d(v,g){for(var m,x=g.getStore();(m=v.next())!=null;){var S=x.get(s,m),b=x.get(u,m),T=x.get(c,m),w=x.get(f,m),E=x.get(h,m),M=Math.min(b,T),A=Math.max(b,T),R=V(M,S),L=V(A,S),I=V(w,S),N=V(E,S),k=[];F(k,L,0),F(k,R,1),k.push(W(N),W(L),W(I),W(R));var z=g.getItemModel(m),B=!!z.get(["itemStyle","borderColorDoji"]);g.setItemLayout(m,{sign:LG(x,m,b,T,c,B),initBaseline:b>T?L[a]:R[a],ends:k,brushRect:$(w,E,S)})}function V(H,X){var te=[];return te[i]=X,te[a]=H,isNaN(X)||isNaN(H)?[NaN,NaN]:e.dataToPoint(te)}function F(H,X,te){var Y=X.slice(),ee=X.slice();Y[i]=g3(Y[i]+n/2,1,!1),ee[i]=g3(ee[i]-n/2,1,!0),te?H.push(Y,ee):H.push(ee,Y)}function $(H,X,te){var Y=V(H,te),ee=V(X,te);return Y[i]-=n/2,ee[i]-=n/2,{x:Y[0],y:Y[1],width:n,height:ee[1]-Y[1]}}function W(H){return H[i]=g3(H[i],1),H}}function p(v,g){for(var m=wu(v.count*4),x=0,S,b=[],T=[],w,E=g.getStore(),M=!!t.get(["itemStyle","borderColorDoji"]);(w=v.next())!=null;){var A=E.get(s,w),R=E.get(u,w),L=E.get(c,w),I=E.get(f,w),N=E.get(h,w);if(isNaN(A)||isNaN(I)||isNaN(N)){m[x++]=NaN,x+=3;continue}m[x++]=LG(E,w,R,L,c,M),b[i]=A,b[a]=I,S=e.dataToPoint(b,null,T),m[x++]=S?S[0]:NaN,m[x++]=S?S[1]:NaN,b[a]=N,S=e.dataToPoint(b,null,T),m[x++]=S?S[1]:NaN}g.setLayout("largePoints",m)}}};function LG(t,e,r,n,i,a){var o;return r>n?o=-1:r<n?o=1:o=a?0:e>0?t.get(i,e-1)<=n?1:-1:1,o}function XEe(t,e){var r=t.getBaseAxis(),n,i=r.type==="category"?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/e.count()),a=Ze(Jt(t.get("barMaxWidth"),i),i),o=Ze(Jt(t.get("barMinWidth"),1),i),s=t.get("barWidth");return s!=null?Ze(s,i):Math.max(Math.min(i/2,a),o)}function KEe(t){t.registerChartView(NEe),t.registerSeriesModel(Bte),t.registerPreprocessor(zEe),t.registerVisual($Ee),t.registerLayout(jEe)}function DG(t,e){var r=e.rippleEffectColor||e.color;t.eachChild(function(n){n.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?r:null,fill:e.brushType==="fill"?r:null}})})}var YEe=function(t){he(e,t);function e(r,n){var i=t.call(this)||this,a=new E2(r,n),o=new Vt;return i.add(a),i.add(o),i.updateData(r,n),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(r){for(var n=r.symbolType,i=r.color,a=r.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=vi(n,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*r.period+r.effectOffset;l.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(r.period,{opacity:0}).delay(u).start(),o.add(l)}DG(o,r)},e.prototype.updateEffectAnimation=function(r){for(var n=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(n[s]!==r[s]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}DG(i,r)},e.prototype.highlight=function(){kc(this)},e.prototype.downplay=function(){Fc(this)},e.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},e.prototype.updateData=function(r,n){var i=this,a=r.hostModel;this.childAt(0).updateData(r,n);var o=this.childAt(1),s=r.getItemModel(n),l=r.getItemVisual(n,"symbol"),u=a0(r.getItemVisual(n,"symbolSize")),c=r.getItemVisual(n,"style"),f=c&&c.fill,h=s.getModel("emphasis");o.setScale(u),o.traverse(function(g){g.setStyle("fill",f)});var d=Hp(r.getItemVisual(n,"symbolOffset"),u);d&&(o.x=d[0],o.y=d[1]);var p=r.getItemVisual(n,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=n/r.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=f,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?v.showEffectOn!=="render"&&i.startEffectAnimation(v):g==="normal"&&v.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=v,ti(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},e.prototype.fadeOut=function(r){r&&r()},e}(Vt),qEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(){this._symbolDraw=new A2(YEe)},e.prototype.render=function(r,n,i){var a=r.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(r)}),this.group.add(o.group)},e.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},e.prototype.updateTransform=function(r,n,i){var a=r.getData();this.group.dirty();var o=R2("").reset(r,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(r){var n=r.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=mue(n.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Or),ZEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r}return e.prototype.getInitialData=function(r,n){return Vu(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Vr);function zte(t){t.registerChartView(qEe),t.registerSeriesModel(ZEe),t.registerLayout(R2("effectScatter"))}var Ute=function(t){he(e,t);function e(r,n,i){var a=t.call(this)||this;return a.add(a.createLine(r,n,i)),a._updateEffectSymbol(r,n),a}return e.prototype.createLine=function(r,n,i){return new sI(r,n,i)},e.prototype._updateEffectSymbol=function(r,n){var i=r.getItemModel(n),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");De(o)||(o=[o,o]);var l=r.getItemVisual(n,"style"),u=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==s&&(this.remove(c),c=vi(s,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(a.getItemStyle(["color"])),c.scaleX=o[0],c.scaleY=o[1],c.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(r,a,n))},e.prototype._updateEffectAnimation=function(r,n,i){var a=this.childAt(1);if(a){var o=r.getItemLayout(i),s=n.get("period")*1e3,l=n.get("loop"),u=n.get("roundTrip"),c=n.get("constantSpeed"),f=ma(n.get("delay"),function(d){return d/r.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),c>0&&(s=this._getLineLength(a)/c*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var h=void 0;Lt(f)?h=f(i):h=f,a.__t>0&&(h=-s*a.__t),this._animateSymbol(a,s,h,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},e.prototype._animateSymbol=function(r,n,i,a,o){if(n>0){r.__t=0;var s=this,l=r.animate("",a).when(o?n*2:n,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(r)});a||l.done(function(){s.remove(r)}),l.start()}},e.prototype._getLineLength=function(r){return Xf(r.__p1,r.__cp1)+Xf(r.__cp1,r.__p2)},e.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},e.prototype.updateData=function(r,n,i){this.childAt(0).updateData(r,n,i),this._updateEffectSymbol(r,n)},e.prototype._updateSymbolPosition=function(r){var n=r.__p1,i=r.__p2,a=r.__cp1,o=r.__t<1?r.__t:2-r.__t,s=[r.x,r.y],l=s.slice(),u=pa,c=r6;s[0]=u(n[0],a[0],i[0],o),s[1]=u(n[1],a[1],i[1],o);var f=r.__t<1?c(n[0],a[0],i[0],o):c(i[0],a[0],n[0],1-o),h=r.__t<1?c(n[1],a[1],i[1],o):c(i[1],a[1],n[1],1-o);r.rotation=-Math.atan2(h,f)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=Xf(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):r.__lastT===1?r.scaleY=2*Xf(n,s):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=s[0],r.y=s[1]},e.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var i=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,i,n)},e}(Vt),Vte=function(t){he(e,t);function e(r,n,i){var a=t.call(this)||this;return a._createPolyline(r,n,i),a}return e.prototype._createPolyline=function(r,n,i){var a=r.getItemLayout(n),o=new Ro({shape:{points:a}});this.add(o),this._updateCommonStl(r,n,i)},e.prototype.updateData=function(r,n,i){var a=r.hostModel,o=this.childAt(0),s={shape:{points:r.getItemLayout(n)}};Xr(o,s,a,n),this._updateCommonStl(r,n,i)},e.prototype._updateCommonStl=function(r,n,i){var a=this.childAt(0),o=r.getItemModel(n),s=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,c=i&&i.emphasisDisabled;if(!i||r.hasItemOption){var f=o.getModel("emphasis");s=f.getModel("lineStyle").getLineStyle(),c=f.get("disabled"),l=f.get("focus"),u=f.get("blurScope")}a.useStyle(r.getItemVisual(n,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var h=a.ensureState("emphasis");h.style=s,ti(this,l,u,c)},e.prototype.updateLayout=function(r,n){var i=this.childAt(0);i.setShape("points",r.getItemLayout(n))},e}(Vt),JEe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return e.prototype.createLine=function(r,n,i){return new Vte(r,n,i)},e.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var i=[0],a=0,o=1;o<n.length;o++){var s=n[o-1],l=n[o];a+=Xf(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(r){var n=r.__t<1?r.__t:2-r.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(n<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=n);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>n);l++);l=Math.min(l-1,o-2)}var c=(n-a[l])/(a[l+1]-a[l]),f=i[l],h=i[l+1];r.x=f[0]*(1-c)+c*h[0],r.y=f[1]*(1-c)+c*h[1];var d=r.__t<1?h[0]-f[0]:f[0]-h[0],p=r.__t<1?h[1]-f[1]:f[1]-h[1];r.rotation=-Math.atan2(p,d)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=n,r.ignore=!1}},e}(Ute),QEe=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),eAe=function(t){he(e,t);function e(r){var n=t.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new QEe},e.prototype.buildPath=function(r,n){var i=n.segs,a=n.curveness,o;if(n.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){r.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)r.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var u=i[o++],c=i[o++],f=i[o++],h=i[o++];if(r.moveTo(u,c),a>0){var d=(u+f)/2-(c-h)*a,p=(c+h)/2-(f-u)*a;r.quadraticCurveTo(d,p,f,h)}else r.lineTo(f,h)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(r,n){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<a.length;){var c=a[u++];if(c>0)for(var f=a[u++],h=a[u++],d=1;d<c;d++){var p=a[u++],v=a[u++];if(mc(f,h,p,v,s,r,n))return l}l++}else for(var l=0,u=0;u<a.length;){var f=a[u++],h=a[u++],p=a[u++],v=a[u++];if(o>0){var g=(f+p)/2-(h-v)*o,m=(h+v)/2-(p-f)*o;if(yY(f,h,g,m,p,v,s,r,n))return l}else if(mc(f,h,p,v,s,r,n))return l;l++}return-1},e.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var o=this.hoverDataIdx=this.findDataIndex(r,n);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i.length;){var c=i[u++],f=i[u++];a=Math.min(c,a),s=Math.max(c,s),o=Math.min(f,o),l=Math.max(f,l)}r=this._rect=new sr(a,o,s,l)}return r},e}(yr),tAe=function(){function t(){this.group=new Vt}return t.prototype.updateData=function(e){this._clear();var r=this._create();r.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(r,e)},t.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(e,r){var n=this._newAdded[0],i=r.getLayout("linesPoints"),a=n&&n.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),n.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,r),l.__startIndex=e.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new eAe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},t.prototype._setCommon=function(e,r,n){var i=r.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=Ht(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Hte={seriesType:"lines",plan:n0(),reset:function(t){var e=t.coordinateSystem;if(e){var r=t.get("polyline"),n=t.pipelineContext.large;return{progress:function(i,a){var o=[];if(n){var s=void 0,l=i.end-i.start;if(r){for(var u=0,c=i.start;c<i.end;c++)u+=t.getLineCoordsCount(c);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var f=0,h=[],c=i.start;c<i.end;c++){var d=t.getLineCoords(c,o);r&&(s[f++]=d);for(var p=0;p<d;p++)h=e.dataToPoint(o[p],!1,h),s[f++]=h[0],s[f++]=h[1]}a.setLayout("linesPoints",s)}else for(var c=i.start;c<i.end;c++){var v=a.getItemModel(c),d=t.getLineCoords(c,o),g=[];if(r)for(var m=0;m<d;m++)g.push(e.dataToPoint(o[m]));else{g[0]=e.dataToPoint(o[0]),g[1]=e.dataToPoint(o[1]);var x=v.get(["lineStyle","curveness"]);+x&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*x,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*x])}a.setItemLayout(c,g)}}}}}},rAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=r.getData(),o=this._updateLineDraw(a,r),s=r.get("zlevel"),l=r.get(["effect","trailLength"]),u=i.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&l>0&&(c||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var f=r.get("clip",!0)&&M2(r.coordinateSystem,!1,r);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),o=this._updateLineDraw(a,r);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(r,n,i){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},e.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},e.prototype.updateTransform=function(r,n,i){var a=r.getData(),o=r.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=Hte.reset(r,n,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(r,n){var i=this._lineDraw,a=this._showEffect(n),o=!!n.get("polyline"),s=n.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new tAe:new lI(o?a?JEe:Vte:a?Ute:sI),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(r){return!!r.get(["effect","show"])},e.prototype._clearLayer=function(r){var n=r.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},e.prototype.dispose=function(r,n){this.remove(r,n)},e.type="lines",e}(Or),nAe=typeof Uint32Array=="undefined"?Array:Uint32Array,iAe=typeof Float64Array=="undefined"?Array:Float64Array;function IG(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=Oe(e,function(r){var n=[r[0].coord,r[1].coord],i={coords:n};return r[0].name&&(i.fromName=r[0].name),r[1].name&&(i.toName=r[1].name),tL([i,r[0],r[1]])}))}var aAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return e.prototype.init=function(r){r.data=r.data||[],IG(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(r){if(IG(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=nm(this._flatCoords,n.flatCoords),this._flatCoordsOffset=nm(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},e.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},e.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],o=0;o<a;o++)n[o]=n[o]||[],n[o][0]=this._flatCoords[i+o*2],n[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(r),o=0;o<s.length;o++)n[o]=n[o]||[],n[o][0]=s[o][0],n[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),Ur(r[0])){for(var i=r.length,a=new nAe(i),o=new iAe(i),s=0,l=0,u=0,c=0;c<i;){u++;var f=r[c++];a[l++]=s+n,a[l++]=f;for(var h=0;h<f;h++){var d=r[c++],p=r[c++];o[s++]=d,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},e.prototype.getInitialData=function(r,n){var i=new Kn(["value"],this);return i.hasItemOption=!1,i.initData(r.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),i},e.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=a.getItemModel(r),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),ea("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?1e4:this.get("progressive"):r},e.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?2e4:this.get("progressiveThreshold"):r},e.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Vr);function ob(t){return t instanceof Array||(t=[t,t]),t}var oAe={seriesType:"lines",reset:function(t){var e=ob(t.get("symbol")),r=ob(t.get("symbolSize")),n=t.getData();n.setVisual("fromSymbol",e&&e[0]),n.setVisual("toSymbol",e&&e[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function i(a,o){var s=a.getItemModel(o),l=ob(s.getShallow("symbol",!0)),u=ob(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:n.hasItemOption?i:null}}};function sAe(t){t.registerChartView(rAe),t.registerSeriesModel(aAe),t.registerLayout(Hte),t.registerVisual(oAe)}var lAe=256,uAe=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=_h.createCanvas();this.canvas=e}return t.prototype.update=function(e,r,n,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,f=this.canvas,h=f.getContext("2d"),d=e.length;f.width=r,f.height=n;for(var p=0;p<d;++p){var v=e[p],g=v[0],m=v[1],x=v[2],S=i(x);h.globalAlpha=S,h.drawImage(s,g-c,m-c)}if(!f.width||!f.height)return f;for(var b=h.getImageData(0,0,f.width,f.height),T=b.data,w=0,E=T.length,M=this.minOpacity,A=this.maxOpacity,R=A-M;w<E;){var S=T[w+3]/256,L=Math.floor(S*(lAe-1))*4;if(S>0){var I=o(S)?l:u;S>0&&(S=S*R+M),T[w++]=I[L],T[w++]=I[L+1],T[w++]=I[L+2],T[w++]=I[L+3]*S*256}else w+=4}return h.putImageData(b,0,0),f},t.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=_h.createCanvas()),r=this.pointSize+this.blurSize,n=r*2;e.width=n,e.height=n;var i=e.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-r,r,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},t.prototype._getGradient=function(e,r){for(var n=this._gradientPixels,i=n[r]||(n[r]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[r](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},t}();function cAe(t,e,r){var n=t[1]-t[0];e=Oe(e,function(o){return{interval:[(o.interval[0]-t[0])/n,(o.interval[1]-t[0])/n]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&r[s]}}function fAe(t,e){var r=t[1]-t[0];return e=[(e[0]-t[0])/r,(e[1]-t[0])/r],function(n){return n>=e[0]&&n<=e[1]}}function NG(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}var hAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a;n.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===r&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=r.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(r,i,0,r.getData().count()):NG(o)&&this._renderOnGeo(o,r,a,i)},e.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll()},e.prototype.incrementalRender=function(r,n,i,a){var o=n.coordinateSystem;o&&(NG(o)?this.render(n,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,a,r.start,r.end,!0)))},e.prototype.eachRendered=function(r){Eh(this._progressiveEls||this.group,r)},e.prototype._renderOnCartesianAndCalendar=function(r,n,i,a,o){var s=r.coordinateSystem,l=Kp(s,"cartesian2d"),u,c,f,h;if(l){var d=s.getAxis("x"),p=s.getAxis("y");u=d.getBandWidth()+.5,c=p.getBandWidth()+.5,f=d.scale.getExtent(),h=p.scale.getExtent()}for(var v=this.group,g=r.getData(),m=r.getModel(["emphasis","itemStyle"]).getItemStyle(),x=r.getModel(["blur","itemStyle"]).getItemStyle(),S=r.getModel(["select","itemStyle"]).getItemStyle(),b=r.get(["itemStyle","borderRadius"]),T=Qi(r),w=r.getModel("emphasis"),E=w.get("focus"),M=w.get("blurScope"),A=w.get("disabled"),R=l?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],L=i;L<a;L++){var I=void 0,N=g.getItemVisual(L,"style");if(l){var k=g.get(R[0],L),z=g.get(R[1],L);if(isNaN(g.get(R[2],L))||isNaN(k)||isNaN(z)||k<f[0]||k>f[1]||z<h[0]||z>h[1])continue;var B=s.dataToPoint([k,z]);I=new Mr({shape:{x:B[0]-u/2,y:B[1]-c/2,width:u,height:c},style:N})}else{if(isNaN(g.get(R[1],L)))continue;I=new Mr({z2:1,shape:s.dataToRect([g.get(R[0],L)]).contentShape,style:N})}if(g.hasItemOption){var V=g.getItemModel(L),F=V.getModel("emphasis");m=F.getModel("itemStyle").getItemStyle(),x=V.getModel(["blur","itemStyle"]).getItemStyle(),S=V.getModel(["select","itemStyle"]).getItemStyle(),b=V.get(["itemStyle","borderRadius"]),E=F.get("focus"),M=F.get("blurScope"),A=F.get("disabled"),T=Qi(V)}I.shape.r=b;var $=r.getRawValue(L),W="-";$&&$[2]!=null&&(W=$[2]+""),ka(I,T,{labelFetcher:r,labelDataIndex:L,defaultOpacity:N.opacity,defaultText:W}),I.ensureState("emphasis").style=m,I.ensureState("blur").style=x,I.ensureState("select").style=S,ti(I,E,M,A),I.incremental=o,o&&(I.states.emphasis.hoverLayer=!0),v.add(I),g.setItemGraphicEl(L,I),this._progressiveEls&&this._progressiveEls.push(I)}},e.prototype._renderOnGeo=function(r,n,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=n.getData(),u=this._hmLayer||this._hmLayer||new uAe;u.blurSize=n.get("blurSize"),u.pointSize=n.get("pointSize"),u.minOpacity=n.get("minOpacity"),u.maxOpacity=n.get("maxOpacity");var c=r.getViewRect().clone(),f=r.getRoamTransform();c.applyTransform(f);var h=Math.max(c.x,0),d=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),v=Math.min(c.height+c.y,a.getHeight()),g=p-h,m=v-d,x=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(x,function(E,M,A){var R=r.dataToPoint([E,M]);return R[0]-=h,R[1]-=d,R.push(A),R}),b=i.getExtent(),T=i.type==="visualMap.continuous"?fAe(b,i.option.range):cAe(b,i.getPieceList(),i.option.selected);u.update(S,g,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},T);var w=new aa({style:{width:g,height:m,x:h,y:d,image:u.canvas},silent:!0});this.group.add(w)},e.type="heatmap",e}(Or),dAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.getInitialData=function(r,n){return Vu(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var r=r0.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Vr);function pAe(t){t.registerChartView(hAe),t.registerSeriesModel(dAe)}var vAe=["itemStyle","borderWidth"],OG=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],s5=new Xc,gAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i){var a=this.group,o=r.getData(),s=this._data,l=r.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),f=l.master.getRect(),h={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:r,coordSys:l,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:c,valueDim:OG[+c],categoryDim:OG[1-+c]};o.diff(s).add(function(p){if(o.hasValue(p)){var v=FG(o,p),g=kG(o,p,v,h),m=BG(o,h,g);o.setItemGraphicEl(p,m),a.add(m),UG(m,h,g)}}).update(function(p,v){var g=s.getItemGraphicEl(v);if(!o.hasValue(p)){a.remove(g);return}var m=FG(o,p),x=kG(o,p,m,h),S=Kte(o,x);g&&S!==g.__pictorialShapeStr&&(a.remove(g),o.setItemGraphicEl(p,null),g=null),g?wAe(g,h,x):g=BG(o,h,x,!0),o.setItemGraphicEl(p,g),g.__pictorialSymbolMeta=x,a.add(g),UG(g,h,x)}).remove(function(p){var v=s.getItemGraphicEl(p);v&&zG(s,p,v.__pictorialSymbolMeta.animationModel,v)}).execute();var d=r.get("clip",!0)?M2(r.coordinateSystem,!1,r):null;return d?a.setClipPath(d):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(r,n){var i=this.group,a=this._data;r.get("animation")?a&&a.eachItemGraphicEl(function(o){zG(a,Ht(o).dataIndex,r,o)}):i.removeAll()},e.type="pictorialBar",e}(Or);function kG(t,e,r,n){var i=t.getItemLayout(e),a=r.get("symbolRepeat"),o=r.get("symbolClip"),s=r.get("symbolPosition")||"start",l=r.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=r.get("symbolPatternSize")||2,f=r.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:r,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:f?r:null,hoverScale:f&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};mAe(r,a,i,n,h),yAe(t,e,i,a,o,h.boundingLength,h.pxSign,c,n,h),_Ae(r,h.symbolScale,u,n,h);var d=h.symbolSize,p=Hp(r.get("symbolOffset"),d);return xAe(r,d,i,a,o,p,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,n,h),h}function mAe(t,e,r,n,i){var a=n.valueDim,o=t.get("symbolBoundingData"),s=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(r[a.wh]<=0),c;if(De(o)){var f=[l5(s,o[0])-l,l5(s,o[1])-l];f[1]<f[0]&&f.reverse(),c=f[u]}else o!=null?c=l5(s,o)-l:e?c=n.coordSysExtent[a.index][u]-l:c=r[a.wh];i.boundingLength=c,e&&(i.repeatCutLength=r[a.wh]),i.pxSign=c>0?1:-1}function l5(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function yAe(t,e,r,n,i,a,o,s,l,u){var c=l.valueDim,f=l.categoryDim,h=Math.abs(r[f.wh]),d=t.getItemVisual(e,"symbolSize"),p;De(d)?p=d.slice():d==null?p=["100%","100%"]:p=[d,d],p[f.index]=Ze(p[f.index],h),p[c.index]=Ze(p[c.index],n?h:Math.abs(a)),u.symbolSize=p;var v=u.symbolScale=[p[0]/s,p[1]/s];v[c.index]*=(l.isHorizontal?-1:1)*o}function _Ae(t,e,r,n,i){var a=t.get(vAe)||0;a&&(s5.attr({scaleX:e[0],scaleY:e[1],rotation:r}),s5.updateTransform(),a/=s5.getLineScale(),a*=e[n.valueDim.index]),i.valueLineWidth=a||0}function xAe(t,e,r,n,i,a,o,s,l,u,c,f){var h=c.categoryDim,d=c.valueDim,p=f.pxSign,v=Math.max(e[d.index]+s,0),g=v;if(n){var m=Math.abs(l),x=ma(t.get("symbolMargin"),"15%")+"",S=!1;x.lastIndexOf("!")===x.length-1&&(S=!0,x=x.slice(0,x.length-1));var b=Ze(x,e[d.index]),T=Math.max(v+b*2,0),w=S?0:b*2,E=iY(n),M=E?n:VG((m+w)/T),A=m-M*v;b=A/2/(S?M:Math.max(M-1,1)),T=v+b*2,w=S?0:b*2,!E&&n!=="fixed"&&(M=u?VG((Math.abs(u)+w)/T):0),g=M*T-w,f.repeatTimes=M,f.symbolMargin=b}var R=p*(g/2),L=f.pathPosition=[];L[h.index]=r[h.wh]/2,L[d.index]=o==="start"?R:o==="end"?l-R:l/2,a&&(L[0]+=a[0],L[1]+=a[1]);var I=f.bundlePosition=[];I[h.index]=r[h.xy],I[d.index]=r[d.xy];var N=f.barRectShape=Ae({},r);N[d.wh]=p*Math.max(Math.abs(r[d.wh]),Math.abs(L[d.index]+R)),N[h.wh]=r[h.wh];var k=f.clipShape={};k[h.xy]=-r[h.xy],k[h.wh]=c.ecSize[h.wh],k[d.xy]=0,k[d.wh]=r[d.wh]}function Gte(t){var e=t.symbolPatternSize,r=vi(t.symbolType,-e/2,-e/2,e,e);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function Wte(t,e,r,n){var i=t.__pictorialBundle,a=r.symbolSize,o=r.valueLineWidth,s=r.pathPosition,l=e.valueDim,u=r.repeatTimes||0,c=0,f=a[e.valueDim.index]+o+r.symbolMargin*2;for(_I(t,function(v){v.__pictorialAnimationIndex=c,v.__pictorialRepeatTimes=u,c<u?Kg(v,null,p(c),r,n):Kg(v,null,{scaleX:0,scaleY:0},r,n,function(){i.remove(v)}),c++});c<u;c++){var h=Gte(r);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=u,i.add(h);var d=p(c);Kg(h,{x:d.x,y:d.y,scaleX:0,scaleY:0},{scaleX:d.scaleX,scaleY:d.scaleY,rotation:d.rotation},r,n)}function p(v){var g=s.slice(),m=r.pxSign,x=v;return(r.symbolRepeatDirection==="start"?m>0:m<0)&&(x=u-1-v),g[l.index]=f*(x-u/2+.5)+s[l.index],{x:g[0],y:g[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function $te(t,e,r,n){var i=t.__pictorialBundle,a=t.__pictorialMainPath;a?Kg(a,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,n):(a=t.__pictorialMainPath=Gte(r),i.add(a),Kg(a,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,n))}function jte(t,e,r){var n=Ae({},e.barRectShape),i=t.__pictorialBarRect;i?Kg(i,null,{shape:n},e,r):(i=t.__pictorialBarRect=new Mr({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,t.add(i))}function Xte(t,e,r,n){if(r.symbolClip){var i=t.__pictorialClipPath,a=Ae({},r.clipShape),o=e.valueDim,s=r.animationModel,l=r.dataIndex;if(i)Xr(i,{shape:a},s,l);else{a[o.wh]=0,i=new Mr({shape:a}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var u={};u[o.wh]=r.clipShape[o.wh],Vp[n?"updateProps":"initProps"](i,{shape:u},s,l)}}}function FG(t,e){var r=t.getItemModel(e);return r.getAnimationDelayParams=SAe,r.isAnimationEnabled=bAe,r}function SAe(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function bAe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function BG(t,e,r,n){var i=new Vt,a=new Vt;return i.add(a),i.__pictorialBundle=a,a.x=r.bundlePosition[0],a.y=r.bundlePosition[1],r.symbolRepeat?Wte(i,e,r):$te(i,e,r),jte(i,r,n),Xte(i,e,r,n),i.__pictorialShapeStr=Kte(t,r),i.__pictorialSymbolMeta=r,i}function wAe(t,e,r){var n=r.animationModel,i=r.dataIndex,a=t.__pictorialBundle;Xr(a,{x:r.bundlePosition[0],y:r.bundlePosition[1]},n,i),r.symbolRepeat?Wte(t,e,r,!0):$te(t,e,r,!0),jte(t,r,!0),Xte(t,e,r,!0)}function zG(t,e,r,n){var i=n.__pictorialBarRect;i&&i.removeTextContent();var a=[];_I(n,function(o){a.push(o)}),n.__pictorialMainPath&&a.push(n.__pictorialMainPath),n.__pictorialClipPath&&(r=null),G(a,function(o){Sh(o,{scaleX:0,scaleY:0},r,e,function(){n.parent&&n.parent.remove(n)})}),t.setItemGraphicEl(e,null)}function Kte(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function _I(t,e,r){G(t.__pictorialBundle.children(),function(n){n!==t.__pictorialBarRect&&e.call(r,n)})}function Kg(t,e,r,n,i,a){e&&t.attr(e),n.symbolClip&&!i?r&&t.attr(r):r&&Vp[i?"updateProps":"initProps"](t,r,n.animationModel,n.dataIndex,a)}function UG(t,e,r){var n=r.dataIndex,i=r.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),c=a.get("focus"),f=a.get("blurScope"),h=a.get("scale");_I(t,function(v){if(v instanceof aa){var g=v.style;v.useStyle(Ae({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},r.style))}else v.useStyle(r.style);var m=v.ensureState("emphasis");m.style=o,h&&(m.scaleX=v.scaleX*1.1,m.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,u&&(v.cursor=u),v.z2=r.z2});var d=e.valueDim.posDesc[+(r.boundingLength>0)],p=t.__pictorialBarRect;p.ignoreClip=!0,ka(p,Qi(i),{labelFetcher:e.seriesModel,labelDataIndex:n,defaultText:bm(e.seriesModel.getData(),n),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:d}),ti(t,c,f,a.get("disabled"))}function VG(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var TAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return e.prototype.getInitialData=function(r){return r.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Ah(N_.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(N_);function CAe(t){t.registerChartView(gAe),t.registerSeriesModel(TAe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Zt(kZ,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,FZ("pictorialBar"))}var EAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r._layers=[],r}return e.prototype.render=function(r,n,i){var a=r.getData(),o=this,s=this.group,l=r.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,f=u.boundaryGap;s.x=0,s.y=c.y+f[0];function h(g){return g.name}var d=new Bc(this._layersSeries||[],l,h,h),p=[];d.add(pt(v,this,"add")).update(pt(v,this,"update")).remove(pt(v,this,"remove")).execute();function v(g,m,x){var S=o._layers;if(g==="remove"){s.remove(S[m]);return}for(var b=[],T=[],w,E=l[m].indices,M=0;M<E.length;M++){var A=a.getItemLayout(E[M]),R=A.x,L=A.y0,I=A.y;b.push(R,L),T.push(R,L+I),w=a.getItemVisual(E[M],"style")}var N,k=a.getItemLayout(E[0]),z=r.getModel("label"),B=z.get("margin"),V=r.getModel("emphasis");if(g==="add"){var F=p[m]=new Vt;N=new rte({shape:{points:b,stackedOnPoints:T,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),F.add(N),s.add(F),r.isAnimationEnabled()&&N.setClipPath(AAe(N.getBoundingRect(),r,function(){N.removeClipPath()}))}else{var F=S[x];N=F.childAt(0),s.add(F),p[m]=F,Xr(N,{shape:{points:b,stackedOnPoints:T}},r),$l(N)}ka(N,Qi(r),{labelDataIndex:E[M-1],defaultText:a.getName(E[M-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),N.setTextConfig({position:null,local:!0});var $=N.getTextContent();$&&($.x=k.x-B,$.y=k.y0+k.y/2),N.useStyle(w),a.setItemGraphicEl(m,N),Oa(N,r),ti(N,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=l,this._layers=p},e.type="themeRiver",e}(Or);function AAe(t,e,r){var n=new Mr({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Fn(n,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,r),n}var u5=2,MAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.init=function(r){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new L2(pt(this.getData,this),pt(this.getRawData,this))},e.prototype.fixData=function(r){var n=r.length,i={},a=m6(r,function(h){return i.hasOwnProperty(h[0]+"")||(i[h[0]+""]=-1),h[2]}),o=[];a.buckets.each(function(h,d){o.push({name:d,dataList:h})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var f=o[l].dataList[c][0]+"";i[f]=l}for(var f in i)i.hasOwnProperty(f)&&i[f]!==l&&(i[f]=l,r[n]=[f,0,u],n++)}return r},e.prototype.getInitialData=function(r,n){for(var i=this.getReferringComponents("singleAxis",Ci).models[0],a=i.get("type"),o=hn(r.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=Tt(),c=0,f=0;f<s.length;++f)l.push(s[f][u5]),u.get(s[f][u5])||(u.set(s[f][u5],c),c++);var h=o0(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:yw(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,d=new Kn(h,this);return d.initData(s),d},e.prototype.getLayerSeries=function(){for(var r=this.getData(),n=r.count(),i=[],a=0;a<n;++a)i[a]=a;var o=r.mapDimension("single"),s=m6(i,function(u){return r.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(f,h){return r.get(o,f)-r.get(o,h)}),l.push({name:c,indices:u})}),l},e.prototype.getAxisTooltipData=function(r,n,i){De(r)||(r=r?[r]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var f=Number.MAX_VALUE,h=-1,d=o[c].indices.length,p=0;p<d;++p){var v=a.get(r[0],o[c].indices[p]),g=Math.abs(v-n);g<=f&&(u=v,f=g,h=o[c].indices[p])}s.push(h)}return{dataIndices:s,nestestValue:u}},e.prototype.formatTooltip=function(r,n,i){var a=this.getData(),o=a.getName(r),s=a.get(a.mapDimension("value"),r);return ea("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Vr);function RAe(t,e){t.eachSeriesByType("themeRiver",function(r){var n=r.getData(),i=r.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=r.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=Ze(s[0],o.height),s[1]=Ze(s[1],o.height);var u=o.height-s[0]-s[1];HG(n,r,u)}else{s[0]=Ze(s[0],o.width),s[1]=Ze(s[1],o.width);var c=o.width-s[0]-s[1];HG(n,r,c)}n.setLayout("layoutInfo",a)})}function HG(t,e,r){if(t.count())for(var n=e.coordinateSystem,i=e.getLayerSeries(),a=t.mapDimension("single"),o=t.mapDimension("value"),s=Oe(i,function(g){return Oe(g.indices,function(m){var x=n.dataToPoint(t.get(a,m));return x[1]=t.get(o,m),x})}),l=PAe(s),u=l.y0,c=r/l.max,f=i.length,h=i[0].indices.length,d,p=0;p<h;++p){d=u[p]*c,t.setItemLayout(i[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:d,y:s[0][p][1]*c});for(var v=1;v<f;++v)d+=s[v-1][p][1]*c,t.setItemLayout(i[v].indices[p],{layerIndex:v,x:s[v][p][0],y0:d,y:s[v][p][1]*c})}}function PAe(t){for(var e=t.length,r=t[0].length,n=[],i=[],a=0,o=0;o<r;++o){for(var s=0,l=0;l<e;++l)s+=t[l][o][1];s>a&&(a=s),n.push(s)}for(var u=0;u<r;++u)i[u]=(a-n[u])/2;a=0;for(var c=0;c<r;++c){var f=n[c]+i[c];f>a&&(a=f)}return{y0:i,max:a}}function LAe(t){t.registerChartView(EAe),t.registerSeriesModel(MAe),t.registerLayout(RAe),t.registerProcessor(P2("themeRiver"))}var DAe=2,IAe=4,GG=function(t){he(e,t);function e(r,n,i,a){var o=t.call(this)||this;o.z2=DAe,o.textConfig={inside:!0},Ht(o).seriesIndex=n.seriesIndex;var s=new Ar({z2:IAe,silent:r.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,r,n,i,a),o}return e.prototype.updateData=function(r,n,i,a,o){this.node=n,n.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;Ht(s).dataIndex=n.dataIndex;var l=n.getModel(),u=l.getModel("emphasis"),c=n.getLayout(),f=Ae({},c);f.label=null;var h=n.getVisual("style");h.lineJoin="bevel";var d=n.getVisual("decal");d&&(h.decal=lm(d,o));var p=np(l.getModel("itemStyle"),f,!0);Ae(f,p),G(bo,function(x){var S=s.ensureState(x),b=l.getModel([x,"itemStyle"]);S.style=b.getItemStyle();var T=np(b,f);T&&(S.shape=T)}),r?(s.setShape(f),s.shape.r=c.r0,Fn(s,{shape:{r:c.r}},i,n.dataIndex)):(Xr(s,{shape:f},i),$l(s)),s.useStyle(h),this._updateLabel(i);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var g=u.get("focus"),m=g==="ancestor"?n.getAncestorsIndices():g==="descendant"?n.getDescendantIndices():g;ti(this,m,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(r){var n=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),f=this,h=f.getTextContent(),d=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(p!=null&&Math.abs(s)<p);h.ignore=!v,G(o_,function(m){var x=m==="normal"?i.getModel("label"):i.getModel([m,"label"]),S=m==="normal",b=S?h:h.ensureState(m),T=r.getFormattedLabel(d,m);S&&(T=T||n.node.name),b.style=dn(x,{},null,m!=="normal",!0),T&&(b.style.text=T);var w=x.get("show");w!=null&&!S&&(b.ignore=!w);var E=g(x,"position"),M=S?f:f.states[m],A=M.style.fill;M.textConfig={outsideFill:x.get("color")==="inherit"?A:null,inside:E!=="outside"};var R,L=g(x,"distance")||0,I=g(x,"align"),N=g(x,"rotate"),k=Math.PI*.5,z=Math.PI*1.5,B=ps(N==="tangential"?Math.PI/2-l:l),V=B>k&&!i_(B-k)&&B<z;E==="outside"?(R=o.r+L,I=V?"right":"left"):!I||I==="center"?(s===2*Math.PI&&o.r0===0?R=0:R=(o.r+o.r0)/2,I="center"):I==="left"?(R=o.r0+L,I=V?"right":"left"):I==="right"&&(R=o.r-L,I=V?"left":"right"),b.style.align=I,b.style.verticalAlign=g(x,"verticalAlign")||"middle",b.x=R*u+o.cx,b.y=R*c+o.cy;var F=0;N==="radial"?F=ps(-l)+(V?Math.PI:0):N==="tangential"?F=ps(Math.PI/2-l)+(V?Math.PI:0):Ur(N)&&(F=N*Math.PI/180),b.rotation=ps(F)});function g(m,x){var S=m.get(x);return S==null?a.get(x):S}h.dirtyStyle()},e}(wo),HR="sunburstRootToNode",WG="sunburstHighlight",NAe="sunburstUnhighlight";function OAe(t){t.registerAction({type:HR,update:"updateView"},function(e,r){r.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(i,a){var o=O_(e,[HR],i);if(o){var s=i.getViewRoot();s&&(e.direction=pI(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),t.registerAction({type:WG,update:"none"},function(e,r,n){e=Ae({},e),r.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=O_(e,[WG],a);o&&(e.dataIndex=o.node.dataIndex)}n.dispatchAction(Ae(e,{type:"highlight"}))}),t.registerAction({type:NAe,update:"updateView"},function(e,r,n){e=Ae({},e),n.dispatchAction(Ae(e,{type:"downplay"}))})}var kAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i,a){var o=this;this.seriesModel=r,this.api=i,this.ecModel=n;var s=r.getData(),l=s.tree.root,u=r.getViewRoot(),c=this.group,f=r.get("renderLabelForZeroData"),h=[];u.eachNode(function(x){h.push(x)});var d=this._oldChildren||[];p(h,d),m(l,u),this._initEvents(),this._oldChildren=h;function p(x,S){if(x.length===0&&S.length===0)return;new Bc(S,x,b,b).add(T).update(T).remove(Zt(T,null)).execute();function b(w){return w.getId()}function T(w,E){var M=w==null?null:x[w],A=E==null?null:S[E];v(M,A)}}function v(x,S){if(!f&&x&&!x.getValue()&&(x=null),x!==l&&S!==l){if(S&&S.piece)x?(S.piece.updateData(!1,x,r,n,i),s.setItemGraphicEl(x.dataIndex,S.piece)):g(S);else if(x){var b=new GG(x,r,n,i);c.add(b),s.setItemGraphicEl(x.dataIndex,b)}}}function g(x){x&&x.piece&&(c.remove(x.piece),x.piece=null)}function m(x,S){S.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,x,r,n,i):(o.virtualPiece=new GG(x,r,n,i),c.add(o.virtualPiece)),S.piece.off("click"),o.virtualPiece.on("click",function(b){o._rootToNode(S.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(n){var i=!1,a=r.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===n.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")r._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";cw(u,c)}}i=!0}})})},e.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:HR,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},e.prototype.containPoint=function(r,n){var i=n.getData(),a=i.getItemLayout(0);if(a){var o=r[0]-a.cx,s=r[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(Or),FAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r.ignoreStyleOnData=!0,r}return e.prototype.getInitialData=function(r,n){var i={name:r.name,children:r.data};Yte(i);var a=this._levelModels=Oe(r.levels||[],function(l){return new Br(l,this,n)},this),o=dI.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var f=o.getNodeByDataIndex(c),h=a[f.depth];return h&&(u.parentModel=h),u})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(r){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treePathInfo=y4(i,this),n},e.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var n=this.getRawData().tree.root;(!r||r!==n&&!n.contains(r))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){mte(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Vr);function Yte(t){var e=0;G(t.children,function(n){Yte(n);var i=n.value;De(i)&&(i=i[0]),e+=i});var r=t.value;De(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=e),r<0&&(r=0),De(t.value)?t.value[0]=r:t.value=r}var $G=Math.PI/180;function BAe(t,e,r){e.eachSeriesByType(t,function(n){var i=n.get("center"),a=n.get("radius");De(a)||(a=[0,a]),De(i)||(i=[i,i]);var o=r.getWidth(),s=r.getHeight(),l=Math.min(o,s),u=Ze(i[0],o),c=Ze(i[1],s),f=Ze(a[0],l/2),h=Ze(a[1],l/2),d=-n.get("startAngle")*$G,p=n.get("minAngle")*$G,v=n.getData().tree.root,g=n.getViewRoot(),m=g.depth,x=n.get("sort");x!=null&&qte(g,x);var S=0;G(g.children,function(B){!isNaN(B.getValue())&&S++});var b=g.getValue(),T=Math.PI/(b||S)*2,w=g.depth>0,E=g.height-(w?-1:1),M=(h-f)/(E||1),A=n.get("clockwise"),R=n.get("stillShowZeroSum"),L=A?1:-1,I=function(B,V){if(B){var F=V;if(B!==v){var $=B.getValue(),W=b===0&&R?T:$*T;W<p&&(W=p),F=V+L*W;var H=B.depth-m-(w?-1:1),X=f+M*H,te=f+M*(H+1),Y=n.getLevelModel(B);if(Y){var ee=Y.get("r0",!0),se=Y.get("r",!0),ne=Y.get("radius",!0);ne!=null&&(ee=ne[0],se=ne[1]),ee!=null&&(X=Ze(ee,l/2)),se!=null&&(te=Ze(se,l/2))}B.setLayout({angle:W,startAngle:V,endAngle:F,clockwise:A,cx:u,cy:c,r0:X,r:te})}if(B.children&&B.children.length){var le=0;G(B.children,function(pe){le+=I(pe,V+le)})}return F-V}};if(w){var N=f,k=f+M,z=Math.PI*2;v.setLayout({angle:z,startAngle:d,endAngle:d+z,clockwise:A,cx:u,cy:c,r0:N,r:k})}I(g,d)})}function qte(t,e){var r=t.children||[];t.children=zAe(r,e),r.length&&G(t.children,function(n){qte(n,e)})}function zAe(t,e){if(Lt(e)){var r=Oe(t,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return r.sort(function(i,a){return e(i.params,a.params)}),Oe(r,function(i){return t[i.index]})}else{var n=e==="asc";return t.sort(function(i,a){var o=(i.getValue()-a.getValue())*(n?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(n?-1:1):o})}}function UAe(t){var e={};function r(n,i,a){for(var o=n;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return n.depth>1&&ft(s)&&(s=im(s,(n.depth-1)/(a-1)*.5)),s}t.eachSeriesByType("sunburst",function(n){var i=n.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=r(o,n,a.root.height));var u=i.ensureUniqueItemVisual(o.dataIndex,"style");Ae(u,l)})})}function VAe(t){t.registerChartView(kAe),t.registerSeriesModel(FAe),t.registerLayout(Zt(BAe,"sunburst")),t.registerProcessor(Zt(P2,"sunburst")),t.registerVisual(UAe),OAe(t)}var jG={color:"fill",borderColor:"stroke"},HAe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Rc=kr(),GAe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(r,n){return Vu(null,this)},e.prototype.getDataParams=function(r,n,i){var a=t.prototype.getDataParams.call(this,r,n);return i&&(a.info=Rc(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Vr);function WAe(t,e){return e=e||[0,0],Oe(["x","y"],function(r,n){var i=this.getAxis(r),a=e[n],o=t[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function $Ae(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(r){return t.dataToPoint(r)},size:pt(WAe,t)}}}function jAe(t,e){return e=e||[0,0],Oe([0,1],function(r){var n=e[r],i=t[r]/2,a=[],o=[];return a[r]=n-i,o[r]=n+i,a[1-r]=o[1-r]=e[1-r],Math.abs(this.dataToPoint(a)[r]-this.dataToPoint(o)[r])},this)}function XAe(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(r){return t.dataToPoint(r)},size:pt(jAe,t)}}}function KAe(t,e){var r=this.getAxis(),n=e instanceof Array?e[0]:e,i=(t instanceof Array?t[0]:t)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function YAe(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(r){return t.dataToPoint(r)},size:pt(KAe,t)}}}function qAe(t,e){return e=e||[0,0],Oe(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",a=this[i](),o=e[n],s=t[n]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function ZAe(t){var e=t.getRadiusAxis(),r=t.getAngleAxis(),n=e.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:n[1],r0:n[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),o=r.dataToAngle(i[1]),s=t.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:pt(qAe,t)}}}function JAe(t){var e=t.getRect(),r=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return t.dataToPoint(n,i)}}}}var Pc="emphasis",rh="normal",xI="blur",SI="select",Ch=[rh,Pc,xI,SI],c5={normal:["itemStyle"],emphasis:[Pc,"itemStyle"],blur:[xI,"itemStyle"],select:[SI,"itemStyle"]},f5={normal:["label"],emphasis:[Pc,"label"],blur:[xI,"label"],select:[SI,"label"]},QAe=["x","y"],eMe="e\0\0",Ls={normal:{},emphasis:{},blur:{},select:{}},tMe={cartesian2d:$Ae,geo:XAe,single:YAe,polar:ZAe,calendar:JAe};function GR(t){return t instanceof yr}function WR(t){return t instanceof nl}function rMe(t,e){e.copyTransform(t),WR(e)&&WR(t)&&(e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel,e.invisible=t.invisible,e.ignore=t.ignore,GR(e)&&GR(t)&&e.setShape(t.shape))}var nMe=function(t){he(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type=e.type,r}return e.prototype.render=function(r,n,i,a){this._progressiveEls=null;var o=this._data,s=r.getData(),l=this.group,u=XG(r,s,n,i);o||l.removeAll(),s.diff(o).add(function(f){h5(i,null,f,u(f,a),r,l,s)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&g4(h,Rc(h).option,r)}).update(function(f,h){var d=o.getItemGraphicEl(h);h5(i,d,f,u(f,a),r,l,s)}).execute();var c=r.get("clip",!0)?M2(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(r,n,i,a,o){var s=n.getData(),l=XG(n,s,i,a),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=h5(null,null,f,l(f,o),n,this.group,s);h&&(h.traverse(c),u.push(h))}},e.prototype.eachRendered=function(r){Eh(this._progressiveEls||this.group,r)},e.prototype.filterForExposedEvent=function(r,n,i,a){var o=n.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},e.type="custom",e}(Or);function bI(t){var e=t.type,r;if(e==="path"){var n=t.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,a=Qte(n);r=VT(a,null,i,n.layout||"center"),Rc(r).customPathData=a}else if(e==="image")r=new aa({}),Rc(r).customImagePath=t.style.image;else if(e==="text")r=new Ar({});else if(e==="group")r=new Vt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=CL(e);if(!o){var s="";nn(s)}r=new o}return Rc(r).customGraphicType=e,r.name=t.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function wI(t,e,r,n,i,a,o){See(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),n&&n.transition==null&&(n.transition=QAe);var l=n&&n.style;if(l){if(e.type==="text"){var u=l;_t(u,"textFill")&&(u.fill=u.textFill),_t(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=GR(e)?l.decal:null;t&&f&&(f.dirty=!0,c=lm(f,t)),l.__decalPattern=c}if(WR(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}E3(e,n,a,{dataIndex:r,isInit:o,clearStyle:!0}),zw(e,n.keyframeAnimation,a)}function Zte(t,e,r,n,i){var a=e.isGroup?null:e,o=i&&i[t].cfg;if(a){var s=a.ensureState(t);if(n===!1){var l=a.getState(t);l&&(l.style=null)}else s.style=n||null;o&&(s.textConfig=o),Cp(a)}}function iMe(t,e,r){if(!t.isGroup){var n=t,i=r.currentZ,a=r.currentZLevel;n.z=i,n.zlevel=a;var o=e.z2;o!=null&&(n.z2=o||0);for(var s=0;s<Ch.length;s++)aMe(n,e,Ch[s])}}function aMe(t,e,r){var n=r===rh,i=n?e:Yw(e,r),a=i?i.z2:null,o;a!=null&&(o=n?t:t.ensureState(r),o.z2=a||0)}function XG(t,e,r,n){var i=t.get("renderItem"),a=t.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):tMe[a.type](a));for(var s=At({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:b,style:w,ordinalRawValue:T,styleEmphasis:E,visual:R,barLayout:L,currentSeriesIndices:I,font:N},o.api||{}),l={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:oMe(t.getData())},u,c,f={},h={},d={},p={},v=0;v<Ch.length;v++){var g=Ch[v];d[g]=t.getModel(c5[g]),p[g]=t.getModel(f5[g])}function m(k){return k===u?c||(c=e.getItemModel(k)):e.getItemModel(k)}function x(k,z){return e.hasItemOption?k===u?f[z]||(f[z]=m(k).getModel(c5[z])):m(k).getModel(c5[z]):d[z]}function S(k,z){return e.hasItemOption?k===u?h[z]||(h[z]=m(k).getModel(f5[z])):m(k).getModel(f5[z]):p[z]}return function(k,z){return u=k,c=null,f={},h={},i&&i(At({dataIndexInside:k,dataIndex:e.getRawIndex(k),actionType:z?z.type:null},l),s)};function b(k,z){return z==null&&(z=u),e.getStore().get(e.getDimensionIndex(k||0),z)}function T(k,z){z==null&&(z=u),k=k||0;var B=e.getDimensionInfo(k);if(!B){var V=e.getDimensionIndex(k);return V>=0?e.getStore().get(V,z):void 0}var F=e.get(B.name,z),$=B&&B.ordinalMeta;return $?$.categories[F]:F}function w(k,z){z==null&&(z=u);var B=e.getItemVisual(z,"style"),V=B&&B.fill,F=B&&B.opacity,$=x(z,rh).getItemStyle();V!=null&&($.fill=V),F!=null&&($.opacity=F);var W={inheritColor:ft(V)?V:"#000"},H=S(z,rh),X=dn(H,null,W,!1,!0);X.text=H.getShallow("show")?Jt(t.getFormattedLabel(z,rh),bm(e,z)):null;var te=sw(H,W,!1);return A(k,$),$=xV($,X,te),k&&M($,k),$.legacy=!0,$}function E(k,z){z==null&&(z=u);var B=x(z,Pc).getItemStyle(),V=S(z,Pc),F=dn(V,null,null,!0,!0);F.text=V.getShallow("show")?Eu(t.getFormattedLabel(z,Pc),t.getFormattedLabel(z,rh),bm(e,z)):null;var $=sw(V,null,!0);return A(k,B),B=xV(B,F,$),k&&M(B,k),B.legacy=!0,B}function M(k,z){for(var B in z)_t(z,B)&&(k[B]=z[B])}function A(k,z){k&&(k.textFill&&(z.textFill=k.textFill),k.textPosition&&(z.textPosition=k.textPosition))}function R(k,z){if(z==null&&(z=u),_t(jG,k)){var B=e.getItemVisual(z,"style");return B?B[jG[k]]:null}if(_t(HAe,k))return e.getItemVisual(z,k)}function L(k){if(a.type==="cartesian2d"){var z=a.getBaseAxis();return Yve(At({axis:z},k))}}function I(){return r.getCurrentSeriesIndices()}function N(k){return EL(k,r)}}function oMe(t){var e={};return G(t.dimensions,function(r){var n=t.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,a=e[i]=e[i]||[];a[n.coordDimIndex]=t.getDimensionIndex(r)}}),e}function h5(t,e,r,n,i,a,o){if(!n){a.remove(e);return}var s=TI(t,e,r,n,i,a);return s&&o.setItemGraphicEl(r,s),s&&ti(s,n.focus,n.blurScope,n.emphasisDisabled),s}function TI(t,e,r,n,i,a){var o=-1,s=e;e&&Jte(e,n,i)&&(o=hr(a.childrenRef(),e),e=null);var l=!e,u=e;u?u.clearStates():(u=bI(n),s&&rMe(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Ls.normal.cfg=Ls.normal.conOpt=Ls.emphasis.cfg=Ls.emphasis.conOpt=Ls.blur.cfg=Ls.blur.conOpt=Ls.select.cfg=Ls.select.conOpt=null,Ls.isLegacy=!1,lMe(u,r,n,i,l,Ls),sMe(u,r,n,i,l),wI(t,u,r,n,Ls,i,l),_t(n,"info")&&(Rc(u).info=n.info);for(var c=0;c<Ch.length;c++){var f=Ch[c];if(f!==rh){var h=Yw(n,f),d=CI(n,h,f);Zte(f,u,h,d,Ls)}}return iMe(u,n,i),n.type==="group"&&uMe(t,u,r,n,i),o>=0?a.replaceAt(u,o):a.add(u),u}function Jte(t,e,r){var n=Rc(t),i=e.type,a=e.shape,o=e.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&dMe(a)&&Qte(a)!==n.customPathData||i==="image"&&_t(o,"image")&&o.image!==n.customImagePath}function sMe(t,e,r,n,i){var a=r.clipPath;if(a===!1)t&&t.getClipPath()&&t.removeClipPath();else if(a){var o=t.getClipPath();o&&Jte(o,a,n)&&(o=null),o||(o=bI(a),t.setClipPath(o)),wI(null,o,e,a,null,n,i)}}function lMe(t,e,r,n,i,a){if(!t.isGroup){KG(r,null,a),KG(r,Pc,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var c=t.getTextContent();if(o===!1)c&&t.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=bI(o),t.setTextContent(c)),wI(null,c,e,o,null,n,i);for(var f=o&&o.style,h=0;h<Ch.length;h++){var d=Ch[h];if(d!==rh){var p=a[d].conOpt;Zte(d,c,p,CI(o,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function KG(t,e,r){var n=e?Yw(t,e):t,i=e?CI(t,n,Pc):t.style,a=t.type,o=n?n.textConfig:null,s=t.textContent,l=s?e?Yw(s,e):s:null;if(i&&(r.isLegacy||gee(i,a,!!o,!!l))){r.isLegacy=!0;var u=mee(i,a,!e);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var f=e?r[e]:r.normal;f.cfg=o,f.conOpt=l}function Yw(t,e){return e?t?t[e]:null:t}function CI(t,e,r){var n=e&&e.style;return n==null&&r===Pc&&t&&(n=t.styleEmphasis),n}function uMe(t,e,r,n,i){var a=n.children,o=a?a.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){fMe({api:t,oldChildren:e.children()||[],newChildren:a||[],dataIndex:r,seriesModel:i,group:e});return}u&&e.removeAll();for(var c=0;c<o;c++){var f=a[c],h=e.childAt(c);f?(f.ignore==null&&(f.ignore=!1),TI(t,h,r,f,i,e)):h.ignore=!0}for(var d=e.childCount()-1;d>=c;d--){var p=e.childAt(d);cMe(e,p,i)}}}function cMe(t,e,r){e&&g4(e,Rc(t).option,r)}function fMe(t){new Bc(t.oldChildren,t.newChildren,YG,YG,t).add(qG).update(qG).remove(hMe).execute()}function YG(t,e){var r=t&&t.name;return r!=null?r:eMe+e}function qG(t,e){var r=this.context,n=t!=null?r.newChildren[t]:null,i=e!=null?r.oldChildren[e]:null;TI(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function hMe(t){var e=this.context,r=e.oldChildren[t];r&&g4(r,Rc(r).option,e.seriesModel)}function Qte(t){return t&&(t.pathData||t.d)}function dMe(t){return t&&(_t(t,"pathData")||_t(t,"d"))}function pMe(t){t.registerChartView(nMe),t.registerSeriesModel(GAe)}Ot(l1e);Ot(hQ);Ot(yQ);Ot(t_e);Ot(o_e);var vMe=yi.vec3,gMe=iD.isDimensionStacked;function mMe(t){var e=t[0],r=t[1];return!(e>0&&r>0||e<0&&r<0)}function yMe(t,e){var r=t.getData(),n=t.get("barSize");if(n==null){var i=e.size,a,o,s=e.getAxis("x"),l=e.getAxis("y");s.type==="category"?a=s.getBandWidth()*.7:a=Math.round(i[0]/Math.sqrt(r.count()))*.6,l.type==="category"?o=l.getBandWidth()*.7:o=Math.round(i[1]/Math.sqrt(r.count()))*.6,n=[a,o]}else De(n)||(n=[n,n]);var u=e.getAxis("z").scale.getExtent(),c=mMe(u),f=["x","y","z"].map(function(p){return t.coordDimToDataDim(p)[0]}),h=gMe(r,f[2]),d=h?r.getCalculationInfo("stackResultDimension"):f[2];r.each(f,function(p,v,g,m){var x=r.get(d,m),S=h?x-g:c?0:u[0],b=e.dataToPoint([p,v,S]),T=e.dataToPoint([p,v,x]),w=vMe.dist(b,T),E=[0,T[1]<b[1]?-1:1,0];Math.abs(w)===0&&(w=.1);var M=[n[0],w,n[1]];r.setItemLayout(m,[b,E,M])}),r.setLayout("orient",[1,0,0])}function EI(t,e,r){for(var n=t.getDataExtent(e),i=t.getDataExtent(r),a=n[1]-n[0]||n[0],o=i[1]-i[0]||i[0],s=50,l=new Uint8Array(s*s),u=0;u<t.count();u++){var c=t.get(e,u),f=t.get(r,u),h=Math.floor((c-n[0])/a*(s-1)),d=Math.floor((f-i[0])/o*(s-1)),p=d*s+h;l[p]=l[p]||1}for(var v=0,u=0;u<l.length;u++)l[u]&&v++;return v/l.length}var ZG=yi.vec3,_Me=iD.isDimensionStacked;function xMe(t,e){var r=t.getData(),n=t.get("minHeight")||0,i=t.get("barSize"),a=["lng","lat","alt"].map(function(u){return t.coordDimToDataDim(u)[0]});if(i==null){var o=e.radius*Math.PI,s=EI(r,a[0],a[1]);i=[o/Math.sqrt(r.count()/s),o/Math.sqrt(r.count()/s)]}else De(i)||(i=[i,i]);var l=AI(r,a);r.each(a,function(u,c,f,h){var d=r.get(l.dimension,h),p=l.isStacked?d-f:e.altitudeAxis.scale.getExtent()[0],v=Math.max(e.altitudeAxis.dataToCoord(f),n),g=e.dataToPoint([u,c,p]),m=e.dataToPoint([u,c,d]),x=ZG.sub([],m,g);ZG.normalize(x,x);var S=[i[0],v,i[1]];r.setItemLayout(h,[g,x,S])}),r.setLayout("orient",Ne.UP.array)}function SMe(t,e){var r=t.getData(),n=t.get("barSize"),i=t.get("minHeight")||0,a=["lng","lat","alt"].map(function(c){return t.coordDimToDataDim(c)[0]});if(n==null){var o=Math.min(e.size[0],e.size[2]),s=EI(r,a[0],a[1]);n=[o/Math.sqrt(r.count()/s),o/Math.sqrt(r.count()/s)]}else De(n)||(n=[n,n]);var l=[0,1,0],u=AI(r,a);r.each(a,function(c,f,h,d){var p=r.get(u.dimension,d),v=u.isStacked?p-h:e.altitudeAxis.scale.getExtent()[0],g=Math.max(e.altitudeAxis.dataToCoord(h),i),m=e.dataToPoint([c,f,v]),x=[n[0],g,n[1]];r.setItemLayout(d,[m,l,x])}),r.setLayout("orient",[1,0,0])}function bMe(t,e){var r=t.getData(),n=t.coordDimToDataDim("lng")[0],i=t.coordDimToDataDim("lat")[0],a=t.coordDimToDataDim("alt")[0],o=t.get("barSize"),s=t.get("minHeight")||0;if(o==null){var l=r.getDataExtent(n),u=r.getDataExtent(i),c=e.dataToPoint([l[0],u[0]]),f=e.dataToPoint([l[1],u[1]]),h=Math.min(Math.abs(c[0]-f[0]),Math.abs(c[1]-f[1]))||1,d=EI(r,n,i);o=[h/Math.sqrt(r.count()/d),h/Math.sqrt(r.count()/d)]}else De(o)||(o=[o,o]),o[0]/=e.getScale()/16,o[1]/=e.getScale()/16;var p=[0,0,1],v=[n,i,a],g=AI(r,v);r.each(v,function(m,x,S,b){var T=r.get(g.dimension,b),w=g.isStacked?T-S:0,E=e.dataToPoint([m,x,w]),M=e.dataToPoint([m,x,T]),A=Math.max(M[2]-E[2],s),R=[o[0],A,o[1]];r.setItemLayout(b,[E,p,R])}),r.setLayout("orient",[1,0,0])}function AI(t,e){var r=_Me(t,e[2]);return{dimension:r?t.getCalculationInfo("stackResultDimension"):e[2],isStacked:r}}function wMe(t){t.registerLayout(function(e,r){e.eachSeriesByType("bar3D",function(n){var i=n.coordinateSystem,a=i&&i.type;a==="globe"?xMe(n,i):a==="cartesian3D"?yMe(n,i):a==="geo3D"?SMe(n,i):(a==="mapbox3D"||a==="maptalks3D")&&bMe(n,i)})})}var Dh={};Dh.getFormattedLabel=function(t,e,r,n,i){r=r||"normal";var a=t.getData(n),o=a.getItemModel(e),s=t.getDataParams(e,n);i!=null&&s.value instanceof Array&&(s.value=s.value[i]);var l=o.get(r==="normal"?["label","formatter"]:["emphasis","label","formatter"]);l==null&&(l=o.get(["label","formatter"]));var u;return typeof l=="function"?(s.status=r,u=l(s)):typeof l=="string"&&(u=DL(l,s)),u};Dh.normalizeToArray=function(t){return t instanceof Array?t:t==null?[]:[t]};function TMe(t,e){var r=[];return G(t.dimensions,function(n){var i=t.getDimensionInfo(n),a=i.otherDims,o=a[e];o!=null&&o!==!1&&(r[o]=i.name)}),r}function D2(t,e,r){function n(f){var h=[],d=TMe(i,"tooltip");d.length?G(d,function(v){p(i.get(v,e),v)}):G(f,p);function p(v,g){var m=i.getDimensionInfo(g);if(!(!m||m.otherDims.tooltip===!1)){var x=m.type,S="- "+(m.tooltipName||m.name)+": "+(x==="ordinal"?v+"":x==="time"?r?"":Whe("yyyy/MM/dd hh:mm:ss",v):uw(v));S&&h.push(Oi(S))}}return"<br/>"+h.join("<br/>")}var i=t.getData(),a=t.getRawValue(e),o=De(a)?n(a):Oi(uw(a)),s=i.getName(e),l=Zi(i,e);Nt(l)&&l.colorStops&&(l=(l.colorStops[0]||{}).color),l=l||"transparent";var u=cq(l),c=t.name;return c==="\0-"&&(c=""),c=c?Oi(c)+(r?": ":"<br/>"):"",r?u+c+o:c+u+(s?Oi(s)+": "+o:o)}function x4(t,e,r){r=r||t.getSource();var n=e||wZ(t.get("coordinateSystem"))||["x","y","z"],i=m2(r,{dimensionsDefine:r.dimensionsDefine||t.get("dimensions"),encodeDefine:r.encodeDefine||t.get("encode"),coordDimensions:n.map(function(s){var l=t.getReferringComponents(s+"Axis3D").models[0];return{type:l&&l.get("type")==="category"?"ordinal":"float",name:s}})});t.get("coordinateSystem")==="cartesian3D"&&i.forEach(function(s){if(n.indexOf(s.coordDim)>=0){var l=t.getReferringComponents(s.coordDim+"Axis3D").models[0];l&&l.get("type")==="category"&&(s.ordinalMeta=l.getOrdinalMeta())}});var a=iD.enableDataStack(t,i,{byIndex:!0,stackedCoordDimension:"z"}),o=new Kn(i,t);return o.setCalculationInfo(a),o.initData(r),o}var ere=Vr.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,e){return x4(this)},getFormattedLabel:function(t,e,r,n){var i=Dh.getFormattedLabel(this,t,e,r,n);return i==null&&(i=this.getData().get("z",t)),i},formatTooltip:function(t){return D2(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});xt(ere.prototype,h0);var ei=yi.vec3,CMe=yi.mat3,MI=Ir.extend(function(){return{attributes:{position:new Ir.Attribute("position","float",3,"POSITION"),normal:new Ir.Attribute("normal","float",3,"NORMAL"),color:new Ir.Attribute("color","float",4,"COLOR"),prevPosition:new Ir.Attribute("prevPosition","float",3),prevNormal:new Ir.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var e=this.enableNormal,r=this.getBarVertexCount()*t,n=this.getBarTriangleCount()*t;this.vertexCount!==r&&(this.attributes.position.init(r),e?this.attributes.normal.init(r):this.attributes.normal.value=null,this.attributes.color.init(r)),this.triangleCount!==n&&(this.indices=r>65535?new Uint32Array(n*3):new Uint16Array(n*3),this._dataIndices=new Uint32Array(r))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return(t+1)*4*(t+1)*2},_getBevelBarTriangleCount:function(t){var e=t*4+3,r=t*2+1;return(e+1)*r*2+4},setColor:function(t,e){for(var r=this.getBarVertexCount(),n=r*t,i=r*(t+1),a=n;a<i;a++)this.attributes.color.set(a,e);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=ei.create,e=ei.scaleAndAdd,r=t(),n=t(),i=t(),a=t(),o=t(),s=t(),l=t(),u=[],c=[],f=0;f<8;f++)u[f]=t();for(var h=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],d=[0,1,2,0,2,3],p=[],f=0;f<h.length;f++)for(var v=h[f],g=0;g<2;g++){for(var m=[],x=0;x<3;x++)m.push(v[d[g*3+x]]);p.push(m)}return function(S,b,T,w,E,M){var A=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(S,b,T,w,this.bevelSize,this.bevelSegments,E);else{ei.copy(i,b),ei.normalize(i,i),ei.cross(a,T,i),ei.normalize(a,a),ei.cross(n,i,a),ei.normalize(a,a),ei.negate(o,n),ei.negate(s,i),ei.negate(l,a),e(u[0],S,n,w[0]/2),e(u[0],u[0],a,w[2]/2),e(u[1],S,n,w[0]/2),e(u[1],u[1],l,w[2]/2),e(u[2],S,o,w[0]/2),e(u[2],u[2],l,w[2]/2),e(u[3],S,o,w[0]/2),e(u[3],u[3],a,w[2]/2),e(r,S,i,w[1]),e(u[4],r,n,w[0]/2),e(u[4],u[4],a,w[2]/2),e(u[5],r,n,w[0]/2),e(u[5],u[5],l,w[2]/2),e(u[6],r,o,w[0]/2),e(u[6],u[6],l,w[2]/2),e(u[7],r,o,w[0]/2),e(u[7],u[7],a,w[2]/2);var R=this.attributes;if(this.enableNormal){c[0]=n,c[1]=o,c[2]=i,c[3]=s,c[4]=a,c[5]=l;for(var L=this._vertexOffset,I=0;I<h.length;I++){for(var N=this._triangleOffset*3,k=0;k<6;k++)this.indices[N++]=L+d[k];L+=4,this._triangleOffset+=2}for(var I=0;I<h.length;I++)for(var z=c[I],k=0;k<4;k++){var B=h[I][k];R.position.set(this._vertexOffset,u[B]),R.normal.set(this._vertexOffset,z),R.color.set(this._vertexOffset++,E)}}else{for(var I=0;I<p.length;I++){for(var N=this._triangleOffset*3,k=0;k<3;k++)this.indices[N+k]=p[I][k]+this._vertexOffset;this._triangleOffset++}for(var I=0;I<u.length;I++)R.position.set(this._vertexOffset,u[I]),R.color.set(this._vertexOffset++,E)}}for(var V=this._vertexOffset,I=A;I<V;I++)this._dataIndices[I]=M}}(),_addBevelBar:function(){var t=ei.create(),e=ei.create(),r=ei.create(),n=CMe.create(),i=[],a=[1,-1,-1,1],o=[1,1,-1,-1],s=[2,0];return function(l,u,c,f,h,d,p){ei.copy(e,u),ei.normalize(e,e),ei.cross(r,c,e),ei.normalize(r,r),ei.cross(t,e,r),ei.normalize(r,r),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=e[0],n[4]=e[1],n[5]=e[2],n[6]=r[0],n[7]=r[1],n[8]=r[2],h=Math.min(f[0],f[2])/2*h;for(var v=0;v<3;v++)i[v]=Math.max(f[v]-h*2,0);for(var g=(f[0]-i[0])/2,m=(f[1]-i[1])/2,x=(f[2]-i[2])/2,S=[],b=[],T=this._vertexOffset,w=[],v=0;v<2;v++){w[v]=w[v]=[];for(var E=0;E<=d;E++)for(var M=0;M<4;M++){(E===0&&v===0||v===1&&E===d)&&w[v].push(T);for(var A=0;A<=d;A++){var R=A/d*Math.PI/2+Math.PI/2*M,L=E/d*Math.PI/2+Math.PI/2*v;b[0]=g*Math.cos(R)*Math.sin(L),b[1]=m*Math.cos(L),b[2]=x*Math.sin(R)*Math.sin(L),S[0]=b[0]+a[M]*i[0]/2,S[1]=b[1]+m+s[v]*i[1]/2,S[2]=b[2]+o[M]*i[2]/2,Math.abs(g-m)<1e-6&&Math.abs(m-x)<1e-6||(b[0]/=g*g,b[1]/=m*m,b[2]/=x*x),ei.normalize(b,b),ei.transformMat3(S,S,n),ei.transformMat3(b,b,n),ei.add(S,S,l),this.attributes.position.set(T,S),this.enableNormal&&this.attributes.normal.set(T,b),this.attributes.color.set(T,p),T++}}}for(var I=d*4+3,N=d*2+1,k=I+1,M=0;M<N;M++)for(var v=0;v<=I;v++){var z=M*k+v+this._vertexOffset,B=M*k+(v+1)%k+this._vertexOffset,V=(M+1)*k+(v+1)%k+this._vertexOffset,F=(M+1)*k+v+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[V,z,B]),this.setTriangleIndices(this._triangleOffset++,[V,F,z])}this.setTriangleIndices(this._triangleOffset++,[w[0][0],w[0][2],w[0][1]]),this.setTriangleIndices(this._triangleOffset++,[w[0][0],w[0][3],w[0][2]]),this.setTriangleIndices(this._triangleOffset++,[w[1][0],w[1][1],w[1][2]]),this.setTriangleIndices(this._triangleOffset++,[w[1][0],w[1][2],w[1][3]]),this._vertexOffset=T}}()});At(MI.prototype,S2);At(MI.prototype,CD);var EMe=yi.vec3;const AMe=Or.extend({type:"bar3D",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this._api=e,this._labelsBuilder=new qc(256,256,e);var r=this;this._labelsBuilder.getLabelPosition=function(n,i,a){if(r._data){var o=r._data.getItemLayout(n),s=o[0],l=o[1],u=o[2][1];return EMe.scaleAndAdd([],s,l,a+u)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,e,r){var n=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=n,this._barMesh||(this._barMesh=new J.Mesh({geometry:new MI,shadowDepthMaterial:new J.Material({shader:new J.Shader(J.Shader.source("ecgl.sm.depth.vertex"),J.Shader.source("ecgl.sm.depth.fragment"))}),culling:t.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var i=t.coordinateSystem;if(this._doRender(t,r),i&&i.viewGL){i.viewGL.add(this.groupGL);var a=i.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[a]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){J.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,e){var r=t.getData(),n=t.get("shading"),i=n!=="color",a=this,o=this._barMesh,s="ecgl."+n;(!o.material||o.material.shader.name!==s)&&(o.material=J.createMaterial(s,["VERTEX_COLOR"])),J.setMaterialFromModel(n,o.material,t,e),o.geometry.enableNormal=i,o.geometry.resetOffset();var l=t.get("bevelSize"),u=t.get("bevelSmoothness");o.geometry.bevelSegments=u,o.geometry.bevelSize=l;var c=[],f=new Float32Array(r.count()*4),h=0,g=0,d=!1;r.each(function(x){if(r.hasValue(x)){var S=Zi(r,x),b=Yi(r,x);b==null&&(b=1),J.parseColor(S,c),c[3]*=b,f[h++]=c[0],f[h++]=c[1],f[h++]=c[2],f[h++]=c[3],c[3]>0&&(g++,c[3]<.99&&(d=!0))}}),o.geometry.setBarCount(g);var p=r.getLayout("orient"),v=this._barIndexOfData=new Int32Array(r.count()),g=0;r.each(function(x){if(!r.hasValue(x)){v[x]=-1;return}var S=r.getItemLayout(x),b=S[0],T=S[1],w=S[2],E=x*4;c[0]=f[E++],c[1]=f[E++],c[2]=f[E++],c[3]=f[E++],c[3]>0&&(a._barMesh.geometry.addBar(b,T,p,w,c,x),v[x]=g++)}),o.geometry.dirty(),o.geometry.updateBoundingBox();var m=o.material;m.transparent=d,m.depthMask=!d,o.geometry.sortTriangles=d,this._initHandler(t,e)},_initHandler:function(t,e){var r=t.getData(),n=this._barMesh,i=t.coordinateSystem.type==="cartesian3D";n.seriesIndex=t.seriesIndex;var a=-1;n.off("mousemove"),n.off("mouseout"),n.on("mousemove",function(o){var s=n.geometry.getDataIndexOfVertex(o.triangle[0]);s!==a&&(this._downplay(a),this._highlight(s),this._labelsBuilder.updateLabels([s]),i&&e.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get("x",s),r.get("y",s),r.get("z",s,!0)]})),a=s,n.dataIndex=s},this),n.on("mouseout",function(o){this._downplay(a),this._labelsBuilder.updateLabels(),a=-1,n.dataIndex=-1,i&&e.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(t){var e=this._data;if(e){var r=this._barIndexOfData[t];if(!(r<0)){var n=e.getItemModel(t),i=n.getModel("emphasis.itemStyle"),a=i.get("color"),o=i.get("opacity");if(a==null){var s=Zi(e,t);a=im(s,-.4)}o==null&&(o=Yi(e,t));var l=J.parseColor(a);l[3]*=o,this._barMesh.geometry.setColor(r,l),this._api.getZr().refresh()}}},_downplay:function(t){var e=this._data;if(e){var r=this._barIndexOfData[t];if(!(r<0)){var n=Zi(e,t),i=Yi(e,t),a=J.parseColor(n);a[3]*=i,this._barMesh.geometry.setColor(r,a),this._api.getZr().refresh()}}},highlight:function(t,e,r,n){this._toggleStatus("highlight",t,e,r,n)},downplay:function(t,e,r,n){this._toggleStatus("downplay",t,e,r,n)},_toggleStatus:function(t,e,r,n,i){var a=e.getData(),o=Lr.queryDataIndex(a,i),s=this;o!=null?G(Dh.normalizeToArray(o),function(l){t==="highlight"?this._highlight(l):this._downplay(l)},this):a.each(function(l){t==="highlight"?s._highlight(l):s._downplay(l)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function MMe(t){t.registerChartView(AMe),t.registerSeriesModel(ere),wMe(t),t.registerProcessor(function(e,r){e.eachSeriesByType("bar3d",function(n){var i=n.getData();i.filterSelf(function(a){return i.hasValue(a)})})})}Ot(MMe);var RMe=Vr.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,e){return x4(this)},formatTooltip:function(t){return D2(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),PMe=yi.vec3;J.Shader.import(h4);const LMe=Or.extend({type:"line3D",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this._api=e},render:function(t,e,r){var n=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=n,this._line3DMesh||(this._line3DMesh=new J.Mesh({geometry:new Rh({useNativeLine:!1,sortTriangles:!0}),material:new J.Material({shader:J.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var i=t.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL);var a=i.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[a]("fragment","SRGB_DECODE")}this._doRender(t,r),this._data=t.getData(),this._camera=i.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,e){var r=t.getData(),n=this._line3DMesh;n.geometry.resetOffset();var i=r.getLayout("points"),a=[],o=new Float32Array(i.length/3*4),s=0,l=!1;r.each(function(f){var h=Zi(r,f),d=Yi(r,f);d==null&&(d=1),J.parseColor(h,a),a[3]*=d,o[s++]=a[0],o[s++]=a[1],o[s++]=a[2],o[s++]=a[3],a[3]<.99&&(l=!0)}),n.geometry.setVertexCount(n.geometry.getPolylineVertexCount(i)),n.geometry.setTriangleCount(n.geometry.getPolylineTriangleCount(i)),n.geometry.addPolyline(i,o,Lr.firstNotNull(t.get("lineStyle.width"),1)),n.geometry.dirty(),n.geometry.updateBoundingBox();var u=n.material;u.transparent=l,u.depthMask=!l;var c=t.getModel("debug.wireframe");c.get("show")?(n.geometry.createAttribute("barycentric","float",3),n.geometry.generateBarycentric(),n.material.set("both","WIREFRAME_TRIANGLE"),n.material.set("wireframeLineColor",J.parseColor(c.get("lineStyle.color")||"rgba(0,0,0,0.5)")),n.material.set("wireframeLineWidth",Lr.firstNotNull(c.get("lineStyle.width"),1))):n.material.set("both","WIREFRAME_TRIANGLE"),this._points=i,this._initHandler(t,e)},_updateAnimation:function(t){J.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,e){var r=t.getData(),n=t.coordinateSystem,i=this._line3DMesh,a=-1;i.seriesIndex=t.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(o){var s=n.pointToData(o.point.array),l=r.indicesOfNearest("x",s[0])[0];l!==a&&(e.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get("x",l),r.get("y",l),r.get("z",l)]}),i.dataIndex=l),a=l},this),i.on("mouseout",function(o){a=-1,i.dataIndex=-1,e.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var t=new gt,e=this._camera;gt.multiply(t,e.projectionMatrix,e.viewMatrix);var r=this._positionNDC,n=this._points,i=n.length/3;(!r||r.length/2!==i)&&(r=this._positionNDC=new Float32Array(i*2));for(var a=[],o=0;o<i;o++){var s=o*3,l=o*2;a[0]=n[s],a[1]=n[s+1],a[2]=n[s+2],a[3]=1,PMe.transformMat4(a,a,t.array),r[l]=a[0]/a[3],r[l+1]=a[1]/a[3]}},_pick:function(t,e,r,n,i,a){var o=this._positionNDC,s=this._data.hostModel,l=s.get("lineStyle.width"),u=-1,c=r.viewport.width,f=r.viewport.height,h=c*.5,d=f*.5;t=(t+1)*h,e=(e+1)*d;for(var p=1;p<o.length/2;p++){var v=(o[(p-1)*2]+1)*h,g=(o[(p-1)*2+1]+1)*d,m=(o[p*2]+1)*h,x=(o[p*2+1]+1)*d;if(mc(v,g,m,x,l,t,e)){var S=(v-t)*(v-t)+(g-e)*(g-e),b=(m-t)*(m-t)+(x-e)*(x-e);u=S<b?p-1:p}}if(u>=0){var T=u*3,w=new Ne(this._points[T],this._points[T+1],this._points[T+2]);a.push({dataIndex:u,point:w,pointWorld:w.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(w)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function DMe(t){t.registerChartView(LMe),t.registerSeriesModel(RMe),t.registerLayout(function(e,r){e.eachSeriesByType("line3D",function(n){var i=n.getData(),a=n.coordinateSystem;if(a){if(a.type!=="cartesian3D")return;var o=new Float32Array(i.count()*3),s=[],l=[],u=a.dimensions,c=u.map(function(f){return n.coordDimToDataDim(f)[0]});a&&i.each(c,function(f,h,d,p){s[0]=f,s[1]=h,s[2]=d,a.dataToPoint(s,l),o[p*3]=l[0],o[p*3+1]=l[1],o[p*3+2]=l[2]}),i.setLayout("points",o)}})})}Ot(DMe);const IMe=Vr.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,e){return x4(this)},getFormattedLabel:function(t,e,r,n){var i=Dh.getFormattedLabel(this,t,e,r,n);if(i==null){var a=this.getData(),o=a.dimensions[a.dimensions.length-1];i=a.get(o,t)}return i},formatTooltip:function(t){return D2(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function d5(t,n,r){var n=n||document.createElement("canvas");n.width=t,n.height=t;var i=n.getContext("2d");return r&&r(i),n}function NMe(t,e,r,n){De(e)||(e=[e,e]);var i=qw.getMarginByStyle(r,n),a=e[0]+i.left+i.right,o=e[1]+i.top+i.bottom,s=vi(t,0,0,e[0],e[1]),l=Math.max(a,o);s.x=i.left,s.y=i.top,a>o?s.y+=(l-o)/2:s.x+=(l-a)/2;var u=s.getBoundingRect();return s.x-=u.x,s.y-=u.y,s.setStyle(r),s.update(),s.__size=l,s}function OMe(t,e,r){var n=e.width,i=e.height,a=t.canvas.width,o=t.canvas.height,s=n/a,l=i/o;function u(m){return m<128?1:-1}function c(m,x){var S=1/0;m=Math.floor(m*s),x=Math.floor(x*l);for(var b=x*n+m,T=e.data[b*4],w=u(T),E=Math.max(x-r,0);E<Math.min(x+r,i);E++)for(var M=Math.max(m-r,0);M<Math.min(m+r,n);M++){var b=E*n+M,A=e.data[b*4],R=u(A),L=M-m,I=E-x;if(w!==R){var N=L*L+I*I;N<S&&(S=N)}}return w*Math.sqrt(S)}for(var f=t.createImageData(a,o),h=0;h<o;h++)for(var d=0;d<a;d++){var p=c(d,h),v=p/r*.5+.5,g=(h*a+d)*4;f.data[g++]=(1-v)*255,f.data[g++]=(1-v)*255,f.data[g++]=(1-v)*255,f.data[g++]=255}return f}var qw={getMarginByStyle:function(t){var e=t.minMargin||0,r=0;t.stroke&&t.stroke!=="none"&&(r=t.lineWidth==null?1:t.lineWidth);var n=t.shadowBlur||0,i=t.shadowOffsetX||0,a=t.shadowOffsetY||0,o={};return o.left=Math.max(r/2,-i+n,e),o.right=Math.max(r/2,i+n,e),o.top=Math.max(r/2,-a+n,e),o.bottom=Math.max(r/2,a+n,e),o},createSymbolSprite:function(t,e,r,n){var i=NMe(t,e,r),a=qw.getMarginByStyle(r);return{image:d5(i.__size,n,function(o){QT(o,i)}),margin:a}},createSDFFromCanvas:function(t,e,r,n){return d5(e,n,function(i){var a=t.getContext("2d"),o=a.getImageData(0,0,t.width,t.height);i.putImageData(OMe(i,o,r),0,0)})},createSimpleSprite:function(t,e){return d5(t,e,function(r){var n=t/2;r.beginPath(),r.arc(n,n,60,0,Math.PI*2,!1),r.closePath();var i=r.createRadialGradient(n,n,0,n,n,n);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillStyle=i,r.fill()})}},JG=yi.vec3;const kMe={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,e){var r=this.indices,n=JG.create();if(!r){r=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var i=0;i<r.length;i++)r[i]=i}if(e===0){var a=this.attributes.position,t=t.array,o=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var s,i=0;i<this.vertexCount;i++){a.get(i,n);var l=JG.sqrDist(n,t);isNaN(l)&&(l=1e7,o++),i===0?(s=l,l=0):l=l-s,this._zList[i]=l}this._noneCount=o}if(this.vertexCount<2e4)e===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var i=0;i<3;i++)this._progressiveQuickSort(e*3+i);this.dirtyIndices()},_simpleSort:function(t){var e=this._zList,r=this.indices;function n(i,a){return e[a]-e[i]}t?Array.prototype.sort.call(r,n):vm.sort(r,n,0,r.length-1)},_progressiveQuickSort:function(t){var e=this._zList,r=this.indices;this._quickSort=this._quickSort||new vm,this._quickSort.step(r,function(n,i){return e[i]-e[n]},t)}},FMe=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`;var p5=yi.vec4;J.Shader.import(FMe);var BMe=J.Mesh.extend(function(){var t=new J.Geometry({dynamic:!0,attributes:{color:new J.Geometry.Attribute("color","float",4,"COLOR"),position:new J.Geometry.Attribute("position","float",3,"POSITION"),size:new J.Geometry.Attribute("size","float",1),prevPosition:new J.Geometry.Attribute("prevPosition","float",3),prevSize:new J.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,kMe);var e=new J.Material({shader:J.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});e.enableTexture("sprite"),e.define("both","VERTEX_COLOR"),e.define("both","VERTEX_SIZE");var r=new J.Texture2D({image:document.createElement("canvas"),flipY:!1});return e.set("sprite",r),t.pick=this._pick.bind(this),{geometry:t,material:e,mode:J.Mesh.POINTS,sizeScale:1}},{_pick:function(t,e,r,n,i,a){var o=this._positionNDC;if(o)for(var s=r.viewport,l=2/s.width,u=2/s.height,c=this.geometry.vertexCount-1;c>=0;c--){var f;this.geometry.indices?f=this.geometry.indices[c]:f=c;var h=o[f*2],d=o[f*2+1],p=this.geometry.attributes.size.get(f)/this.sizeScale,v=p/2;if(t>h-v*l&&t<h+v*l&&e>d-v*u&&e<d+v*u){var g=new J.Vector3,m=new J.Vector3;this.geometry.attributes.position.get(f,g.array),J.Vector3.transformMat4(m,g,this.worldTransform),a.push({vertexIndex:f,point:g,pointWorld:m,target:this,distance:m.distance(n.getWorldPosition())})}}},updateNDCPosition:function(t,e,r){var n=this._positionNDC,i=this.geometry;(!n||n.length/2!==i.vertexCount)&&(n=this._positionNDC=new Float32Array(i.vertexCount*2));for(var a=p5.create(),o=0;o<i.vertexCount;o++)i.attributes.position.get(o,a),a[3]=1,p5.transformMat4(a,a,t.array),p5.scale(a,a,1/a[3]),n[o*2]=a[0],n[o*2+1]=a[1]}}),QG=20,eW=-10;function zMe(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function Ip(t,e){this.rootNode=new J.Node,this.is2D=t,this._labelsBuilder=new qc(256,256,e),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=e,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Ip.prototype={constructor:Ip,highlightOnMouseover:!0,update:function(t,e,r,n,i){var a=this._prevMesh;this._prevMesh=this._mesh,this._mesh=a;var o=t.getData();if(n==null&&(n=0),i==null&&(i=o.count()),this._startDataIndex=n,this._endDataIndex=i-1,!this._mesh){var s=this._prevMesh&&this._prevMesh.material;this._mesh=new BMe({renderOrder:10,frustumCulling:!1}),s&&(this._mesh.material=s)}var s=this._mesh.material,l=this._mesh.geometry,u=l.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var c=this._getSymbolInfo(t,n,i),f=r.getDevicePixelRatio(),h=t.getModel("itemStyle").getItemStyle(),d=t.get("large"),p=1;c.maxSize>2?(p=this._updateSymbolSprite(t,h,c,f),s.enableTexture("sprite")):s.disableTexture("sprite"),u.position.init(i-n);var v=[];if(d){s.undefine("VERTEX_SIZE"),s.undefine("VERTEX_COLOR");var g=w1e(o),m=T1e(o);J.parseColor(g,v),v[3]*=m,s.set({color:v,u_Size:c.maxSize*this._sizeScale})}else s.set({color:[1,1,1,1]}),s.define("VERTEX_SIZE"),s.define("VERTEX_COLOR"),u.size.init(i-n),u.color.init(i-n),this._originalOpacity=new Float32Array(i-n);for(var x=o.getLayout("points"),S=u.position.value,b=0;b<i-n;b++){var T=b*3,w=b*2;if(this.is2D?(S[T]=x[w],S[T+1]=x[w+1],S[T+2]=eW):(S[T]=x[T],S[T+1]=x[T+1],S[T+2]=x[T+2]),!d){var g=Zi(o,b),m=Yi(o,b);J.parseColor(g,v),v[3]*=m,u.color.set(b,v),v[3]<.99;var E=o.getItemVisual(b,"symbolSize");E=E instanceof Array?Math.max(E[0],E[1]):E,isNaN(E)&&(E=0),u.size.value[b]=E*p*this._sizeScale,this._originalOpacity[b]=v[3]}}this._mesh.sizeScale=p,l.updateBoundingBox(),l.dirty(),this._updateMaterial(t,h);var M=t.coordinateSystem;if(M&&M.viewGL){var A=M.viewGL.isLinearSpace()?"define":"undefine";s[A]("fragment","SRGB_DECODE")}d||this._updateLabelBuilder(t,n,i),this._updateHandler(t,e,r),this._updateAnimation(t),this._api=r},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,e,r,n){r.maxSize=Math.min(r.maxSize*2,200);var i=[];return r.aspect>1?(i[0]=r.maxSize,i[1]=r.maxSize/r.aspect):(i[1]=r.maxSize,i[0]=r.maxSize*r.aspect),i[0]=i[0]||1,i[1]=i[1]||1,(this._symbolType!==r.type||!zMe(this._symbolSize,i)||this._lineWidth!==e.lineWidth)&&(qw.createSymbolSprite(r.type,i,{fill:"#fff",lineWidth:e.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(i[0]/2,10)},this._spriteImageCanvas),qw.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),QG,this._mesh.material.get("sprite").image),this._symbolType=r.type,this._symbolSize=i,this._lineWidth=e.lineWidth),this._spriteImageCanvas.width/r.maxSize*n},_updateMaterial:function(t,e){var r=t.get("blendMode")==="lighter"?J.additiveBlend:null,n=this._mesh.material;n.blend=r,n.set("lineWidth",e.lineWidth/QG);var i=J.parseColor(e.stroke);n.set("strokeColor",i),n.transparent=!0,n.depthMask=!1,n.depthTest=!this.is2D,n.sortVertices=!this.is2D},_updateLabelBuilder:function(t,o,r){var n=t.getData(),i=this._mesh.geometry,a=i.attributes.position.value,o=this._startDataIndex,s=this._mesh.sizeScale;this._labelsBuilder.updateData(n,o,r),this._labelsBuilder.getLabelPosition=function(l,u,c){var f=(l-o)*3;return[a[f],a[f+1],a[f+2]]},this._labelsBuilder.getLabelDistance=function(l,u,c){var f=i.attributes.size.get(l-o)/s;return f/2+c},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){J.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,e,r){var n=t.getData(),i=this._mesh,a=this,o=-1,s=t.coordinateSystem&&t.coordinateSystem.type==="cartesian3D",l;s&&(l=t.coordinateSystem.model),i.seriesIndex=t.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(u){var c=u.vertexIndex+a._startDataIndex;c!==o&&(this.highlightOnMouseover&&(this.downplay(n,o),this.highlight(n,c),this._labelsBuilder.updateLabels([c])),s&&r.dispatchAction({type:"grid3DShowAxisPointer",value:[n.get(t.coordDimToDataDim("x")[0],c),n.get(t.coordDimToDataDim("y")[0],c),n.get(t.coordDimToDataDim("z")[0],c)],grid3DIndex:l.componentIndex})),i.dataIndex=c,o=c},this),i.on("mouseout",function(u){var c=u.vertexIndex+a._startDataIndex;this.highlightOnMouseover&&(this.downplay(n,c),this._labelsBuilder.updateLabels()),o=-1,i.dataIndex=-1,s&&r.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:l.componentIndex})},this)},updateLayout:function(t,e,r){var n=t.getData();if(this._mesh){var i=this._mesh.geometry.attributes.position.value,a=n.getLayout("points");if(this.is2D)for(var o=0;o<a.length/2;o++){var s=o*3,l=o*2;i[s]=a[l],i[s+1]=a[l+1],i[s+2]=eW}else for(var o=0;o<a.length;o++)i[o]=a[o];this._mesh.geometry.dirty(),r.getZr().refresh()}},updateView:function(t){if(this._mesh){var e=new gt;gt.mul(e,t.viewMatrix,this._mesh.worldTransform),gt.mul(e,t.projectionMatrix,e),this._mesh.updateNDCPosition(e,this.is2D,this._api)}},highlight:function(t,e){if(!(e>this._endDataIndex||e<this._startDataIndex)){var r=t.getItemModel(e),n=r.getModel("emphasis.itemStyle"),i=n.get("color"),a=n.get("opacity");if(i==null){var o=Zi(t,e);i=im(o,-.4)}a==null&&(a=Yi(t,e));var s=J.parseColor(i);s[3]*=a,this._mesh.geometry.attributes.color.set(e-this._startDataIndex,s),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,e){if(!(e>this._endDataIndex||e<this._startDataIndex)){var r=Zi(t,e),n=Yi(t,e),i=J.parseColor(r);i[3]*=n,this._mesh.geometry.attributes.color.set(e-this._startDataIndex,i),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var e=this._mesh.geometry,r=0;r<e.vertexCount;r++){var n=this._originalOpacity[r]*t;e.attributes.color.value[r*4+3]=n}e.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var e=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",e/this._sizeScale*t);var r=this._mesh.geometry.attributes;if(r.size.value)for(var n=0;n<r.size.value.length;n++)r.size.value[n]=r.size.value[n]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,e){e&&t.material.set("positionTexture",e),t.material[e?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,e,r){if(t.get("large")){var n=Lr.firstNotNull(t.get("symbolSize"),1),s,a;return n instanceof Array?(s=Math.max(n[0],n[1]),a=n[0]/n[1]):(s=n,a=1),{maxSize:n,type:t.get("symbol"),aspect:a}}for(var i=t.getData(),a,o=i.getItemVisual(0,"symbol")||"circle",s=0,l=e;l<r;l++){var n=i.getItemVisual(l,"symbolSize"),u=i.getItemVisual(l,"symbol"),c;if(n instanceof Array)c=n[0]/n[1],s=Math.max(Math.max(n[0],n[1]),s);else{if(isNaN(n))continue;c=1,s=Math.max(n,s)}o=u,a=c}return{maxSize:s,type:o,aspect:a}}};const UMe=Or.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,e,r){if(this.groupGL.removeAll(),!!t.getData().count()){var n=t.coordinateSystem;if(n&&n.viewGL){n.viewGL.add(this.groupGL),this._camera=n.viewGL.camera;var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new Ip(!1,r)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),i.update(t,e,r),i.updateView(n.viewGL.camera)}}},incrementalPrepareRender:function(t,e,r){var n=t.coordinateSystem;n&&n.viewGL&&(n.viewGL.add(this.groupGL),this._camera=n.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,e,r,n){if(!(t.end<=t.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new Ip(!1,n),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),i.update(e,r,n,t.start,t.end),i.updateView(e.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(t){t.updateView(this._camera)},this)},highlight:function(t,e,r,n){this._toggleStatus("highlight",t,e,r,n)},downplay:function(t,e,r,n){this._toggleStatus("downplay",t,e,r,n)},_toggleStatus:function(t,e,r,n,i){var a=e.getData(),o=Lr.queryDataIndex(a,i),s=t==="highlight";o!=null?G(Dh.normalizeToArray(o),function(l){for(var u=0;u<this._pointsBuilderList.length;u++){var c=this._pointsBuilderList[u];s?c.highlight(a,l):c.downplay(a,l)}},this):a.each(function(l){for(var u=0;u<this._pointsBuilderList.length;u++){var c=this._pointsBuilderList[u];s?c.highlight(a,l):c.downplay(a,l)}})},dispose:function(){this._pointsBuilderList.forEach(function(t){t.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function VMe(t){t.registerChartView(UMe),t.registerSeriesModel(IMe),t.registerLayout({seriesType:"scatter3D",reset:function(e){var r=e.coordinateSystem;if(r){var n=r.dimensions;if(n.length<3)return;var i=n.map(function(s){return e.coordDimToDataDim(s)[0]}),a=[],o=[];return{progress:function(s,l){for(var u=new Float32Array((s.end-s.start)*3),c=s.start;c<s.end;c++){var f=(c-s.start)*3;a[0]=l.get(i[0],c),a[1]=l.get(i[1],c),a[2]=l.get(i[2],c),r.dataToPoint(a,o),u[f]=o[0],u[f+1]=o[1],u[f+2]=o[2]}l.setLayout("points",u)}}}}})}Ot(VMe);var Ni=yi.vec3,tW=yi.vec2,ic=Ni.normalize,sb=Ni.cross,rW=Ni.sub,v5=Ni.add,nh=Ni.create,Lf=nh(),Ds=nh(),Df=nh(),Hy=nh(),nW=[],iW=[];function HMe(t,e){tW.copy(nW,t[0]),tW.copy(iW,t[1]);var r=[],n=r[0]=nh(),i=r[1]=nh(),a=r[2]=nh(),o=r[3]=nh();e.dataToPoint(nW,n),e.dataToPoint(iW,o),ic(Lf,n),rW(Ds,o,n),ic(Ds,Ds),sb(Df,Ds,Lf),ic(Df,Df),sb(Ds,Lf,Df),v5(i,Lf,Ds),ic(i,i),ic(Lf,o),rW(Ds,n,o),ic(Ds,Ds),sb(Df,Ds,Lf),ic(Df,Df),sb(Ds,Lf,Df),v5(a,Lf,Ds),ic(a,a),v5(Hy,n,o),ic(Hy,Hy);var s=Ni.dot(n,Hy),l=Ni.dot(Hy,i),u=(Math.max(Ni.len(n),Ni.len(o))-s)/l*2;return Ni.scaleAndAdd(i,n,i,u),Ni.scaleAndAdd(a,o,a,u),r}function GMe(t,e,r){var n=[],i=n[0]=Ni.create(),a=n[1]=Ni.create(),o=n[2]=Ni.create(),s=n[3]=Ni.create();e.dataToPoint(t[0],i),e.dataToPoint(t[1],s);var l=Ni.dist(i,s);return Ni.lerp(a,i,s,.3),Ni.lerp(o,i,s,.3),Ni.scaleAndAdd(a,a,r,Math.min(l*.1,10)),Ni.scaleAndAdd(o,o,r,Math.min(l*.1,10)),n}function tre(t,e){for(var r=new Float32Array(t.length*3),n=0,i=[],a=0;a<t.length;a++)e.dataToPoint(t[a],i),r[n++]=i[0],r[n++]=i[1],r[n++]=i[2];return r}function rre(t){var e=[];return t.each(function(r){var n=t.getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords",!0);e.push(i)}),{coordsList:e}}function WMe(t,e){var r=t.getData(),n=t.get("polyline");r.setLayout("lineType",n?"polyline":"cubicBezier");var i=rre(r);r.each(function(a){var o=i.coordsList[a],s=n?tre:HMe;r.setItemLayout(a,s(o,e))})}function aW(t,e,r){var n=t.getData(),i=t.get("polyline"),a=rre(n);n.setLayout("lineType",i?"polyline":"cubicBezier"),n.each(function(o){var s=a.coordsList[o],l=i?tre(s,e):GMe(s,e,r);n.setItemLayout(o,l)})}function $Me(t,e){t.eachSeriesByType("lines3D",function(r){var n=r.coordinateSystem;n.type==="globe"?WMe(r,n):n.type==="geo3D"?aW(r,n,[0,1,0]):(n.type==="mapbox3D"||n.type==="maptalks3D")&&aW(r,n,[0,0,1])})}const jMe=Vr.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,e){var r=new Kn(["value"],this);return r.hasItemOption=!1,r.initData(t.data,[],function(n,i,a,o){if(n instanceof Array)return NaN;r.hasItemOption=!0;var s=n.value;if(s!=null)return s instanceof Array?s[o]:s}),r},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),XMe=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`;var oW=yi.vec3;function KMe(t){return t>0?1:-1}J.Shader.import(XMe);const YMe=J.Mesh.extend(function(){var t=new J.Material({shader:new J.Shader(J.Shader.source("ecgl.trail2.vertex"),J.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),e=new Rh({dynamic:!0});return e.createAttribute("dist","float",1),e.createAttribute("distAll","float",1),e.createAttribute("start","float",1),{geometry:e,material:t,culling:!1,$ignorePicking:!0}},{updateData:function(t,e,r){var n=t.hostModel,i=this.geometry,a=n.getModel("effect"),o=a.get("trailWidth")*e.getDevicePixelRatio(),s=a.get("trailLength"),l=n.get("effect.constantSpeed"),u=n.get("effect.period")*1e3,c=l!=null;c?this.material.set("speed",l/1e3):this.material.set("period",u),this.material[c?"define":"undefine"]("vertex","CONSTANT_SPEED");var f=n.get("polyline");i.trailLength=s,this.material.set("trailLength",s),i.resetOffset(),["position","positionPrev","positionNext"].forEach(function(E){i.attributes[E].value=r.attributes[E].value});var h=["dist","distAll","start","offset","color"];h.forEach(function(E){i.attributes[E].init(i.vertexCount)}),i.indices=r.indices;var d=[],p=a.get("trailColor"),v=a.get("trailOpacity"),g=p!=null,m=v!=null;this.updateWorldTransform();var x=this.worldTransform.x.len(),S=this.worldTransform.y.len(),b=this.worldTransform.z.len(),T=0,w=0;t.each(function(E){var M=t.getItemLayout(E),A=m?v:Yi(t,E),R=Zi(t,E);A==null&&(A=1),d=J.parseColor(g?p:R,d),d[3]*=A;for(var L=f?r.getPolylineVertexCount(M):r.getCubicCurveVertexCount(M[0],M[1],M[2],M[3]),I=0,N=[],k=[],z=T;z<T+L;z++)i.attributes.position.get(z,N),N[0]*=x,N[1]*=S,N[2]*=b,z>T&&(I+=oW.dist(N,k)),i.attributes.dist.set(z,I),oW.copy(k,N);w=Math.max(w,I);for(var B=Math.random()*(c?I:u),z=T;z<T+L;z++)i.attributes.distAll.set(z,I),i.attributes.start.set(z,B),i.attributes.offset.set(z,KMe(r.attributes.offset.get(z))*o/2),i.attributes.color.set(z,d);T+=L}),this.material.set("spotSize",w*.1*s),this.material.set("spotIntensity",a.get("spotIntensity")),i.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});J.Shader.import(h4);function qMe(t){return t.radius!=null?t.radius:t.size!=null?Math.max(t.size[0],t.size[1],t.size[2]):100}const ZMe=Or.extend({type:"lines3D",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this._meshLinesMaterial=new J.Material({shader:J.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new J.Mesh({geometry:new Rh,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new YMe},render:function(t,e,r){this.groupGL.add(this._linesMesh);var n=t.coordinateSystem,i=t.getData();if(n&&n.viewGL){var a=n.viewGL;a.add(this.groupGL),this._updateLines(t,e,r);var o=n.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[o]("fragment","SRGB_DECODE"),this._trailMesh.material[o]("fragment","SRGB_DECODE")}var s=this._trailMesh;if(s.stopAnimation(),t.get("effect.show")){this.groupGL.add(s),s.updateData(i,r,this._linesMesh.geometry),s.__time=s.__time||0;var l=3600*1e3;this._curveEffectsAnimator=s.animate("",{loop:!0}).when(l,{__time:l}).during(function(){s.setAnimationTime(s.__time)}).start()}else this.groupGL.remove(s),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=t.get("blendMode")==="lighter"?J.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,e,r){var n=t.getData(),i=t.coordinateSystem,a=this._linesMesh.geometry,o=t.get("polyline");a.expandLine=!0;var s=qMe(i);a.segmentScale=s/20;var l="lineStyle.width".split("."),u=r.getDevicePixelRatio();n.each(function(d){var p=n.getItemModel(d),v=p.get(l);v==null&&(v=1),n.setItemVisual(d,"lineWidth",v)}),a.useNativeLine=!1;var c=0,f=0;n.each(function(d){var p=n.getItemLayout(d);o?(c+=a.getPolylineVertexCount(p),f+=a.getPolylineTriangleCount(p)):(c+=a.getCubicCurveVertexCount(p[0],p[1],p[2],p[3]),f+=a.getCubicCurveTriangleCount(p[0],p[1],p[2],p[3]))}),a.setVertexCount(c),a.setTriangleCount(f),a.resetOffset();var h=[];n.each(function(d){var p=n.getItemLayout(d),v=Zi(n,d),g=Yi(n,d),m=n.getItemVisual(d,"lineWidth")*u;g==null&&(g=1),h=J.parseColor(v,h),h[3]*=g,o?a.addPolyline(p,h,m):a.addCubicCurve(p[0],p[1],p[2],p[3],h,m)}),a.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function JMe(t){t.registerChartView(ZMe),t.registerSeriesModel(jMe),t.registerLayout($Me),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}Ot(JMe);function sW(t,e){for(var r=[],n=0;n<e.length;n++)r.push(t.dataToPoint(e[n]));return r}var nre=Vr.extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var e=this.coordinateSystem,r=this.getData().getItemModel(t),n=r.option instanceof Array?r.option:r.getShallow("coords");r.get("multiPolygon")||(n=[n]);for(var i=[],a=0;a<n.length;a++){for(var o=[],s=1;s<n[a].length;s++)o.push(sW(e,n[a][s]));i.push({exterior:sW(e,n[a][0]),interiors:o})}return i},getInitialData:function(t){var e=new Kn(["value"],this);return e.hasItemOption=!1,e.initData(t.data,[],function(r,n,i,a){if(r instanceof Array)return NaN;e.hasItemOption=!0;var o=r.value;if(o!=null)return o instanceof Array?o[a]:o}),e},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});xt(nre.prototype,h0);const QMe=Or.extend({type:"polygons3D",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,e,r){this.groupGL.removeAll();var n=t.coordinateSystem;n&&n.viewGL&&n.viewGL.add(this.groupGL);var i=this._geo3DBuilderList[0];i||(i=new gm(r),i.extrudeY=n.type!=="mapbox3D"&&n.type!=="maptalks3D",this._geo3DBuilderList[0]=i),this._updateShaderDefines(n,i),i.update(t,e,r),this._geo3DBuilderList.length=1,this.groupGL.add(i.rootNode)},incrementalPrepareRender:function(t,e,r){this.groupGL.removeAll();var n=t.coordinateSystem;n&&n.viewGL&&n.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,e,r,n){var i=this._geo3DBuilderList[this._currentStep],a=e.coordinateSystem;i||(i=new gm(n),i.extrudeY=a.type!=="mapbox3D"&&a.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=i),i.update(e,r,n,t.start,t.end),this.groupGL.add(i.rootNode),this._updateShaderDefines(a,i),this._currentStep++},_updateShaderDefines:function(t,e){var r=t.viewGL.isLinearSpace()?"define":"undefine";e.rootNode.traverse(function(n){n.material&&(n.material[r]("fragment","SRGB_DECODE"),(t.type==="mapbox3D"||t.type==="maptalks3D")&&(n.material.define("fragment","NORMAL_UP_AXIS",2),n.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(t){t.dispose()})}});function e5e(t){t.registerChartView(QMe),t.registerSeriesModel(nre)}Ot(e5e);var ire=Vr.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return D2(this,t)},getInitialData:function(t,e){var r=t.data;function n(V){return!(isNaN(V.min)||isNaN(V.max)||isNaN(V.step))}function i(V){var F=cL;return Math.max(F(V.min),F(V.max),F(V.step))+1}if(!r)if(t.parametric){var b=t.parametricEquation||{},T=b.u||{},w=b.v||{};["u","v"].forEach(function(F){n(b[F])}),["x","y","z"].forEach(function(F){b[F]});var E=Math.floor((T.max+T.step-T.min)/T.step),M=Math.floor((w.max+w.step-w.min)/w.step);r=new Float32Array(E*M*5);for(var A=i(T),R=i(w),h=0,d=0;d<M;d++)for(var p=0;p<E;p++){var L=p*T.step+T.min,I=d*w.step+w.min,N=kn(Math.min(L,T.max),A),k=kn(Math.min(I,w.max),R),v=b.x(N,k),g=b.y(N,k),S=b.z(N,k);r[h++]=v,r[h++]=g,r[h++]=S,r[h++]=N,r[h++]=k}}else{var a=t.equation||{},o=a.x||{},s=a.y||{};if(["x","y"].forEach(function(V){n(a[V])}),typeof a.z!="function")return;var l=Math.floor((o.max+o.step-o.min)/o.step),u=Math.floor((s.max+s.step-s.min)/s.step);r=new Float32Array(l*u*3);for(var c=i(o),f=i(s),h=0,d=0;d<u;d++)for(var p=0;p<l;p++){var v=p*o.step+o.min,g=d*s.step+s.min,m=kn(Math.min(v,o.max),c),x=kn(Math.min(g,s.max),f),S=a.z(m,x);r[h++]=m,r[h++]=x,r[h++]=S}}var z=["x","y","z"];t.parametric&&z.push("u","v");var B=x4(this,z,r);return B},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});xt(ire.prototype,h0);var wd=yi.vec3;function t5e(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}const r5e=Or.extend({type:"surface",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node},render:function(t,e,r){var n=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=n,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var i=t.coordinateSystem,a=t.get("shading"),o=t.getData(),s="ecgl."+a;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==s)&&(this._surfaceMesh.material=J.createMaterial(s,["VERTEX_COLOR","DOUBLE_SIDED"])),J.setMaterialFromModel(a,this._surfaceMesh.material,t,r),i&&i.viewGL){i.viewGL.add(this.groupGL);var l=i.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[l]("fragment","SRGB_DECODE")}var u=t.get("parametric"),c=t.get("dataShape");c||(c=this._getDataShape(o,u));var f=t.getModel("wireframe"),h=f.get("lineStyle.width"),d=f.get("show")&&h>0;this._updateSurfaceMesh(this._surfaceMesh,t,c,d);var p=this._surfaceMesh.material;d?(p.define("WIREFRAME_QUAD"),p.set("wireframeLineWidth",h),p.set("wireframeLineColor",J.parseColor(f.get("lineStyle.color")))):p.undefine("WIREFRAME_QUAD"),this._initHandler(t,r),this._updateAnimation(t)},_updateAnimation:function(t){J.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new J.Mesh({geometry:new J.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new J.Material({shader:new J.Shader(J.Shader.source("ecgl.sm.depth.vertex"),J.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,CD),t},_initHandler:function(t,e){var r=t.getData(),n=this._surfaceMesh,i=t.coordinateSystem;function a(s,l){for(var u=1/0,c=-1,f=[],h=0;h<s.length;h++){n.geometry.attributes.position.get(s[h],f);var d=wd.dist(l.array,f);d<u&&(u=d,c=s[h])}return c}n.seriesIndex=t.seriesIndex;var o=-1;n.off("mousemove"),n.off("mouseout"),n.on("mousemove",function(s){var l=a(s.triangle,s.point);if(l>=0){var u=[];n.geometry.attributes.position.get(l,u);for(var c=i.pointToData(u),f=1/0,h=-1,d=[],p=0;p<r.count();p++){d[0]=r.get("x",p),d[1]=r.get("y",p),d[2]=r.get("z",p);var v=wd.squaredDistance(d,c);v<f&&(h=p,f=v)}h!==o&&e.dispatchAction({type:"grid3DShowAxisPointer",value:c}),o=h,n.dataIndex=h}else n.dataIndex=-1},this),n.on("mouseout",function(s){o=-1,n.dataIndex=-1,e.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(t,e,r,n){var i=t.geometry,a=e.getData(),o=a.getLayout("points"),s=0;a.each(function(Be){a.hasValue(Be)||s++});var l=s||n,u=i.attributes.position,c=i.attributes.normal,f=i.attributes.texcoord0,h=i.attributes.barycentric,d=i.attributes.color,p=r[0],v=r[1],g=e.get("shading"),m=g!=="color";if(l){var x=(p-1)*(v-1)*4;u.init(x),n&&h.init(x)}else u.value=new Float32Array(o);d.init(i.vertexCount),f.init(i.vertexCount);var S=[0,3,1,1,3,2],b=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],T=i.indices=new(i.vertexCount>65535?Uint32Array:Uint16Array)((p-1)*(v-1)*6),w=function(Be,Q,tt){tt[1]=Be*v+Q,tt[0]=Be*v+Q+1,tt[3]=(Be+1)*v+Q+1,tt[2]=(Be+1)*v+Q},E=!1;if(l){var M=[],A=[],R=0;m?c.init(i.vertexCount):c.value=null;for(var L=[[],[],[]],I=[],N=[],k=wd.create(),z=function(Be,Q,tt){var je=Q*3;return tt[0]=Be[je],tt[1]=Be[je+1],tt[2]=Be[je+2],tt},B=new Float32Array(o.length),V=new Float32Array(o.length/3*4),F=0;F<a.count();F++)if(a.hasValue(F)){var Se=J.parseColor(Zi(a,F)),$=Yi(a,F);$!=null&&(Se[3]*=$),Se[3]<.99&&(E=!0);for(var W=0;W<4;W++)V[F*4+W]=Se[W]}for(var H=[1e7,1e7,1e7],F=0;F<p-1;F++)for(var X=0;X<v-1;X++){var te=F*(v-1)+X,Y=te*4;w(F,X,M);for(var ee=!1,W=0;W<4;W++)z(o,M[W],A),t5e(A)&&(ee=!0);for(var W=0;W<4;W++)ee?u.set(Y+W,H):(z(o,M[W],A),u.set(Y+W,A)),n&&h.set(Y+W,b[W]);for(var W=0;W<6;W++)T[R++]=S[W]+Y;if(m&&!ee)for(var W=0;W<2;W++){for(var se=W*3,ne=0;ne<3;ne++){var le=M[S[se]+ne];z(o,le,L[ne])}wd.sub(I,L[0],L[1]),wd.sub(N,L[1],L[2]),wd.cross(k,I,N);for(var ne=0;ne<3;ne++){var pe=M[S[se]+ne]*3;B[pe]=B[pe]+k[0],B[pe+1]=B[pe+1]+k[1],B[pe+2]=B[pe+2]+k[2]}}}if(m)for(var F=0;F<B.length/3;F++)z(B,F,k),wd.normalize(k,k),B[F*3]=k[0],B[F*3+1]=k[1],B[F*3+2]=k[2];for(var Se=[],_e=[],F=0;F<p-1;F++)for(var X=0;X<v-1;X++){var te=F*(v-1)+X,Y=te*4;w(F,X,M);for(var W=0;W<4;W++){for(var ne=0;ne<4;ne++)Se[ne]=V[M[W]*4+ne];d.set(Y+W,Se),m&&(z(B,M[W],k),c.set(Y+W,k));var le=M[W];_e[0]=le%v/(v-1),_e[1]=Math.floor(le/v)/(p-1),f.set(Y+W,_e)}te++}}else{for(var _e=[],F=0;F<a.count();F++){_e[0]=F%v/(v-1),_e[1]=Math.floor(F/v)/(p-1);var Se=J.parseColor(Zi(a,F)),$=Yi(a,F);$!=null&&(Se[3]*=$),Se[3]<.99&&(E=!0),d.set(F,Se),f.set(F,_e)}for(var M=[],Le=0,F=0;F<p-1;F++)for(var X=0;X<v-1;X++){w(F,X,M);for(var W=0;W<6;W++)T[Le++]=M[S[W]]}m?i.generateVertexNormals():c.value=null}t.material.get("normalMap")&&i.generateTangents(),i.updateBoundingBox(),i.dirty(),t.material.transparent=E,t.material.depthMask=!E},_getDataShape:function(t,e){for(var r=-1/0,n=0,i=0,a=!1,o=e?"u":"x",s=t.count(),l=0;l<s;l++){var u=t.get(o,l);u<r&&(i=0,n++),r=u,i++}if((!n||i===1)&&(a=!0),!a)return[n+1,i];for(var c=Math.floor(Math.sqrt(s));c>0;){if(Math.floor(s/c)===s/c)return[c,s/c];c--}return c=Math.floor(Math.sqrt(s)),[c,c]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function n5e(t){t.registerChartView(r5e),t.registerSeriesModel(ire),t.registerLayout(function(e,r){e.eachSeriesByType("surface",function(n){var i=n.coordinateSystem;!i||i.type;var a=n.getData(),o=new Float32Array(3*a.count()),s=[NaN,NaN,NaN];if(i&&i.type==="cartesian3D"){var l=i.dimensions,u=l.map(function(c){return n.coordDimToDataDim(c)[0]});a.each(u,function(c,f,h,d){var p;a.hasValue(d)?p=i.dataToPoint([c,f,h]):p=s,o[d*3]=p[0],o[d*3+1]=p[1],o[d*3+2]=p[2]})}a.setLayout("points",o)})})}Ot(n5e);function lW(t,e){for(var r=[],n=0;n<e.length;n++)r.push(t.dataToPoint(e[n]));return r}var v0=Vr.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){var e=this.get("coordinateSystem");e==null||e==="geo3D"||(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var e=m2(t.data,{coordDimensions:["value"]}),r=new Kn(e,this);r.initData(t.data);var n={};return r.each(function(i){var a=r.getName(i),o=r.getItemModel(i);n[a]=o}),this._regionModelMap=n,r},formatTooltip:function(t){return D2(this,t)},getRegionModel:function(t){var e=this.getData().getName(t);return this._regionModelMap[e]||new Br(null,this)},getRegionPolygonCoords:function(t){var e=this.coordinateSystem,r=this.getData().getName(t);if(e.transform){var n=e.getRegion(r);return n?n.geometries:[]}else{this._geo||(this._geo=ED.createGeo3D(this));for(var n=this._geo.getRegion(r),i=[],a=0;a<n.geometries.length;a++){var o=n.geometries[a],s=[],l=lW(e,o.exterior);if(s&&s.length)for(var u=0;u<o.interiors.length;u++)s.push(lW(e,s[u]));i.push({interiors:s,exterior:l})}return i}},getFormattedLabel:function(t,e){var r=Dh.getFormattedLabel(this,t,e);return r==null&&(r=this.getData().getName(t)),r},defaultOption:{coordinateSystem:"geo3D",data:null}});xt(v0.prototype,nQ);xt(v0.prototype,u4);xt(v0.prototype,u0);xt(v0.prototype,c0);xt(v0.prototype,h0);const i5e=Or.extend({type:"map3D",__ecgl__:!0,init:function(t,e){this._geo3DBuilder=new gm(e),this.groupGL=new J.Node},render:function(t,e,r){var n=t.coordinateSystem;if(!(!n||!n.viewGL)){if(this.groupGL.add(this._geo3DBuilder.rootNode),n.viewGL.add(this.groupGL),n.type==="geo3D"){this._sceneHelper||(this._sceneHelper=new wh,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(n.viewGL.scene),this._sceneHelper.updateLight(t),n.viewGL.setPostEffect(t.getModel("postEffect"),r),n.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var i=this._control;i||(i=this._control=new x2({zr:r.getZr()}),this._control.init());var a=t.getModel("viewControl");i.setViewGL(n.viewGL),i.setFromViewControlModel(a,0),i.off("update"),i.on("update",function(){r.dispatchAction({type:"map3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),from:this.uid,map3DId:t.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,e,r,0,t.getData().count());var o=n.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(s){s.material&&s.material[o]("fragment","SRGB_DECODE")})}},afterRender:function(t,e,r,n){var i=n.renderer,a=t.coordinateSystem;a&&a.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(i,t,r),this._sceneHelper.updateSkybox(i,t,r))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function a5e(t){hQ(t),t.registerChartView(i5e),t.registerSeriesModel(v0),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(e,r){r.eachComponent({mainType:"series",subType:"map3D",query:e},function(n){n.setView(e)})})}Ot(a5e);const o5e=Vr.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return yge(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});function Zc(t){this.viewGL=t}Zc.prototype.reset=function(t,e){this._updateCamera(e.getWidth(),e.getHeight(),e.getDevicePixelRatio()),this._viewTransform=Xo(),this.updateTransform(t,e)};Zc.prototype.updateTransform=function(t,e){var r=t.coordinateSystem;r.getRoamTransform&&(Up(this._viewTransform,r.getRoamTransform()),this._setCameraTransform(this._viewTransform),e.getZr().refresh())};Zc.prototype.dataToPoint=function(t,e,r){r=t.dataToPoint(e,null,r);var n=this._viewTransform;n&&qi(r,r,n)};Zc.prototype.removeTransformInPoint=function(t){return this._viewTransform&&qi(t,t,this._viewTransform),t};Zc.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1};Zc.prototype._setCameraTransform=function(t){var e=this.viewGL.camera;e.position.set(t[4],t[5],0),e.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)};Zc.prototype._updateCamera=function(t,e,r){this.viewGL.setViewport(0,0,t,e,r);var n=this.viewGL.camera;n.left=n.top=0,n.bottom=e,n.right=t,n.near=0,n.far=100};const s5e=Or.extend({type:"scatterGL",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this.viewGL=new mn("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Zc(this.viewGL)},render:function(t,e,r){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,r),!!t.getData().count()){var n=this._pointsBuilderList[0];n||(n=this._pointsBuilderList[0]=new Ip(!0,r)),this._pointsBuilderList.length=1,this.groupGL.add(n.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),n.update(t,e,r),this.viewGL.setPostEffect(t.getModel("postEffect"),r)}},incrementalPrepareRender:function(t,e,r){this.groupGL.removeAll(),this._glViewHelper.reset(t,r),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),r)},incrementalRender:function(t,e,r,n){if(!(t.end<=t.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new Ip(!0,n),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),i.setSizeScale(this._sizeScale),i.update(e,r,n,t.start,t.end),n.getZr().refresh(),this._currentStep++}},updateTransform:function(t,e,r){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,r);var n=this._glViewHelper.getZoom(),i=Math.max((t.get("zoomScale")||0)*(n-1)+1,0);this._sizeScale=i,this._pointsBuilderList.forEach(function(a){a.setSizeScale(i)})}},_removeTransformInPoints:function(t){if(t)for(var e=[],r=0;r<t.length;r+=2)e[0]=t[r],e[1]=t[r+1],this._glViewHelper.removeTransformInPoint(e),t[r]=e[0],t[r+1]=e[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(t){t.dispose()})},remove:function(){this.groupGL.removeAll()}});function l5e(t){t.registerChartView(s5e),t.registerSeriesModel(o5e),t.registerLayout({seriesType:"scatterGL",reset:function(e){var r=e.coordinateSystem,n=e.getData(),i;if(r){var a=r.dimensions.map(function(s){return n.mapDimension(s)}).slice(0,2),o=[];a.length===1?i=function(s){for(var l=new Float32Array((s.end-s.start)*2),u=s.start;u<s.end;u++){var c=(u-s.start)*2,f=n.get(a[0],u),h=r.dataToPoint(f);l[c]=h[0],l[c+1]=h[1]}n.setLayout("points",l)}:a.length===2&&(i=function(s){for(var l=new Float32Array((s.end-s.start)*2),u=s.start;u<s.end;u++){var c=(u-s.start)*2,f=n.get(a[0],u),h=n.get(a[1],u);o[0]=f,o[1]=h,o=r.dataToPoint(o),l[c]=o[0],l[c+1]=o[1]}n.setLayout("points",l)})}return{progress:i}}})}Ot(l5e);function u5e(t,e,r,n,i){for(var a=new Rte(n),o=0;o<t.length;o++)a.addNode(Lr.firstNotNull(t[o].id,t[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<e.length;o++){var c=e[o],f=c.source,h=c.target;a.addEdge(f,h,u)&&(l.push(c),s.push(Lr.firstNotNull(c.id,f+" > "+h)),u++)}var d,p=m2(t,{coordDimensions:["value"]});d=new Kn(p,r),d.initData(t);var v=new Kn(["value"],r);return v.initData(l,s),i&&i(d,v),fI({mainData:d,struct:a,structAttr:"graph",datas:{node:d,edge:v},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var x1=Vr.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){x1.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){x1.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,e,r,n){var i=Dh.getFormattedLabel(this,t,e,r,n);if(i==null){var a=this.getData(),o=a.dimensions[a.dimensions.length-1];i=a.get(o,t)}return i},getInitialData:function(t,e){var r=t.edges||t.links||[],n=t.data||t.nodes||[],i=this;if(n&&r)return u5e(n,r,this,!0,a).data;function a(o,s){o.wrapMethod("getItemModel",function(f){const h=i._categoriesModels,d=f.getShallow("category"),p=h[d];return p&&(p.parentModel=f.parentModel,f.parentModel=p),f});const l=e.getModel([]).getModel;function u(f,h){const d=l.call(this,f,h);return d.resolveParentPath=c,d}s.wrapMethod("getItemModel",function(f){return f.resolveParentPath=c,f.getModel=u,f});function c(f){if(f&&(f[0]==="label"||f[1]==="label")){const h=f.slice();return f[0]==="label"?h[0]="edgeLabel":f[1]==="label"&&(h[1]="edgeLabel"),h}return f}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,r){if(r==="edge"){var n=this.getData(),i=this.getDataParams(t,r),a=n.graph.getEdgeByIndex(t),o=n.getName(a.node1.dataIndex),s=n.getName(a.node2.dataIndex),l=[];return o!=null&&l.push(o),s!=null&&l.push(s),l=Oi(l.join(" > ")),i.value&&(l+=" : "+Oi(i.value)),l}else return x1.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map(function(r){return r.value!=null?r:Object.assign({value:0},r)}),e=new Kn(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(r){return e.getItemModel(r,!0)})},setView:function(t){t.zoom!=null&&(this.option.zoom=t.zoom),t.offset!=null&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var e=0;e<t.length/2;e++){var r=t[e*2],n=t[e*2+1],i=this.getData().getRawDataItem(e);i.x=r,i.y=n}},isAnimationEnabled:function(){return x1.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),Li=yi.vec2,uW=[[0,0],[1,1]],RI=Ir.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Ir.Attribute("position","float",2,"POSITION"),normal:new Ir.Attribute("normal","float",2),offset:new Ir.Attribute("offset","float",1),color:new Ir.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var e=this.attributes;this.vertexCount!==t&&(e.position.init(t),e.color.init(t),this.useNativeLine||(e.offset.init(t),e.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,e,r,n){var i=Li.dist(t,e)+Li.dist(r,e)+Li.dist(n,r),a=1/(i+1)*this.segmentScale;return a},getCubicCurveVertexCount:function(t,e,r,n){var i=this._getCubicCurveApproxStep(t,e,r,n),a=Math.ceil(1/i);return this.useNativeLine?a*2:a*2+2},getCubicCurveTriangleCount:function(t,e,r,n){var i=this._getCubicCurveApproxStep(t,e,r,n),a=Math.ceil(1/i);return this.useNativeLine?0:a*2},getLineVertexCount:function(){return this.getPolylineVertexCount(uW)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(uW)},getPolylineVertexCount:function(t){var e;if(typeof t=="number")e=t;else{var r=typeof t[0]!="number";e=r?t.length:t.length/2}return this.useNativeLine?(e-1)*2:(e-1)*2+2},getPolylineTriangleCount:function(t){var e;if(typeof t=="number")e=t;else{var r=typeof t[0]!="number";e=r?t.length:t.length/2}return this.useNativeLine?0:(e-1)*2},addCubicCurve:function(t,e,r,n,i,a){a==null&&(a=1);for(var o=t[0],s=t[1],l=e[0],u=e[1],c=r[0],f=r[1],h=n[0],d=n[1],p=this._getCubicCurveApproxStep(t,e,r,n),v=p*p,g=v*p,m=3*p,x=3*v,S=6*v,b=6*g,T=o-l*2+c,w=s-u*2+f,E=(l-c)*3-o+h,M=(u-f)*3-s+d,A=o,R=s,L=(l-o)*m+T*x+E*g,I=(u-s)*m+w*x+M*g,N=T*S+E*b,k=w*S+M*b,z=E*b,B=M*b,V=0,F=0,$=Math.ceil(1/p),W=new Float32Array(($+1)*3),W=[],H=0,F=0;F<$+1;F++)W[H++]=A,W[H++]=R,A+=L,R+=I,L+=N,I+=k,N+=z,k+=B,V+=p,V>1&&(A=L>0?Math.min(A,h):Math.max(A,h),R=I>0?Math.min(R,d):Math.max(R,d));this.addPolyline(W,i,a)},addLine:function(t,e,r,n){this.addPolyline([t,e],r,n)},addPolyline:function(){var t=Li.create(),e=Li.create(),r=Li.create(),n=Li.create(),i=[],a=[],o=[];return function(s,l,u,c,f){if(s.length){var h=typeof s[0]!="number";if(f==null&&(f=h?s.length:s.length/2),!(f<2)){c==null&&(c=0),u==null&&(u=1),this._itemVertexOffsets.push(this._vertexOffset);for(var d=h?typeof l[0]!="number":l.length/4===f,p=this.attributes.position,v=this.attributes.color,g=this.attributes.offset,m=this.attributes.normal,x=this.indices,S=this._vertexOffset,b,T=0;T<f;T++){if(h)i=s[T+c],d?b=l[T+c]:b=l;else{var w=T*2+c;if(i=i||[],i[0]=s[w],i[1]=s[w+1],d){var E=T*4+c;b=b||[],b[0]=l[E],b[1]=l[E+1],b[2]=l[E+2],b[3]=l[E+3]}else b=l}if(this.useNativeLine)T>1&&(p.copy(S,S-1),v.copy(S,S-1),S++);else{var M;if(T<f-1){if(h)Li.copy(a,s[T+1]);else{var w=(T+1)*2+c;a=a||[],a[0]=s[w],a[1]=s[w+1]}if(T>0){Li.sub(t,i,o),Li.sub(e,a,i),Li.normalize(t,t),Li.normalize(e,e),Li.add(n,t,e),Li.normalize(n,n);var A=u/2*Math.min(1/Li.dot(t,n),2);r[0]=-n[1],r[1]=n[0],M=A}else Li.sub(t,a,i),Li.normalize(t,t),r[0]=-t[1],r[1]=t[0],M=u/2}else Li.sub(t,i,o),Li.normalize(t,t),r[0]=-t[1],r[1]=t[0],M=u/2;m.set(S,r),m.set(S+1,r),g.set(S,M),g.set(S+1,-M),Li.copy(o,i),p.set(S,i),p.set(S+1,i),v.set(S,b),v.set(S+1,b),S+=2}if(this.useNativeLine)v.set(S,b),p.set(S,i),S++;else if(T>0){var R=this._faceOffset*3,x=this.indices;x[R]=S-4,x[R+1]=S-3,x[R+2]=S-2,x[R+3]=S-3,x[R+4]=S-1,x[R+5]=S-2,this._faceOffset+=2}}this._vertexOffset=S}}}}(),setItemColor:function(t,e){for(var r=this._itemVertexOffsets[t],n=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,i=r;i<n;i++)this.attributes.color.set(i,e);this.dirty("color")}});At(RI.prototype,S2);const c5e=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;J.Shader.import(c5e);var g5={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function zi(t){var e={type:J.Texture.FLOAT,minFilter:J.Texture.NEAREST,magFilter:J.Texture.NEAREST};this._positionSourceTex=new J.Texture2D(e),this._positionSourceTex.flipY=!1,this._positionTex=new J.Texture2D(e),this._positionPrevTex=new J.Texture2D(e),this._forceTex=new J.Texture2D(e),this._forcePrevTex=new J.Texture2D(e),this._weightedSumTex=new J.Texture2D(e),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new J.Texture2D(e),this._globalSpeedPrevTex=new J.Texture2D(e),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new Ei({fragment:J.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new Ei({fragment:J.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new Ei({fragment:J.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new Ei({fragment:J.Shader.source("clay.compositor.output")});var r=function(n){n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ONE)};this._edgeForceMesh=new J.Mesh({geometry:new J.Geometry({attributes:{node1:new J.Geometry.Attribute("node1","float",2),node2:new J.Geometry.Attribute("node2","float",2),weight:new J.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new J.Material({transparent:!0,shader:J.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:r,depthMask:!1,depthText:!1}),mode:J.Mesh.POINTS}),this._weightedSumMesh=new J.Mesh({geometry:new J.Geometry({attributes:{node:new J.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new J.Material({transparent:!0,shader:J.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:r,depthMask:!1,depthText:!1}),mode:J.Mesh.POINTS}),this._framebuffer=new gi({depthBuffer:!1}),this._dummyCamera=new J.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}zi.prototype.updateOption=function(t){for(var e in g5)this[e]=g5[e];var r=this._nodes.length;if(r>5e4?this.jitterTolerence=10:r>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,r>100?this.scaling=2:this.scaling=10,t)for(var e in g5)t[e]!=null&&(this[e]=t[e]);if(this.repulsionByDegree)for(var n=this._positionSourceTex.pixels,i=0;i<this._nodes.length;i++)n[i*4+2]=(this._nodes[i].degree||0)+1};zi.prototype._updateGravityCenter=function(t){var e=this._nodes,r=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var n=[1/0,1/0],i=[-1/0,-1/0],a=0;a<e.length;a++)n[0]=Math.min(e[a].x,n[0]),n[1]=Math.min(e[a].y,n[1]),i[0]=Math.max(e[a].x,i[0]),i[1]=Math.max(e[a].y,i[1]);this._gravityCenter=[(n[0]+i[0])*.5,(n[1]+i[1])*.5]}for(var a=0;a<r.length;a++){var o=r[a].node1,s=r[a].node2;e[o].degree=(e[o].degree||0)+1,e[s].degree=(e[s].degree||0)+1}};zi.prototype.initData=function(t,e){this._nodes=t,this._edges=e,this._updateGravityCenter();var r=Math.ceil(Math.sqrt(t.length)),n=r,i=new Float32Array(r*n*4);this._resize(r,n);for(var a=0,o=0;o<t.length;o++){var s=t[o];i[a++]=s.x||0,i[a++]=s.y||0,i[a++]=s.mass||1,i[a++]=s.size||1}this._positionSourceTex.pixels=i;var l=this._edgeForceMesh.geometry,u=e.length;l.attributes.node1.init(u*2),l.attributes.node2.init(u*2),l.attributes.weight.init(u*2);for(var c=[],o=0;o<e.length;o++){var f=l.attributes,h=e[o].weight;h==null&&(h=1),f.node1.set(o,this.getNodeUV(e[o].node1,c)),f.node2.set(o,this.getNodeUV(e[o].node2,c)),f.weight.set(o,h),f.node1.set(o+u,this.getNodeUV(e[o].node2,c)),f.node2.set(o+u,this.getNodeUV(e[o].node1,c)),f.weight.set(o+u,h)}var d=this._weightedSumMesh.geometry;d.attributes.node.init(t.length);for(var o=0;o<t.length;o++)d.attributes.node.set(o,this.getNodeUV(o,c));l.dirty(),d.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[r,n]),this._inited=!1,this._frame=0};zi.prototype.getNodes=function(){return this._nodes};zi.prototype.getEdges=function(){return this._edges};zi.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var e=this._nodeRepulsionPass;e.setUniform("strongGravityMode",this.strongGravityMode),e.setUniform("gravity",this.gravity),e.setUniform("gravityCenter",this._gravityCenter),e.setUniform("scaling",this.scaling),e.setUniform("preventOverlap",this.preventOverlap),e.setUniform("positionTex",this._positionPrevTex),e.render(t);var r=this._edgeForceMesh;r.material.set("linLogMode",this.linLogMode),r.material.set("edgeWeightInfluence",this.edgeWeightInfluence),r.material.set("preventOverlap",this.preventOverlap),r.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([r],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var n=this._weightedSumMesh;n.material.set("positionTex",this._positionPrevTex),n.material.set("forceTex",this._forceTex),n.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([n],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var i=this._globalSpeedPass;i.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),i.setUniform("weightedSumTex",this._weightedSumTex),i.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),i.render(t);var a=this._positionPass;this._framebuffer.attach(this._positionTex),a.setUniform("globalSpeedTex",this._globalSpeedTex),a.setUniform("positionTex",this._positionPrevTex),a.setUniform("forceTex",this._forceTex),a.setUniform("forcePrevTex",this._forcePrevTex),a.render(t),this._framebuffer.unbind(t),this._swapTexture()};zi.prototype.update=function(t,e,r){e==null&&(e=1),e=Math.max(e,1);for(var n=0;n<e;n++)this.step(t);r&&r()};zi.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex};zi.prototype.getNodeUV=function(t,e){e=e||[];var r=this._positionTex.width,n=this._positionTex.height;return e[0]=t%r/(r-1),e[1]=Math.floor(t/r)/(n-1)||0,e};zi.prototype.getNodePosition=function(t,e){var r=this._positionArr,n=this._positionTex.width,i=this._positionTex.height,a=n*i;(!r||r.length!==a*4)&&(r=this._positionArr=new Float32Array(a*4)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,n,i,t.gl.RGBA,t.gl.FLOAT,r),this._framebuffer.unbind(t),e||(e=new Float32Array(this._nodes.length*2));for(var o=0;o<this._nodes.length;o++)e[o*2]=r[o*4],e[o*2+1]=r[o*4+1];return e};zi.prototype.getTextureData=function(t,e){var r=this["_"+e+"Tex"],n=r.width,i=r.height;this._framebuffer.bind(t),this._framebuffer.attach(r);var a=new Float32Array(n*i*4);return t.gl.readPixels(0,0,n,i,t.gl.RGBA,t.gl.FLOAT,a),this._framebuffer.unbind(t),a};zi.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}};zi.prototype.isFinished=function(t){return this._frame>t};zi.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t;var t=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=t;var t=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t};zi.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)};zi.prototype._resize=function(t,e){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(r){this[r].width=t,this[r].height=e,this[r].dirty()},this)};zi.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};function f5e(){var t={create:function(){return new Float32Array(2)},dist:function(l,u){var c=u[0]-l[0],f=u[1]-l[1];return Math.sqrt(c*c+f*f)},len:function(l){var u=l[0],c=l[1];return Math.sqrt(u*u+c*c)},scaleAndAdd:function(l,u,c,f){return l[0]=u[0]+c[0]*f,l[1]=u[1]+c[1]*f,l},scale:function(l,u,c){return l[0]=u[0]*c,l[1]=u[1]*c,l},add:function(l,u,c){return l[0]=u[0]+c[0],l[1]=u[1]+c[1],l},sub:function(l,u,c){return l[0]=u[0]-c[0],l[1]=u[1]-c[1],l},normalize:function(l,u){var c=u[0],f=u[1],h=c*c+f*f;return h>0&&(h=1/Math.sqrt(h),l[0]=u[0]*h,l[1]=u[1]*h),l},negate:function(l,u){return l[0]=-u[0],l[1]=-u[1],l},copy:function(l,u){return l[0]=u[0],l[1]=u[1],l},set:function(l,u,c){return l[0]=u,l[1]=c,l}};function e(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var r=e.prototype;r.beforeUpdate=function(){for(var l=0;l<this.nSubRegions;l++)this.subRegions[l].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},r.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var l=0;l<this.nSubRegions;l++)this.subRegions[l].afterUpdate()},r.addNode=function(l){if(this.nSubRegions===0)if(this.node==null){this.node=l;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(l),this._updateCenterOfMass(l)},r.findSubRegion=function(l,u){for(var c=0;c<this.nSubRegions;c++){var f=this.subRegions[c];if(f.contain(l,u))return f}},r.contain=function(l,u){return this.bbox[0]<=l&&this.bbox[2]>=l&&this.bbox[1]<=u&&this.bbox[3]>=u},r.setBBox=function(l,u,c,f){this.bbox[0]=l,this.bbox[1]=u,this.bbox[2]=c,this.bbox[3]=f,this.size=(c-l+f-u)/2},r._newSubRegion=function(){var l=this.subRegions[this.nSubRegions];return l||(l=new e,this.subRegions[this.nSubRegions]=l),this.nSubRegions++,l},r._addNodeToSubRegion=function(l){var u=this.findSubRegion(l.position[0],l.position[1]),c=this.bbox;if(!u){var f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,d=(c[2]-c[0])/2,p=(c[3]-c[1])/2,v=l.position[0]>=f?1:0,g=l.position[1]>=h?1:0,u=this._newSubRegion();u.setBBox(v*d+c[0],g*p+c[1],(v+1)*d+c[0],(g+1)*p+c[1])}u.addNode(l)},r._updateCenterOfMass=function(l){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var u=this.centerOfMass[0]*this.mass,c=this.centerOfMass[1]*this.mass;u+=l.position[0]*l.mass,c+=l.position[1]*l.mass,this.mass+=l.mass,this.centerOfMass[0]=u/this.mass,this.centerOfMass[1]=c/this.mass};function n(){this.position=new Float32Array(2),this.force=t.create(),this.forcePrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function i(l,u){this.source=l,this.target=u,this.weight=1}function a(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new e,this.rootRegion.centerOfMass=t.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var o=a.prototype;o.initNodes=function(l,u,c){var f=u.length;this.nodes.length=0;for(var h=typeof c!="undefined",d=0;d<f;d++){var p=new n;p.position[0]=l[d*2],p.position[1]=l[d*2+1],p.mass=u[d],h&&(p.size=c[d]),this.nodes.push(p)}this._massArr=u,this._swingingArr=new Float32Array(f),h&&(this._sizeArr=c)},o.initEdges=function(l,u){var c=l.length/2;this.edges.length=0;for(var f=0;f<c;f++){var h=l[f*2],d=l[f*2+1],p=this.nodes[h],v=this.nodes[d];if(!p||!v){console.error("Node not exists, try initNodes before initEdges");return}p.outDegree++,v.inDegree++;var g=new i(p,v);u&&(g.weight=u[f]),this.edges.push(g)}},o.updateSettings=function(){if(this.repulsionByDegree)for(var l=0;l<this.nodes.length;l++){var u=this.nodes[l];u.mass=u.inDegree+u.outDegree+1}else for(var l=0;l<this.nodes.length;l++){var u=this.nodes[l];u.mass=this._massArr[l]}},o.update=function(){var l=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var u=0;u<l;u++)this.rootRegion.addNode(this.nodes[u]);this.rootRegion.afterUpdate()}for(var u=0;u<l;u++){var c=this.nodes[u];t.copy(c.forcePrev,c.force),t.set(c.force,0,0)}for(var u=0;u<l;u++){var f=this.nodes[u];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,f);else for(var h=u+1;h<l;h++){var d=this.nodes[h];this.applyNodeToNodeRepulsion(f,d,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(f):this.applyNodeGravity(f))}for(var u=0;u<this.edges.length;u++)this.applyEdgeAttraction(this.edges[u]);for(var p=0,v=0,g=t.create(),u=0;u<l;u++){var c=this.nodes[u],m=t.dist(c.force,c.forcePrev);p+=m*c.mass,t.add(g,c.force,c.forcePrev);var x=t.len(g)*.5;v+=x*c.mass,this._swingingArr[u]=m}var S=this.jitterTolerence*this.jitterTolerence*v/p;this._globalSpeed>0&&(S=Math.min(S/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=S;for(var u=0;u<l;u++){var c=this.nodes[u],m=this._swingingArr[u],b=.1*S/(1+S*Math.sqrt(m)),T=t.len(c.force);T>0&&(b=Math.min(T*b,10)/T,t.scaleAndAdd(c.position,c.position,c.force,b))}},o.applyRegionToNodeRepulsion=function(){var l=t.create();return function(c,f){if(c.node)this.applyNodeToNodeRepulsion(c.node,f,!0);else{t.sub(l,f.position,c.centerOfMass);var h=l[0]*l[0]+l[1]*l[1];if(h>this.barnesHutTheta*c.size*c.size){var d=this.scaling*f.mass*c.mass/h;t.scaleAndAdd(f.force,f.force,l,d)}else for(var p=0;p<c.nSubRegions;p++)this.applyRegionToNodeRepulsion(c.subRegions[p],f)}}}(),o.applyNodeToNodeRepulsion=function(){var l=t.create();return function(c,f,h){if(c!=f){t.sub(l,c.position,f.position);var d=l[0]*l[0]+l[1]*l[1];if(d!==0){var p;if(this.preventOverlap){var v=Math.sqrt(d);if(v=v-c.size-f.size,v>0)p=this.scaling*c.mass*f.mass/(v*v);else if(v<0)p=this.scaling*100*c.mass*f.mass;else return}else p=this.scaling*c.mass*f.mass/d;t.scaleAndAdd(c.force,c.force,l,p),t.scaleAndAdd(f.force,f.force,l,-p)}}}}(),o.applyEdgeAttraction=function(){var l=t.create();return function(c){var f=c.source,h=c.target;t.sub(l,f.position,h.position);var d=t.len(l),p;this.edgeWeightInfluence===0?p=1:this.edgeWeightInfluence===1?p=c.weight:p=Math.pow(c.weight,this.edgeWeightInfluence);var v;this.preventOverlap&&(d=d-f.size-h.size,d<=0)||(this.linLogMode?v=-p*Math.log(d+1)/(d+1):v=-p,t.scaleAndAdd(f.force,f.force,l,v),t.scaleAndAdd(h.force,h.force,l,-v))}}(),o.applyNodeGravity=function(){var l=t.create();return function(u){t.sub(l,this.gravityCenter,u.position);var c=t.len(l);t.scaleAndAdd(u.force,u.force,l,this.gravity*u.mass/(c+1))}}(),o.applyNodeStrongGravity=function(){var l=t.create();return function(u){t.sub(l,this.gravityCenter,u.position),t.scaleAndAdd(u.force,u.force,l,this.gravity*u.mass)}}(),o.updateBBox=function(){for(var l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<this.nodes.length;h++){var d=this.nodes[h].position;l=Math.min(l,d[0]),u=Math.min(u,d[1]),c=Math.max(c,d[0]),f=Math.max(f,d[1])}this.bbox[0]=l,this.bbox[1]=u,this.bbox[2]=c,this.bbox[3]=f},o.getGlobalSpeed=function(){return this._globalSpeed};var s=null;self.onmessage=function(l){switch(l.data.cmd){case"init":s=new a,s.initNodes(l.data.nodesPosition,l.data.nodesMass,l.data.nodesSize),s.initEdges(l.data.edges,l.data.edgesWeight);break;case"updateConfig":if(s)for(var u in l.data.config)s[u]=l.data.config[u];break;case"update":var c=l.data.steps;if(s){for(var f=0;f<c;f++)s.update();for(var h=s.nodes.length,d=new Float32Array(h*2),f=0;f<h;f++){var p=s.nodes[f];d[f*2]=p.position[0],d[f*2+1]=p.position[1]}self.postMessage({buffer:d.buffer,globalSpeed:s.getGlobalSpeed()},[d.buffer])}else{var v=new Float32Array;self.postMessage({buffer:v.buffer,globalSpeed:s.getGlobalSpeed()},[v.buffer])}break}}}var S1=f5e.toString();S1=S1.slice(S1.indexOf("{")+1,S1.lastIndexOf("}"));var H1={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},qo=function(t){for(var e in H1)this[e]=H1[e];if(t)for(var e in t)this[e]=t[e];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Sr({type:at.FLOAT,flipY:!1,minFilter:at.NEAREST,magFilter:at.NEAREST})};qo.prototype.initData=function(t,e){var r=new Blob([S1]),n=window.URL.createObjectURL(r);this._worker=new Worker(n),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=e,this._frame=0;for(var i=t.length,a=e.length,o=new Float32Array(i*2),s=new Float32Array(i),l=new Float32Array(i),u=new Float32Array(a*2),c=new Float32Array(a),f=0;f<t.length;f++){var h=t[f];o[f*2]=h.x,o[f*2+1]=h.y,s[f]=h.mass==null?1:h.mass,l[f]=h.size==null?1:h.size}for(var f=0;f<e.length;f++){var d=e[f],p=d.node1,v=d.node2;u[f*2]=p,u[f*2+1]=v,c[f]=d.weight==null?1:d.weight}var g=Math.ceil(Math.sqrt(t.length)),m=g,x=new Float32Array(g*m*4),S=this._positionTex;S.width=g,S.height=m,S.pixels=x,this._worker.postMessage({cmd:"init",nodesPosition:o,nodesMass:s,nodesSize:l,edges:u,edgesWeight:c}),this._globalSpeed=1/0};qo.prototype.updateOption=function(t){var e={};for(var r in H1)e[r]=H1[r];var n=this._nodes,i=this._edges,a=n.length;if(a>5e4?e.jitterTolerence=10:a>5e3?e.jitterTolerence=1:e.jitterTolerence=.1,a>100?e.scaling=2:e.scaling=10,a>1e3?e.barnesHutOptimize=!0:e.barnesHutOptimize=!1,t)for(var r in H1)t[r]!=null&&(e[r]=t[r]);if(!e.gravityCenter){for(var o=[1/0,1/0],s=[-1/0,-1/0],l=0;l<n.length;l++)o[0]=Math.min(n[l].x,o[0]),o[1]=Math.min(n[l].y,o[1]),s[0]=Math.max(n[l].x,s[0]),s[1]=Math.max(n[l].y,s[1]);e.gravityCenter=[(o[0]+s[0])*.5,(o[1]+s[1])*.5]}for(var l=0;l<i.length;l++){var u=i[l].node1,c=i[l].node2;n[u].degree=(n[u].degree||0)+1,n[c].degree=(n[c].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:e})};qo.prototype.update=function(t,e,r){e==null&&(e=1),e=Math.max(e,1),this._frame+=e,this._onupdate=r,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(e)})};qo.prototype._$onupdate=function(t){if(!this._disposed){var e=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=e,this._updateTexture(e),this._onupdate&&this._onupdate()}};qo.prototype.getNodePositionTexture=function(){return this._positionTex};qo.prototype.getNodeUV=function(t,e){e=e||[];var r=this._positionTex.width,n=this._positionTex.height;return e[0]=t%r/(r-1),e[1]=Math.floor(t/r)/(n-1),e};qo.prototype.getNodes=function(){return this._nodes};qo.prototype.getEdges=function(){return this._edges};qo.prototype.isFinished=function(t){return this._frame>t};qo.prototype.getNodePosition=function(t,e){if(e||(e=new Float32Array(this._nodes.length*2)),this._positionArr)for(var r=0;r<this._positionArr.length;r++)e[r]=this._positionArr[r];return e};qo.prototype._updateTexture=function(t){for(var e=this._positionTex.pixels,r=0,n=0;n<t.length;)e[r++]=t[n++],e[r++]=t[n++],e[r++]=1,e[r++]=1;this._positionTex.dirty()};qo.prototype.dispose=function(t){this._disposed=!0,this._worker=null};var h5e=_a.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var t=this._target,e=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(e,e,e),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var e=t.offsetX,r=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(e,r))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var n=this._convertPos(e,r);this._x=n.x,this._y=n.y}}},_convertPos:function(t,e){var r=this.viewGL.camera,n=this.viewGL.viewport;return{x:(t-n.x)/n.width*(r.right-r.left)+r.left,y:(e-n.y)/n.height*(r.bottom-r.top)+r.top}},_mouseMoveHandler:function(t){var e=this._convertPos(t.offsetX,t.offsetY);this._dx+=e.x-this._x,this._dy+=e.y-this._y,this._x=e.x,this._y=e.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){t=t.event;var e=t.wheelDelta||-t.detail;if(e!==0){var r=t.offsetX,n=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(r,n))){var i=e>0?1.1:.9,a=Math.max(Math.min(this._zoom*i,this.maxZoom),this.minZoom);i=a/this._zoom;var o=this._convertPos(r,n),s=(o.x-this._dx)*(i-1),l=(o.y-this._dy)*(i-1);this._dx-=s,this._dy-=l,this._zoom=a,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}});const d5e=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`;var lb=yi.vec2;J.Shader.import(d5e);var p5e=1;const v5e=Or.extend({type:"graphGL",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this.viewGL=new mn("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Ip(!0,e),this._forceEdgesMesh=new J.Mesh({material:new J.Material({shader:J.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new J.Geometry({attributes:{node:new J.Geometry.Attribute("node","float",2),color:new J.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:J.Mesh.LINES}),this._edgesMesh=new J.Mesh({material:new J.Material({shader:J.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new RI({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new h5e({zr:e.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,e,r){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=r,this._initLayout(t,e,r),this._pointsBuilder.update(t,e,r),this._forceLayoutInstance instanceof zi||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,r),this._control.off("update"),this._control.on("update",function(){r.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Lr.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var n=this._pointsBuilder.getPointsMesh();if(n.off("mousemove",this._mousemoveHandler),n.off("mouseout",this._mouseOutHandler,this),r.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var i=t.get("focusNodeAdjacencyOn");i==="click"?r.getZr().on("click",this._clickHandler):i==="mouseover"&&(n.on("mousemove",this._mousemoveHandler,this),n.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var e=this._pointsBuilder.getPointsMesh().dataIndex;e>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:e}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var e=this._pointsBuilder.getPointsMesh().dataIndex;e>=0?e!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:e}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=e}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,e){var r=this._forceEdgesMesh.geometry,n=e.getEdgeData(),i=0,a=this._forceLayoutInstance,o=n.count()*2;r.attributes.node.init(o),r.attributes.color.init(o),n.each(function(s){var l=t[s];r.attributes.node.set(i,a.getNodeUV(l.node1)),r.attributes.node.set(i+1,a.getNodeUV(l.node2));var u=Zi(n,l.dataIndex),c=J.parseColor(u);c[3]*=Lr.firstNotNull(Yi(n,l.dataIndex),1),r.attributes.color.set(i,c),r.attributes.color.set(i+1,c),i+=2}),r.dirty()},_updateMeshLinesGeometry:function(){var e=this._model.getEdgeData(),t=this._edgesMesh.geometry,e=this._model.getEdgeData(),r=this._model.getData().getLayout("points");t.resetOffset(),t.setVertexCount(e.count()*t.getLineVertexCount()),t.setTriangleCount(e.count()*t.getLineTriangleCount());var n=[],i=[],a=["lineStyle","width"];this._originalEdgeColors=new Float32Array(e.count()*4),this._edgeIndicesMap=new Float32Array(e.count()),e.each(function(o){var s=e.graph.getEdgeByIndex(o),l=s.node1.dataIndex*2,u=s.node2.dataIndex*2;n[0]=r[l],n[1]=r[l+1],i[0]=r[u],i[1]=r[u+1];var c=Zi(e,s.dataIndex),f=J.parseColor(c);f[3]*=Lr.firstNotNull(Yi(e,s.dataIndex),1);var h=e.getItemModel(s.dataIndex),d=Lr.firstNotNull(h.get(a),1)*this._api.getDevicePixelRatio();t.addLine(n,i,f,d);for(var p=0;p<4;p++)this._originalEdgeColors[s.dataIndex*4+p]=f[p];this._edgeIndicesMap[s.dataIndex]=o},this),t.dirty()},_updateForceNodesGeometry:function(t){for(var e=this._pointsBuilder.getPointsMesh(),r=[],n=0;n<t.count();n++)this._forceLayoutInstance.getNodeUV(n,r),e.geometry.attributes.position.set(n,r);e.geometry.dirty("position")},_initLayout:function(t,e,r){var n=t.get("layout"),i=t.getGraph(),a=t.getBoxLayoutParams(),o=ri(a,{width:r.getWidth(),height:r.getHeight()});n==="force"&&(n="forceAtlas2"),this.stopLayout(t,e,r,{beforeLayout:!0});var s=t.getData(),l=t.getData();if(n==="forceAtlas2"){var u=t.getModel("forceAtlas2"),c=this._forceLayoutInstance,f=[],h=[],d=s.getDataExtent("value"),p=l.getDataExtent("value"),v=Lr.firstNotNull(u.get("edgeWeight"),1),g=Lr.firstNotNull(u.get("nodeWeight"),1);typeof v=="number"&&(v=[v,v]),typeof g=="number"&&(g=[g,g]);var m=0,x={},S=new Float32Array(s.count()*2);if(i.eachNode(function(T){var w=T.dataIndex,E=s.get("value",w),M,A;if(s.hasItemOption){var R=s.getItemModel(w);M=R.get("x"),A=R.get("y")}M==null&&(M=o.x+Math.random()*o.width,A=o.y+Math.random()*o.height),S[m*2]=M,S[m*2+1]=A,x[T.id]=m++;var L=rn(E,d,g);isNaN(L)&&(isNaN(g[0])?L=1:L=g[0]),f.push({x:M,y:A,mass:L,size:s.getItemVisual(w,"symbolSize")})}),s.setLayout("points",S),i.eachEdge(function(T){var w=T.dataIndex,E=s.get("value",w),M=rn(E,p,v);isNaN(M)&&(isNaN(v[0])?M=1:M=v[0]),h.push({node1:x[T.node1.id],node2:x[T.node2.id],weight:M,dataIndex:w})}),!c){var b=u.get("GPU");this._forceLayoutInstance&&(b&&!(this._forceLayoutInstance instanceof zi)||!b&&!(this._forceLayoutInstance instanceof qo))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),c=this._forceLayoutInstance=b?new zi:new qo}c.initData(f,h),c.updateOption(u.option),this._updateForceEdgesGeometry(c.getEdges(),t),this._updatePositionTexture(),r.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var S=new Float32Array(s.count()*2),m=0;i.eachNode(function(E){var M=E.dataIndex,A,R;if(s.hasItemOption){var L=s.getItemModel(M);A=L.get("x"),R=L.get("y")}S[m++]=A,S[m++]=R}),s.setLayout("points",S),this._updateAfterLayout(t,e,r)}},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,e,a,n){if(!(n&&n.from!=null&&n.from!==this.uid)){var i=this.viewGL,a=this._api,o=this._forceLayoutInstance,s=this._model.getData(),l=this._model.getModel("forceAtlas2");if(o&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var u=this,c=this._layoutId=p5e++,f=l.getShallow("maxSteps"),h=l.getShallow("steps"),d=0,p=Math.max(h*2,20),v=function(g){if(g===u._layoutId){if(o.isFinished(f)){a.dispatchAction({type:"graphGLStopLayout",from:u.uid}),a.dispatchAction({type:"graphGLFinishLayout",points:s.getLayout("points"),from:u.uid});return}o.update(i.layer.renderer,h,function(){u._updatePositionTexture(),d+=h,d>=p&&(u._syncNodePosition(t),d=0),a.getZr().refresh(),Sp(function(){v(g)})})}};Sp(function(){u._forceLayoutInstanceToDispose&&(u._forceLayoutInstanceToDispose.dispose(i.layer.renderer),u._forceLayoutInstanceToDispose=null),v(c)}),this._layouting=!0}}},stopLayout:function(t,e,r,n){n&&n.from!=null&&n.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(n&&n.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,e,r)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(t){var e=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",e),t.setNodePosition(e)},_updateAfterLayout:function(t,e,r){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,e,r),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,e,r,n){var i=this._model.getData();this._downplayAll();var a=n.dataIndex,o=i.graph,s=[],l=o.getNodeByIndex(a);s.push(l),l.edges.forEach(function(c){c.dataIndex<0||(c.node1!==l&&s.push(c.node1),c.node2!==l&&s.push(c.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),s.forEach(function(c){this._pointsBuilder.highlight(i,c.dataIndex)},this),this._pointsBuilder.updateLabels(s.map(function(c){return c.dataIndex}));var u=[];l.edges.forEach(function(c){c.dataIndex>=0&&(this._highlightEdge(c.dataIndex),u.push(c))},this),this._focusNodes=s,this._focusEdges=u},unfocusNodeAdjacency:function(t,e,r,n){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var e=this._model.getEdgeData().getItemModel(t),r=J.parseColor(e.get("emphasis.lineStyle.color")||e.get("lineStyle.color")),n=Lr.firstNotNull(e.get("emphasis.lineStyle.opacity"),e.get("lineStyle.opacity"),1);r[3]*=n,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],r)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(t){this._downplayEdge(t.dataIndex)},this)},_downplayEdge:function(t){var e=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],e)},_setEdgeFade:function(){var t=[];return function(e,r){this._getColor(e,t),t[3]*=r,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)}}(),_getColor:function(t,e){for(var r=0;r<4;r++)e[r]=this._originalEdgeColors[t*4+r];return e},_fadeOutEdgesAll:function(t){var e=this._model.getData().graph;e.eachEdge(function(r){this._setEdgeFade(r.dataIndex,t)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,e){this.viewGL.setViewport(0,0,e.getWidth(),e.getHeight(),e.getDevicePixelRatio());for(var r=this.viewGL.camera,n=t.getData(),i=n.getLayout("points"),a=lb.create(1/0,1/0),o=lb.create(-1/0,-1/0),s=[],l=0;l<i.length;)s[0]=i[l++],s[1]=i[l++],lb.min(a,a,s),lb.max(o,o,s);var u=(o[1]+a[1])/2,c=(o[0]+a[0])/2;if(!(c>r.left&&c<r.right&&u<r.bottom&&u>r.top)){var f=Math.max(o[0]-a[0],10),h=f/e.getWidth()*e.getHeight();f*=1.4,h*=1.4,a[0]-=f*.2,r.left=a[0],r.top=u-h/2,r.bottom=u+h/2,r.right=f+a[0],r.near=0,r.far=100}},dispose:function(){var t=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(t),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function ub(t){return t instanceof Array||(t=[t,t]),t}function g5e(t){t.registerChartView(v5e),t.registerSeriesModel(x1),t.registerVisual(function(r){const n={};r.eachSeriesByType("graphGL",function(i){var a=i.getCategoriesData(),o=i.getData(),s={};a.each(function(l){var u=a.getName(l);s["ec-"+u]=l;var c=a.getItemModel(l),f=c.getModel("itemStyle").getItemStyle();f.fill||(f.fill=i.getColorFromPalette(u,n)),a.setItemVisual(l,"style",f);var h=["symbol","symbolSize","symbolKeepAspect"];for(let p=0;p<h.length;p++){var d=c.getShallow(h[p],!0);d!=null&&a.setItemVisual(l,h[p],d)}}),a.count()&&o.each(function(l){var u=o.getItemModel(l);let c=u.getShallow("category");if(c!=null){typeof c=="string"&&(c=s["ec-"+c]);var f=a.getItemVisual(c,"style"),h=o.ensureUniqueItemVisual(l,"style");Ae(h,f);var d=["symbol","symbolSize","symbolKeepAspect"];for(let p=0;p<d.length;p++)o.setItemVisual(l,d[p],a.getItemVisual(c,d[p]))}})})}),t.registerVisual(function(r){r.eachSeriesByType("graphGL",function(n){var i=n.getGraph(),a=n.getEdgeData(),o=ub(n.get("edgeSymbol")),s=ub(n.get("edgeSymbolSize"));a.setVisual("drawType","stroke"),a.setVisual("fromSymbol",o&&o[0]),a.setVisual("toSymbol",o&&o[1]),a.setVisual("fromSymbolSize",s&&s[0]),a.setVisual("toSymbolSize",s&&s[1]),a.setVisual("style",n.getModel("lineStyle").getLineStyle()),a.each(function(l){var u=a.getItemModel(l),c=i.getEdgeByIndex(l),f=ub(u.getShallow("symbol",!0)),h=ub(u.getShallow("symbolSize",!0)),d=u.getModel("lineStyle").getLineStyle(),p=a.ensureUniqueItemVisual(l,"style");switch(Ae(p,d),p.stroke){case"source":{var v=c.node1.getVisual("style");p.stroke=v&&v.fill;break}case"target":{var v=c.node2.getVisual("style");p.stroke=v&&v.fill;break}}f[0]&&c.setVisual("fromSymbol",f[0]),f[1]&&c.setVisual("toSymbol",f[1]),h[0]&&c.setVisual("fromSymbolSize",h[0]),h[1]&&c.setVisual("toSymbolSize",h[1])})})}),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(r,n){n.eachComponent({mainType:"series",query:r},function(i){i.setView(r)})});function e(){}t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},e),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},e),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},e),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},e)}Ot(g5e);const m5e=Vr.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,e){var r=this.get("coordinateSystem"),n=r==="geo"?["lng","lat"]:wZ(r)||["x","y"];n.push("vx","vy");var i=m2(this.getSource(),{coordDimensions:n,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),a=new Kn(i,this);return a.initData(this.getSource()),a},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var y5e=Ir.extend(function(){return{dynamic:!0,attributes:{position:new Ir.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var e=this.attributes,r=4*t,n=2*t;this.vertexCount!==r&&e.position.init(r),this.triangleCount!==n&&(n===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(n*3):new Uint16Array(n*3))},addLine:function(t){var e=this._vertexOffset;this.attributes.position.set(e,[t[0],t[1],1]),this.attributes.position.set(e+1,[t[0],t[1],-1]),this.attributes.position.set(e+2,[t[0],t[1],2]),this.attributes.position.set(e+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[e,e+1,e+2]),this.setTriangleIndices(this._faceOffset++,[e+1,e+2,e+3]),this._vertexOffset+=4}});const _5e=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;ct.import(_5e);function x5e(t){var e=document.createElement("canvas");e.width=e.height=t;var r=e.getContext("2d");return r.fillStyle="#fff",r.arc(t/2,t/2,t/2,0,Math.PI*2),r.fill(),e}var $R=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Sr({type:at.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};$R.prototype={constructor:$R,init:function(){var t={type:at.FLOAT,minFilter:at.NEAREST,magFilter:at.NEAREST,useMipmap:!1};this._spawnTexture=new Sr(t),this._particleTexture0=new Sr(t),this._particleTexture1=new Sr(t),this._frameBuffer=new gi({depthBuffer:!1}),this._particlePass=new Ei({fragment:ct.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new Ei({fragment:ct.source("clay.compositor.downsample")});var e=new Ki({renderOrder:10,material:new Zs({shader:new ct(ct.source("ecgl.vfParticle.renderPoints.vertex"),ct.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Ki.POINTS,geometry:new Ir({dynamic:!0,mainAttribute:"texcoord0"})}),r=new Ki({renderOrder:10,material:new Zs({shader:new ct(ct.source("ecgl.vfParticle.renderLines.vertex"),ct.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new y5e,culling:!1}),n=new Ki({material:new Zs({shader:new ct(ct.source("ecgl.color.vertex"),ct.source("ecgl.color.fragment"))}),geometry:new l4});n.material.enableTexture("diffuseMap"),this._particlePointsMesh=e,this._particleLinesMesh=r,this._lastFrameFullQuadMesh=n,this._camera=new dm,this._thisFrameTexture=new Sr,this._lastFrameTexture=new Sr},setParticleDensity:function(t,e){for(var r=t*e,n=new Float32Array(r*4),i=0,a=this.particleLife,o=0;o<t;o++)for(var s=0;s<e;s++,i++){n[i*4]=Math.random(),n[i*4+1]=Math.random(),n[i*4+2]=Math.random();var l=(a[1]-a[0])*Math.random()+a[0];n[i*4+3]=l}this._particleType==="line"?this._setLineGeometry(t,e):this._setPointsGeometry(t,e),this._spawnTexture.width=t,this._spawnTexture.height=e,this._spawnTexture.pixels=n,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=e,this._particlePass.setUniform("textureSize",[t,e])},_setPointsGeometry:function(t,e){var r=t*e,n=this._particlePointsMesh.geometry,i=n.attributes;i.texcoord0.init(r);for(var a=0,o=0;o<t;o++)for(var s=0;s<e;s++,a++)i.texcoord0.value[a*2]=o/t,i.texcoord0.value[a*2+1]=s/e;n.dirty()},_setLineGeometry:function(t,e){var r=t*e,n=this._getParticleMesh().geometry;n.setLineCount(r),n.resetOffset();for(var i=0;i<t;i++)for(var a=0;a<e;a++)n.addLine([i/t,a/e]);n.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(t,e,r,n){var i=this._getParticleMesh(),a=this._frameBuffer,o=this._particlePass;n&&this._updateDownsampleTextures(t,e),i.material.set("size",this._particleSize*this._supersampling),i.material.set("color",this.particleColor),o.setUniform("speedScaling",this.particleSpeedScaling),a.attach(this._particleTexture1),o.setUniform("firstFrameTime",n?(this.particleLife[1]+this.particleLife[0])/2:0),o.setUniform("particleTexture",this._particleTexture0),o.setUniform("deltaTime",r),o.setUniform("elapsedTime",this._elapsedTime),o.render(t,a),i.material.set("particleTexture",this._particleTexture1),i.material.set("prevParticleTexture",this._particleTexture0),a.attach(this._thisFrameTexture),a.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var s=this._lastFrameFullQuadMesh;s.material.set("diffuseMap",this._lastFrameTexture),s.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([s,i],this._camera),a.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=r},_downsample:function(t){var e=this._downsampleTextures;if(e.length!==0)for(var r=0,n=this._thisFrameTexture,i=e[r];i;)this._frameBuffer.attach(i),this._downsamplePass.setUniform("texture",n),this._downsamplePass.setUniform("textureSize",[n.width,n.height]),this._downsamplePass.render(t,this._frameBuffer),n=i,i=e[++r]},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,e){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=e*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=e*this._supersampling,this._width=t,this._height=e},setParticleSize:function(t){var e=this._getParticleMesh();if(t<=2){e.material.disableTexture("spriteTexture"),e.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Sr),(!this._spriteTexture.image||this._spriteTexture.image.width!==t)&&(this._spriteTexture.image=x5e(t),this._spriteTexture.dirty()),e.material.transparent=!0,e.material.enableTexture("spriteTexture"),e.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var e=this._getParticleMesh().material;e[t?"enableTexture":"disableTexture"]("gradientTexture"),e.setUniform("gradientTexture",t)},setColorTextureImage:function(t,e){var r=this._getParticleMesh().material;r.setTextureImage("colorTexture",t,e,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var e=this._frameBuffer;e.attach(this._lastFrameTexture),e.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),e.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,e){for(var r=this._downsampleTextures,n=Math.max(Math.floor(Math.log(this._supersampling/e.getDevicePixelRatio())/Math.log(2)),0),i=2,a=this._width*this._supersampling,o=this._height*this._supersampling,s=0;s<n;s++)r[s]=r[s]||new Sr,r[s].width=a/i,r[s].height=o/i,i*=2;for(;s<r.length;s++)r[s].dispose(t);r.length=n},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t;var t=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach(function(e){e.dispose(t)})}};const S5e=Or.extend({type:"flowGL",__ecgl__:!0,init:function(t,e){this.viewGL=new mn("orthographic"),this.groupGL=new J.Node,this.viewGL.add(this.groupGL),this._particleSurface=new $R;var r=new J.Mesh({geometry:new J.PlaneGeometry,material:new J.Material({shader:new J.Shader({vertex:J.Shader.source("ecgl.color.vertex"),fragment:J.Shader.source("ecgl.color.fragment")}),transparent:!0})});r.material.enableTexture("diffuseMap"),this.groupGL.add(r),this._planeMesh=r},render:function(t,e,r){var n=this._particleSurface;n.setParticleType(t.get("particleType")),n.setSupersampling(t.get("supersampling")),this._updateData(t,r),this._updateCamera(r.getWidth(),r.getHeight(),r.getDevicePixelRatio());var i=Lr.firstNotNull(t.get("particleDensity"),128);n.setParticleDensity(i,i);var a=this._planeMesh,o=+new Date,s=this,l=!0;a.__percent=0,a.stopAnimation(),a.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var f=+new Date,h=Math.min(f-o,20);o=o+h,s._renderer&&(n.update(s._renderer,r,h/1e3,l),a.material.set("diffuseMap",n.getSurfaceTexture())),l=!1}).start();var u=t.getModel("itemStyle"),c=J.parseColor(u.get("color"));c[3]*=Lr.firstNotNull(u.get("opacity"),1),a.material.set("color",c),n.setColorTextureImage(t.get("colorTexture"),r),n.setParticleSize(t.get("particleSize")),n.particleSpeedScaling=t.get("particleSpeed"),n.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,e,r){this._updateData(t,r)},afterRender:function(t,e,r,n){var i=n.renderer;this._renderer=i},_updateData:function(t,e){var r=t.coordinateSystem,n=r.dimensions.map(function(x){return t.coordDimToDataDim(x)[0]}),i=t.getData(),a=i.getDataExtent(n[0]),o=i.getDataExtent(n[1]),s=t.get("gridWidth"),l=t.get("gridHeight");if(s==null||s==="auto"){var u=(a[1]-a[0])/(o[1]-o[0]);s=Math.round(Math.sqrt(u*i.count()))}(l==null||l==="auto")&&(l=Math.ceil(i.count()/s));var c=this._particleSurface.vectorFieldTexture,f=c.pixels;if(!f||f.length!==l*s*4)f=c.pixels=new Float32Array(s*l*4);else for(var h=0;h<f.length;h++)f[h]=0;var d=0,p=1/0,v=new Float32Array(i.count()*2),g=0,m=[[1/0,1/0],[-1/0,-1/0]];i.each([n[0],n[1],"vx","vy"],function(x,S,b,T){var w=r.dataToPoint([x,S]);v[g++]=w[0],v[g++]=w[1],m[0][0]=Math.min(w[0],m[0][0]),m[0][1]=Math.min(w[1],m[0][1]),m[1][0]=Math.max(w[0],m[1][0]),m[1][1]=Math.max(w[1],m[1][1]);var E=Math.sqrt(b*b+T*T);d=Math.max(d,E),p=Math.min(p,E)}),i.each(["vx","vy"],function(x,S,b){var T=Math.round((v[b*2]-m[0][0])/(m[1][0]-m[0][0])*(s-1)),w=l-1-Math.round((v[b*2+1]-m[0][1])/(m[1][1]-m[0][1])*(l-1)),E=(w*s+T)*4;f[E]=x/d*.5+.5,f[E+1]=S/d*.5+.5,f[E+3]=1}),c.width=s,c.height=l,t.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(c),c.dirty(),this._updatePlanePosition(m[0],m[1],t,e),this._updateGradientTexture(i.getVisual("visualMeta"),[p,d])},_fillEmptyPixels:function(t){var e=t.pixels,r=t.width,n=t.height;function i(v,g,m){v=Math.max(Math.min(v,r-1),0),g=Math.max(Math.min(g,n-1),0);var x=(g*(r-1)+v)*4;return e[x+3]===0?!1:(m[0]=e[x],m[1]=e[x+1],!0)}function a(v,g,m){m[0]=v[0]+g[0],m[1]=v[1]+g[1]}for(var o=[],s=[],l=[],u=[],c=[],f=0,h=0;h<n;h++)for(var d=0;d<r;d++){var p=(h*(r-1)+d)*4;e[p+3]===0&&(f=o[0]=o[1]=0,i(d-1,h,s)&&(f++,a(s,o,o)),i(d+1,h,l)&&(f++,a(l,o,o)),i(d,h-1,u)&&(f++,a(u,o,o)),i(d,h+1,c)&&(f++,a(c,o,o)),o[0]/=f,o[1]/=f,e[p]=o[0],e[p+1]=o[1]),e[p+3]=1}},_updateGradientTexture:function(t,e){if(!t||!t.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new J.Texture2D({image:document.createElement("canvas")});var r=this._gradientTexture,n=r.image;n.width=200,n.height=1;var i=n.getContext("2d"),a=i.createLinearGradient(0,.5,n.width,.5);t[0].stops.forEach(function(o){var s;e[1]===e[0]?s=0:(s=o.value/e[1],s=Math.min(Math.max(s,0),1)),a.addColorStop(s,o.color)}),i.fillStyle=a,i.fillRect(0,0,n.width,n.height),r.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(t,e,r,n){var i=this._limitInViewportAndFullFill(t,e,r,n);t=i.leftTop,e=i.rightBottom,this._particleSurface.setRegion(i.region),this._planeMesh.position.set((t[0]+e[0])/2,n.getHeight()-(t[1]+e[1])/2,0);var a=e[0]-t[0],o=e[1]-t[1];this._planeMesh.scale.set(a/2,o/2,1),this._particleSurface.resize(Math.max(Math.min(a,2048),1),Math.max(Math.min(o,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,e,r,n){var i=[Math.max(t[0],0),Math.max(t[1],0)],a=[Math.min(e[0],n.getWidth()),Math.min(e[1],n.getHeight())];if(r.get("coordinateSystem")==="bmap"){var o=r.getData().getDataExtent(r.coordDimToDataDim("lng")[0]),s=Math.floor(o[1]-o[0])>=359;s&&(i[0]>0&&(i[0]=0),a[0]<n.getWidth()&&(a[0]=n.getWidth()))}var l=e[0]-t[0],u=e[1]-t[1],c=a[0]-i[0],f=a[1]-i[1],h=[(i[0]-t[0])/l,1-f/u-(i[1]-t[1])/u,c/l,f/u];return{leftTop:i,rightBottom:a,region:h}},_updateCamera:function(t,e,r){this.viewGL.setViewport(0,0,t,e,r);var n=this.viewGL.camera;n.left=n.bottom=0,n.top=e,n.right=t,n.near=0,n.far=100,n.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function b5e(t){t.registerChartView(S5e),t.registerSeriesModel(m5e)}Ot(b5e);var jR=Vr.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),jR.superApply(this,"init",arguments)},mergeOption:function(t){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),jR.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=nm(this._flatCoords,e.flatCoords),this._flatCoordsOffset=nm(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t),r=e.option instanceof Array?e.option:e.getShallow("coords");return r},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var r=this._flatCoordsOffset[t*2],n=this._flatCoordsOffset[t*2+1],i=0;i<n;i++)e[i]=e[i]||[],e[i][0]=this._flatCoords[r+i*2],e[i][1]=this._flatCoords[r+i*2+1];return n}else{for(var a=this._getCoordsFromItemModel(t),i=0;i<a.length;i++)e[i]=e[i]||[],e[i][0]=a[i][0],e[i][1]=a[i][1];return a.length}},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),typeof t[0]=="number"){for(var r=t.length,n=new Uint32Array(r),i=new Float64Array(r),a=0,o=0,s=0,l=0;l<r;){s++;var u=t[l++];n[o++]=a+e,n[o++]=u;for(var c=0;c<u;c++){var f=t[l++],h=t[l++];i[a++]=f,i[a++]=h}}return{flatCoordsOffset:new Uint32Array(n.buffer,0,o),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){var r=new Kn(["value"],this);return r.hasItemOption=!1,r.initData(t.data,[],function(n,i,a,o){if(n instanceof Array)return NaN;r.hasItemOption=!0;var s=n.value;if(s!=null)return s instanceof Array?s[o]:s}),r},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const w5e=Or.extend({type:"linesGL",__ecgl__:!0,init:function(t,e){this.groupGL=new J.Node,this.viewGL=new mn("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Zc(this.viewGL),this._nativeLinesShader=J.createShader("ecgl.lines3D"),this._meshLinesShader=J.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,e,r){this.groupGL.removeAll(),this._glViewHelper.reset(t,r);var n=this._linesMeshes[0];n||(n=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(n),this._updateLinesMesh(t,n,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),r)},incrementalPrepareRender:function(t,e,r){this.groupGL.removeAll(),this._glViewHelper.reset(t,r),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),r)},incrementalRender:function(t,e,r,n){var i=this._linesMeshes[this._currentStep];i||(i=this._createLinesMesh(e),this._linesMeshes[this._currentStep]=i),this._updateLinesMesh(e,i,t.start,t.end),this.groupGL.add(i),n.getZr().refresh(),this._currentStep++},updateTransform:function(t,e,r){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,r)},_createLinesMesh:function(t){var e=new J.Mesh({$ignorePicking:!0,material:new J.Material({shader:J.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new RI({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:J.Mesh.LINES,culling:!1});return e},_updateLinesMesh:function(t,e,r,n){var i=t.getData();e.material.blend=t.get("blendMode")==="lighter"?J.additiveBlend:null;var a=t.get("lineStyle.curveness")||0,o=t.get("polyline"),s=e.geometry,l=t.coordinateSystem,u=Lr.firstNotNull(t.get("lineStyle.width"),1);u>1?(e.material.shader!==this._meshLinesShader&&e.material.attachShader(this._meshLinesShader),e.mode=J.Mesh.TRIANGLES):(e.material.shader!==this._nativeLinesShader&&e.material.attachShader(this._nativeLinesShader),e.mode=J.Mesh.LINES),r=r||0,n=n||i.count(),s.resetOffset();var c=0,f=0,h=[],d=[],p=[],v=[],g=[],m=.3,x=.7;function S(){d[0]=h[0]*x+v[0]*m-(h[1]-v[1])*a,d[1]=h[1]*x+v[1]*m-(v[0]-h[0])*a,p[0]=h[0]*m+v[0]*x-(h[1]-v[1])*a,p[1]=h[1]*m+v[1]*x-(v[0]-h[0])*a}if(o||a!==0)for(var b=r;b<n;b++)if(o){var T=t.getLineCoordsCount(b);c+=s.getPolylineVertexCount(T),f+=s.getPolylineTriangleCount(T)}else t.getLineCoords(b,g),this._glViewHelper.dataToPoint(l,g[0],h),this._glViewHelper.dataToPoint(l,g[1],v),S(),c+=s.getCubicCurveVertexCount(h,d,p,v),f+=s.getCubicCurveTriangleCount(h,d,p,v);else{var w=n-r;c+=w*s.getLineVertexCount(),f+=w*s.getLineVertexCount()}s.setVertexCount(c),s.setTriangleCount(f);for(var E=r,M=[],b=r;b<n;b++){J.parseColor(Zi(i,E),M);var A=Lr.firstNotNull(Yi(i,E),1);M[3]*=A;for(var T=t.getLineCoords(b,g),R=0;R<T;R++)this._glViewHelper.dataToPoint(l,g[R],g[R]);o?s.addPolyline(g,M,u,0,T):a!==0?(h=g[0],v=g[1],S(),s.addCubicCurve(h,d,p,v,M,u)):s.addPolyline(g,M,u,0,2),E++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function T5e(t){t.registerChartView(w5e),t.registerSeriesModel(jR)}Ot(T5e);const C5e="_fadeInOutFirst_1fb1u_1",E5e="_fadeInOutSecond_1fb1u_1",A5e="_overlay_1fb1u_89",M5e="_fadeInYear_1fb1u_1",ac={"text-overlay":"_text-overlay_1fb1u_2","animated-text":"_animated-text_1fb1u_10","text-1":"_text-1_1fb1u_23",fadeInOutFirst:C5e,"text-2":"_text-2_1fb1u_28",fadeInOutSecond:E5e,"year-counter":"_year-counter_1fb1u_61","press-enter":"_press-enter_1fb1u_76",overlay:A5e,"overlay-visible":"_overlay-visible_1fb1u_102","audio-overlay":"_audio-overlay_1fb1u_106",fadeInYear:M5e},R5e=[{year:1978,country:"France",coordinates:[1.8883335,46.603354],count:51},{year:1979,country:"USA",coordinates:[-100.445882,39.7837304],count:50},{year:1979,country:"W Germany",coordinates:[10.5578766,47.7224841],count:37},{year:1979,country:"Nepal",coordinates:[83.9999901,28.3780464],count:83},{year:1979,country:"France",coordinates:[1.8883335,46.603354],count:50},{year:1979,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:12},{year:1979,country:"Austria",coordinates:[14.12456,47.59397],count:21},{year:1979,country:"Italy",coordinates:[12.674297,42.6384261],count:28},{year:1980,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:8},{year:1980,country:"Australia",coordinates:[134.755,-24.7761086],count:37},{year:1980,country:"Japan",coordinates:[139.2394179,36.5748441],count:244},{year:1981,country:"Spain",coordinates:[-4.8379791,39.3260685],count:24},{year:1981,country:"France",coordinates:[1.8883335,46.603354],count:81},{year:1981,country:"Nepal",coordinates:[83.9999901,28.3780464],count:98},{year:1981,country:"USA",coordinates:[-100.445882,39.7837304],count:57},{year:1981,country:"Canada",coordinates:[-107.991707,61.0666922],count:24},{year:1981,country:"Australia",coordinates:[134.755,-24.7761086],count:17},{year:1981,country:"Japan",coordinates:[139.2394179,36.5748441],count:251},{year:1982,country:"USA",coordinates:[-100.445882,39.7837304],count:40},{year:1982,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:40},{year:1983,country:"Austria",coordinates:[14.12456,47.59397],count:56},{year:1983,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:49},{year:1983,country:"Belgium",coordinates:[4.6667145,50.6402809],count:13},{year:1983,country:"Nepal",coordinates:[83.9999901,28.3780464],count:65},{year:1983,country:"France",coordinates:[1.8883335,46.603354],count:88},{year:1983,country:"S Korea",coordinates:[127.6961188,36.638392],count:26},{year:1984,country:"France",coordinates:[1.8883335,46.603354],count:100},{year:1984,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:70},{year:1984,country:"USA",coordinates:[-100.445882,39.7837304],count:117},{year:1984,country:"Japan",coordinates:[139.2394179,36.5748441],count:153},{year:1984,country:"UK",coordinates:[20.5447525,6.3110548],count:74},{year:1985,country:"Italy",coordinates:[12.674297,42.6384261],count:43},{year:1985,country:"Japan",coordinates:[139.2394179,36.5748441],count:156},{year:1985,country:"France",coordinates:[1.8883335,46.603354],count:81},{year:1985,country:"Austria",coordinates:[14.12456,47.59397],count:35},{year:1985,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:23},{year:1985,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1985,country:"Canada",coordinates:[-107.991707,61.0666922],count:6},{year:1985,country:"Belgium",coordinates:[4.6667145,50.6402809],count:2},{year:1985,country:"USA",coordinates:[-100.445882,39.7837304],count:65},{year:1985,country:"Spain",coordinates:[-4.8379791,39.3260685],count:63},{year:1985,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:17},{year:1985,country:"UK",coordinates:[20.5447525,6.3110548],count:81},{year:1985,country:"Australia",coordinates:[134.755,-24.7761086],count:3},{year:1986,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:1986,country:"USA",coordinates:[-100.445882,39.7837304],count:95},{year:1986,country:"UK",coordinates:[20.5447525,6.3110548],count:34},{year:1986,country:"Australia",coordinates:[134.755,-24.7761086],count:9},{year:1986,country:"Italy",coordinates:[12.674297,42.6384261],count:39},{year:1986,country:"W Germany",coordinates:[10.5578766,47.7224841],count:62},{year:1986,country:"Austria",coordinates:[14.12456,47.59397],count:32},{year:1986,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:6},{year:1986,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:52},{year:1986,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:32},{year:1986,country:"France",coordinates:[1.8883335,46.603354],count:116},{year:1987,country:"USA",coordinates:[-100.445882,39.7837304],count:160},{year:1987,country:"Greece",coordinates:[21.9877132,38.9953683],count:5},{year:1987,country:"Nepal",coordinates:[83.9999901,28.3780464],count:66},{year:1987,country:"UK",coordinates:[20.5447525,6.3110548],count:34},{year:1987,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:6},{year:1987,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:17},{year:1988,country:"UK",coordinates:[20.5447525,6.3110548],count:115},{year:1988,country:"USA",coordinates:[-100.445882,39.7837304],count:111},{year:1988,country:"Canada",coordinates:[-107.991707,61.0666922],count:9},{year:1988,country:"S Korea",coordinates:[127.6961188,36.638392],count:111},{year:1988,country:"Denmark",coordinates:[10.3333283,55.670249],count:8},{year:1988,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:54},{year:1988,country:"France",coordinates:[1.8883335,46.603354],count:88},{year:1988,country:"Spain",coordinates:[-4.8379791,39.3260685],count:95},{year:1988,country:"Belgium",coordinates:[4.6667145,50.6402809],count:16},{year:1988,country:"Italy",coordinates:[12.674297,42.6384261],count:65},{year:1988,country:"Nepal",coordinates:[83.9999901,28.3780464],count:118},{year:1989,country:"UK",coordinates:[20.5447525,6.3110548],count:79},{year:1989,country:"USA",coordinates:[-100.445882,39.7837304],count:140},{year:1989,country:"Australia",coordinates:[134.755,-24.7761086],count:13},{year:1989,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:5},{year:1989,country:"Japan",coordinates:[139.2394179,36.5748441],count:79},{year:1989,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:67},{year:1989,country:"W Germany",coordinates:[10.5578766,47.7224841],count:54},{year:1989,country:"Austria",coordinates:[14.12456,47.59397],count:24},{year:1989,country:"Italy",coordinates:[12.674297,42.6384261],count:68},{year:1989,country:"France",coordinates:[1.8883335,46.603354],count:127},{year:1989,country:"Nepal",coordinates:[83.9999901,28.3780464],count:85},{year:1990,country:"UK",coordinates:[20.5447525,6.3110548],count:87},{year:1990,country:"Ireland",coordinates:[-7.9794599,52.865196],count:1},{year:1990,country:"Italy",coordinates:[12.674297,42.6384261],count:82},{year:1990,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:48},{year:1990,country:"Austria",coordinates:[14.12456,47.59397],count:18},{year:1990,country:"Germany",coordinates:[10.4478313,51.1638175],count:31},{year:1990,country:"Nepal",coordinates:[83.9999901,28.3780464],count:138},{year:1990,country:"USA",coordinates:[-100.445882,39.7837304],count:169},{year:1990,country:"Australia",coordinates:[134.755,-24.7761086],count:13},{year:1990,country:"Sweden",coordinates:[14.5208584,59.6749712],count:7},{year:1990,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:7},{year:1991,country:"USA",coordinates:[-100.445882,39.7837304],count:138},{year:1991,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:1991,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:2},{year:1991,country:"Ireland",coordinates:[-7.9794599,52.865196],count:17},{year:1991,country:"France",coordinates:[1.8883335,46.603354],count:131},{year:1991,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:96},{year:1991,country:"Italy",coordinates:[12.674297,42.6384261],count:63},{year:1991,country:"UK",coordinates:[20.5447525,6.3110548],count:73},{year:1991,country:"Germany",coordinates:[10.4478313,51.1638175],count:63},{year:1991,country:"Australia",coordinates:[134.755,-24.7761086],count:16},{year:1991,country:"S Korea",coordinates:[127.6961188,36.638392],count:90},{year:1992,country:"USA",coordinates:[-100.445882,39.7837304],count:102},{year:1992,country:"Spain",coordinates:[-4.8379791,39.3260685],count:125},{year:1992,country:"UK",coordinates:[20.5447525,6.3110548],count:141},{year:1992,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:9},{year:1992,country:"Canada",coordinates:[-107.991707,61.0666922],count:32},{year:1992,country:"Nepal",coordinates:[83.9999901,28.3780464],count:108},{year:1992,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:1},{year:1992,country:"Australia",coordinates:[134.755,-24.7761086],count:7},{year:1992,country:"Italy",coordinates:[12.674297,42.6384261],count:97},{year:1992,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:57},{year:1992,country:"France",coordinates:[1.8883335,46.603354],count:143},{year:1992,country:"Poland",coordinates:[19.134422,52.215933],count:9},{year:1992,country:"Belgium",coordinates:[4.6667145,50.6402809],count:20},{year:1992,country:"S Korea",coordinates:[127.6961188,36.638392],count:72},{year:1992,country:"Japan",coordinates:[139.2394179,36.5748441],count:62},{year:1993,country:"USA",coordinates:[-100.445882,39.7837304],count:116},{year:1993,country:"UK",coordinates:[20.5447525,6.3110548],count:77},{year:1993,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:10},{year:1993,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:42},{year:1993,country:"Austria",coordinates:[14.12456,47.59397],count:34},{year:1993,country:"Germany",coordinates:[10.4478313,51.1638175],count:76},{year:1993,country:"Italy",coordinates:[12.674297,42.6384261],count:57},{year:1993,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:8},{year:1993,country:"France",coordinates:[1.8883335,46.603354],count:98},{year:1993,country:"S Korea",coordinates:[127.6961188,36.638392],count:82},{year:1993,country:"Nepal",coordinates:[83.9999901,28.3780464],count:97},{year:1993,country:"Japan",coordinates:[139.2394179,36.5748441],count:105},{year:1994,country:"Germany",coordinates:[10.4478313,51.1638175],count:75},{year:1994,country:"Austria",coordinates:[14.12456,47.59397],count:46},{year:1994,country:"Russia",coordinates:[97.7453061,64.6863136],count:24},{year:1994,country:"Japan",coordinates:[139.2394179,36.5748441],count:130},{year:1994,country:"S Korea",coordinates:[127.6961188,36.638392],count:85},{year:1994,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:70},{year:1994,country:"Canada",coordinates:[-107.991707,61.0666922],count:24},{year:1994,country:"USA",coordinates:[-100.445882,39.7837304],count:112},{year:1994,country:"Sweden",coordinates:[14.5208584,59.6749712],count:3},{year:1994,country:"UK",coordinates:[20.5447525,6.3110548],count:75},{year:1994,country:"Ireland",coordinates:[-7.9794599,52.865196],count:1},{year:1994,country:"Poland",coordinates:[19.134422,52.215933],count:5},{year:1994,country:"France",coordinates:[1.8883335,46.603354],count:99},{year:1994,country:"Australia",coordinates:[134.755,-24.7761086],count:10},{year:1994,country:"Italy",coordinates:[12.674297,42.6384261],count:59},{year:1995,country:"USA",coordinates:[-100.445882,39.7837304],count:148},{year:1995,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:14},{year:1995,country:"Spain",coordinates:[-4.8379791,39.3260685],count:57},{year:1995,country:"Italy",coordinates:[12.674297,42.6384261],count:42},{year:1995,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:43},{year:1995,country:"Germany",coordinates:[10.4478313,51.1638175],count:97},{year:1995,country:"France",coordinates:[1.8883335,46.603354],count:89},{year:1995,country:"UK",coordinates:[20.5447525,6.3110548],count:87},{year:1995,country:"Nepal",coordinates:[83.9999901,28.3780464],count:135},{year:1995,country:"Austria",coordinates:[14.12456,47.59397],count:79},{year:1995,country:"Poland",coordinates:[19.134422,52.215933],count:7},{year:1995,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:10},{year:1996,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:36},{year:1996,country:"Spain",coordinates:[-4.8379791,39.3260685],count:50},{year:1996,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:48},{year:1996,country:"Sweden",coordinates:[14.5208584,59.6749712],count:7},{year:1996,country:"USA",coordinates:[-100.445882,39.7837304],count:121},{year:1996,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:10},{year:1996,country:"Austria",coordinates:[14.12456,47.59397],count:66},{year:1996,country:"Canada",coordinates:[-107.991707,61.0666922],count:25},{year:1996,country:"France",coordinates:[1.8883335,46.603354],count:105},{year:1996,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:4},{year:1996,country:"Germany",coordinates:[10.4478313,51.1638175],count:101},{year:1996,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:61},{year:1996,country:"Nepal",coordinates:[83.9999901,28.3780464],count:179},{year:1996,country:"Italy",coordinates:[12.674297,42.6384261],count:58},{year:1996,country:"UK",coordinates:[20.5447525,6.3110548],count:77},{year:1996,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:25},{year:1996,country:"Poland",coordinates:[19.134422,52.215933],count:23},{year:1996,country:"S Korea",coordinates:[127.6961188,36.638392],count:57},{year:1997,country:"France",coordinates:[1.8883335,46.603354],count:99},{year:1997,country:"USA",coordinates:[-100.445882,39.7837304],count:134},{year:1997,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:62},{year:1997,country:"Canada",coordinates:[-107.991707,61.0666922],count:31},{year:1997,country:"Belgium",coordinates:[4.6667145,50.6402809],count:5},{year:1997,country:"Italy",coordinates:[12.674297,42.6384261],count:70},{year:1997,country:"Germany",coordinates:[10.4478313,51.1638175],count:100},{year:1997,country:"Austria",coordinates:[14.12456,47.59397],count:79},{year:1997,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:19},{year:1997,country:"Russia",coordinates:[97.7453061,64.6863136],count:94},{year:1997,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:5},{year:1997,country:"Japan",coordinates:[139.2394179,36.5748441],count:101},{year:1997,country:"Nepal",coordinates:[83.9999901,28.3780464],count:152},{year:1997,country:"UK",coordinates:[20.5447525,6.3110548],count:106},{year:1997,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:4},{year:1997,country:"Poland",coordinates:[19.134422,52.215933],count:7},{year:1997,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:14},{year:1997,country:"Australia",coordinates:[134.755,-24.7761086],count:37},{year:1997,country:"China",coordinates:[104.999955,35.0000663],count:6},{year:1997,country:"Spain",coordinates:[-4.8379791,39.3260685],count:128},{year:1998,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:6},{year:1998,country:"USA",coordinates:[-100.445882,39.7837304],count:169},{year:1998,country:"Sweden",coordinates:[14.5208584,59.6749712],count:12},{year:1998,country:"Denmark",coordinates:[10.3333283,55.670249],count:2},{year:1965,country:"W Germany",coordinates:[10.5578766,47.7224841],count:19},{year:1965,country:"Iran",coordinates:[54.5643516,32.6475314],count:4},{year:1969,country:"W Germany",coordinates:[10.5578766,47.7224841],count:28},{year:1970,country:"UK",coordinates:[20.5447525,6.3110548],count:29},{year:1970,country:"W Germany",coordinates:[10.5578766,47.7224841],count:1},{year:1970,country:"USA",coordinates:[-100.445882,39.7837304],count:2},{year:1970,country:"Nepal",coordinates:[83.9999901,28.3780464],count:42},{year:1973,country:"Japan",coordinates:[139.2394179,36.5748441],count:156},{year:1973,country:"Italy",coordinates:[12.674297,42.6384261],count:76},{year:1975,country:"Austria",coordinates:[14.12456,47.59397],count:12},{year:1975,country:"W Germany",coordinates:[10.5578766,47.7224841],count:9},{year:1975,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1977,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:11},{year:1977,country:"Nepal",coordinates:[83.9999901,28.3780464],count:20},{year:1978,country:"Austria",coordinates:[14.12456,47.59397],count:27},{year:1978,country:"USA",coordinates:[-100.445882,39.7837304],count:45},{year:1978,country:"UK",coordinates:[20.5447525,6.3110548],count:22},{year:1978,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:1},{year:1978,country:"Nepal",coordinates:[83.9999901,28.3780464],count:70},{year:1979,country:"Japan",coordinates:[139.2394179,36.5748441],count:164},{year:1979,country:"UK",coordinates:[20.5447525,6.3110548],count:38},{year:1980,country:"W Germany",coordinates:[10.5578766,47.7224841],count:61},{year:1980,country:"Nepal",coordinates:[83.9999901,28.3780464],count:113},{year:1981,country:"Sweden",coordinates:[14.5208584,59.6749712],count:27},{year:1981,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:32},{year:1982,country:"Austria",coordinates:[14.12456,47.59397],count:35},{year:1982,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:1},{year:1982,country:"Nepal",coordinates:[83.9999901,28.3780464],count:131},{year:1982,country:"W Germany",coordinates:[10.5578766,47.7224841],count:50},{year:1982,country:"Italy",coordinates:[12.674297,42.6384261],count:36},{year:1982,country:"UK",coordinates:[20.5447525,6.3110548],count:35},{year:1982,country:"Japan",coordinates:[139.2394179,36.5748441],count:212},{year:1983,country:"Italy",coordinates:[12.674297,42.6384261],count:42},{year:1983,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:65},{year:1983,country:"Japan",coordinates:[139.2394179,36.5748441],count:173},{year:1984,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:70},{year:1984,country:"S Korea",coordinates:[127.6961188,36.638392],count:82},{year:1985,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:16},{year:1986,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:9},{year:1986,country:"Belgium",coordinates:[4.6667145,50.6402809],count:3},{year:1986,country:"Nepal",coordinates:[83.9999901,28.3780464],count:104},{year:1986,country:"Poland",coordinates:[19.134422,52.215933],count:51},{year:1987,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:4},{year:1987,country:"Spain",coordinates:[-4.8379791,39.3260685],count:83},{year:1987,country:"Canada",coordinates:[-107.991707,61.0666922],count:10},{year:1987,country:"Japan",coordinates:[139.2394179,36.5748441],count:123},{year:1988,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:48},{year:1988,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:7},{year:1988,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:1},{year:1988,country:"Japan",coordinates:[139.2394179,36.5748441],count:89},{year:1988,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:8},{year:1989,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:29},{year:1989,country:"S Korea",coordinates:[127.6961188,36.638392],count:160},{year:1990,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:12},{year:1990,country:"S Korea",coordinates:[127.6961188,36.638392],count:85},{year:1990,country:"Spain",coordinates:[-4.8379791,39.3260685],count:108},{year:1990,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:21},{year:1991,country:"Austria",coordinates:[14.12456,47.59397],count:32},{year:1991,country:"Spain",coordinates:[-4.8379791,39.3260685],count:112},{year:1991,country:"Japan",coordinates:[139.2394179,36.5748441],count:130},{year:1991,country:"Belgium",coordinates:[4.6667145,50.6402809],count:16},{year:1991,country:"Poland",coordinates:[19.134422,52.215933],count:28},{year:1991,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:1991,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:8},{year:1991,country:"USSR",coordinates:[48.0254474,46.3421653],count:71},{year:1991,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:40},{year:1992,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:28},{year:1992,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:1993,country:"China",coordinates:[104.999955,35.0000663],count:37},{year:1993,country:"Spain",coordinates:[-4.8379791,39.3260685],count:108},{year:1994,country:"Nepal",coordinates:[83.9999901,28.3780464],count:116},{year:1995,country:"Croatia",coordinates:[15.6575209,45.3658443],count:11},{year:1995,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:5},{year:1995,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:19},{year:1996,country:"Russia",coordinates:[97.7453061,64.6863136],count:65},{year:1996,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:13},{year:1996,country:"Belgium",coordinates:[4.6667145,50.6402809],count:20},{year:1997,country:"S Korea",coordinates:[127.6961188,36.638392],count:88},{year:1997,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:22},{year:1998,country:"France",coordinates:[1.8883335,46.603354],count:81},{year:1998,country:"Italy",coordinates:[12.674297,42.6384261],count:60},{year:1998,country:"S Korea",coordinates:[127.6961188,36.638392],count:19},{year:1998,country:"Nepal",coordinates:[83.9999901,28.3780464],count:208},{year:1998,country:"Spain",coordinates:[-4.8379791,39.3260685],count:93},{year:1960,country:"UK",coordinates:[20.5447525,6.3110548],count:11},{year:1960,country:"India",coordinates:[78.6677428,22.3511148],count:23},{year:1960,country:"Nepal",coordinates:[83.9999901,28.3780464],count:41},{year:1969,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:20},{year:1971,country:"Japan",coordinates:[139.2394179,36.5748441],count:100},{year:1974,country:"W Germany",coordinates:[10.5578766,47.7224841],count:20},{year:1978,country:"W Germany",coordinates:[10.5578766,47.7224841],count:72},{year:1980,country:"Poland",coordinates:[19.134422,52.215933],count:37},{year:1981,country:"Italy",coordinates:[12.674297,42.6384261],count:48},{year:1983,country:"Australia",coordinates:[134.755,-24.7761086],count:18},{year:1983,country:"UK",coordinates:[20.5447525,6.3110548],count:39},{year:1986,country:"Spain",coordinates:[-4.8379791,39.3260685],count:57},{year:1995,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:3},{year:1970,country:"Japan",coordinates:[139.2394179,36.5748441],count:237},{year:1977,country:"Italy",coordinates:[12.674297,42.6384261],count:30},{year:1980,country:"UK",coordinates:[20.5447525,6.3110548],count:39},{year:1980,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:58},{year:1981,country:"UK",coordinates:[20.5447525,6.3110548],count:34},{year:1982,country:"Spain",coordinates:[-4.8379791,39.3260685],count:38},{year:1985,country:"Nepal",coordinates:[83.9999901,28.3780464],count:128},{year:1986,country:"S Korea",coordinates:[127.6961188,36.638392],count:79},{year:1994,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:28},{year:1994,country:"Spain",coordinates:[-4.8379791,39.3260685],count:28},{year:1995,country:"Japan",coordinates:[139.2394179,36.5748441],count:120},{year:1950,country:"UK",coordinates:[20.5447525,6.3110548],count:13},{year:1950,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:2},{year:1953,country:"UK",coordinates:[20.5447525,6.3110548],count:55},{year:1953,country:"Japan",coordinates:[139.2394179,36.5748441],count:23},{year:1955,country:"W Germany",coordinates:[10.5578766,47.7224841],count:20},{year:1957,country:"UK",coordinates:[20.5447525,6.3110548],count:18},{year:1969,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:9},{year:1969,country:"Nepal",coordinates:[83.9999901,28.3780464],count:13},{year:1976,country:"W Germany",coordinates:[10.5578766,47.7224841],count:11},{year:1976,country:"Austria",coordinates:[14.12456,47.59397],count:11},{year:1976,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:2},{year:1978,country:"S Korea",coordinates:[127.6961188,36.638392],count:7},{year:1979,country:"Spain",coordinates:[-4.8379791,39.3260685],count:33},{year:1980,country:"Austria",coordinates:[14.12456,47.59397],count:18},{year:1980,country:"Italy",coordinates:[12.674297,42.6384261],count:68},{year:1981,country:"Austria",coordinates:[14.12456,47.59397],count:53},{year:1981,country:"W Germany",coordinates:[10.5578766,47.7224841],count:31},{year:1982,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:18},{year:1983,country:"W Germany",coordinates:[10.5578766,47.7224841],count:48},{year:1984,country:"Italy",coordinates:[12.674297,42.6384261],count:35},{year:1984,country:"W Germany",coordinates:[10.5578766,47.7224841],count:33},{year:1985,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:19},{year:1987,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:40},{year:1987,country:"Austria",coordinates:[14.12456,47.59397],count:37},{year:1987,country:"W Germany",coordinates:[10.5578766,47.7224841],count:27},{year:1990,country:"France",coordinates:[1.8883335,46.603354],count:178},{year:1990,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:17},{year:1992,country:"Germany",coordinates:[10.4478313,51.1638175],count:82},{year:1995,country:"Australia",coordinates:[134.755,-24.7761086],count:20},{year:1995,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:1996,country:"Finland",coordinates:[25.9209164,63.2467777],count:4},{year:1996,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:21},{year:1998,country:"Japan",coordinates:[139.2394179,36.5748441],count:154},{year:1974,country:"Spain",coordinates:[-4.8379791,39.3260685],count:25},{year:1988,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:6},{year:1988,country:"Poland",coordinates:[19.134422,52.215933],count:57},{year:1981,country:"Poland",coordinates:[19.134422,52.215933],count:26},{year:1984,country:"Spain",coordinates:[-4.8379791,39.3260685],count:54},{year:1964,country:"Japan",coordinates:[139.2394179,36.5748441],count:54},{year:1964,country:"Nepal",coordinates:[83.9999901,28.3780464],count:30},{year:1970,country:"France",coordinates:[1.8883335,46.603354],count:4},{year:1972,country:"Japan",coordinates:[139.2394179,36.5748441],count:76},{year:1974,country:"Japan",coordinates:[139.2394179,36.5748441],count:130},{year:1975,country:"Japan",coordinates:[139.2394179,36.5748441],count:168},{year:1976,country:"UK",coordinates:[20.5447525,6.3110548],count:39},{year:1976,country:"Nepal",coordinates:[83.9999901,28.3780464],count:38},{year:1976,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1976,country:"UK/Hong Kong",coordinates:[-.07990198955241211,51.5336544],count:1},{year:1978,country:"Japan",coordinates:[139.2394179,36.5748441],count:164},{year:1979,country:"Poland",coordinates:[19.134422,52.215933],count:78},{year:1981,country:"S Korea",coordinates:[127.6961188,36.638392],count:5},{year:1982,country:"France",coordinates:[1.8883335,46.603354],count:99},{year:1985,country:"Greece",coordinates:[21.9877132,38.9953683],count:11},{year:1985,country:"W Germany",coordinates:[10.5578766,47.7224841],count:30},{year:1987,country:"France",coordinates:[1.8883335,46.603354],count:98},{year:1991,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:8},{year:1991,country:"Nepal",coordinates:[83.9999901,28.3780464],count:122},{year:1978,country:"Italy",coordinates:[12.674297,42.6384261],count:23},{year:1983,country:"Poland",coordinates:[19.134422,52.215933],count:61},{year:1980,country:"Spain",coordinates:[-4.8379791,39.3260685],count:37},{year:1980,country:"USA",coordinates:[-100.445882,39.7837304],count:38},{year:1980,country:"France",coordinates:[1.8883335,46.603354],count:36},{year:1983,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:8},{year:1984,country:"Ireland",coordinates:[-7.9794599,52.865196],count:3},{year:1984,country:"Nepal",coordinates:[83.9999901,28.3780464],count:129},{year:1984,country:"Austria",coordinates:[14.12456,47.59397],count:13},{year:1988,country:"Australia",coordinates:[134.755,-24.7761086],count:35},{year:1988,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:13},{year:1988,country:"W Germany",coordinates:[10.5578766,47.7224841],count:38},{year:1989,country:"Spain",coordinates:[-4.8379791,39.3260685],count:99},{year:1989,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:40},{year:1990,country:"W Germany",coordinates:[10.5578766,47.7224841],count:38},{year:1992,country:"Austria",coordinates:[14.12456,47.59397],count:15},{year:1993,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:9},{year:1994,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:34},{year:1994,country:"Greece",coordinates:[21.9877132,38.9953683],count:3},{year:1994,country:"Finland",coordinates:[25.9209164,63.2467777],count:5},{year:1995,country:"Russia",coordinates:[97.7453061,64.6863136],count:53},{year:1997,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:17},{year:1998,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:29},{year:1990,country:"Japan",coordinates:[139.2394179,36.5748441],count:51},{year:1991,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:2},{year:1993,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1986,country:"Japan",coordinates:[139.2394179,36.5748441],count:95},{year:1988,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:9},{year:1964,country:"W Germany",coordinates:[10.5578766,47.7224841],count:15},{year:1982,country:"Poland",coordinates:[19.134422,52.215933],count:18},{year:1984,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:7},{year:1984,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:10},{year:1984,country:"Poland",coordinates:[19.134422,52.215933],count:38},{year:1984,country:"Canada",coordinates:[-107.991707,61.0666922],count:38},{year:1985,country:"Poland",coordinates:[19.134422,52.215933],count:80},{year:1985,country:"China",coordinates:[104.999955,35.0000663],count:11},{year:1985,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:19},{year:1986,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:1987,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:4},{year:1987,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:17},{year:1987,country:"Poland",coordinates:[19.134422,52.215933],count:36},{year:1988,country:"Ireland",coordinates:[-7.9794599,52.865196],count:2},{year:1988,country:"Austria",coordinates:[14.12456,47.59397],count:9},{year:1988,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:8},{year:1989,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1989,country:"Spain/USA",coordinates:[-83.537938,30.864639],count:1},{year:1989,country:"Belgium",coordinates:[4.6667145,50.6402809],count:28},{year:1990,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:3},{year:1990,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:4},{year:1990,country:"Belgium",coordinates:[4.6667145,50.6402809],count:10},{year:1990,country:"Poland",coordinates:[19.134422,52.215933],count:16},{year:1990,country:"Hungary",coordinates:[19.5060937,47.1817585],count:14},{year:1990,country:"USSR",coordinates:[48.0254474,46.3421653],count:51},{year:1990,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:1991,country:"Brazil",coordinates:[-53.2,-10.3333333],count:10},{year:1991,country:"Greece",coordinates:[21.9877132,38.9953683],count:5},{year:1991,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:8},{year:1991,country:"Hong Kong",coordinates:[114.1849161,22.350627],count:3},{year:1991,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:2},{year:1992,country:"Sweden",coordinates:[14.5208584,59.6749712],count:4},{year:1992,country:"N Korea",coordinates:[127.6961188,36.638392],count:1},{year:1992,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:5},{year:1993,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:13},{year:1993,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:2},{year:1993,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:1993,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:1},{year:1993,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:1993,country:"Poland",coordinates:[19.134422,52.215933],count:9},{year:1993,country:"Canada",coordinates:[-107.991707,61.0666922],count:7},{year:1994,country:"Austria/Brazil",coordinates:[-52.419048477168516,-29.72907145],count:1},{year:1994,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:11},{year:1994,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:3},{year:1994,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:1},{year:1994,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:15},{year:1994,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:1},{year:1994,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:2},{year:1994,country:"China",coordinates:[104.999955,35.0000663],count:11},{year:1995,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:2},{year:1995,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:12},{year:1995,country:"Germany/Iran",coordinates:[13.299962054001433,52.46095135],count:1},{year:1995,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:3},{year:1995,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:1995,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:13},{year:1995,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:2},{year:1995,country:"S Africa",coordinates:[24.991639,-28.8166236],count:3},{year:1995,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:1996,country:"Japan",coordinates:[139.2394179,36.5748441],count:114},{year:1996,country:"Denmark",coordinates:[10.3333283,55.670249],count:9},{year:1996,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:11},{year:1996,country:"Latvia",coordinates:[24.7537645,56.8406494],count:7},{year:1996,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:11},{year:1996,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1996,country:"Ireland",coordinates:[-7.9794599,52.865196],count:2},{year:1996,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:1996,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:1996,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:1996,country:"S Africa",coordinates:[24.991639,-28.8166236],count:19},{year:1996,country:"Australia",coordinates:[134.755,-24.7761086],count:18},{year:1996,country:"Andorra",coordinates:[1.5732033,42.5407167],count:5},{year:1996,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:13},{year:1996,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:9},{year:1997,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:1997,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:18},{year:1997,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:31},{year:1997,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1997,country:"Singapore",coordinates:[103.8194992,1.357107],count:5},{year:1997,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:26},{year:1997,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:12},{year:1997,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:1997,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:34},{year:1997,country:"Brazil",coordinates:[-53.2,-10.3333333],count:3},{year:1998,country:"Russia",coordinates:[97.7453061,64.6863136],count:70},{year:1998,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:12},{year:1998,country:"Romania",coordinates:[24.6859225,45.9852129],count:3},{year:1998,country:"Germany",coordinates:[10.4478313,51.1638175],count:65},{year:1998,country:"Austria",coordinates:[14.12456,47.59397],count:81},{year:1998,country:"Canada",coordinates:[-107.991707,61.0666922],count:27},{year:1998,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:24},{year:1998,country:"UK",coordinates:[20.5447525,6.3110548],count:130},{year:1998,country:"Ireland",coordinates:[-7.9794599,52.865196],count:9},{year:1998,country:"Australia",coordinates:[134.755,-24.7761086],count:13},{year:1998,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:23},{year:1998,country:"UK/Italy",coordinates:[-1.5914109,54.7690311],count:1},{year:1998,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1998,country:"Brazil",coordinates:[-53.2,-10.3333333],count:3},{year:1998,country:"China",coordinates:[104.999955,35.0000663],count:44},{year:1972,country:"W Germany",coordinates:[10.5578766,47.7224841],count:26},{year:1993,country:"Sweden",coordinates:[14.5208584,59.6749712],count:1},{year:1993,country:"Australia",coordinates:[134.755,-24.7761086],count:26},{year:1969,country:"Italy",coordinates:[12.674297,42.6384261],count:10},{year:1970,country:"S Korea",coordinates:[127.6961188,36.638392],count:12},{year:1975,country:"Nepal",coordinates:[83.9999901,28.3780464],count:35},{year:1977,country:"Japan",coordinates:[139.2394179,36.5748441],count:65},{year:1987,country:"S Korea",coordinates:[127.6961188,36.638392],count:42},{year:1981,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:2},{year:1955,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:11},{year:1956,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:9},{year:1956,country:"India",coordinates:[78.6677428,22.3511148],count:2},{year:1969,country:"USA",coordinates:[-100.445882,39.7837304],count:10},{year:1973,country:"USA",coordinates:[-100.445882,39.7837304],count:17},{year:1973,country:"Nepal",coordinates:[83.9999901,28.3780464],count:30},{year:1976,country:"Italy",coordinates:[12.674297,42.6384261],count:14},{year:1977,country:"USA",coordinates:[-100.445882,39.7837304],count:19},{year:1977,country:"Austria",coordinates:[14.12456,47.59397],count:4},{year:1977,country:"W Germany",coordinates:[10.5578766,47.7224841],count:23},{year:1977,country:"UK",coordinates:[20.5447525,6.3110548],count:17},{year:1979,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:18},{year:1980,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:30},{year:1981,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:13},{year:1981,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:31},{year:1982,country:"Belgium",coordinates:[4.6667145,50.6402809],count:19},{year:1983,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:3},{year:1983,country:"China",coordinates:[104.999955,35.0000663],count:1},{year:1985,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:21},{year:1987,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:30},{year:1988,country:"USSR",coordinates:[48.0254474,46.3421653],count:2},{year:1989,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:5},{year:1989,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:13},{year:1989,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:5},{year:1989,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:1989,country:"Canada",coordinates:[-107.991707,61.0666922],count:18},{year:1990,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:4},{year:1990,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:1990,country:"Greece",coordinates:[21.9877132,38.9953683],count:9},{year:1991,country:"Denmark",coordinates:[10.3333283,55.670249],count:9},{year:1992,country:"USSR",coordinates:[48.0254474,46.3421653],count:31},{year:1992,country:"Romania",coordinates:[24.6859225,45.9852129],count:2},{year:1992,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:13},{year:1993,country:"Russia",coordinates:[97.7453061,64.6863136],count:25},{year:1993,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:1993,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:13},{year:1993,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:1993,country:"Latvia",coordinates:[24.7537645,56.8406494],count:10},{year:1993,country:"Finland",coordinates:[25.9209164,63.2467777],count:4},{year:1994,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:3},{year:1994,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:2},{year:1994,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:12},{year:1994,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:1995,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:6},{year:1995,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:9},{year:1995,country:"Belarus",coordinates:[27.6971358,53.4250605],count:4},{year:1995,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:13},{year:1995,country:"S Korea",coordinates:[127.6961188,36.638392],count:59},{year:1996,country:"Romania",coordinates:[24.6859225,45.9852129],count:6},{year:1996,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:1997,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:6},{year:1997,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:4},{year:1998,country:"Greece",coordinates:[21.9877132,38.9953683],count:12},{year:1998,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:8},{year:1998,country:"Finland",coordinates:[25.9209164,63.2467777],count:3},{year:1965,country:"Japan",coordinates:[139.2394179,36.5748441],count:32},{year:1973,country:"W Germany",coordinates:[10.5578766,47.7224841],count:13},{year:1969,country:"Austria",coordinates:[14.12456,47.59397],count:8},{year:1973,country:"Austria",coordinates:[14.12456,47.59397],count:10},{year:1973,country:"UK",coordinates:[20.5447525,6.3110548],count:13},{year:1974,country:"UK",coordinates:[20.5447525,6.3110548],count:34},{year:1965,country:"UK",coordinates:[20.5447525,6.3110548],count:15},{year:1983,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:1963,country:"USA",coordinates:[-100.445882,39.7837304],count:21},{year:1963,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:1963,country:"UK",coordinates:[20.5447525,6.3110548],count:4},{year:1963,country:"India",coordinates:[78.6677428,22.3511148],count:2},{year:1965,country:"India",coordinates:[78.6677428,22.3511148],count:20},{year:1965,country:"Nepal",coordinates:[83.9999901,28.3780464],count:29},{year:1969,country:"Japan",coordinates:[139.2394179,36.5748441],count:63},{year:1972,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1972,country:"Italy",coordinates:[12.674297,42.6384261],count:2},{year:1972,country:"Austria",coordinates:[14.12456,47.59397],count:15},{year:1972,country:"UK",coordinates:[20.5447525,6.3110548],count:14},{year:1972,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:1974,country:"France",coordinates:[1.8883335,46.603354],count:15},{year:1975,country:"UK",coordinates:[20.5447525,6.3110548],count:41},{year:1976,country:"USA",coordinates:[-100.445882,39.7837304],count:20},{year:1977,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:7},{year:1977,country:"Canada",coordinates:[-107.991707,61.0666922],count:5},{year:1977,country:"S Korea",coordinates:[127.6961188,36.638392],count:19},{year:1978,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:14},{year:1978,country:"Poland",coordinates:[19.134422,52.215933],count:53},{year:1979,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:33},{year:1980,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:1},{year:1980,country:"Thailand",coordinates:[100.83273,14.8971921],count:2},{year:1981,country:"India",coordinates:[78.6677428,22.3511148],count:6},{year:1981,country:"UK/USA",coordinates:[.1258329,52.2153827],count:1},{year:1981,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:4},{year:1982,country:"USSR",coordinates:[48.0254474,46.3421653],count:27},{year:1982,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:1983,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:14},{year:1983,country:"USA",coordinates:[-100.445882,39.7837304],count:115},{year:1984,country:"India",coordinates:[78.6677428,22.3511148],count:24},{year:1984,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:24},{year:1984,country:"Australia",coordinates:[134.755,-24.7761086],count:17},{year:1984,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:8},{year:1984,country:"Belgium",coordinates:[4.6667145,50.6402809],count:2},{year:1985,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:10},{year:1985,country:"Sweden",coordinates:[14.5208584,59.6749712],count:1},{year:1985,country:"New Zealand/Australia",coordinates:[174.7190716,-36.8622961],count:2},{year:1985,country:"India",coordinates:[78.6677428,22.3511148],count:55},{year:1985,country:"S Korea",coordinates:[127.6961188,36.638392],count:87},{year:1986,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:9},{year:1986,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:11},{year:1986,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:1},{year:1986,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1986,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:1},{year:1987,country:"Sweden",coordinates:[14.5208584,59.6749712],count:28},{year:1987,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:25},{year:1987,country:"Italy",coordinates:[12.674297,42.6384261],count:9},{year:1987,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:1987,country:"Australia",coordinates:[134.755,-24.7761086],count:13},{year:1987,country:"India",coordinates:[78.6677428,22.3511148],count:29},{year:1988,country:"New Zealand/Australia",coordinates:[174.7190716,-36.8622961],count:2},{year:1989,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:10},{year:1989,country:"Poland",coordinates:[19.134422,52.215933],count:35},{year:1989,country:"Sweden",coordinates:[14.5208584,59.6749712],count:2},{year:1989,country:"Greece",coordinates:[21.9877132,38.9953683],count:3},{year:1990,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:1990,country:"China",coordinates:[104.999955,35.0000663],count:11},{year:1990,country:"Canada",coordinates:[-107.991707,61.0666922],count:8},{year:1991,country:"Sweden",coordinates:[14.5208584,59.6749712],count:22},{year:1991,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1991,country:"India",coordinates:[78.6677428,22.3511148],count:49},{year:1991,country:"Finland",coordinates:[25.9209164,63.2467777],count:1},{year:1991,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:1},{year:1992,country:"Hong Kong",coordinates:[114.1849161,22.350627],count:1},{year:1992,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:1992,country:"India",coordinates:[78.6677428,22.3511148],count:46},{year:1992,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:23},{year:1992,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:1992,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:3},{year:1992,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:4},{year:1992,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:5},{year:1992,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:7},{year:1992,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:1992,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1992,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:1992,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:13},{year:1992,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:11},{year:1992,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:3},{year:1993,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:1993,country:"India",coordinates:[78.6677428,22.3511148],count:79},{year:1993,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:2},{year:1993,country:"Ireland",coordinates:[-7.9794599,52.865196],count:13},{year:1993,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:1993,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:1993,country:"Spain/USA",coordinates:[-83.537938,30.864639],count:1},{year:1993,country:"Greece",coordinates:[21.9877132,38.9953683],count:25},{year:1994,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:1994,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:21},{year:1994,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:13},{year:1994,country:"Denmark",coordinates:[10.3333283,55.670249],count:2},{year:1994,country:"Romania",coordinates:[24.6859225,45.9852129],count:1},{year:1994,country:"Bolivia",coordinates:[-64.9912286,-17.0568696],count:2},{year:1994,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:7},{year:1995,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:13},{year:1995,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:1995,country:"Romania",coordinates:[24.6859225,45.9852129],count:1},{year:1995,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1995,country:"Finland",coordinates:[25.9209164,63.2467777],count:3},{year:1995,country:"Latvia",coordinates:[24.7537645,56.8406494],count:7},{year:1995,country:"India",coordinates:[78.6677428,22.3511148],count:10},{year:1995,country:"Brazil",coordinates:[-53.2,-10.3333333],count:2},{year:1995,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:1},{year:1995,country:"Ireland",coordinates:[-7.9794599,52.865196],count:1},{year:1995,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:1996,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:8},{year:1996,country:"India",coordinates:[78.6677428,22.3511148],count:33},{year:1996,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:8},{year:1996,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:1},{year:1996,country:"Hungary",coordinates:[19.5060937,47.1817585],count:15},{year:1996,country:"Greece",coordinates:[21.9877132,38.9953683],count:11},{year:1996,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:1996,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:1996,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:5},{year:1997,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:22},{year:1997,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:3},{year:1997,country:"Canada/USA",coordinates:[-82.3243095,37.6056575],count:1},{year:1997,country:"Ireland",coordinates:[-7.9794599,52.865196],count:1},{year:1997,country:"Latvia",coordinates:[24.7537645,56.8406494],count:2},{year:1997,country:"Sweden",coordinates:[14.5208584,59.6749712],count:2},{year:1997,country:"Finland",coordinates:[25.9209164,63.2467777],count:2},{year:1997,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:1997,country:"Pakistan",coordinates:[71.247499,30.3308401],count:10},{year:1997,country:"Croatia",coordinates:[15.6575209,45.3658443],count:11},{year:1997,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:1},{year:1997,country:"Colombia",coordinates:[-72.9088133,4.099917],count:10},{year:1997,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:1},{year:1998,country:"Bolivia",coordinates:[-64.9912286,-17.0568696],count:1},{year:1998,country:"Singapore",coordinates:[103.8194992,1.357107],count:6},{year:1998,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:4},{year:1998,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:17},{year:1998,country:"Estonia",coordinates:[25.3319078,58.7523778],count:12},{year:1998,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:8},{year:1998,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:4},{year:1998,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:1998,country:"Iran",coordinates:[54.5643516,32.6475314],count:17},{year:1998,country:"India",coordinates:[78.6677428,22.3511148],count:14},{year:1998,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:15},{year:1998,country:"Poland",coordinates:[19.134422,52.215933],count:18},{year:1998,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:49},{year:1998,country:"Belgium",coordinates:[4.6667145,50.6402809],count:11},{year:1998,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:1998,country:"S Africa",coordinates:[24.991639,-28.8166236],count:8},{year:1953,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:20},{year:1982,country:"S Korea",coordinates:[127.6961188,36.638392],count:50},{year:1964,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:6},{year:1964,country:"UK",coordinates:[20.5447525,6.3110548],count:21},{year:1972,country:"France",coordinates:[1.8883335,46.603354],count:22},{year:1972,country:"Nepal",coordinates:[83.9999901,28.3780464],count:29},{year:1976,country:"France",coordinates:[1.8883335,46.603354],count:7},{year:1985,country:"Romania",coordinates:[24.6859225,45.9852129],count:8},{year:1962,country:"USA",coordinates:[-100.445882,39.7837304],count:6},{year:1974,country:"Italy",coordinates:[12.674297,42.6384261],count:12},{year:1978,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:1985,country:"Hungary",coordinates:[19.5060937,47.1817585],count:12},{year:1970,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:19},{year:1989,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:2},{year:1989,country:"Hong Kong",coordinates:[114.1849161,22.350627],count:10},{year:1975,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:11},{year:1975,country:"Australia",coordinates:[134.755,-24.7761086],count:1},{year:1976,country:"Japan",coordinates:[139.2394179,36.5748441],count:77},{year:1979,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:26},{year:1981,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:24},{year:1997,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:1},{year:1982,country:"India",coordinates:[78.6677428,22.3511148],count:62},{year:1965,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:12},{year:1974,country:"Poland",coordinates:[19.134422,52.215933],count:31},{year:1974,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:25},{year:1974,country:"Nepal",coordinates:[83.9999901,28.3780464],count:35},{year:1929,country:"USA",coordinates:[-100.445882,39.7837304],count:1},{year:1977,country:"India",coordinates:[78.6677428,22.3511148],count:20},{year:1985,country:"Brazil",coordinates:[-53.2,-10.3333333],count:1},{year:1988,country:"India",coordinates:[78.6677428,22.3511148],count:46},{year:1989,country:"USSR",coordinates:[48.0254474,46.3421653],count:80},{year:1989,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:4},{year:1993,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:16},{year:1994,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:2},{year:1994,country:"Belarus",coordinates:[27.6971358,53.4250605],count:8},{year:1995,country:"Spain/USA",coordinates:[-83.537938,30.864639],count:1},{year:1987,country:"Belgium",coordinates:[4.6667145,50.6402809],count:3},{year:1987,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:1969,country:"UK",coordinates:[20.5447525,6.3110548],count:4},{year:1976,country:"Hong Kong",coordinates:[114.1849161,22.350627],count:2},{year:1963,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:8},{year:1979,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1963,country:"Nepal",coordinates:[83.9999901,28.3780464],count:28},{year:1963,country:"Italy",coordinates:[12.674297,42.6384261],count:13},{year:1964,country:"Australia",coordinates:[134.755,-24.7761086],count:3},{year:1980,country:"Canada",coordinates:[-107.991707,61.0666922],count:2},{year:1989,country:"Ireland",coordinates:[-7.9794599,52.865196],count:3},{year:1955,country:"USA",coordinates:[-100.445882,39.7837304],count:7},{year:1955,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:5},{year:1955,country:"Austria",coordinates:[14.12456,47.59397],count:6},{year:1956,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:27},{year:1974,country:"Austria",coordinates:[14.12456,47.59397],count:11},{year:1975,country:"Italy",coordinates:[12.674297,42.6384261],count:19},{year:1977,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1979,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:6},{year:1981,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:21},{year:1982,country:"Australia",coordinates:[134.755,-24.7761086],count:2},{year:1982,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:9},{year:1987,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:2},{year:1997,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:2},{year:1997,country:"Denmark",coordinates:[10.3333283,55.670249],count:8},{year:1998,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:1998,country:"Latvia",coordinates:[24.7537645,56.8406494],count:2},{year:1970,country:"Austria",coordinates:[14.12456,47.59397],count:7},{year:1978,country:"Belgium",coordinates:[4.6667145,50.6402809],count:1},{year:1974,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:8},{year:1974,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1986,country:"Israel",coordinates:[34.8594762,30.8124247],count:7},{year:1988,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:1972,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:14},{year:1973,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:19},{year:1974,country:"USA",coordinates:[-100.445882,39.7837304],count:12},{year:1974,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1974,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:1},{year:1975,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:21},{year:1976,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:18},{year:1976,country:"Spain",coordinates:[-4.8379791,39.3260685],count:12},{year:1977,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:2},{year:1982,country:"Brazil",coordinates:[-53.2,-10.3333333],count:3},{year:1983,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:3},{year:1987,country:"Brazil",coordinates:[-53.2,-10.3333333],count:1},{year:1987,country:"Canada/USA",coordinates:[-82.3243095,37.6056575],count:1},{year:1991,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:8},{year:1992,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:1996,country:"China",coordinates:[104.999955,35.0000663],count:22},{year:1998,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:11},{year:1998,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:1972,country:"S Korea",coordinates:[127.6961188,36.638392],count:11},{year:1973,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1973,country:"Spain",coordinates:[-4.8379791,39.3260685],count:12},{year:1975,country:"Spain",coordinates:[-4.8379791,39.3260685],count:12},{year:1976,country:"S Korea",coordinates:[127.6961188,36.638392],count:9},{year:1976,country:"Iran",coordinates:[54.5643516,32.6475314],count:8},{year:1977,country:"France",coordinates:[1.8883335,46.603354],count:5},{year:1978,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1979,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:14},{year:1980,country:"S Korea",coordinates:[127.6961188,36.638392],count:10},{year:1986,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:2},{year:1986,country:"Colombia",coordinates:[-72.9088133,4.099917],count:9},{year:1988,country:"Canada/USA",coordinates:[-82.3243095,37.6056575],count:1},{year:1989,country:"Czechoslovakia",coordinates:[14.5007688,48.257918],count:1},{year:1992,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:2},{year:1997,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:1997,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:1},{year:1963,country:"Japan",coordinates:[139.2394179,36.5748441],count:77},{year:1964,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:8},{year:1964,country:"Austria",coordinates:[14.12456,47.59397],count:2},{year:1983,country:"Spain",coordinates:[-4.8379791,39.3260685],count:19},{year:1975,country:"France",coordinates:[1.8883335,46.603354],count:7},{year:1988,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:7},{year:1988,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:3},{year:1991,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:1991,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:8},{year:1993,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:1},{year:1995,country:"Greece",coordinates:[21.9877132,38.9953683],count:2},{year:1972,country:"USA",coordinates:[-100.445882,39.7837304],count:2},{year:1979,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1982,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:24},{year:1982,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:2},{year:1996,country:"Singapore",coordinates:[103.8194992,1.357107],count:3},{year:1992,country:"Ireland",coordinates:[-7.9794599,52.865196],count:1},{year:1964,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:10},{year:1964,country:"USA",coordinates:[-100.445882,39.7837304],count:3},{year:1964,country:"India",coordinates:[78.6677428,22.3511148],count:33},{year:1984,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1969,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:5},{year:1978,country:"Spain",coordinates:[-4.8379791,39.3260685],count:17},{year:1980,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:10},{year:1987,country:"Spain/USA",coordinates:[-83.537938,30.864639],count:1},{year:1907,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:2},{year:1909,country:"UK",coordinates:[20.5447525,6.3110548],count:2},{year:1905,country:"UK",coordinates:[20.5447525,6.3110548],count:1},{year:1910,country:"UK",coordinates:[20.5447525,6.3110548],count:3},{year:1920,country:"UK",coordinates:[20.5447525,6.3110548],count:5},{year:1921,country:"UK",coordinates:[20.5447525,6.3110548],count:8},{year:1922,country:"UK",coordinates:[20.5447525,6.3110548],count:12},{year:1924,country:"UK",coordinates:[20.5447525,6.3110548],count:11},{year:1925,country:"Greece",coordinates:[21.9877132,38.9953683],count:2},{year:1929,country:"Germany",coordinates:[10.4478313,51.1638175],count:8},{year:1930,country:"Germany",coordinates:[10.4478313,51.1638175],count:13},{year:1930,country:"Austria",coordinates:[14.12456,47.59397],count:4},{year:1930,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:3},{year:1930,country:"UK",coordinates:[20.5447525,6.3110548],count:6},{year:1930,country:"Nepal",coordinates:[83.9999901,28.3780464],count:6},{year:1933,country:"UK",coordinates:[20.5447525,6.3110548],count:16},{year:1934,country:"UK",coordinates:[20.5447525,6.3110548],count:1},{year:1935,country:"UK",coordinates:[20.5447525,6.3110548],count:10},{year:1935,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:3},{year:1936,country:"UK",coordinates:[20.5447525,6.3110548],count:22},{year:1931,country:"Germany",coordinates:[10.4478313,51.1638175],count:8},{year:1936,country:"Germany",coordinates:[10.4478313,51.1638175],count:12},{year:1937,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:3},{year:1937,country:"UK",coordinates:[20.5447525,6.3110548],count:9},{year:1938,country:"UK",coordinates:[20.5447525,6.3110548],count:7},{year:1939,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:5},{year:1939,country:"Germany",coordinates:[10.4478313,51.1638175],count:10},{year:1940,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:1},{year:1947,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1947,country:"UK",coordinates:[20.5447525,6.3110548],count:3},{year:1949,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:35},{year:1949,country:"UK",coordinates:[20.5447525,6.3110548],count:7},{year:1949,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1949,country:"Nepal",coordinates:[83.9999901,28.3780464],count:15},{year:1950,country:"France",coordinates:[1.8883335,46.603354],count:9},{year:1950,country:"USA",coordinates:[-100.445882,39.7837304],count:4},{year:1951,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1951,country:"UK",coordinates:[20.5447525,6.3110548],count:11},{year:1951,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:3},{year:1952,country:"UK",coordinates:[20.5447525,6.3110548],count:22},{year:1952,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:18},{year:1952,country:"Japan",coordinates:[139.2394179,36.5748441],count:18},{year:1952,country:"USSR",coordinates:[48.0254474,46.3421653],count:6},{year:1953,country:"Nepal",coordinates:[83.9999901,28.3780464],count:33},{year:1953,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:7},{year:1953,country:"India",coordinates:[78.6677428,22.3511148],count:8},{year:1953,country:"Austria",coordinates:[14.12456,47.59397],count:4},{year:1954,country:"UK",coordinates:[20.5447525,6.3110548],count:42},{year:1954,country:"Austria",coordinates:[14.12456,47.59397],count:20},{year:1954,country:"Italy",coordinates:[12.674297,42.6384261],count:4},{year:1954,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:40},{year:1954,country:"USA",coordinates:[-100.445882,39.7837304],count:11},{year:1954,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:9},{year:1954,country:"Japan",coordinates:[139.2394179,36.5748441],count:27},{year:1954,country:"Nepal",coordinates:[83.9999901,28.3780464],count:24},{year:1954,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:5},{year:1954,country:"France",coordinates:[1.8883335,46.603354],count:25},{year:1954,country:"India",coordinates:[78.6677428,22.3511148],count:4},{year:1955,country:"UK",coordinates:[20.5447525,6.3110548],count:58},{year:1955,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:8},{year:1955,country:"Nepal",coordinates:[83.9999901,28.3780464],count:32},{year:1955,country:"France",coordinates:[1.8883335,46.603354],count:17},{year:1955,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1955,country:"Japan",coordinates:[139.2394179,36.5748441],count:3},{year:1956,country:"UK",coordinates:[20.5447525,6.3110548],count:2},{year:1956,country:"Japan",coordinates:[139.2394179,36.5748441],count:12},{year:1957,country:"France",coordinates:[1.8883335,46.603354],count:3},{year:1958,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:6},{year:1958,country:"India",coordinates:[78.6677428,22.3511148],count:9},{year:1958,country:"Nepal",coordinates:[83.9999901,28.3780464],count:7},{year:1958,country:"Japan",coordinates:[139.2394179,36.5748441],count:15},{year:1958,country:"China",coordinates:[104.999955,35.0000663],count:1},{year:1958,country:"USSR",coordinates:[48.0254474,46.3421653],count:3},{year:1958,country:"UK",coordinates:[20.5447525,6.3110548],count:10},{year:1958,country:"Italy",coordinates:[12.674297,42.6384261],count:4},{year:1959,country:"UK",coordinates:[20.5447525,6.3110548],count:14},{year:1959,country:"Nepal",coordinates:[83.9999901,28.3780464],count:13},{year:1959,country:"Austria",coordinates:[14.12456,47.59397],count:8},{year:1959,country:"France",coordinates:[1.8883335,46.603354],count:15},{year:1959,country:"Japan",coordinates:[139.2394179,36.5748441],count:30},{year:1959,country:"USA",coordinates:[-100.445882,39.7837304],count:8},{year:1960,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:9},{year:1960,country:"W Germany",coordinates:[10.5578766,47.7224841],count:1},{year:1960,country:"Austria",coordinates:[14.12456,47.59397],count:2},{year:1960,country:"China",coordinates:[104.999955,35.0000663],count:23},{year:1960,country:"Japan",coordinates:[139.2394179,36.5748441],count:31},{year:1960,country:"France",coordinates:[1.8883335,46.603354],count:24},{year:1960,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:12},{year:1961,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:11},{year:1961,country:"UK",coordinates:[20.5447525,6.3110548],count:24},{year:1961,country:"USA",coordinates:[-100.445882,39.7837304],count:5},{year:1961,country:"Nepal",coordinates:[83.9999901,28.3780464],count:21},{year:1961,country:"W Germany",coordinates:[10.5578766,47.7224841],count:2},{year:1961,country:"India",coordinates:[78.6677428,22.3511148],count:8},{year:1961,country:"Japan",coordinates:[139.2394179,36.5748441],count:29},{year:1962,country:"UK",coordinates:[20.5447525,6.3110548],count:16},{year:1962,country:"Nepal",coordinates:[83.9999901,28.3780464],count:38},{year:1962,country:"France",coordinates:[1.8883335,46.603354],count:13},{year:1962,country:"W Germany",coordinates:[10.5578766,47.7224841],count:2},{year:1962,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:5},{year:1962,country:"Japan",coordinates:[139.2394179,36.5748441],count:42},{year:1962,country:"India",coordinates:[78.6677428,22.3511148],count:17},{year:1962,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:9},{year:1962,country:"S Korea",coordinates:[127.6961188,36.638392],count:1},{year:1962,country:"Austria",coordinates:[14.12456,47.59397],count:1},{year:1963,country:"Austria",coordinates:[14.12456,47.59397],count:16},{year:1963,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:1964,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1966,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1},{year:1968,country:"USA",coordinates:[-100.445882,39.7837304],count:3},{year:1970,country:"Spain",coordinates:[-4.8379791,39.3260685],count:2},{year:1971,country:"France",coordinates:[1.8883335,46.603354],count:15},{year:1971,country:"Austria",coordinates:[14.12456,47.59397],count:9},{year:1971,country:"USA",coordinates:[-100.445882,39.7837304],count:22},{year:1971,country:"Nepal",coordinates:[83.9999901,28.3780464],count:21},{year:1971,country:"S Korea",coordinates:[127.6961188,36.638392],count:10},{year:1971,country:"W Germany",coordinates:[10.5578766,47.7224841],count:3},{year:1971,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:20},{year:1998,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:2},{year:1998,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:28},{year:1998,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:1998,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:5},{year:1998,country:"Colombia",coordinates:[-72.9088133,4.099917],count:7},{year:1972,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:10},{year:1972,country:"Australia",coordinates:[134.755,-24.7761086],count:1},{year:1973,country:"France",coordinates:[1.8883335,46.603354],count:4},{year:1973,country:"Sweden",coordinates:[14.5208584,59.6749712],count:2},{year:1974,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:1},{year:1975,country:"China",coordinates:[104.999955,35.0000663],count:32},{year:1975,country:"India",coordinates:[78.6677428,22.3511148],count:9},{year:1975,country:"USA",coordinates:[-100.445882,39.7837304],count:2},{year:1977,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:1905,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:3},{year:1905,country:"Nepal/India?",coordinates:[80.35667930232923,29.529587794055164],count:4},{year:1922,country:"Nepal",coordinates:[83.9999901,28.3780464],count:9},{year:1924,country:"Nepal",coordinates:[83.9999901,28.3780464],count:2},{year:1931,country:"Nepal",coordinates:[83.9999901,28.3780464],count:6},{year:1956,country:"Nepal",coordinates:[83.9999901,28.3780464],count:20},{year:1957,country:"Nepal",coordinates:[83.9999901,28.3780464],count:7},{year:1959,country:"Belgium",coordinates:[4.6667145,50.6402809],count:1},{year:1961,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1964,country:"China",coordinates:[104.999955,35.0000663],count:2},{year:1966,country:"China",coordinates:[104.999955,35.0000663],count:3},{year:1971,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:1971,country:"UK",coordinates:[20.5447525,6.3110548],count:16},{year:1971,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1978,country:"China",coordinates:[104.999955,35.0000663],count:4},{year:1979,country:"China",coordinates:[104.999955,35.0000663],count:3},{year:1981,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:1983,country:"India",coordinates:[78.6677428,22.3511148],count:3},{year:1987,country:"Ireland",coordinates:[-7.9794599,52.865196],count:12},{year:1987,country:"Denmark",coordinates:[10.3333283,55.670249],count:1},{year:1994,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:2},{year:1988,country:"China",coordinates:[104.999955,35.0000663],count:36},{year:1994,country:"India",coordinates:[78.6677428,22.3511148],count:30},{year:1986,country:"China",coordinates:[104.999955,35.0000663],count:17},{year:1955,country:"Belgium",coordinates:[4.6667145,50.6402809],count:1},{year:1999,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:54},{year:1999,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:13},{year:1999,country:"USA",coordinates:[-100.445882,39.7837304],count:187},{year:1999,country:"UK",coordinates:[20.5447525,6.3110548],count:101},{year:1999,country:"Spain",coordinates:[-4.8379791,39.3260685],count:95},{year:1999,country:"S Korea",coordinates:[127.6961188,36.638392],count:77},{year:1999,country:"Nepal",coordinates:[83.9999901,28.3780464],count:176},{year:1999,country:"Japan",coordinates:[139.2394179,36.5748441],count:80},{year:1992,country:"Germany/Iran",coordinates:[13.299962054001433,52.46095135],count:1},{year:1999,country:"Germany",coordinates:[10.4478313,51.1638175],count:99},{year:1999,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:20},{year:1999,country:"Austria",coordinates:[14.12456,47.59397],count:33},{year:1999,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1999,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:3},{year:1999,country:"Italy",coordinates:[12.674297,42.6384261],count:46},{year:1999,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:6},{year:1999,country:"Sweden",coordinates:[14.5208584,59.6749712],count:16},{year:1999,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:1999,country:"Russia",coordinates:[97.7453061,64.6863136],count:14},{year:1999,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:13},{year:1999,country:"Colombia",coordinates:[-72.9088133,4.099917],count:10},{year:1999,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:1999,country:"Finland",coordinates:[25.9209164,63.2467777],count:4},{year:1999,country:"Australia",coordinates:[134.755,-24.7761086],count:16},{year:1999,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:1999,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:1999,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:1999,country:"Brazil",coordinates:[-53.2,-10.3333333],count:2},{year:1999,country:"France",coordinates:[1.8883335,46.603354],count:127},{year:1999,country:"Ireland",coordinates:[-7.9794599,52.865196],count:4},{year:1999,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:1999,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:13},{year:1999,country:"China",coordinates:[104.999955,35.0000663],count:16},{year:1999,country:"Poland",coordinates:[19.134422,52.215933],count:9},{year:1999,country:"Switzerland/Greece",coordinates:[23.7491305,37.9783236],count:1},{year:1999,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:1999,country:"Denmark",coordinates:[10.3333283,55.670249],count:6},{year:1999,country:"India",coordinates:[78.6677428,22.3511148],count:9},{year:1999,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:2},{year:1999,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:5},{year:1999,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:13},{year:1999,country:"Azerbaijan",coordinates:[47.7872508,40.3936294],count:1},{year:1999,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:21},{year:1999,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:3},{year:1999,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:16},{year:1999,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:1999,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:9},{year:1999,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:1999,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:29},{year:1999,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:1999,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:1999,country:"Romania",coordinates:[24.6859225,45.9852129],count:1},{year:1921,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1922,country:"Australia",coordinates:[134.755,-24.7761086],count:1},{year:1947,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:1947,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1},{year:1951,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:4},{year:1951,country:"Nepal",coordinates:[83.9999901,28.3780464],count:9},{year:1952,country:"India",coordinates:[78.6677428,22.3511148],count:2},{year:1952,country:"Nepal",coordinates:[83.9999901,28.3780464],count:25},{year:1929,country:"Austria",coordinates:[14.12456,47.59397],count:1},{year:1931,country:"Austria",coordinates:[14.12456,47.59397],count:2},{year:1937,country:"Germany",coordinates:[10.4478313,51.1638175],count:6},{year:1935,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:2},{year:1949,country:"Germany",coordinates:[10.4478313,51.1638175],count:3},{year:1952,country:"Canada",coordinates:[-107.991707,61.0666922],count:1},{year:1952,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:7},{year:1958,country:"W Germany",coordinates:[10.5578766,47.7224841],count:1},{year:1958,country:"Poland",coordinates:[19.134422,52.215933],count:1},{year:1954,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:1},{year:1959,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1959,country:"India",coordinates:[78.6677428,22.3511148],count:5},{year:1960,country:"Poland",coordinates:[19.134422,52.215933],count:2},{year:1960,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:1960,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:1963,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:1},{year:1967,country:"W Germany",coordinates:[10.5578766,47.7224841],count:2},{year:1967,country:"Nepal",coordinates:[83.9999901,28.3780464],count:4},{year:1968,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1},{year:1971,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:5},{year:1971,country:"Italy",coordinates:[12.674297,42.6384261],count:2},{year:1971,country:"Poland",coordinates:[19.134422,52.215933],count:1},{year:1971,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:3},{year:1971,country:"Australia",coordinates:[134.755,-24.7761086],count:3},{year:2e3,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:16},{year:2e3,country:"Russia",coordinates:[97.7453061,64.6863136],count:62},{year:2e3,country:"Austria",coordinates:[14.12456,47.59397],count:53},{year:2e3,country:"Spain",coordinates:[-4.8379791,39.3260685],count:154},{year:2e3,country:"Sweden",coordinates:[14.5208584,59.6749712],count:11},{year:2e3,country:"Italy",coordinates:[12.674297,42.6384261],count:103},{year:2e3,country:"USA",coordinates:[-100.445882,39.7837304],count:223},{year:2e3,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:20},{year:2e3,country:"UK",coordinates:[20.5447525,6.3110548],count:137},{year:2e3,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2e3,country:"France",coordinates:[1.8883335,46.603354],count:102},{year:2e3,country:"Finland",coordinates:[25.9209164,63.2467777],count:10},{year:2e3,country:"Canada",coordinates:[-107.991707,61.0666922],count:43},{year:2e3,country:"Germany",coordinates:[10.4478313,51.1638175],count:80},{year:2e3,country:"UK/New Zealand",coordinates:[-1.4993394,52.9257201],count:1},{year:2e3,country:"Nepal",coordinates:[83.9999901,28.3780464],count:263},{year:2e3,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:37},{year:2e3,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:1},{year:2e3,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2e3,country:"Belgium",coordinates:[4.6667145,50.6402809],count:17},{year:2e3,country:"Iran",coordinates:[54.5643516,32.6475314],count:15},{year:2e3,country:"Australia",coordinates:[134.755,-24.7761086],count:31},{year:2e3,country:"S Korea",coordinates:[127.6961188,36.638392],count:156},{year:2e3,country:"Japan",coordinates:[139.2394179,36.5748441],count:160},{year:2e3,country:"Brazil",coordinates:[-53.2,-10.3333333],count:2},{year:2e3,country:"Romania",coordinates:[24.6859225,45.9852129],count:1},{year:1983,country:"W Germany/Iran",coordinates:[null,null],count:1},{year:2e3,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2e3,country:"Denmark",coordinates:[10.3333283,55.670249],count:9},{year:2e3,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:2e3,country:"Poland",coordinates:[19.134422,52.215933],count:25},{year:2e3,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:2e3,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:3},{year:2e3,country:"China",coordinates:[104.999955,35.0000663],count:21},{year:2e3,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:22},{year:2e3,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:5},{year:2e3,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:7},{year:2e3,country:"Andorra",coordinates:[1.5732033,42.5407167],count:6},{year:2e3,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:1},{year:2e3,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:14},{year:2e3,country:"India",coordinates:[78.6677428,22.3511148],count:15},{year:2e3,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:48},{year:2e3,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2e3,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:2e3,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2e3,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:2e3,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:3},{year:2e3,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:5},{year:2e3,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:1},{year:2e3,country:"Singapore",coordinates:[103.8194992,1.357107],count:6},{year:1989,country:"China",coordinates:[104.999955,35.0000663],count:9},{year:1991,country:"India?",coordinates:[78.6677428,22.3511148],count:3},{year:1905,country:"Italy",coordinates:[12.674297,42.6384261],count:1},{year:2001,country:"Australia",coordinates:[134.755,-24.7761086],count:54},{year:2001,country:"USA",coordinates:[-100.445882,39.7837304],count:206},{year:2001,country:"Russia",coordinates:[97.7453061,64.6863136],count:29},{year:2001,country:"Spain",coordinates:[-4.8379791,39.3260685],count:116},{year:2001,country:"Japan",coordinates:[139.2394179,36.5748441],count:95},{year:2001,country:"France",coordinates:[1.8883335,46.603354],count:81},{year:2001,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:16},{year:2001,country:"UK",coordinates:[20.5447525,6.3110548],count:106},{year:2001,country:"Germany",coordinates:[10.4478313,51.1638175],count:106},{year:2001,country:"Sweden",coordinates:[14.5208584,59.6749712],count:4},{year:2001,country:"Italy",coordinates:[12.674297,42.6384261],count:59},{year:2001,country:"Canada",coordinates:[-107.991707,61.0666922],count:26},{year:2001,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:6},{year:2001,country:"Austria",coordinates:[14.12456,47.59397],count:79},{year:2001,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:67},{year:2001,country:"Nepal",coordinates:[83.9999901,28.3780464],count:241},{year:2001,country:"China",coordinates:[104.999955,35.0000663],count:4},{year:2001,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:16},{year:2001,country:"S Korea",coordinates:[127.6961188,36.638392],count:67},{year:2001,country:"Hungary",coordinates:[19.5060937,47.1817585],count:22},{year:2001,country:"Finland",coordinates:[25.9209164,63.2467777],count:1},{year:2001,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:18},{year:2001,country:"S Africa",coordinates:[24.991639,-28.8166236],count:3},{year:2001,country:"Denmark",coordinates:[10.3333283,55.670249],count:4},{year:2001,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:3},{year:2001,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:2001,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2001,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2001,country:"India",coordinates:[78.6677428,22.3511148],count:29},{year:2001,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:3},{year:2001,country:"Ireland",coordinates:[-7.9794599,52.865196],count:3},{year:2001,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2001,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2001,country:"Brazil",coordinates:[-53.2,-10.3333333],count:3},{year:2001,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:2001,country:"Singapore",coordinates:[103.8194992,1.357107],count:4},{year:2001,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:6},{year:2001,country:"Colombia",coordinates:[-72.9088133,4.099917],count:10},{year:2001,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:4},{year:2001,country:"Poland",coordinates:[19.134422,52.215933],count:20},{year:2001,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2001,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2001,country:"Iran",coordinates:[54.5643516,32.6475314],count:32},{year:2001,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:19},{year:2001,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:4},{year:2001,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:2001,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:1},{year:2001,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2001,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:13},{year:2001,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:11},{year:2001,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:2001,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:1},{year:2001,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2001,country:"Greece",coordinates:[21.9877132,38.9953683],count:1},{year:2002,country:"USA",coordinates:[-100.445882,39.7837304],count:174},{year:2002,country:"UK",coordinates:[20.5447525,6.3110548],count:97},{year:2002,country:"Italy",coordinates:[12.674297,42.6384261],count:87},{year:2002,country:"Spain",coordinates:[-4.8379791,39.3260685],count:102},{year:2002,country:"Nepal",coordinates:[83.9999901,28.3780464],count:250},{year:2002,country:"S Korea",coordinates:[127.6961188,36.638392],count:68},{year:2002,country:"India",coordinates:[78.6677428,22.3511148],count:17},{year:2002,country:"Finland",coordinates:[25.9209164,63.2467777],count:3},{year:2002,country:"France",coordinates:[1.8883335,46.603354],count:131},{year:2002,country:"Australia",coordinates:[134.755,-24.7761086],count:31},{year:2002,country:"Japan",coordinates:[139.2394179,36.5748441],count:106},{year:2002,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:14},{year:2002,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:5},{year:2002,country:"Ireland",coordinates:[-7.9794599,52.865196],count:5},{year:2002,country:"Germany",coordinates:[10.4478313,51.1638175],count:99},{year:2002,country:"Russia",coordinates:[97.7453061,64.6863136],count:33},{year:2002,country:"Singapore",coordinates:[103.8194992,1.357107],count:1},{year:2002,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:9},{year:2002,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:15},{year:2002,country:"Austria",coordinates:[14.12456,47.59397],count:65},{year:2002,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:29},{year:2002,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:59},{year:2002,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:3},{year:2002,country:"Canada",coordinates:[-107.991707,61.0666922],count:16},{year:2002,country:"Greece",coordinates:[21.9877132,38.9953683],count:1},{year:2002,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:2002,country:"Yugoslavia",coordinates:[-81.52614194734898,23.04123655],count:1},{year:2002,country:"China",coordinates:[104.999955,35.0000663],count:18},{year:2002,country:"Brazil",coordinates:[-53.2,-10.3333333],count:12},{year:2002,country:"Armenia",coordinates:[-75.6723751,4.536307],count:1},{year:2002,country:"Hungary",coordinates:[19.5060937,47.1817585],count:7},{year:2002,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2002,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:8},{year:2002,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:3},{year:2002,country:"Iran",coordinates:[54.5643516,32.6475314],count:13},{year:2002,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2002,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2002,country:"Poland",coordinates:[19.134422,52.215933],count:14},{year:2002,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:8},{year:2002,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:2},{year:2002,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:3},{year:2002,country:"Macedonia/Australia",coordinates:[115.82230044550869,-31.8877989],count:1},{year:2002,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:1},{year:2002,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:32},{year:2002,country:"Belgium",coordinates:[4.6667145,50.6402809],count:5},{year:1921,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:2002,country:"S Africa",coordinates:[24.991639,-28.8166236],count:1},{year:2002,country:"Sweden",coordinates:[14.5208584,59.6749712],count:1},{year:2002,country:"San Marino",coordinates:[12.458306,43.9458623],count:1},{year:2002,country:"Denmark",coordinates:[10.3333283,55.670249],count:10},{year:2002,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:1969,country:"China",coordinates:[104.999955,35.0000663],count:3},{year:1976,country:"Germany",coordinates:[10.4478313,51.1638175],count:1},{year:1994,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:1995,country:"Sweden",coordinates:[14.5208584,59.6749712],count:1},{year:2003,country:"Russia",coordinates:[97.7453061,64.6863136],count:54},{year:2003,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:7},{year:2003,country:"Australia",coordinates:[134.755,-24.7761086],count:54},{year:2003,country:"UK",coordinates:[20.5447525,6.3110548],count:118},{year:2003,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:20},{year:2003,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:58},{year:2003,country:"Nepal",coordinates:[83.9999901,28.3780464],count:397},{year:2003,country:"Germany",coordinates:[10.4478313,51.1638175],count:85},{year:2003,country:"Canada",coordinates:[-107.991707,61.0666922],count:37},{year:2003,country:"USA",coordinates:[-100.445882,39.7837304],count:227},{year:2003,country:"S Africa",coordinates:[24.991639,-28.8166236],count:15},{year:2003,country:"Austria",coordinates:[14.12456,47.59397],count:31},{year:2003,country:"Japan",coordinates:[139.2394179,36.5748441],count:162},{year:2003,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:5},{year:2003,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:37},{year:2003,country:"Poland",coordinates:[19.134422,52.215933],count:19},{year:2003,country:"France",coordinates:[1.8883335,46.603354],count:155},{year:2003,country:"Spain",coordinates:[-4.8379791,39.3260685],count:83},{year:2003,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:22},{year:2003,country:"Italy",coordinates:[12.674297,42.6384261],count:47},{year:2003,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2003,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:11},{year:2003,country:"Sweden",coordinates:[14.5208584,59.6749712],count:9},{year:2003,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:6},{year:2003,country:"India",coordinates:[78.6677428,22.3511148],count:40},{year:2003,country:"Belgium",coordinates:[4.6667145,50.6402809],count:33},{year:2003,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2003,country:"Ireland",coordinates:[-7.9794599,52.865196],count:7},{year:2003,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:7},{year:2003,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2003,country:"China",coordinates:[104.999955,35.0000663],count:57},{year:2003,country:"Brazil",coordinates:[-53.2,-10.3333333],count:8},{year:2003,country:"S Korea",coordinates:[127.6961188,36.638392],count:86},{year:2003,country:"Estonia",coordinates:[25.3319078,58.7523778],count:7},{year:2003,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2003,country:"Romania",coordinates:[24.6859225,45.9852129],count:12},{year:2003,country:"Bhutan",coordinates:[90.5119273,27.549511],count:1},{year:2003,country:"Finland",coordinates:[25.9209164,63.2467777],count:14},{year:2003,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:2},{year:2003,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:11},{year:2003,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2003,country:"Switzerland/UK",coordinates:[-.1605900915923223,51.5184448],count:1},{year:2003,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:8},{year:1935,country:"Nepal",coordinates:[83.9999901,28.3780464],count:11},{year:1966,country:"India",coordinates:[78.6677428,22.3511148],count:6},{year:1966,country:"India/Nepal",coordinates:[83.1106533,26.6959045],count:3},{year:1966,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:2003,country:"Armenia",coordinates:[-75.6723751,4.536307],count:1},{year:2003,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:1},{year:2003,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:2003,country:"France/Switzerland",coordinates:[7.7678483472198785,48.588962249999994],count:2},{year:2003,country:"Denmark",coordinates:[10.3333283,55.670249],count:12},{year:2003,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2003,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:4},{year:2003,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2003,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2003,country:"Greece",coordinates:[21.9877132,38.9953683],count:9},{year:2003,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2003,country:"Switzerland/USA",coordinates:[-85.0373975,38.8249258],count:1},{year:2003,country:"Switzerland/France",coordinates:[7.7678483472198785,48.588962249999994],count:1},{year:1965,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:1},{year:2004,country:"USA",coordinates:[-100.445882,39.7837304],count:205},{year:2004,country:"UK",coordinates:[20.5447525,6.3110548],count:187},{year:2004,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:26},{year:2004,country:"Australia",coordinates:[134.755,-24.7761086],count:42},{year:2004,country:"Nepal",coordinates:[83.9999901,28.3780464],count:380},{year:2004,country:"Spain",coordinates:[-4.8379791,39.3260685],count:110},{year:2004,country:"Canada",coordinates:[-107.991707,61.0666922],count:38},{year:2004,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:14},{year:2004,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:6},{year:2004,country:"Russia",coordinates:[97.7453061,64.6863136],count:70},{year:2004,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:3},{year:2004,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:3},{year:2004,country:"Poland",coordinates:[19.134422,52.215933],count:9},{year:2004,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:33},{year:2004,country:"Italy",coordinates:[12.674297,42.6384261],count:70},{year:2004,country:"Germany",coordinates:[10.4478313,51.1638175],count:89},{year:2004,country:"Austria",coordinates:[14.12456,47.59397],count:56},{year:2004,country:"Japan",coordinates:[139.2394179,36.5748441],count:82},{year:2004,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:10},{year:2004,country:"France",coordinates:[1.8883335,46.603354],count:137},{year:2004,country:"Belgium",coordinates:[4.6667145,50.6402809],count:9},{year:2004,country:"Belarus",coordinates:[27.6971358,53.4250605],count:5},{year:2004,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:61},{year:2004,country:"S Africa",coordinates:[24.991639,-28.8166236],count:5},{year:2004,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:34},{year:2004,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:23},{year:2004,country:"Sweden",coordinates:[14.5208584,59.6749712],count:10},{year:2004,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2004,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:9},{year:2004,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:13},{year:2004,country:"Malta",coordinates:[14.4476911,35.8885993],count:1},{year:2004,country:"Greece",coordinates:[21.9877132,38.9953683],count:14},{year:2004,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:1},{year:2004,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:11},{year:2004,country:"Brazil",coordinates:[-53.2,-10.3333333],count:3},{year:2004,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:17},{year:2004,country:"Denmark",coordinates:[10.3333283,55.670249],count:4},{year:2004,country:"China",coordinates:[104.999955,35.0000663],count:42},{year:2004,country:"India",coordinates:[78.6677428,22.3511148],count:27},{year:2004,country:"S Korea",coordinates:[127.6961188,36.638392],count:88},{year:2004,country:"Ireland",coordinates:[-7.9794599,52.865196],count:10},{year:2004,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:2},{year:2004,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:9},{year:2004,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:7},{year:2004,country:"Finland",coordinates:[25.9209164,63.2467777],count:1},{year:2004,country:"Singapore",coordinates:[103.8194992,1.357107],count:8},{year:2004,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2004,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:8},{year:2004,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:3},{year:1967,country:"China",coordinates:[104.999955,35.0000663],count:2},{year:1973,country:"Iran",coordinates:[54.5643516,32.6475314],count:1},{year:1974,country:"China",coordinates:[104.999955,35.0000663],count:1},{year:2004,country:"Hungary",coordinates:[19.5060937,47.1817585],count:1},{year:2004,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2004,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2004,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2004,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:2004,country:"Romania",coordinates:[24.6859225,45.9852129],count:3},{year:2005,country:"USA",coordinates:[-100.445882,39.7837304],count:205},{year:2005,country:"Nepal",coordinates:[83.9999901,28.3780464],count:439},{year:2005,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:15},{year:2005,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:73},{year:2005,country:"Germany",coordinates:[10.4478313,51.1638175],count:78},{year:2005,country:"Italy",coordinates:[12.674297,42.6384261],count:125},{year:2005,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2005,country:"Finland",coordinates:[25.9209164,63.2467777],count:12},{year:2005,country:"Australia",coordinates:[134.755,-24.7761086],count:62},{year:2005,country:"Poland",coordinates:[19.134422,52.215933],count:32},{year:2005,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:16},{year:2005,country:"Belgium",coordinates:[4.6667145,50.6402809],count:12},{year:2005,country:"France",coordinates:[1.8883335,46.603354],count:107},{year:2005,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:27},{year:2005,country:"Spain",coordinates:[-4.8379791,39.3260685],count:90},{year:2005,country:"Russia",coordinates:[97.7453061,64.6863136],count:45},{year:2005,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:2},{year:2005,country:"Austria",coordinates:[14.12456,47.59397],count:37},{year:2005,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:28},{year:2005,country:"UK",coordinates:[20.5447525,6.3110548],count:137},{year:2005,country:"Canada",coordinates:[-107.991707,61.0666922],count:32},{year:2005,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2005,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:24},{year:2005,country:"Japan",coordinates:[139.2394179,36.5748441],count:74},{year:2005,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:4},{year:2005,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:29},{year:2005,country:"S Korea",coordinates:[127.6961188,36.638392],count:59},{year:2005,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:7},{year:2005,country:"India",coordinates:[78.6677428,22.3511148],count:42},{year:2005,country:"Bhutan",coordinates:[90.5119273,27.549511],count:1},{year:2005,country:"S Africa",coordinates:[24.991639,-28.8166236],count:8},{year:2005,country:"Brazil",coordinates:[-53.2,-10.3333333],count:13},{year:2005,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:25},{year:2005,country:"Ireland",coordinates:[-7.9794599,52.865196],count:6},{year:2005,country:"China",coordinates:[104.999955,35.0000663],count:62},{year:2005,country:"Sweden",coordinates:[14.5208584,59.6749712],count:16},{year:2005,country:"San Marino",coordinates:[12.458306,43.9458623],count:2},{year:2005,country:"Singapore",coordinates:[103.8194992,1.357107],count:9},{year:2005,country:"Singapore/Malaysia",coordinates:[103.76862194775,1.454593742629712],count:1},{year:2005,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:1},{year:2005,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:3},{year:2005,country:"Iran",coordinates:[54.5643516,32.6475314],count:20},{year:2005,country:"Hungary",coordinates:[19.5060937,47.1817585],count:2},{year:2005,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:2},{year:2005,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2005,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2005,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:2},{year:2005,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:2},{year:2005,country:"Israel",coordinates:[34.8594762,30.8124247],count:5},{year:2005,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2005,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2005,country:"Panama",coordinates:[-81.1308434,8.559559],count:1},{year:2005,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:2005,country:"Latvia",coordinates:[24.7537645,56.8406494],count:3},{year:2005,country:"Croatia",coordinates:[15.6575209,45.3658443],count:3},{year:2005,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2005,country:"Philippines",coordinates:[122.7312101,12.7503486],count:1},{year:2005,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:4},{year:2005,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2005,country:"Germany/S Africa",coordinates:[13.361610934249732,52.509393700000004],count:1},{year:2002,country:"Croatia",coordinates:[15.6575209,45.3658443],count:8},{year:2005,country:"Romania",coordinates:[24.6859225,45.9852129],count:2},{year:2005,country:"Canada/Macedonia",coordinates:[-79.63809905925717,43.5847041481031],count:1},{year:1967,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:7},{year:2006,country:"Ireland",coordinates:[-7.9794599,52.865196],count:7},{year:2006,country:"Australia",coordinates:[134.755,-24.7761086],count:47},{year:2006,country:"USA",coordinates:[-100.445882,39.7837304],count:165},{year:2006,country:"UK",coordinates:[20.5447525,6.3110548],count:203},{year:2006,country:"Germany",coordinates:[10.4478313,51.1638175],count:82},{year:2006,country:"Nepal",coordinates:[83.9999901,28.3780464],count:531},{year:2006,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:54},{year:2006,country:"Italy",coordinates:[12.674297,42.6384261],count:117},{year:2006,country:"Russia",coordinates:[97.7453061,64.6863136],count:39},{year:2006,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:14},{year:2006,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:6},{year:2006,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:4},{year:2006,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:13},{year:2006,country:"Poland",coordinates:[19.134422,52.215933],count:56},{year:2006,country:"China",coordinates:[104.999955,35.0000663],count:120},{year:2006,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:43},{year:2006,country:"Spain",coordinates:[-4.8379791,39.3260685],count:130},{year:2006,country:"Austria",coordinates:[14.12456,47.59397],count:47},{year:2006,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:35},{year:2006,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:32},{year:2006,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:5},{year:2006,country:"Canada",coordinates:[-107.991707,61.0666922],count:56},{year:2006,country:"Japan",coordinates:[139.2394179,36.5748441],count:112},{year:2006,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:2006,country:"S Korea",coordinates:[127.6961188,36.638392],count:150},{year:2006,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:27},{year:2006,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2006,country:"Belgium",coordinates:[4.6667145,50.6402809],count:12},{year:2006,country:"France",coordinates:[1.8883335,46.603354],count:120},{year:2006,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:2},{year:2006,country:"India",coordinates:[78.6677428,22.3511148],count:52},{year:2006,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:12},{year:2006,country:"Hungary",coordinates:[19.5060937,47.1817585],count:7},{year:2006,country:"Colombia",coordinates:[-72.9088133,4.099917],count:4},{year:2006,country:"Iran",coordinates:[54.5643516,32.6475314],count:3},{year:2006,country:"Bolivia",coordinates:[-64.9912286,-17.0568696],count:1},{year:2006,country:"Brazil",coordinates:[-53.2,-10.3333333],count:6},{year:2006,country:"Singapore",coordinates:[103.8194992,1.357107],count:3},{year:2006,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:4},{year:2006,country:"Philippines",coordinates:[122.7312101,12.7503486],count:16},{year:2006,country:"S Africa",coordinates:[24.991639,-28.8166236],count:8},{year:2006,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:5},{year:2006,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:8},{year:2006,country:"Sweden",coordinates:[14.5208584,59.6749712],count:20},{year:2006,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:2},{year:2006,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2006,country:"Turkey",coordinates:[34.9249653,38.9597594],count:14},{year:2006,country:"Belarus",coordinates:[27.6971358,53.4250605],count:4},{year:2006,country:"Denmark",coordinates:[10.3333283,55.670249],count:13},{year:2006,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:9},{year:2006,country:"Bahrain",coordinates:[50.553336789123236,26.030093],count:2},{year:2006,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2006,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:33},{year:2006,country:"Finland",coordinates:[25.9209164,63.2467777],count:3},{year:2006,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:3},{year:2006,country:"Romania",coordinates:[24.6859225,45.9852129],count:9},{year:2006,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:10},{year:2006,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2006,country:"Greece",coordinates:[21.9877132,38.9953683],count:5},{year:2006,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2006,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:2006,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:1},{year:2006,country:"UK/Egypt",coordinates:[-.6195729,51.5638381],count:1},{year:2006,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:1934,country:"India",coordinates:[78.6677428,22.3511148],count:3},{year:2007,country:"UK",coordinates:[20.5447525,6.3110548],count:159},{year:2007,country:"Greece",coordinates:[21.9877132,38.9953683],count:2},{year:2007,country:"Australia",coordinates:[134.755,-24.7761086],count:55},{year:2007,country:"Sweden",coordinates:[14.5208584,59.6749712],count:4},{year:2007,country:"Nepal",coordinates:[83.9999901,28.3780464],count:580},{year:2007,country:"Germany",coordinates:[10.4478313,51.1638175],count:57},{year:2007,country:"Italy",coordinates:[12.674297,42.6384261],count:87},{year:2007,country:"USA",coordinates:[-100.445882,39.7837304],count:210},{year:2007,country:"S Korea",coordinates:[127.6961188,36.638392],count:136},{year:2007,country:"France",coordinates:[1.8883335,46.603354],count:111},{year:2007,country:"Spain",coordinates:[-4.8379791,39.3260685],count:92},{year:2007,country:"Austria",coordinates:[14.12456,47.59397],count:52},{year:2007,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:19},{year:2007,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:2},{year:2007,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:54},{year:2007,country:"Canada",coordinates:[-107.991707,61.0666922],count:52},{year:2007,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:3},{year:2007,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2007,country:"Russia",coordinates:[97.7453061,64.6863136],count:37},{year:2007,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:22},{year:2007,country:"Romania",coordinates:[24.6859225,45.9852129],count:2},{year:2007,country:"Colombia",coordinates:[-72.9088133,4.099917],count:10},{year:2007,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:1},{year:2007,country:"Brazil",coordinates:[-53.2,-10.3333333],count:10},{year:2007,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:51},{year:2007,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:7},{year:2007,country:"Japan",coordinates:[139.2394179,36.5748441],count:111},{year:2007,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:13},{year:2007,country:"Denmark",coordinates:[10.3333283,55.670249],count:8},{year:2007,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:27},{year:2007,country:"Ireland",coordinates:[-7.9794599,52.865196],count:12},{year:2007,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:7},{year:2007,country:"China",coordinates:[104.999955,35.0000663],count:120},{year:2007,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:5},{year:2007,country:"India",coordinates:[78.6677428,22.3511148],count:33},{year:2007,country:"S Africa",coordinates:[24.991639,-28.8166236],count:11},{year:2007,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:10},{year:2007,country:"Turkey",coordinates:[34.9249653,38.9597594],count:3},{year:2007,country:"Belgium",coordinates:[4.6667145,50.6402809],count:20},{year:2007,country:"Poland",coordinates:[19.134422,52.215933],count:41},{year:2007,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:24},{year:2007,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2007,country:"Singapore",coordinates:[103.8194992,1.357107],count:18},{year:2007,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:10},{year:2007,country:"Canada/Macedonia",coordinates:[-79.63809905925717,43.5847041481031],count:1},{year:2007,country:"Egypt/UK",coordinates:[-.6195729,51.5638381],count:1},{year:2007,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:12},{year:2007,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:1},{year:2007,country:"Hungary",coordinates:[19.5060937,47.1817585],count:4},{year:2007,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2007,country:"Australia/USA",coordinates:[-104.659511365206,38.26083395],count:1},{year:2007,country:"UK/USA",coordinates:[.1258329,52.2153827],count:2},{year:2007,country:"Philippines",coordinates:[122.7312101,12.7503486],count:16},{year:2007,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:1},{year:2007,country:"Iran",coordinates:[54.5643516,32.6475314],count:12},{year:2007,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:2007,country:"Croatia",coordinates:[15.6575209,45.3658443],count:22},{year:2007,country:"Latvia",coordinates:[24.7537645,56.8406494],count:3},{year:2007,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:3},{year:2007,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2007,country:"Bosnia-Herzegovina/USA",coordinates:[-77.04721203868047,38.8962312],count:2},{year:1961,country:"UK/USA",coordinates:[.1258329,52.2153827],count:1},{year:2007,country:"Finland",coordinates:[25.9209164,63.2467777],count:2},{year:2007,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:4},{year:2007,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:2},{year:2007,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:24},{year:2007,country:"Thailand",coordinates:[100.83273,14.8971921],count:16},{year:2007,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2007,country:"Switzerland/UK",coordinates:[-.1605900915923223,51.5184448],count:1},{year:2008,country:"Germany",coordinates:[10.4478313,51.1638175],count:115},{year:2008,country:"Belgium",coordinates:[4.6667145,50.6402809],count:11},{year:2008,country:"Nepal",coordinates:[83.9999901,28.3780464],count:599},{year:2008,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:29},{year:2008,country:"Japan",coordinates:[139.2394179,36.5748441],count:122},{year:2008,country:"USA",coordinates:[-100.445882,39.7837304],count:192},{year:2008,country:"France",coordinates:[1.8883335,46.603354],count:150},{year:2008,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:3},{year:2008,country:"Russia",coordinates:[97.7453061,64.6863136],count:41},{year:2008,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:2},{year:2008,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:3},{year:2008,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:17},{year:2008,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:71},{year:2008,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:1},{year:2008,country:"Romania",coordinates:[24.6859225,45.9852129],count:7},{year:2008,country:"Canada",coordinates:[-107.991707,61.0666922],count:53},{year:2008,country:"Spain",coordinates:[-4.8379791,39.3260685],count:155},{year:2008,country:"Australia",coordinates:[134.755,-24.7761086],count:58},{year:2008,country:"Denmark",coordinates:[10.3333283,55.670249],count:11},{year:2008,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:8},{year:2008,country:"UK",coordinates:[20.5447525,6.3110548],count:181},{year:2008,country:"S Africa",coordinates:[24.991639,-28.8166236],count:7},{year:2008,country:"Austria",coordinates:[14.12456,47.59397],count:47},{year:2008,country:"Colombia",coordinates:[-72.9088133,4.099917],count:5},{year:2008,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:4},{year:2008,country:"Poland",coordinates:[19.134422,52.215933],count:42},{year:2008,country:"Italy",coordinates:[12.674297,42.6384261],count:113},{year:2008,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:8},{year:2008,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:8},{year:2008,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:10},{year:2008,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:6},{year:2008,country:"Ireland",coordinates:[-7.9794599,52.865196],count:13},{year:2008,country:"Algeria",coordinates:[2.9999825,28.0000272],count:1},{year:2008,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:19},{year:2008,country:"Hungary",coordinates:[19.5060937,47.1817585],count:9},{year:2008,country:"Brazil",coordinates:[-53.2,-10.3333333],count:7},{year:2008,country:"Oman",coordinates:[57.0036901,21.0000287],count:1},{year:2008,country:"Saudi Arabia",coordinates:[42.3528328,25.6242618],count:1},{year:2008,country:"France/USA",coordinates:[-97.0696914,32.7569047],count:1},{year:2008,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:1},{year:2008,country:"India",coordinates:[78.6677428,22.3511148],count:43},{year:2008,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:2},{year:2008,country:"S Korea",coordinates:[127.6961188,36.638392],count:93},{year:2008,country:"Poland/Canada",coordinates:[-76.5535718,45.0601815],count:1},{year:2008,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:7},{year:2008,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:10},{year:2008,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:4},{year:2008,country:"Thailand",coordinates:[100.83273,14.8971921],count:2},{year:2008,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:20},{year:2008,country:"Singapore",coordinates:[103.8194992,1.357107],count:1},{year:2008,country:"Greece",coordinates:[21.9877132,38.9953683],count:11},{year:2008,country:"Finland",coordinates:[25.9209164,63.2467777],count:8},{year:2008,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:3},{year:2008,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:5},{year:2008,country:"Latvia",coordinates:[24.7537645,56.8406494],count:5},{year:2008,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:3},{year:2008,country:"China",coordinates:[104.999955,35.0000663],count:141},{year:2008,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:2008,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:2008,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:2},{year:2008,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2008,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:4},{year:2008,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:2},{year:2008,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:22},{year:2003,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2003,country:"Croatia",coordinates:[15.6575209,45.3658443],count:3},{year:2008,country:"UK/New Zealand",coordinates:[-1.4993394,52.9257201],count:1},{year:2008,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:1},{year:2008,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:2008,country:"Sweden",coordinates:[14.5208584,59.6749712],count:5},{year:2008,country:"Croatia",coordinates:[15.6575209,45.3658443],count:11},{year:2008,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2008,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2008,country:"Iran",coordinates:[54.5643516,32.6475314],count:20},{year:2008,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:6},{year:2008,country:"Montenegro",coordinates:[-51.4687455,-29.6826112],count:2},{year:2008,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:4},{year:2009,country:"Japan",coordinates:[139.2394179,36.5748441],count:142},{year:2009,country:"Nepal",coordinates:[83.9999901,28.3780464],count:708},{year:2002,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:1997,country:"Armenia",coordinates:[-75.6723751,4.536307],count:1},{year:2009,country:"Austria",coordinates:[14.12456,47.59397],count:46},{year:2009,country:"Russia",coordinates:[97.7453061,64.6863136],count:49},{year:2009,country:"Germany",coordinates:[10.4478313,51.1638175],count:113},{year:2009,country:"France",coordinates:[1.8883335,46.603354],count:147},{year:2009,country:"UK",coordinates:[20.5447525,6.3110548],count:170},{year:2009,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:47},{year:2009,country:"Italy",coordinates:[12.674297,42.6384261],count:76},{year:2009,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:7},{year:2009,country:"S Korea",coordinates:[127.6961188,36.638392],count:117},{year:2009,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:5},{year:2009,country:"Sweden",coordinates:[14.5208584,59.6749712],count:19},{year:2009,country:"Australia",coordinates:[134.755,-24.7761086],count:63},{year:2009,country:"Denmark",coordinates:[10.3333283,55.670249],count:12},{year:2009,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:2},{year:2009,country:"Canada",coordinates:[-107.991707,61.0666922],count:50},{year:2009,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:2},{year:2009,country:"USA",coordinates:[-100.445882,39.7837304],count:169},{year:2009,country:"Spain",coordinates:[-4.8379791,39.3260685],count:112},{year:2009,country:"India",coordinates:[78.6677428,22.3511148],count:92},{year:2009,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:24},{year:2009,country:"Belgium",coordinates:[4.6667145,50.6402809],count:12},{year:2009,country:"Romania",coordinates:[24.6859225,45.9852129],count:8},{year:2009,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:25},{year:2009,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:76},{year:2009,country:"Greece",coordinates:[21.9877132,38.9953683],count:3},{year:2009,country:"China",coordinates:[104.999955,35.0000663],count:96},{year:2009,country:"S Africa",coordinates:[24.991639,-28.8166236],count:7},{year:2009,country:"Poland",coordinates:[19.134422,52.215933],count:42},{year:2009,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2009,country:"Iran",coordinates:[54.5643516,32.6475314],count:16},{year:2009,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:32},{year:2009,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2009,country:"Finland",coordinates:[25.9209164,63.2467777],count:14},{year:2009,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:2},{year:2009,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:9},{year:2009,country:"Ireland",coordinates:[-7.9794599,52.865196],count:9},{year:2009,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:6},{year:2009,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:1},{year:2009,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:17},{year:2009,country:"USA/Jamaica",coordinates:[-73.8006429,40.7029134],count:1},{year:2009,country:"UK/Canada",coordinates:[-1.5884921,50.9625195],count:1},{year:2009,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2009,country:"Colombia",coordinates:[-72.9088133,4.099917],count:6},{year:2009,country:"Croatia",coordinates:[15.6575209,45.3658443],count:15},{year:2009,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:14},{year:2009,country:"Singapore",coordinates:[103.8194992,1.357107],count:8},{year:2009,country:"Israel",coordinates:[34.8594762,30.8124247],count:1},{year:2009,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:8},{year:2009,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:12},{year:2009,country:"Spain/Brazil",coordinates:[-3.694472,40.4281125],count:1},{year:2009,country:"Moldova",coordinates:[28.5670941,47.2879608],count:1},{year:2009,country:"Panama",coordinates:[-81.1308434,8.559559],count:1},{year:2009,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:7},{year:2009,country:"Montenegro",coordinates:[-51.4687455,-29.6826112],count:5},{year:2009,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:3},{year:2009,country:"Bosnia-Herzegovina/USA",coordinates:[-77.04721203868047,38.8962312],count:1},{year:2009,country:"Hungary",coordinates:[19.5060937,47.1817585],count:9},{year:2009,country:"San Marino",coordinates:[12.458306,43.9458623],count:2},{year:2009,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:2009,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:2},{year:2009,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:4},{year:2009,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:7},{year:2009,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2009,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:2},{year:2009,country:"Brazil",coordinates:[-53.2,-10.3333333],count:7},{year:1989,country:"India",coordinates:[78.6677428,22.3511148],count:1},{year:2009,country:"UK/New Zealand",coordinates:[-1.4993394,52.9257201],count:1},{year:2009,country:"Germany/USA",coordinates:[-79.1166983,40.4203479],count:1},{year:2009,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2009,country:"Belarus",coordinates:[27.6971358,53.4250605],count:6},{year:2009,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2009,country:"Malta",coordinates:[14.4476911,35.8885993],count:3},{year:2009,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2009,country:"Pakistan",coordinates:[71.247499,30.3308401],count:2},{year:2009,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:2},{year:2009,country:"Oman",coordinates:[57.0036901,21.0000287],count:1},{year:2010,country:"USA",coordinates:[-100.445882,39.7837304],count:211},{year:2010,country:"UK",coordinates:[20.5447525,6.3110548],count:186},{year:2010,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:2010,country:"Russia",coordinates:[97.7453061,64.6863136],count:47},{year:2010,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:11},{year:2010,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:16},{year:2010,country:"Canada",coordinates:[-107.991707,61.0666922],count:53},{year:2010,country:"Nepal",coordinates:[83.9999901,28.3780464],count:700},{year:2010,country:"France",coordinates:[1.8883335,46.603354],count:112},{year:2010,country:"Switzerland/USA",coordinates:[-85.0373975,38.8249258],count:1},{year:2010,country:"Germany",coordinates:[10.4478313,51.1638175],count:127},{year:2010,country:"Italy",coordinates:[12.674297,42.6384261],count:96},{year:2010,country:"Spain",coordinates:[-4.8379791,39.3260685],count:87},{year:2010,country:"S Korea",coordinates:[127.6961188,36.638392],count:90},{year:2010,country:"Iran",coordinates:[54.5643516,32.6475314],count:33},{year:2010,country:"Poland",coordinates:[19.134422,52.215933],count:29},{year:2010,country:"Romania",coordinates:[24.6859225,45.9852129],count:3},{year:2010,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:4},{year:2010,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:2},{year:2010,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:12},{year:2010,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:67},{year:2010,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:22},{year:2010,country:"Australia",coordinates:[134.755,-24.7761086],count:65},{year:2010,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:2},{year:2010,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:2},{year:2010,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:21},{year:2010,country:"Austria",coordinates:[14.12456,47.59397],count:89},{year:2010,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:3},{year:2010,country:"Ireland",coordinates:[-7.9794599,52.865196],count:9},{year:2010,country:"Finland",coordinates:[25.9209164,63.2467777],count:46},{year:2010,country:"UK/Argentina",coordinates:[null,null],count:3},{year:2010,country:"China",coordinates:[104.999955,35.0000663],count:100},{year:2010,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2010,country:"Japan",coordinates:[139.2394179,36.5748441],count:93},{year:2010,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:26},{year:2010,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:17},{year:2010,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:3},{year:2010,country:"Sweden",coordinates:[14.5208584,59.6749712],count:10},{year:2010,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2010,country:"Turkey",coordinates:[34.9249653,38.9597594],count:3},{year:2010,country:"Greece",coordinates:[21.9877132,38.9953683],count:2},{year:2010,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:12},{year:2010,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:7},{year:2010,country:"India",coordinates:[78.6677428,22.3511148],count:11},{year:2010,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:2},{year:2010,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:2010,country:"Denmark",coordinates:[10.3333283,55.670249],count:9},{year:2010,country:"Hungary",coordinates:[19.5060937,47.1817585],count:17},{year:2010,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:3},{year:2010,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:10},{year:2010,country:"Croatia",coordinates:[15.6575209,45.3658443],count:2},{year:2010,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:2010,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:30},{year:2010,country:"Australia/Greece",coordinates:[25.0827506,35.3347633],count:1},{year:2010,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:3},{year:2010,country:"Estonia",coordinates:[25.3319078,58.7523778],count:6},{year:1950,country:"Nepal",coordinates:[83.9999901,28.3780464],count:17},{year:1939,country:"Nepal",coordinates:[83.9999901,28.3780464],count:16},{year:1939,country:"India",coordinates:[78.6677428,22.3511148],count:2},{year:1938,country:"Nepal",coordinates:[83.9999901,28.3780464],count:12},{year:1938,country:"India",coordinates:[78.6677428,22.3511148],count:4},{year:1937,country:"Nepal",coordinates:[83.9999901,28.3780464],count:9},{year:1937,country:"India",coordinates:[78.6677428,22.3511148],count:2},{year:1936,country:"Nepal",coordinates:[83.9999901,28.3780464],count:16},{year:1936,country:"India",coordinates:[78.6677428,22.3511148],count:5},{year:1935,country:"India",coordinates:[78.6677428,22.3511148],count:5},{year:1933,country:"Nepal",coordinates:[83.9999901,28.3780464],count:23},{year:1933,country:"India",coordinates:[78.6677428,22.3511148],count:4},{year:2010,country:"S Africa",coordinates:[24.991639,-28.8166236],count:17},{year:2010,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2010,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:2010,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2010,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:1},{year:2010,country:"Colombia",coordinates:[-72.9088133,4.099917],count:5},{year:2010,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:10},{year:2010,country:"USA/Austria",coordinates:[-77.06928450210704,38.94540725],count:1},{year:2007,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:6},{year:2007,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:1},{year:2010,country:"USA/Israel",coordinates:[-79.8109014,39.3181528],count:1},{year:2010,country:"China/Japan",coordinates:[128.568063,27.343615],count:1},{year:1929,country:"Nepal",coordinates:[83.9999901,28.3780464],count:4},{year:1929,country:"UK",coordinates:[20.5447525,6.3110548],count:1},{year:1921,country:"Nepal",coordinates:[83.9999901,28.3780464],count:3},{year:2011,country:"Russia",coordinates:[97.7453061,64.6863136],count:55},{year:2011,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:6},{year:2011,country:"France",coordinates:[1.8883335,46.603354],count:178},{year:2011,country:"Australia",coordinates:[134.755,-24.7761086],count:58},{year:2011,country:"USA",coordinates:[-100.445882,39.7837304],count:183},{year:2011,country:"Estonia",coordinates:[25.3319078,58.7523778],count:4},{year:2011,country:"Nepal",coordinates:[83.9999901,28.3780464],count:816},{year:2011,country:"India",coordinates:[78.6677428,22.3511148],count:63},{year:2011,country:"UK",coordinates:[20.5447525,6.3110548],count:185},{year:2011,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:37},{year:2011,country:"Iran",coordinates:[54.5643516,32.6475314],count:33},{year:2011,country:"Germany",coordinates:[10.4478313,51.1638175],count:80},{year:2011,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:59},{year:2011,country:"S Korea",coordinates:[127.6961188,36.638392],count:51},{year:2011,country:"Ireland",coordinates:[-7.9794599,52.865196],count:14},{year:2011,country:"Canada",coordinates:[-107.991707,61.0666922],count:48},{year:2011,country:"Italy",coordinates:[12.674297,42.6384261],count:71},{year:2011,country:"UK/Argentina",coordinates:[null,null],count:2},{year:2011,country:"Poland",coordinates:[19.134422,52.215933],count:44},{year:2011,country:"Romania",coordinates:[24.6859225,45.9852129],count:15},{year:2011,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:2},{year:2011,country:"Finland",coordinates:[25.9209164,63.2467777],count:6},{year:2011,country:"Japan",coordinates:[139.2394179,36.5748441],count:83},{year:2011,country:"France/Switzerland",coordinates:[7.7678483472198785,48.588962249999994],count:1},{year:2011,country:"Spain",coordinates:[-4.8379791,39.3260685],count:74},{year:2011,country:"India/Nepal",coordinates:[83.1106533,26.6959045],count:1},{year:2011,country:"S Africa",coordinates:[24.991639,-28.8166236],count:6},{year:2011,country:"Canada/UK",coordinates:[-1.5884921,50.9625195],count:1},{year:2011,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:1},{year:2011,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:38},{year:2011,country:"Pakistan",coordinates:[71.247499,30.3308401],count:4},{year:2011,country:"Sweden",coordinates:[14.5208584,59.6749712],count:17},{year:2011,country:"Dominican Republic",coordinates:[-70.3028026,19.0974031],count:2},{year:2011,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:20},{year:2011,country:"USA/Dominican Republic",coordinates:[-69.549522,19.3045528],count:1},{year:2011,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:8},{year:2011,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:1},{year:2011,country:"Austria",coordinates:[14.12456,47.59397],count:71},{year:2011,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:7},{year:2011,country:"Bolivia",coordinates:[-64.9912286,-17.0568696],count:3},{year:2011,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2011,country:"Palestine",coordinates:[-95.6307891,31.7621153],count:1},{year:2011,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2011,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2011,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2011,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:24},{year:2011,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2010,country:"Brazil",coordinates:[-53.2,-10.3333333],count:4},{year:2010,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:2010,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:1},{year:2011,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:8},{year:2011,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:16},{year:2011,country:"Belgium",coordinates:[4.6667145,50.6402809],count:21},{year:2011,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:2011,country:"Azerbaijan",coordinates:[47.7872508,40.3936294],count:1},{year:2011,country:"Singapore",coordinates:[103.8194992,1.357107],count:11},{year:2011,country:"China",coordinates:[104.999955,35.0000663],count:66},{year:2011,country:"Hungary",coordinates:[19.5060937,47.1817585],count:5},{year:2011,country:"Brazil",coordinates:[-53.2,-10.3333333],count:8},{year:2011,country:"Japan/China",coordinates:[128.568063,27.343615],count:1},{year:2011,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:4},{year:2011,country:"Mauritius",coordinates:[57.5703566,-20.2759451],count:2},{year:2011,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:2011,country:"UK/Bangladesh",coordinates:[-.1698511,51.5246621],count:1},{year:2011,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:4},{year:2011,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:5},{year:2011,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:13},{year:2011,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:2011,country:"Latvia",coordinates:[24.7537645,56.8406494],count:2},{year:2011,country:"UK/S Africa",coordinates:[-2.49020920207643,53.9056772],count:1},{year:2010,country:"Malta",coordinates:[14.4476911,35.8885993],count:3},{year:2010,country:"France/USA",coordinates:[-97.0696914,32.7569047],count:1},{year:2010,country:"Oman",coordinates:[57.0036901,21.0000287],count:2},{year:2010,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:1},{year:2010,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:2},{year:2010,country:"UK/Canada",coordinates:[-1.5884921,50.9625195],count:1},{year:2010,country:"Singapore",coordinates:[103.8194992,1.357107],count:2},{year:2010,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:3},{year:2010,country:"China/USA",coordinates:[-94.3357433,30.047992],count:1},{year:2010,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2010,country:"France/Algeria",coordinates:[2.3097061035440056,48.877724349999994],count:1},{year:2010,country:"Montenegro",coordinates:[-51.4687455,-29.6826112],count:3},{year:2011,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2011,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2011,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:2},{year:2011,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2011,country:"Sri Lanka",coordinates:[80.7137847,7.5554942],count:1},{year:2011,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:16},{year:2011,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:4},{year:2011,country:"Thailand",coordinates:[100.83273,14.8971921],count:1},{year:2011,country:"Belarus",coordinates:[27.6971358,53.4250605],count:4},{year:2011,country:"Colombia",coordinates:[-72.9088133,4.099917],count:2},{year:2011,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:4},{year:2012,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:63},{year:2012,country:"USA",coordinates:[-100.445882,39.7837304],count:193},{year:2012,country:"India",coordinates:[78.6677428,22.3511148],count:100},{year:2012,country:"Nepal",coordinates:[83.9999901,28.3780464],count:753},{year:2012,country:"Hungary",coordinates:[19.5060937,47.1817585],count:5},{year:2012,country:"Japan",coordinates:[139.2394179,36.5748441],count:98},{year:2011,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2011,country:"Australia/Ireland",coordinates:[-6.255802,53.3375611],count:1},{year:2012,country:"Spain",coordinates:[-4.8379791,39.3260685],count:39},{year:2012,country:"Iran",coordinates:[54.5643516,32.6475314],count:35},{year:2011,country:"UAE",coordinates:[53.9994829,24.0002488],count:1},{year:2012,country:"UK",coordinates:[20.5447525,6.3110548],count:142},{year:2012,country:"Germany",coordinates:[10.4478313,51.1638175],count:100},{year:2012,country:"Sweden",coordinates:[14.5208584,59.6749712],count:25},{year:2012,country:"Canada",coordinates:[-107.991707,61.0666922],count:51},{year:2012,country:"New Zealand/UK",coordinates:[-1.4993394,52.9257201],count:1},{year:2012,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:1},{year:2012,country:"France",coordinates:[1.8883335,46.603354],count:100},{year:2012,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:11},{year:2012,country:"Australia",coordinates:[134.755,-24.7761086],count:59},{year:2012,country:"Austria",coordinates:[14.12456,47.59397],count:78},{year:2012,country:"Ireland",coordinates:[-7.9794599,52.865196],count:8},{year:2012,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:1},{year:2012,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:23},{year:2012,country:"Albania",coordinates:[-73.9151617,5.7587654],count:6},{year:2012,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:2},{year:2012,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:3},{year:2012,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:39},{year:2012,country:"Poland",coordinates:[19.134422,52.215933],count:46},{year:2012,country:"Italy",coordinates:[12.674297,42.6384261],count:96},{year:2011,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2012,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:37},{year:2012,country:"Romania",coordinates:[24.6859225,45.9852129],count:5},{year:2012,country:"Russia",coordinates:[97.7453061,64.6863136],count:46},{year:2012,country:"China",coordinates:[104.999955,35.0000663],count:121},{year:2012,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:11},{year:2012,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:2012,country:"Brazil",coordinates:[-53.2,-10.3333333],count:5},{year:2012,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2012,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:3},{year:2012,country:"Finland",coordinates:[25.9209164,63.2467777],count:7},{year:2012,country:"New Zealand/Australia",coordinates:[174.7190716,-36.8622961],count:1},{year:2012,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:10},{year:2012,country:"S Africa",coordinates:[24.991639,-28.8166236],count:8},{year:2012,country:"UK/Argentina",coordinates:[null,null],count:1},{year:2012,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:25},{year:2012,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:6},{year:2012,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:21},{year:2012,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2012,country:"S Korea",coordinates:[127.6961188,36.638392],count:40},{year:2012,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:4},{year:2012,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:7},{year:2012,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:1},{year:2012,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:11},{year:2012,country:"Tanzania",coordinates:[35.7878438,-6.5247123],count:1},{year:2012,country:"Latvia",coordinates:[24.7537645,56.8406494],count:6},{year:2012,country:"UK/S Africa",coordinates:[-2.49020920207643,53.9056772],count:1},{year:2012,country:"Saudi Arabia/USA",coordinates:[46.620398529461085,24.68129685],count:1},{year:2012,country:"Singapore",coordinates:[103.8194992,1.357107],count:1},{year:2012,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2012,country:"Canada/Ireland",coordinates:[-68.46866692563253,48.517215],count:2},{year:2012,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2012,country:"Bosnia-Herzegovina/USA",coordinates:[-77.04721203868047,38.8962312],count:1},{year:2012,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2012,country:"Romania/USA",coordinates:[-79.0447485,39.7934153],count:1},{year:2011,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:2011,country:"Israel",coordinates:[34.8594762,30.8124247],count:4},{year:2011,country:"Malta",coordinates:[14.4476911,35.8885993],count:3},{year:2011,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2011,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:2},{year:2012,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:1},{year:2011,country:"Liechtenstein",coordinates:[9.5531527,47.1416307],count:1},{year:2011,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:2011,country:"Lithuania/USA",coordinates:[25.971696311589092,55.3021926],count:1},{year:2011,country:"China/USA",coordinates:[-94.3357433,30.047992],count:1},{year:2012,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:2011,country:"Ecuador/Germany",coordinates:[-78.4789616,-.177577],count:1},{year:2012,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2012,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:6},{year:2012,country:"Turkmenistan",coordinates:[59.3924609,39.3763807],count:1},{year:2012,country:"Belgium",coordinates:[4.6667145,50.6402809],count:8},{year:2012,country:"Slovakia/USA",coordinates:[-73.9719609,40.7504548],count:1},{year:2012,country:"Colombia",coordinates:[-72.9088133,4.099917],count:2},{year:2012,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2012,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:1},{year:2012,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2012,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:10},{year:2012,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:2},{year:2012,country:"UAE",coordinates:[53.9994829,24.0002488],count:1},{year:2012,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:18},{year:2012,country:"Switzerland/Germany",coordinates:[7.7206311,48.2667198],count:1},{year:2012,country:"Australia/Sweden",coordinates:[149.11496853585635,-35.30911545],count:1},{year:2012,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:1},{year:2013,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:12},{year:2013,country:"Russia",coordinates:[97.7453061,64.6863136],count:60},{year:2013,country:"Sweden",coordinates:[14.5208584,59.6749712],count:12},{year:2013,country:"Nepal",coordinates:[83.9999901,28.3780464],count:807},{year:2013,country:"Germany",coordinates:[10.4478313,51.1638175],count:95},{year:2013,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:33},{year:2013,country:"USA",coordinates:[-100.445882,39.7837304],count:174},{year:2013,country:"Spain",coordinates:[-4.8379791,39.3260685],count:57},{year:2013,country:"Austria",coordinates:[14.12456,47.59397],count:59},{year:2013,country:"Estonia",coordinates:[25.3319078,58.7523778],count:4},{year:2013,country:"France",coordinates:[1.8883335,46.603354],count:121},{year:2013,country:"UK",coordinates:[20.5447525,6.3110548],count:167},{year:2013,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:9},{year:2013,country:"India",coordinates:[78.6677428,22.3511148],count:102},{year:2013,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:1},{year:2013,country:"Australia",coordinates:[134.755,-24.7761086],count:53},{year:2013,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:3},{year:2013,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:4},{year:2013,country:"S Africa",coordinates:[24.991639,-28.8166236],count:8},{year:2013,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:1},{year:2013,country:"Andorra",coordinates:[1.5732033,42.5407167],count:3},{year:2013,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:14},{year:2013,country:"S Korea",coordinates:[127.6961188,36.638392],count:34},{year:2013,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:7},{year:2013,country:"Poland",coordinates:[19.134422,52.215933],count:46},{year:2013,country:"Japan",coordinates:[139.2394179,36.5748441],count:104},{year:2013,country:"Pakistan",coordinates:[71.247499,30.3308401],count:4},{year:2013,country:"Singapore",coordinates:[103.8194992,1.357107],count:2},{year:2013,country:"Ireland",coordinates:[-7.9794599,52.865196],count:9},{year:2013,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:10},{year:2013,country:"Brazil",coordinates:[-53.2,-10.3333333],count:9},{year:2013,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:16},{year:2013,country:"Canada",coordinates:[-107.991707,61.0666922],count:20},{year:2013,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:1},{year:2013,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2013,country:"S Africa/UK",coordinates:[-2.49020920207643,53.9056772],count:1},{year:2013,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:151},{year:2013,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:2},{year:2013,country:"Iran",coordinates:[54.5643516,32.6475314],count:7},{year:2013,country:"Finland",coordinates:[25.9209164,63.2467777],count:7},{year:2013,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:6},{year:2012,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:2013,country:"Italy",coordinates:[12.674297,42.6384261],count:56},{year:2013,country:"Philippines",coordinates:[122.7312101,12.7503486],count:1},{year:2013,country:"Thailand",coordinates:[100.83273,14.8971921],count:7},{year:2013,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2013,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:7},{year:2013,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:3},{year:2013,country:"Qatar",coordinates:[51.2295295,25.3336984],count:1},{year:2013,country:"Palestine",coordinates:[-95.6307891,31.7621153],count:1},{year:2013,country:"USA/Ireland",coordinates:[-86.9994455,38.4147739],count:1},{year:2013,country:"Saudi Arabia",coordinates:[42.3528328,25.6242618],count:1},{year:2013,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:21},{year:2013,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2013,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:1},{year:2013,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2013,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:2013,country:"China",coordinates:[104.999955,35.0000663],count:129},{year:2013,country:"Latvia",coordinates:[24.7537645,56.8406494],count:2},{year:2013,country:"Mauritius",coordinates:[57.5703566,-20.2759451],count:1},{year:2013,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2013,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:2},{year:2013,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:2013,country:"Belgium",coordinates:[4.6667145,50.6402809],count:9},{year:2013,country:"Romania",coordinates:[24.6859225,45.9852129],count:11},{year:2013,country:"Hungary",coordinates:[19.5060937,47.1817585],count:5},{year:2013,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:2},{year:2013,country:"Slovakia/USA",coordinates:[-73.9719609,40.7504548],count:1},{year:2013,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:2013,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:7},{year:2013,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:1},{year:2013,country:"Argentina/Canada",coordinates:[-65.31826937693847,-24.190240299791608],count:1},{year:2013,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2013,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:5},{year:2013,country:"Israel",coordinates:[34.8594762,30.8124247],count:2},{year:2013,country:"Singapore/Malaysia",coordinates:[103.76862194775,1.454593742629712],count:1},{year:2013,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:11},{year:2013,country:"Nepal/Canada",coordinates:[-123.14802703149148,49.33913410295857],count:1},{year:2013,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:3},{year:2013,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:2},{year:2013,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:2013,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2013,country:"Turkey",coordinates:[34.9249653,38.9597594],count:7},{year:2013,country:"UK/USA",coordinates:[.1258329,52.2153827],count:1},{year:2013,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:2013,country:"Australia/Ireland",coordinates:[-6.255802,53.3375611],count:1},{year:2013,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:7},{year:2013,country:"UK/Australia",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:2013,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2013,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:2014,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:6},{year:2014,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:37},{year:2014,country:"Canada",coordinates:[-107.991707,61.0666922],count:35},{year:2014,country:"Japan",coordinates:[139.2394179,36.5748441],count:61},{year:2014,country:"Australia",coordinates:[134.755,-24.7761086],count:61},{year:2014,country:"USA",coordinates:[-100.445882,39.7837304],count:222},{year:2014,country:"UK",coordinates:[20.5447525,6.3110548],count:177},{year:2014,country:"France",coordinates:[1.8883335,46.603354],count:45},{year:2014,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:13},{year:2014,country:"Belgium",coordinates:[4.6667145,50.6402809],count:9},{year:2014,country:"India",coordinates:[78.6677428,22.3511148],count:48},{year:2014,country:"Myanmar",coordinates:[95.9999652,17.1750495],count:5},{year:2014,country:"Poland",coordinates:[19.134422,52.215933],count:47},{year:2014,country:"China",coordinates:[104.999955,35.0000663],count:109},{year:2014,country:"Nepal",coordinates:[83.9999901,28.3780464],count:576},{year:2014,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:7},{year:2014,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:31},{year:2014,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:62},{year:2014,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:5},{year:2014,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:11},{year:2014,country:"Spain",coordinates:[-4.8379791,39.3260685],count:57},{year:2014,country:"Iran",coordinates:[54.5643516,32.6475314],count:19},{year:2014,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:10},{year:2014,country:"Romania",coordinates:[24.6859225,45.9852129],count:20},{year:2014,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:8},{year:2014,country:"Brazil",coordinates:[-53.2,-10.3333333],count:14},{year:2014,country:"Sweden",coordinates:[14.5208584,59.6749712],count:9},{year:2014,country:"Russia",coordinates:[97.7453061,64.6863136],count:75},{year:2014,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:26},{year:2014,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:10},{year:2014,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2014,country:"Italy",coordinates:[12.674297,42.6384261],count:72},{year:2014,country:"Germany",coordinates:[10.4478313,51.1638175],count:98},{year:2014,country:"Malta",coordinates:[14.4476911,35.8885993],count:4},{year:2014,country:"Austria",coordinates:[14.12456,47.59397],count:69},{year:2014,country:"Mauritius",coordinates:[57.5703566,-20.2759451],count:1},{year:2014,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:2},{year:2014,country:"S Korea",coordinates:[127.6961188,36.638392],count:64},{year:2014,country:"Sri Lanka",coordinates:[80.7137847,7.5554942],count:1},{year:2014,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:2},{year:2014,country:"Israel",coordinates:[34.8594762,30.8124247],count:4},{year:2014,country:"Greece",coordinates:[21.9877132,38.9953683],count:1},{year:2014,country:"Singapore",coordinates:[103.8194992,1.357107],count:8},{year:2014,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2014,country:"Australia/UK",coordinates:[-4.099729427008577,53.12619268732061],count:1},{year:2014,country:"Denmark/Australia",coordinates:[117.3551157,-34.9604365],count:2},{year:2014,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2014,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:3},{year:2014,country:"Denmark",coordinates:[10.3333283,55.670249],count:8},{year:2014,country:"S Africa",coordinates:[24.991639,-28.8166236],count:4},{year:2014,country:"S Africa/Zambia",coordinates:[28.350092474716764,-15.432406799999999],count:1},{year:2014,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:3},{year:2014,country:"Hungary",coordinates:[19.5060937,47.1817585],count:3},{year:2014,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:15},{year:2014,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:1},{year:2014,country:"Finland",coordinates:[25.9209164,63.2467777],count:5},{year:2014,country:"Ireland",coordinates:[-7.9794599,52.865196],count:7},{year:2014,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:2014,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:2014,country:"USA/Russia",coordinates:[-75.082283,43.258706],count:3},{year:2014,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2014,country:"Kenya",coordinates:[38.4313975,1.4419683],count:2},{year:2014,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:2014,country:"Croatia",coordinates:[15.6575209,45.3658443],count:5},{year:2014,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:1},{year:2014,country:"Pakistan",coordinates:[71.247499,30.3308401],count:2},{year:2014,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2014,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2014,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:1},{year:2014,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2014,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:12},{year:2014,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:3},{year:2014,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2014,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:2014,country:"Philippines",coordinates:[122.7312101,12.7503486],count:1},{year:2014,country:"USA/China",coordinates:[-94.3357433,30.047992],count:1},{year:2014,country:"UK/Russia",coordinates:[131.8853995,43.1154578],count:1},{year:2014,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:1},{year:2015,country:"Australia",coordinates:[134.755,-24.7761086],count:74},{year:2015,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:25},{year:2015,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:1},{year:2015,country:"China",coordinates:[104.999955,35.0000663],count:96},{year:2015,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:1},{year:2015,country:"Finland",coordinates:[25.9209164,63.2467777],count:5},{year:2015,country:"Iran",coordinates:[54.5643516,32.6475314],count:5},{year:2015,country:"Nepal",coordinates:[83.9999901,28.3780464],count:793},{year:2015,country:"UK",coordinates:[20.5447525,6.3110548],count:137},{year:2015,country:"Germany",coordinates:[10.4478313,51.1638175],count:84},{year:2015,country:"Romania",coordinates:[24.6859225,45.9852129],count:9},{year:2015,country:"USA",coordinates:[-100.445882,39.7837304],count:182},{year:2015,country:"Austria",coordinates:[14.12456,47.59397],count:48},{year:2015,country:"India",coordinates:[78.6677428,22.3511148],count:84},{year:2015,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:2},{year:2015,country:"Japan",coordinates:[139.2394179,36.5748441],count:122},{year:2015,country:"Brazil",coordinates:[-53.2,-10.3333333],count:4},{year:2015,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:35},{year:2015,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:39},{year:2015,country:"S Africa",coordinates:[24.991639,-28.8166236],count:12},{year:2015,country:"Italy",coordinates:[12.674297,42.6384261],count:20},{year:2015,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:3},{year:2015,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:1},{year:2015,country:"Sweden",coordinates:[14.5208584,59.6749712],count:15},{year:2015,country:"Canada",coordinates:[-107.991707,61.0666922],count:36},{year:2015,country:"France",coordinates:[1.8883335,46.603354],count:113},{year:2015,country:"Singapore",coordinates:[103.8194992,1.357107],count:9},{year:2015,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:6},{year:2015,country:"S Africa/Zambia",coordinates:[28.350092474716764,-15.432406799999999],count:1},{year:2015,country:"Denmark",coordinates:[10.3333283,55.670249],count:4},{year:2015,country:"Belgium",coordinates:[4.6667145,50.6402809],count:13},{year:2015,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:1},{year:2015,country:"UK/Nepal",coordinates:[.46312329816569264,50.8583293],count:1},{year:2015,country:"Spain",coordinates:[-4.8379791,39.3260685],count:63},{year:2015,country:"Poland",coordinates:[19.134422,52.215933],count:15},{year:2015,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:1},{year:2015,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:44},{year:2015,country:"Andorra",coordinates:[1.5732033,42.5407167],count:1},{year:2015,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:11},{year:2015,country:"Slovakia/USA",coordinates:[-73.9719609,40.7504548],count:1},{year:2015,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:2015,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:5},{year:2015,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:2},{year:2015,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2015,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:2015,country:"Ireland",coordinates:[-7.9794599,52.865196],count:9},{year:2015,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:6},{year:2015,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:2015,country:"Mauritius",coordinates:[57.5703566,-20.2759451],count:1},{year:2015,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:15},{year:2015,country:"Russia",coordinates:[97.7453061,64.6863136],count:33},{year:2015,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:1},{year:2015,country:"S Korea",coordinates:[127.6961188,36.638392],count:36},{year:2015,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2015,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:3},{year:2015,country:"Tunisia",coordinates:[10.1857757,36.8002068],count:1},{year:2015,country:"USA/Ireland",coordinates:[-86.9994455,38.4147739],count:1},{year:2015,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:3},{year:2015,country:"USA/China",coordinates:[-94.3357433,30.047992],count:1},{year:2015,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2015,country:"Ecuador/Germany",coordinates:[-78.4789616,-.177577],count:1},{year:2015,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:2},{year:2015,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2015,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:5},{year:2015,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2015,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:2015,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2015,country:"Italy/USA",coordinates:[-96.8847194,32.1840381],count:1},{year:2015,country:"USA/Russia",coordinates:[-75.082283,43.258706],count:1},{year:2015,country:"Turkey",coordinates:[34.9249653,38.9597594],count:3},{year:2015,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2015,country:"Hungary",coordinates:[19.5060937,47.1817585],count:1},{year:2003,country:"Iran",coordinates:[54.5643516,32.6475314],count:6},{year:2015,country:"France/Switzerland",coordinates:[7.7678483472198785,48.588962249999994],count:1},{year:2015,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:4},{year:2015,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2015,country:"UK/Russia",coordinates:[131.8853995,43.1154578],count:1},{year:2015,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:1},{year:2015,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:1},{year:2015,country:"Denmark/Australia",coordinates:[117.3551157,-34.9604365],count:1},{year:2015,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2015,country:"Philippines",coordinates:[122.7312101,12.7503486],count:3},{year:2015,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:1},{year:2015,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2016,country:"Nepal",coordinates:[83.9999901,28.3780464],count:948},{year:2016,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:3},{year:2016,country:"USA",coordinates:[-100.445882,39.7837304],count:198},{year:2016,country:"Spain",coordinates:[-4.8379791,39.3260685],count:72},{year:2016,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:4},{year:2016,country:"Israel",coordinates:[34.8594762,30.8124247],count:6},{year:2016,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:42},{year:2016,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:2016,country:"Romania",coordinates:[24.6859225,45.9852129],count:23},{year:2016,country:"Hungary",coordinates:[19.5060937,47.1817585],count:2},{year:2016,country:"Germany",coordinates:[10.4478313,51.1638175],count:125},{year:2016,country:"China",coordinates:[104.999955,35.0000663],count:186},{year:2016,country:"Russia",coordinates:[97.7453061,64.6863136],count:40},{year:2016,country:"Italy",coordinates:[12.674297,42.6384261],count:48},{year:2016,country:"Japan",coordinates:[139.2394179,36.5748441],count:86},{year:2016,country:"S Korea",coordinates:[127.6961188,36.638392],count:46},{year:2016,country:"Austria",coordinates:[14.12456,47.59397],count:66},{year:2015,country:"Bosnia-Herzegovina/USA",coordinates:[-77.04721203868047,38.8962312],count:1},{year:2016,country:"UK",coordinates:[20.5447525,6.3110548],count:187},{year:2016,country:"Sweden",coordinates:[14.5208584,59.6749712],count:14},{year:2016,country:"Denmark",coordinates:[10.3333283,55.670249],count:4},{year:2016,country:"Canada",coordinates:[-107.991707,61.0666922],count:26},{year:2016,country:"Australia",coordinates:[134.755,-24.7761086],count:58},{year:2016,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:7},{year:2016,country:"France",coordinates:[1.8883335,46.603354],count:96},{year:2016,country:"India",coordinates:[78.6677428,22.3511148],count:91},{year:2016,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:45},{year:2016,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:15},{year:2016,country:"Ireland",coordinates:[-7.9794599,52.865196],count:4},{year:2016,country:"USA/Brazil",coordinates:[-87.1250154,39.523652],count:1},{year:2016,country:"Poland",coordinates:[19.134422,52.215933],count:25},{year:2016,country:"Pakistan",coordinates:[71.247499,30.3308401],count:1},{year:2016,country:"Belgium",coordinates:[4.6667145,50.6402809],count:22},{year:2016,country:"Iran",coordinates:[54.5643516,32.6475314],count:14},{year:2016,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:2},{year:2016,country:"Singapore",coordinates:[103.8194992,1.357107],count:5},{year:2015,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2015,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:1},{year:2015,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:2},{year:2016,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:8},{year:2016,country:"Tunisia",coordinates:[10.1857757,36.8002068],count:1},{year:2016,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:4},{year:2016,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:4},{year:2016,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:2016,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:1},{year:2016,country:"Sri Lanka",coordinates:[80.7137847,7.5554942],count:2},{year:2016,country:"Brazil",coordinates:[-53.2,-10.3333333],count:8},{year:2016,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:17},{year:2016,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:2016,country:"UK/Russia",coordinates:[131.8853995,43.1154578],count:2},{year:2016,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:22},{year:2016,country:"Thailand",coordinates:[100.83273,14.8971921],count:4},{year:2016,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2016,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2016,country:"S Africa",coordinates:[24.991639,-28.8166236],count:2},{year:2016,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:2},{year:2016,country:"Myanmar",coordinates:[95.9999652,17.1750495],count:3},{year:2016,country:"UAE",coordinates:[53.9994829,24.0002488],count:13},{year:2016,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2016,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:18},{year:2016,country:"Latvia",coordinates:[24.7537645,56.8406494],count:2},{year:2016,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:8},{year:2016,country:"UK/Kenya",coordinates:[-.9992158000000002,51.45209565],count:1},{year:2016,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:1},{year:2016,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:3},{year:2016,country:"Nepal/India",coordinates:[80.35667930232923,29.529587794055164],count:1},{year:2016,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:2},{year:2016,country:"USA/Russia",coordinates:[-75.082283,43.258706],count:1},{year:2016,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:2},{year:2016,country:"Finland",coordinates:[25.9209164,63.2467777],count:5},{year:2016,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2016,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2016,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:22},{year:2016,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:2016,country:"USA/Iran",coordinates:[-104.75191589611418,39.777073583989576],count:1},{year:2016,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:1},{year:2016,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:1},{year:2016,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2017,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:5},{year:2017,country:"Nepal",coordinates:[83.9999901,28.3780464],count:976},{year:2017,country:"USA",coordinates:[-100.445882,39.7837304],count:174},{year:2017,country:"Italy",coordinates:[12.674297,42.6384261],count:46},{year:2017,country:"Russia",coordinates:[97.7453061,64.6863136],count:79},{year:2017,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:21},{year:2017,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:7},{year:2017,country:"Spain",coordinates:[-4.8379791,39.3260685],count:69},{year:2017,country:"Canada",coordinates:[-107.991707,61.0666922],count:21},{year:2017,country:"Poland",coordinates:[19.134422,52.215933],count:51},{year:2017,country:"UK",coordinates:[20.5447525,6.3110548],count:109},{year:2017,country:"Germany",coordinates:[10.4478313,51.1638175],count:89},{year:2017,country:"Sweden",coordinates:[14.5208584,59.6749712],count:12},{year:2017,country:"Israel",coordinates:[34.8594762,30.8124247],count:7},{year:2017,country:"Australia",coordinates:[134.755,-24.7761086],count:60},{year:2017,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:25},{year:2017,country:"France",coordinates:[1.8883335,46.603354],count:103},{year:2017,country:"Singapore",coordinates:[103.8194992,1.357107],count:9},{year:2017,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2017,country:"India",coordinates:[78.6677428,22.3511148],count:148},{year:2017,country:"China",coordinates:[104.999955,35.0000663],count:231},{year:2017,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:1},{year:2017,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:12},{year:2017,country:"Iran",coordinates:[54.5643516,32.6475314],count:19},{year:2017,country:"Finland",coordinates:[25.9209164,63.2467777],count:4},{year:2017,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:37},{year:2017,country:"Austria",coordinates:[14.12456,47.59397],count:54},{year:2017,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:51},{year:2017,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2017,country:"Ireland",coordinates:[-7.9794599,52.865196],count:14},{year:2017,country:"Japan",coordinates:[139.2394179,36.5748441],count:54},{year:2017,country:"S Africa",coordinates:[24.991639,-28.8166236],count:6},{year:2017,country:"France/USA",coordinates:[-97.0696914,32.7569047],count:1},{year:2017,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2017,country:"Belgium",coordinates:[4.6667145,50.6402809],count:15},{year:2017,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2017,country:"UK/Russia",coordinates:[131.8853995,43.1154578],count:2},{year:2017,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:8},{year:2017,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:2017,country:"S Korea",coordinates:[127.6961188,36.638392],count:45},{year:2017,country:"Hungary",coordinates:[19.5060937,47.1817585],count:8},{year:2017,country:"Romania",coordinates:[24.6859225,45.9852129],count:9},{year:2017,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:6},{year:2017,country:"UK/Nepal",coordinates:[.46312329816569264,50.8583293],count:1},{year:2017,country:"Denmark",coordinates:[10.3333283,55.670249],count:5},{year:2017,country:"S Africa/Zambia",coordinates:[28.350092474716764,-15.432406799999999],count:1},{year:2017,country:"Greece",coordinates:[21.9877132,38.9953683],count:4},{year:2017,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:36},{year:2017,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:4},{year:2017,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:2},{year:2017,country:"Pakistan",coordinates:[71.247499,30.3308401],count:4},{year:2017,country:"Dominican Republic",coordinates:[-70.3028026,19.0974031],count:2},{year:2017,country:"USA/Ireland",coordinates:[-86.9994455,38.4147739],count:1},{year:2017,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:3},{year:2017,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:2},{year:2017,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:10},{year:2017,country:"Brazil",coordinates:[-53.2,-10.3333333],count:4},{year:2017,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:6},{year:2017,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:3},{year:2017,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:1},{year:2017,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:4},{year:2017,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:2},{year:2017,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:2},{year:2017,country:"Malta",coordinates:[14.4476911,35.8885993],count:2},{year:2017,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:23},{year:2017,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:13},{year:2017,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2017,country:"Poland/USA",coordinates:[-80.614795,41.024226],count:1},{year:2017,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2017,country:"USA/Iran",coordinates:[-104.75191589611418,39.777073583989576],count:1},{year:2017,country:"Hungary/Romania",coordinates:[21.25791,45.759501],count:1},{year:2017,country:"Sri Lanka",coordinates:[80.7137847,7.5554942],count:2},{year:2017,country:"Myanmar",coordinates:[95.9999652,17.1750495],count:3},{year:2017,country:"USA/Romania",coordinates:[-79.0447485,39.7934153],count:1},{year:2017,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:4},{year:2017,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:1},{year:2017,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2017,country:"Germany/Switzerland",coordinates:[7.7206311,48.2667198],count:1},{year:2018,country:"S Korea",coordinates:[127.6961188,36.638392],count:22},{year:2018,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1165},{year:2018,country:"Ireland",coordinates:[-7.9794599,52.865196],count:12},{year:2018,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:28},{year:2018,country:"France",coordinates:[1.8883335,46.603354],count:111},{year:2018,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:7},{year:2018,country:"Hungary",coordinates:[19.5060937,47.1817585],count:7},{year:2018,country:"USA",coordinates:[-100.445882,39.7837304],count:203},{year:2018,country:"Romania",coordinates:[24.6859225,45.9852129],count:16},{year:2018,country:"Australia",coordinates:[134.755,-24.7761086],count:70},{year:2018,country:"UK",coordinates:[20.5447525,6.3110548],count:133},{year:2018,country:"Germany",coordinates:[10.4478313,51.1638175],count:86},{year:2018,country:"Italy",coordinates:[12.674297,42.6384261],count:38},{year:2018,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:3},{year:2018,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:2018,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:15},{year:2018,country:"Sweden",coordinates:[14.5208584,59.6749712],count:16},{year:2018,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:2},{year:2018,country:"India",coordinates:[78.6677428,22.3511148],count:140},{year:2018,country:"Spain",coordinates:[-4.8379791,39.3260685],count:65},{year:2018,country:"Poland",coordinates:[19.134422,52.215933],count:54},{year:2018,country:"China",coordinates:[104.999955,35.0000663],count:195},{year:2018,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:6},{year:2018,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:13},{year:2018,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:15},{year:2018,country:"Canada",coordinates:[-107.991707,61.0666922],count:38},{year:2018,country:"Austria",coordinates:[14.12456,47.59397],count:48},{year:2018,country:"Denmark",coordinates:[10.3333283,55.670249],count:4},{year:2018,country:"S Africa",coordinates:[24.991639,-28.8166236],count:7},{year:2018,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:2},{year:2018,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:15},{year:2018,country:"Singapore",coordinates:[103.8194992,1.357107],count:7},{year:2018,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:3},{year:2018,country:"Brazil",coordinates:[-53.2,-10.3333333],count:14},{year:2018,country:"USA/Romania",coordinates:[-79.0447485,39.7934153],count:2},{year:2018,country:"Algeria",coordinates:[2.9999825,28.0000272],count:2},{year:2018,country:"UK/India",coordinates:[79.089691,30.0417376],count:2},{year:2018,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:30},{year:2018,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:22},{year:2018,country:"Sri Lanka",coordinates:[80.7137847,7.5554942],count:1},{year:2018,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:2},{year:2018,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:65},{year:2018,country:"Russia",coordinates:[97.7453061,64.6863136],count:67},{year:2018,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:4},{year:2018,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:2018,country:"Iran",coordinates:[54.5643516,32.6475314],count:3},{year:2018,country:"Belgium",coordinates:[4.6667145,50.6402809],count:26},{year:2018,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:4},{year:2018,country:"Japan",coordinates:[139.2394179,36.5748441],count:96},{year:2018,country:"USA/Ireland",coordinates:[-86.9994455,38.4147739],count:1},{year:2018,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:12},{year:2018,country:"Finland",coordinates:[25.9209164,63.2467777],count:7},{year:2018,country:"Paraguay/Germany",coordinates:[-57.562712,-25.284477],count:1},{year:2018,country:"Indonesia",coordinates:[117.8902853,-2.4833826],count:3},{year:2004,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2018,country:"Israel",coordinates:[34.8594762,30.8124247],count:5},{year:2018,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:1},{year:2018,country:"Greece",coordinates:[21.9877132,38.9953683],count:5},{year:2018,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:1},{year:2018,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2018,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:3},{year:2018,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:2},{year:2018,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2018,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:1},{year:2017,country:"USA/Colombia",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2018,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:2},{year:2018,country:"Chile/Sweden",coordinates:[-70.6065552,-33.4207246],count:1},{year:2018,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:4},{year:2018,country:"UK/Lebanon",coordinates:[-.19219774022293687,51.50789595],count:1},{year:2018,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2018,country:"Australia/Sweden",coordinates:[149.11496853585635,-35.30911545],count:3},{year:2018,country:"Canada/Russia",coordinates:[40.11713395000001,57.54157035],count:1},{year:2018,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:1},{year:2018,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2018,country:"UAE",coordinates:[53.9994829,24.0002488],count:3},{year:2018,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2018,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2018,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2018,country:"Switzerland/France",coordinates:[7.7678483472198785,48.588962249999994],count:3},{year:2018,country:"Denmark/Australia",coordinates:[117.3551157,-34.9604365],count:2},{year:2018,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2018,country:"UK/Argentina",coordinates:[null,null],count:1},{year:2018,country:"Spain/Venezuela",coordinates:[-16.2712233,28.4681785],count:1},{year:2018,country:"Ecuador/Germany",coordinates:[-78.4789616,-.177577],count:1},{year:2018,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:5},{year:2018,country:"Lithuania/USA",coordinates:[25.971696311589092,55.3021926],count:1},{year:2019,country:"Spain",coordinates:[-4.8379791,39.3260685],count:82},{year:2019,country:"USA/Colombia",coordinates:[-73.86161701666221,40.735546850000006],count:2},{year:2019,country:"USA",coordinates:[-100.445882,39.7837304],count:255},{year:2019,country:"Germany",coordinates:[10.4478313,51.1638175],count:95},{year:2019,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:49},{year:2019,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1402},{year:2019,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:13},{year:2019,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:2},{year:2019,country:"Russia",coordinates:[97.7453061,64.6863136],count:67},{year:2019,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:17},{year:2019,country:"UK",coordinates:[20.5447525,6.3110548],count:143},{year:2019,country:"Romania",coordinates:[24.6859225,45.9852129],count:17},{year:2019,country:"Australia",coordinates:[134.755,-24.7761086],count:64},{year:2019,country:"Andorra",coordinates:[1.5732033,42.5407167],count:4},{year:2019,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2019,country:"S Korea",coordinates:[127.6961188,36.638392],count:21},{year:2019,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:20},{year:2019,country:"Canada",coordinates:[-107.991707,61.0666922],count:45},{year:2019,country:"Poland",coordinates:[19.134422,52.215933],count:68},{year:2019,country:"France",coordinates:[1.8883335,46.603354],count:103},{year:2019,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:9},{year:2019,country:"Austria",coordinates:[14.12456,47.59397],count:33},{year:2019,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:25},{year:2019,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:2},{year:2019,country:"Italy",coordinates:[12.674297,42.6384261],count:54},{year:2019,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2019,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:2},{year:2019,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2019,country:"China",coordinates:[104.999955,35.0000663],count:172},{year:2019,country:"Japan",coordinates:[139.2394179,36.5748441],count:60},{year:2019,country:"India",coordinates:[78.6677428,22.3511148],count:155},{year:2019,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:2},{year:2019,country:"Belgium",coordinates:[4.6667145,50.6402809],count:7},{year:2019,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:13},{year:2019,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:2},{year:2019,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:26},{year:2019,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:9},{year:2019,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:4},{year:2019,country:"Syria",coordinates:[38.42317811509885,34.8147886],count:1},{year:2019,country:"Greece",coordinates:[21.9877132,38.9953683],count:10},{year:2019,country:"UK/India",coordinates:[79.089691,30.0417376],count:1},{year:2019,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:4},{year:2019,country:"UK/Iceland",coordinates:[-.4237818347131829,51.57313555],count:1},{year:2019,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:8},{year:2019,country:"Oman",coordinates:[57.0036901,21.0000287],count:1},{year:2019,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:9},{year:2019,country:"Egypt",coordinates:[29.2675469,26.2540493],count:1},{year:2019,country:"Saudi Arabia",coordinates:[42.3528328,25.6242618],count:2},{year:2019,country:"Dominican Republic",coordinates:[-70.3028026,19.0974031],count:1},{year:2019,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:24},{year:2019,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:1},{year:2019,country:"Iran",coordinates:[54.5643516,32.6475314],count:11},{year:2019,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:1},{year:2019,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:10},{year:2019,country:"Qatar",coordinates:[51.2295295,25.3336984],count:2},{year:2019,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:6},{year:2019,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:3},{year:2019,country:"Singapore",coordinates:[103.8194992,1.357107],count:5},{year:2019,country:"Brazil",coordinates:[-53.2,-10.3333333],count:15},{year:2019,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:4},{year:2019,country:"Botswana",coordinates:[24.5928742,-23.1681782],count:1},{year:2019,country:"Ireland",coordinates:[-7.9794599,52.865196],count:12},{year:2019,country:"S Africa/Zambia",coordinates:[28.350092474716764,-15.432406799999999],count:1},{year:2019,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:7},{year:2019,country:"Pakistan",coordinates:[71.247499,30.3308401],count:7},{year:2019,country:"USA/Ethiopia",coordinates:[-77.06699120830925,38.94120375],count:2},{year:2019,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:1},{year:2019,country:"Serbia/Jordan",coordinates:[null,null],count:1},{year:2019,country:"Finland",coordinates:[25.9209164,63.2467777],count:4},{year:2019,country:"Moldova",coordinates:[28.5670941,47.2879608],count:2},{year:2019,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2019,country:"Azerbaijan",coordinates:[47.7872508,40.3936294],count:1},{year:2019,country:"Argentina/Canada",coordinates:[-65.31826937693847,-24.190240299791608],count:1},{year:2019,country:"Netherlands/Switzerland",coordinates:[4.312617,52.083392],count:1},{year:2019,country:"Switzerland/France",coordinates:[7.7678483472198785,48.588962249999994],count:2},{year:2019,country:"Italy/Slovenia",coordinates:[13.57942348726339,46.426770395039696],count:2},{year:2019,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:11},{year:2019,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:3},{year:2019,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2019,country:"USA/Romania",coordinates:[-79.0447485,39.7934153],count:1},{year:2019,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:1},{year:2019,country:"Sweden",coordinates:[14.5208584,59.6749712],count:12},{year:2019,country:"USA/Russia",coordinates:[-75.082283,43.258706],count:2},{year:2019,country:"Thailand",coordinates:[100.83273,14.8971921],count:9},{year:2019,country:"UK/Argentina",coordinates:[null,null],count:1},{year:2019,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:4},{year:2019,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:5},{year:2019,country:"Hungary",coordinates:[19.5060937,47.1817585],count:7},{year:2019,country:"USA/Pakistan",coordinates:[-77.06803341791479,38.943514300000004],count:1},{year:2019,country:"USA/Poland",coordinates:[-80.614795,41.024226],count:1},{year:2019,country:"Australia/New Zealand",coordinates:[174.7190716,-36.8622961],count:1},{year:2019,country:"S Africa",coordinates:[24.991639,-28.8166236],count:2},{year:2020,country:"China",coordinates:[104.999955,35.0000663],count:58},{year:2019,country:"UAE",coordinates:[53.9994829,24.0002488],count:16},{year:2019,country:"Croatia",coordinates:[15.6575209,45.3658443],count:1},{year:2019,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:2},{year:2019,country:"Philippines",coordinates:[122.7312101,12.7503486],count:3},{year:2019,country:"Israel",coordinates:[34.8594762,30.8124247],count:3},{year:2019,country:"Spain/Venezuela",coordinates:[-16.2712233,28.4681785],count:1},{year:2019,country:"Estonia",coordinates:[25.3319078,58.7523778],count:1},{year:2019,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2019,country:"Mongolia/Australia",coordinates:[149.10509339257163,-35.35391445],count:1},{year:2019,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:1},{year:2020,country:"Nepal",coordinates:[83.9999901,28.3780464],count:113},{year:2020,country:"Russia",coordinates:[97.7453061,64.6863136],count:2},{year:2020,country:"France",coordinates:[1.8883335,46.603354],count:3},{year:2020,country:"Poland",coordinates:[19.134422,52.215933],count:2},{year:2020,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:2},{year:2020,country:"USA/Germany",coordinates:[-79.1166983,40.4203479],count:1},{year:2020,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:2},{year:2020,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:1},{year:2020,country:"Canada",coordinates:[-107.991707,61.0666922],count:2},{year:2020,country:"USA",coordinates:[-100.445882,39.7837304],count:6},{year:2020,country:"Qatar",coordinates:[51.2295295,25.3336984],count:2},{year:2020,country:"UK",coordinates:[20.5447525,6.3110548],count:9},{year:2020,country:"UK/Iran",coordinates:[-.17233465172285267,51.50145205],count:1},{year:2020,country:"Italy",coordinates:[12.674297,42.6384261],count:3},{year:2020,country:"Belgium",coordinates:[4.6667145,50.6402809],count:1},{year:2020,country:"India",coordinates:[78.6677428,22.3511148],count:5},{year:2020,country:"Austria",coordinates:[14.12456,47.59397],count:1},{year:2020,country:"Oman",coordinates:[57.0036901,21.0000287],count:1},{year:2020,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:1},{year:2020,country:"Egypt",coordinates:[29.2675469,26.2540493],count:1},{year:2020,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2020,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2020,country:"UAE",coordinates:[53.9994829,24.0002488],count:1},{year:2020,country:"UK/Jordan",coordinates:[-3.8360313,50.5608347],count:1},{year:2020,country:"Romania",coordinates:[24.6859225,45.9852129],count:1},{year:2020,country:"Bahrain",coordinates:[50.553336789123236,26.030093],count:15},{year:2020,country:"Spain",coordinates:[-4.8379791,39.3260685],count:2},{year:2021,country:"Italy",coordinates:[12.674297,42.6384261],count:35},{year:2021,country:"Romania",coordinates:[24.6859225,45.9852129],count:21},{year:2021,country:"Iraq",coordinates:[44.1749775,33.0955793],count:1},{year:2021,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2021,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:12},{year:2021,country:"India",coordinates:[78.6677428,22.3511148],count:131},{year:2021,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:4},{year:2021,country:"Germany",coordinates:[10.4478313,51.1638175],count:74},{year:2021,country:"Kenya",coordinates:[38.4313975,1.4419683],count:2},{year:2021,country:"Israel",coordinates:[34.8594762,30.8124247],count:7},{year:2021,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:15},{year:2021,country:"Nepal",coordinates:[83.9999901,28.3780464],count:813},{year:2021,country:"Russia",coordinates:[97.7453061,64.6863136],count:74},{year:2021,country:"Finland",coordinates:[25.9209164,63.2467777],count:13},{year:2021,country:"USA",coordinates:[-100.445882,39.7837304],count:194},{year:2021,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:36},{year:2021,country:"Hungary",coordinates:[19.5060937,47.1817585],count:9},{year:2021,country:"Belarus",coordinates:[27.6971358,53.4250605],count:3},{year:2021,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:11},{year:2021,country:"Brazil",coordinates:[-53.2,-10.3333333],count:18},{year:2021,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:2},{year:2021,country:"Greece",coordinates:[21.9877132,38.9953683],count:6},{year:2021,country:"Poland",coordinates:[19.134422,52.215933],count:25},{year:2021,country:"USA/Germany",coordinates:[-79.1166983,40.4203479],count:2},{year:2021,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:6},{year:2021,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:2},{year:2021,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2021,country:"S Korea",coordinates:[127.6961188,36.638392],count:18},{year:2021,country:"Spain",coordinates:[-4.8379791,39.3260685],count:42},{year:2021,country:"Andorra",coordinates:[1.5732033,42.5407167],count:3},{year:2021,country:"Canada",coordinates:[-107.991707,61.0666922],count:27},{year:2021,country:"China",coordinates:[104.999955,35.0000663],count:45},{year:2021,country:"Pakistan",coordinates:[71.247499,30.3308401],count:6},{year:2021,country:"France",coordinates:[1.8883335,46.603354],count:118},{year:2021,country:"Austria",coordinates:[14.12456,47.59397],count:27},{year:2021,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:33},{year:2021,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:2},{year:2021,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:38},{year:2021,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:3},{year:2021,country:"Japan",coordinates:[139.2394179,36.5748441],count:14},{year:2021,country:"UK",coordinates:[20.5447525,6.3110548],count:69},{year:2021,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2021,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:3},{year:2021,country:"Iran",coordinates:[54.5643516,32.6475314],count:12},{year:2021,country:"Colombia",coordinates:[-72.9088133,4.099917],count:2},{year:2021,country:"Estonia",coordinates:[25.3319078,58.7523778],count:2},{year:2021,country:"Ireland",coordinates:[-7.9794599,52.865196],count:11},{year:2021,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:1},{year:2021,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:14},{year:2021,country:"UK/Iran",coordinates:[-.17233465172285267,51.50145205],count:2},{year:2021,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:15},{year:2021,country:"UAE",coordinates:[53.9994829,24.0002488],count:2},{year:2021,country:"Tanzania",coordinates:[35.7878438,-6.5247123],count:1},{year:2021,country:"S Africa/Portugal",coordinates:[-16.9352707,32.6453079],count:1},{year:2021,country:"Sweden",coordinates:[14.5208584,59.6749712],count:8},{year:2021,country:"USA/Lativa",coordinates:[24.0789719,56.9436925],count:1},{year:2021,country:"Qatar",coordinates:[51.2295295,25.3336984],count:4},{year:2021,country:"Croatia",coordinates:[15.6575209,45.3658443],count:2},{year:2021,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:7},{year:2021,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:1},{year:2021,country:"S Africa",coordinates:[24.991639,-28.8166236],count:6},{year:2021,country:"Australia",coordinates:[134.755,-24.7761086],count:5},{year:2021,country:"Thailand",coordinates:[100.83273,14.8971921],count:2},{year:2021,country:"Uzbekistan",coordinates:[63.9528098,41.32373],count:2},{year:2021,country:"Luxembourg",coordinates:[6.129799,49.6112768],count:2},{year:2021,country:"S Africa/Ukraine",coordinates:[30.6397553,50.4216779],count:1},{year:2021,country:"USA/Iran",coordinates:[-104.75191589611418,39.777073583989576],count:2},{year:2021,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:2},{year:2021,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:2},{year:2021,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:3},{year:2021,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:1},{year:2021,country:"Moldova",coordinates:[28.5670941,47.2879608],count:1},{year:2021,country:"USA/New Zealand",coordinates:[-77.0642312,38.9190048],count:1},{year:2021,country:"Bahrain",coordinates:[50.553336789123236,26.030093],count:13},{year:2021,country:"Latvia",coordinates:[24.7537645,56.8406494],count:8},{year:2021,country:"Tajikistan",coordinates:[70.8156541,38.6281733],count:1},{year:2021,country:"Denmark",coordinates:[10.3333283,55.670249],count:7},{year:2021,country:"Cuba",coordinates:[-80.8328748,23.0131338],count:1},{year:2021,country:"Montenegro",coordinates:[-51.4687455,-29.6826112],count:1},{year:2021,country:"El Salvador",coordinates:[-88.9140683,13.8000382],count:1},{year:2021,country:"Canada/Portugal",coordinates:[-75.58567989685872,5.743566581153739],count:1},{year:2021,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2021,country:"UK/Jordan",coordinates:[-3.8360313,50.5608347],count:1},{year:2021,country:"Palestine",coordinates:[-95.6307891,31.7621153],count:1},{year:2021,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:8},{year:2021,country:"Singapore",coordinates:[103.8194992,1.357107],count:7},{year:2021,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:3},{year:2021,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:1},{year:2021,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:3},{year:2021,country:"Oman",coordinates:[57.0036901,21.0000287],count:2},{year:2021,country:"Canada/Russia",coordinates:[40.11713395000001,57.54157035],count:1},{year:2021,country:"Belgium",coordinates:[4.6667145,50.6402809],count:5},{year:2021,country:"UK/USA",coordinates:[.1258329,52.2153827],count:1},{year:2021,country:"Russia/USA",coordinates:[-75.082283,43.258706],count:1},{year:2021,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:2021,country:"UK/Spain",coordinates:[-.15367460925139123,51.4976427],count:3},{year:2021,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:2},{year:2021,country:"Russia/Ukraine",coordinates:[37.60625889397789,55.760808999999995],count:1},{year:2021,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:1},{year:2021,country:"Libya",coordinates:[18.1236723,26.8234472],count:1},{year:2021,country:"USA/Romania",coordinates:[-79.0447485,39.7934153],count:2},{year:2021,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:8},{year:2021,country:"Ecuador/Germany",coordinates:[-78.4789616,-.177577],count:1},{year:2021,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:1},{year:2021,country:"USA/Pakistan",coordinates:[-77.06803341791479,38.943514300000004],count:1},{year:2021,country:"USA/Cuba",coordinates:[-97.455872,39.802781],count:1},{year:2022,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:9},{year:2022,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:4},{year:2022,country:"Poland",coordinates:[19.134422,52.215933],count:56},{year:2022,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:34},{year:2022,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:34},{year:2022,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:6},{year:2022,country:"Spain",coordinates:[-4.8379791,39.3260685],count:102},{year:2022,country:"Romania",coordinates:[24.6859225,45.9852129],count:22},{year:2022,country:"USA",coordinates:[-100.445882,39.7837304],count:258},{year:2022,country:"Australia",coordinates:[134.755,-24.7761086],count:74},{year:2022,country:"Hungary",coordinates:[19.5060937,47.1817585],count:10},{year:2022,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1179},{year:2022,country:"Canada",coordinates:[-107.991707,61.0666922],count:63},{year:2022,country:"Greece",coordinates:[21.9877132,38.9953683],count:5},{year:2022,country:"UK",coordinates:[20.5447525,6.3110548],count:209},{year:2022,country:"France",coordinates:[1.8883335,46.603354],count:136},{year:2022,country:"India",coordinates:[78.6677428,22.3511148],count:114},{year:2022,country:"Iran",coordinates:[54.5643516,32.6475314],count:45},{year:2022,country:"Austria",coordinates:[14.12456,47.59397],count:50},{year:2022,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:6},{year:2022,country:"Italy",coordinates:[12.674297,42.6384261],count:50},{year:2022,country:"Croatia",coordinates:[15.6575209,45.3658443],count:7},{year:2022,country:"Japan",coordinates:[139.2394179,36.5748441],count:43},{year:2022,country:"Ireland",coordinates:[-7.9794599,52.865196],count:21},{year:2022,country:"Finland",coordinates:[25.9209164,63.2467777],count:8},{year:2022,country:"Russia",coordinates:[97.7453061,64.6863136],count:85},{year:2022,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:9},{year:2022,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:5},{year:2022,country:"China",coordinates:[104.999955,35.0000663],count:72},{year:2022,country:"Brazil",coordinates:[-53.2,-10.3333333],count:13},{year:2022,country:"Sweden",coordinates:[14.5208584,59.6749712],count:19},{year:2022,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:24},{year:2022,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:57},{year:2022,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:7},{year:2022,country:"Germany",coordinates:[10.4478313,51.1638175],count:87},{year:2022,country:"Denmark",coordinates:[10.3333283,55.670249],count:8},{year:2022,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:3},{year:2022,country:"Israel",coordinates:[34.8594762,30.8124247],count:12},{year:2022,country:"Egypt",coordinates:[29.2675469,26.2540493],count:1},{year:2022,country:"USA/India",coordinates:[-79.1194757,40.3764599],count:3},{year:2022,country:"S Africa",coordinates:[24.991639,-28.8166236],count:7},{year:2022,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:29},{year:2022,country:"UK/Iran",coordinates:[-.17233465172285267,51.50145205],count:3},{year:2022,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:1},{year:2022,country:"Canada/Portugal",coordinates:[-75.58567989685872,5.743566581153739],count:1},{year:2022,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:4},{year:2022,country:"Kenya",coordinates:[38.4313975,1.4419683],count:4},{year:2022,country:"UAE",coordinates:[53.9994829,24.0002488],count:27},{year:2022,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:14},{year:2022,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:21},{year:2022,country:"Oman",coordinates:[57.0036901,21.0000287],count:2},{year:2022,country:"S Korea",coordinates:[127.6961188,36.638392],count:43},{year:2022,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:3},{year:2022,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:2},{year:2022,country:"Venezuela",coordinates:[-66.1109318,8.0018709],count:2},{year:2022,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:13},{year:2022,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:7},{year:2022,country:"El Salvador",coordinates:[-88.9140683,13.8000382],count:2},{year:2022,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:3},{year:2022,country:"Qatar",coordinates:[51.2295295,25.3336984],count:3},{year:2022,country:"Saudi Arabia",coordinates:[42.3528328,25.6242618],count:2},{year:2022,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:9},{year:2022,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:2022,country:"USA/Pakistan",coordinates:[-77.06803341791479,38.943514300000004],count:2},{year:2022,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:8},{year:2022,country:"Pakistan",coordinates:[71.247499,30.3308401],count:11},{year:2022,country:"Thailand",coordinates:[100.83273,14.8971921],count:9},{year:2022,country:"Singapore",coordinates:[103.8194992,1.357107],count:12},{year:2022,country:"Belgium",coordinates:[4.6667145,50.6402809],count:21},{year:2022,country:"Iraq",coordinates:[44.1749775,33.0955793],count:6},{year:2022,country:"Nepal/Australia",coordinates:[145.2356492881158,-37.85149682763395],count:2},{year:2022,country:"Honduras",coordinates:[-86.0755145,15.2572432],count:2},{year:2022,country:"Malaysi",coordinates:[102.2656823,4.5693754],count:1},{year:2022,country:"UK/S Africa",coordinates:[-2.49020920207643,53.9056772],count:1},{year:2016,country:"Colombia/USA",coordinates:[-73.86161701666221,40.735546850000006],count:1},{year:2022,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:8},{year:2022,country:"Andorra",coordinates:[1.5732033,42.5407167],count:2},{year:2022,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:2},{year:2022,country:"USA/Canada",coordinates:[-82.3243095,37.6056575],count:4},{year:2022,country:"Turkey",coordinates:[34.9249653,38.9597594],count:4},{year:2022,country:"Latvia",coordinates:[24.7537645,56.8406494],count:1},{year:2022,country:"USA/Ukraine",coordinates:[-77.06753166658109,38.9047889],count:2},{year:2022,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:1},{year:2022,country:"Estonia",coordinates:[25.3319078,58.7523778],count:3},{year:2022,country:"Australia/Sweden",coordinates:[149.11496853585635,-35.30911545],count:1},{year:2022,country:"Russia/Ukraine",coordinates:[37.60625889397789,55.760808999999995],count:1},{year:2022,country:"Azerbaijan",coordinates:[47.7872508,40.3936294],count:1},{year:2022,country:"Spain/Venezuela",coordinates:[-16.2712233,28.4681785],count:1},{year:2022,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:11},{year:2022,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:2},{year:2022,country:"UK/Spain",coordinates:[-.15367460925139123,51.4976427],count:3},{year:2022,country:"Germany/UK",coordinates:[-.15447594843356496,51.49801275],count:1},{year:2022,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:19},{year:2022,country:"Panama",coordinates:[-81.1308434,8.559559],count:1},{year:2022,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:2},{year:2022,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:1},{year:2022,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:2},{year:2022,country:"USA/UKraine",coordinates:[-77.06753166658109,38.9047889],count:1},{year:2022,country:"Spain/Brazil",coordinates:[-3.694472,40.4281125],count:1},{year:2022,country:"UK/Sri Lanka",coordinates:[79.8620169,6.87036],count:1},{year:2022,country:"Russia/USA",coordinates:[-75.082283,43.258706],count:1},{year:2022,country:"Denmark/Australia",coordinates:[117.3551157,-34.9604365],count:1},{year:2023,country:"Canada",coordinates:[-107.991707,61.0666922],count:73},{year:2023,country:"Australia",coordinates:[134.755,-24.7761086],count:68},{year:2023,country:"USA",coordinates:[-100.445882,39.7837304],count:282},{year:2023,country:"Singapore",coordinates:[103.8194992,1.357107],count:18},{year:2023,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:33},{year:2023,country:"Germany",coordinates:[10.4478313,51.1638175],count:99},{year:2023,country:"Romania",coordinates:[24.6859225,45.9852129],count:22},{year:2023,country:"Italy",coordinates:[12.674297,42.6384261],count:32},{year:2023,country:"UK/Switzerland",coordinates:[-.1605900915923223,51.5184448],count:1},{year:2023,country:"India",coordinates:[78.6677428,22.3511148],count:125},{year:2023,country:"France",coordinates:[1.8883335,46.603354],count:125},{year:2023,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:17},{year:2023,country:"S Africa",coordinates:[24.991639,-28.8166236],count:13},{year:2023,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:4},{year:2023,country:"Nepal",coordinates:[83.9999901,28.3780464],count:1298},{year:2023,country:"Iran",coordinates:[54.5643516,32.6475314],count:32},{year:2023,country:"S Korea",coordinates:[127.6961188,36.638392],count:25},{year:2023,country:"Thailand",coordinates:[100.83273,14.8971921],count:5},{year:2023,country:"UK",coordinates:[20.5447525,6.3110548],count:116},{year:2023,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:3},{year:2023,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:30},{year:2023,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:3},{year:2023,country:"Russia",coordinates:[97.7453061,64.6863136],count:107},{year:2023,country:"Austria",coordinates:[14.12456,47.59397],count:47},{year:2023,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:19},{year:2023,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:29},{year:2023,country:"Finland",coordinates:[25.9209164,63.2467777],count:10},{year:2023,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:63},{year:2023,country:"Japan",coordinates:[139.2394179,36.5748441],count:79},{year:2023,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:6},{year:2023,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:6},{year:2023,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:5},{year:2023,country:"China",coordinates:[104.999955,35.0000663],count:229},{year:2023,country:"UK/Nepal",coordinates:[.46312329816569264,50.8583293],count:14},{year:2023,country:"Qatar",coordinates:[51.2295295,25.3336984],count:3},{year:2023,country:"USA/Ukraine",coordinates:[-77.06753166658109,38.9047889],count:9},{year:2023,country:"Pakistan",coordinates:[71.247499,30.3308401],count:18},{year:2023,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:3},{year:2023,country:"Brazil",coordinates:[-53.2,-10.3333333],count:20},{year:2023,country:"Ireland",coordinates:[-7.9794599,52.865196],count:16},{year:2023,country:"Poland",coordinates:[19.134422,52.215933],count:65},{year:2023,country:"USA/Pakistan",coordinates:[-77.06803341791479,38.943514300000004],count:1},{year:2023,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:6},{year:2023,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:10},{year:2023,country:"Israel",coordinates:[34.8594762,30.8124247],count:10},{year:2023,country:"Spain",coordinates:[-4.8379791,39.3260685],count:45},{year:2023,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:21},{year:2023,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:4},{year:2023,country:"Greece",coordinates:[21.9877132,38.9953683],count:3},{year:2023,country:"Cyprus/Russia",coordinates:[33.34022527079303,35.16542375],count:2},{year:2023,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:6},{year:2023,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:4},{year:2023,country:"Hungary",coordinates:[19.5060937,47.1817585],count:7},{year:2023,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:2},{year:2023,country:"Nepal/USA",coordinates:[-77.04796326145569,38.9156045],count:2},{year:2023,country:"UAE",coordinates:[53.9994829,24.0002488],count:2},{year:2023,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:5},{year:2023,country:"Kuwait",coordinates:[47.9734174,29.3796532],count:3},{year:2023,country:"Uruguay",coordinates:[-56.0201525,-32.8755548],count:1},{year:2023,country:"USA/Jamaica",coordinates:[-73.8006429,40.7029134],count:2},{year:2023,country:"Estonia",coordinates:[25.3319078,58.7523778],count:9},{year:2023,country:"UK/Iran",coordinates:[-.17233465172285267,51.50145205],count:1},{year:2023,country:"Afghanistan/USA",coordinates:[-77.05221767096326,38.91721095],count:1},{year:2023,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:19},{year:2023,country:"Ukraine/Azerbaijan",coordinates:[30.490679914180106,50.46085275],count:1},{year:2023,country:"Moldova",coordinates:[28.5670941,47.2879608],count:4},{year:2023,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:8},{year:2023,country:"Latvia",coordinates:[24.7537645,56.8406494],count:3},{year:2023,country:"Denmark",coordinates:[10.3333283,55.670249],count:32},{year:2023,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:5},{year:2023,country:"Slovenia",coordinates:[14.8153333,46.1199444],count:5},{year:2023,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:1},{year:2023,country:"Kenya",coordinates:[38.4313975,1.4419683],count:3},{year:2023,country:"Belgium",coordinates:[4.6667145,50.6402809],count:5},{year:2023,country:"Germany/UK",coordinates:[-.15447594843356496,51.49801275],count:1},{year:2023,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:4},{year:2023,country:"Andorra",coordinates:[1.5732033,42.5407167],count:3},{year:2023,country:"S Africa/Ukraine",coordinates:[30.6397553,50.4216779],count:1},{year:2023,country:"Cuba",coordinates:[-80.8328748,23.0131338],count:1},{year:2023,country:"Bosnia-Herzegovina",coordinates:[17.5961467,44.3053476],count:2},{year:2023,country:"Colombia",coordinates:[-72.9088133,4.099917],count:1},{year:2023,country:"USA/Latvia",coordinates:[-77.0511967,38.9117741],count:1},{year:2023,country:"Azerbaijan",coordinates:[47.7872508,40.3936294],count:2},{year:2023,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:6},{year:2023,country:"UK/Sri Lanka",coordinates:[79.8620169,6.87036],count:2},{year:2023,country:"Belarus",coordinates:[27.6971358,53.4250605],count:3},{year:2023,country:"Italy/Slovenia",coordinates:[13.57942348726339,46.426770395039696],count:1},{year:2023,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2023,country:"Canada/Russia",coordinates:[40.11713395000001,57.54157035],count:3},{year:2023,country:"Azerbaijan/Russia",coordinates:[47.31527187346855,41.30413569442996],count:1},{year:2023,country:"Sweden",coordinates:[14.5208584,59.6749712],count:16},{year:2023,country:"UK/Spain",coordinates:[-.15367460925139123,51.4976427],count:2},{year:2023,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:1},{year:2023,country:"Afghanistan",coordinates:[66.2385139,33.7680065],count:3},{year:2023,country:"Norway/Denmark",coordinates:[9.128192346649687,55.73569435],count:2},{year:2023,country:"Kyrgyz Republic/Russia",coordinates:[74.59693591232859,42.87695265],count:1},{year:2023,country:"USA/Ecuador",coordinates:[-77.0350492,38.9231797],count:3},{year:2023,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:4},{year:2023,country:"Guatemala",coordinates:[-90.345759,15.5855545],count:1},{year:2023,country:"Croatia",coordinates:[15.6575209,45.3658443],count:5},{year:2023,country:"Albania",coordinates:[-73.9151617,5.7587654],count:1},{year:2023,country:"USA/Iran",coordinates:[-104.75191589611418,39.777073583989576],count:1},{year:2023,country:"Spain/Brazil",coordinates:[-3.694472,40.4281125],count:1},{year:2023,country:"Russia/Ukraine",coordinates:[37.60625889397789,55.760808999999995],count:1},{year:2023,country:"Portugal",coordinates:[-8.1353519,39.6621648],count:3},{year:2023,country:"USA/UK",coordinates:[.1258329,52.2153827],count:1},{year:2023,country:"Turkey",coordinates:[34.9249653,38.9597594],count:1},{year:2023,country:"France/Luxembourg",coordinates:[2.339808,48.8454719],count:1},{year:2019,country:"Italy/USA",coordinates:[-96.8847194,32.1840381],count:1},{year:2023,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:2},{year:2023,country:"Australia/S Africa",coordinates:[153.12434318519155,-30.29288855],count:2},{year:2023,country:"Egypt",coordinates:[29.2675469,26.2540493],count:1},{year:2023,country:"Algeria",coordinates:[2.9999825,28.0000272],count:1},{year:2024,country:"Vietnam",coordinates:[107.9650855,15.9266657],count:3},{year:2024,country:"Nepal",coordinates:[83.9999901,28.3780464],count:749},{year:2024,country:"Australia",coordinates:[134.755,-24.7761086],count:25},{year:2024,country:"India",coordinates:[78.6677428,22.3511148],count:62},{year:2024,country:"USA",coordinates:[-100.445882,39.7837304],count:133},{year:2024,country:"Malta",coordinates:[14.4476911,35.8885993],count:2},{year:2024,country:"Switzerland",coordinates:[8.2319736,46.7985624],count:24},{year:2024,country:"UK",coordinates:[20.5447525,6.3110548],count:77},{year:2024,country:"Malaysia",coordinates:[102.2656823,4.5693754],count:3},{year:2024,country:"Russia",coordinates:[97.7453061,64.6863136],count:40},{year:2024,country:"China",coordinates:[104.999955,35.0000663],count:116},{year:2024,country:"Germany",coordinates:[10.4478313,51.1638175],count:22},{year:2024,country:"Israel",coordinates:[34.8594762,30.8124247],count:6},{year:2024,country:"Brazil",coordinates:[-53.2,-10.3333333],count:12},{year:2024,country:"S Korea",coordinates:[127.6961188,36.638392],count:12},{year:2024,country:"S Africa",coordinates:[24.991639,-28.8166236],count:16},{year:2024,country:"Philippines",coordinates:[122.7312101,12.7503486],count:1},{year:2024,country:"Canada",coordinates:[-107.991707,61.0666922],count:29},{year:2024,country:"Kazakhstan",coordinates:[66.7780818,48.1012954],count:7},{year:2024,country:"France",coordinates:[1.8883335,46.603354],count:34},{year:2024,country:"Turkey",coordinates:[34.9249653,38.9597594],count:2},{year:2024,country:"Austria",coordinates:[14.12456,47.59397],count:26},{year:2024,country:"Ukraine",coordinates:[31.2718321,49.4871968],count:23},{year:2024,country:"Ireland",coordinates:[-7.9794599,52.865196],count:8},{year:2024,country:"Sweden",coordinates:[14.5208584,59.6749712],count:6},{year:2024,country:"Poland",coordinates:[19.134422,52.215933],count:29},{year:2024,country:"UK/Lebanon",coordinates:[-.19219774022293687,51.50789595],count:1},{year:2024,country:"Chile",coordinates:[-71.3187697,-31.7613365],count:12},{year:2024,country:"New Zealand",coordinates:[172.8344077,-41.5000831],count:3},{year:2024,country:"USA/Switzerland",coordinates:[-85.0373975,38.8249258],count:2},{year:2024,country:"Czech Republic",coordinates:[15.3381061,49.7439047],count:6},{year:2024,country:"Norway",coordinates:[11.52803643954819,64.5731537],count:10},{year:2024,country:"Italy",coordinates:[12.674297,42.6384261],count:11},{year:2024,country:"Lebanon",coordinates:[-76.4626118,40.375713],count:2},{year:2024,country:"Japan",coordinates:[139.2394179,36.5748441],count:30},{year:2024,country:"Slovakia",coordinates:[19.4528646,48.7411522],count:5},{year:2024,country:"Spain",coordinates:[-4.8379791,39.3260685],count:12},{year:2024,country:"Andorra",coordinates:[1.5732033,42.5407167],count:3},{year:2024,country:"Peru",coordinates:[-75.0458515,-6.8699697],count:6},{year:2024,country:"Romania",coordinates:[24.6859225,45.9852129],count:7},{year:2024,country:"Turkey/USA",coordinates:[-100.894078,34.3939184],count:2},{year:2024,country:"UK/Nepal",coordinates:[.46312329816569264,50.8583293],count:4},{year:2024,country:"Mexico",coordinates:[-99.1331785,19.4326296],count:5},{year:2024,country:"Serbia",coordinates:[21.07657433209902,44.024322850000004],count:1},{year:2024,country:"Taiwan",coordinates:[120.83537694479215,23.5983227],count:4},{year:2024,country:"Iran",coordinates:[54.5643516,32.6475314],count:19},{year:2024,country:"Canada/Russia",coordinates:[40.11713395000001,57.54157035],count:1},{year:2024,country:"Denmark",coordinates:[10.3333283,55.670249],count:2},{year:2024,country:"Netherlands",coordinates:[5.6343227,52.2434979],count:3},{year:2024,country:"Costa Rica",coordinates:[-84.0739102,10.2735633],count:2},{year:2024,country:"Kenya",coordinates:[38.4313975,1.4419683],count:1},{year:2024,country:"Kyrgyz Republic",coordinates:[74.724091,41.5089324],count:6},{year:2024,country:"Lithuania",coordinates:[23.7499997,55.3500003],count:2},{year:2024,country:"Qatar",coordinates:[51.2295295,25.3336984],count:3},{year:2024,country:"Bulgaria",coordinates:[25.4856617,42.6073975],count:1},{year:2024,country:"Pakistan",coordinates:[71.247499,30.3308401],count:3},{year:2024,country:"Morocco",coordinates:[-10.371337908392647,28.3347722],count:2},{year:2024,country:"Bolivia",coordinates:[-64.9912286,-17.0568696],count:2},{year:2024,country:"Argentina",coordinates:[-64.9672817,-34.9964963],count:7},{year:2024,country:"Algeria",coordinates:[2.9999825,28.0000272],count:3},{year:2024,country:"Mongolia",coordinates:[103.8499736,46.8250388],count:3},{year:2024,country:"Estonia",coordinates:[25.3319078,58.7523778],count:2},{year:2024,country:"Bhutan",coordinates:[90.5119273,27.549511],count:1},{year:2024,country:"USA/Jamaica",coordinates:[-73.8006429,40.7029134],count:2},{year:2024,country:"Hungary",coordinates:[19.5060937,47.1817585],count:2},{year:2024,country:"Dominican Republic",coordinates:[-70.3028026,19.0974031],count:1},{year:2024,country:"Ireland/UK",coordinates:[-.347478,52.0600343],count:2},{year:2024,country:"Nepal/USA",coordinates:[-77.04796326145569,38.9156045],count:1},{year:2024,country:"Ecuador",coordinates:[-79.3666965,-1.3397668],count:3},{year:2024,country:"Dominica",coordinates:[-61.3653618,15.4113138],count:1},{year:2024,country:"USA/Iran",coordinates:[-104.75191589611418,39.777073583989576],count:2},{year:2024,country:"Iceland",coordinates:[-18.1059013,64.9841821],count:2},{year:2024,country:"Iraq",coordinates:[44.1749775,33.0955793],count:1},{year:2024,country:"Finland",coordinates:[25.9209164,63.2467777],count:5},{year:2024,country:"Thailand",coordinates:[100.83273,14.8971921],count:1},{year:2024,country:"Bangladesh",coordinates:[90.2934413,24.4769288],count:2},{year:2024,country:"Croatia",coordinates:[15.6575209,45.3658443],count:2},{year:2024,country:"Singapore",coordinates:[103.8194992,1.357107],count:5},{year:2024,country:"Macedonia",coordinates:[-95.4256198,41.1927739],count:5},{year:2024,country:"Kosovo",coordinates:[20.9021231,42.5869578],count:1},{year:2024,country:"Cyprus",coordinates:[32.889902651331866,34.9174159],count:3},{year:2024,country:"Cyprus/Russia",coordinates:[33.34022527079303,35.16542375],count:1},{year:2024,country:"Norway/Denmark",coordinates:[9.128192346649687,55.73569435],count:1},{year:2024,country:"UK/Germany",coordinates:[-.15447594843356496,51.49801275],count:1},{year:2024,country:"Belgium",coordinates:[4.6667145,50.6402809],count:1},{year:2024,country:"UK/Iran",coordinates:[-.17233465172285267,51.50145205],count:1},{year:2024,country:"Jordan",coordinates:[-93.6261918,44.6663146],count:1},{year:2024,country:"Kyrgyz Republic/Russia",coordinates:[74.59693591232859,42.87695265],count:1},{year:2024,country:"Belarus",coordinates:[27.6971358,53.4250605],count:1},{year:2024,country:"Georgia",coordinates:[-83.1137366,32.3293809],count:2},{year:2024,country:"Italy/Slovenia",coordinates:[13.57942348726339,46.426770395039696],count:1}].filter(t=>Array.isArray(t.coordinates)&&t.coordinates.length===2),cW=[86.925,27.9881];Ot([yQ,GD,zQ,zte,pD]);function fW(){const t=D.useRef(null),e=D.useRef(null),r=D.useRef(null),[n,i]=D.useState(1950),[a,o]=D.useState(!1),[s,l]=D.useState(!1),u=pK(),[c,f]=D.useState(!1),h=D.useRef(null);D.useEffect(()=>(h.current=document.getElementById("bgMusic"),h.current&&(h.current.volume=1,h.current.play().catch(p=>{console.error(":",p)})),()=>{h.current&&(h.current.pause(),h.current.currentTime=0)}),[]),D.useEffect(()=>{if(!t.current){console.error("chartRef is null");return}try{const p=Gp(t.current);e.current=p,p.showLoading();const v={backgroundColor:"#000",progressive:25,progressiveThreshold:50,globe:{globeRadius:40,layoutCenter:["75%","75%"],layoutSize:"60%",viewControl:{autoRotate:!0,distance:200,autoRotateSpeed:12,maxDistance:300,minDistance:0,center:[50,30,60],alpha:20,beta:90,enableZoom:!1,animation:!0},atmosphere:{enable:!0,glow:!0,glowColor:"#fff",glowIntensity:10},baseTexture:"src/assets/world.topo.bathy.200401.jpg",heightTexture:"src/assets/world.topo.bathy.200401.jpg",displacementScale:.01,shading:"realistic",environment:"src/assets/starfield.jpg",realisticMaterial:{roughness:.8,metalness:0},postEffect:{enable:!0,bloom:{enable:!0}},light:{main:{intensity:1,shadow:!0},ambient:{intensity:.5}}},series:[{type:"lines3D",coordinateSystem:"globe",effect:{show:!0,period:2,trailWidth:1,trailLength:.2,trailOpacity:.6,trailColor:"#00BFFF"},lineStyle:{width:1,color:"#00BFFF",opacity:.1},data:[]}]};p.setOption(v),p.hideLoading(),setTimeout(()=>{p.setOption({globe:{viewControl:{autoRotate:!0,autoRotateSpeed:12,center:[0,0,0],beta:270,distance:150,animationDurationUpdate:8e3,animationEasingUpdate:"linear"}}}),setTimeout(()=>{r.current&&(r.current.style.opacity="0",setTimeout(()=>{r.current.style.opacity="1",r.current.style.transition="opacity 0.5s ease-in"},500));const m=1950,x=2024,S=25e3,b=Date.now(),T=()=>{const E=Date.now()-b,M=Math.min(E/S,1),A=Math.pow(M,1.2),R=Math.floor(m+(x-m)*A);i(R);let L=12;if(R>=2010){const z=(R-2010)/(x-2010);L=12*(1-Math.pow(z,.8))}p.setOption({globe:{viewControl:{autoRotateSpeed:L,autoRotate:M<1}}});const I=R5e.filter(z=>z.year<=R),N=300;let k;I.length>N?k=I.sort(()=>.5-Math.random()).slice(0,N).map(B=>({coords:[B.coordinates,cW],value:B.count})):k=I.map(z=>({coords:[z.coordinates,cW],value:z.count})),p.setOption({series:[{effect:{show:M===1},data:k}]}),M<1?requestAnimationFrame(T):setTimeout(()=>{o(!0),l(!0)},1e3)};requestAnimationFrame(T)},8e3)},7200);const g=()=>{p.resize()};return window.addEventListener("resize",g),()=>{p.dispose(),window.removeEventListener("resize",g)}}catch(p){console.error("Error initializing chart:",p)}},[]);const d=p=>{if(p.key==="Enter"&&s&&e.current){if(l(!1),o(!1),h.current){const v=setInterval(()=>{h.current&&h.current.volume>.1?h.current.volume-=.1:(h.current&&h.current.pause(),clearInterval(v))},200)}e.current.setOption({globe:{viewControl:{distance:10,animationDurationUpdate:3e3,animationEasingUpdate:"linear",autoRotate:!1}}}),setTimeout(()=>{f(!0),setTimeout(()=>{u("/mountH")},500)},2e3)}};return D.useEffect(()=>(window.addEventListener("keypress",d),()=>{window.removeEventListener("keypress",d)}),[s]),ve.jsxs("div",{style:{position:"relative"},children:[ve.jsx("div",{ref:t,style:{width:"100%",height:"100vh",position:"relative",backgroundColor:"#000"}}),ve.jsxs("div",{className:ac["text-overlay"],children:[ve.jsx("div",{className:`${ac["animated-text"]} ${ac["text-1"]}`,style:{top:"-80%",left:"0%"},children:"Why do you want to climb Mount Everest?"}),ve.jsx("div",{className:`${ac["animated-text"]} ${ac["text-2"]}`,style:{top:"-60%",left:"-20%"},children:"Because it's there."})]}),ve.jsx("div",{className:ac["year-counter"],ref:r,style:{top:"40px",left:"40px",fontSize:"5rem",position:"absolute"},children:n}),ve.jsx("div",{className:ac["press-enter"],style:{opacity:a?1:0},children:"Press enter key to continue."}),ve.jsx("div",{className:`${ac.overlay} ${c?ac["overlay-visible"]:""}`})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const PI="171",Yg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},P5e=0,hW=1,L5e=2,are=1,D5e=2,dc=3,Gc=0,_o=1,_u=2,vh=0,qg=1,dW=2,pW=3,vW=4,I5e=5,Wd=100,N5e=101,O5e=102,k5e=103,F5e=104,B5e=200,z5e=201,U5e=202,V5e=203,XR=204,KR=205,H5e=206,G5e=207,W5e=208,$5e=209,j5e=210,X5e=211,K5e=212,Y5e=213,q5e=214,YR=0,qR=1,ZR=2,wm=3,JR=4,QR=5,e8=6,t8=7,ore=0,Z5e=1,J5e=2,gh=0,Q5e=1,e9e=2,t9e=3,r9e=4,n9e=5,i9e=6,a9e=7,gW="attached",o9e="detached",sre=300,Tm=301,Cm=302,r8=303,n8=304,S4=306,Em=1e3,ih=1001,Zw=1002,xo=1003,lre=1004,b1=1005,vs=1006,R3=1007,Sc=1008,Wc=1009,ure=1010,cre=1011,B_=1012,LI=1013,Np=1014,Ol=1015,I2=1016,DI=1017,II=1018,Am=1020,fre=35902,hre=1021,dre=1022,qs=1023,pre=1024,vre=1025,Zg=1026,Mm=1027,NI=1028,OI=1029,gre=1030,kI=1031,FI=1033,P3=33776,L3=33777,D3=33778,I3=33779,i8=35840,a8=35841,o8=35842,s8=35843,l8=36196,u8=37492,c8=37496,f8=37808,h8=37809,d8=37810,p8=37811,v8=37812,g8=37813,m8=37814,y8=37815,_8=37816,x8=37817,S8=37818,b8=37819,w8=37820,T8=37821,N3=36492,C8=36494,E8=36495,mre=36283,A8=36284,M8=36285,R8=36286,z_=2300,U_=2301,m5=2302,mW=2400,yW=2401,_W=2402,s9e=2500,l9e=0,yre=1,P8=2,u9e=3200,c9e=3201,_re=0,f9e=1,jf="",Ti="srgb",Za="srgb-linear",Jw="linear",Dn="srgb",Qv=7680,xW=519,h9e=512,d9e=513,p9e=514,xre=515,v9e=516,g9e=517,m9e=518,y9e=519,L8=35044,SW="300 es",bc=2e3,Qw=2001;class Yp{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(r);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,o=i.length;a<o;a++)i[a].call(this,e);e.target=null}}}const Wa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bW=1234567;const G1=Math.PI/180,Rm=180/Math.PI;function zl(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Wa[t&255]+Wa[t>>8&255]+Wa[t>>16&255]+Wa[t>>24&255]+"-"+Wa[e&255]+Wa[e>>8&255]+"-"+Wa[e>>16&15|64]+Wa[e>>24&255]+"-"+Wa[r&63|128]+Wa[r>>8&255]+"-"+Wa[r>>16&255]+Wa[r>>24&255]+Wa[n&255]+Wa[n>>8&255]+Wa[n>>16&255]+Wa[n>>24&255]).toLowerCase()}function Nr(t,e,r){return Math.max(e,Math.min(r,t))}function BI(t,e){return(t%e+e)%e}function _9e(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)}function x9e(t,e,r){return t!==e?(r-t)/(e-t):0}function W1(t,e,r){return(1-r)*t+r*e}function S9e(t,e,r,n){return W1(t,e,1-Math.exp(-r*n))}function b9e(t,e=1){return e-Math.abs(BI(t,e*2)-e)}function w9e(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))}function T9e(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(t*6-15)+10))}function C9e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function E9e(t,e){return t+Math.random()*(e-t)}function A9e(t){return t*(.5-Math.random())}function M9e(t){t!==void 0&&(bW=t);let e=bW+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function R9e(t){return t*G1}function P9e(t){return t*Rm}function L9e(t){return(t&t-1)===0&&t!==0}function D9e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function I9e(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function N9e(t,e,r,n,i){const a=Math.cos,o=Math.sin,s=a(r/2),l=o(r/2),u=a((e+n)/2),c=o((e+n)/2),f=a((e-n)/2),h=o((e-n)/2),d=a((n-e)/2),p=o((n-e)/2);switch(i){case"XYX":t.set(s*c,l*f,l*h,s*u);break;case"YZY":t.set(l*h,s*c,l*f,s*u);break;case"ZXZ":t.set(l*f,l*h,s*c,s*u);break;case"XZX":t.set(s*c,l*p,l*d,s*u);break;case"YXY":t.set(l*d,s*c,l*p,s*u);break;case"ZYZ":t.set(l*p,l*d,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ll(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function An(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const zI={DEG2RAD:G1,RAD2DEG:Rm,generateUUID:zl,clamp:Nr,euclideanModulo:BI,mapLinear:_9e,inverseLerp:x9e,lerp:W1,damp:S9e,pingpong:b9e,smoothstep:w9e,smootherstep:T9e,randInt:C9e,randFloat:E9e,randFloatSpread:A9e,seededRandom:M9e,degToRad:R9e,radToDeg:P9e,isPowerOfTwo:L9e,ceilPowerOfTwo:D9e,floorPowerOfTwo:I9e,setQuaternionFromProperEuler:N9e,normalize:An,denormalize:Ll};class dr{constructor(e=0,r=0){dr.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,n=this.y,i=e.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Nr(this.x,e.x,r.x),this.y=Nr(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=Nr(this.x,e,r),this.y=Nr(this.y,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(Nr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y;return r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const n=Math.cos(r),i=Math.sin(r),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*i+e.x,this.y=a*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fr{constructor(e,r,n,i,a,o,s,l,u){Fr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,n,i,a,o,s,l,u)}set(e,r,n,i,a,o,s,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=r,c[4]=a,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(e,r,n){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,a=this.elements,o=n[0],s=n[3],l=n[6],u=n[1],c=n[4],f=n[7],h=n[2],d=n[5],p=n[8],v=i[0],g=i[3],m=i[6],x=i[1],S=i[4],b=i[7],T=i[2],w=i[5],E=i[8];return a[0]=o*v+s*x+l*T,a[3]=o*g+s*S+l*w,a[6]=o*m+s*b+l*E,a[1]=u*v+c*x+f*T,a[4]=u*g+c*S+f*w,a[7]=u*m+c*b+f*E,a[2]=h*v+d*x+p*T,a[5]=h*g+d*S+p*w,a[8]=h*m+d*b+p*E,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return r*o*c-r*s*u-n*a*c+n*s*l+i*a*u-i*o*l}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,h=s*l-c*a,d=u*a-o*l,p=r*f+n*h+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=f*v,e[1]=(i*u-c*n)*v,e[2]=(s*n-i*o)*v,e[3]=h*v,e[4]=(c*r-i*l)*v,e[5]=(i*a-s*r)*v,e[6]=d*v,e[7]=(n*l-u*r)*v,e[8]=(o*r-n*a)*v,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,n,i,a,o,s){const l=Math.cos(a),u=Math.sin(a);return this.set(n*l,n*u,-n*(l*o+u*s)+o+e,-i*u,i*l,-i*(-u*o+l*s)+s+r,0,0,1),this}scale(e,r){return this.premultiply(y5.makeScale(e,r)),this}rotate(e){return this.premultiply(y5.makeRotation(-e)),this}translate(e,r){return this.premultiply(y5.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<9;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<9;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const y5=new Fr;function Sre(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function V_(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function O9e(){const t=V_("canvas");return t.style.display="block",t}const wW={};function Rg(t){t in wW||(wW[t]=!0,console.warn(t))}function k9e(t,e,r){return new Promise(function(n,i){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,r);break;default:n()}}setTimeout(a,r)})}function F9e(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function B9e(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const TW=new Fr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),CW=new Fr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function z9e(){const t={enabled:!0,workingColorSpace:Za,spaces:{},convert:function(i,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===Dn&&(i.r=Lc(i.r),i.g=Lc(i.g),i.b=Lc(i.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Dn&&(i.r=Jg(i.r),i.g=Jg(i.g),i.b=Jg(i.b))),i},fromWorkingColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},toWorkingColorSpace:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===jf?Jw:this.spaces[i].transfer},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,o){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],n=[.3127,.329];return t.define({[Za]:{primaries:e,whitePoint:n,transfer:Jw,toXYZ:TW,fromXYZ:CW,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Ti},outputColorSpaceConfig:{drawingBufferColorSpace:Ti}},[Ti]:{primaries:e,whitePoint:n,transfer:Dn,toXYZ:TW,fromXYZ:CW,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Ti}}}),t}const sn=z9e();function Lc(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Jg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let eg;class U9e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{eg===void 0&&(eg=V_("canvas")),eg.width=e.width,eg.height=e.height;const n=eg.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),r=eg}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const r=V_("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=Lc(a[o]/255)*255;return n.putImageData(i,0,0),r}else if(e.data){const r=e.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(Lc(r[n]/255)*255):r[n]=Lc(r[n]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let V9e=0;class bre{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:V9e++}),this.uuid=zl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(_5(i[o].image)):a.push(_5(i[o]))}else a=_5(i);n.url=a}return r||(e.images[this.uuid]=n),n}}function _5(t){return typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?U9e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let H9e=0;class ya extends Yp{constructor(e=ya.DEFAULT_IMAGE,r=ya.DEFAULT_MAPPING,n=ih,i=ih,a=vs,o=Sc,s=qs,l=Wc,u=ya.DEFAULT_ANISOTROPY,c=jf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:H9e++}),this.uuid=zl(),this.name="",this.source=new bre(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new dr(0,0),this.repeat=new dr(1,1),this.center=new dr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sre)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Em:e.x=e.x-Math.floor(e.x);break;case ih:e.x=e.x<0?0:1;break;case Zw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Em:e.y=e.y-Math.floor(e.y);break;case ih:e.y=e.y<0?0:1;break;case Zw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ya.DEFAULT_IMAGE=null;ya.DEFAULT_MAPPING=sre;ya.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,r=0,n=0,i=1){an.prototype.isVector4=!0,this.x=e,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,n,i){return this.x=e,this.y=r,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*r+o[4]*n+o[8]*i+o[12]*a,this.y=o[1]*r+o[5]*n+o[9]*i+o[13]*a,this.z=o[2]*r+o[6]*n+o[10]*i+o[14]*a,this.w=o[3]*r+o[7]*n+o[11]*i+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,n,i,a;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],d=l[5],p=l[9],v=l[2],g=l[6],m=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-v)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+v)<.1&&Math.abs(p+g)<.1&&Math.abs(u+d+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const S=(u+1)/2,b=(d+1)/2,T=(m+1)/2,w=(c+h)/4,E=(f+v)/4,M=(p+g)/4;return S>b&&S>T?S<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(S),i=w/n,a=E/n):b>T?b<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(b),n=w/i,a=M/i):T<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(T),n=E/a,i=M/a),this.set(n,i,a,r),this}let x=Math.sqrt((g-p)*(g-p)+(f-v)*(f-v)+(h-c)*(h-c));return Math.abs(x)<.001&&(x=1),this.x=(g-p)/x,this.y=(f-v)/x,this.z=(h-c)/x,this.w=Math.acos((u+d+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Nr(this.x,e.x,r.x),this.y=Nr(this.y,e.y,r.y),this.z=Nr(this.z,e.z,r.z),this.w=Nr(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=Nr(this.x,e,r),this.y=Nr(this.y,e,r),this.z=Nr(this.z,e,r),this.w=Nr(this.w,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this.w=e.w+(r.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class G9e extends Yp{constructor(e=1,r=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new an(0,0,e,r),this.scissorTest=!1,this.viewport=new an(0,0,e,r);const i={width:e,height:r,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:vs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const a=new ya(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);a.flipY=!1,a.generateMipmaps=n.generateMipmaps,a.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let s=0;s<o;s++)this.textures[s]=a.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,n=1){if(this.width!==e||this.height!==r||this.depth!==n){this.width=e,this.height=r,this.depth=n;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=r,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new bre(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Op extends G9e{constructor(e=1,r=1,n={}){super(e,r,n),this.isWebGLRenderTarget=!0}}class wre extends ya{constructor(e=null,r=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=xo,this.minFilter=xo,this.wrapR=ih,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class W9e extends ya{constructor(e=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=xo,this.minFilter=xo,this.wrapR=ih,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ou{constructor(e=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=n,this._w=i}static slerpFlat(e,r,n,i,a,o,s){let l=n[i+0],u=n[i+1],c=n[i+2],f=n[i+3];const h=a[o+0],d=a[o+1],p=a[o+2],v=a[o+3];if(s===0){e[r+0]=l,e[r+1]=u,e[r+2]=c,e[r+3]=f;return}if(s===1){e[r+0]=h,e[r+1]=d,e[r+2]=p,e[r+3]=v;return}if(f!==v||l!==h||u!==d||c!==p){let g=1-s;const m=l*h+u*d+c*p+f*v,x=m>=0?1:-1,S=1-m*m;if(S>Number.EPSILON){const T=Math.sqrt(S),w=Math.atan2(T,m*x);g=Math.sin(g*w)/T,s=Math.sin(s*w)/T}const b=s*x;if(l=l*g+h*b,u=u*g+d*b,c=c*g+p*b,f=f*g+v*b,g===1-s){const T=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=T,u*=T,c*=T,f*=T}}e[r]=l,e[r+1]=u,e[r+2]=c,e[r+3]=f}static multiplyQuaternionsFlat(e,r,n,i,a,o){const s=n[i],l=n[i+1],u=n[i+2],c=n[i+3],f=a[o],h=a[o+1],d=a[o+2],p=a[o+3];return e[r]=s*p+c*f+l*d-u*h,e[r+1]=l*p+c*h+u*f-s*d,e[r+2]=u*p+c*d+s*h-l*f,e[r+3]=c*p-s*f-l*h-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,n,i){return this._x=e,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const n=e._x,i=e._y,a=e._z,o=e._order,s=Math.cos,l=Math.sin,u=s(n/2),c=s(i/2),f=s(a/2),h=l(n/2),d=l(i/2),p=l(a/2);switch(o){case"XYZ":this._x=h*c*f+u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f-h*d*p;break;case"YXZ":this._x=h*c*f+u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f+h*d*p;break;case"ZXY":this._x=h*c*f-u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f-h*d*p;break;case"ZYX":this._x=h*c*f-u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f+h*d*p;break;case"YZX":this._x=h*c*f+u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f-h*d*p;break;case"XZY":this._x=h*c*f-u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const n=r/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],f=r[10],h=n+s+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-l)*d,this._y=(a-u)*d,this._z=(o-i)*d}else if(n>s&&n>f){const d=2*Math.sqrt(1+n-s-f);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(a+u)/d}else if(s>f){const d=2*Math.sqrt(1+s-n-f);this._w=(a-u)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+f-n-s);this._w=(o-i)/d,this._x=(a+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let n=e.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nr(this.dot(e),-1,1)))}rotateTowards(e,r){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,r/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const n=e._x,i=e._y,a=e._z,o=e._w,s=r._x,l=r._y,u=r._z,c=r._w;return this._x=n*c+o*s+i*u-a*l,this._y=i*c+o*l+a*s-n*u,this._z=a*c+o*u+n*l-i*s,this._w=o*c-n*s-i*l-a*u,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const n=this._x,i=this._y,a=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-r;return this._w=d*o+r*this._w,this._x=d*n+r*this._x,this._y=d*i+r*this._y,this._z=d*a+r*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),f=Math.sin((1-r)*c)/u,h=Math.sin(r*c)/u;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=i*f+this._y*h,this._z=a*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,n){return this.copy(e).slerp(r,n)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(r),a*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,r=0,n=0){ae.prototype.isVector3=!0,this.x=e,this.y=r,this.z=n}set(e,r,n){return n===void 0&&(n=this.z),this.x=e,this.y=r,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(EW.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(EW.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[3]*n+a[6]*i,this.y=a[1]*r+a[4]*n+a[7]*i,this.z=a[2]*r+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,a=e.elements,o=1/(a[3]*r+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*r+a[4]*n+a[8]*i+a[12])*o,this.y=(a[1]*r+a[5]*n+a[9]*i+a[13])*o,this.z=(a[2]*r+a[6]*n+a[10]*i+a[14])*o,this}applyQuaternion(e){const r=this.x,n=this.y,i=this.z,a=e.x,o=e.y,s=e.z,l=e.w,u=2*(o*i-s*n),c=2*(s*r-a*i),f=2*(a*n-o*r);return this.x=r+l*u+o*f-s*c,this.y=n+l*c+s*u-a*f,this.z=i+l*f+a*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[4]*n+a[8]*i,this.y=a[1]*r+a[5]*n+a[9]*i,this.z=a[2]*r+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Nr(this.x,e.x,r.x),this.y=Nr(this.y,e.y,r.y),this.z=Nr(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Nr(this.x,e,r),this.y=Nr(this.y,e,r),this.z=Nr(this.z,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nr(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const n=e.x,i=e.y,a=e.z,o=r.x,s=r.y,l=r.z;return this.x=i*l-a*s,this.y=a*o-n*l,this.z=n*s-i*o,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const n=e.dot(this)/r;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return x5.copy(this).projectOnVector(e),this.sub(x5)}reflect(e){return this.sub(x5.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(Nr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return r*r+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,n){const i=Math.sin(r)*e;return this.x=i*Math.sin(n),this.y=Math.cos(r)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,n){return this.x=e*Math.sin(r),this.y=n,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,n=Math.sqrt(1-r*r);return this.x=n*Math.cos(e),this.y=r,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const x5=new ae,EW=new Ou;class ll{constructor(e=new ae(1/0,1/0,1/0),r=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r+=3)this.expandByPoint(xl.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,n=e.count;r<n;r++)this.expandByPoint(xl.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const n=xl.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(r===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)e.isMesh===!0?e.getVertexPosition(o,xl):xl.fromBufferAttribute(a,o),xl.applyMatrix4(e.matrixWorld),this.expandByPoint(xl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cb.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),cb.copy(n.boundingBox)),cb.applyMatrix4(e.matrixWorld),this.union(cb)}const i=e.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,xl),xl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,n;return e.normal.x>0?(r=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),r<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gy),fb.subVectors(this.max,Gy),tg.subVectors(e.a,Gy),rg.subVectors(e.b,Gy),ng.subVectors(e.c,Gy),If.subVectors(rg,tg),Nf.subVectors(ng,rg),Td.subVectors(tg,ng);let r=[0,-If.z,If.y,0,-Nf.z,Nf.y,0,-Td.z,Td.y,If.z,0,-If.x,Nf.z,0,-Nf.x,Td.z,0,-Td.x,-If.y,If.x,0,-Nf.y,Nf.x,0,-Td.y,Td.x,0];return!S5(r,tg,rg,ng,fb)||(r=[1,0,0,0,1,0,0,0,1],!S5(r,tg,rg,ng,fb))?!1:(hb.crossVectors(If,Nf),r=[hb.x,hb.y,hb.z],S5(r,tg,rg,ng,fb))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oc=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],xl=new ae,cb=new ll,tg=new ae,rg=new ae,ng=new ae,If=new ae,Nf=new ae,Td=new ae,Gy=new ae,fb=new ae,hb=new ae,Cd=new ae;function S5(t,e,r,n,i){for(let a=0,o=t.length-3;a<=o;a+=3){Cd.fromArray(t,a);const s=i.x*Math.abs(Cd.x)+i.y*Math.abs(Cd.y)+i.z*Math.abs(Cd.z),l=e.dot(Cd),u=r.dot(Cd),c=n.dot(Cd);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const $9e=new ll,Wy=new ae,b5=new ae;class ul{constructor(e=new ae,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const n=this.center;r!==void 0?n.copy(r):$9e.setFromPoints(e).getCenter(n);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const n=this.center.distanceToSquared(e);return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Wy.subVectors(e,this.center);const r=Wy.lengthSq();if(r>this.radius*this.radius){const n=Math.sqrt(r),i=(n-this.radius)*.5;this.center.addScaledVector(Wy,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(b5.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Wy.copy(e.center).add(b5)),this.expandByPoint(Wy.copy(e.center).sub(b5))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const sc=new ae,w5=new ae,db=new ae,Of=new ae,T5=new ae,pb=new ae,C5=new ae;class g0{constructor(e=new ae,r=new ae(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sc)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=sc.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(sc.copy(this.origin).addScaledVector(this.direction,r),sc.distanceToSquared(e))}distanceSqToSegment(e,r,n,i){w5.copy(e).add(r).multiplyScalar(.5),db.copy(r).sub(e).normalize(),Of.copy(this.origin).sub(w5);const a=e.distanceTo(r)*.5,o=-this.direction.dot(db),s=Of.dot(this.direction),l=-Of.dot(db),u=Of.lengthSq(),c=Math.abs(1-o*o);let f,h,d,p;if(c>0)if(f=o*l-s,h=o*s-l,p=a*c,f>=0)if(h>=-p)if(h<=p){const v=1/c;f*=v,h*=v,d=f*(f+o*h+2*s)+h*(o*f+h+2*l)+u}else h=a,f=Math.max(0,-(o*h+s)),d=-f*f+h*(h+2*l)+u;else h=-a,f=Math.max(0,-(o*h+s)),d=-f*f+h*(h+2*l)+u;else h<=-p?(f=Math.max(0,-(-o*a+s)),h=f>0?-a:Math.min(Math.max(-a,-l),a),d=-f*f+h*(h+2*l)+u):h<=p?(f=0,h=Math.min(Math.max(-a,-l),a),d=h*(h+2*l)+u):(f=Math.max(0,-(o*a+s)),h=f>0?a:Math.min(Math.max(-a,-l),a),d=-f*f+h*(h+2*l)+u);else h=o>0?-a:a,f=Math.max(0,-(o*h+s)),d=-f*f+h*(h+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(w5).addScaledVector(db,h),d}intersectSphere(e,r){sc.subVectors(e.center,this.origin);const n=sc.dot(this.direction),i=sc.dot(sc)-n*n,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=n-o,l=n+o;return l<0?null:s<0?this.at(l,r):this.at(s,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/r;return n>=0?n:null}intersectPlane(e,r){const n=this.distanceToPlane(e);return n===null?null:this.at(n,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let n,i,a,o,s,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(a=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(a=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||a>i||((a>n||isNaN(n))&&(n=a),(o<i||isNaN(i))&&(i=o),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),n>l||s>i)||((s>n||n!==n)&&(n=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(e){return this.intersectBox(e,sc)!==null}intersectTriangle(e,r,n,i,a){T5.subVectors(r,e),pb.subVectors(n,e),C5.crossVectors(T5,pb);let o=this.direction.dot(C5),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Of.subVectors(this.origin,e);const l=s*this.direction.dot(pb.crossVectors(Of,pb));if(l<0)return null;const u=s*this.direction.dot(T5.cross(Of));if(u<0||l+u>o)return null;const c=-s*Of.dot(C5);return c<0?null:this.at(c/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rr{constructor(e,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g){Rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g)}set(e,r,n,i,a,o,s,l,u,c,f,h,d,p,v,g){const m=this.elements;return m[0]=e,m[4]=r,m[8]=n,m[12]=i,m[1]=a,m[5]=o,m[9]=s,m[13]=l,m[2]=u,m[6]=c,m[10]=f,m[14]=h,m[3]=d,m[7]=p,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rr().fromArray(this.elements)}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(e){const r=this.elements,n=e.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,n){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,r,n){return this.set(e.x,r.x,n.x,0,e.y,r.y,n.y,0,e.z,r.z,n.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,n=e.elements,i=1/ig.setFromMatrixColumn(e,0).length(),a=1/ig.setFromMatrixColumn(e,1).length(),o=1/ig.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=0,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,n=e.x,i=e.y,a=e.z,o=Math.cos(n),s=Math.sin(n),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const h=o*c,d=o*f,p=s*c,v=s*f;r[0]=l*c,r[4]=-l*f,r[8]=u,r[1]=d+p*u,r[5]=h-v*u,r[9]=-s*l,r[2]=v-h*u,r[6]=p+d*u,r[10]=o*l}else if(e.order==="YXZ"){const h=l*c,d=l*f,p=u*c,v=u*f;r[0]=h+v*s,r[4]=p*s-d,r[8]=o*u,r[1]=o*f,r[5]=o*c,r[9]=-s,r[2]=d*s-p,r[6]=v+h*s,r[10]=o*l}else if(e.order==="ZXY"){const h=l*c,d=l*f,p=u*c,v=u*f;r[0]=h-v*s,r[4]=-o*f,r[8]=p+d*s,r[1]=d+p*s,r[5]=o*c,r[9]=v-h*s,r[2]=-o*u,r[6]=s,r[10]=o*l}else if(e.order==="ZYX"){const h=o*c,d=o*f,p=s*c,v=s*f;r[0]=l*c,r[4]=p*u-d,r[8]=h*u+v,r[1]=l*f,r[5]=v*u+h,r[9]=d*u-p,r[2]=-u,r[6]=s*l,r[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*u,p=s*l,v=s*u;r[0]=l*c,r[4]=v-h*f,r[8]=p*f+d,r[1]=f,r[5]=o*c,r[9]=-s*c,r[2]=-u*c,r[6]=d*f+p,r[10]=h-v*f}else if(e.order==="XZY"){const h=o*l,d=o*u,p=s*l,v=s*u;r[0]=l*c,r[4]=-f,r[8]=u*c,r[1]=h*f+v,r[5]=o*c,r[9]=d*f-p,r[2]=p*f-d,r[6]=s*c,r[10]=v*f+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(j9e,e,X9e)}lookAt(e,r,n){const i=this.elements;return ss.subVectors(e,r),ss.lengthSq()===0&&(ss.z=1),ss.normalize(),kf.crossVectors(n,ss),kf.lengthSq()===0&&(Math.abs(n.z)===1?ss.x+=1e-4:ss.z+=1e-4,ss.normalize(),kf.crossVectors(n,ss)),kf.normalize(),vb.crossVectors(ss,kf),i[0]=kf.x,i[4]=vb.x,i[8]=ss.x,i[1]=kf.y,i[5]=vb.y,i[9]=ss.y,i[2]=kf.z,i[6]=vb.z,i[10]=ss.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,a=this.elements,o=n[0],s=n[4],l=n[8],u=n[12],c=n[1],f=n[5],h=n[9],d=n[13],p=n[2],v=n[6],g=n[10],m=n[14],x=n[3],S=n[7],b=n[11],T=n[15],w=i[0],E=i[4],M=i[8],A=i[12],R=i[1],L=i[5],I=i[9],N=i[13],k=i[2],z=i[6],B=i[10],V=i[14],F=i[3],$=i[7],W=i[11],H=i[15];return a[0]=o*w+s*R+l*k+u*F,a[4]=o*E+s*L+l*z+u*$,a[8]=o*M+s*I+l*B+u*W,a[12]=o*A+s*N+l*V+u*H,a[1]=c*w+f*R+h*k+d*F,a[5]=c*E+f*L+h*z+d*$,a[9]=c*M+f*I+h*B+d*W,a[13]=c*A+f*N+h*V+d*H,a[2]=p*w+v*R+g*k+m*F,a[6]=p*E+v*L+g*z+m*$,a[10]=p*M+v*I+g*B+m*W,a[14]=p*A+v*N+g*V+m*H,a[3]=x*w+S*R+b*k+T*F,a[7]=x*E+S*L+b*z+T*$,a[11]=x*M+S*I+b*B+T*W,a[15]=x*A+S*N+b*V+T*H,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[4],i=e[8],a=e[12],o=e[1],s=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],d=e[14],p=e[3],v=e[7],g=e[11],m=e[15];return p*(+a*l*f-i*u*f-a*s*h+n*u*h+i*s*d-n*l*d)+v*(+r*l*d-r*u*h+a*o*h-i*o*d+i*u*c-a*l*c)+g*(+r*u*f-r*s*d-a*o*f+n*o*d+a*s*c-n*u*c)+m*(-i*s*c-r*l*f+r*s*h+i*o*f-n*o*h+n*l*c)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=r,i[14]=n),this}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],x=f*g*u-v*h*u+v*l*d-s*g*d-f*l*m+s*h*m,S=p*h*u-c*g*u-p*l*d+o*g*d+c*l*m-o*h*m,b=c*v*u-p*f*u+p*s*d-o*v*d-c*s*m+o*f*m,T=p*f*l-c*v*l-p*s*h+o*v*h+c*s*g-o*f*g,w=r*x+n*S+i*b+a*T;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/w;return e[0]=x*E,e[1]=(v*h*a-f*g*a-v*i*d+n*g*d+f*i*m-n*h*m)*E,e[2]=(s*g*a-v*l*a+v*i*u-n*g*u-s*i*m+n*l*m)*E,e[3]=(f*l*a-s*h*a-f*i*u+n*h*u+s*i*d-n*l*d)*E,e[4]=S*E,e[5]=(c*g*a-p*h*a+p*i*d-r*g*d-c*i*m+r*h*m)*E,e[6]=(p*l*a-o*g*a-p*i*u+r*g*u+o*i*m-r*l*m)*E,e[7]=(o*h*a-c*l*a+c*i*u-r*h*u-o*i*d+r*l*d)*E,e[8]=b*E,e[9]=(p*f*a-c*v*a-p*n*d+r*v*d+c*n*m-r*f*m)*E,e[10]=(o*v*a-p*s*a+p*n*u-r*v*u-o*n*m+r*s*m)*E,e[11]=(c*s*a-o*f*a-c*n*u+r*f*u+o*n*d-r*s*d)*E,e[12]=T*E,e[13]=(c*v*i-p*f*i+p*n*h-r*v*h-c*n*g+r*f*g)*E,e[14]=(p*s*i-o*v*i-p*n*l+r*v*l+o*n*g-r*s*g)*E,e[15]=(o*f*i-c*s*i+c*n*l-r*f*l-o*n*h+r*s*h)*E,this}scale(e){const r=this.elements,n=e.x,i=e.y,a=e.z;return r[0]*=n,r[4]*=i,r[8]*=a,r[1]*=n,r[5]*=i,r[9]*=a,r[2]*=n,r[6]*=i,r[10]*=a,r[3]*=n,r[7]*=i,r[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(e,r,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const n=Math.cos(r),i=Math.sin(r),a=1-n,o=e.x,s=e.y,l=e.z,u=a*o,c=a*s;return this.set(u*o+n,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+n,c*l-i*o,0,u*l-i*s,c*l+i*o,a*l*l+n,0,0,0,0,1),this}makeScale(e,r,n){return this.set(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,r,n,i,a,o){return this.set(1,n,a,0,e,1,o,0,r,i,1,0,0,0,0,1),this}compose(e,r,n){const i=this.elements,a=r._x,o=r._y,s=r._z,l=r._w,u=a+a,c=o+o,f=s+s,h=a*u,d=a*c,p=a*f,v=o*c,g=o*f,m=s*f,x=l*u,S=l*c,b=l*f,T=n.x,w=n.y,E=n.z;return i[0]=(1-(v+m))*T,i[1]=(d+b)*T,i[2]=(p-S)*T,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+m))*w,i[6]=(g+x)*w,i[7]=0,i[8]=(p+S)*E,i[9]=(g-x)*E,i[10]=(1-(h+v))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,r,n){const i=this.elements;let a=ig.set(i[0],i[1],i[2]).length();const o=ig.set(i[4],i[5],i[6]).length(),s=ig.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Sl.copy(this);const u=1/a,c=1/o,f=1/s;return Sl.elements[0]*=u,Sl.elements[1]*=u,Sl.elements[2]*=u,Sl.elements[4]*=c,Sl.elements[5]*=c,Sl.elements[6]*=c,Sl.elements[8]*=f,Sl.elements[9]*=f,Sl.elements[10]*=f,r.setFromRotationMatrix(Sl),n.x=a,n.y=o,n.z=s,this}makePerspective(e,r,n,i,a,o,s=bc){const l=this.elements,u=2*a/(r-e),c=2*a/(n-i),f=(r+e)/(r-e),h=(n+i)/(n-i);let d,p;if(s===bc)d=-(o+a)/(o-a),p=-2*o*a/(o-a);else if(s===Qw)d=-o/(o-a),p=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,r,n,i,a,o,s=bc){const l=this.elements,u=1/(r-e),c=1/(n-i),f=1/(o-a),h=(r+e)*u,d=(n+i)*c;let p,v;if(s===bc)p=(o+a)*f,v=-2*f;else if(s===Qw)p=a*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<16;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<16;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15],e}}const ig=new ae,Sl=new Rr,j9e=new ae(0,0,0),X9e=new ae(1,1,1),kf=new ae,vb=new ae,ss=new ae,AW=new Rr,MW=new Ou;class ku{constructor(e=0,r=0,n=0,i=ku.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,n,i=this._order){return this._x=e,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,n=!0){const i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10];switch(r){case"XYZ":this._y=Math.asin(Nr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Nr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(Nr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-Nr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Nr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Nr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,n){return AW.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AW,r,n)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return MW.setFromEuler(this),this.setFromQuaternion(MW,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ku.DEFAULT_ORDER="XYZ";class UI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let K9e=0;const RW=new ae,ag=new Ou,lc=new Rr,gb=new ae,$y=new ae,Y9e=new ae,q9e=new Ou,PW=new ae(1,0,0),LW=new ae(0,1,0),DW=new ae(0,0,1),IW={type:"added"},Z9e={type:"removed"},og={type:"childadded",child:null},E5={type:"childremoved",child:null};class si extends Yp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:K9e++}),this.uuid=zl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=si.DEFAULT_UP.clone();const e=new ae,r=new ku,n=new Ou,i=new ae(1,1,1);function a(){n.setFromEuler(r,!1)}function o(){r.setFromQuaternion(n,void 0,!1)}r._onChange(a),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Rr},normalMatrix:{value:new Fr}}),this.matrix=new Rr,this.matrixWorld=new Rr,this.matrixAutoUpdate=si.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new UI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return ag.setFromAxisAngle(e,r),this.quaternion.multiply(ag),this}rotateOnWorldAxis(e,r){return ag.setFromAxisAngle(e,r),this.quaternion.premultiply(ag),this}rotateX(e){return this.rotateOnAxis(PW,e)}rotateY(e){return this.rotateOnAxis(LW,e)}rotateZ(e){return this.rotateOnAxis(DW,e)}translateOnAxis(e,r){return RW.copy(e).applyQuaternion(this.quaternion),this.position.add(RW.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(PW,e)}translateY(e){return this.translateOnAxis(LW,e)}translateZ(e){return this.translateOnAxis(DW,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lc.copy(this.matrixWorld).invert())}lookAt(e,r,n){e.isVector3?gb.copy(e):gb.set(e,r,n);const i=this.parent;this.updateWorldMatrix(!0,!1),$y.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lc.lookAt($y,gb,this.up):lc.lookAt(gb,$y,this.up),this.quaternion.setFromRotationMatrix(lc),i&&(lc.extractRotation(i.matrixWorld),ag.setFromRotationMatrix(lc),this.quaternion.premultiply(ag.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(IW),og.child=e,this.dispatchEvent(og),og.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Z9e),E5.child=e,this.dispatchEvent(E5),E5.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lc.multiply(e.parent.matrixWorld)),e.applyMatrix4(lc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(IW),og.child=e,this.dispatchEvent(og),og.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,r);if(o!==void 0)return o}}getObjectsByProperty(e,r,n=[]){this[e]===r&&n.push(this);const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].getObjectsByProperty(e,r,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($y,e,Y9e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($y,q9e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].updateMatrixWorld(e)}updateWorldMatrix(e,r){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",n={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];a(e.shapes,f)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(a(e.materials,this.material[l]));i.material=s}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(e.animations,l))}}if(r){const s=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations),p=o(e.nodes);s.length>0&&(n.geometries=s),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),f.length>0&&(n.shapes=f),h.length>0&&(n.skeletons=h),d.length>0&&(n.animations=d),p.length>0&&(n.nodes=p)}return n.object=i,n;function o(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}si.DEFAULT_UP=new ae(0,1,0);si.DEFAULT_MATRIX_AUTO_UPDATE=!0;si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const bl=new ae,uc=new ae,A5=new ae,cc=new ae,sg=new ae,lg=new ae,NW=new ae,M5=new ae,R5=new ae,P5=new ae,L5=new an,D5=new an,I5=new an;class Dl{constructor(e=new ae,r=new ae,n=new ae){this.a=e,this.b=r,this.c=n}static getNormal(e,r,n,i){i.subVectors(n,r),bl.subVectors(e,r),i.cross(bl);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,r,n,i,a){bl.subVectors(i,r),uc.subVectors(n,r),A5.subVectors(e,r);const o=bl.dot(bl),s=bl.dot(uc),l=bl.dot(A5),u=uc.dot(uc),c=uc.dot(A5),f=o*u-s*s;if(f===0)return a.set(0,0,0),null;const h=1/f,d=(u*l-s*c)*h,p=(o*c-s*l)*h;return a.set(1-d-p,p,d)}static containsPoint(e,r,n,i){return this.getBarycoord(e,r,n,i,cc)===null?!1:cc.x>=0&&cc.y>=0&&cc.x+cc.y<=1}static getInterpolation(e,r,n,i,a,o,s,l){return this.getBarycoord(e,r,n,i,cc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,cc.x),l.addScaledVector(o,cc.y),l.addScaledVector(s,cc.z),l)}static getInterpolatedAttribute(e,r,n,i,a,o){return L5.setScalar(0),D5.setScalar(0),I5.setScalar(0),L5.fromBufferAttribute(e,r),D5.fromBufferAttribute(e,n),I5.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(L5,a.x),o.addScaledVector(D5,a.y),o.addScaledVector(I5,a.z),o}static isFrontFacing(e,r,n,i){return bl.subVectors(n,r),uc.subVectors(e,r),bl.cross(uc).dot(i)<0}set(e,r,n){return this.a.copy(e),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(e,r,n,i){return this.a.copy(e[r]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,r,n,i){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return bl.subVectors(this.c,this.b),uc.subVectors(this.a,this.b),bl.cross(uc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Dl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Dl.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,n,i,a){return Dl.getInterpolation(e,this.a,this.b,this.c,r,n,i,a)}containsPoint(e){return Dl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Dl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const n=this.a,i=this.b,a=this.c;let o,s;sg.subVectors(i,n),lg.subVectors(a,n),M5.subVectors(e,n);const l=sg.dot(M5),u=lg.dot(M5);if(l<=0&&u<=0)return r.copy(n);R5.subVectors(e,i);const c=sg.dot(R5),f=lg.dot(R5);if(c>=0&&f<=c)return r.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),r.copy(n).addScaledVector(sg,o);P5.subVectors(e,a);const d=sg.dot(P5),p=lg.dot(P5);if(p>=0&&d<=p)return r.copy(a);const v=d*u-l*p;if(v<=0&&u>=0&&p<=0)return s=u/(u-p),r.copy(n).addScaledVector(lg,s);const g=c*p-d*f;if(g<=0&&f-c>=0&&d-p>=0)return NW.subVectors(a,i),s=(f-c)/(f-c+(d-p)),r.copy(i).addScaledVector(NW,s);const m=1/(g+v+h);return o=v*m,s=h*m,r.copy(n).addScaledVector(sg,o).addScaledVector(lg,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Tre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ff={h:0,s:0,l:0},mb={h:0,s:0,l:0};function N5(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}let Cr=class{constructor(e,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,n)}set(e,r,n){if(r===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,r,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Ti){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,sn.toWorkingColorSpace(this,r),this}setRGB(e,r,n,i=sn.workingColorSpace){return this.r=e,this.g=r,this.b=n,sn.toWorkingColorSpace(this,i),this}setHSL(e,r,n,i=sn.workingColorSpace){if(e=BI(e,1),r=Nr(r,0,1),n=Nr(n,0,1),r===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+r):n+r-n*r,o=2*n-a;this.r=N5(o,a,e+1/3),this.g=N5(o,a,e),this.b=N5(o,a,e-1/3)}return sn.toWorkingColorSpace(this,i),this}setStyle(e,r=Ti){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,r);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,r);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,r);if(o===6)return this.setHex(parseInt(a,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Ti){const n=Tre[e.toLowerCase()];return n!==void 0?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lc(e.r),this.g=Lc(e.g),this.b=Lc(e.b),this}copyLinearToSRGB(e){return this.r=Jg(e.r),this.g=Jg(e.g),this.b=Jg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ti){return sn.fromWorkingColorSpace($a.copy(this),e),Math.round(Nr($a.r*255,0,255))*65536+Math.round(Nr($a.g*255,0,255))*256+Math.round(Nr($a.b*255,0,255))}getHexString(e=Ti){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=sn.workingColorSpace){sn.fromWorkingColorSpace($a.copy(this),r);const n=$a.r,i=$a.g,a=$a.b,o=Math.max(n,i,a),s=Math.min(n,i,a);let l,u;const c=(s+o)/2;if(s===o)l=0,u=0;else{const f=o-s;switch(u=c<=.5?f/(o+s):f/(2-o-s),o){case n:l=(i-a)/f+(i<a?6:0);break;case i:l=(a-n)/f+2;break;case a:l=(n-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,r=sn.workingColorSpace){return sn.fromWorkingColorSpace($a.copy(this),r),e.r=$a.r,e.g=$a.g,e.b=$a.b,e}getStyle(e=Ti){sn.fromWorkingColorSpace($a.copy(this),e);const r=$a.r,n=$a.g,i=$a.b;return e!==Ti?`color(${e} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,r,n){return this.getHSL(Ff),this.setHSL(Ff.h+e,Ff.s+r,Ff.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,n){return this.r=e.r+(r.r-e.r)*n,this.g=e.g+(r.g-e.g)*n,this.b=e.b+(r.b-e.b)*n,this}lerpHSL(e,r){this.getHSL(Ff),e.getHSL(mb);const n=W1(Ff.h,mb.h,r),i=W1(Ff.s,mb.s,r),a=W1(Ff.l,mb.l,r);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*r+a[3]*n+a[6]*i,this.g=a[1]*r+a[4]*n+a[7]*i,this.b=a[2]*r+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const $a=new Cr;Cr.NAMES=Tre;let J9e=0;class Lu extends Yp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:J9e++}),this.uuid=zl(),this.name="",this.type="Material",this.blending=qg,this.side=Gc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=XR,this.blendDst=KR,this.blendEquation=Wd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Cr(0,0,0),this.blendAlpha=0,this.depthFunc=wm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xW,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qv,this.stencilZFail=Qv,this.stencilZPass=Qv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const n=e[r];if(n===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const i=this[r];if(i===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[r]=n}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==qg&&(n.blending=this.blending),this.side!==Gc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==XR&&(n.blendSrc=this.blendSrc),this.blendDst!==KR&&(n.blendDst=this.blendDst),this.blendEquation!==Wd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==wm&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xW&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qv&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Qv&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Qv&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(r){const a=i(e.textures),o=i(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let n=null;if(r!==null){const i=r.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=r[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ah extends Lu{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Cr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ku,this.combine=ore,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Di=new ae,yb=new dr;class Ui{constructor(e,r,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=n,this.usage=L8,this.updateRanges=[],this.gpuType=Ol,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,n){e*=this.itemSize,n*=r.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=r.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,n=this.count;r<n;r++)yb.fromBufferAttribute(this,r),yb.applyMatrix3(e),this.setXY(r,yb.x,yb.y);else if(this.itemSize===3)for(let r=0,n=this.count;r<n;r++)Di.fromBufferAttribute(this,r),Di.applyMatrix3(e),this.setXYZ(r,Di.x,Di.y,Di.z);return this}applyMatrix4(e){for(let r=0,n=this.count;r<n;r++)Di.fromBufferAttribute(this,r),Di.applyMatrix4(e),this.setXYZ(r,Di.x,Di.y,Di.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)Di.fromBufferAttribute(this,r),Di.applyNormalMatrix(e),this.setXYZ(r,Di.x,Di.y,Di.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)Di.fromBufferAttribute(this,r),Di.transformDirection(e),this.setXYZ(r,Di.x,Di.y,Di.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let n=this.array[e*this.itemSize+r];return this.normalized&&(n=Ll(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=An(n,this.array)),this.array[e*this.itemSize+r]=n,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=Ll(r,this.array)),r}setX(e,r){return this.normalized&&(r=An(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=Ll(r,this.array)),r}setY(e,r){return this.normalized&&(r=An(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=Ll(r,this.array)),r}setZ(e,r){return this.normalized&&(r=An(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=Ll(r,this.array)),r}setW(e,r){return this.normalized&&(r=An(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,n){return e*=this.itemSize,this.normalized&&(r=An(r,this.array),n=An(n,this.array)),this.array[e+0]=r,this.array[e+1]=n,this}setXYZ(e,r,n,i){return e*=this.itemSize,this.normalized&&(r=An(r,this.array),n=An(n,this.array),i=An(i,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,r,n,i,a){return e*=this.itemSize,this.normalized&&(r=An(r,this.array),n=An(n,this.array),i=An(i,this.array),a=An(a,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==L8&&(e.usage=this.usage),e}}class Cre extends Ui{constructor(e,r,n){super(new Uint16Array(e),r,n)}}class Ere extends Ui{constructor(e,r,n){super(new Uint32Array(e),r,n)}}class tl extends Ui{constructor(e,r,n){super(new Float32Array(e),r,n)}}let Q9e=0;const Is=new Rr,O5=new si,ug=new ae,ls=new ll,jy=new ll,ha=new ae;class Zo extends Yp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Q9e++}),this.uuid=zl(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Sre(e)?Ere:Cre)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,n=0){this.groups.push({start:e,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new Fr().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Is.makeRotationFromQuaternion(e),this.applyMatrix4(Is),this}rotateX(e){return Is.makeRotationX(e),this.applyMatrix4(Is),this}rotateY(e){return Is.makeRotationY(e),this.applyMatrix4(Is),this}rotateZ(e){return Is.makeRotationZ(e),this.applyMatrix4(Is),this}translate(e,r,n){return Is.makeTranslation(e,r,n),this.applyMatrix4(Is),this}scale(e,r,n){return Is.makeScale(e,r,n),this.applyMatrix4(Is),this}lookAt(e){return O5.lookAt(e),O5.updateMatrix(),this.applyMatrix4(O5.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ug).negate(),this.translate(ug.x,ug.y,ug.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const n=[];for(let i=0,a=e.length;i<a;i++){const o=e[i];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new tl(n,3))}else{const n=Math.min(e.length,r.count);for(let i=0;i<n;i++){const a=e[i];r.setXYZ(i,a.x,a.y,a.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ll);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let n=0,i=r.length;n<i;n++){const a=r[n];ls.setFromBufferAttribute(a),this.morphTargetsRelative?(ha.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint(ha),ha.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint(ha)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ul);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const n=this.boundingSphere.center;if(ls.setFromBufferAttribute(e),r)for(let a=0,o=r.length;a<o;a++){const s=r[a];jy.setFromBufferAttribute(s),this.morphTargetsRelative?(ha.addVectors(ls.min,jy.min),ls.expandByPoint(ha),ha.addVectors(ls.max,jy.max),ls.expandByPoint(ha)):(ls.expandByPoint(jy.min),ls.expandByPoint(jy.max))}ls.getCenter(n);let i=0;for(let a=0,o=e.count;a<o;a++)ha.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(ha));if(r)for(let a=0,o=r.length;a<o;a++){const s=r[a],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)ha.fromBufferAttribute(s,u),l&&(ug.fromBufferAttribute(e,u),ha.add(ug)),i=Math.max(i,n.distanceToSquared(ha))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=r.position,i=r.normal,a=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ui(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],l=[];for(let M=0;M<n.count;M++)s[M]=new ae,l[M]=new ae;const u=new ae,c=new ae,f=new ae,h=new dr,d=new dr,p=new dr,v=new ae,g=new ae;function m(M,A,R){u.fromBufferAttribute(n,M),c.fromBufferAttribute(n,A),f.fromBufferAttribute(n,R),h.fromBufferAttribute(a,M),d.fromBufferAttribute(a,A),p.fromBufferAttribute(a,R),c.sub(u),f.sub(u),d.sub(h),p.sub(h);const L=1/(d.x*p.y-p.x*d.y);isFinite(L)&&(v.copy(c).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(L),g.copy(f).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(L),s[M].add(v),s[A].add(v),s[R].add(v),l[M].add(g),l[A].add(g),l[R].add(g))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let M=0,A=x.length;M<A;++M){const R=x[M],L=R.start,I=R.count;for(let N=L,k=L+I;N<k;N+=3)m(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const S=new ae,b=new ae,T=new ae,w=new ae;function E(M){T.fromBufferAttribute(i,M),w.copy(T);const A=s[M];S.copy(A),S.sub(T.multiplyScalar(T.dot(A))).normalize(),b.crossVectors(w,A);const L=b.dot(l[M])<0?-1:1;o.setXYZW(M,S.x,S.y,S.z,L)}for(let M=0,A=x.length;M<A;++M){const R=x[M],L=R.start,I=R.count;for(let N=L,k=L+I;N<k;N+=3)E(e.getX(N+0)),E(e.getX(N+1)),E(e.getX(N+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ui(new Float32Array(r.count*3),3),this.setAttribute("normal",n);else for(let h=0,d=n.count;h<d;h++)n.setXYZ(h,0,0,0);const i=new ae,a=new ae,o=new ae,s=new ae,l=new ae,u=new ae,c=new ae,f=new ae;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(r,p),a.fromBufferAttribute(r,v),o.fromBufferAttribute(r,g),c.subVectors(o,a),f.subVectors(i,a),c.cross(f),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,v),u.fromBufferAttribute(n,g),s.add(c),l.add(c),u.add(c),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(g,u.x,u.y,u.z)}else for(let h=0,d=r.count;h<d;h+=3)i.fromBufferAttribute(r,h+0),a.fromBufferAttribute(r,h+1),o.fromBufferAttribute(r,h+2),c.subVectors(o,a),f.subVectors(i,a),c.cross(f),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,n=e.count;r<n;r++)ha.fromBufferAttribute(e,r),ha.normalize(),e.setXYZ(r,ha.x,ha.y,ha.z)}toNonIndexed(){function e(s,l){const u=s.array,c=s.itemSize,f=s.normalized,h=new u.constructor(l.length*c);let d=0,p=0;for(let v=0,g=l.length;v<g;v++){s.isInterleavedBufferAttribute?d=l[v]*s.data.stride+s.offset:d=l[v]*c;for(let m=0;m<c;m++)h[p++]=u[d++]}return new Ui(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Zo,n=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=e(l,n);r.setAttribute(s,u)}const a=this.morphAttributes;for(const s in a){const l=[],u=a[s];for(let c=0,f=u.length;c<f;c++){const h=u[c],d=e(h,n);l.push(d)}r.morphAttributes[s]=l}r.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const u=o[s];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const d=u[f];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(r));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(r))}const a=e.morphAttributes;for(const u in a){const c=[],f=a[u];for(let h=0,d=f.length;h<d;h++)c.push(f[h].clone(r));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const OW=new Rr,Ed=new g0,_b=new ul,kW=new ae,xb=new ae,Sb=new ae,bb=new ae,k5=new ae,wb=new ae,FW=new ae,Tb=new ae;class On extends si{constructor(e=new Zo,r=new ah){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}getVertexPosition(e,r){const n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,o=n.morphTargetsRelative;r.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(a&&s){wb.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=s[l],f=a[l];c!==0&&(k5.fromBufferAttribute(f,e),o?wb.addScaledVector(k5,c):wb.addScaledVector(k5.sub(r),c))}r.add(wb)}return r}raycast(e,r){const n=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_b.copy(n.boundingSphere),_b.applyMatrix4(a),Ed.copy(e.ray).recast(e.near),!(_b.containsPoint(Ed.origin)===!1&&(Ed.intersectSphere(_b,kW)===null||Ed.origin.distanceToSquared(kW)>ZO(e.far-e.near,2)))&&(OW.copy(a).invert(),Ed.copy(e.ray).applyMatrix4(OW),!(n.boundingBox!==null&&Ed.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,r,Ed)))}_computeIntersections(e,r,n){let i;const a=this.geometry,o=this.material,s=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,f=a.attributes.normal,h=a.groups,d=a.drawRange;if(s!==null)if(Array.isArray(o))for(let p=0,v=h.length;p<v;p++){const g=h[p],m=o[g.materialIndex],x=Math.max(g.start,d.start),S=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let b=x,T=S;b<T;b+=3){const w=s.getX(b),E=s.getX(b+1),M=s.getX(b+2);i=Cb(this,m,e,n,u,c,f,w,E,M),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const p=Math.max(0,d.start),v=Math.min(s.count,d.start+d.count);for(let g=p,m=v;g<m;g+=3){const x=s.getX(g),S=s.getX(g+1),b=s.getX(g+2);i=Cb(this,o,e,n,u,c,f,x,S,b),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=h.length;p<v;p++){const g=h[p],m=o[g.materialIndex],x=Math.max(g.start,d.start),S=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let b=x,T=S;b<T;b+=3){const w=b,E=b+1,M=b+2;i=Cb(this,m,e,n,u,c,f,w,E,M),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const p=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let g=p,m=v;g<m;g+=3){const x=g,S=g+1,b=g+2;i=Cb(this,o,e,n,u,c,f,x,S,b),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}}}function e6e(t,e,r,n,i,a,o,s){let l;if(e.side===_o?l=n.intersectTriangle(o,a,i,!0,s):l=n.intersectTriangle(i,a,o,e.side===Gc,s),l===null)return null;Tb.copy(s),Tb.applyMatrix4(t.matrixWorld);const u=r.ray.origin.distanceTo(Tb);return u<r.near||u>r.far?null:{distance:u,point:Tb.clone(),object:t}}function Cb(t,e,r,n,i,a,o,s,l,u){t.getVertexPosition(s,xb),t.getVertexPosition(l,Sb),t.getVertexPosition(u,bb);const c=e6e(t,e,r,n,xb,Sb,bb,FW);if(c){const f=new ae;Dl.getBarycoord(FW,xb,Sb,bb,f),i&&(c.uv=Dl.getInterpolatedAttribute(i,s,l,u,f,new dr)),a&&(c.uv1=Dl.getInterpolatedAttribute(a,s,l,u,f,new dr)),o&&(c.normal=Dl.getInterpolatedAttribute(o,s,l,u,f,new ae),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new ae,materialIndex:0};Dl.getNormal(xb,Sb,bb,h.normal),c.face=h,c.barycoord=f}return c}class m0 extends Zo{constructor(e=1,r=1,n=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,n,r,e,o,a,0),p("z","y","x",1,-1,n,r,-e,o,a,1),p("x","z","y",1,1,e,n,r,i,o,2),p("x","z","y",1,-1,e,n,-r,i,o,3),p("x","y","z",1,-1,e,r,n,i,a,4),p("x","y","z",-1,-1,e,r,-n,i,a,5),this.setIndex(l),this.setAttribute("position",new tl(u,3)),this.setAttribute("normal",new tl(c,3)),this.setAttribute("uv",new tl(f,2));function p(v,g,m,x,S,b,T,w,E,M,A){const R=b/E,L=T/M,I=b/2,N=T/2,k=w/2,z=E+1,B=M+1;let V=0,F=0;const $=new ae;for(let W=0;W<B;W++){const H=W*L-N;for(let X=0;X<z;X++){const te=X*R-I;$[v]=te*x,$[g]=H*S,$[m]=k,u.push($.x,$.y,$.z),$[v]=0,$[g]=0,$[m]=w>0?1:-1,c.push($.x,$.y,$.z),f.push(X/E),f.push(1-W/M),V+=1}}for(let W=0;W<M;W++)for(let H=0;H<E;H++){const X=h+H+z*W,te=h+H+z*(W+1),Y=h+(H+1)+z*(W+1),ee=h+(H+1)+z*W;l.push(X,te,ee),l.push(te,Y,ee),F+=6}s.addGroup(d,F,A),d+=F,h+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pm(t){const e={};for(const r in t){e[r]={};for(const n in t[r]){const i=t[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][n]=null):e[r][n]=i.clone():Array.isArray(i)?e[r][n]=i.slice():e[r][n]=i}}return e}function lo(t){const e={};for(let r=0;r<t.length;r++){const n=Pm(t[r]);for(const i in n)e[i]=n[i]}return e}function t6e(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}function Are(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:sn.workingColorSpace}const VI={clone:Pm,merge:lo};var r6e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,n6e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fu extends Lu{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=r6e,this.fragmentShader=n6e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pm(e.uniforms),this.uniformsGroups=t6e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?r.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?r.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?r.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?r.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?r.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?r.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?r.uniforms[i]={type:"m4",value:o.toArray()}:r.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class Mre extends si{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rr,this.projectionMatrix=new Rr,this.projectionMatrixInverse=new Rr,this.coordinateSystem=bc}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Bf=new ae,BW=new dr,zW=new dr;class po extends Mre{constructor(e=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Rm*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(G1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Rm*2*Math.atan(Math.tan(G1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,n){Bf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Bf.x,Bf.y).multiplyScalar(-e/Bf.z),Bf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Bf.x,Bf.y).multiplyScalar(-e/Bf.z)}getViewSize(e,r){return this.getViewBounds(e,BW,zW),r.subVectors(zW,BW)}setViewOffset(e,r,n,i,a,o){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(G1*.5*this.fov)/this.zoom,n=2*r,i=this.aspect*n,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;a+=o.offsetX*i/l,r-=o.offsetY*n/u,i*=o.width/l,n*=o.height/u}const s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,r,r-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const cg=-90,fg=1;class i6e extends si{constructor(e,r,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new po(cg,fg,e,r);i.layers=this.layers,this.add(i);const a=new po(cg,fg,e,r);a.layers=this.layers,this.add(a);const o=new po(cg,fg,e,r);o.layers=this.layers,this.add(o);const s=new po(cg,fg,e,r);s.layers=this.layers,this.add(s);const l=new po(cg,fg,e,r);l.layers=this.layers,this.add(l);const u=new po(cg,fg,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[n,i,a,o,s,l]=r;for(const u of r)this.remove(u);if(e===bc)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Qw)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,s,l,u,c]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(r,a),e.setRenderTarget(n,1,i),e.render(r,o),e.setRenderTarget(n,2,i),e.render(r,s),e.setRenderTarget(n,3,i),e.render(r,l),e.setRenderTarget(n,4,i),e.render(r,u),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,i),e.render(r,c),e.setRenderTarget(f,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Rre extends ya{constructor(e,r,n,i,a,o,s,l,u,c){e=e!==void 0?e:[],r=r!==void 0?r:Tm,super(e,r,n,i,a,o,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class a6e extends Op{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Rre(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:vs}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new m0(5,5,5),a=new Fu({name:"CubemapFromEquirect",uniforms:Pm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:_o,blending:vh});a.uniforms.tEquirect.value=r;const o=new On(i,a),s=r.minFilter;return r.minFilter===Sc&&(r.minFilter=vs),new i6e(1,10,this).update(e,o),r.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,r,n,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(r,n,i);e.setRenderTarget(a)}}class Pre extends si{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ku,this.environmentIntensity=1,this.environmentRotation=new ku,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class Lre{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=L8,this.updateRanges=[],this.version=0,this.uuid=zl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,n){e*=this.stride,n*=r.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=r.array[n+i];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(r,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ao=new ae;class wc{constructor(e,r,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,n=this.data.count;r<n;r++)ao.fromBufferAttribute(this,r),ao.applyMatrix4(e),this.setXYZ(r,ao.x,ao.y,ao.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)ao.fromBufferAttribute(this,r),ao.applyNormalMatrix(e),this.setXYZ(r,ao.x,ao.y,ao.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)ao.fromBufferAttribute(this,r),ao.transformDirection(e),this.setXYZ(r,ao.x,ao.y,ao.z);return this}getComponent(e,r){let n=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(n=Ll(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=An(n,this.array)),this.data.array[e*this.data.stride+this.offset+r]=n,this}setX(e,r){return this.normalized&&(r=An(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=An(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=An(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=An(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=Ll(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=Ll(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=Ll(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=Ll(r,this.array)),r}setXY(e,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(r=An(r,this.array),n=An(n,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this}setXYZ(e,r,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=An(r,this.array),n=An(n,this.array),i=An(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,r,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(r=An(r,this.array),n=An(n,this.array),i=An(i,this.array),a=An(a,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)r.push(this.data.array[i+a])}return new Ui(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)r.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const UW=new ae,VW=new an,HW=new an,o6e=new ae,GW=new Rr,Eb=new ae,F5=new ul,WW=new Rr,B5=new g0;class s6e extends On{constructor(e,r){super(e,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=gW,this.bindMatrix=new Rr,this.bindMatrixInverse=new Rr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ll),this.boundingBox.makeEmpty();const r=e.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,Eb),this.boundingBox.expandByPoint(Eb)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ul),this.boundingSphere.makeEmpty();const r=e.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,Eb),this.boundingSphere.expandByPoint(Eb)}copy(e,r){return super.copy(e,r),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,r){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),F5.copy(this.boundingSphere),F5.applyMatrix4(i),e.ray.intersectsSphere(F5)!==!1&&(WW.copy(i).invert(),B5.copy(e.ray).applyMatrix4(WW),!(this.boundingBox!==null&&B5.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,r,B5)))}getVertexPosition(e,r){return super.getVertexPosition(e,r),this.applyBoneTransform(e,r),r}bind(e,r){this.skeleton=e,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){e.fromBufferAttribute(r,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),r.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===gW?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===o9e?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,r){const n=this.skeleton,i=this.geometry;VW.fromBufferAttribute(i.attributes.skinIndex,e),HW.fromBufferAttribute(i.attributes.skinWeight,e),UW.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let a=0;a<4;a++){const o=HW.getComponent(a);if(o!==0){const s=VW.getComponent(a);GW.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),r.addScaledVector(o6e.copy(UW).applyMatrix4(GW),o)}}return r.applyMatrix4(this.bindMatrixInverse)}}class Dre extends si{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ire extends ya{constructor(e=null,r=1,n=1,i,a,o,s,l,u=xo,c=xo,f,h){super(null,o,s,l,u,c,i,a,f,h),this.isDataTexture=!0,this.image={data:e,width:r,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $W=new Rr,l6e=new Rr;let u6e=class Nre{constructor(e=[],r=[]){this.uuid=zl(),this.bones=e.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),r.length===0)this.calculateInverses();else if(e.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Rr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,r=this.bones.length;e<r;e++){const n=new Rr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,r=this.bones.length;e<r;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,r=this.bones.length;e<r;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,r=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const s=e[a]?e[a].matrixWorld:l6e;$W.multiplyMatrices(s,r[a]),$W.toArray(n,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Nre(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const r=new Float32Array(e*e*4);r.set(this.boneMatrices);const n=new Ire(r,e,e,qs,Ol);return n.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=n,this}getBoneByName(e){for(let r=0,n=this.bones.length;r<n;r++){const i=this.bones[r];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,r){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const a=e.bones[n];let o=r[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new Dre),this.bones.push(o),this.boneInverses.push(new Rr().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const r=this.bones,n=this.boneInverses;for(let i=0,a=r.length;i<a;i++){const o=r[i];e.bones.push(o.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}};class D8 extends Ui{constructor(e,r,n,i=1){super(e,r,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hg=new Rr,jW=new Rr,Ab=[],XW=new ll,c6e=new Rr,Xy=new On,Ky=new ul;class f6e extends On{constructor(e,r,n){super(e,r),this.isInstancedMesh=!0,this.instanceMatrix=new D8(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,c6e)}computeBoundingBox(){const e=this.geometry,r=this.count;this.boundingBox===null&&(this.boundingBox=new ll),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,hg),XW.copy(e.boundingBox).applyMatrix4(hg),this.boundingBox.union(XW)}computeBoundingSphere(){const e=this.geometry,r=this.count;this.boundingSphere===null&&(this.boundingSphere=new ul),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,hg),Ky.copy(e.boundingSphere).applyMatrix4(hg),this.boundingSphere.union(Ky)}copy(e,r){return super.copy(e,r),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,r){r.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,r){r.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,r){const n=r.morphTargetInfluences,i=this.morphTexture.source.data.data,a=n.length+1,o=e*a+1;for(let s=0;s<n.length;s++)n[s]=i[o+s]}raycast(e,r){const n=this.matrixWorld,i=this.count;if(Xy.geometry=this.geometry,Xy.material=this.material,Xy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ky.copy(this.boundingSphere),Ky.applyMatrix4(n),e.ray.intersectsSphere(Ky)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,hg),jW.multiplyMatrices(n,hg),Xy.matrixWorld=jW,Xy.raycast(e,Ab);for(let o=0,s=Ab.length;o<s;o++){const l=Ab[o];l.instanceId=a,l.object=this,r.push(l)}Ab.length=0}}setColorAt(e,r){this.instanceColor===null&&(this.instanceColor=new D8(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),r.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,r){r.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,r){const n=r.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Ire(new Float32Array(i*this.count),i,this.count,NI,Ol));const a=this.morphTexture.source.data.data;let o=0;for(let u=0;u<n.length;u++)o+=n[u];const s=this.geometry.morphTargetsRelative?1:1-o,l=i*e;a[l]=s,a.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const z5=new ae,h6e=new ae,d6e=new Fr;class Wf{constructor(e=new ae(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,n,i){return this.normal.set(e,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,n){const i=z5.subVectors(n,r).cross(h6e.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const n=e.delta(z5),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:r.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const r=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return r<0&&n>0||n<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const n=r||d6e.getNormalMatrix(e),i=this.coplanarPoint(z5).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ad=new ul,Mb=new ae;class HI{constructor(e=new Wf,r=new Wf,n=new Wf,i=new Wf,a=new Wf,o=new Wf){this.planes=[e,r,n,i,a,o]}set(e,r,n,i,a,o){const s=this.planes;return s[0].copy(e),s[1].copy(r),s[2].copy(n),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(e){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,r=bc){const n=this.planes,i=e.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],f=i[6],h=i[7],d=i[8],p=i[9],v=i[10],g=i[11],m=i[12],x=i[13],S=i[14],b=i[15];if(n[0].setComponents(l-a,h-u,g-d,b-m).normalize(),n[1].setComponents(l+a,h+u,g+d,b+m).normalize(),n[2].setComponents(l+o,h+c,g+p,b+x).normalize(),n[3].setComponents(l-o,h-c,g-p,b-x).normalize(),n[4].setComponents(l-s,h-f,g-v,b-S).normalize(),r===bc)n[5].setComponents(l+s,h+f,g+v,b+S).normalize();else if(r===Qw)n[5].setComponents(s,f,v,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ad.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Ad.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ad)}intersectsSprite(e){return Ad.center.set(0,0,0),Ad.radius=.7071067811865476,Ad.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ad)}intersectsSphere(e){const r=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(r[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const r=this.planes;for(let n=0;n<6;n++){const i=r[n];if(Mb.x=i.normal.x>0?e.max.x:e.min.x,Mb.y=i.normal.y>0?e.max.y:e.min.y,Mb.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Mb)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Ore extends Lu{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Cr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eT=new ae,tT=new ae,KW=new Rr,Yy=new g0,Rb=new ul,U5=new ae,YW=new ae;class GI extends si{constructor(e=new Zo,r=new Ore){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[0];for(let i=1,a=r.count;i<a;i++)eT.fromBufferAttribute(r,i-1),tT.fromBufferAttribute(r,i),n[i]=n[i-1],n[i]+=eT.distanceTo(tT);e.setAttribute("lineDistance",new tl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Rb.copy(n.boundingSphere),Rb.applyMatrix4(i),Rb.radius+=a,e.ray.intersectsSphere(Rb)===!1)return;KW.copy(i).invert(),Yy.copy(e.ray).applyMatrix4(KW);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=this.isLineSegments?2:1,c=n.index,h=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let v=d,g=p-1;v<g;v+=u){const m=c.getX(v),x=c.getX(v+1),S=Pb(this,e,Yy,l,m,x);S&&r.push(S)}if(this.isLineLoop){const v=c.getX(p-1),g=c.getX(d),m=Pb(this,e,Yy,l,v,g);m&&r.push(m)}}else{const d=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let v=d,g=p-1;v<g;v+=u){const m=Pb(this,e,Yy,l,v,v+1);m&&r.push(m)}if(this.isLineLoop){const v=Pb(this,e,Yy,l,p-1,d);v&&r.push(v)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}function Pb(t,e,r,n,i,a){const o=t.geometry.attributes.position;if(eT.fromBufferAttribute(o,i),tT.fromBufferAttribute(o,a),r.distanceSqToSegment(eT,tT,U5,YW)>n)return;U5.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(U5);if(!(l<e.near||l>e.far))return{distance:l,point:YW.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:t}}const qW=new ae,ZW=new ae;class p6e extends GI{constructor(e,r){super(e,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[];for(let i=0,a=r.count;i<a;i+=2)qW.fromBufferAttribute(r,i),ZW.fromBufferAttribute(r,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+qW.distanceTo(ZW);e.setAttribute("lineDistance",new tl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class v6e extends GI{constructor(e,r){super(e,r),this.isLineLoop=!0,this.type="LineLoop"}}class kre extends Lu{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Cr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JW=new Rr,I8=new g0,Lb=new ul,Db=new ae;class Fre extends si{constructor(e=new Zo,r=new kre){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,r){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Lb.copy(n.boundingSphere),Lb.applyMatrix4(i),Lb.radius+=a,e.ray.intersectsSphere(Lb)===!1)return;JW.copy(i).invert(),I8.copy(e.ray).applyMatrix4(JW);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=n.index,f=n.attributes.position;if(u!==null){const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let p=h,v=d;p<v;p++){const g=u.getX(p);Db.fromBufferAttribute(f,g),QW(Db,g,l,i,e,r,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let p=h,v=d;p<v;p++)Db.fromBufferAttribute(f,p),QW(Db,p,l,i,e,r,this)}}updateMorphTargets(){const r=this.geometry.morphAttributes,n=Object.keys(r);if(n.length>0){const i=r[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}function QW(t,e,r,n,i,a,o){const s=I8.distanceSqToPoint(t);if(s<r){const l=new ae;I8.closestPointToPoint(t,l),l.applyMatrix4(n);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class ip extends si{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Bre extends ya{constructor(e,r,n,i,a,o,s,l,u,c=Zg){if(c!==Zg&&c!==Mm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Zg&&(n=Np),n===void 0&&c===Mm&&(n=Am),super(null,i,a,o,s,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=s!==void 0?s:xo,this.minFilter=l!==void 0?l:xo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class g6e{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const n=this.getUtoTmapping(e);return this.getPoint(n,r)}getPoints(e=5){const r=[];for(let n=0;n<=e;n++)r.push(this.getPoint(n/e));return r}getSpacedPoints(e=5){const r=[];for(let n=0;n<=e;n++)r.push(this.getPointAt(n/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let n,i=this.getPoint(0),a=0;r.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),a+=n.distanceTo(i),r.push(a),i=n;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const n=this.getLengths();let i=0;const a=n.length;let o;r?o=r:o=e*n[a-1];let s=0,l=a-1,u;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),u=n[i]-o,u<0)s=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,n[i]===o)return i/(a-1);const c=n[i],h=n[i+1]-c,d=(o-c)/h;return(i+d)/(a-1)}getTangent(e,r){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const o=this.getPoint(i),s=this.getPoint(a),l=r||(o.isVector2?new dr:new ae);return l.copy(s).sub(o).normalize(),l}getTangentAt(e,r){const n=this.getUtoTmapping(e);return this.getTangent(n,r)}computeFrenetFrames(e,r){const n=new ae,i=[],a=[],o=[],s=new ae,l=new Rr;for(let d=0;d<=e;d++){const p=d/e;i[d]=this.getTangentAt(p,new ae)}a[0]=new ae,o[0]=new ae;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,n.set(1,0,0)),f<=u&&(u=f,n.set(0,1,0)),h<=u&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let d=1;d<=e;d++){if(a[d]=a[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(i[d-1],i[d]),s.length()>Number.EPSILON){s.normalize();const p=Math.acos(Nr(i[d-1].dot(i[d]),-1,1));a[d].applyMatrix4(l.makeRotationAxis(s,p))}o[d].crossVectors(i[d],a[d])}if(r===!0){let d=Math.acos(Nr(a[0].dot(a[e]),-1,1));d/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(d=-d);for(let p=1;p<=e;p++)a[p].applyMatrix4(l.makeRotationAxis(i[p],d*p)),o[p].crossVectors(i[p],a[p])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function WI(){let t=0,e=0,r=0,n=0;function i(a,o,s,l){t=a,e=s,r=-3*a+3*o-2*s-l,n=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){i(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,f){let h=(o-a)/u-(s-a)/(u+c)+(s-o)/c,d=(s-o)/c-(l-o)/(c+f)+(l-s)/f;h*=c,d*=c,i(o,s,h,d)},calc:function(a){const o=a*a,s=o*a;return t+e*a+r*o+n*s}}}const Ib=new ae,V5=new WI,H5=new WI,G5=new WI;class m6e extends g6e{constructor(e=[],r=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=n,this.tension=i}getPoint(e,r=new ae){const n=r,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:l===0&&s===a-1&&(s=a-2,l=1);let u,c;this.closed||s>0?u=i[(s-1)%a]:(Ib.subVectors(i[0],i[1]).add(i[0]),u=Ib);const f=i[s%a],h=i[(s+1)%a];if(this.closed||s+2<a?c=i[(s+2)%a]:(Ib.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=Ib),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(f),d),v=Math.pow(f.distanceToSquared(h),d),g=Math.pow(h.distanceToSquared(c),d);v<1e-4&&(v=1),p<1e-4&&(p=v),g<1e-4&&(g=v),V5.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,p,v,g),H5.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,p,v,g),G5.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,p,v,g)}else this.curveType==="catmullrom"&&(V5.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),H5.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),G5.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return n.set(V5.calc(l),H5.calc(l),G5.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){const i=e.points[r];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,n=this.points.length;r<n;r++){const i=this.points[r];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){const i=e.points[r];this.points.push(new ae().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}class b4 extends Zo{constructor(e=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:n,heightSegments:i};const a=e/2,o=r/2,s=Math.floor(n),l=Math.floor(i),u=s+1,c=l+1,f=e/s,h=r/l,d=[],p=[],v=[],g=[];for(let m=0;m<c;m++){const x=m*h-o;for(let S=0;S<u;S++){const b=S*f-a;p.push(b,-x,0),v.push(0,0,1),g.push(S/s),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let x=0;x<s;x++){const S=x+u*m,b=x+u*(m+1),T=x+1+u*(m+1),w=x+1+u*m;d.push(S,b,w),d.push(b,T,w)}this.setIndex(d),this.setAttribute("position",new tl(p,3)),this.setAttribute("normal",new tl(v,3)),this.setAttribute("uv",new tl(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b4(e.width,e.height,e.widthSegments,e.heightSegments)}}class y6e extends Zo{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const r=[],n=new Set,i=new ae,a=new ae;if(e.index!==null){const o=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,d=f.count;for(let p=h,v=h+d;p<v;p+=3)for(let g=0;g<3;g++){const m=s.getX(p+g),x=s.getX(p+(g+1)%3);i.fromBufferAttribute(o,m),a.fromBufferAttribute(o,x),e$(i,a,n)===!0&&(r.push(i.x,i.y,i.z),r.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let s=0,l=o.count/3;s<l;s++)for(let u=0;u<3;u++){const c=3*s+u,f=3*s+(u+1)%3;i.fromBufferAttribute(o,c),a.fromBufferAttribute(o,f),e$(i,a,n)===!0&&(r.push(i.x,i.y,i.z),r.push(a.x,a.y,a.z))}}this.setAttribute("position",new tl(r,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function e$(t,e,r){const n=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return r.has(n)===!0||r.has(i)===!0?!1:(r.add(n),r.add(i),!0)}class H_ extends Lu{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Cr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Cr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_re,this.normalScale=new dr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ku,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gu extends H_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Cr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Cr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Cr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _6e extends Lu{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=u9e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class x6e extends Lu{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Nb(t,e,r){return!t||!r&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function S6e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function b6e(t){function e(i,a){return t[i]-t[a]}const r=t.length,n=new Array(r);for(let i=0;i!==r;++i)n[i]=i;return n.sort(e),n}function t$(t,e,r){const n=t.length,i=new t.constructor(n);for(let a=0,o=0;o!==n;++a){const s=r[a]*e;for(let l=0;l!==e;++l)i[o++]=t[s+l]}return i}function zre(t,e,r,n){let i=1,a=t[0];for(;a!==void 0&&a[n]===void 0;)a=t[i++];if(a===void 0)return;let o=a[n];if(o!==void 0)if(Array.isArray(o))do o=a[n],o!==void 0&&(e.push(a.time),r.push.apply(r,o)),a=t[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[n],o!==void 0&&(e.push(a.time),o.toArray(r,r.length)),a=t[i++];while(a!==void 0);else do o=a[n],o!==void 0&&(e.push(a.time),r.push(o)),a=t[i++];while(a!==void 0)}class N2{constructor(e,r,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const r=this.parameterPositions;let n=this._cachedIndex,i=r[n],a=r[n-1];e:{t:{let o;r:{n:if(!(e<i)){for(let s=n+2;;){if(i===void 0){if(e<a)break n;return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(a=i,i=r[++n],e<i)break t}o=r.length;break r}if(!(e>=a)){const s=r[1];e<s&&(n=2,a=s);for(let l=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=a,a=r[--n-1],e>=a)break t}o=n,n=0;break r}break e}for(;n<o;){const s=n+o>>>1;e<r[s]?o=s:n=s+1}if(i=r[n],a=r[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)r[o]=n[a+o];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class w6e extends N2{constructor(e,r,n,i){super(e,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mW,endingEnd:mW}}intervalChanged_(e,r,n){const i=this.parameterPositions;let a=e-2,o=e+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case yW:a=e,s=2*r-n;break;case _W:a=i.length-2,s=r+i[a]-i[a+1];break;default:a=e,s=n}if(l===void 0)switch(this.getSettings_().endingEnd){case yW:o=e,l=2*n-r;break;case _W:o=1,l=n+i[1]-i[0];break;default:o=e-1,l=r}const u=(n-r)*.5,c=this.valueSize;this._weightPrev=u/(r-s),this._weightNext=u/(l-n),this._offsetPrev=a*c,this._offsetNext=o*c}interpolate_(e,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-r)/(i-r),v=p*p,g=v*p,m=-h*g+2*h*v-h*p,x=(1+h)*g+(-1.5-2*h)*v+(-.5+h)*p+1,S=(-1-d)*g+(1.5+d)*v+.5*p,b=d*g-d*v;for(let T=0;T!==s;++T)a[T]=m*o[c+T]+x*o[u+T]+S*o[l+T]+b*o[f+T];return a}}class T6e extends N2{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=l-s,c=(n-r)/(i-r),f=1-c;for(let h=0;h!==s;++h)a[h]=o[u+h]*f+o[l+h]*c;return a}}class C6e extends N2{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wu{constructor(e,r,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Nb(r,this.TimeBufferType),this.values=Nb(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const r=e.constructor;let n;if(r.toJSON!==this.toJSON)n=r.toJSON(e);else{n={name:e.name,times:Nb(e.times,Array),values:Nb(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new C6e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new T6e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new w6e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let r;switch(e){case z_:r=this.InterpolantFactoryMethodDiscrete;break;case U_:r=this.InterpolantFactoryMethodLinear;break;case m5:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return z_;case this.InterpolantFactoryMethodLinear:return U_;case this.InterpolantFactoryMethodSmooth:return m5}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=e}return this}scale(e){if(e!==1){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=e}return this}trim(e,r){const n=this.times,i=n.length;let a=0,o=i-1;for(;a!==i&&n[a]<e;)++a;for(;o!==-1&&n[o]>r;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=n.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let e=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==a;s++){const l=n[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),e=!1;break}o=l}if(i!==void 0&&S6e(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),r=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===m5,a=e.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const u=e[s],c=e[s+1];if(u!==c&&(s!==1||u!==e[0]))if(i)l=!0;else{const f=s*n,h=f-n,d=f+n;for(let p=0;p!==n;++p){const v=r[f+p];if(v!==r[h+p]||v!==r[d+p]){l=!0;break}}}if(l){if(s!==o){e[o]=e[s];const f=s*n,h=o*n;for(let d=0;d!==n;++d)r[h+d]=r[f+d]}++o}}if(a>0){e[o]=e[a];for(let s=a*n,l=o*n,u=0;u!==n;++u)r[l+u]=r[s+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=r.slice(0,o*n)):(this.times=e,this.values=r),this}clone(){const e=this.times.slice(),r=this.values.slice(),n=this.constructor,i=new n(this.name,e,r);return i.createInterpolant=this.createInterpolant,i}}Wu.prototype.TimeBufferType=Float32Array;Wu.prototype.ValueBufferType=Float32Array;Wu.prototype.DefaultInterpolation=U_;class y0 extends Wu{constructor(e,r,n){super(e,r,n)}}y0.prototype.ValueTypeName="bool";y0.prototype.ValueBufferType=Array;y0.prototype.DefaultInterpolation=z_;y0.prototype.InterpolantFactoryMethodLinear=void 0;y0.prototype.InterpolantFactoryMethodSmooth=void 0;class Ure extends Wu{}Ure.prototype.ValueTypeName="color";class Lm extends Wu{}Lm.prototype.ValueTypeName="number";class E6e extends N2{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(n-r)/(i-r);let u=e*s;for(let c=u+s;u!==c;u+=4)Ou.slerpFlat(a,0,o,u-s,o,u,l);return a}}class Dm extends Wu{InterpolantFactoryMethodLinear(e){return new E6e(this.times,this.values,this.getValueSize(),e)}}Dm.prototype.ValueTypeName="quaternion";Dm.prototype.InterpolantFactoryMethodSmooth=void 0;class _0 extends Wu{constructor(e,r,n){super(e,r,n)}}_0.prototype.ValueTypeName="string";_0.prototype.ValueBufferType=Array;_0.prototype.DefaultInterpolation=z_;_0.prototype.InterpolantFactoryMethodLinear=void 0;_0.prototype.InterpolantFactoryMethodSmooth=void 0;class Im extends Wu{}Im.prototype.ValueTypeName="vector";class A6e{constructor(e="",r=-1,n=[],i=s9e){this.name=e,this.tracks=n,this.duration=r,this.blendMode=i,this.uuid=zl(),this.duration<0&&this.resetDuration()}static parse(e){const r=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)r.push(R6e(n[o]).scale(i));const a=new this(e.name,e.duration,r,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const r=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=n.length;a!==o;++a)r.push(Wu.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,r,n,i){const a=r.length,o=[];for(let s=0;s<a;s++){let l=[],u=[];l.push((s+a-1)%a,s,(s+1)%a),u.push(0,1,0);const c=b6e(l);l=t$(l,1,c),u=t$(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),o.push(new Lm(".morphTargetInfluences["+r[s].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,r){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===r)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,r,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const u=e[s],c=u.name.match(a);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],r,n));return o}static parseAnimation(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(f,h,d,p,v){if(d.length!==0){const g=[],m=[];zre(d,g,m,p),g.length!==0&&v.push(new f(h,g,m))}},i=[],a=e.name||"default",o=e.fps||30,s=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let v=0;v<h[p].morphTargets.length;v++)d[h[p].morphTargets[v]]=-1;for(const v in d){const g=[],m=[];for(let x=0;x!==h[p].morphTargets.length;++x){const S=h[p];g.push(S.time),m.push(S.morphTarget===v?1:0)}i.push(new Lm(".morphTargetInfluence["+v+"]",g,m))}l=d.length*o}else{const d=".bones["+r[f].name+"]";n(Im,d+".position",h,"pos",i),n(Dm,d+".quaternion",h,"rot",i),n(Im,d+".scale",h,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const e=this.tracks;let r=0;for(let n=0,i=e.length;n!==i;++n){const a=this.tracks[n];r=Math.max(r,a.times[a.times.length-1])}return this.duration=r,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function M6e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lm;case"vector":case"vector2":case"vector3":case"vector4":return Im;case"color":return Ure;case"quaternion":return Dm;case"bool":case"boolean":return y0;case"string":return _0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function R6e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=M6e(t.type);if(t.times===void 0){const r=[],n=[];zre(t.keys,r,n,"value"),t.times=r,t.values=n}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const oh={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class P6e{constructor(e,r,n){const i=this;let a=!1,o=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=n,this.itemStart=function(c){s++,a===!1&&i.onStart!==void 0&&i.onStart(c,o,s),a=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const d=u[f],p=u[f+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const L6e=new P6e;class qp{constructor(e){this.manager=e!==void 0?e:L6e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const n=this;return new Promise(function(i,a){n.load(e,i,r,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}qp.DEFAULT_MATERIAL_NAME="__DEFAULT";const fc={};class D6e extends Error{constructor(e,r){super(e),this.response=r}}class rT extends qp{constructor(e){super(e)}load(e,r,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=oh.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{r&&r(a),this.manager.itemEnd(e)},0),a;if(fc[e]!==void 0){fc[e].push({onLoad:r,onProgress:n,onError:i});return}fc[e]=[],fc[e].push({onLoad:r,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||u.body===void 0||u.body.getReader===void 0)return u;const c=fc[e],f=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),d=h?parseInt(h):0,p=d!==0;let v=0;const g=new ReadableStream({start(m){x();function x(){f.read().then(({done:S,value:b})=>{if(S)m.close();else{v+=b.byteLength;const T=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:d});for(let w=0,E=c.length;w<E;w++){const M=c[w];M.onProgress&&M.onProgress(T)}m.enqueue(b),x()}},S=>{m.error(S)})}}});return new Response(g)}else throw new D6e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return u.json();default:if(s===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(s),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return u.arrayBuffer().then(p=>d.decode(p))}}}).then(u=>{oh.add(e,u);const c=fc[e];delete fc[e];for(let f=0,h=c.length;f<h;f++){const d=c[f];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=fc[e];if(c===void 0)throw this.manager.itemError(e),u;delete fc[e];for(let f=0,h=c.length;f<h;f++){const d=c[f];d.onError&&d.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class I6e extends qp{constructor(e){super(e)}load(e,r,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=oh.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){r&&r(o),a.manager.itemEnd(e)},0),o;const s=V_("img");function l(){c(),oh.add(e,this),r&&r(this),a.manager.itemEnd(e)}function u(f){c(),i&&i(f),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}class N8 extends qp{constructor(e){super(e)}load(e,r,n,i){const a=new ya,o=new I6e(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){a.image=s,a.needsUpdate=!0,r!==void 0&&r(a)},n,i),a}}class w4 extends si{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Cr(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}const W5=new Rr,r$=new ae,n$=new ae;class $I{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dr(512,512),this.map=null,this.mapPass=null,this.matrix=new Rr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new HI,this._frameExtents=new dr(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,n=this.matrix;r$.setFromMatrixPosition(e.matrixWorld),r.position.copy(r$),n$.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(n$),r.updateMatrixWorld(),W5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(W5),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(W5)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class N6e extends $I{constructor(){super(new po(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,n=Rm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||r.far;(n!==r.fov||i!==r.aspect||a!==r.far)&&(r.fov=n,r.aspect=i,r.far=a,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O6e extends w4{constructor(e,r,n=0,i=Math.PI/3,a=0,o=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(si.DEFAULT_UP),this.updateMatrix(),this.target=new si,this.distance=n,this.angle=i,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new N6e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const i$=new Rr,qy=new ae,$5=new ae;class k6e extends $I{constructor(){super(new po(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new dr(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,r=0){const n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),qy.setFromMatrixPosition(e.matrixWorld),n.position.copy(qy),$5.copy(n.position),$5.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt($5),n.updateMatrixWorld(),i.makeTranslation(-qy.x,-qy.y,-qy.z),i$.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i$)}}class Vre extends w4{constructor(e,r,n=0,i=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new k6e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jI extends Mre{constructor(e=-1,r=1,n=1,i=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=n,this.bottom=i,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,n,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,o=n+e,s=i+r,l=i-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,s-=c*this.view.offsetY,l=s-c*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class F6e extends $I{constructor(){super(new jI(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hre extends w4{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(si.DEFAULT_UP),this.updateMatrix(),this.target=new si,this.shadow=new F6e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class B6e extends w4{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class $1{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let r="";for(let n=0,i=e.length;n<i;n++)r+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(r))}catch(n){return r}}static extractUrlBase(e){const r=e.lastIndexOf("/");return r===-1?"./":e.slice(0,r+1)}static resolveURL(e,r){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:r+e)}}class z6e extends Zo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class U6e extends qp{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,r,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=oh.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(u=>{r&&r(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){r&&r(o),a.manager.itemEnd(e)},0),o}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;const l=fetch(e,s).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return oh.add(e,u),r&&r(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),oh.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});oh.add(e,l),a.manager.itemStart(e)}}class V6e extends po{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const XI="\\[\\]\\.:\\/",H6e=new RegExp("["+XI+"]","g"),KI="[^"+XI+"]",G6e="[^"+XI.replace("\\.","")+"]",W6e=/((?:WC+[\/:])*)/.source.replace("WC",KI),$6e=/(WCOD+)?/.source.replace("WCOD",G6e),j6e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KI),X6e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KI),K6e=new RegExp("^"+W6e+$6e+j6e+X6e+"$"),Y6e=["material","materials","bones","map"];class q6e{constructor(e,r,n){const i=n||Mn.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,i)}getValue(e,r){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,r)}setValue(e,r){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,r)}bind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].bind()}unbind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].unbind()}}class Mn{constructor(e,r,n){this.path=r,this.parsedPath=n||Mn.parseTrackName(r),this.node=Mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,r,n){return e&&e.isAnimationObjectGroup?new Mn.Composite(e,r,n):new Mn(e,r,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(H6e,"")}static parseTrackName(e){const r=K6e.exec(e);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=n.nodeName.substring(i+1);Y6e.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,r){if(r===void 0||r===""||r==="."||r===-1||r===e.name||r===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(r);if(n!==void 0)return n}if(e.children){const n=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===r||s.uuid===r)return s;const l=n(s.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,r){e[r]=this.targetObject[this.propertyName]}_getValue_array(e,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[r++]=n[i]}_getValue_arrayElement(e,r){e[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,r){this.resolvedProperty.toArray(e,r)}_setValue_direct(e,r){this.targetObject[this.propertyName]=e[r]}_setValue_direct_setNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++]}_setValue_array_setNeedsUpdate(e,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,r){this.resolvedProperty[this.propertyIndex]=e[r]}_setValue_arrayElement_setNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,r){this.resolvedProperty.fromArray(e,r)}_setValue_fromArray_setNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,r){this.bind(),this.getValue(e,r)}_setValue_unbound(e,r){this.bind(),this.setValue(e,r)}bind(){let e=this.node;const r=this.parsedPath,n=r.objectName,i=r.propertyName;let a=r.propertyIndex;if(e||(e=Mn.findNode(this.rootNode,r.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=r.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Mn.Composite=q6e;Mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Mn.prototype.GetterByBindingType=[Mn.prototype._getValue_direct,Mn.prototype._getValue_array,Mn.prototype._getValue_arrayElement,Mn.prototype._getValue_toArray];Mn.prototype.SetterByBindingTypeAndVersioning=[[Mn.prototype._setValue_direct,Mn.prototype._setValue_direct_setNeedsUpdate,Mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_array,Mn.prototype._setValue_array_setNeedsUpdate,Mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_arrayElement,Mn.prototype._setValue_arrayElement_setNeedsUpdate,Mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mn.prototype._setValue_fromArray,Mn.prototype._setValue_fromArray_setNeedsUpdate,Mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class O8 extends Lre{constructor(e,r,n=1){super(e,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}const a$=new Rr;class Z6e{constructor(e,r,n=0,i=1/0){this.ray=new g0(e,r),this.near=n,this.far=i,this.camera=null,this.layers=new UI,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return a$.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(a$),this}intersectObject(e,r=!0,n=[]){return k8(e,this,n,r),n.sort(o$),n}intersectObjects(e,r=!0,n=[]){for(let i=0,a=e.length;i<a;i++)k8(e[i],this,n,r);return n.sort(o$),n}}function o$(t,e){return t.distance-e.distance}function k8(t,e,r,n){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,r)===!1&&(i=!1),i===!0&&n===!0){const a=t.children;for(let o=0,s=a.length;o<s;o++)k8(a[o],e,r,!0)}}class s${constructor(e=1,r=0,n=0){return this.radius=e,this.phi=r,this.theta=n,this}set(e,r,n){return this.radius=e,this.phi=r,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Nr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,n){return this.radius=Math.sqrt(e*e+r*r+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const l$=new ae,Ob=new ae;class J6e{constructor(e=new ae,r=new ae){this.start=e,this.end=r}set(e,r){return this.start.copy(e),this.end.copy(r),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,r){return this.delta(r).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,r){l$.subVectors(e,this.start),Ob.subVectors(this.end,this.start);const n=Ob.dot(Ob);let a=Ob.dot(l$)/n;return r&&(a=Nr(a,0,1)),a}closestPointToPoint(e,r,n){const i=this.closestPointToPointParameter(e,r);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class Q6e extends Yp{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function u$(t,e,r,n){const i=eRe(n);switch(r){case hre:return t*e;case pre:return t*e;case vre:return t*e*2;case NI:return t*e/i.components*i.byteLength;case OI:return t*e/i.components*i.byteLength;case gre:return t*e*2/i.components*i.byteLength;case kI:return t*e*2/i.components*i.byteLength;case dre:return t*e*3/i.components*i.byteLength;case qs:return t*e*4/i.components*i.byteLength;case FI:return t*e*4/i.components*i.byteLength;case P3:case L3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case D3:case I3:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case a8:case s8:return Math.max(t,16)*Math.max(e,8)/4;case i8:case o8:return Math.max(t,8)*Math.max(e,8)/2;case l8:case u8:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case c8:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case f8:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case h8:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case d8:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case p8:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case v8:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case g8:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case m8:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case y8:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case _8:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case x8:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case S8:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case b8:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case w8:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case T8:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case N3:case C8:case E8:return Math.ceil(t/4)*Math.ceil(e/4)*16;case mre:case A8:return Math.ceil(t/4)*Math.ceil(e/4)*8;case M8:case R8:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function eRe(t){switch(t){case Wc:case ure:return{byteLength:1,components:1};case B_:case cre:case I2:return{byteLength:2,components:1};case DI:case II:return{byteLength:2,components:4};case Np:case LI:case Ol:return{byteLength:4,components:1};case fre:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:PI}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=PI);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Gre(){let t=null,e=!1,r=null,n=null;function i(a,o){r(a,o),n=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&r!==null&&(n=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){r=a},setContext:function(a){t=a}}}function tRe(t){const e=new WeakMap;function r(s,l){const u=s.array,c=s.usage,f=u.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,u,c),s.onUploadCallback();let d;if(u instanceof Float32Array)d=t.FLOAT;else if(u instanceof Uint16Array)s.isFloat16BufferAttribute?d=t.HALF_FLOAT:d=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)d=t.SHORT;else if(u instanceof Uint32Array)d=t.UNSIGNED_INT;else if(u instanceof Int32Array)d=t.INT;else if(u instanceof Int8Array)d=t.BYTE;else if(u instanceof Uint8Array)d=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)d=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:d,bytesPerElement:u.BYTES_PER_ELEMENT,version:s.version,size:f}}function n(s,l,u){const c=l.array,f=l.updateRanges;if(t.bindBuffer(u,s),f.length===0)t.bufferSubData(u,0,c);else{f.sort((d,p)=>d.start-p.start);let h=0;for(let d=1;d<f.length;d++){const p=f[h],v=f[d];v.start<=p.start+p.count+1?p.count=Math.max(p.count,v.start+v.count-p.start):(++h,f[h]=v)}f.length=h+1;for(let d=0,p=f.length;d<p;d++){const v=f[d];t.bufferSubData(u,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(s){return s.isInterleavedBufferAttribute&&(s=s.data),e.get(s)}function a(s){s.isInterleavedBufferAttribute&&(s=s.data);const l=e.get(s);l&&(t.deleteBuffer(l.buffer),e.delete(s))}function o(s,l){if(s.isInterleavedBufferAttribute&&(s=s.data),s.isGLBufferAttribute){const c=e.get(s);(!c||c.version<s.version)&&e.set(s,{buffer:s.buffer,type:s.type,bytesPerElement:s.elementSize,version:s.version});return}const u=e.get(s);if(u===void 0)e.set(s,r(s,l));else if(u.version<s.version){if(u.size!==s.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,s,l),u.version=s.version}}return{get:i,remove:a,update:o}}var rRe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nRe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,iRe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,aRe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oRe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,sRe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,lRe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,uRe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cRe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,fRe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,hRe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,dRe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,pRe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,vRe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,gRe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,mRe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,yRe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_Re=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,xRe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,SRe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,bRe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wRe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,TRe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,CRe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ERe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ARe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,MRe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,RRe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,PRe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,LRe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,DRe="gl_FragColor = linearToOutputTexel( gl_FragColor );",IRe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,NRe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ORe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kRe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,FRe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,BRe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,zRe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,URe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,VRe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,HRe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,GRe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WRe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$Re=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jRe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XRe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,KRe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,YRe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qRe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ZRe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,JRe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,QRe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,e8e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,t8e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,r8e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,n8e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,i8e=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,a8e=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,o8e=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,s8e=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,l8e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,u8e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,c8e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,f8e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,h8e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,d8e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,p8e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,v8e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,g8e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,m8e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,y8e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_8e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,x8e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,S8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,b8e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,w8e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,T8e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,C8e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,E8e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,A8e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,M8e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,R8e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,P8e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,L8e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,D8e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I8e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,N8e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,O8e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,k8e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,F8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,B8e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,z8e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,U8e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,V8e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,H8e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,G8e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,W8e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$8e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,j8e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,X8e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,K8e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Y8e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,q8e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Z8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Q8e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ePe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const tPe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,rPe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iPe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,oPe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sPe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,lPe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,uPe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cPe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,fPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hPe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dPe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pPe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vPe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gPe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mPe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yPe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Pe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,xPe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SPe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,bPe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wPe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TPe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CPe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,EPe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,APe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MPe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RPe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,PPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LPe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DPe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,IPe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NPe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zr={alphahash_fragment:rRe,alphahash_pars_fragment:nRe,alphamap_fragment:iRe,alphamap_pars_fragment:aRe,alphatest_fragment:oRe,alphatest_pars_fragment:sRe,aomap_fragment:lRe,aomap_pars_fragment:uRe,batching_pars_vertex:cRe,batching_vertex:fRe,begin_vertex:hRe,beginnormal_vertex:dRe,bsdfs:pRe,iridescence_fragment:vRe,bumpmap_pars_fragment:gRe,clipping_planes_fragment:mRe,clipping_planes_pars_fragment:yRe,clipping_planes_pars_vertex:_Re,clipping_planes_vertex:xRe,color_fragment:SRe,color_pars_fragment:bRe,color_pars_vertex:wRe,color_vertex:TRe,common:CRe,cube_uv_reflection_fragment:ERe,defaultnormal_vertex:ARe,displacementmap_pars_vertex:MRe,displacementmap_vertex:RRe,emissivemap_fragment:PRe,emissivemap_pars_fragment:LRe,colorspace_fragment:DRe,colorspace_pars_fragment:IRe,envmap_fragment:NRe,envmap_common_pars_fragment:ORe,envmap_pars_fragment:kRe,envmap_pars_vertex:FRe,envmap_physical_pars_fragment:KRe,envmap_vertex:BRe,fog_vertex:zRe,fog_pars_vertex:URe,fog_fragment:VRe,fog_pars_fragment:HRe,gradientmap_pars_fragment:GRe,lightmap_pars_fragment:WRe,lights_lambert_fragment:$Re,lights_lambert_pars_fragment:jRe,lights_pars_begin:XRe,lights_toon_fragment:YRe,lights_toon_pars_fragment:qRe,lights_phong_fragment:ZRe,lights_phong_pars_fragment:JRe,lights_physical_fragment:QRe,lights_physical_pars_fragment:e8e,lights_fragment_begin:t8e,lights_fragment_maps:r8e,lights_fragment_end:n8e,logdepthbuf_fragment:i8e,logdepthbuf_pars_fragment:a8e,logdepthbuf_pars_vertex:o8e,logdepthbuf_vertex:s8e,map_fragment:l8e,map_pars_fragment:u8e,map_particle_fragment:c8e,map_particle_pars_fragment:f8e,metalnessmap_fragment:h8e,metalnessmap_pars_fragment:d8e,morphinstance_vertex:p8e,morphcolor_vertex:v8e,morphnormal_vertex:g8e,morphtarget_pars_vertex:m8e,morphtarget_vertex:y8e,normal_fragment_begin:_8e,normal_fragment_maps:x8e,normal_pars_fragment:S8e,normal_pars_vertex:b8e,normal_vertex:w8e,normalmap_pars_fragment:T8e,clearcoat_normal_fragment_begin:C8e,clearcoat_normal_fragment_maps:E8e,clearcoat_pars_fragment:A8e,iridescence_pars_fragment:M8e,opaque_fragment:R8e,packing:P8e,premultiplied_alpha_fragment:L8e,project_vertex:D8e,dithering_fragment:I8e,dithering_pars_fragment:N8e,roughnessmap_fragment:O8e,roughnessmap_pars_fragment:k8e,shadowmap_pars_fragment:F8e,shadowmap_pars_vertex:B8e,shadowmap_vertex:z8e,shadowmask_pars_fragment:U8e,skinbase_vertex:V8e,skinning_pars_vertex:H8e,skinning_vertex:G8e,skinnormal_vertex:W8e,specularmap_fragment:$8e,specularmap_pars_fragment:j8e,tonemapping_fragment:X8e,tonemapping_pars_fragment:K8e,transmission_fragment:Y8e,transmission_pars_fragment:q8e,uv_pars_fragment:Z8e,uv_pars_vertex:J8e,uv_vertex:Q8e,worldpos_vertex:ePe,background_vert:tPe,background_frag:rPe,backgroundCube_vert:nPe,backgroundCube_frag:iPe,cube_vert:aPe,cube_frag:oPe,depth_vert:sPe,depth_frag:lPe,distanceRGBA_vert:uPe,distanceRGBA_frag:cPe,equirect_vert:fPe,equirect_frag:hPe,linedashed_vert:dPe,linedashed_frag:pPe,meshbasic_vert:vPe,meshbasic_frag:gPe,meshlambert_vert:mPe,meshlambert_frag:yPe,meshmatcap_vert:_Pe,meshmatcap_frag:xPe,meshnormal_vert:SPe,meshnormal_frag:bPe,meshphong_vert:wPe,meshphong_frag:TPe,meshphysical_vert:CPe,meshphysical_frag:EPe,meshtoon_vert:APe,meshtoon_frag:MPe,points_vert:RPe,points_frag:PPe,shadow_vert:LPe,shadow_frag:DPe,sprite_vert:IPe,sprite_frag:NPe},Ct={common:{diffuse:{value:new Cr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Fr},alphaMap:{value:null},alphaMapTransform:{value:new Fr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Fr}},envmap:{envMap:{value:null},envMapRotation:{value:new Fr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Fr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Fr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Fr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Fr},normalScale:{value:new dr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Fr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Fr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Fr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Fr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Cr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Cr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Fr},alphaTest:{value:0},uvTransform:{value:new Fr}},sprite:{diffuse:{value:new Cr(16777215)},opacity:{value:1},center:{value:new dr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Fr},alphaMap:{value:null},alphaMapTransform:{value:new Fr},alphaTest:{value:0}}},$o={basic:{uniforms:lo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:zr.meshbasic_vert,fragmentShader:zr.meshbasic_frag},lambert:{uniforms:lo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Cr(0)}}]),vertexShader:zr.meshlambert_vert,fragmentShader:zr.meshlambert_frag},phong:{uniforms:lo([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Cr(0)},specular:{value:new Cr(1118481)},shininess:{value:30}}]),vertexShader:zr.meshphong_vert,fragmentShader:zr.meshphong_frag},standard:{uniforms:lo([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new Cr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag},toon:{uniforms:lo([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new Cr(0)}}]),vertexShader:zr.meshtoon_vert,fragmentShader:zr.meshtoon_frag},matcap:{uniforms:lo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:zr.meshmatcap_vert,fragmentShader:zr.meshmatcap_frag},points:{uniforms:lo([Ct.points,Ct.fog]),vertexShader:zr.points_vert,fragmentShader:zr.points_frag},dashed:{uniforms:lo([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zr.linedashed_vert,fragmentShader:zr.linedashed_frag},depth:{uniforms:lo([Ct.common,Ct.displacementmap]),vertexShader:zr.depth_vert,fragmentShader:zr.depth_frag},normal:{uniforms:lo([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:zr.meshnormal_vert,fragmentShader:zr.meshnormal_frag},sprite:{uniforms:lo([Ct.sprite,Ct.fog]),vertexShader:zr.sprite_vert,fragmentShader:zr.sprite_frag},background:{uniforms:{uvTransform:{value:new Fr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zr.background_vert,fragmentShader:zr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Fr}},vertexShader:zr.backgroundCube_vert,fragmentShader:zr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zr.cube_vert,fragmentShader:zr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zr.equirect_vert,fragmentShader:zr.equirect_frag},distanceRGBA:{uniforms:lo([Ct.common,Ct.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zr.distanceRGBA_vert,fragmentShader:zr.distanceRGBA_frag},shadow:{uniforms:lo([Ct.lights,Ct.fog,{color:{value:new Cr(0)},opacity:{value:1}}]),vertexShader:zr.shadow_vert,fragmentShader:zr.shadow_frag}};$o.physical={uniforms:lo([$o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Fr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Fr},clearcoatNormalScale:{value:new dr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Fr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Fr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Fr},sheen:{value:0},sheenColor:{value:new Cr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Fr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Fr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Fr},transmissionSamplerSize:{value:new dr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Fr},attenuationDistance:{value:0},attenuationColor:{value:new Cr(0)},specularColor:{value:new Cr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Fr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Fr},anisotropyVector:{value:new dr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Fr}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag};const kb={r:0,b:0,g:0},Md=new ku,OPe=new Rr;function kPe(t,e,r,n,i,a,o){const s=new Cr(0);let l=a===!0?0:1,u,c,f=null,h=0,d=null;function p(S){let b=S.isScene===!0?S.background:null;return b&&b.isTexture&&(b=(S.backgroundBlurriness>0?r:e).get(b)),b}function v(S){let b=!1;const T=p(S);T===null?m(s,l):T&&T.isColor&&(m(T,1),b=!0);const w=t.xr.getEnvironmentBlendMode();w==="additive"?n.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(t.autoClear||b)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(S,b){const T=p(b);T&&(T.isCubeTexture||T.mapping===S4)?(c===void 0&&(c=new On(new m0(1,1,1),new Fu({name:"BackgroundCubeMaterial",uniforms:Pm($o.backgroundCube.uniforms),vertexShader:$o.backgroundCube.vertexShader,fragmentShader:$o.backgroundCube.fragmentShader,side:_o,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Md.copy(b.backgroundRotation),Md.x*=-1,Md.y*=-1,Md.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Md.y*=-1,Md.z*=-1),c.material.uniforms.envMap.value=T,c.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(OPe.makeRotationFromEuler(Md)),c.material.toneMapped=sn.getTransfer(T.colorSpace)!==Dn,(f!==T||h!==T.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=T,h=T.version,d=t.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null)):T&&T.isTexture&&(u===void 0&&(u=new On(new b4(2,2),new Fu({name:"BackgroundMaterial",uniforms:Pm($o.background.uniforms),vertexShader:$o.background.vertexShader,fragmentShader:$o.background.fragmentShader,side:Gc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=T,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=sn.getTransfer(T.colorSpace)!==Dn,T.matrixAutoUpdate===!0&&T.updateMatrix(),u.material.uniforms.uvTransform.value.copy(T.matrix),(f!==T||h!==T.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=T,h=T.version,d=t.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function m(S,b){S.getRGB(kb,Are(t)),n.buffers.color.setClear(kb.r,kb.g,kb.b,b,o)}function x(){c!==void 0&&(c.geometry.dispose(),c.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return s},setClearColor:function(S,b=1){s.set(S),l=b,m(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,m(s,l)},render:v,addToRenderList:g,dispose:x}}function FPe(t,e){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n={},i=h(null);let a=i,o=!1;function s(R,L,I,N,k){let z=!1;const B=f(N,I,L);a!==B&&(a=B,u(a.object)),z=d(R,N,I,k),z&&p(R,N,I,k),k!==null&&e.update(k,t.ELEMENT_ARRAY_BUFFER),(z||o)&&(o=!1,b(R,L,I,N),k!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(k).buffer))}function l(){return t.createVertexArray()}function u(R){return t.bindVertexArray(R)}function c(R){return t.deleteVertexArray(R)}function f(R,L,I){const N=I.wireframe===!0;let k=n[R.id];k===void 0&&(k={},n[R.id]=k);let z=k[L.id];z===void 0&&(z={},k[L.id]=z);let B=z[N];return B===void 0&&(B=h(l()),z[N]=B),B}function h(R){const L=[],I=[],N=[];for(let k=0;k<r;k++)L[k]=0,I[k]=0,N[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:I,attributeDivisors:N,object:R,attributes:{},index:null}}function d(R,L,I,N){const k=a.attributes,z=L.attributes;let B=0;const V=I.getAttributes();for(const F in V)if(V[F].location>=0){const W=k[F];let H=z[F];if(H===void 0&&(F==="instanceMatrix"&&R.instanceMatrix&&(H=R.instanceMatrix),F==="instanceColor"&&R.instanceColor&&(H=R.instanceColor)),W===void 0||W.attribute!==H||H&&W.data!==H.data)return!0;B++}return a.attributesNum!==B||a.index!==N}function p(R,L,I,N){const k={},z=L.attributes;let B=0;const V=I.getAttributes();for(const F in V)if(V[F].location>=0){let W=z[F];W===void 0&&(F==="instanceMatrix"&&R.instanceMatrix&&(W=R.instanceMatrix),F==="instanceColor"&&R.instanceColor&&(W=R.instanceColor));const H={};H.attribute=W,W&&W.data&&(H.data=W.data),k[F]=H,B++}a.attributes=k,a.attributesNum=B,a.index=N}function v(){const R=a.newAttributes;for(let L=0,I=R.length;L<I;L++)R[L]=0}function g(R){m(R,0)}function m(R,L){const I=a.newAttributes,N=a.enabledAttributes,k=a.attributeDivisors;I[R]=1,N[R]===0&&(t.enableVertexAttribArray(R),N[R]=1),k[R]!==L&&(t.vertexAttribDivisor(R,L),k[R]=L)}function x(){const R=a.newAttributes,L=a.enabledAttributes;for(let I=0,N=L.length;I<N;I++)L[I]!==R[I]&&(t.disableVertexAttribArray(I),L[I]=0)}function S(R,L,I,N,k,z,B){B===!0?t.vertexAttribIPointer(R,L,I,k,z):t.vertexAttribPointer(R,L,I,N,k,z)}function b(R,L,I,N){v();const k=N.attributes,z=I.getAttributes(),B=L.defaultAttributeValues;for(const V in z){const F=z[V];if(F.location>=0){let $=k[V];if($===void 0&&(V==="instanceMatrix"&&R.instanceMatrix&&($=R.instanceMatrix),V==="instanceColor"&&R.instanceColor&&($=R.instanceColor)),$!==void 0){const W=$.normalized,H=$.itemSize,X=e.get($);if(X===void 0)continue;const te=X.buffer,Y=X.type,ee=X.bytesPerElement,se=Y===t.INT||Y===t.UNSIGNED_INT||$.gpuType===LI;if($.isInterleavedBufferAttribute){const ne=$.data,le=ne.stride,pe=$.offset;if(ne.isInstancedInterleavedBuffer){for(let Se=0;Se<F.locationSize;Se++)m(F.location+Se,ne.meshPerAttribute);R.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let Se=0;Se<F.locationSize;Se++)g(F.location+Se);t.bindBuffer(t.ARRAY_BUFFER,te);for(let Se=0;Se<F.locationSize;Se++)S(F.location+Se,H/F.locationSize,Y,W,le*ee,(pe+H/F.locationSize*Se)*ee,se)}else{if($.isInstancedBufferAttribute){for(let ne=0;ne<F.locationSize;ne++)m(F.location+ne,$.meshPerAttribute);R.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let ne=0;ne<F.locationSize;ne++)g(F.location+ne);t.bindBuffer(t.ARRAY_BUFFER,te);for(let ne=0;ne<F.locationSize;ne++)S(F.location+ne,H/F.locationSize,Y,W,H*ee,H/F.locationSize*ne*ee,se)}}else if(B!==void 0){const W=B[V];if(W!==void 0)switch(W.length){case 2:t.vertexAttrib2fv(F.location,W);break;case 3:t.vertexAttrib3fv(F.location,W);break;case 4:t.vertexAttrib4fv(F.location,W);break;default:t.vertexAttrib1fv(F.location,W)}}}}x()}function T(){M();for(const R in n){const L=n[R];for(const I in L){const N=L[I];for(const k in N)c(N[k].object),delete N[k];delete L[I]}delete n[R]}}function w(R){if(n[R.id]===void 0)return;const L=n[R.id];for(const I in L){const N=L[I];for(const k in N)c(N[k].object),delete N[k];delete L[I]}delete n[R.id]}function E(R){for(const L in n){const I=n[L];if(I[R.id]===void 0)continue;const N=I[R.id];for(const k in N)c(N[k].object),delete N[k];delete I[R.id]}}function M(){A(),o=!0,a!==i&&(a=i,u(a.object))}function A(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:s,reset:M,resetDefaultState:A,dispose:T,releaseStatesOfGeometry:w,releaseStatesOfProgram:E,initAttributes:v,enableAttribute:g,disableUnusedAttributes:x}}function BPe(t,e,r){let n;function i(u){n=u}function a(u,c){t.drawArrays(n,u,c),r.update(c,n,1)}function o(u,c,f){f!==0&&(t.drawArraysInstanced(n,u,c,f),r.update(c,n,f))}function s(u,c,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,f);let d=0;for(let p=0;p<f;p++)d+=c[p];r.update(d,n,1)}function l(u,c,f,h){if(f===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<u.length;p++)o(u[p],c[p],h[p]);else{d.multiDrawArraysInstancedWEBGL(n,u,0,c,0,h,0,f);let p=0;for(let v=0;v<f;v++)p+=c[v]*h[v];r.update(p,n,1)}}this.setMode=i,this.render=a,this.renderInstances=o,this.renderMultiDraw=s,this.renderMultiDrawInstances=l}function zPe(t,e,r,n){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(E){return!(E!==qs&&n.convert(E)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function s(E){const M=E===I2&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==Wc&&n.convert(E)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Ol&&!M)}function l(E){if(E==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const f=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),S=t.getParameter(t.MAX_VARYING_VECTORS),b=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=p>0,w=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:s,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:x,maxVaryings:S,maxFragmentUniforms:b,vertexTextures:T,maxSamples:w}}function UPe(t){const e=this;let r=null,n=0,i=!1,a=!1;const o=new Wf,s=new Fr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||n!==0||i;return i=h,n=f.length,d},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,h){r=c(f,h,0)},this.setState=function(f,h,d){const p=f.clippingPlanes,v=f.clipIntersection,g=f.clipShadows,m=t.get(f);if(!i||p===null||p.length===0||a&&!g)a?c(null):u();else{const x=a?0:n,S=x*4;let b=m.clippingState||null;l.value=b,b=c(p,h,S,d);for(let T=0;T!==S;++T)b[T]=r[T];m.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(f,h,d,p){const v=f!==null?f.length:0;let g=null;if(v!==0){if(g=l.value,p!==!0||g===null){const m=d+v*4,x=h.matrixWorldInverse;s.getNormalMatrix(x),(g===null||g.length<m)&&(g=new Float32Array(m));for(let S=0,b=d;S!==v;++S,b+=4)o.copy(f[S]).applyMatrix4(x,s),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function VPe(t){let e=new WeakMap;function r(o,s){return s===r8?o.mapping=Tm:s===n8&&(o.mapping=Cm),o}function n(o){if(o&&o.isTexture){const s=o.mapping;if(s===r8||s===n8)if(e.has(o)){const l=e.get(o).texture;return r(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new a6e(l.height);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",i),r(u.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const Fg=4,c$=[.125,.215,.35,.446,.526,.582],$d=20,j5=new jI,f$=new Cr;let X5=null,K5=0,Y5=0,q5=!1;const Bd=(1+Math.sqrt(5))/2,dg=1/Bd,h$=[new ae(-Bd,dg,0),new ae(Bd,dg,0),new ae(-dg,0,Bd),new ae(dg,0,Bd),new ae(0,Bd,-dg),new ae(0,Bd,dg),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)];class F8{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,n=.1,i=100){X5=this._renderer.getRenderTarget(),K5=this._renderer.getActiveCubeFace(),Y5=this._renderer.getActiveMipmapLevel(),q5=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=v$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=p$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(X5,K5,Y5),this._renderer.xr.enabled=q5,e.scissorTest=!1,Fb(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===Tm||e.mapping===Cm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),X5=this._renderer.getRenderTarget(),K5=this._renderer.getActiveCubeFace(),Y5=this._renderer.getActiveMipmapLevel(),q5=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=r||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:vs,minFilter:vs,generateMipmaps:!1,type:I2,format:qs,colorSpace:Za,depthBuffer:!1},i=d$(e,r,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=d$(e,r,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=HPe(a)),this._blurMaterial=GPe(a,e,r)}return i}_compileMaterial(e){const r=new On(this._lodPlanes[0],e);this._renderer.compile(r,j5)}_sceneToCubeUV(e,r,n,i){const s=new po(90,1,r,n),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(f$),c.toneMapping=gh,c.autoClear=!1;const d=new ah({name:"PMREM.Background",side:_o,depthWrite:!1,depthTest:!1}),p=new On(new m0,d);let v=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,v=!0):(d.color.copy(f$),v=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(s.up.set(0,l[m],0),s.lookAt(u[m],0,0)):x===1?(s.up.set(0,0,l[m]),s.lookAt(0,u[m],0)):(s.up.set(0,l[m],0),s.lookAt(0,0,u[m]));const S=this._cubeSize;Fb(i,x*S,m>2?S:0,S,S),c.setRenderTarget(i),v&&c.render(p,s),c.render(e,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=g}_textureToCubeUV(e,r){const n=this._renderer,i=e.mapping===Tm||e.mapping===Cm;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=v$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=p$());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new On(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;const l=this._cubeSize;Fb(r,0,0,3*l,2*l),n.setRenderTarget(r),n.render(o,j5)}_applyPMREM(e){const r=this._renderer,n=r.autoClear;r.autoClear=!1;const i=this._lodPlanes.length;for(let a=1;a<i;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),s=h$[(i-a-1)%h$.length];this._blur(e,a-1,a,o,s)}r.autoClear=n}_blur(e,r,n,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,r,n,i,"latitudinal",a),this._halfBlur(o,e,n,n,i,"longitudinal",a)}_halfBlur(e,r,n,i,a,o,s){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new On(this._lodPlanes[i],u),h=u.uniforms,d=this._sizeLods[n]-1,p=isFinite(a)?Math.PI/(2*d):2*Math.PI/(2*$d-1),v=a/p,g=isFinite(a)?1+Math.floor(c*v):$d;g>$d&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${$d}`);const m=[];let x=0;for(let E=0;E<$d;++E){const M=E/v,A=Math.exp(-M*M/2);m.push(A),E===0?x+=A:E<g&&(x+=2*A)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=m,h.latitudinal.value=o==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:S}=this;h.dTheta.value=p,h.mipInt.value=S-n;const b=this._sizeLods[i],T=3*b*(i>S-Fg?i-S+Fg:0),w=4*(this._cubeSize-b);Fb(r,T,w,3*b,2*b),l.setRenderTarget(r),l.render(f,j5)}}function HPe(t){const e=[],r=[],n=[];let i=t;const a=t-Fg+1+c$.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);r.push(s);let l=1/s;o>t-Fg?l=c$[o-t+Fg-1]:o===0&&(l=0),n.push(l);const u=1/(s-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],d=6,p=6,v=3,g=2,m=1,x=new Float32Array(v*p*d),S=new Float32Array(g*p*d),b=new Float32Array(m*p*d);for(let w=0;w<d;w++){const E=w%3*2/3-1,M=w>2?0:-1,A=[E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0];x.set(A,v*p*w),S.set(h,g*p*w);const R=[w,w,w,w,w,w];b.set(R,m*p*w)}const T=new Zo;T.setAttribute("position",new Ui(x,v)),T.setAttribute("uv",new Ui(S,g)),T.setAttribute("faceIndex",new Ui(b,m)),e.push(T),i>Fg&&i--}return{lodPlanes:e,sizeLods:r,sigmas:n}}function d$(t,e,r){const n=new Op(t,e,r);return n.texture.mapping=S4,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Fb(t,e,r,n,i){t.viewport.set(e,r,n,i),t.scissor.set(e,r,n,i)}function GPe(t,e,r){const n=new Float32Array($d),i=new ae(0,1,0);return new Fu({name:"SphericalGaussianBlur",defines:{n:$d,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:YI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:vh,depthTest:!1,depthWrite:!1})}function p$(){return new Fu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:YI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:vh,depthTest:!1,depthWrite:!1})}function v$(){return new Fu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:YI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:vh,depthTest:!1,depthWrite:!1})}function YI(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WPe(t){let e=new WeakMap,r=null;function n(s){if(s&&s.isTexture){const l=s.mapping,u=l===r8||l===n8,c=l===Tm||l===Cm;if(u||c){let f=e.get(s);const h=f!==void 0?f.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==h)return r===null&&(r=new F8(t)),f=u?r.fromEquirectangular(s,f):r.fromCubemap(s,f),f.texture.pmremVersion=s.pmremVersion,e.set(s,f),f.texture;if(f!==void 0)return f.texture;{const d=s.image;return u&&d&&d.height>0||c&&d&&i(d)?(r===null&&(r=new F8(t)),f=u?r.fromEquirectangular(s):r.fromCubemap(s),f.texture.pmremVersion=s.pmremVersion,e.set(s,f),s.addEventListener("dispose",a),f.texture):null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){const l=s.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:o}}function $Pe(t){const e={};function r(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(n){return r(n)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(n){const i=r(n);return i===null&&Rg("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function jPe(t,e,r,n){const i={},a=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete i[h.id];const d=a.get(h);d&&(e.remove(d),a.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,r.memory.geometries++),h}function l(f){const h=f.attributes;for(const d in h)e.update(h[d],t.ARRAY_BUFFER)}function u(f){const h=[],d=f.index,p=f.attributes.position;let v=0;if(d!==null){const x=d.array;v=d.version;for(let S=0,b=x.length;S<b;S+=3){const T=x[S+0],w=x[S+1],E=x[S+2];h.push(T,w,w,E,E,T)}}else if(p!==void 0){const x=p.array;v=p.version;for(let S=0,b=x.length/3-1;S<b;S+=3){const T=S+0,w=S+1,E=S+2;h.push(T,w,w,E,E,T)}}else return;const g=new(Sre(h)?Ere:Cre)(h,1);g.version=v;const m=a.get(f);m&&e.remove(m),a.set(f,g)}function c(f){const h=a.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&u(f)}else u(f);return a.get(f)}return{get:s,update:l,getWireframeAttribute:c}}function XPe(t,e,r){let n;function i(h){n=h}let a,o;function s(h){a=h.type,o=h.bytesPerElement}function l(h,d){t.drawElements(n,d,a,h*o),r.update(d,n,1)}function u(h,d,p){p!==0&&(t.drawElementsInstanced(n,d,a,h*o,p),r.update(d,n,p))}function c(h,d,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,d,0,a,h,0,p);let g=0;for(let m=0;m<p;m++)g+=d[m];r.update(g,n,1)}function f(h,d,p,v){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<h.length;m++)u(h[m]/o,d[m],v[m]);else{g.multiDrawElementsInstancedWEBGL(n,d,0,a,h,0,v,0,p);let m=0;for(let x=0;x<p;x++)m+=d[x]*v[x];r.update(m,n,1)}}this.setMode=i,this.setIndex=s,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function KPe(t){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,o,s){switch(r.calls++,o){case t.TRIANGLES:r.triangles+=s*(a/3);break;case t.LINES:r.lines+=s*(a/2);break;case t.LINE_STRIP:r.lines+=s*(a-1);break;case t.LINE_LOOP:r.lines+=s*a;break;case t.POINTS:r.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:i,update:n}}function YPe(t,e,r){const n=new WeakMap,i=new an;function a(o,s,l){const u=o.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,f=c!==void 0?c.length:0;let h=n.get(s);if(h===void 0||h.count!==f){let R=function(){M.dispose(),n.delete(s),s.removeEventListener("dispose",R)};var d=R;h!==void 0&&h.texture.dispose();const p=s.morphAttributes.position!==void 0,v=s.morphAttributes.normal!==void 0,g=s.morphAttributes.color!==void 0,m=s.morphAttributes.position||[],x=s.morphAttributes.normal||[],S=s.morphAttributes.color||[];let b=0;p===!0&&(b=1),v===!0&&(b=2),g===!0&&(b=3);let T=s.attributes.position.count*b,w=1;T>e.maxTextureSize&&(w=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const E=new Float32Array(T*w*4*f),M=new wre(E,T,w,f);M.type=Ol,M.needsUpdate=!0;const A=b*4;for(let L=0;L<f;L++){const I=m[L],N=x[L],k=S[L],z=T*w*4*L;for(let B=0;B<I.count;B++){const V=B*A;p===!0&&(i.fromBufferAttribute(I,B),E[z+V+0]=i.x,E[z+V+1]=i.y,E[z+V+2]=i.z,E[z+V+3]=0),v===!0&&(i.fromBufferAttribute(N,B),E[z+V+4]=i.x,E[z+V+5]=i.y,E[z+V+6]=i.z,E[z+V+7]=0),g===!0&&(i.fromBufferAttribute(k,B),E[z+V+8]=i.x,E[z+V+9]=i.y,E[z+V+10]=i.z,E[z+V+11]=k.itemSize===4?i.w:1)}}h={count:f,texture:M,size:new dr(T,w)},n.set(s,h),s.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,r);else{let p=0;for(let g=0;g<u.length;g++)p+=u[g];const v=s.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,r),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:a}}function qPe(t,e,r,n){let i=new WeakMap;function a(l){const u=n.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(r.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&r.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return f}function o(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:a,dispose:o}}const Wre=new ya,g$=new Bre(1,1),$re=new wre,jre=new W9e,Xre=new Rre,m$=[],y$=[],_$=new Float32Array(16),x$=new Float32Array(9),S$=new Float32Array(4);function x0(t,e,r){const n=t[0];if(n<=0||n>0)return t;const i=e*r;let a=m$[i];if(a===void 0&&(a=new Float32Array(i),m$[i]=a),e!==0){n.toArray(a,0);for(let o=1,s=0;o!==e;++o)s+=r,t[o].toArray(a,s)}return a}function ra(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function na(t,e){for(let r=0,n=e.length;r<n;r++)t[r]=e[r]}function T4(t,e){let r=y$[e];r===void 0&&(r=new Int32Array(e),y$[e]=r);for(let n=0;n!==e;++n)r[n]=t.allocateTextureUnit();return r}function ZPe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function JPe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(ra(r,e))return;t.uniform2fv(this.addr,e),na(r,e)}}function QPe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(ra(r,e))return;t.uniform3fv(this.addr,e),na(r,e)}}function eLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(ra(r,e))return;t.uniform4fv(this.addr,e),na(r,e)}}function tLe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(ra(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),na(r,e)}else{if(ra(r,n))return;S$.set(n),t.uniformMatrix2fv(this.addr,!1,S$),na(r,n)}}function rLe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(ra(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),na(r,e)}else{if(ra(r,n))return;x$.set(n),t.uniformMatrix3fv(this.addr,!1,x$),na(r,n)}}function nLe(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(ra(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),na(r,e)}else{if(ra(r,n))return;_$.set(n),t.uniformMatrix4fv(this.addr,!1,_$),na(r,n)}}function iLe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function aLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(ra(r,e))return;t.uniform2iv(this.addr,e),na(r,e)}}function oLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(ra(r,e))return;t.uniform3iv(this.addr,e),na(r,e)}}function sLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(ra(r,e))return;t.uniform4iv(this.addr,e),na(r,e)}}function lLe(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function uLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(ra(r,e))return;t.uniform2uiv(this.addr,e),na(r,e)}}function cLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(ra(r,e))return;t.uniform3uiv(this.addr,e),na(r,e)}}function fLe(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(ra(r,e))return;t.uniform4uiv(this.addr,e),na(r,e)}}function hLe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i);let a;this.type===t.SAMPLER_2D_SHADOW?(g$.compareFunction=xre,a=g$):a=Wre,r.setTexture2D(e||a,i)}function dLe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(e||jre,i)}function pLe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(e||Xre,i)}function vLe(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(e||$re,i)}function gLe(t){switch(t){case 5126:return ZPe;case 35664:return JPe;case 35665:return QPe;case 35666:return eLe;case 35674:return tLe;case 35675:return rLe;case 35676:return nLe;case 5124:case 35670:return iLe;case 35667:case 35671:return aLe;case 35668:case 35672:return oLe;case 35669:case 35673:return sLe;case 5125:return lLe;case 36294:return uLe;case 36295:return cLe;case 36296:return fLe;case 35678:case 36198:case 36298:case 36306:case 35682:return hLe;case 35679:case 36299:case 36307:return dLe;case 35680:case 36300:case 36308:case 36293:return pLe;case 36289:case 36303:case 36311:case 36292:return vLe}}function mLe(t,e){t.uniform1fv(this.addr,e)}function yLe(t,e){const r=x0(e,this.size,2);t.uniform2fv(this.addr,r)}function _Le(t,e){const r=x0(e,this.size,3);t.uniform3fv(this.addr,r)}function xLe(t,e){const r=x0(e,this.size,4);t.uniform4fv(this.addr,r)}function SLe(t,e){const r=x0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function bLe(t,e){const r=x0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function wLe(t,e){const r=x0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function TLe(t,e){t.uniform1iv(this.addr,e)}function CLe(t,e){t.uniform2iv(this.addr,e)}function ELe(t,e){t.uniform3iv(this.addr,e)}function ALe(t,e){t.uniform4iv(this.addr,e)}function MLe(t,e){t.uniform1uiv(this.addr,e)}function RLe(t,e){t.uniform2uiv(this.addr,e)}function PLe(t,e){t.uniform3uiv(this.addr,e)}function LLe(t,e){t.uniform4uiv(this.addr,e)}function DLe(t,e,r){const n=this.cache,i=e.length,a=T4(r,i);ra(n,a)||(t.uniform1iv(this.addr,a),na(n,a));for(let o=0;o!==i;++o)r.setTexture2D(e[o]||Wre,a[o])}function ILe(t,e,r){const n=this.cache,i=e.length,a=T4(r,i);ra(n,a)||(t.uniform1iv(this.addr,a),na(n,a));for(let o=0;o!==i;++o)r.setTexture3D(e[o]||jre,a[o])}function NLe(t,e,r){const n=this.cache,i=e.length,a=T4(r,i);ra(n,a)||(t.uniform1iv(this.addr,a),na(n,a));for(let o=0;o!==i;++o)r.setTextureCube(e[o]||Xre,a[o])}function OLe(t,e,r){const n=this.cache,i=e.length,a=T4(r,i);ra(n,a)||(t.uniform1iv(this.addr,a),na(n,a));for(let o=0;o!==i;++o)r.setTexture2DArray(e[o]||$re,a[o])}function kLe(t){switch(t){case 5126:return mLe;case 35664:return yLe;case 35665:return _Le;case 35666:return xLe;case 35674:return SLe;case 35675:return bLe;case 35676:return wLe;case 5124:case 35670:return TLe;case 35667:case 35671:return CLe;case 35668:case 35672:return ELe;case 35669:case 35673:return ALe;case 5125:return MLe;case 36294:return RLe;case 36295:return PLe;case 36296:return LLe;case 35678:case 36198:case 36298:case 36306:case 35682:return DLe;case 35679:case 36299:case 36307:return ILe;case 35680:case 36300:case 36308:case 36293:return NLe;case 36289:case 36303:case 36311:case 36292:return OLe}}class FLe{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.setValue=gLe(r.type)}}class BLe{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=kLe(r.type)}}class zLe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,n){const i=this.seq;for(let a=0,o=i.length;a!==o;++a){const s=i[a];s.setValue(e,r[s.id],n)}}}const Z5=/(\w+)(\])?(\[|\.)?/g;function b$(t,e){t.seq.push(e),t.map[e.id]=e}function ULe(t,e,r){const n=t.name,i=n.length;for(Z5.lastIndex=0;;){const a=Z5.exec(n),o=Z5.lastIndex;let s=a[1];const l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){b$(r,u===void 0?new FLe(s,t,e):new BLe(s,t,e));break}else{let f=r.map[s];f===void 0&&(f=new zLe(s),b$(r,f)),r=f}}}class O3{constructor(e,r){this.seq=[],this.map={};const n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const a=e.getActiveUniform(r,i),o=e.getUniformLocation(r,a.name);ULe(a,o,this)}}setValue(e,r,n,i){const a=this.map[r];a!==void 0&&a.setValue(e,n,i)}setOptional(e,r,n){const i=r[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,r,n,i){for(let a=0,o=r.length;a!==o;++a){const s=r[a],l=n[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,r){const n=[];for(let i=0,a=e.length;i!==a;++i){const o=e[i];o.id in r&&n.push(o)}return n}}function w$(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}const VLe=37297;let HLe=0;function GLe(t,e){const r=t.split(`
`),n=[],i=Math.max(e-6,0),a=Math.min(e+6,r.length);for(let o=i;o<a;o++){const s=o+1;n.push(`${s===e?">":" "} ${s}: ${r[o]}`)}return n.join(`
`)}const T$=new Fr;function WLe(t){sn._getMatrix(T$,sn.workingColorSpace,t);const e=`mat3( ${T$.elements.map(r=>r.toFixed(4))} )`;switch(sn.getTransfer(t)){case Jw:return[e,"LinearTransferOETF"];case Dn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function C$(t,e,r){const n=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(n&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const o=parseInt(a[1]);return r.toUpperCase()+`

`+i+`

`+GLe(t.getShaderSource(e),o)}else return i}function $Le(t,e){const r=WLe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function jLe(t,e){let r;switch(e){case Q5e:r="Linear";break;case e9e:r="Reinhard";break;case t9e:r="Cineon";break;case r9e:r="ACESFilmic";break;case i9e:r="AgX";break;case a9e:r="Neutral";break;case n9e:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const Bb=new ae;function XLe(){sn.getLuminanceCoefficients(Bb);const t=Bb.x.toFixed(4),e=Bb.y.toFixed(4),r=Bb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function KLe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(w1).join(`
`)}function YLe(t){const e=[];for(const r in t){const n=t[r];n!==!1&&e.push("#define "+r+" "+n)}return e.join(`
`)}function qLe(t,e){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=t.getActiveAttrib(e,i),o=a.name;let s=1;a.type===t.FLOAT_MAT2&&(s=2),a.type===t.FLOAT_MAT3&&(s=3),a.type===t.FLOAT_MAT4&&(s=4),r[o]={type:a.type,location:t.getAttribLocation(e,o),locationSize:s}}return r}function w1(t){return t!==""}function E$(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function A$(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ZLe=/^[ \t]*#include +<([\w\d./]+)>/gm;function B8(t){return t.replace(ZLe,QLe)}const JLe=new Map;function QLe(t,e){let r=zr[e];if(r===void 0){const n=JLe.get(e);if(n!==void 0)r=zr[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return B8(r)}const eDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function M$(t){return t.replace(eDe,tDe)}function tDe(t,e,r,n){let i="";for(let a=parseInt(e);a<parseInt(r);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function R$(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function rDe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===are?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===D5e?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===dc&&(e="SHADOWMAP_TYPE_VSM"),e}function nDe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Tm:case Cm:e="ENVMAP_TYPE_CUBE";break;case S4:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iDe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Cm:e="ENVMAP_MODE_REFRACTION";break}return e}function aDe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case ore:e="ENVMAP_BLENDING_MULTIPLY";break;case Z5e:e="ENVMAP_BLENDING_MIX";break;case J5e:e="ENVMAP_BLENDING_ADD";break}return e}function oDe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function sDe(t,e,r,n){const i=t.getContext(),a=r.defines;let o=r.vertexShader,s=r.fragmentShader;const l=rDe(r),u=nDe(r),c=iDe(r),f=aDe(r),h=oDe(r),d=KLe(r),p=YLe(a),v=i.createProgram();let g,m,x=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p].filter(w1).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p].filter(w1).join(`
`),m.length>0&&(m+=`
`)):(g=[R$(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(w1).join(`
`),m=[R$(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,p,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+c:"",r.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==gh?"#define TONE_MAPPING":"",r.toneMapping!==gh?zr.tonemapping_pars_fragment:"",r.toneMapping!==gh?jLe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",zr.colorspace_pars_fragment,$Le("linearToOutputTexel",r.outputColorSpace),XLe(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(w1).join(`
`)),o=B8(o),o=E$(o,r),o=A$(o,r),s=B8(s),s=E$(s,r),s=A$(s,r),o=M$(o),s=M$(s),r.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",r.glslVersion===SW?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===SW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const S=x+g+o,b=x+m+s,T=w$(i,i.VERTEX_SHADER,S),w=w$(i,i.FRAGMENT_SHADER,b);i.attachShader(v,T),i.attachShader(v,w),r.index0AttributeName!==void 0?i.bindAttribLocation(v,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function E(L){if(t.debug.checkShaderErrors){const I=i.getProgramInfoLog(v).trim(),N=i.getShaderInfoLog(T).trim(),k=i.getShaderInfoLog(w).trim();let z=!0,B=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,T,w);else{const V=C$(i,T,"vertex"),F=C$(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+I+`
`+V+`
`+F)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(N===""||k==="")&&(B=!1);B&&(L.diagnostics={runnable:z,programLog:I,vertexShader:{log:N,prefix:g},fragmentShader:{log:k,prefix:m}})}i.deleteShader(T),i.deleteShader(w),M=new O3(i,v),A=qLe(i,v)}let M;this.getUniforms=function(){return M===void 0&&E(this),M};let A;this.getAttributes=function(){return A===void 0&&E(this),A};let R=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(v,VLe)),R},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=HLe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=w,this}let lDe=0;class uDe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(r),a=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const n of r)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let n=r.get(e);return n===void 0&&(n=new Set,r.set(e,n)),n}_getShaderStage(e){const r=this.shaderCache;let n=r.get(e);return n===void 0&&(n=new cDe(e),r.set(e,n)),n}}class cDe{constructor(e){this.id=lDe++,this.code=e,this.usedTimes=0}}function fDe(t,e,r,n,i,a,o){const s=new UI,l=new uDe,u=new Set,c=[],f=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(A){return u.add(A),A===0?"uv":`uv${A}`}function g(A,R,L,I,N){const k=I.fog,z=N.geometry,B=A.isMeshStandardMaterial?I.environment:null,V=(A.isMeshStandardMaterial?r:e).get(A.envMap||B),F=V&&V.mapping===S4?V.image.height:null,$=p[A.type];A.precision!==null&&(d=i.getMaxPrecision(A.precision),d!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",d,"instead."));const W=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,H=W!==void 0?W.length:0;let X=0;z.morphAttributes.position!==void 0&&(X=1),z.morphAttributes.normal!==void 0&&(X=2),z.morphAttributes.color!==void 0&&(X=3);let te,Y,ee,se;if($){const ot=$o[$];te=ot.vertexShader,Y=ot.fragmentShader}else te=A.vertexShader,Y=A.fragmentShader,l.update(A),ee=l.getVertexShaderID(A),se=l.getFragmentShaderID(A);const ne=t.getRenderTarget(),le=t.state.buffers.depth.getReversed(),pe=N.isInstancedMesh===!0,Se=N.isBatchedMesh===!0,_e=!!A.map,Le=!!A.matcap,Be=!!V,Q=!!A.aoMap,tt=!!A.lightMap,je=!!A.bumpMap,Ye=!!A.normalMap,$e=!!A.displacementMap,wt=!!A.emissiveMap,We=!!A.metalnessMap,q=!!A.roughnessMap,j=A.anisotropy>0,ie=A.clearcoat>0,Ce=A.dispersion>0,ye=A.iridescence>0,me=A.sheen>0,qe=A.transmission>0,Ie=j&&!!A.anisotropyMap,He=ie&&!!A.clearcoatMap,Et=ie&&!!A.clearcoatNormalMap,Fe=ie&&!!A.clearcoatRoughnessMap,Ge=ye&&!!A.iridescenceMap,lt=ye&&!!A.iridescenceThicknessMap,ht=me&&!!A.sheenColorMap,ut=me&&!!A.sheenRoughnessMap,Qt=!!A.specularMap,zt=!!A.specularColorMap,rr=!!A.specularIntensityMap,ce=qe&&!!A.transmissionMap,vt=qe&&!!A.thicknessMap,Me=!!A.gradientMap,ke=!!A.alphaMap,nt=A.alphaTest>0,et=!!A.alphaHash,Gt=!!A.extensions;let nr=gh;A.toneMapped&&(ne===null||ne.isXRRenderTarget===!0)&&(nr=t.toneMapping);const Mt={shaderID:$,shaderType:A.type,shaderName:A.name,vertexShader:te,fragmentShader:Y,defines:A.defines,customVertexShaderID:ee,customFragmentShaderID:se,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:d,batching:Se,batchingColor:Se&&N._colorsTexture!==null,instancing:pe,instancingColor:pe&&N.instanceColor!==null,instancingMorph:pe&&N.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ne===null?t.outputColorSpace:ne.isXRRenderTarget===!0?ne.texture.colorSpace:Za,alphaToCoverage:!!A.alphaToCoverage,map:_e,matcap:Le,envMap:Be,envMapMode:Be&&V.mapping,envMapCubeUVHeight:F,aoMap:Q,lightMap:tt,bumpMap:je,normalMap:Ye,displacementMap:h&&$e,emissiveMap:wt,normalMapObjectSpace:Ye&&A.normalMapType===f9e,normalMapTangentSpace:Ye&&A.normalMapType===_re,metalnessMap:We,roughnessMap:q,anisotropy:j,anisotropyMap:Ie,clearcoat:ie,clearcoatMap:He,clearcoatNormalMap:Et,clearcoatRoughnessMap:Fe,dispersion:Ce,iridescence:ye,iridescenceMap:Ge,iridescenceThicknessMap:lt,sheen:me,sheenColorMap:ht,sheenRoughnessMap:ut,specularMap:Qt,specularColorMap:zt,specularIntensityMap:rr,transmission:qe,transmissionMap:ce,thicknessMap:vt,gradientMap:Me,opaque:A.transparent===!1&&A.blending===qg&&A.alphaToCoverage===!1,alphaMap:ke,alphaTest:nt,alphaHash:et,combine:A.combine,mapUv:_e&&v(A.map.channel),aoMapUv:Q&&v(A.aoMap.channel),lightMapUv:tt&&v(A.lightMap.channel),bumpMapUv:je&&v(A.bumpMap.channel),normalMapUv:Ye&&v(A.normalMap.channel),displacementMapUv:$e&&v(A.displacementMap.channel),emissiveMapUv:wt&&v(A.emissiveMap.channel),metalnessMapUv:We&&v(A.metalnessMap.channel),roughnessMapUv:q&&v(A.roughnessMap.channel),anisotropyMapUv:Ie&&v(A.anisotropyMap.channel),clearcoatMapUv:He&&v(A.clearcoatMap.channel),clearcoatNormalMapUv:Et&&v(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&v(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&v(A.iridescenceMap.channel),iridescenceThicknessMapUv:lt&&v(A.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&v(A.sheenColorMap.channel),sheenRoughnessMapUv:ut&&v(A.sheenRoughnessMap.channel),specularMapUv:Qt&&v(A.specularMap.channel),specularColorMapUv:zt&&v(A.specularColorMap.channel),specularIntensityMapUv:rr&&v(A.specularIntensityMap.channel),transmissionMapUv:ce&&v(A.transmissionMap.channel),thicknessMapUv:vt&&v(A.thicknessMap.channel),alphaMapUv:ke&&v(A.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(Ye||j),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!z.attributes.uv&&(_e||ke),fog:!!k,useFog:A.fog===!0,fogExp2:!!k&&k.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:le,skinning:N.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:X,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:nr,decodeVideoTexture:_e&&A.map.isVideoTexture===!0&&sn.getTransfer(A.map.colorSpace)===Dn,decodeVideoTextureEmissive:wt&&A.emissiveMap.isVideoTexture===!0&&sn.getTransfer(A.emissiveMap.colorSpace)===Dn,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===_u,flipSided:A.side===_o,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Gt&&A.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Gt&&A.extensions.multiDraw===!0||Se)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Mt.vertexUv1s=u.has(1),Mt.vertexUv2s=u.has(2),Mt.vertexUv3s=u.has(3),u.clear(),Mt}function m(A){const R=[];if(A.shaderID?R.push(A.shaderID):(R.push(A.customVertexShaderID),R.push(A.customFragmentShaderID)),A.defines!==void 0)for(const L in A.defines)R.push(L),R.push(A.defines[L]);return A.isRawShaderMaterial===!1&&(x(R,A),S(R,A),R.push(t.outputColorSpace)),R.push(A.customProgramCacheKey),R.join()}function x(A,R){A.push(R.precision),A.push(R.outputColorSpace),A.push(R.envMapMode),A.push(R.envMapCubeUVHeight),A.push(R.mapUv),A.push(R.alphaMapUv),A.push(R.lightMapUv),A.push(R.aoMapUv),A.push(R.bumpMapUv),A.push(R.normalMapUv),A.push(R.displacementMapUv),A.push(R.emissiveMapUv),A.push(R.metalnessMapUv),A.push(R.roughnessMapUv),A.push(R.anisotropyMapUv),A.push(R.clearcoatMapUv),A.push(R.clearcoatNormalMapUv),A.push(R.clearcoatRoughnessMapUv),A.push(R.iridescenceMapUv),A.push(R.iridescenceThicknessMapUv),A.push(R.sheenColorMapUv),A.push(R.sheenRoughnessMapUv),A.push(R.specularMapUv),A.push(R.specularColorMapUv),A.push(R.specularIntensityMapUv),A.push(R.transmissionMapUv),A.push(R.thicknessMapUv),A.push(R.combine),A.push(R.fogExp2),A.push(R.sizeAttenuation),A.push(R.morphTargetsCount),A.push(R.morphAttributeCount),A.push(R.numDirLights),A.push(R.numPointLights),A.push(R.numSpotLights),A.push(R.numSpotLightMaps),A.push(R.numHemiLights),A.push(R.numRectAreaLights),A.push(R.numDirLightShadows),A.push(R.numPointLightShadows),A.push(R.numSpotLightShadows),A.push(R.numSpotLightShadowsWithMaps),A.push(R.numLightProbes),A.push(R.shadowMapType),A.push(R.toneMapping),A.push(R.numClippingPlanes),A.push(R.numClipIntersection),A.push(R.depthPacking)}function S(A,R){s.disableAll(),R.supportsVertexTextures&&s.enable(0),R.instancing&&s.enable(1),R.instancingColor&&s.enable(2),R.instancingMorph&&s.enable(3),R.matcap&&s.enable(4),R.envMap&&s.enable(5),R.normalMapObjectSpace&&s.enable(6),R.normalMapTangentSpace&&s.enable(7),R.clearcoat&&s.enable(8),R.iridescence&&s.enable(9),R.alphaTest&&s.enable(10),R.vertexColors&&s.enable(11),R.vertexAlphas&&s.enable(12),R.vertexUv1s&&s.enable(13),R.vertexUv2s&&s.enable(14),R.vertexUv3s&&s.enable(15),R.vertexTangents&&s.enable(16),R.anisotropy&&s.enable(17),R.alphaHash&&s.enable(18),R.batching&&s.enable(19),R.dispersion&&s.enable(20),R.batchingColor&&s.enable(21),A.push(s.mask),s.disableAll(),R.fog&&s.enable(0),R.useFog&&s.enable(1),R.flatShading&&s.enable(2),R.logarithmicDepthBuffer&&s.enable(3),R.reverseDepthBuffer&&s.enable(4),R.skinning&&s.enable(5),R.morphTargets&&s.enable(6),R.morphNormals&&s.enable(7),R.morphColors&&s.enable(8),R.premultipliedAlpha&&s.enable(9),R.shadowMapEnabled&&s.enable(10),R.doubleSided&&s.enable(11),R.flipSided&&s.enable(12),R.useDepthPacking&&s.enable(13),R.dithering&&s.enable(14),R.transmission&&s.enable(15),R.sheen&&s.enable(16),R.opaque&&s.enable(17),R.pointsUvs&&s.enable(18),R.decodeVideoTexture&&s.enable(19),R.decodeVideoTextureEmissive&&s.enable(20),R.alphaToCoverage&&s.enable(21),A.push(s.mask)}function b(A){const R=p[A.type];let L;if(R){const I=$o[R];L=VI.clone(I.uniforms)}else L=A.uniforms;return L}function T(A,R){let L;for(let I=0,N=c.length;I<N;I++){const k=c[I];if(k.cacheKey===R){L=k,++L.usedTimes;break}}return L===void 0&&(L=new sDe(t,R,A,a),c.push(L)),L}function w(A){if(--A.usedTimes===0){const R=c.indexOf(A);c[R]=c[c.length-1],c.pop(),A.destroy()}}function E(A){l.remove(A)}function M(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:b,acquireProgram:T,releaseProgram:w,releaseShaderCache:E,programs:c,dispose:M}}function hDe(){let t=new WeakMap;function e(o){return t.has(o)}function r(o){let s=t.get(o);return s===void 0&&(s={},t.set(o,s)),s}function n(o){t.delete(o)}function i(o,s,l){t.get(o)[s]=l}function a(){t=new WeakMap}return{has:e,get:r,remove:n,update:i,dispose:a}}function dDe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function P$(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function L$(){const t=[];let e=0;const r=[],n=[],i=[];function a(){e=0,r.length=0,n.length=0,i.length=0}function o(f,h,d,p,v,g){let m=t[e];return m===void 0?(m={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:v,group:g},t[e]=m):(m.id=f.id,m.object=f,m.geometry=h,m.material=d,m.groupOrder=p,m.renderOrder=f.renderOrder,m.z=v,m.group=g),e++,m}function s(f,h,d,p,v,g){const m=o(f,h,d,p,v,g);d.transmission>0?n.push(m):d.transparent===!0?i.push(m):r.push(m)}function l(f,h,d,p,v,g){const m=o(f,h,d,p,v,g);d.transmission>0?n.unshift(m):d.transparent===!0?i.unshift(m):r.unshift(m)}function u(f,h){r.length>1&&r.sort(f||dDe),n.length>1&&n.sort(h||P$),i.length>1&&i.sort(h||P$)}function c(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:r,transmissive:n,transparent:i,init:a,push:s,unshift:l,finish:c,sort:u}}function pDe(){let t=new WeakMap;function e(n,i){const a=t.get(n);let o;return a===void 0?(o=new L$,t.set(n,[o])):i>=a.length?(o=new L$,a.push(o)):o=a[i],o}function r(){t=new WeakMap}return{get:e,dispose:r}}function vDe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new ae,color:new Cr};break;case"SpotLight":r={position:new ae,direction:new ae,color:new Cr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new ae,color:new Cr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new ae,skyColor:new Cr,groundColor:new Cr};break;case"RectAreaLight":r={color:new Cr,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return t[e.id]=r,r}}}function gDe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dr};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=r,r}}}let mDe=0;function yDe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function _De(t){const e=new vDe,r=gDe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new ae);const i=new ae,a=new Rr,o=new Rr;function s(u){let c=0,f=0,h=0;for(let A=0;A<9;A++)n.probe[A].set(0,0,0);let d=0,p=0,v=0,g=0,m=0,x=0,S=0,b=0,T=0,w=0,E=0;u.sort(yDe);for(let A=0,R=u.length;A<R;A++){const L=u[A],I=L.color,N=L.intensity,k=L.distance,z=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)c+=I.r*N,f+=I.g*N,h+=I.b*N;else if(L.isLightProbe){for(let B=0;B<9;B++)n.probe[B].addScaledVector(L.sh.coefficients[B],N);E++}else if(L.isDirectionalLight){const B=e.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const V=L.shadow,F=r.get(L);F.shadowIntensity=V.intensity,F.shadowBias=V.bias,F.shadowNormalBias=V.normalBias,F.shadowRadius=V.radius,F.shadowMapSize=V.mapSize,n.directionalShadow[d]=F,n.directionalShadowMap[d]=z,n.directionalShadowMatrix[d]=L.shadow.matrix,x++}n.directional[d]=B,d++}else if(L.isSpotLight){const B=e.get(L);B.position.setFromMatrixPosition(L.matrixWorld),B.color.copy(I).multiplyScalar(N),B.distance=k,B.coneCos=Math.cos(L.angle),B.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),B.decay=L.decay,n.spot[v]=B;const V=L.shadow;if(L.map&&(n.spotLightMap[T]=L.map,T++,V.updateMatrices(L),L.castShadow&&w++),n.spotLightMatrix[v]=V.matrix,L.castShadow){const F=r.get(L);F.shadowIntensity=V.intensity,F.shadowBias=V.bias,F.shadowNormalBias=V.normalBias,F.shadowRadius=V.radius,F.shadowMapSize=V.mapSize,n.spotShadow[v]=F,n.spotShadowMap[v]=z,b++}v++}else if(L.isRectAreaLight){const B=e.get(L);B.color.copy(I).multiplyScalar(N),B.halfWidth.set(L.width*.5,0,0),B.halfHeight.set(0,L.height*.5,0),n.rectArea[g]=B,g++}else if(L.isPointLight){const B=e.get(L);if(B.color.copy(L.color).multiplyScalar(L.intensity),B.distance=L.distance,B.decay=L.decay,L.castShadow){const V=L.shadow,F=r.get(L);F.shadowIntensity=V.intensity,F.shadowBias=V.bias,F.shadowNormalBias=V.normalBias,F.shadowRadius=V.radius,F.shadowMapSize=V.mapSize,F.shadowCameraNear=V.camera.near,F.shadowCameraFar=V.camera.far,n.pointShadow[p]=F,n.pointShadowMap[p]=z,n.pointShadowMatrix[p]=L.shadow.matrix,S++}n.point[p]=B,p++}else if(L.isHemisphereLight){const B=e.get(L);B.skyColor.copy(L.color).multiplyScalar(N),B.groundColor.copy(L.groundColor).multiplyScalar(N),n.hemi[m]=B,m++}}g>0&&(t.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ct.LTC_FLOAT_1,n.rectAreaLTC2=Ct.LTC_FLOAT_2):(n.rectAreaLTC1=Ct.LTC_HALF_1,n.rectAreaLTC2=Ct.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=f,n.ambient[2]=h;const M=n.hash;(M.directionalLength!==d||M.pointLength!==p||M.spotLength!==v||M.rectAreaLength!==g||M.hemiLength!==m||M.numDirectionalShadows!==x||M.numPointShadows!==S||M.numSpotShadows!==b||M.numSpotMaps!==T||M.numLightProbes!==E)&&(n.directional.length=d,n.spot.length=v,n.rectArea.length=g,n.point.length=p,n.hemi.length=m,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=S,n.spotLightMatrix.length=b+T-w,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=w,n.numLightProbes=E,M.directionalLength=d,M.pointLength=p,M.spotLength=v,M.rectAreaLength=g,M.hemiLength=m,M.numDirectionalShadows=x,M.numPointShadows=S,M.numSpotShadows=b,M.numSpotMaps=T,M.numLightProbes=E,n.version=mDe++)}function l(u,c){let f=0,h=0,d=0,p=0,v=0;const g=c.matrixWorldInverse;for(let m=0,x=u.length;m<x;m++){const S=u[m];if(S.isDirectionalLight){const b=n.directional[f];b.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(g),f++}else if(S.isSpotLight){const b=n.spot[d];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(g),d++}else if(S.isRectAreaLight){const b=n.rectArea[p];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(g),o.identity(),a.copy(S.matrixWorld),a.premultiply(g),o.extractRotation(a),b.halfWidth.set(S.width*.5,0,0),b.halfHeight.set(0,S.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),p++}else if(S.isPointLight){const b=n.point[h];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(g),h++}else if(S.isHemisphereLight){const b=n.hemi[v];b.direction.setFromMatrixPosition(S.matrixWorld),b.direction.transformDirection(g),v++}}}return{setup:s,setupView:l,state:n}}function D$(t){const e=new _De(t),r=[],n=[];function i(c){u.camera=c,r.length=0,n.length=0}function a(c){r.push(c)}function o(c){n.push(c)}function s(){e.setup(r)}function l(c){e.setupView(r,c)}const u={lightsArray:r,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:s,setupLightsView:l,pushLight:a,pushShadow:o}}function xDe(t){let e=new WeakMap;function r(i,a=0){const o=e.get(i);let s;return o===void 0?(s=new D$(t),e.set(i,[s])):a>=o.length?(s=new D$(t),o.push(s)):s=o[a],s}function n(){e=new WeakMap}return{get:r,dispose:n}}const SDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,bDe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wDe(t,e,r){let n=new HI;const i=new dr,a=new dr,o=new an,s=new _6e({depthPacking:c9e}),l=new x6e,u={},c=r.maxTextureSize,f={[Gc]:_o,[_o]:Gc,[_u]:_u},h=new Fu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dr},radius:{value:4}},vertexShader:SDe,fragmentShader:bDe}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new Zo;p.setAttribute("position",new Ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new On(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=are;let m=this.type;this.render=function(w,E,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;const A=t.getRenderTarget(),R=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),I=t.state;I.setBlending(vh),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const N=m!==dc&&this.type===dc,k=m===dc&&this.type!==dc;for(let z=0,B=w.length;z<B;z++){const V=w[z],F=V.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;i.copy(F.mapSize);const $=F.getFrameExtents();if(i.multiply($),a.copy(F.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/$.x),i.x=a.x*$.x,F.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/$.y),i.y=a.y*$.y,F.mapSize.y=a.y)),F.map===null||N===!0||k===!0){const H=this.type!==dc?{minFilter:xo,magFilter:xo}:{};F.map!==null&&F.map.dispose(),F.map=new Op(i.x,i.y,H),F.map.texture.name=V.name+".shadowMap",F.camera.updateProjectionMatrix()}t.setRenderTarget(F.map),t.clear();const W=F.getViewportCount();for(let H=0;H<W;H++){const X=F.getViewport(H);o.set(a.x*X.x,a.y*X.y,a.x*X.z,a.y*X.w),I.viewport(o),F.updateMatrices(V,H),n=F.getFrustum(),b(E,M,F.camera,V,this.type)}F.isPointLightShadow!==!0&&this.type===dc&&x(F,M),F.needsUpdate=!1}m=this.type,g.needsUpdate=!1,t.setRenderTarget(A,R,L)};function x(w,E){const M=e.update(v);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Op(i.x,i.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(E,null,M,h,v,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(E,null,M,d,v,null)}function S(w,E,M,A){let R=null;const L=M.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(L!==void 0)R=L;else if(R=M.isPointLight===!0?l:s,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const I=R.uuid,N=E.uuid;let k=u[I];k===void 0&&(k={},u[I]=k);let z=k[N];z===void 0&&(z=R.clone(),k[N]=z,E.addEventListener("dispose",T)),R=z}if(R.visible=E.visible,R.wireframe=E.wireframe,A===dc?R.side=E.shadowSide!==null?E.shadowSide:E.side:R.side=E.shadowSide!==null?E.shadowSide:f[E.side],R.alphaMap=E.alphaMap,R.alphaTest=E.alphaTest,R.map=E.map,R.clipShadows=E.clipShadows,R.clippingPlanes=E.clippingPlanes,R.clipIntersection=E.clipIntersection,R.displacementMap=E.displacementMap,R.displacementScale=E.displacementScale,R.displacementBias=E.displacementBias,R.wireframeLinewidth=E.wireframeLinewidth,R.linewidth=E.linewidth,M.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const I=t.properties.get(R);I.light=M}return R}function b(w,E,M,A,R){if(w.visible===!1)return;if(w.layers.test(E.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&R===dc)&&(!w.frustumCulled||n.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,w.matrixWorld);const N=e.update(w),k=w.material;if(Array.isArray(k)){const z=N.groups;for(let B=0,V=z.length;B<V;B++){const F=z[B],$=k[F.materialIndex];if($&&$.visible){const W=S(w,$,A,R);w.onBeforeShadow(t,w,E,M,N,W,F),t.renderBufferDirect(M,null,N,W,w,F),w.onAfterShadow(t,w,E,M,N,W,F)}}}else if(k.visible){const z=S(w,k,A,R);w.onBeforeShadow(t,w,E,M,N,z,null),t.renderBufferDirect(M,null,N,z,w,null),w.onAfterShadow(t,w,E,M,N,z,null)}}const I=w.children;for(let N=0,k=I.length;N<k;N++)b(I[N],E,M,A,R)}function T(w){w.target.removeEventListener("dispose",T);for(const M in u){const A=u[M],R=w.target.uuid;R in A&&(A[R].dispose(),delete A[R])}}}const TDe={[YR]:qR,[ZR]:e8,[JR]:t8,[wm]:QR,[qR]:YR,[e8]:ZR,[t8]:JR,[QR]:wm};function CDe(t,e){function r(){let ce=!1;const vt=new an;let Me=null;const ke=new an(0,0,0,0);return{setMask:function(nt){Me!==nt&&!ce&&(t.colorMask(nt,nt,nt,nt),Me=nt)},setLocked:function(nt){ce=nt},setClear:function(nt,et,Gt,nr,Mt){Mt===!0&&(nt*=nr,et*=nr,Gt*=nr),vt.set(nt,et,Gt,nr),ke.equals(vt)===!1&&(t.clearColor(nt,et,Gt,nr),ke.copy(vt))},reset:function(){ce=!1,Me=null,ke.set(-1,0,0,0)}}}function n(){let ce=!1,vt=!1,Me=null,ke=null,nt=null;return{setReversed:function(et){if(vt!==et){const Gt=e.get("EXT_clip_control");vt?Gt.clipControlEXT(Gt.LOWER_LEFT_EXT,Gt.ZERO_TO_ONE_EXT):Gt.clipControlEXT(Gt.LOWER_LEFT_EXT,Gt.NEGATIVE_ONE_TO_ONE_EXT);const nr=nt;nt=null,this.setClear(nr)}vt=et},getReversed:function(){return vt},setTest:function(et){et?ne(t.DEPTH_TEST):le(t.DEPTH_TEST)},setMask:function(et){Me!==et&&!ce&&(t.depthMask(et),Me=et)},setFunc:function(et){if(vt&&(et=TDe[et]),ke!==et){switch(et){case YR:t.depthFunc(t.NEVER);break;case qR:t.depthFunc(t.ALWAYS);break;case ZR:t.depthFunc(t.LESS);break;case wm:t.depthFunc(t.LEQUAL);break;case JR:t.depthFunc(t.EQUAL);break;case QR:t.depthFunc(t.GEQUAL);break;case e8:t.depthFunc(t.GREATER);break;case t8:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ke=et}},setLocked:function(et){ce=et},setClear:function(et){nt!==et&&(vt&&(et=1-et),t.clearDepth(et),nt=et)},reset:function(){ce=!1,Me=null,ke=null,nt=null,vt=!1}}}function i(){let ce=!1,vt=null,Me=null,ke=null,nt=null,et=null,Gt=null,nr=null,Mt=null;return{setTest:function(ot){ce||(ot?ne(t.STENCIL_TEST):le(t.STENCIL_TEST))},setMask:function(ot){vt!==ot&&!ce&&(t.stencilMask(ot),vt=ot)},setFunc:function(ot,mt,Pr){(Me!==ot||ke!==mt||nt!==Pr)&&(t.stencilFunc(ot,mt,Pr),Me=ot,ke=mt,nt=Pr)},setOp:function(ot,mt,Pr){(et!==ot||Gt!==mt||nr!==Pr)&&(t.stencilOp(ot,mt,Pr),et=ot,Gt=mt,nr=Pr)},setLocked:function(ot){ce=ot},setClear:function(ot){Mt!==ot&&(t.clearStencil(ot),Mt=ot)},reset:function(){ce=!1,vt=null,Me=null,ke=null,nt=null,et=null,Gt=null,nr=null,Mt=null}}}const a=new r,o=new n,s=new i,l=new WeakMap,u=new WeakMap;let c={},f={},h=new WeakMap,d=[],p=null,v=!1,g=null,m=null,x=null,S=null,b=null,T=null,w=null,E=new Cr(0,0,0),M=0,A=!1,R=null,L=null,I=null,N=null,k=null;const z=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,V=0;const F=t.getParameter(t.VERSION);F.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(F)[1]),B=V>=1):F.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),B=V>=2);let $=null,W={};const H=t.getParameter(t.SCISSOR_BOX),X=t.getParameter(t.VIEWPORT),te=new an().fromArray(H),Y=new an().fromArray(X);function ee(ce,vt,Me,ke){const nt=new Uint8Array(4),et=t.createTexture();t.bindTexture(ce,et),t.texParameteri(ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Gt=0;Gt<Me;Gt++)ce===t.TEXTURE_3D||ce===t.TEXTURE_2D_ARRAY?t.texImage3D(vt,0,t.RGBA,1,1,ke,0,t.RGBA,t.UNSIGNED_BYTE,nt):t.texImage2D(vt+Gt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,nt);return et}const se={};se[t.TEXTURE_2D]=ee(t.TEXTURE_2D,t.TEXTURE_2D,1),se[t.TEXTURE_CUBE_MAP]=ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),se[t.TEXTURE_2D_ARRAY]=ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),se[t.TEXTURE_3D]=ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),ne(t.DEPTH_TEST),o.setFunc(wm),je(!1),Ye(hW),ne(t.CULL_FACE),Q(vh);function ne(ce){c[ce]!==!0&&(t.enable(ce),c[ce]=!0)}function le(ce){c[ce]!==!1&&(t.disable(ce),c[ce]=!1)}function pe(ce,vt){return f[ce]!==vt?(t.bindFramebuffer(ce,vt),f[ce]=vt,ce===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=vt),ce===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=vt),!0):!1}function Se(ce,vt){let Me=d,ke=!1;if(ce){Me=h.get(vt),Me===void 0&&(Me=[],h.set(vt,Me));const nt=ce.textures;if(Me.length!==nt.length||Me[0]!==t.COLOR_ATTACHMENT0){for(let et=0,Gt=nt.length;et<Gt;et++)Me[et]=t.COLOR_ATTACHMENT0+et;Me.length=nt.length,ke=!0}}else Me[0]!==t.BACK&&(Me[0]=t.BACK,ke=!0);ke&&t.drawBuffers(Me)}function _e(ce){return p!==ce?(t.useProgram(ce),p=ce,!0):!1}const Le={[Wd]:t.FUNC_ADD,[N5e]:t.FUNC_SUBTRACT,[O5e]:t.FUNC_REVERSE_SUBTRACT};Le[k5e]=t.MIN,Le[F5e]=t.MAX;const Be={[B5e]:t.ZERO,[z5e]:t.ONE,[U5e]:t.SRC_COLOR,[XR]:t.SRC_ALPHA,[j5e]:t.SRC_ALPHA_SATURATE,[W5e]:t.DST_COLOR,[H5e]:t.DST_ALPHA,[V5e]:t.ONE_MINUS_SRC_COLOR,[KR]:t.ONE_MINUS_SRC_ALPHA,[$5e]:t.ONE_MINUS_DST_COLOR,[G5e]:t.ONE_MINUS_DST_ALPHA,[X5e]:t.CONSTANT_COLOR,[K5e]:t.ONE_MINUS_CONSTANT_COLOR,[Y5e]:t.CONSTANT_ALPHA,[q5e]:t.ONE_MINUS_CONSTANT_ALPHA};function Q(ce,vt,Me,ke,nt,et,Gt,nr,Mt,ot){if(ce===vh){v===!0&&(le(t.BLEND),v=!1);return}if(v===!1&&(ne(t.BLEND),v=!0),ce!==I5e){if(ce!==g||ot!==A){if((m!==Wd||b!==Wd)&&(t.blendEquation(t.FUNC_ADD),m=Wd,b=Wd),ot)switch(ce){case qg:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case dW:t.blendFunc(t.ONE,t.ONE);break;case pW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case vW:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case qg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case dW:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case pW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case vW:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}x=null,S=null,T=null,w=null,E.set(0,0,0),M=0,g=ce,A=ot}return}nt=nt||vt,et=et||Me,Gt=Gt||ke,(vt!==m||nt!==b)&&(t.blendEquationSeparate(Le[vt],Le[nt]),m=vt,b=nt),(Me!==x||ke!==S||et!==T||Gt!==w)&&(t.blendFuncSeparate(Be[Me],Be[ke],Be[et],Be[Gt]),x=Me,S=ke,T=et,w=Gt),(nr.equals(E)===!1||Mt!==M)&&(t.blendColor(nr.r,nr.g,nr.b,Mt),E.copy(nr),M=Mt),g=ce,A=!1}function tt(ce,vt){ce.side===_u?le(t.CULL_FACE):ne(t.CULL_FACE);let Me=ce.side===_o;vt&&(Me=!Me),je(Me),ce.blending===qg&&ce.transparent===!1?Q(vh):Q(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),a.setMask(ce.colorWrite);const ke=ce.stencilWrite;s.setTest(ke),ke&&(s.setMask(ce.stencilWriteMask),s.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),s.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),wt(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?ne(t.SAMPLE_ALPHA_TO_COVERAGE):le(t.SAMPLE_ALPHA_TO_COVERAGE)}function je(ce){R!==ce&&(ce?t.frontFace(t.CW):t.frontFace(t.CCW),R=ce)}function Ye(ce){ce!==P5e?(ne(t.CULL_FACE),ce!==L&&(ce===hW?t.cullFace(t.BACK):ce===L5e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):le(t.CULL_FACE),L=ce}function $e(ce){ce!==I&&(B&&t.lineWidth(ce),I=ce)}function wt(ce,vt,Me){ce?(ne(t.POLYGON_OFFSET_FILL),(N!==vt||k!==Me)&&(t.polygonOffset(vt,Me),N=vt,k=Me)):le(t.POLYGON_OFFSET_FILL)}function We(ce){ce?ne(t.SCISSOR_TEST):le(t.SCISSOR_TEST)}function q(ce){ce===void 0&&(ce=t.TEXTURE0+z-1),$!==ce&&(t.activeTexture(ce),$=ce)}function j(ce,vt,Me){Me===void 0&&($===null?Me=t.TEXTURE0+z-1:Me=$);let ke=W[Me];ke===void 0&&(ke={type:void 0,texture:void 0},W[Me]=ke),(ke.type!==ce||ke.texture!==vt)&&($!==Me&&(t.activeTexture(Me),$=Me),t.bindTexture(ce,vt||se[ce]),ke.type=ce,ke.texture=vt)}function ie(){const ce=W[$];ce!==void 0&&ce.type!==void 0&&(t.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function Ce(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ye(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function me(){try{t.texSubImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function qe(){try{t.texSubImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ie(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function He(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Et(){try{t.texStorage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Fe(){try{t.texStorage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ge(){try{t.texImage2D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function lt(){try{t.texImage3D.apply(t,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ht(ce){te.equals(ce)===!1&&(t.scissor(ce.x,ce.y,ce.z,ce.w),te.copy(ce))}function ut(ce){Y.equals(ce)===!1&&(t.viewport(ce.x,ce.y,ce.z,ce.w),Y.copy(ce))}function Qt(ce,vt){let Me=u.get(vt);Me===void 0&&(Me=new WeakMap,u.set(vt,Me));let ke=Me.get(ce);ke===void 0&&(ke=t.getUniformBlockIndex(vt,ce.name),Me.set(ce,ke))}function zt(ce,vt){const ke=u.get(vt).get(ce);l.get(vt)!==ke&&(t.uniformBlockBinding(vt,ke,ce.__bindingPointIndex),l.set(vt,ke))}function rr(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},$=null,W={},f={},h=new WeakMap,d=[],p=null,v=!1,g=null,m=null,x=null,S=null,b=null,T=null,w=null,E=new Cr(0,0,0),M=0,A=!1,R=null,L=null,I=null,N=null,k=null,te.set(0,0,t.canvas.width,t.canvas.height),Y.set(0,0,t.canvas.width,t.canvas.height),a.reset(),o.reset(),s.reset()}return{buffers:{color:a,depth:o,stencil:s},enable:ne,disable:le,bindFramebuffer:pe,drawBuffers:Se,useProgram:_e,setBlending:Q,setMaterial:tt,setFlipSided:je,setCullFace:Ye,setLineWidth:$e,setPolygonOffset:wt,setScissorTest:We,activeTexture:q,bindTexture:j,unbindTexture:ie,compressedTexImage2D:Ce,compressedTexImage3D:ye,texImage2D:Ge,texImage3D:lt,updateUBOMapping:Qt,uniformBlockBinding:zt,texStorage2D:Et,texStorage3D:Fe,texSubImage2D:me,texSubImage3D:qe,compressedTexSubImage2D:Ie,compressedTexSubImage3D:He,scissor:ht,viewport:ut,reset:rr}}function EDe(t,e,r,n,i,a,o){const s=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new dr,c=new WeakMap;let f;const h=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(q){}function p(q,j){return d?new OffscreenCanvas(q,j):V_("canvas")}function v(q,j,ie){let Ce=1;const ye=We(q);if((ye.width>ie||ye.height>ie)&&(Ce=ie/Math.max(ye.width,ye.height)),Ce<1)if(typeof HTMLImageElement!="undefined"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&q instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&q instanceof ImageBitmap||typeof VideoFrame!="undefined"&&q instanceof VideoFrame){const me=Math.floor(Ce*ye.width),qe=Math.floor(Ce*ye.height);f===void 0&&(f=p(me,qe));const Ie=j?p(me,qe):f;return Ie.width=me,Ie.height=qe,Ie.getContext("2d").drawImage(q,0,0,me,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+me+"x"+qe+")."),Ie}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),q;return q}function g(q){return q.generateMipmaps}function m(q){t.generateMipmap(q)}function x(q){return q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:q.isWebGL3DRenderTarget?t.TEXTURE_3D:q.isWebGLArrayRenderTarget||q.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function S(q,j,ie,Ce,ye=!1){if(q!==null){if(t[q]!==void 0)return t[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let me=j;if(j===t.RED&&(ie===t.FLOAT&&(me=t.R32F),ie===t.HALF_FLOAT&&(me=t.R16F),ie===t.UNSIGNED_BYTE&&(me=t.R8)),j===t.RED_INTEGER&&(ie===t.UNSIGNED_BYTE&&(me=t.R8UI),ie===t.UNSIGNED_SHORT&&(me=t.R16UI),ie===t.UNSIGNED_INT&&(me=t.R32UI),ie===t.BYTE&&(me=t.R8I),ie===t.SHORT&&(me=t.R16I),ie===t.INT&&(me=t.R32I)),j===t.RG&&(ie===t.FLOAT&&(me=t.RG32F),ie===t.HALF_FLOAT&&(me=t.RG16F),ie===t.UNSIGNED_BYTE&&(me=t.RG8)),j===t.RG_INTEGER&&(ie===t.UNSIGNED_BYTE&&(me=t.RG8UI),ie===t.UNSIGNED_SHORT&&(me=t.RG16UI),ie===t.UNSIGNED_INT&&(me=t.RG32UI),ie===t.BYTE&&(me=t.RG8I),ie===t.SHORT&&(me=t.RG16I),ie===t.INT&&(me=t.RG32I)),j===t.RGB_INTEGER&&(ie===t.UNSIGNED_BYTE&&(me=t.RGB8UI),ie===t.UNSIGNED_SHORT&&(me=t.RGB16UI),ie===t.UNSIGNED_INT&&(me=t.RGB32UI),ie===t.BYTE&&(me=t.RGB8I),ie===t.SHORT&&(me=t.RGB16I),ie===t.INT&&(me=t.RGB32I)),j===t.RGBA_INTEGER&&(ie===t.UNSIGNED_BYTE&&(me=t.RGBA8UI),ie===t.UNSIGNED_SHORT&&(me=t.RGBA16UI),ie===t.UNSIGNED_INT&&(me=t.RGBA32UI),ie===t.BYTE&&(me=t.RGBA8I),ie===t.SHORT&&(me=t.RGBA16I),ie===t.INT&&(me=t.RGBA32I)),j===t.RGB&&ie===t.UNSIGNED_INT_5_9_9_9_REV&&(me=t.RGB9_E5),j===t.RGBA){const qe=ye?Jw:sn.getTransfer(Ce);ie===t.FLOAT&&(me=t.RGBA32F),ie===t.HALF_FLOAT&&(me=t.RGBA16F),ie===t.UNSIGNED_BYTE&&(me=qe===Dn?t.SRGB8_ALPHA8:t.RGBA8),ie===t.UNSIGNED_SHORT_4_4_4_4&&(me=t.RGBA4),ie===t.UNSIGNED_SHORT_5_5_5_1&&(me=t.RGB5_A1)}return(me===t.R16F||me===t.R32F||me===t.RG16F||me===t.RG32F||me===t.RGBA16F||me===t.RGBA32F)&&e.get("EXT_color_buffer_float"),me}function b(q,j){let ie;return q?j===null||j===Np||j===Am?ie=t.DEPTH24_STENCIL8:j===Ol?ie=t.DEPTH32F_STENCIL8:j===B_&&(ie=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):j===null||j===Np||j===Am?ie=t.DEPTH_COMPONENT24:j===Ol?ie=t.DEPTH_COMPONENT32F:j===B_&&(ie=t.DEPTH_COMPONENT16),ie}function T(q,j){return g(q)===!0||q.isFramebufferTexture&&q.minFilter!==xo&&q.minFilter!==vs?Math.log2(Math.max(j.width,j.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?j.mipmaps.length:1}function w(q){const j=q.target;j.removeEventListener("dispose",w),M(j),j.isVideoTexture&&c.delete(j)}function E(q){const j=q.target;j.removeEventListener("dispose",E),R(j)}function M(q){const j=n.get(q);if(j.__webglInit===void 0)return;const ie=q.source,Ce=h.get(ie);if(Ce){const ye=Ce[j.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&A(q),Object.keys(Ce).length===0&&h.delete(ie)}n.remove(q)}function A(q){const j=n.get(q);t.deleteTexture(j.__webglTexture);const ie=q.source,Ce=h.get(ie);delete Ce[j.__cacheKey],o.memory.textures--}function R(q){const j=n.get(q);if(q.depthTexture&&(q.depthTexture.dispose(),n.remove(q.depthTexture)),q.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(j.__webglFramebuffer[Ce]))for(let ye=0;ye<j.__webglFramebuffer[Ce].length;ye++)t.deleteFramebuffer(j.__webglFramebuffer[Ce][ye]);else t.deleteFramebuffer(j.__webglFramebuffer[Ce]);j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer[Ce])}else{if(Array.isArray(j.__webglFramebuffer))for(let Ce=0;Ce<j.__webglFramebuffer.length;Ce++)t.deleteFramebuffer(j.__webglFramebuffer[Ce]);else t.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&t.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let Ce=0;Ce<j.__webglColorRenderbuffer.length;Ce++)j.__webglColorRenderbuffer[Ce]&&t.deleteRenderbuffer(j.__webglColorRenderbuffer[Ce]);j.__webglDepthRenderbuffer&&t.deleteRenderbuffer(j.__webglDepthRenderbuffer)}const ie=q.textures;for(let Ce=0,ye=ie.length;Ce<ye;Ce++){const me=n.get(ie[Ce]);me.__webglTexture&&(t.deleteTexture(me.__webglTexture),o.memory.textures--),n.remove(ie[Ce])}n.remove(q)}let L=0;function I(){L=0}function N(){const q=L;return q>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+i.maxTextures),L+=1,q}function k(q){const j=[];return j.push(q.wrapS),j.push(q.wrapT),j.push(q.wrapR||0),j.push(q.magFilter),j.push(q.minFilter),j.push(q.anisotropy),j.push(q.internalFormat),j.push(q.format),j.push(q.type),j.push(q.generateMipmaps),j.push(q.premultiplyAlpha),j.push(q.flipY),j.push(q.unpackAlignment),j.push(q.colorSpace),j.join()}function z(q,j){const ie=n.get(q);if(q.isVideoTexture&&$e(q),q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){const Ce=q.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(ie,q,j);return}}r.bindTexture(t.TEXTURE_2D,ie.__webglTexture,t.TEXTURE0+j)}function B(q,j){const ie=n.get(q);if(q.version>0&&ie.__version!==q.version){Y(ie,q,j);return}r.bindTexture(t.TEXTURE_2D_ARRAY,ie.__webglTexture,t.TEXTURE0+j)}function V(q,j){const ie=n.get(q);if(q.version>0&&ie.__version!==q.version){Y(ie,q,j);return}r.bindTexture(t.TEXTURE_3D,ie.__webglTexture,t.TEXTURE0+j)}function F(q,j){const ie=n.get(q);if(q.version>0&&ie.__version!==q.version){ee(ie,q,j);return}r.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture,t.TEXTURE0+j)}const $={[Em]:t.REPEAT,[ih]:t.CLAMP_TO_EDGE,[Zw]:t.MIRRORED_REPEAT},W={[xo]:t.NEAREST,[lre]:t.NEAREST_MIPMAP_NEAREST,[b1]:t.NEAREST_MIPMAP_LINEAR,[vs]:t.LINEAR,[R3]:t.LINEAR_MIPMAP_NEAREST,[Sc]:t.LINEAR_MIPMAP_LINEAR},H={[h9e]:t.NEVER,[y9e]:t.ALWAYS,[d9e]:t.LESS,[xre]:t.LEQUAL,[p9e]:t.EQUAL,[m9e]:t.GEQUAL,[v9e]:t.GREATER,[g9e]:t.NOTEQUAL};function X(q,j){if(j.type===Ol&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===vs||j.magFilter===R3||j.magFilter===b1||j.magFilter===Sc||j.minFilter===vs||j.minFilter===R3||j.minFilter===b1||j.minFilter===Sc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(q,t.TEXTURE_WRAP_S,$[j.wrapS]),t.texParameteri(q,t.TEXTURE_WRAP_T,$[j.wrapT]),(q===t.TEXTURE_3D||q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(q,t.TEXTURE_WRAP_R,$[j.wrapR]),t.texParameteri(q,t.TEXTURE_MAG_FILTER,W[j.magFilter]),t.texParameteri(q,t.TEXTURE_MIN_FILTER,W[j.minFilter]),j.compareFunction&&(t.texParameteri(q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(q,t.TEXTURE_COMPARE_FUNC,H[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===xo||j.minFilter!==b1&&j.minFilter!==Sc||j.type===Ol&&e.has("OES_texture_float_linear")===!1)return;if(j.anisotropy>1||n.get(j).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");t.texParameterf(q,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,i.getMaxAnisotropy())),n.get(j).__currentAnisotropy=j.anisotropy}}}function te(q,j){let ie=!1;q.__webglInit===void 0&&(q.__webglInit=!0,j.addEventListener("dispose",w));const Ce=j.source;let ye=h.get(Ce);ye===void 0&&(ye={},h.set(Ce,ye));const me=k(j);if(me!==q.__cacheKey){ye[me]===void 0&&(ye[me]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),ye[me].usedTimes++;const qe=ye[q.__cacheKey];qe!==void 0&&(ye[q.__cacheKey].usedTimes--,qe.usedTimes===0&&A(j)),q.__cacheKey=me,q.__webglTexture=ye[me].texture}return ie}function Y(q,j,ie){let Ce=t.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Ce=t.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Ce=t.TEXTURE_3D);const ye=te(q,j),me=j.source;r.bindTexture(Ce,q.__webglTexture,t.TEXTURE0+ie);const qe=n.get(me);if(me.version!==qe.__version||ye===!0){r.activeTexture(t.TEXTURE0+ie);const Ie=sn.getPrimaries(sn.workingColorSpace),He=j.colorSpace===jf?null:sn.getPrimaries(j.colorSpace),Et=j.colorSpace===jf||Ie===He?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Et);let Fe=v(j.image,!1,i.maxTextureSize);Fe=wt(j,Fe);const Ge=a.convert(j.format,j.colorSpace),lt=a.convert(j.type);let ht=S(j.internalFormat,Ge,lt,j.colorSpace,j.isVideoTexture);X(Ce,j);let ut;const Qt=j.mipmaps,zt=j.isVideoTexture!==!0,rr=qe.__version===void 0||ye===!0,ce=me.dataReady,vt=T(j,Fe);if(j.isDepthTexture)ht=b(j.format===Mm,j.type),rr&&(zt?r.texStorage2D(t.TEXTURE_2D,1,ht,Fe.width,Fe.height):r.texImage2D(t.TEXTURE_2D,0,ht,Fe.width,Fe.height,0,Ge,lt,null));else if(j.isDataTexture)if(Qt.length>0){zt&&rr&&r.texStorage2D(t.TEXTURE_2D,vt,ht,Qt[0].width,Qt[0].height);for(let Me=0,ke=Qt.length;Me<ke;Me++)ut=Qt[Me],zt?ce&&r.texSubImage2D(t.TEXTURE_2D,Me,0,0,ut.width,ut.height,Ge,lt,ut.data):r.texImage2D(t.TEXTURE_2D,Me,ht,ut.width,ut.height,0,Ge,lt,ut.data);j.generateMipmaps=!1}else zt?(rr&&r.texStorage2D(t.TEXTURE_2D,vt,ht,Fe.width,Fe.height),ce&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,Fe.width,Fe.height,Ge,lt,Fe.data)):r.texImage2D(t.TEXTURE_2D,0,ht,Fe.width,Fe.height,0,Ge,lt,Fe.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){zt&&rr&&r.texStorage3D(t.TEXTURE_2D_ARRAY,vt,ht,Qt[0].width,Qt[0].height,Fe.depth);for(let Me=0,ke=Qt.length;Me<ke;Me++)if(ut=Qt[Me],j.format!==qs)if(Ge!==null)if(zt){if(ce)if(j.layerUpdates.size>0){const nt=u$(ut.width,ut.height,j.format,j.type);for(const et of j.layerUpdates){const Gt=ut.data.subarray(et*nt/ut.data.BYTES_PER_ELEMENT,(et+1)*nt/ut.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,et,ut.width,ut.height,1,Ge,Gt)}j.clearLayerUpdates()}else r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,ut.width,ut.height,Fe.depth,Ge,ut.data)}else r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Me,ht,ut.width,ut.height,Fe.depth,0,ut.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else zt?ce&&r.texSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,ut.width,ut.height,Fe.depth,Ge,lt,ut.data):r.texImage3D(t.TEXTURE_2D_ARRAY,Me,ht,ut.width,ut.height,Fe.depth,0,Ge,lt,ut.data)}else{zt&&rr&&r.texStorage2D(t.TEXTURE_2D,vt,ht,Qt[0].width,Qt[0].height);for(let Me=0,ke=Qt.length;Me<ke;Me++)ut=Qt[Me],j.format!==qs?Ge!==null?zt?ce&&r.compressedTexSubImage2D(t.TEXTURE_2D,Me,0,0,ut.width,ut.height,Ge,ut.data):r.compressedTexImage2D(t.TEXTURE_2D,Me,ht,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?ce&&r.texSubImage2D(t.TEXTURE_2D,Me,0,0,ut.width,ut.height,Ge,lt,ut.data):r.texImage2D(t.TEXTURE_2D,Me,ht,ut.width,ut.height,0,Ge,lt,ut.data)}else if(j.isDataArrayTexture)if(zt){if(rr&&r.texStorage3D(t.TEXTURE_2D_ARRAY,vt,ht,Fe.width,Fe.height,Fe.depth),ce)if(j.layerUpdates.size>0){const Me=u$(Fe.width,Fe.height,j.format,j.type);for(const ke of j.layerUpdates){const nt=Fe.data.subarray(ke*Me/Fe.data.BYTES_PER_ELEMENT,(ke+1)*Me/Fe.data.BYTES_PER_ELEMENT);r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ke,Fe.width,Fe.height,1,Ge,lt,nt)}j.clearLayerUpdates()}else r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,Ge,lt,Fe.data)}else r.texImage3D(t.TEXTURE_2D_ARRAY,0,ht,Fe.width,Fe.height,Fe.depth,0,Ge,lt,Fe.data);else if(j.isData3DTexture)zt?(rr&&r.texStorage3D(t.TEXTURE_3D,vt,ht,Fe.width,Fe.height,Fe.depth),ce&&r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,Ge,lt,Fe.data)):r.texImage3D(t.TEXTURE_3D,0,ht,Fe.width,Fe.height,Fe.depth,0,Ge,lt,Fe.data);else if(j.isFramebufferTexture){if(rr)if(zt)r.texStorage2D(t.TEXTURE_2D,vt,ht,Fe.width,Fe.height);else{let Me=Fe.width,ke=Fe.height;for(let nt=0;nt<vt;nt++)r.texImage2D(t.TEXTURE_2D,nt,ht,Me,ke,0,Ge,lt,null),Me>>=1,ke>>=1}}else if(Qt.length>0){if(zt&&rr){const Me=We(Qt[0]);r.texStorage2D(t.TEXTURE_2D,vt,ht,Me.width,Me.height)}for(let Me=0,ke=Qt.length;Me<ke;Me++)ut=Qt[Me],zt?ce&&r.texSubImage2D(t.TEXTURE_2D,Me,0,0,Ge,lt,ut):r.texImage2D(t.TEXTURE_2D,Me,ht,Ge,lt,ut);j.generateMipmaps=!1}else if(zt){if(rr){const Me=We(Fe);r.texStorage2D(t.TEXTURE_2D,vt,ht,Me.width,Me.height)}ce&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,Ge,lt,Fe)}else r.texImage2D(t.TEXTURE_2D,0,ht,Ge,lt,Fe);g(j)&&m(Ce),qe.__version=me.version,j.onUpdate&&j.onUpdate(j)}q.__version=j.version}function ee(q,j,ie){if(j.image.length!==6)return;const Ce=te(q,j),ye=j.source;r.bindTexture(t.TEXTURE_CUBE_MAP,q.__webglTexture,t.TEXTURE0+ie);const me=n.get(ye);if(ye.version!==me.__version||Ce===!0){r.activeTexture(t.TEXTURE0+ie);const qe=sn.getPrimaries(sn.workingColorSpace),Ie=j.colorSpace===jf?null:sn.getPrimaries(j.colorSpace),He=j.colorSpace===jf||qe===Ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const Et=j.isCompressedTexture||j.image[0].isCompressedTexture,Fe=j.image[0]&&j.image[0].isDataTexture,Ge=[];for(let ke=0;ke<6;ke++)!Et&&!Fe?Ge[ke]=v(j.image[ke],!0,i.maxCubemapSize):Ge[ke]=Fe?j.image[ke].image:j.image[ke],Ge[ke]=wt(j,Ge[ke]);const lt=Ge[0],ht=a.convert(j.format,j.colorSpace),ut=a.convert(j.type),Qt=S(j.internalFormat,ht,ut,j.colorSpace),zt=j.isVideoTexture!==!0,rr=me.__version===void 0||Ce===!0,ce=ye.dataReady;let vt=T(j,lt);X(t.TEXTURE_CUBE_MAP,j);let Me;if(Et){zt&&rr&&r.texStorage2D(t.TEXTURE_CUBE_MAP,vt,Qt,lt.width,lt.height);for(let ke=0;ke<6;ke++){Me=Ge[ke].mipmaps;for(let nt=0;nt<Me.length;nt++){const et=Me[nt];j.format!==qs?ht!==null?zt?ce&&r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt,0,0,et.width,et.height,ht,et.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt,Qt,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):zt?ce&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt,0,0,et.width,et.height,ht,ut,et.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt,Qt,et.width,et.height,0,ht,ut,et.data)}}}else{if(Me=j.mipmaps,zt&&rr){Me.length>0&&vt++;const ke=We(Ge[0]);r.texStorage2D(t.TEXTURE_CUBE_MAP,vt,Qt,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(Fe){zt?ce&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,Ge[ke].width,Ge[ke].height,ht,ut,Ge[ke].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Qt,Ge[ke].width,Ge[ke].height,0,ht,ut,Ge[ke].data);for(let nt=0;nt<Me.length;nt++){const Gt=Me[nt].image[ke].image;zt?ce&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt+1,0,0,Gt.width,Gt.height,ht,ut,Gt.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt+1,Qt,Gt.width,Gt.height,0,ht,ut,Gt.data)}}else{zt?ce&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,ht,ut,Ge[ke]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Qt,ht,ut,Ge[ke]);for(let nt=0;nt<Me.length;nt++){const et=Me[nt];zt?ce&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt+1,0,0,ht,ut,et.image[ke]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,nt+1,Qt,ht,ut,et.image[ke])}}}g(j)&&m(t.TEXTURE_CUBE_MAP),me.__version=ye.version,j.onUpdate&&j.onUpdate(j)}q.__version=j.version}function se(q,j,ie,Ce,ye,me){const qe=a.convert(ie.format,ie.colorSpace),Ie=a.convert(ie.type),He=S(ie.internalFormat,qe,Ie,ie.colorSpace),Et=n.get(j),Fe=n.get(ie);if(Fe.__renderTarget=j,!Et.__hasExternalTextures){const Ge=Math.max(1,j.width>>me),lt=Math.max(1,j.height>>me);ye===t.TEXTURE_3D||ye===t.TEXTURE_2D_ARRAY?r.texImage3D(ye,me,He,Ge,lt,j.depth,0,qe,Ie,null):r.texImage2D(ye,me,He,Ge,lt,0,qe,Ie,null)}r.bindFramebuffer(t.FRAMEBUFFER,q),Ye(j)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Ce,ye,Fe.__webglTexture,0,je(j)):(ye===t.TEXTURE_2D||ye>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Ce,ye,Fe.__webglTexture,me),r.bindFramebuffer(t.FRAMEBUFFER,null)}function ne(q,j,ie){if(t.bindRenderbuffer(t.RENDERBUFFER,q),j.depthBuffer){const Ce=j.depthTexture,ye=Ce&&Ce.isDepthTexture?Ce.type:null,me=b(j.stencilBuffer,ye),qe=j.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ie=je(j);Ye(j)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ie,me,j.width,j.height):ie?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ie,me,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,me,j.width,j.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,qe,t.RENDERBUFFER,q)}else{const Ce=j.textures;for(let ye=0;ye<Ce.length;ye++){const me=Ce[ye],qe=a.convert(me.format,me.colorSpace),Ie=a.convert(me.type),He=S(me.internalFormat,qe,Ie,me.colorSpace),Et=je(j);ie&&Ye(j)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Et,He,j.width,j.height):Ye(j)?s.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Et,He,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,He,j.width,j.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function le(q,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(t.FRAMEBUFFER,q),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ce=n.get(j.depthTexture);Ce.__renderTarget=j,(!Ce.__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),z(j.depthTexture,0);const ye=Ce.__webglTexture,me=je(j);if(j.depthTexture.format===Zg)Ye(j)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0,me):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0);else if(j.depthTexture.format===Mm)Ye(j)?s.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0,me):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function pe(q){const j=n.get(q),ie=q.isWebGLCubeRenderTarget===!0;if(j.__boundDepthTexture!==q.depthTexture){const Ce=q.depthTexture;if(j.__depthDisposeCallback&&j.__depthDisposeCallback(),Ce){const ye=()=>{delete j.__boundDepthTexture,delete j.__depthDisposeCallback,Ce.removeEventListener("dispose",ye)};Ce.addEventListener("dispose",ye),j.__depthDisposeCallback=ye}j.__boundDepthTexture=Ce}if(q.depthTexture&&!j.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");le(j.__webglFramebuffer,q)}else if(ie){j.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(r.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer[Ce]),j.__webglDepthbuffer[Ce]===void 0)j.__webglDepthbuffer[Ce]=t.createRenderbuffer(),ne(j.__webglDepthbuffer[Ce],q,!1);else{const ye=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,me=j.__webglDepthbuffer[Ce];t.bindRenderbuffer(t.RENDERBUFFER,me),t.framebufferRenderbuffer(t.FRAMEBUFFER,ye,t.RENDERBUFFER,me)}}else if(r.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer===void 0)j.__webglDepthbuffer=t.createRenderbuffer(),ne(j.__webglDepthbuffer,q,!1);else{const Ce=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ye=j.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,ye),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ce,t.RENDERBUFFER,ye)}r.bindFramebuffer(t.FRAMEBUFFER,null)}function Se(q,j,ie){const Ce=n.get(q);j!==void 0&&se(Ce.__webglFramebuffer,q,q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ie!==void 0&&pe(q)}function _e(q){const j=q.texture,ie=n.get(q),Ce=n.get(j);q.addEventListener("dispose",E);const ye=q.textures,me=q.isWebGLCubeRenderTarget===!0,qe=ye.length>1;if(qe||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=t.createTexture()),Ce.__version=j.version,o.memory.textures++),me){ie.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(j.mipmaps&&j.mipmaps.length>0){ie.__webglFramebuffer[Ie]=[];for(let He=0;He<j.mipmaps.length;He++)ie.__webglFramebuffer[Ie][He]=t.createFramebuffer()}else ie.__webglFramebuffer[Ie]=t.createFramebuffer()}else{if(j.mipmaps&&j.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Ie=0;Ie<j.mipmaps.length;Ie++)ie.__webglFramebuffer[Ie]=t.createFramebuffer()}else ie.__webglFramebuffer=t.createFramebuffer();if(qe)for(let Ie=0,He=ye.length;Ie<He;Ie++){const Et=n.get(ye[Ie]);Et.__webglTexture===void 0&&(Et.__webglTexture=t.createTexture(),o.memory.textures++)}if(q.samples>0&&Ye(q)===!1){ie.__webglMultisampledFramebuffer=t.createFramebuffer(),ie.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Ie=0;Ie<ye.length;Ie++){const He=ye[Ie];ie.__webglColorRenderbuffer[Ie]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ie.__webglColorRenderbuffer[Ie]);const Et=a.convert(He.format,He.colorSpace),Fe=a.convert(He.type),Ge=S(He.internalFormat,Et,Fe,He.colorSpace,q.isXRRenderTarget===!0),lt=je(q);t.renderbufferStorageMultisample(t.RENDERBUFFER,lt,Ge,q.width,q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,ie.__webglColorRenderbuffer[Ie])}t.bindRenderbuffer(t.RENDERBUFFER,null),q.depthBuffer&&(ie.__webglDepthRenderbuffer=t.createRenderbuffer(),ne(ie.__webglDepthRenderbuffer,q,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(me){r.bindTexture(t.TEXTURE_CUBE_MAP,Ce.__webglTexture),X(t.TEXTURE_CUBE_MAP,j);for(let Ie=0;Ie<6;Ie++)if(j.mipmaps&&j.mipmaps.length>0)for(let He=0;He<j.mipmaps.length;He++)se(ie.__webglFramebuffer[Ie][He],q,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,He);else se(ie.__webglFramebuffer[Ie],q,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);g(j)&&m(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(qe){for(let Ie=0,He=ye.length;Ie<He;Ie++){const Et=ye[Ie],Fe=n.get(Et);r.bindTexture(t.TEXTURE_2D,Fe.__webglTexture),X(t.TEXTURE_2D,Et),se(ie.__webglFramebuffer,q,Et,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,0),g(Et)&&m(t.TEXTURE_2D)}r.unbindTexture()}else{let Ie=t.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(Ie=q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(Ie,Ce.__webglTexture),X(Ie,j),j.mipmaps&&j.mipmaps.length>0)for(let He=0;He<j.mipmaps.length;He++)se(ie.__webglFramebuffer[He],q,j,t.COLOR_ATTACHMENT0,Ie,He);else se(ie.__webglFramebuffer,q,j,t.COLOR_ATTACHMENT0,Ie,0);g(j)&&m(Ie),r.unbindTexture()}q.depthBuffer&&pe(q)}function Le(q){const j=q.textures;for(let ie=0,Ce=j.length;ie<Ce;ie++){const ye=j[ie];if(g(ye)){const me=x(q),qe=n.get(ye).__webglTexture;r.bindTexture(me,qe),m(me),r.unbindTexture()}}}const Be=[],Q=[];function tt(q){if(q.samples>0){if(Ye(q)===!1){const j=q.textures,ie=q.width,Ce=q.height;let ye=t.COLOR_BUFFER_BIT;const me=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,qe=n.get(q),Ie=j.length>1;if(Ie)for(let He=0;He<j.length;He++)r.bindFramebuffer(t.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+He,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+He,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let He=0;He<j.length;He++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(ye|=t.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(ye|=t.STENCIL_BUFFER_BIT)),Ie){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,qe.__webglColorRenderbuffer[He]);const Et=n.get(j[He]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Et,0)}t.blitFramebuffer(0,0,ie,Ce,0,0,ie,Ce,ye,t.NEAREST),l===!0&&(Be.length=0,Q.length=0,Be.push(t.COLOR_ATTACHMENT0+He),q.depthBuffer&&q.resolveDepthBuffer===!1&&(Be.push(me),Q.push(me),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Q)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Be))}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ie)for(let He=0;He<j.length;He++){r.bindFramebuffer(t.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+He,t.RENDERBUFFER,qe.__webglColorRenderbuffer[He]);const Et=n.get(j[He]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+He,t.TEXTURE_2D,Et,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&l){const j=q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[j])}}}function je(q){return Math.min(i.maxSamples,q.samples)}function Ye(q){const j=n.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function $e(q){const j=o.render.frame;c.get(q)!==j&&(c.set(q,j),q.update())}function wt(q,j){const ie=q.colorSpace,Ce=q.format,ye=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||ie!==Za&&ie!==jf&&(sn.getTransfer(ie)===Dn?(Ce!==qs||ye!==Wc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),j}function We(q){return typeof HTMLImageElement!="undefined"&&q instanceof HTMLImageElement?(u.width=q.naturalWidth||q.width,u.height=q.naturalHeight||q.height):typeof VideoFrame!="undefined"&&q instanceof VideoFrame?(u.width=q.displayWidth,u.height=q.displayHeight):(u.width=q.width,u.height=q.height),u}this.allocateTextureUnit=N,this.resetTextureUnits=I,this.setTexture2D=z,this.setTexture2DArray=B,this.setTexture3D=V,this.setTextureCube=F,this.rebindTextures=Se,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=se,this.useMultisampledRTT=Ye}function ADe(t,e){function r(n,i=jf){let a;const o=sn.getTransfer(i);if(n===Wc)return t.UNSIGNED_BYTE;if(n===DI)return t.UNSIGNED_SHORT_4_4_4_4;if(n===II)return t.UNSIGNED_SHORT_5_5_5_1;if(n===fre)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===ure)return t.BYTE;if(n===cre)return t.SHORT;if(n===B_)return t.UNSIGNED_SHORT;if(n===LI)return t.INT;if(n===Np)return t.UNSIGNED_INT;if(n===Ol)return t.FLOAT;if(n===I2)return t.HALF_FLOAT;if(n===hre)return t.ALPHA;if(n===dre)return t.RGB;if(n===qs)return t.RGBA;if(n===pre)return t.LUMINANCE;if(n===vre)return t.LUMINANCE_ALPHA;if(n===Zg)return t.DEPTH_COMPONENT;if(n===Mm)return t.DEPTH_STENCIL;if(n===NI)return t.RED;if(n===OI)return t.RED_INTEGER;if(n===gre)return t.RG;if(n===kI)return t.RG_INTEGER;if(n===FI)return t.RGBA_INTEGER;if(n===P3||n===L3||n===D3||n===I3)if(o===Dn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===P3)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===L3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===D3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===I3)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===P3)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===L3)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===D3)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===I3)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===i8||n===a8||n===o8||n===s8)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===i8)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===a8)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===o8)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===s8)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===l8||n===u8||n===c8)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===l8||n===u8)return o===Dn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===c8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===f8||n===h8||n===d8||n===p8||n===v8||n===g8||n===m8||n===y8||n===_8||n===x8||n===S8||n===b8||n===w8||n===T8)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===f8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===h8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===d8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===p8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===v8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===g8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===m8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===y8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===_8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===x8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===S8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===b8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===w8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===T8)return o===Dn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===N3||n===C8||n===E8)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===N3)return o===Dn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===C8)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===E8)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===mre||n===A8||n===M8||n===R8)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===N3)return a.COMPRESSED_RED_RGTC1_EXT;if(n===A8)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===M8)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===R8)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Am?t.UNSIGNED_INT_24_8:t[n]!==void 0?t[n]:null}return{convert:r}}const MDe={type:"move"};class J5{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ip,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ip,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ip,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const n of e.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,n){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const v of e.hand.values()){const g=r.getJointPose(v,n),m=this._getHandJoint(u,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),d=.02,p=.005;u.inputState.pinching&&h>d+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=d-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=r.getPose(e.gripSpace,n),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=r.getPose(e.targetRaySpace,n),i===null&&a!==null&&(i=a),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(MDe)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const n=new ip;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[r.jointName]=n,e.add(n)}return e.joints[r.jointName]}}const RDe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,PDe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class LDe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,n){if(this.texture===null){const i=new ya,a=e.properties.get(i);a.__webglTexture=r.texture,(r.depthNear!=n.depthNear||r.depthFar!=n.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,n=new Fu({vertexShader:RDe,fragmentShader:PDe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new On(new b4(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class DDe extends Yp{constructor(e,r){super();const n=this;let i=null,a=1,o=null,s="local-floor",l=1,u=null,c=null,f=null,h=null,d=null,p=null;const v=new LDe,g=r.getContextAttributes();let m=null,x=null;const S=[],b=[],T=new dr;let w=null;const E=new po;E.viewport=new an;const M=new po;M.viewport=new an;const A=[E,M],R=new V6e;let L=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ee=S[Y];return ee===void 0&&(ee=new J5,S[Y]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Y){let ee=S[Y];return ee===void 0&&(ee=new J5,S[Y]=ee),ee.getGripSpace()},this.getHand=function(Y){let ee=S[Y];return ee===void 0&&(ee=new J5,S[Y]=ee),ee.getHandSpace()};function N(Y){const ee=b.indexOf(Y.inputSource);if(ee===-1)return;const se=S[ee];se!==void 0&&(se.update(Y.inputSource,Y.frame,u||o),se.dispatchEvent({type:Y.type,data:Y.inputSource}))}function k(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",k),i.removeEventListener("inputsourceschange",z);for(let Y=0;Y<S.length;Y++){const ee=b[Y];ee!==null&&(b[Y]=null,S[Y].disconnect(ee))}L=null,I=null,v.reset(),e.setRenderTarget(m),d=null,h=null,f=null,i=null,x=null,te.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(T.width,T.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){a=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){s=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Y){u=Y},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=function(Y){return Qu(this,null,function*(){if(i=Y,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",k),i.addEventListener("inputsourceschange",z),g.xrCompatible!==!0&&(yield r.makeXRCompatible()),w=e.getPixelRatio(),e.getSize(T),i.renderState.layers===void 0){const ee={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(i,r,ee),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),x=new Op(d.framebufferWidth,d.framebufferHeight,{format:qs,type:Wc,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let ee=null,se=null,ne=null;g.depth&&(ne=g.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,ee=g.stencil?Mm:Zg,se=g.stencil?Am:Np);const le={colorFormat:r.RGBA8,depthFormat:ne,scaleFactor:a};f=new XRWebGLBinding(i,r),h=f.createProjectionLayer(le),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),x=new Op(h.textureWidth,h.textureHeight,{format:qs,type:Wc,depthTexture:new Bre(h.textureWidth,h.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=yield i.requestReferenceSpace(s),te.setContext(i),te.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function z(Y){for(let ee=0;ee<Y.removed.length;ee++){const se=Y.removed[ee],ne=b.indexOf(se);ne>=0&&(b[ne]=null,S[ne].disconnect(se))}for(let ee=0;ee<Y.added.length;ee++){const se=Y.added[ee];let ne=b.indexOf(se);if(ne===-1){for(let pe=0;pe<S.length;pe++)if(pe>=b.length){b.push(se),ne=pe;break}else if(b[pe]===null){b[pe]=se,ne=pe;break}if(ne===-1)break}const le=S[ne];le&&le.connect(se)}}const B=new ae,V=new ae;function F(Y,ee,se){B.setFromMatrixPosition(ee.matrixWorld),V.setFromMatrixPosition(se.matrixWorld);const ne=B.distanceTo(V),le=ee.projectionMatrix.elements,pe=se.projectionMatrix.elements,Se=le[14]/(le[10]-1),_e=le[14]/(le[10]+1),Le=(le[9]+1)/le[5],Be=(le[9]-1)/le[5],Q=(le[8]-1)/le[0],tt=(pe[8]+1)/pe[0],je=Se*Q,Ye=Se*tt,$e=ne/(-Q+tt),wt=$e*-Q;if(ee.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(wt),Y.translateZ($e),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),le[10]===-1)Y.projectionMatrix.copy(ee.projectionMatrix),Y.projectionMatrixInverse.copy(ee.projectionMatrixInverse);else{const We=Se+$e,q=_e+$e,j=je-wt,ie=Ye+(ne-wt),Ce=Le*_e/q*We,ye=Be*_e/q*We;Y.projectionMatrix.makePerspective(j,ie,Ce,ye,We,q),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function $(Y,ee){ee===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ee.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;let ee=Y.near,se=Y.far;v.texture!==null&&(v.depthNear>0&&(ee=v.depthNear),v.depthFar>0&&(se=v.depthFar)),R.near=M.near=E.near=ee,R.far=M.far=E.far=se,(L!==R.near||I!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),L=R.near,I=R.far),E.layers.mask=Y.layers.mask|2,M.layers.mask=Y.layers.mask|4,R.layers.mask=E.layers.mask|M.layers.mask;const ne=Y.parent,le=R.cameras;$(R,ne);for(let pe=0;pe<le.length;pe++)$(le[pe],ne);le.length===2?F(R,E,M):R.projectionMatrix.copy(E.projectionMatrix),W(Y,R,ne)};function W(Y,ee,se){se===null?Y.matrix.copy(ee.matrixWorld):(Y.matrix.copy(se.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ee.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(ee.projectionMatrix),Y.projectionMatrixInverse.copy(ee.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Rm*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(Y){l=Y,h!==null&&(h.fixedFoveation=Y),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Y)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(R)};let H=null;function X(Y,ee){if(c=ee.getViewerPose(u||o),p=ee,c!==null){const se=c.views;d!==null&&(e.setRenderTargetFramebuffer(x,d.framebuffer),e.setRenderTarget(x));let ne=!1;se.length!==R.cameras.length&&(R.cameras.length=0,ne=!0);for(let pe=0;pe<se.length;pe++){const Se=se[pe];let _e=null;if(d!==null)_e=d.getViewport(Se);else{const Be=f.getViewSubImage(h,Se);_e=Be.viewport,pe===0&&(e.setRenderTargetTextures(x,Be.colorTexture,h.ignoreDepthValues?void 0:Be.depthStencilTexture),e.setRenderTarget(x))}let Le=A[pe];Le===void 0&&(Le=new po,Le.layers.enable(pe),Le.viewport=new an,A[pe]=Le),Le.matrix.fromArray(Se.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Se.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(_e.x,_e.y,_e.width,_e.height),pe===0&&(R.matrix.copy(Le.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),ne===!0&&R.cameras.push(Le)}const le=i.enabledFeatures;if(le&&le.includes("depth-sensing")){const pe=f.getDepthInformation(se[0]);pe&&pe.isValid&&pe.texture&&v.init(e,pe,i.renderState)}}for(let se=0;se<S.length;se++){const ne=b[se],le=S[se];ne!==null&&le!==void 0&&le.update(ne,ee,u||o)}H&&H(Y,ee),ee.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ee}),p=null}const te=new Gre;te.setAnimationLoop(X),this.setAnimationLoop=function(Y){H=Y},this.dispose=function(){}}}const Rd=new ku,IDe=new Rr;function NDe(t,e){function r(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function n(g,m){m.color.getRGB(g.fogColor.value,Are(t)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,x,S,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?a(g,m):m.isMeshToonMaterial?(a(g,m),f(g,m)):m.isMeshPhongMaterial?(a(g,m),c(g,m)):m.isMeshStandardMaterial?(a(g,m),h(g,m),m.isMeshPhysicalMaterial&&d(g,m,b)):m.isMeshMatcapMaterial?(a(g,m),p(g,m)):m.isMeshDepthMaterial?a(g,m):m.isMeshDistanceMaterial?(a(g,m),v(g,m)):m.isMeshNormalMaterial?a(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&s(g,m)):m.isPointsMaterial?l(g,m,x,S):m.isSpriteMaterial?u(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function a(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,r(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,r(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===_o&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,r(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===_o&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,r(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,r(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,r(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const x=e.get(m),S=x.envMap,b=x.envMapRotation;S&&(g.envMap.value=S,Rd.copy(b),Rd.x*=-1,Rd.y*=-1,Rd.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Rd.y*=-1,Rd.z*=-1),g.envMapRotation.value.setFromMatrix4(IDe.makeRotationFromEuler(Rd)),g.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,r(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,r(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,r(m.map,g.mapTransform))}function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,x,S){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*x,g.scale.value=S*.5,m.map&&(g.map.value=m.map,r(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,r(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,r(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function f(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function h(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,r(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,r(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function d(g,m,x){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,r(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,r(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,r(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,r(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,r(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===_o&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,r(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,r(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,r(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,r(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,r(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,r(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,r(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){const x=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function ODe(t,e,r,n){let i={},a={},o=[];const s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,S){const b=S.program;n.uniformBlockBinding(x,b)}function u(x,S){let b=i[x.id];b===void 0&&(p(x),b=c(x),i[x.id]=b,x.addEventListener("dispose",g));const T=S.program;n.updateUBOMapping(x,T);const w=e.render.frame;a[x.id]!==w&&(h(x),a[x.id]=w)}function c(x){const S=f();x.__bindingPointIndex=S;const b=t.createBuffer(),T=x.__size,w=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,b),t.bufferData(t.UNIFORM_BUFFER,T,w),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,S,b),b}function f(){for(let x=0;x<s;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const S=i[x.id],b=x.uniforms,T=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,S);for(let w=0,E=b.length;w<E;w++){const M=Array.isArray(b[w])?b[w]:[b[w]];for(let A=0,R=M.length;A<R;A++){const L=M[A];if(d(L,w,A,T)===!0){const I=L.__offset,N=Array.isArray(L.value)?L.value:[L.value];let k=0;for(let z=0;z<N.length;z++){const B=N[z],V=v(B);typeof B=="number"||typeof B=="boolean"?(L.__data[0]=B,t.bufferSubData(t.UNIFORM_BUFFER,I+k,L.__data)):B.isMatrix3?(L.__data[0]=B.elements[0],L.__data[1]=B.elements[1],L.__data[2]=B.elements[2],L.__data[3]=0,L.__data[4]=B.elements[3],L.__data[5]=B.elements[4],L.__data[6]=B.elements[5],L.__data[7]=0,L.__data[8]=B.elements[6],L.__data[9]=B.elements[7],L.__data[10]=B.elements[8],L.__data[11]=0):(B.toArray(L.__data,k),k+=V.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,I,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,S,b,T){const w=x.value,E=S+"_"+b;if(T[E]===void 0)return typeof w=="number"||typeof w=="boolean"?T[E]=w:T[E]=w.clone(),!0;{const M=T[E];if(typeof w=="number"||typeof w=="boolean"){if(M!==w)return T[E]=w,!0}else if(M.equals(w)===!1)return M.copy(w),!0}return!1}function p(x){const S=x.uniforms;let b=0;const T=16;for(let E=0,M=S.length;E<M;E++){const A=Array.isArray(S[E])?S[E]:[S[E]];for(let R=0,L=A.length;R<L;R++){const I=A[R],N=Array.isArray(I.value)?I.value:[I.value];for(let k=0,z=N.length;k<z;k++){const B=N[k],V=v(B),F=b%T,$=F%V.boundary,W=F+$;b+=$,W!==0&&T-W<V.storage&&(b+=T-W),I.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=b,b+=V.storage}}}const w=b%T;return w>0&&(b+=T-w),x.__size=b,x.__cache={},this}function v(x){const S={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function g(x){const S=x.target;S.removeEventListener("dispose",g);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),t.deleteBuffer(i[S.id]),delete i[S.id],delete a[S.id]}function m(){for(const x in i)t.deleteBuffer(i[x]);o=[],i={},a={}}return{bind:l,update:u,dispose:m}}class kDe{constructor(e={}){const{canvas:r=O9e(),context:n=null,depth:i=!0,stencil:a=!1,alpha:o=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let d;if(n!==null){if(typeof WebGLRenderingContext!="undefined"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=o;const p=new Uint32Array(4),v=new Int32Array(4);let g=null,m=null;const x=[],S=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ti,this.toneMapping=gh,this.toneMappingExposure=1;const b=this;let T=!1,w=0,E=0,M=null,A=-1,R=null;const L=new an,I=new an;let N=null;const k=new Cr(0);let z=0,B=r.width,V=r.height,F=1,$=null,W=null;const H=new an(0,0,B,V),X=new an(0,0,B,V);let te=!1;const Y=new HI;let ee=!1,se=!1;const ne=new Rr,le=new Rr,pe=new ae,Se=new an,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Le=!1;function Be(){return M===null?F:1}let Q=n;function tt(Z,de){return r.getContext(Z,de)}try{const Z={alpha:!0,depth:i,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${PI}`),r.addEventListener("webglcontextlost",ke,!1),r.addEventListener("webglcontextrestored",nt,!1),r.addEventListener("webglcontextcreationerror",et,!1),Q===null){const de="webgl2";if(Q=tt(de,Z),Q===null)throw tt(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let je,Ye,$e,wt,We,q,j,ie,Ce,ye,me,qe,Ie,He,Et,Fe,Ge,lt,ht,ut,Qt,zt,rr,ce;function vt(){je=new $Pe(Q),je.init(),zt=new ADe(Q,je),Ye=new zPe(Q,je,e,zt),$e=new CDe(Q,je),Ye.reverseDepthBuffer&&h&&$e.buffers.depth.setReversed(!0),wt=new KPe(Q),We=new hDe,q=new EDe(Q,je,$e,We,Ye,zt,wt),j=new VPe(b),ie=new WPe(b),Ce=new tRe(Q),rr=new FPe(Q,Ce),ye=new jPe(Q,Ce,wt,rr),me=new qPe(Q,ye,Ce,wt),ht=new YPe(Q,Ye,q),Fe=new UPe(We),qe=new fDe(b,j,ie,je,Ye,rr,Fe),Ie=new NDe(b,We),He=new pDe,Et=new xDe(je),lt=new kPe(b,j,ie,$e,me,d,l),Ge=new wDe(b,me,Ye),ce=new ODe(Q,wt,Ye,$e),ut=new BPe(Q,je,wt),Qt=new XPe(Q,je,wt),wt.programs=qe.programs,b.capabilities=Ye,b.extensions=je,b.properties=We,b.renderLists=He,b.shadowMap=Ge,b.state=$e,b.info=wt}vt();const Me=new DDe(b,Q);this.xr=Me,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const Z=je.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=je.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(Z){Z!==void 0&&(F=Z,this.setSize(B,V,!1))},this.getSize=function(Z){return Z.set(B,V)},this.setSize=function(Z,de,Ee=!0){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=Z,V=de,r.width=Math.floor(Z*F),r.height=Math.floor(de*F),Ee===!0&&(r.style.width=Z+"px",r.style.height=de+"px"),this.setViewport(0,0,Z,de)},this.getDrawingBufferSize=function(Z){return Z.set(B*F,V*F).floor()},this.setDrawingBufferSize=function(Z,de,Ee){B=Z,V=de,F=Ee,r.width=Math.floor(Z*Ee),r.height=Math.floor(de*Ee),this.setViewport(0,0,Z,de)},this.getCurrentViewport=function(Z){return Z.copy(L)},this.getViewport=function(Z){return Z.copy(H)},this.setViewport=function(Z,de,Ee,Re){Z.isVector4?H.set(Z.x,Z.y,Z.z,Z.w):H.set(Z,de,Ee,Re),$e.viewport(L.copy(H).multiplyScalar(F).round())},this.getScissor=function(Z){return Z.copy(X)},this.setScissor=function(Z,de,Ee,Re){Z.isVector4?X.set(Z.x,Z.y,Z.z,Z.w):X.set(Z,de,Ee,Re),$e.scissor(I.copy(X).multiplyScalar(F).round())},this.getScissorTest=function(){return te},this.setScissorTest=function(Z){$e.setScissorTest(te=Z)},this.setOpaqueSort=function(Z){$=Z},this.setTransparentSort=function(Z){W=Z},this.getClearColor=function(Z){return Z.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(Z=!0,de=!0,Ee=!0){let Re=0;if(Z){let fe=!1;if(M!==null){const Xe=M.texture.format;fe=Xe===FI||Xe===kI||Xe===OI}if(fe){const Xe=M.texture.type,St=Xe===Wc||Xe===Np||Xe===B_||Xe===Am||Xe===DI||Xe===II,Rt=lt.getClearColor(),Pt=lt.getClearAlpha(),er=Rt.r,ir=Rt.g,It=Rt.b;St?(p[0]=er,p[1]=ir,p[2]=It,p[3]=Pt,Q.clearBufferuiv(Q.COLOR,0,p)):(v[0]=er,v[1]=ir,v[2]=It,v[3]=Pt,Q.clearBufferiv(Q.COLOR,0,v))}else Re|=Q.COLOR_BUFFER_BIT}de&&(Re|=Q.DEPTH_BUFFER_BIT),Ee&&(Re|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",ke,!1),r.removeEventListener("webglcontextrestored",nt,!1),r.removeEventListener("webglcontextcreationerror",et,!1),lt.dispose(),He.dispose(),Et.dispose(),We.dispose(),j.dispose(),ie.dispose(),me.dispose(),rr.dispose(),ce.dispose(),qe.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Yn),Me.removeEventListener("sessionend",Qr),Dr.stop()};function ke(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const Z=wt.autoReset,de=Ge.enabled,Ee=Ge.autoUpdate,Re=Ge.needsUpdate,fe=Ge.type;vt(),wt.autoReset=Z,Ge.enabled=de,Ge.autoUpdate=Ee,Ge.needsUpdate=Re,Ge.type=fe}function et(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function Gt(Z){const de=Z.target;de.removeEventListener("dispose",Gt),nr(de)}function nr(Z){Mt(Z),We.remove(Z)}function Mt(Z){const de=We.get(Z).programs;de!==void 0&&(de.forEach(function(Ee){qe.releaseProgram(Ee)}),Z.isShaderMaterial&&qe.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,de,Ee,Re,fe,Xe){de===null&&(de=_e);const St=fe.isMesh&&fe.matrixWorld.determinant()<0,Rt=Sa(Z,de,Ee,Re,fe);$e.setMaterial(Re,St);let Pt=Ee.index,er=1;if(Re.wireframe===!0){if(Pt=ye.getWireframeAttribute(Ee),Pt===void 0)return;er=2}const ir=Ee.drawRange,It=Ee.attributes.position;let tr=ir.start*er,Gr=(ir.start+ir.count)*er;Xe!==null&&(tr=Math.max(tr,Xe.start*er),Gr=Math.min(Gr,(Xe.start+Xe.count)*er)),Pt!==null?(tr=Math.max(tr,0),Gr=Math.min(Gr,Pt.count)):It!=null&&(tr=Math.max(tr,0),Gr=Math.min(Gr,It.count));const Wr=Gr-tr;if(Wr<0||Wr===1/0)return;rr.setup(fe,Re,Rt,Ee,Pt);let Kr,pr=ut;if(Pt!==null&&(Kr=Ce.get(Pt),pr=Qt,pr.setIndex(Kr)),fe.isMesh)Re.wireframe===!0?($e.setLineWidth(Re.wireframeLinewidth*Be()),pr.setMode(Q.LINES)):pr.setMode(Q.TRIANGLES);else if(fe.isLine){let Wt=Re.linewidth;Wt===void 0&&(Wt=1),$e.setLineWidth(Wt*Be()),fe.isLineSegments?pr.setMode(Q.LINES):fe.isLineLoop?pr.setMode(Q.LINE_LOOP):pr.setMode(Q.LINE_STRIP)}else fe.isPoints?pr.setMode(Q.POINTS):fe.isSprite&&pr.setMode(Q.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)pr.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))pr.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{const Wt=fe._multiDrawStarts,yn=fe._multiDrawCounts,vr=fe._multiDrawCount,ni=Pt?Ce.get(Pt).bytesPerElement:1,$r=We.get(Re).currentProgram.getUniforms();for(let gr=0;gr<vr;gr++)$r.setValue(Q,"_gl_DrawID",gr),pr.render(Wt[gr]/ni,yn[gr])}else if(fe.isInstancedMesh)pr.renderInstances(tr,Wr,fe.count);else if(Ee.isInstancedBufferGeometry){const Wt=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,yn=Math.min(Ee.instanceCount,Wt);pr.renderInstances(tr,Wr,yn)}else pr.render(tr,Wr)};function ot(Z,de,Ee){Z.transparent===!0&&Z.side===_u&&Z.forceSinglePass===!1?(Z.side=_o,Z.needsUpdate=!0,Mi(Z,de,Ee),Z.side=Gc,Z.needsUpdate=!0,Mi(Z,de,Ee),Z.side=_u):Mi(Z,de,Ee)}this.compile=function(Z,de,Ee=null){Ee===null&&(Ee=Z),m=Et.get(Ee),m.init(de),S.push(m),Ee.traverseVisible(function(fe){fe.isLight&&fe.layers.test(de.layers)&&(m.pushLight(fe),fe.castShadow&&m.pushShadow(fe))}),Z!==Ee&&Z.traverseVisible(function(fe){fe.isLight&&fe.layers.test(de.layers)&&(m.pushLight(fe),fe.castShadow&&m.pushShadow(fe))}),m.setupLights();const Re=new Set;return Z.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;const Xe=fe.material;if(Xe)if(Array.isArray(Xe))for(let St=0;St<Xe.length;St++){const Rt=Xe[St];ot(Rt,Ee,fe),Re.add(Rt)}else ot(Xe,Ee,fe),Re.add(Xe)}),S.pop(),m=null,Re},this.compileAsync=function(Z,de,Ee=null){const Re=this.compile(Z,de,Ee);return new Promise(fe=>{function Xe(){if(Re.forEach(function(St){We.get(St).currentProgram.isReady()&&Re.delete(St)}),Re.size===0){fe(Z);return}setTimeout(Xe,10)}je.get("KHR_parallel_shader_compile")!==null?Xe():setTimeout(Xe,10)})};let mt=null;function Pr(Z){mt&&mt(Z)}function Yn(){Dr.stop()}function Qr(){Dr.start()}const Dr=new Gre;Dr.setAnimationLoop(Pr),typeof self!="undefined"&&Dr.setContext(self),this.setAnimationLoop=function(Z){mt=Z,Me.setAnimationLoop(Z),Z===null?Dr.stop():Dr.start()},Me.addEventListener("sessionstart",Yn),Me.addEventListener("sessionend",Qr),this.render=function(Z,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(de),de=Me.getCamera()),Z.isScene===!0&&Z.onBeforeRender(b,Z,de,M),m=Et.get(Z,S.length),m.init(de),S.push(m),le.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),Y.setFromProjectionMatrix(le),se=this.localClippingEnabled,ee=Fe.init(this.clippingPlanes,se),g=He.get(Z,x.length),g.init(),x.push(g),Me.enabled===!0&&Me.isPresenting===!0){const Xe=b.xr.getDepthSensingMesh();Xe!==null&&Nn(Xe,de,-1/0,b.sortObjects)}Nn(Z,de,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort($,W),Le=Me.enabled===!1||Me.isPresenting===!1||Me.hasDepthSensing()===!1,Le&&lt.addToRenderList(g,Z),this.info.render.frame++,ee===!0&&Fe.beginShadows();const Ee=m.state.shadowsArray;Ge.render(Ee,Z,de),ee===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Re=g.opaque,fe=g.transmissive;if(m.setupLights(),de.isArrayCamera){const Xe=de.cameras;if(fe.length>0)for(let St=0,Rt=Xe.length;St<Rt;St++){const Pt=Xe[St];qn(Re,fe,Z,Pt)}Le&&lt.render(Z);for(let St=0,Rt=Xe.length;St<Rt;St++){const Pt=Xe[St];Bn(g,Z,Pt,Pt.viewport)}}else fe.length>0&&qn(Re,fe,Z,de),Le&&lt.render(Z),Bn(g,Z,de);M!==null&&(q.updateMultisampleRenderTarget(M),q.updateRenderTargetMipmap(M)),Z.isScene===!0&&Z.onAfterRender(b,Z,de),rr.resetDefaultState(),A=-1,R=null,S.pop(),S.length>0?(m=S[S.length-1],ee===!0&&Fe.setGlobalState(b.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?g=x[x.length-1]:g=null};function Nn(Z,de,Ee,Re){if(Z.visible===!1)return;if(Z.layers.test(de.layers)){if(Z.isGroup)Ee=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(de);else if(Z.isLight)m.pushLight(Z),Z.castShadow&&m.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||Y.intersectsSprite(Z)){Re&&Se.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(le);const St=me.update(Z),Rt=Z.material;Rt.visible&&g.push(Z,St,Rt,Ee,Se.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||Y.intersectsObject(Z))){const St=me.update(Z),Rt=Z.material;if(Re&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Se.copy(Z.boundingSphere.center)):(St.boundingSphere===null&&St.computeBoundingSphere(),Se.copy(St.boundingSphere.center)),Se.applyMatrix4(Z.matrixWorld).applyMatrix4(le)),Array.isArray(Rt)){const Pt=St.groups;for(let er=0,ir=Pt.length;er<ir;er++){const It=Pt[er],tr=Rt[It.materialIndex];tr&&tr.visible&&g.push(Z,St,tr,Ee,Se.z,It)}}else Rt.visible&&g.push(Z,St,Rt,Ee,Se.z,null)}}const Xe=Z.children;for(let St=0,Rt=Xe.length;St<Rt;St++)Nn(Xe[St],de,Ee,Re)}function Bn(Z,de,Ee,Re){const fe=Z.opaque,Xe=Z.transmissive,St=Z.transparent;m.setupLightsView(Ee),ee===!0&&Fe.setGlobalState(b.clippingPlanes,Ee),Re&&$e.viewport(L.copy(Re)),fe.length>0&&Ai(fe,de,Ee),Xe.length>0&&Ai(Xe,de,Ee),St.length>0&&Ai(St,de,Ee),$e.buffers.depth.setTest(!0),$e.buffers.depth.setMask(!0),$e.buffers.color.setMask(!0),$e.setPolygonOffset(!1)}function qn(Z,de,Ee,Re){if((Ee.isScene===!0?Ee.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[Re.id]===void 0&&(m.state.transmissionRenderTarget[Re.id]=new Op(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?I2:Wc,minFilter:Sc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:sn.workingColorSpace}));const Xe=m.state.transmissionRenderTarget[Re.id],St=Re.viewport||L;Xe.setSize(St.z,St.w);const Rt=b.getRenderTarget();b.setRenderTarget(Xe),b.getClearColor(k),z=b.getClearAlpha(),z<1&&b.setClearColor(16777215,.5),b.clear(),Le&&lt.render(Ee);const Pt=b.toneMapping;b.toneMapping=gh;const er=Re.viewport;if(Re.viewport!==void 0&&(Re.viewport=void 0),m.setupLightsView(Re),ee===!0&&Fe.setGlobalState(b.clippingPlanes,Re),Ai(Z,Ee,Re),q.updateMultisampleRenderTarget(Xe),q.updateRenderTargetMipmap(Xe),je.has("WEBGL_multisampled_render_to_texture")===!1){let ir=!1;for(let It=0,tr=de.length;It<tr;It++){const Gr=de[It],Wr=Gr.object,Kr=Gr.geometry,pr=Gr.material,Wt=Gr.group;if(pr.side===_u&&Wr.layers.test(Re.layers)){const yn=pr.side;pr.side=_o,pr.needsUpdate=!0,Jo(Wr,Ee,Re,Kr,pr,Wt),pr.side=yn,pr.needsUpdate=!0,ir=!0}}ir===!0&&(q.updateMultisampleRenderTarget(Xe),q.updateRenderTargetMipmap(Xe))}b.setRenderTarget(Rt),b.setClearColor(k,z),er!==void 0&&(Re.viewport=er),b.toneMapping=Pt}function Ai(Z,de,Ee){const Re=de.isScene===!0?de.overrideMaterial:null;for(let fe=0,Xe=Z.length;fe<Xe;fe++){const St=Z[fe],Rt=St.object,Pt=St.geometry,er=Re===null?St.material:Re,ir=St.group;Rt.layers.test(Ee.layers)&&Jo(Rt,de,Ee,Pt,er,ir)}}function Jo(Z,de,Ee,Re,fe,Xe){Z.onBeforeRender(b,de,Ee,Re,fe,Xe),Z.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),fe.onBeforeRender(b,de,Ee,Re,Z,Xe),fe.transparent===!0&&fe.side===_u&&fe.forceSinglePass===!1?(fe.side=_o,fe.needsUpdate=!0,b.renderBufferDirect(Ee,de,Re,fe,Z,Xe),fe.side=Gc,fe.needsUpdate=!0,b.renderBufferDirect(Ee,de,Re,fe,Z,Xe),fe.side=_u):b.renderBufferDirect(Ee,de,Re,fe,Z,Xe),Z.onAfterRender(b,de,Ee,Re,fe,Xe)}function Mi(Z,de,Ee){de.isScene!==!0&&(de=_e);const Re=We.get(Z),fe=m.state.lights,Xe=m.state.shadowsArray,St=fe.state.version,Rt=qe.getParameters(Z,fe.state,Xe,de,Ee),Pt=qe.getProgramCacheKey(Rt);let er=Re.programs;Re.environment=Z.isMeshStandardMaterial?de.environment:null,Re.fog=de.fog,Re.envMap=(Z.isMeshStandardMaterial?ie:j).get(Z.envMap||Re.environment),Re.envMapRotation=Re.environment!==null&&Z.envMap===null?de.environmentRotation:Z.envMapRotation,er===void 0&&(Z.addEventListener("dispose",Gt),er=new Map,Re.programs=er);let ir=er.get(Pt);if(ir!==void 0){if(Re.currentProgram===ir&&Re.lightsStateVersion===St)return _i(Z,Rt),ir}else Rt.uniforms=qe.getUniforms(Z),Z.onBeforeCompile(Rt,b),ir=qe.acquireProgram(Rt,Pt),er.set(Pt,ir),Re.uniforms=Rt.uniforms;const It=Re.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(It.clippingPlanes=Fe.uniform),_i(Z,Rt),Re.needsLights=zn(Z),Re.lightsStateVersion=St,Re.needsLights&&(It.ambientLightColor.value=fe.state.ambient,It.lightProbe.value=fe.state.probe,It.directionalLights.value=fe.state.directional,It.directionalLightShadows.value=fe.state.directionalShadow,It.spotLights.value=fe.state.spot,It.spotLightShadows.value=fe.state.spotShadow,It.rectAreaLights.value=fe.state.rectArea,It.ltc_1.value=fe.state.rectAreaLTC1,It.ltc_2.value=fe.state.rectAreaLTC2,It.pointLights.value=fe.state.point,It.pointLightShadows.value=fe.state.pointShadow,It.hemisphereLights.value=fe.state.hemi,It.directionalShadowMap.value=fe.state.directionalShadowMap,It.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,It.spotShadowMap.value=fe.state.spotShadowMap,It.spotLightMatrix.value=fe.state.spotLightMatrix,It.spotLightMap.value=fe.state.spotLightMap,It.pointShadowMap.value=fe.state.pointShadowMap,It.pointShadowMatrix.value=fe.state.pointShadowMatrix),Re.currentProgram=ir,Re.uniformsList=null,ir}function li(Z){if(Z.uniformsList===null){const de=Z.currentProgram.getUniforms();Z.uniformsList=O3.seqWithValue(de.seq,Z.uniforms)}return Z.uniformsList}function _i(Z,de){const Ee=We.get(Z);Ee.outputColorSpace=de.outputColorSpace,Ee.batching=de.batching,Ee.batchingColor=de.batchingColor,Ee.instancing=de.instancing,Ee.instancingColor=de.instancingColor,Ee.instancingMorph=de.instancingMorph,Ee.skinning=de.skinning,Ee.morphTargets=de.morphTargets,Ee.morphNormals=de.morphNormals,Ee.morphColors=de.morphColors,Ee.morphTargetsCount=de.morphTargetsCount,Ee.numClippingPlanes=de.numClippingPlanes,Ee.numIntersection=de.numClipIntersection,Ee.vertexAlphas=de.vertexAlphas,Ee.vertexTangents=de.vertexTangents,Ee.toneMapping=de.toneMapping}function Sa(Z,de,Ee,Re,fe){de.isScene!==!0&&(de=_e),q.resetTextureUnits();const Xe=de.fog,St=Re.isMeshStandardMaterial?de.environment:null,Rt=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Za,Pt=(Re.isMeshStandardMaterial?ie:j).get(Re.envMap||St),er=Re.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,ir=!!Ee.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),It=!!Ee.morphAttributes.position,tr=!!Ee.morphAttributes.normal,Gr=!!Ee.morphAttributes.color;let Wr=gh;Re.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Wr=b.toneMapping);const Kr=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,pr=Kr!==void 0?Kr.length:0,Wt=We.get(Re),yn=m.state.lights;if(ee===!0&&(se===!0||Z!==R)){const Sn=Z===R&&Re.id===A;Fe.setState(Re,Z,Sn)}let vr=!1;Re.version===Wt.__version?(Wt.needsLights&&Wt.lightsStateVersion!==yn.state.version||Wt.outputColorSpace!==Rt||fe.isBatchedMesh&&Wt.batching===!1||!fe.isBatchedMesh&&Wt.batching===!0||fe.isBatchedMesh&&Wt.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&Wt.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&Wt.instancing===!1||!fe.isInstancedMesh&&Wt.instancing===!0||fe.isSkinnedMesh&&Wt.skinning===!1||!fe.isSkinnedMesh&&Wt.skinning===!0||fe.isInstancedMesh&&Wt.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&Wt.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&Wt.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&Wt.instancingMorph===!1&&fe.morphTexture!==null||Wt.envMap!==Pt||Re.fog===!0&&Wt.fog!==Xe||Wt.numClippingPlanes!==void 0&&(Wt.numClippingPlanes!==Fe.numPlanes||Wt.numIntersection!==Fe.numIntersection)||Wt.vertexAlphas!==er||Wt.vertexTangents!==ir||Wt.morphTargets!==It||Wt.morphNormals!==tr||Wt.morphColors!==Gr||Wt.toneMapping!==Wr||Wt.morphTargetsCount!==pr)&&(vr=!0):(vr=!0,Wt.__version=Re.version);let ni=Wt.currentProgram;vr===!0&&(ni=Mi(Re,de,fe));let $r=!1,gr=!1,Yr=!1;const xr=ni.getUniforms(),cn=Wt.uniforms;if($e.useProgram(ni.program)&&($r=!0,gr=!0,Yr=!0),Re.id!==A&&(A=Re.id,gr=!0),$r||R!==Z){$e.buffers.depth.getReversed()?(ne.copy(Z.projectionMatrix),F9e(ne),B9e(ne),xr.setValue(Q,"projectionMatrix",ne)):xr.setValue(Q,"projectionMatrix",Z.projectionMatrix),xr.setValue(Q,"viewMatrix",Z.matrixWorldInverse);const ui=xr.map.cameraPosition;ui!==void 0&&ui.setValue(Q,pe.setFromMatrixPosition(Z.matrixWorld)),Ye.logarithmicDepthBuffer&&xr.setValue(Q,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&xr.setValue(Q,"isOrthographic",Z.isOrthographicCamera===!0),R!==Z&&(R=Z,gr=!0,Yr=!0)}if(fe.isSkinnedMesh){xr.setOptional(Q,fe,"bindMatrix"),xr.setOptional(Q,fe,"bindMatrixInverse");const Sn=fe.skeleton;Sn&&(Sn.boneTexture===null&&Sn.computeBoneTexture(),xr.setValue(Q,"boneTexture",Sn.boneTexture,q))}fe.isBatchedMesh&&(xr.setOptional(Q,fe,"batchingTexture"),xr.setValue(Q,"batchingTexture",fe._matricesTexture,q),xr.setOptional(Q,fe,"batchingIdTexture"),xr.setValue(Q,"batchingIdTexture",fe._indirectTexture,q),xr.setOptional(Q,fe,"batchingColorTexture"),fe._colorsTexture!==null&&xr.setValue(Q,"batchingColorTexture",fe._colorsTexture,q));const Wn=Ee.morphAttributes;if((Wn.position!==void 0||Wn.normal!==void 0||Wn.color!==void 0)&&ht.update(fe,Ee,ni),(gr||Wt.receiveShadow!==fe.receiveShadow)&&(Wt.receiveShadow=fe.receiveShadow,xr.setValue(Q,"receiveShadow",fe.receiveShadow)),Re.isMeshGouraudMaterial&&Re.envMap!==null&&(cn.envMap.value=Pt,cn.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1),Re.isMeshStandardMaterial&&Re.envMap===null&&de.environment!==null&&(cn.envMapIntensity.value=de.environmentIntensity),gr&&(xr.setValue(Q,"toneMappingExposure",b.toneMappingExposure),Wt.needsLights&&Fa(cn,Yr),Xe&&Re.fog===!0&&Ie.refreshFogUniforms(cn,Xe),Ie.refreshMaterialUniforms(cn,Re,F,V,m.state.transmissionRenderTarget[Z.id]),O3.upload(Q,li(Wt),cn,q)),Re.isShaderMaterial&&Re.uniformsNeedUpdate===!0&&(O3.upload(Q,li(Wt),cn,q),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&xr.setValue(Q,"center",fe.center),xr.setValue(Q,"modelViewMatrix",fe.modelViewMatrix),xr.setValue(Q,"normalMatrix",fe.normalMatrix),xr.setValue(Q,"modelMatrix",fe.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const Sn=Re.uniformsGroups;for(let ui=0,Lo=Sn.length;ui<Lo;ui++){const Tr=Sn[ui];ce.update(Tr,ni),ce.bind(Tr,ni)}}return ni}function Fa(Z,de){Z.ambientLightColor.needsUpdate=de,Z.lightProbe.needsUpdate=de,Z.directionalLights.needsUpdate=de,Z.directionalLightShadows.needsUpdate=de,Z.pointLights.needsUpdate=de,Z.pointLightShadows.needsUpdate=de,Z.spotLights.needsUpdate=de,Z.spotLightShadows.needsUpdate=de,Z.rectAreaLights.needsUpdate=de,Z.hemisphereLights.needsUpdate=de}function zn(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Z,de,Ee){We.get(Z.texture).__webglTexture=de,We.get(Z.depthTexture).__webglTexture=Ee;const Re=We.get(Z);Re.__hasExternalTextures=!0,Re.__autoAllocateDepthBuffer=Ee===void 0,Re.__autoAllocateDepthBuffer||je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Re.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Z,de){const Ee=We.get(Z);Ee.__webglFramebuffer=de,Ee.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(Z,de=0,Ee=0){M=Z,w=de,E=Ee;let Re=!0,fe=null,Xe=!1,St=!1;if(Z){const Pt=We.get(Z);if(Pt.__useDefaultFramebuffer!==void 0)$e.bindFramebuffer(Q.FRAMEBUFFER,null),Re=!1;else if(Pt.__webglFramebuffer===void 0)q.setupRenderTarget(Z);else if(Pt.__hasExternalTextures)q.rebindTextures(Z,We.get(Z.texture).__webglTexture,We.get(Z.depthTexture).__webglTexture);else if(Z.depthBuffer){const It=Z.depthTexture;if(Pt.__boundDepthTexture!==It){if(It!==null&&We.has(It)&&(Z.width!==It.image.width||Z.height!==It.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");q.setupDepthRenderbuffer(Z)}}const er=Z.texture;(er.isData3DTexture||er.isDataArrayTexture||er.isCompressedArrayTexture)&&(St=!0);const ir=We.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(ir[de])?fe=ir[de][Ee]:fe=ir[de],Xe=!0):Z.samples>0&&q.useMultisampledRTT(Z)===!1?fe=We.get(Z).__webglMultisampledFramebuffer:Array.isArray(ir)?fe=ir[Ee]:fe=ir,L.copy(Z.viewport),I.copy(Z.scissor),N=Z.scissorTest}else L.copy(H).multiplyScalar(F).floor(),I.copy(X).multiplyScalar(F).floor(),N=te;if($e.bindFramebuffer(Q.FRAMEBUFFER,fe)&&Re&&$e.drawBuffers(Z,fe),$e.viewport(L),$e.scissor(I),$e.setScissorTest(N),Xe){const Pt=We.get(Z.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+de,Pt.__webglTexture,Ee)}else if(St){const Pt=We.get(Z.texture),er=de||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Pt.__webglTexture,Ee||0,er)}A=-1},this.readRenderTargetPixels=function(Z,de,Ee,Re,fe,Xe,St){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Rt=We.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&St!==void 0&&(Rt=Rt[St]),Rt){$e.bindFramebuffer(Q.FRAMEBUFFER,Rt);try{const Pt=Z.texture,er=Pt.format,ir=Pt.type;if(!Ye.textureFormatReadable(er)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ye.textureTypeReadable(ir)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=Z.width-Re&&Ee>=0&&Ee<=Z.height-fe&&Q.readPixels(de,Ee,Re,fe,zt.convert(er),zt.convert(ir),Xe)}finally{const Pt=M!==null?We.get(M).__webglFramebuffer:null;$e.bindFramebuffer(Q.FRAMEBUFFER,Pt)}}},this.readRenderTargetPixelsAsync=function(Z,de,Ee,Re,fe,Xe,St){return Qu(this,null,function*(){if(!(Z&&Z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Rt=We.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&St!==void 0&&(Rt=Rt[St]),Rt){const Pt=Z.texture,er=Pt.format,ir=Pt.type;if(!Ye.textureFormatReadable(er))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ye.textureTypeReadable(ir))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(de>=0&&de<=Z.width-Re&&Ee>=0&&Ee<=Z.height-fe){$e.bindFramebuffer(Q.FRAMEBUFFER,Rt);const It=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,It),Q.bufferData(Q.PIXEL_PACK_BUFFER,Xe.byteLength,Q.STREAM_READ),Q.readPixels(de,Ee,Re,fe,zt.convert(er),zt.convert(ir),0);const tr=M!==null?We.get(M).__webglFramebuffer:null;$e.bindFramebuffer(Q.FRAMEBUFFER,tr);const Gr=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),yield k9e(Q,Gr,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,It),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Xe),Q.deleteBuffer(It),Q.deleteSync(Gr),Xe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(Z,de=null,Ee=0){Z.isTexture!==!0&&(Rg("WebGLRenderer: copyFramebufferToTexture function signature has changed."),de=arguments[0]||null,Z=arguments[1]);const Re=Math.pow(2,-Ee),fe=Math.floor(Z.image.width*Re),Xe=Math.floor(Z.image.height*Re),St=de!==null?de.x:0,Rt=de!==null?de.y:0;q.setTexture2D(Z,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,Ee,0,0,St,Rt,fe,Xe),$e.unbindTexture()};const Qo=Q.createFramebuffer(),Ja=Q.createFramebuffer();this.copyTextureToTexture=function(Z,de,Ee=null,Re=null,fe=0,Xe=null){Z.isTexture!==!0&&(Rg("WebGLRenderer: copyTextureToTexture function signature has changed."),Re=arguments[0]||null,Z=arguments[1],de=arguments[2],Xe=arguments[3]||0,Ee=null),Xe===null&&(fe!==0?(Rg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Xe=fe,fe=0):Xe=0);let St,Rt,Pt,er,ir,It,tr,Gr,Wr;const Kr=Z.isCompressedTexture?Z.mipmaps[Xe]:Z.image;if(Ee!==null)St=Ee.max.x-Ee.min.x,Rt=Ee.max.y-Ee.min.y,Pt=Ee.isBox3?Ee.max.z-Ee.min.z:1,er=Ee.min.x,ir=Ee.min.y,It=Ee.isBox3?Ee.min.z:0;else{const Wn=Math.pow(2,-fe);St=Math.floor(Kr.width*Wn),Rt=Math.floor(Kr.height*Wn),Z.isDataArrayTexture?Pt=Kr.depth:Z.isData3DTexture?Pt=Math.floor(Kr.depth*Wn):Pt=1,er=0,ir=0,It=0}Re!==null?(tr=Re.x,Gr=Re.y,Wr=Re.z):(tr=0,Gr=0,Wr=0);const pr=zt.convert(de.format),Wt=zt.convert(de.type);let yn;de.isData3DTexture?(q.setTexture3D(de,0),yn=Q.TEXTURE_3D):de.isDataArrayTexture||de.isCompressedArrayTexture?(q.setTexture2DArray(de,0),yn=Q.TEXTURE_2D_ARRAY):(q.setTexture2D(de,0),yn=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,de.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,de.unpackAlignment);const vr=Q.getParameter(Q.UNPACK_ROW_LENGTH),ni=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),$r=Q.getParameter(Q.UNPACK_SKIP_PIXELS),gr=Q.getParameter(Q.UNPACK_SKIP_ROWS),Yr=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Kr.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Kr.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,er),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,ir),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,It);const xr=Z.isDataArrayTexture||Z.isData3DTexture,cn=de.isDataArrayTexture||de.isData3DTexture;if(Z.isDepthTexture){const Wn=We.get(Z),Sn=We.get(de),ui=We.get(Wn.__renderTarget),Lo=We.get(Sn.__renderTarget);$e.bindFramebuffer(Q.READ_FRAMEBUFFER,ui.__webglFramebuffer),$e.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Lo.__webglFramebuffer);for(let Tr=0;Tr<Pt;Tr++)xr&&(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,We.get(Z).__webglTexture,fe,It+Tr),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,We.get(de).__webglTexture,Xe,Wr+Tr)),Q.blitFramebuffer(er,ir,St,Rt,tr,Gr,St,Rt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);$e.bindFramebuffer(Q.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(fe!==0||Z.isRenderTargetTexture||We.has(Z)){const Wn=We.get(Z),Sn=We.get(de);$e.bindFramebuffer(Q.READ_FRAMEBUFFER,Qo),$e.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Ja);for(let ui=0;ui<Pt;ui++)xr?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Wn.__webglTexture,fe,It+ui):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Wn.__webglTexture,fe),cn?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Sn.__webglTexture,Xe,Wr+ui):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Sn.__webglTexture,Xe),fe!==0?Q.blitFramebuffer(er,ir,St,Rt,tr,Gr,St,Rt,Q.COLOR_BUFFER_BIT,Q.NEAREST):cn?Q.copyTexSubImage3D(yn,Xe,tr,Gr,Wr+ui,er,ir,St,Rt):Q.copyTexSubImage2D(yn,Xe,tr,Gr,er,ir,St,Rt);$e.bindFramebuffer(Q.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else cn?Z.isDataTexture||Z.isData3DTexture?Q.texSubImage3D(yn,Xe,tr,Gr,Wr,St,Rt,Pt,pr,Wt,Kr.data):de.isCompressedArrayTexture?Q.compressedTexSubImage3D(yn,Xe,tr,Gr,Wr,St,Rt,Pt,pr,Kr.data):Q.texSubImage3D(yn,Xe,tr,Gr,Wr,St,Rt,Pt,pr,Wt,Kr):Z.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,Xe,tr,Gr,St,Rt,pr,Wt,Kr.data):Z.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,Xe,tr,Gr,Kr.width,Kr.height,pr,Kr.data):Q.texSubImage2D(Q.TEXTURE_2D,Xe,tr,Gr,St,Rt,pr,Wt,Kr);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,vr),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,ni),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,$r),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,gr),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Yr),Xe===0&&de.generateMipmaps&&Q.generateMipmap(yn),$e.unbindTexture()},this.copyTextureToTexture3D=function(Z,de,Ee=null,Re=null,fe=0){return Z.isTexture!==!0&&(Rg("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ee=arguments[0]||null,Re=arguments[1]||null,Z=arguments[2],de=arguments[3],fe=arguments[4]||0),Rg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Z,de,Ee,Re,fe)},this.initRenderTarget=function(Z){We.get(Z).__webglFramebuffer===void 0&&q.setupRenderTarget(Z)},this.initTexture=function(Z){Z.isCubeTexture?q.setTextureCube(Z,0):Z.isData3DTexture?q.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?q.setTexture2DArray(Z,0):q.setTexture2D(Z,0),$e.unbindTexture()},this.resetState=function(){w=0,E=0,M=null,$e.reset(),rr.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorspace=sn._getDrawingBufferColorSpace(e),r.unpackColorSpace=sn._getUnpackColorSpace()}}const I$={type:"change"},qI={type:"start"},Kre={type:"end"},zb=new g0,N$=new Wf,FDe=Math.cos(70*zI.DEG2RAD),Gi=new ae,Ho=2*Math.PI,In={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Q5=1e-6;class BDe extends Q6e{constructor(e,r=null){super(e,r),this.state=In.NONE,this.enabled=!0,this.target=new ae,this.cursor=new ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Yg.ROTATE,MIDDLE:Yg.DOLLY,RIGHT:Yg.PAN},this.touches={ONE:kg.ROTATE,TWO:kg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ae,this._lastQuaternion=new Ou,this._lastTargetPosition=new ae,this._quat=new Ou().setFromUnitVectors(e.up,new ae(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new s$,this._sphericalDelta=new s$,this._scale=1,this._panOffset=new ae,this._rotateStart=new dr,this._rotateEnd=new dr,this._rotateDelta=new dr,this._panStart=new dr,this._panEnd=new dr,this._panDelta=new dr,this._dollyStart=new dr,this._dollyEnd=new dr,this._dollyDelta=new dr,this._dollyDirection=new ae,this._mouse=new dr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=UDe.bind(this),this._onPointerDown=zDe.bind(this),this._onPointerUp=VDe.bind(this),this._onContextMenu=KDe.bind(this),this._onMouseWheel=WDe.bind(this),this._onKeyDown=$De.bind(this),this._onTouchStart=jDe.bind(this),this._onTouchMove=XDe.bind(this),this._onMouseDown=HDe.bind(this),this._onMouseMove=GDe.bind(this),this._interceptControlDown=YDe.bind(this),this._interceptControlUp=qDe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(I$),this.update(),this.state=In.NONE}update(e=null){const r=this.object.position;Gi.copy(r).sub(this.target),Gi.applyQuaternion(this._quat),this._spherical.setFromVector3(Gi),this.autoRotate&&this.state===In.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=Ho:n>Math.PI&&(n-=Ho),i<-Math.PI?i+=Ho:i>Math.PI&&(i-=Ho),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let a=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),a=o!=this._spherical.radius}if(Gi.setFromSpherical(this._spherical),Gi.applyQuaternion(this._quatInverse),r.copy(this.target).add(Gi),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const s=Gi.length();o=this._clampDistance(s*this._scale);const l=s-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),a=!!l}else if(this.object.isOrthographicCamera){const s=new ae(this._mouse.x,this._mouse.y,0);s.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),a=l!==this.object.zoom;const u=new ae(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(s),this.object.updateMatrixWorld(),o=Gi.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(zb.origin.copy(this.object.position),zb.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(zb.direction))<FDe?this.object.lookAt(this.target):(N$.setFromNormalAndCoplanarPoint(this.object.up,this.target),zb.intersectPlane(N$,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),a=!0)}return this._scale=1,this._performCursorZoom=!1,a||this._lastPosition.distanceToSquared(this.object.position)>Q5||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Q5||this._lastTargetPosition.distanceToSquared(this.target)>Q5?(this.dispatchEvent(I$),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ho/60*this.autoRotateSpeed*e:Ho/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Gi.setFromMatrixColumn(r,0),Gi.multiplyScalar(-e),this._panOffset.add(Gi)}_panUp(e,r){this.screenSpacePanning===!0?Gi.setFromMatrixColumn(r,1):(Gi.setFromMatrixColumn(r,0),Gi.crossVectors(this.object.up,Gi)),Gi.multiplyScalar(e),this._panOffset.add(Gi)}_pan(e,r){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Gi.copy(i).sub(this.target);let a=Gi.length();a*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*a/n.clientHeight,this.object.matrix),this._panUp(2*r*a/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,a=r-n.top,o=n.width,s=n.height;this._mouse.x=i/o*2-1,this._mouse.y=-(a/s)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Ho*this._rotateDelta.x/r.clientHeight),this._rotateUp(Ho*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ho*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ho*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ho*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ho*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,a=Math.sqrt(n*n+i*i);this._dollyStart.set(0,a)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),a=.5*(e.pageY+n.y);this._rotateEnd.set(i,a)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Ho*this._rotateDelta.x/r.clientHeight),this._rotateUp(Ho*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,a=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,a),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+r.x)*.5,s=(e.pageY+r.y)*.5;this._updateZoomParameters(o,s)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new dr,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function zDe(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function UDe(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function VDe(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Kre),this.state=In.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function HDe(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Yg.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=In.DOLLY;break;case Yg.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=In.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=In.ROTATE}break;case Yg.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=In.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=In.PAN}break;default:this.state=In.NONE}this.state!==In.NONE&&this.dispatchEvent(qI)}function GDe(t){switch(this.state){case In.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case In.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case In.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function WDe(t){this.enabled===!1||this.enableZoom===!1||this.state!==In.NONE||(t.preventDefault(),this.dispatchEvent(qI),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(Kre))}function $De(t){this.enabled!==!1&&this._handleKeyDown(t)}function jDe(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case kg.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=In.TOUCH_ROTATE;break;case kg.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=In.TOUCH_PAN;break;default:this.state=In.NONE}break;case 2:switch(this.touches.TWO){case kg.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=In.TOUCH_DOLLY_PAN;break;case kg.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=In.TOUCH_DOLLY_ROTATE;break;default:this.state=In.NONE}break;default:this.state=In.NONE}this.state!==In.NONE&&this.dispatchEvent(qI)}function XDe(t){switch(this._trackPointer(t),this.state){case In.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case In.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case In.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case In.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=In.NONE}}function KDe(t){this.enabled!==!1&&t.preventDefault()}function YDe(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function qDe(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class ZDe extends Pre{constructor(){super();const e=new m0;e.deleteAttribute("uv");const r=new H_({side:_o}),n=new H_,i=new Vre(16777215,900,28,2);i.position.set(.418,16.199,.3),this.add(i);const a=new On(e,r);a.position.set(-.757,13.219,.717),a.scale.set(31.713,28.305,28.591),this.add(a);const o=new On(e,n);o.position.set(-10.906,2.009,1.846),o.rotation.set(0,-.195,0),o.scale.set(2.328,7.905,4.651),this.add(o);const s=new On(e,n);s.position.set(-5.607,-.754,-.758),s.rotation.set(0,.994,0),s.scale.set(1.97,1.534,3.955),this.add(s);const l=new On(e,n);l.position.set(6.167,.857,7.803),l.rotation.set(0,.561,0),l.scale.set(3.927,6.285,3.687),this.add(l);const u=new On(e,n);u.position.set(-2.017,.018,6.124),u.rotation.set(0,.333,0),u.scale.set(2.002,4.566,2.064),this.add(u);const c=new On(e,n);c.position.set(2.291,-.756,-2.621),c.rotation.set(0,-.286,0),c.scale.set(1.546,1.552,1.496),this.add(c);const f=new On(e,n);f.position.set(-2.193,-.369,-5.547),f.rotation.set(0,.516,0),f.scale.set(3.875,3.487,2.986),this.add(f);const h=new On(e,pg(50));h.position.set(-16.116,14.37,8.208),h.scale.set(.1,2.428,2.739),this.add(h);const d=new On(e,pg(50));d.position.set(-16.109,18.021,-8.207),d.scale.set(.1,2.425,2.751),this.add(d);const p=new On(e,pg(17));p.position.set(14.904,12.198,-1.832),p.scale.set(.15,4.265,6.331),this.add(p);const v=new On(e,pg(43));v.position.set(-.462,8.89,14.52),v.scale.set(4.38,5.441,.088),this.add(v);const g=new On(e,pg(20));g.position.set(3.235,11.486,-12.541),g.scale.set(2.5,2,.1),this.add(g);const m=new On(e,pg(100));m.position.set(0,20,0),m.scale.set(1,.1,1),this.add(m)}dispose(){const e=new Set;this.traverse(r=>{r.isMesh&&(e.add(r.geometry),e.add(r.material))});for(const r of e)r.dispose()}}function pg(t){const e=new ah;return e.color.setScalar(t),e}const e9=new WeakMap;class JDe extends qp{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,r,n,i){const a=new rT(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,o=>{this.parse(o,r,i)},n,i)}parse(e,r,n=()=>{}){this.decodeDracoFile(e,r,null,null,Ti,n).catch(n)}decodeDracoFile(e,r,n,i,a=Za,o=()=>{}){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:a};return this.decodeGeometry(e,s).then(r).catch(o)}decodeGeometry(e,r){const n=JSON.stringify(r);if(e9.has(e)){const l=e9.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const a=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(a,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[a]={resolve:u,reject:c},i.postMessage({type:"decode",id:a,taskConfig:r,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return s.catch(()=>!0).then(()=>{i&&a&&this._releaseTask(i,a)}),e9.set(e,{key:n,promise:s}),s}_createGeometry(e){const r=new Zo;e.index&&r.setIndex(new Ui(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],a=i.name,o=i.array,s=i.itemSize,l=new Ui(o,s);a==="color"&&(this._assignVertexColorSpace(l,i.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),r.setAttribute(a,l)}return r}_assignVertexColorSpace(e,r){if(r!==Ti)return;const n=new Cr;for(let i=0,a=e.count;i<a;i++)n.fromBufferAttribute(e,i),sn.toWorkingColorSpace(n,Ti),e.setXYZ(i,n.r,n.g,n.b)}_loadLibrary(e,r){const n=new rT(this.manager);return n.setPath(this.decoderPath),n.setResponseType(r),n.setWithCredentials(this.withCredentials),new Promise((i,a)=>{n.load(e,i,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return e?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const a=QDe.toString(),o=["/* draco decoder */",i,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(a){const o=a.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,a){return i._taskLoad>a._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=r,n._taskLoad+=r,n})}_releaseTask(e,r){e._taskLoad-=e._taskCosts[r],delete e._callbacks[r],delete e._taskCosts[r]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function QDe(){let t,e;onmessage=function(o){const s=o.data;switch(s.type){case"init":t=s.decoderConfig,e=new Promise(function(c){t.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=s.buffer,u=s.taskConfig;e.then(c=>{const f=c.draco,h=new f.Decoder;try{const d=r(f,h,new Int8Array(l),u),p=d.attributes.map(v=>v.array.buffer);d.index&&p.push(d.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:d},p)}catch(d){console.error(d),self.postMessage({type:"error",id:s.id,error:d.message})}finally{f.destroy(h)}});break}};function r(o,s,l,u){const c=u.attributeIDs,f=u.attributeTypes;let h,d;const p=s.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,d=s.DecodeArrayToMesh(l,l.byteLength,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,d=s.DecodeArrayToPointCloud(l,l.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const v={index:null,attributes:[]};for(const g in c){const m=self[f[g]];let x,S;if(u.useUniqueIDs)S=c[g],x=s.GetAttributeByUniqueId(h,S);else{if(S=s.GetAttributeId(h,o[c[g]]),S===-1)continue;x=s.GetAttribute(h,S)}const b=i(o,s,h,g,m,x);g==="color"&&(b.vertexColorSpace=u.vertexColorSpace),v.attributes.push(b)}return p===o.TRIANGULAR_MESH&&(v.index=n(o,s,h)),o.destroy(h),v}function n(o,s,l){const c=l.num_faces()*3,f=c*4,h=o._malloc(f);s.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,c).slice();return o._free(h),{array:d,itemSize:1}}function i(o,s,l,u,c,f){const h=f.num_components(),p=l.num_points()*h,v=p*c.BYTES_PER_ELEMENT,g=a(o,c),m=o._malloc(v);s.GetAttributeDataArrayForAllPoints(l,f,g,v,m);const x=new c(o.HEAPF32.buffer,m,p).slice();return o._free(m),{name:u,array:x,itemSize:h}}function a(o,s){switch(s){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}function O$(t,e){if(e===l9e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===P8||e===yre){let r=t.getIndex();if(r===null){const o=[],s=t.getAttribute("position");if(s!==void 0){for(let l=0;l<s.count;l++)o.push(l);t.setIndex(o),r=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const n=r.count-2,i=[];if(e===P8)for(let o=1;o<=n;o++)i.push(r.getX(0)),i.push(r.getX(o)),i.push(r.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(r.getX(o)),i.push(r.getX(o+1)),i.push(r.getX(o+2))):(i.push(r.getX(o+2)),i.push(r.getX(o+1)),i.push(r.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=t.clone();return a.setIndex(i),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class eIe extends qp{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new aIe(r)}),this.register(function(r){return new oIe(r)}),this.register(function(r){return new vIe(r)}),this.register(function(r){return new gIe(r)}),this.register(function(r){return new mIe(r)}),this.register(function(r){return new lIe(r)}),this.register(function(r){return new uIe(r)}),this.register(function(r){return new cIe(r)}),this.register(function(r){return new fIe(r)}),this.register(function(r){return new iIe(r)}),this.register(function(r){return new hIe(r)}),this.register(function(r){return new sIe(r)}),this.register(function(r){return new pIe(r)}),this.register(function(r){return new dIe(r)}),this.register(function(r){return new rIe(r)}),this.register(function(r){return new yIe(r)}),this.register(function(r){return new _Ie(r)})}load(e,r,n,i){const a=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=$1.extractUrlBase(e);o=$1.resolveURL(u,this.path)}else o=$1.extractUrlBase(e);this.manager.itemStart(e);const s=function(u){i?i(u):console.error(u),a.manager.itemError(e),a.manager.itemEnd(e)},l=new rT(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{a.parse(u,o,function(c){r(c),a.manager.itemEnd(e)},s)}catch(c){s(c)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,n,i){let a;const o={},s={},l=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Yre){try{o[en.KHR_BINARY_GLTF]=new xIe(e)}catch(f){i&&i(f);return}a=JSON.parse(o[en.KHR_BINARY_GLTF].content)}else a=JSON.parse(l.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new IIe(a,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const f=this.pluginCallbacks[c](u);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[f.name]=f,o[f.name]=!0}if(a.extensionsUsed)for(let c=0;c<a.extensionsUsed.length;++c){const f=a.extensionsUsed[c],h=a.extensionsRequired||[];switch(f){case en.KHR_MATERIALS_UNLIT:o[f]=new nIe;break;case en.KHR_DRACO_MESH_COMPRESSION:o[f]=new SIe(a,this.dracoLoader);break;case en.KHR_TEXTURE_TRANSFORM:o[f]=new bIe;break;case en.KHR_MESH_QUANTIZATION:o[f]=new wIe;break;default:h.indexOf(f)>=0&&s[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(o),u.setPlugins(s),u.parse(n,i)}parseAsync(e,r){const n=this;return new Promise(function(i,a){n.parse(e,r,i,a)})}}function tIe(){let t={};return{get:function(e){return t[e]},add:function(e,r){t[e]=r},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const en={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class rIe{constructor(e){this.parser=e,this.name=en.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,r=this.parser.json.nodes||[];for(let n=0,i=r.length;n<i;n++){const a=r[n];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const r=this.parser,n="light:"+e;let i=r.cache.get(n);if(i)return i;const a=r.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let u;const c=new Cr(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],Za);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Hre(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Vre(c),u.distance=f;break;case"spot":u=new O6e(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,gc(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=r.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),r.cache.add(n,i),i}getDependency(e,r){if(e==="light")return this._loadLight(r)}createNodeAttachment(e){const r=this,n=this.parser,a=n.json.nodes[e],s=(a.extensions&&a.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(l){return n._getNodeRef(r.cache,s,l)})}}class nIe{constructor(){this.name=en.KHR_MATERIALS_UNLIT}getMaterialType(){return ah}extendParams(e,r,n){const i=[];e.color=new Cr(1,1,1),e.opacity=1;const a=r.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const o=a.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Za),e.opacity=o[3]}a.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",a.baseColorTexture,Ti))}return Promise.all(i)}}class iIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,r){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name].emissiveStrength;return a!==void 0&&(r.emissiveIntensity=a),Promise.resolve()}}class aIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(r.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&a.push(n.assignTexture(r,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&a.push(n.assignTexture(r,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(a.push(n.assignTexture(r,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const s=o.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new dr(s,s)}return Promise.all(a)}}class oIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name];return r.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class sIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(r.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&a.push(n.assignTexture(r,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(r.iridescenceIOR=o.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&a.push(n.assignTexture(r,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(a)}}class lIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[];r.sheenColor=new Cr(0,0,0),r.sheenRoughness=0,r.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const s=o.sheenColorFactor;r.sheenColor.setRGB(s[0],s[1],s[2],Za)}return o.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&a.push(n.assignTexture(r,"sheenColorMap",o.sheenColorTexture,Ti)),o.sheenRoughnessTexture!==void 0&&a.push(n.assignTexture(r,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class uIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(r.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&a.push(n.assignTexture(r,"transmissionMap",o.transmissionTexture)),Promise.all(a)}}class cIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];r.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&a.push(n.assignTexture(r,"thicknessMap",o.thicknessTexture)),r.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return r.attenuationColor=new Cr().setRGB(s[0],s[1],s[2],Za),Promise.all(a)}}class fIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name];return r.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class hIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];r.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&a.push(n.assignTexture(r,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return r.specularColor=new Cr().setRGB(s[0],s[1],s[2],Za),o.specularColorTexture!==void 0&&a.push(n.assignTexture(r,"specularColorMap",o.specularColorTexture,Ti)),Promise.all(a)}}class dIe{constructor(e){this.parser=e,this.name=en.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];return r.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&a.push(n.assignTexture(r,"bumpMap",o.bumpTexture)),Promise.all(a)}}class pIe{constructor(e){this.parser=e,this.name=en.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Gu}extendMaterialParams(e,r){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(r.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(r.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&a.push(n.assignTexture(r,"anisotropyMap",o.anisotropyTexture)),Promise.all(a)}}class vIe{constructor(e){this.parser=e,this.name=en.KHR_TEXTURE_BASISU}loadTexture(e){const r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const a=i.extensions[this.name],o=r.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(e,a.source,o)}}class gIe{constructor(e){this.parser=e,this.name=en.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const r=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[r])return null;const o=a.extensions[r],s=i.images[o.source];let l=n.textureLoader;if(s.uri){const u=n.options.manager.getHandler(s.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}}class mIe{constructor(e){this.parser=e,this.name=en.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const r=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[r])return null;const o=a.extensions[r],s=i.images[o.source];let l=n.textureLoader;if(s.uri){const u=n.options.manager.getHandler(s.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}}class yIe{constructor(e){this.name=en.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const r=this.parser.json,n=r.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],a=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(s){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,h=new Uint8Array(s,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,f,h,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*f);return o.decodeGltfBuffer(new Uint8Array(d),c,f,h,i.mode,i.filter),d})})}else return null}}class _Ie{constructor(e){this.name=en.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const r=this.parser.json,n=r.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=r.meshes[n.mesh];for(const u of i.primitives)if(u.mode!==Us.TRIANGLES&&u.mode!==Us.TRIANGLE_STRIP&&u.mode!==Us.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,s=[],l={};for(const u in o)s.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],h=u[0].count,d=[];for(const p of f){const v=new Rr,g=new ae,m=new Ou,x=new ae(1,1,1),S=new f6e(p.geometry,p.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,b),l.SCALE&&x.fromBufferAttribute(l.SCALE,b),S.setMatrixAt(b,v.compose(g,m,x));for(const b in l)if(b==="_COLOR_0"){const T=l[b];S.instanceColor=new D8(T.array,T.itemSize,T.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&p.geometry.setAttribute(b,l[b]);si.prototype.copy.call(S,p),this.parser.assignFinalMaterial(S),d.push(S)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const Yre="glTF",Zy=12,k$={JSON:1313821514,BIN:5130562};class xIe{constructor(e){this.name=en.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(e,0,Zy),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==Yre)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Zy,a=new DataView(e,Zy);let o=0;for(;o<i;){const s=a.getUint32(o,!0);o+=4;const l=a.getUint32(o,!0);if(o+=4,l===k$.JSON){const u=new Uint8Array(e,Zy+o,s);this.content=n.decode(u)}else if(l===k$.BIN){const u=Zy+o;this.body=e.slice(u,u+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class SIe{constructor(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=en.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(e,r){const n=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},l={},u={};for(const c in o){const f=z8[c]||c.toLowerCase();s[f]=o[c]}for(const c in e.attributes){const f=z8[c]||c.toLowerCase();if(o[c]!==void 0){const h=n.accessors[e.attributes[c]],d=Qg[h.componentType];u[f]=d.name,l[f]=h.normalized===!0}}return r.getDependency("bufferView",a).then(function(c){return new Promise(function(f,h){i.decodeDracoFile(c,function(d){for(const p in d.attributes){const v=d.attributes[p],g=l[p];g!==void 0&&(v.normalized=g)}f(d)},s,u,Za,h)})})}}class bIe{constructor(){this.name=en.KHR_TEXTURE_TRANSFORM}extendTexture(e,r){return(r.texCoord===void 0||r.texCoord===e.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(e=e.clone(),r.texCoord!==void 0&&(e.channel=r.texCoord),r.offset!==void 0&&e.offset.fromArray(r.offset),r.rotation!==void 0&&(e.rotation=r.rotation),r.scale!==void 0&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}}class wIe{constructor(){this.name=en.KHR_MESH_QUANTIZATION}}class qre extends N2{constructor(e,r,n,i){super(e,r,n,i)}copySampleValue_(e){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let o=0;o!==i;o++)r[o]=n[a+o];return r}interpolate_(e,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=s*2,u=s*3,c=i-r,f=(n-r)/c,h=f*f,d=h*f,p=e*u,v=p-u,g=-2*d+3*h,m=d-h,x=1-g,S=m-h+f;for(let b=0;b!==s;b++){const T=o[v+b+s],w=o[v+b+l]*c,E=o[p+b+s],M=o[p+b]*c;a[b]=x*T+S*w+g*E+m*M}return a}}const TIe=new Ou;class CIe extends qre{interpolate_(e,r,n,i){const a=super.interpolate_(e,r,n,i);return TIe.fromArray(a).normalize().toArray(a),a}}const Us={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Qg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},F$={9728:xo,9729:vs,9984:lre,9985:R3,9986:b1,9987:Sc},B$={33071:ih,33648:Zw,10497:Em},t9={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},z8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},EIe={CUBICSPLINE:void 0,LINEAR:U_,STEP:z_},r9={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function AIe(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new H_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Gc})),t.DefaultMaterial}function Pd(t,e,r){for(const n in r.extensions)t[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=r.extensions[n])}function gc(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function MIe(t,e,r){let n=!1,i=!1,a=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(n=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(a=!0),n&&i&&a)break}if(!n&&!i&&!a)return Promise.resolve(t);const o=[],s=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(n){const h=f.POSITION!==void 0?r.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?r.getDependency("accessor",f.NORMAL):t.attributes.normal;s.push(h)}if(a){const h=f.COLOR_0!==void 0?r.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],h=u[2];return n&&(t.morphAttributes.position=c),i&&(t.morphAttributes.normal=f),a&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function RIe(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let r=0,n=e.weights.length;r<n;r++)t.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){const r=e.extras.targetNames;if(t.morphTargetInfluences.length===r.length){t.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++)t.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function PIe(t){let e;const r=t.extensions&&t.extensions[en.KHR_DRACO_MESH_COMPRESSION];if(r?e="draco:"+r.bufferView+":"+r.indices+":"+n9(r.attributes):e=t.indices+":"+n9(t.attributes)+":"+t.mode,t.targets!==void 0)for(let n=0,i=t.targets.length;n<i;n++)e+=":"+n9(t.targets[n]);return e}function n9(t){let e="";const r=Object.keys(t).sort();for(let n=0,i=r.length;n<i;n++)e+=r[n]+":"+t[r[n]]+";";return e}function U8(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function LIe(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":t.search(/\.ktx2($|\?)/i)>0||t.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const DIe=new Rr;class IIe{constructor(e={},r={}){this.json=e,this.extensions={},this.plugins={},this.options=r,this.cache=new tIe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,a=!1,o=-1;if(typeof navigator!="undefined"){const s=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(s)===!0;const l=s.match(/Version\/(\d+)/);i=n&&l?parseInt(l[1],10):-1,a=s.indexOf("Firefox")>-1,o=a?s.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap=="undefined"||n&&i<17||a&&o<98?this.textureLoader=new N8(this.options.manager):this.textureLoader=new U6e(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rT(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,r){const n=this,i=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const s={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};return Pd(a,s,i),gc(s,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(s)})).then(function(){for(const l of s.scenes)l.updateMatrixWorld();e(s)})}).catch(r)}_markDefs(){const e=this.json.nodes||[],r=this.json.skins||[],n=this.json.meshes||[];for(let i=0,a=r.length;i<a;i++){const o=r[i].joints;for(let s=0,l=o.length;s<l;s++)e[o[s]].isBone=!0}for(let i=0,a=e.length;i<a;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,r){r!==void 0&&(e.refs[r]===void 0&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}_getNodeRef(e,r,n){if(e.refs[r]<=1)return n;const i=n.clone(),a=(o,s)=>{const l=this.associations.get(o);l!=null&&this.associations.set(s,l);for(const[u,c]of o.children.entries())a(c,s.children[u])};return a(n,i),i.name+="_instance_"+e.uses[r]++,i}_invokeOne(e){const r=Object.values(this.plugins);r.push(this);for(let n=0;n<r.length;n++){const i=e(r[n]);if(i)return i}return null}_invokeAll(e){const r=Object.values(this.plugins);r.unshift(this);const n=[];for(let i=0;i<r.length;i++){const a=e(r[i]);a&&n.push(a)}return n}getDependency(e,r){const n=e+":"+r;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(r);break;case"node":i=this._invokeOne(function(a){return a.loadNode&&a.loadNode(r)});break;case"mesh":i=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(r)});break;case"accessor":i=this.loadAccessor(r);break;case"bufferView":i=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(r)});break;case"buffer":i=this.loadBuffer(r);break;case"material":i=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(r)});break;case"texture":i=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(r)});break;case"skin":i=this.loadSkin(r);break;case"animation":i=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(r)});break;case"camera":i=this.loadCamera(r);break;default:if(i=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,r)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let r=this.cache.get(e);if(!r){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];r=Promise.all(i.map(function(a,o){return n.getDependency(e,o)})),this.cache.add(e,r)}return r}loadBuffer(e){const r=this.json.buffers[e],n=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&e===0)return Promise.resolve(this.extensions[en.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(a,o){n.load($1.resolveURL(r.uri,i.path),a,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(e){const r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(n){const i=r.byteLength||0,a=r.byteOffset||0;return n.slice(a,a+i)})}loadAccessor(e){const r=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=t9[i.type],s=Qg[i.componentType],l=i.normalized===!0,u=new s(i.count*o);return Promise.resolve(new Ui(u,o,l))}const a=[];return i.bufferView!==void 0?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),i.sparse!==void 0&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(o){const s=o[0],l=t9[i.type],u=Qg[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,h=i.byteOffset||0,d=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let v,g;if(d&&d!==f){const m=Math.floor(h/d),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count;let S=r.cache.get(x);S||(v=new u(s,m*d,i.count*d/c),S=new Lre(v,d/c),r.cache.add(x,S)),g=new wc(S,l,h%d/c,p)}else s===null?v=new u(i.count*l):v=new u(s,h,i.count*l),g=new Ui(v,l,p);if(i.sparse!==void 0){const m=t9.SCALAR,x=Qg[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,T=new x(o[1],S,i.sparse.count*m),w=new u(o[2],b,i.sparse.count*l);s!==null&&(g=new Ui(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let E=0,M=T.length;E<M;E++){const A=T[E];if(g.setX(A,w[E*l]),l>=2&&g.setY(A,w[E*l+1]),l>=3&&g.setZ(A,w[E*l+2]),l>=4&&g.setW(A,w[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=p}return g})}loadTexture(e){const r=this.json,n=this.options,a=r.textures[e].source,o=r.images[a];let s=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(s=l)}return this.loadTextureImage(e,a,s)}loadTextureImage(e,r,n){const i=this,a=this.json,o=a.textures[e],s=a.images[r],l=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(r,n).then(function(c){c.flipY=!1,c.name=o.name||s.name||"",c.name===""&&typeof s.uri=="string"&&s.uri.startsWith("data:image/")===!1&&(c.name=s.uri);const h=(a.samplers||{})[o.sampler]||{};return c.magFilter=F$[h.magFilter]||vs,c.minFilter=F$[h.minFilter]||Sc,c.wrapS=B$[h.wrapS]||Em,c.wrapT=B$[h.wrapT]||Em,c.generateMipmaps=!c.isCompressedTexture&&c.minFilter!==xo&&c.minFilter!==vs,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,r){const n=this,i=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],s=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const h=new Blob([f],{type:o.mimeType});return l=s.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let p=h;r.isImageBitmapLoader===!0&&(p=function(v){const g=new ya(v);g.needsUpdate=!0,h(g)}),r.load($1.resolveURL(f,a.path),p,void 0,d)})}).then(function(f){return u===!0&&s.revokeObjectURL(l),gc(f,o),f.userData.mimeType=o.mimeType||LIe(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,r,n,i){const a=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),a.extensions[en.KHR_TEXTURE_TRANSFORM]){const s=n.extensions!==void 0?n.extensions[en.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const l=a.associations.get(o);o=a.extensions[en.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),a.associations.set(o,l)}}return i!==void 0&&(o.colorSpace=i),e[r]=o,o})}assignFinalMaterial(e){const r=e.geometry;let n=e.material;const i=r.attributes.tangent===void 0,a=r.attributes.color!==void 0,o=r.attributes.normal===void 0;if(e.isPoints){const s="PointsMaterial:"+n.uuid;let l=this.cache.get(s);l||(l=new kre,Lu.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(s,l)),n=l}else if(e.isLine){const s="LineBasicMaterial:"+n.uuid;let l=this.cache.get(s);l||(l=new Ore,Lu.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(s,l)),n=l}if(i||a||o){let s="ClonedMaterial:"+n.uuid+":";i&&(s+="derivative-tangents:"),a&&(s+="vertex-colors:"),o&&(s+="flat-shading:");let l=this.cache.get(s);l||(l=n.clone(),a&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(s,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return H_}loadMaterial(e){const r=this,n=this.json,i=this.extensions,a=n.materials[e];let o;const s={},l=a.extensions||{},u=[];if(l[en.KHR_MATERIALS_UNLIT]){const f=i[en.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(s,a,r))}else{const f=a.pbrMetallicRoughness||{};if(s.color=new Cr(1,1,1),s.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;s.color.setRGB(h[0],h[1],h[2],Za),s.opacity=h[3]}f.baseColorTexture!==void 0&&u.push(r.assignTexture(s,"map",f.baseColorTexture,Ti)),s.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,s.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(r.assignTexture(s,"metalnessMap",f.metallicRoughnessTexture)),u.push(r.assignTexture(s,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,s)})))}a.doubleSided===!0&&(s.side=_u);const c=a.alphaMode||r9.OPAQUE;if(c===r9.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,c===r9.MASK&&(s.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&o!==ah&&(u.push(r.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new dr(1,1),a.normalTexture.scale!==void 0)){const f=a.normalTexture.scale;s.normalScale.set(f,f)}if(a.occlusionTexture!==void 0&&o!==ah&&(u.push(r.assignTexture(s,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&o!==ah){const f=a.emissiveFactor;s.emissive=new Cr().setRGB(f[0],f[1],f[2],Za)}return a.emissiveTexture!==void 0&&o!==ah&&u.push(r.assignTexture(s,"emissiveMap",a.emissiveTexture,Ti)),Promise.all(u).then(function(){const f=new o(s);return a.name&&(f.name=a.name),gc(f,a),r.associations.set(f,{materials:e}),a.extensions&&Pd(i,f,a),f})}createUniqueName(e){const r=Mn.sanitizeNodeName(e||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(e){const r=this,n=this.extensions,i=this.primitiveCache;function a(s){return n[en.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,r).then(function(l){return z$(l,s,r)})}const o=[];for(let s=0,l=e.length;s<l;s++){const u=e[s],c=PIe(u),f=i[c];if(f)o.push(f.promise);else{let h;u.extensions&&u.extensions[en.KHR_DRACO_MESH_COMPRESSION]?h=a(u):h=z$(new Zo,u,r),i[c]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const r=this,n=this.json,i=this.extensions,a=n.meshes[e],o=a.primitives,s=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?AIe(this.cache):this.getDependency("material",o[l].material);s.push(c)}return s.push(r.loadGeometries(o)),Promise.all(s).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let d=0,p=c.length;d<p;d++){const v=c[d],g=o[d];let m;const x=u[d];if(g.mode===Us.TRIANGLES||g.mode===Us.TRIANGLE_STRIP||g.mode===Us.TRIANGLE_FAN||g.mode===void 0)m=a.isSkinnedMesh===!0?new s6e(v,x):new On(v,x),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),g.mode===Us.TRIANGLE_STRIP?m.geometry=O$(m.geometry,yre):g.mode===Us.TRIANGLE_FAN&&(m.geometry=O$(m.geometry,P8));else if(g.mode===Us.LINES)m=new p6e(v,x);else if(g.mode===Us.LINE_STRIP)m=new GI(v,x);else if(g.mode===Us.LINE_LOOP)m=new v6e(v,x);else if(g.mode===Us.POINTS)m=new Fre(v,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&RIe(m,a),m.name=r.createUniqueName(a.name||"mesh_"+e),gc(m,a),g.extensions&&Pd(i,m,g),r.assignFinalMaterial(m),f.push(m)}for(let d=0,p=f.length;d<p;d++)r.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return a.extensions&&Pd(i,f[0],a),f[0];const h=new ip;a.extensions&&Pd(i,h,a),r.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let r;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?r=new po(zI.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(r=new jI(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(r.name=this.createUniqueName(n.name)),gc(r,n),Promise.resolve(r)}loadSkin(e){const r=this.json.skins[e],n=[];for(let i=0,a=r.joints.length;i<a;i++)n.push(this._loadNodeShallow(r.joints[i]));return r.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",r.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const a=i.pop(),o=i,s=[],l=[];for(let u=0,c=o.length;u<c;u++){const f=o[u];if(f){s.push(f);const h=new Rr;a!==null&&h.fromArray(a.array,u*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[u])}return new u6e(s,l)})}loadAnimation(e){const r=this.json,n=this,i=r.animations[e],a=i.name?i.name:"animation_"+e,o=[],s=[],l=[],u=[],c=[];for(let f=0,h=i.channels.length;f<h;f++){const d=i.channels[f],p=i.samplers[d.sampler],v=d.target,g=v.node,m=i.parameters!==void 0?i.parameters[p.input]:p.input,x=i.parameters!==void 0?i.parameters[p.output]:p.output;v.node!==void 0&&(o.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",m)),l.push(this.getDependency("accessor",x)),u.push(p),c.push(v))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(f){const h=f[0],d=f[1],p=f[2],v=f[3],g=f[4],m=[];for(let x=0,S=h.length;x<S;x++){const b=h[x],T=d[x],w=p[x],E=v[x],M=g[x];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const A=n._createAnimationTracks(b,T,w,E,M);if(A)for(let R=0;R<A.length;R++)m.push(A[R])}return new A6e(a,void 0,m)})}createNodeMesh(e){const r=this.json,n=this,i=r.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(a){const o=n._getNodeRef(n.meshCache,i.mesh,a);return i.weights!==void 0&&o.traverse(function(s){if(s.isMesh)for(let l=0,u=i.weights.length;l<u;l++)s.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const r=this.json,n=this,i=r.nodes[e],a=n._loadNodeShallow(e),o=[],s=i.children||[];for(let u=0,c=s.length;u<c;u++)o.push(n.getDependency("node",s[u]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([a,Promise.all(o),l]).then(function(u){const c=u[0],f=u[1],h=u[2];h!==null&&c.traverse(function(d){d.isSkinnedMesh&&d.bind(h,DIe)});for(let d=0,p=f.length;d<p;d++)c.add(f[d]);return c})}_loadNodeShallow(e){const r=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=r.nodes[e],o=a.name?i.createUniqueName(a.name):"",s=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&s.push(l),a.camera!==void 0&&s.push(i.getDependency("camera",a.camera).then(function(u){return i._getNodeRef(i.cameraCache,a.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){s.push(u)}),this.nodeCache[e]=Promise.all(s).then(function(u){let c;if(a.isBone===!0?c=new Dre:u.length>1?c=new ip:u.length===1?c=u[0]:c=new si,c!==u[0])for(let f=0,h=u.length;f<h;f++)c.add(u[f]);if(a.name&&(c.userData.name=a.name,c.name=o),gc(c,a),a.extensions&&Pd(n,c,a),a.matrix!==void 0){const f=new Rr;f.fromArray(a.matrix),c.applyMatrix4(f)}else a.translation!==void 0&&c.position.fromArray(a.translation),a.rotation!==void 0&&c.quaternion.fromArray(a.rotation),a.scale!==void 0&&c.scale.fromArray(a.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const r=this.extensions,n=this.json.scenes[e],i=this,a=new ip;n.name&&(a.name=i.createUniqueName(n.name)),gc(a,n),n.extensions&&Pd(r,a,n);const o=n.nodes||[],s=[];for(let l=0,u=o.length;l<u;l++)s.push(i.getDependency("node",o[l]));return Promise.all(s).then(function(l){for(let c=0,f=l.length;c<f;c++)a.add(l[c]);const u=c=>{const f=new Map;for(const[h,d]of i.associations)(h instanceof Lu||h instanceof ya)&&f.set(h,d);return c.traverse(h=>{const d=i.associations.get(h);d!=null&&f.set(h,d)}),f};return i.associations=u(a),a})}_createAnimationTracks(e,r,n,i,a){const o=[],s=e.name?e.name:e.uuid,l=[];zf[a.path]===zf.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(s);let u;switch(zf[a.path]){case zf.weights:u=Lm;break;case zf.rotation:u=Dm;break;case zf.position:case zf.scale:u=Im;break;default:switch(n.itemSize){case 1:u=Lm;break;case 2:case 3:default:u=Im;break}break}const c=i.interpolation!==void 0?EIe[i.interpolation]:U_,f=this._getArrayFromAccessor(n);for(let h=0,d=l.length;h<d;h++){const p=new u(l[h]+"."+zf[a.path],r.array,f,c);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let r=e.array;if(e.normalized){const n=U8(r.constructor),i=new Float32Array(r.length);for(let a=0,o=r.length;a<o;a++)i[a]=r[a]*n;r=i}return r}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Dm?CIe:qre;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function NIe(t,e,r){const n=e.attributes,i=new ll;if(n.POSITION!==void 0){const s=r.json.accessors[n.POSITION],l=s.min,u=s.max;if(l!==void 0&&u!==void 0){if(i.set(new ae(l[0],l[1],l[2]),new ae(u[0],u[1],u[2])),s.normalized){const c=U8(Qg[s.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const s=new ae,l=new ae;for(let u=0,c=a.length;u<c;u++){const f=a[u];if(f.POSITION!==void 0){const h=r.json.accessors[f.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const v=U8(Qg[h.componentType]);l.multiplyScalar(v)}s.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(s)}t.boundingBox=i;const o=new ul;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function z$(t,e,r){const n=e.attributes,i=[];function a(o,s){return r.getDependency("accessor",o).then(function(l){t.setAttribute(s,l)})}for(const o in n){const s=z8[o]||o.toLowerCase();s in t.attributes||i.push(a(n[o],s))}if(e.indices!==void 0&&!t.index){const o=r.getDependency("accessor",e.indices).then(function(s){t.setIndex(s)});i.push(o)}return sn.workingColorSpace!==Za&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${sn.workingColorSpace}" not supported.`),gc(t,e),NIe(t,e,r),Promise.all(i).then(function(){return e.targets!==void 0?MIe(t,e.targets,r):t})}var ZI=D.createContext({});function mr(){return mr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mr.apply(null,arguments)}function Zre(t){if(Array.isArray(t))return t}function OIe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function V8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function JI(t,e){if(t){if(typeof t=="string")return V8(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V8(t,e):void 0}}function Jre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rt(t,e){return Zre(t)||OIe(t,e)||JI(t,e)||Jre()}function wr(t){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(t)}function kIe(t,e){if(wr(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qre(t){var e=kIe(t,"string");return wr(e)=="symbol"?e:e+""}function xe(t,e,r){return(e=Qre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FIe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function Pn(t,e){if(t==null)return{};var r,n,i=FIe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var i9={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var U$;function BIe(){return U$||(U$=1,function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,n(s)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)e.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()}(i9)),i9.exports}var zIe=BIe();const st=WP(zIe);function Ia(t,e){UIe(t)&&(t="100%");var r=VIe(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Ub(t){return Math.min(1,Math.max(0,t))}function UIe(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function VIe(t){return typeof t=="string"&&t.indexOf("%")!==-1}function ene(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Vb(t){return t<=1?"".concat(Number(t)*100,"%"):t}function ap(t){return t.length===1?"0"+t:String(t)}function HIe(t,e,r){return{r:Ia(t,255)*255,g:Ia(e,255)*255,b:Ia(r,255)*255}}function V$(t,e,r){t=Ia(t,255),e=Ia(e,255),r=Ia(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4;break}a/=6}return{h:a,s:o,l:s}}function a9(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*(6*r):r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function GIe(t,e,r){var n,i,a;if(t=Ia(t,360),e=Ia(e,100),r=Ia(r,100),e===0)i=r,a=r,n=r;else{var o=r<.5?r*(1+e):r+e-r*e,s=2*r-o;n=a9(s,o,t+1/3),i=a9(s,o,t),a=a9(s,o,t-1/3)}return{r:n*255,g:i*255,b:a*255}}function H8(t,e,r){t=Ia(t,255),e=Ia(e,255),r=Ia(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),a=0,o=n,s=n-i,l=n===0?0:s/n;if(n===i)a=0;else{switch(n){case t:a=(e-r)/s+(e<r?6:0);break;case e:a=(r-t)/s+2;break;case r:a=(t-e)/s+4;break}a/=6}return{h:a,s:l,v:o}}function WIe(t,e,r){t=Ia(t,360)*6,e=Ia(e,100),r=Ia(r,100);var n=Math.floor(t),i=t-n,a=r*(1-e),o=r*(1-i*e),s=r*(1-(1-i)*e),l=n%6,u=[r,o,a,a,s,r][l],c=[s,r,r,o,a,a][l],f=[a,a,s,r,r,o][l];return{r:u*255,g:c*255,b:f*255}}function G8(t,e,r,n){var i=[ap(Math.round(t).toString(16)),ap(Math.round(e).toString(16)),ap(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function $Ie(t,e,r,n,i){var a=[ap(Math.round(t).toString(16)),ap(Math.round(e).toString(16)),ap(Math.round(r).toString(16)),ap(jIe(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function jIe(t){return Math.round(parseFloat(t)*255).toString(16)}function H$(t){return hs(t)/255}function hs(t){return parseInt(t,16)}function XIe(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var W8={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Pg(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return typeof t=="string"&&(t=qIe(t)),typeof t=="object"&&(hc(t.r)&&hc(t.g)&&hc(t.b)?(e=HIe(t.r,t.g,t.b),o=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):hc(t.h)&&hc(t.s)&&hc(t.v)?(n=Vb(t.s),i=Vb(t.v),e=WIe(t.h,n,i),o=!0,s="hsv"):hc(t.h)&&hc(t.s)&&hc(t.l)&&(n=Vb(t.s),a=Vb(t.l),e=GIe(t.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(r=t.a)),r=ene(r),{ok:o,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}var KIe="[-\\+]?\\d+%?",YIe="[-\\+]?\\d*\\.\\d+%?",sh="(?:".concat(YIe,")|(?:").concat(KIe,")"),o9="[\\s|\\(]+(".concat(sh,")[,|\\s]+(").concat(sh,")[,|\\s]+(").concat(sh,")\\s*\\)?"),s9="[\\s|\\(]+(".concat(sh,")[,|\\s]+(").concat(sh,")[,|\\s]+(").concat(sh,")[,|\\s]+(").concat(sh,")\\s*\\)?"),Cl={CSS_UNIT:new RegExp(sh),rgb:new RegExp("rgb"+o9),rgba:new RegExp("rgba"+s9),hsl:new RegExp("hsl"+o9),hsla:new RegExp("hsla"+s9),hsv:new RegExp("hsv"+o9),hsva:new RegExp("hsva"+s9),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qIe(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(W8[t])t=W8[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=Cl.rgb.exec(t);return r?{r:r[1],g:r[2],b:r[3]}:(r=Cl.rgba.exec(t),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Cl.hsl.exec(t),r?{h:r[1],s:r[2],l:r[3]}:(r=Cl.hsla.exec(t),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Cl.hsv.exec(t),r?{h:r[1],s:r[2],v:r[3]}:(r=Cl.hsva.exec(t),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Cl.hex8.exec(t),r?{r:hs(r[1]),g:hs(r[2]),b:hs(r[3]),a:H$(r[4]),format:e?"name":"hex8"}:(r=Cl.hex6.exec(t),r?{r:hs(r[1]),g:hs(r[2]),b:hs(r[3]),format:e?"name":"hex"}:(r=Cl.hex4.exec(t),r?{r:hs(r[1]+r[1]),g:hs(r[2]+r[2]),b:hs(r[3]+r[3]),a:H$(r[4]+r[4]),format:e?"name":"hex8"}:(r=Cl.hex3.exec(t),r?{r:hs(r[1]+r[1]),g:hs(r[2]+r[2]),b:hs(r[3]+r[3]),format:e?"name":"hex"}:!1)))))))))}function hc(t){return!!Cl.CSS_UNIT.exec(String(t))}var Da=function(){function t(e,r){e===void 0&&(e=""),r===void 0&&(r={});var n;if(e instanceof t)return e;typeof e=="number"&&(e=XIe(e)),this.originalInput=e;var i=Pg(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=r.format)!==null&&n!==void 0?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),r,n,i,a=e.r/255,o=e.g/255,s=e.b/255;return a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*r+.7152*n+.0722*i},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=ene(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=H8(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=H8(this.r,this.g,this.b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=V$(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=V$(this.r,this.g,this.b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),G8(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),$Ie(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),r=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(r,", ").concat(n,")"):"rgba(".concat(e,", ").concat(r,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(r){return"".concat(Math.round(Ia(r,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(r){return Math.round(Ia(r,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+G8(this.r,this.g,this.b,!1),r=0,n=Object.entries(W8);r<n.length;r++){var i=n[r],a=i[0],o=i[1];if(e===o)return a}return!1},t.prototype.toString=function(e){var r=!!e;e=e!=null?e:this.format;var n=!1,i=this.a<1&&this.a>=0,a=!r&&i&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l+=e/100,r.l=Ub(r.l),new t(r)},t.prototype.brighten=function(e){e===void 0&&(e=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),new t(r)},t.prototype.darken=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l-=e/100,r.l=Ub(r.l),new t(r)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s-=e/100,r.s=Ub(r.s),new t(r)},t.prototype.saturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s+=e/100,r.s=Ub(r.s),new t(r)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var r=this.toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,new t(r)},t.prototype.mix=function(e,r){r===void 0&&(r=50);var n=this.toRgb(),i=new t(e).toRgb(),a=r/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new t(o)},t.prototype.analogous=function(e,r){e===void 0&&(e=6),r===void 0&&(r=30);var n=this.toHsl(),i=360/r,a=[this];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(new t(n));return a},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var r=this.toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/e;e--;)o.push(new t({h:n,s:i,v:a})),a=(a+s)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),r=e.h;return[this,new t({h:(r+72)%360,s:e.s,l:e.l}),new t({h:(r+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var r=this.toRgb(),n=new t(e).toRgb(),i=r.a+n.a*(1-r.a);return new t({r:(r.r*r.a+n.r*n.a*(1-r.a))/i,g:(r.g*r.a+n.g*n.a*(1-r.a))/i,b:(r.b*r.a+n.b*n.a*(1-r.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var r=this.toHsl(),n=r.h,i=[this],a=360/e,o=1;o<e;o++)i.push(new t({h:(n+o*a)%360,s:r.s,l:r.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}(),Hb=2,G$=.16,ZIe=.05,JIe=.05,QIe=.15,tne=5,rne=4,e7e=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function W$(t){var e=t.r,r=t.g,n=t.b,i=H8(e,r,n);return{h:i.h*360,s:i.s,v:i.v}}function Gb(t){var e=t.r,r=t.g,n=t.b;return"#".concat(G8(e,r,n,!1))}function t7e(t,e,r){var n=r/100,i={r:(e.r-t.r)*n+t.r,g:(e.g-t.g)*n+t.g,b:(e.b-t.b)*n+t.b};return i}function $$(t,e,r){var n;return Math.round(t.h)>=60&&Math.round(t.h)<=240?n=r?Math.round(t.h)-Hb*e:Math.round(t.h)+Hb*e:n=r?Math.round(t.h)+Hb*e:Math.round(t.h)-Hb*e,n<0?n+=360:n>=360&&(n-=360),n}function j$(t,e,r){if(t.h===0&&t.s===0)return t.s;var n;return r?n=t.s-G$*e:e===rne?n=t.s+G$:n=t.s+ZIe*e,n>1&&(n=1),r&&e===tne&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function X$(t,e,r){var n;return r?n=t.v+JIe*e:n=t.v-QIe*e,n>1&&(n=1),Number(n.toFixed(2))}function G_(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],n=Pg(t),i=tne;i>0;i-=1){var a=W$(n),o=Gb(Pg({h:$$(a,i,!0),s:j$(a,i,!0),v:X$(a,i,!0)}));r.push(o)}r.push(Gb(n));for(var s=1;s<=rne;s+=1){var l=W$(n),u=Gb(Pg({h:$$(l,s),s:j$(l,s),v:X$(l,s)}));r.push(u)}return e.theme==="dark"?e7e.map(function(c){var f=c.index,h=c.opacity,d=Gb(t7e(Pg(e.backgroundColor||"#141414"),Pg(r[f]),h*100));return d}):r}var l9={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$8=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];$8.primary=$8[5];var j8=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];j8.primary=j8[5];var X8=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];X8.primary=X8[5];var K8=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];K8.primary=K8[5];var Y8=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Y8.primary=Y8[5];var q8=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];q8.primary=q8[5];var Z8=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Z8.primary=Z8[5];var J8=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];J8.primary=J8[5];var nT=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];nT.primary=nT[5];var Q8=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Q8.primary=Q8[5];var eP=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];eP.primary=eP[5];var tP=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];tP.primary=tP[5];var rP=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];rP.primary=rP[5];var u9={red:$8,volcano:j8,orange:X8,gold:K8,yellow:Y8,lime:q8,green:Z8,cyan:J8,blue:nT,geekblue:Q8,purple:eP,magenta:tP,grey:rP};function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function we(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(n){xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ys(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function r7e(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var r=e;r;){if(r===t)return!0;r=r.parentNode}return!1}var Y$="data-rc-order",q$="data-rc-priority",n7e="rc-util-key",nP=new Map;function nne(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):n7e}function C4(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function i7e(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function QI(t){return Array.from((nP.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function ine(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ys())return null;var r=e.csp,n=e.prepend,i=e.priority,a=i===void 0?0:i,o=i7e(n),s=o==="prependQueue",l=document.createElement("style");l.setAttribute(Y$,o),s&&a&&l.setAttribute(q$,"".concat(a)),r!=null&&r.nonce&&(l.nonce=r==null?void 0:r.nonce),l.innerHTML=t;var u=C4(e),c=u.firstChild;if(n){if(s){var f=(e.styles||QI(u)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(Y$)))return!1;var d=Number(h.getAttribute(q$)||0);return a>=d});if(f.length)return u.insertBefore(l,f[f.length-1].nextSibling),l}u.insertBefore(l,c)}else u.appendChild(l);return l}function ane(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=C4(e);return(e.styles||QI(r)).find(function(n){return n.getAttribute(nne(e))===t})}function W_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ane(t,e);if(r){var n=C4(e);n.removeChild(r)}}function a7e(t,e){var r=nP.get(t);if(!r||!r7e(document,r)){var n=ine("",e),i=n.parentNode;nP.set(t,i),t.removeChild(n)}}function Dc(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=C4(r),i=QI(n),a=we(we({},r),{},{styles:i});a7e(n,a);var o=ane(e,a);if(o){var s,l;if((s=a.csp)!==null&&s!==void 0&&s.nonce&&o.nonce!==((l=a.csp)===null||l===void 0?void 0:l.nonce)){var u;o.nonce=(u=a.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==t&&(o.innerHTML=t),o}var c=ine(t,a);return c.setAttribute(nne(a),e),c}function one(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function o7e(t){return one(t)instanceof ShadowRoot}function iT(t){return o7e(t)?one(t):null}var iP={},s7e=function(e){};function l7e(t,e){}function u7e(t,e){}function c7e(){iP={}}function sne(t,e,r){!e&&!iP[r]&&(t(!1,r),iP[r]=!0)}function Ka(t,e){sne(l7e,t,e)}function f7e(t,e){sne(u7e,t,e)}Ka.preMessage=s7e;Ka.resetWarned=c7e;Ka.noteOnce=f7e;function h7e(t){return t.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function d7e(t,e){Ka(t,"[@ant-design/icons] ".concat(e))}function Z$(t){return wr(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(wr(t.icon)==="object"||typeof t.icon=="function")}function J$(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,r){var n=t[r];switch(r){case"class":e.className=n,delete e.class;break;default:delete e[r],e[h7e(r)]=n}return e},{})}function aP(t,e,r){return r?bt.createElement(t.tag,we(we({key:e},J$(t.attrs)),r),(t.children||[]).map(function(n,i){return aP(n,"".concat(e,"-").concat(t.tag,"-").concat(i))})):bt.createElement(t.tag,we({key:e},J$(t.attrs)),(t.children||[]).map(function(n,i){return aP(n,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function lne(t){return G_(t)[0]}function une(t){return t?Array.isArray(t)?t:[t]:[]}var p7e=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,v7e=function(e){var r=D.useContext(ZI),n=r.csp,i=r.prefixCls,a=p7e;i&&(a=a.replace(/anticon/g,i)),D.useEffect(function(){var o=e.current,s=iT(o);Dc(a,"@ant-design-icons",{prepend:!0,csp:n,attachTo:s})},[])},g7e=["icon","className","onClick","style","primaryColor","secondaryColor"],j1={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function m7e(t){var e=t.primaryColor,r=t.secondaryColor;j1.primaryColor=e,j1.secondaryColor=r||lne(e),j1.calculated=!!r}function y7e(){return we({},j1)}var S0=function(e){var r=e.icon,n=e.className,i=e.onClick,a=e.style,o=e.primaryColor,s=e.secondaryColor,l=Pn(e,g7e),u=D.useRef(),c=j1;if(o&&(c={primaryColor:o,secondaryColor:s||lne(o)}),v7e(u),d7e(Z$(r),"icon should be icon definiton, but got ".concat(r)),!Z$(r))return null;var f=r;return f&&typeof f.icon=="function"&&(f=we(we({},f),{},{icon:f.icon(c.primaryColor,c.secondaryColor)})),aP(f.icon,"svg-".concat(f.name),we(we({className:n,onClick:i,style:a,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:u}))};S0.displayName="IconReact";S0.getTwoToneColors=y7e;S0.setTwoToneColors=m7e;function cne(t){var e=une(t),r=rt(e,2),n=r[0],i=r[1];return S0.setTwoToneColors({primaryColor:n,secondaryColor:i})}function _7e(){var t=S0.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var x7e=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];cne(nT.primary);var _s=D.forwardRef(function(t,e){var r=t.className,n=t.icon,i=t.spin,a=t.rotate,o=t.tabIndex,s=t.onClick,l=t.twoToneColor,u=Pn(t,x7e),c=D.useContext(ZI),f=c.prefixCls,h=f===void 0?"anticon":f,d=c.rootClassName,p=st(d,h,xe(xe({},"".concat(h,"-").concat(n.name),!!n.name),"".concat(h,"-spin"),!!i||n.name==="loading"),r),v=o;v===void 0&&s&&(v=-1);var g=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,m=une(l),x=rt(m,2),S=x[0],b=x[1];return D.createElement("span",mr({role:"img","aria-label":n.name},u,{ref:e,tabIndex:v,onClick:s,className:p}),D.createElement(S0,{icon:n,primaryColor:S,secondaryColor:b,style:g}))});_s.displayName="AntdIcon";_s.getTwoToneColor=_7e;_s.setTwoToneColor=cne;var S7e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},b7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:S7e}))},fne=D.forwardRef(b7e),w7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},T7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:w7e}))},C7e=D.forwardRef(T7e),E7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},A7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:E7e}))},M7e=D.forwardRef(A7e),R7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},P7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:R7e}))},hne=D.forwardRef(P7e),L7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},D7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:L7e}))},I7e=D.forwardRef(D7e),N7e={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},O7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:N7e}))},k7e=D.forwardRef(O7e),F7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},B7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:F7e}))},z7e=D.forwardRef(B7e),U7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},V7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:U7e}))},H7e=D.forwardRef(V7e),G7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},W7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:G7e}))},$7e=D.forwardRef(W7e),j7e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},X7e=function(e,r){return D.createElement(_s,mr({},e,{ref:r,icon:j7e}))},K7e=D.forwardRef(X7e),c9={exports:{}},wn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q$;function Y7e(){if(Q$)return wn;Q$=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),p;p=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var m=g.$$typeof;switch(m){case t:switch(g=g.type,g){case r:case i:case n:case u:case c:return g;default:switch(g=g&&g.$$typeof,g){case s:case o:case l:case h:case f:case a:return g;default:return m}}case e:return m}}}return wn.ContextConsumer=o,wn.ContextProvider=a,wn.Element=t,wn.ForwardRef=l,wn.Fragment=r,wn.Lazy=h,wn.Memo=f,wn.Portal=e,wn.Profiler=i,wn.StrictMode=n,wn.Suspense=u,wn.SuspenseList=c,wn.isAsyncMode=function(){return!1},wn.isConcurrentMode=function(){return!1},wn.isContextConsumer=function(g){return v(g)===o},wn.isContextProvider=function(g){return v(g)===a},wn.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},wn.isForwardRef=function(g){return v(g)===l},wn.isFragment=function(g){return v(g)===r},wn.isLazy=function(g){return v(g)===h},wn.isMemo=function(g){return v(g)===f},wn.isPortal=function(g){return v(g)===e},wn.isProfiler=function(g){return v(g)===i},wn.isStrictMode=function(g){return v(g)===n},wn.isSuspense=function(g){return v(g)===u},wn.isSuspenseList=function(g){return v(g)===c},wn.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===i||g===n||g===u||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===f||g.$$typeof===a||g.$$typeof===o||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},wn.typeOf=v,wn}var ej;function q7e(){return ej||(ej=1,c9.exports=Y7e()),c9.exports}var X1=q7e();function E4(t,e,r){var n=D.useRef({});return(!("value"in n.current)||r(n.current.condition,e))&&(n.current.value=t(),n.current.condition=e),n.current.value}var e7=function(e,r){typeof e=="function"?e(r):wr(e)==="object"&&e&&"current"in e&&(e.current=r)},O2=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);return i.length<=1?i[0]:function(a){r.forEach(function(o){e7(o,a)})}},b0=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return E4(function(){return O2.apply(void 0,r)},r,function(i,a){return i.length!==a.length||i.every(function(o,s){return o!==a[s]})})},k2=function(e){var r,n;if(Z7e(e)&&e.props.propertyIsEnumerable("ref"))return!0;var i=X1.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((r=i.prototype)!==null&&r!==void 0&&r.render)&&i.$$typeof!==X1.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==X1.ForwardRef)};function Z7e(t){return D.isValidElement(t)&&!X1.isFragment(t)}function Nm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return bt.Children.forEach(t,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?r=r.concat(Nm(n)):X1.isFragment(n)&&n.props?r=r.concat(Nm(n.props.children,e)):r.push(n))}),r}function $_(t){return t instanceof HTMLElement||t instanceof SVGElement}function J7e(t){return t&&wr(t)==="object"&&$_(t.nativeElement)?t.nativeElement:$_(t)?t:null}function k3(t){var e=J7e(t);if(e)return e;if(t instanceof bt.Component){var r;return(r=j9.findDOMNode)===null||r===void 0?void 0:r.call(j9,t)}return null}var oP=D.createContext(null);function Q7e(t){var e=t.children,r=t.onBatchResize,n=D.useRef(0),i=D.useRef([]),a=D.useContext(oP),o=D.useCallback(function(s,l,u){n.current+=1;var c=n.current;i.current.push({size:s,element:l,data:u}),Promise.resolve().then(function(){c===n.current&&(r==null||r(i.current),i.current=[])}),a==null||a(s,l,u)},[r,a]);return D.createElement(oP.Provider,{value:o},e)}var dne=function(){if(typeof Map!="undefined")return Map;function t(e,r){var n=-1;return e.some(function(i,a){return i[0]===r?(n=a,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var n=t(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(r,n){var i=t(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},e.prototype.delete=function(r){var n=this.__entries__,i=t(n,r);~i&&n.splice(i,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];r.call(n,o[1],o[0])}},e}()}(),sP=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,aT=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),eNe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(aT):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),tNe=2;function rNe(t,e){var r=!1,n=!1,i=0;function a(){r&&(r=!1,t()),n&&s()}function o(){eNe(a)}function s(){var l=Date.now();if(r){if(l-i<tNe)return;n=!0}else r=!0,n=!1,setTimeout(o,e);i=l}return s}var nNe=20,iNe=["top","right","bottom","left","width","height","size","weight"],aNe=typeof MutationObserver!="undefined",oNe=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=rNe(this.refresh.bind(this),nNe)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,n=r.indexOf(e);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!sP||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),aNe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!sP||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,n=r===void 0?"":r,i=iNe.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),pne=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Om=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||aT},vne=A4(0,0,0,0);function oT(t){return parseFloat(t)||0}function tj(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(n,i){var a=t["border-"+i+"-width"];return n+oT(a)},0)}function sNe(t){for(var e=["top","right","bottom","left"],r={},n=0,i=e;n<i.length;n++){var a=i[n],o=t["padding-"+a];r[a]=oT(o)}return r}function lNe(t){var e=t.getBBox();return A4(0,0,e.width,e.height)}function uNe(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return vne;var n=Om(t).getComputedStyle(t),i=sNe(n),a=i.left+i.right,o=i.top+i.bottom,s=oT(n.width),l=oT(n.height);if(n.boxSizing==="border-box"&&(Math.round(s+a)!==e&&(s-=tj(n,"left","right")+a),Math.round(l+o)!==r&&(l-=tj(n,"top","bottom")+o)),!fNe(t)){var u=Math.round(s+a)-e,c=Math.round(l+o)-r;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return A4(i.left,i.top,s,l)}var cNe=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Om(t).SVGGraphicsElement}:function(t){return t instanceof Om(t).SVGElement&&typeof t.getBBox=="function"}}();function fNe(t){return t===Om(t).document.documentElement}function hNe(t){return sP?cNe(t)?lNe(t):uNe(t):vne}function dNe(t){var e=t.x,r=t.y,n=t.width,i=t.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return pne(o,{x:e,y:r,width:n,height:i,top:r,right:e+n,bottom:i+r,left:e}),o}function A4(t,e,r,n){return{x:t,y:e,width:r,height:n}}var pNe=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=A4(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=hNe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),vNe=function(){function t(e,r){var n=dNe(r);pne(this,{target:e,contentRect:n})}return t}(),gNe=function(){function t(e,r,n){if(this.activeObservations_=[],this.observations_=new dne,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=n}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Om(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new pNe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Om(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new vNe(n.target,n.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),gne=typeof WeakMap!="undefined"?new WeakMap:new dne,mne=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=oNe.getInstance(),n=new gNe(e,r,this);gne.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){mne.prototype[t]=function(){var e;return(e=gne.get(this))[t].apply(e,arguments)}});var mNe=function(){return typeof aT.ResizeObserver!="undefined"?aT.ResizeObserver:mne}(),lh=new Map;function yNe(t){t.forEach(function(e){var r,n=e.target;(r=lh.get(n))===null||r===void 0||r.forEach(function(i){return i(n)})})}var yne=new mNe(yNe);function _Ne(t,e){lh.has(t)||(lh.set(t,new Set),yne.observe(t)),lh.get(t).add(e)}function xNe(t,e){lh.has(t)&&(lh.get(t).delete(e),lh.get(t).size||(yne.unobserve(t),lh.delete(t)))}function oa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qre(n.key),n)}}function sa(t,e,r){return e&&rj(t.prototype,e),r&&rj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j_(t,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},j_(t,e)}function Jc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j_(t,e)}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X_(t)}function t7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t7=function(){return!!t})()}function jr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SNe(t,e){if(e&&(wr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jr(t)}function Qc(t){var e=t7();return function(){var r,n=X_(t);if(e){var i=X_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return SNe(this,r)}}var bNe=function(t){Jc(r,t);var e=Qc(r);function r(){return oa(this,r),e.apply(this,arguments)}return sa(r,[{key:"render",value:function(){return this.props.children}}]),r}(D.Component);function wNe(t,e){var r=t.children,n=t.disabled,i=D.useRef(null),a=D.useRef(null),o=D.useContext(oP),s=typeof r=="function",l=s?r(i):r,u=D.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&D.isValidElement(l)&&k2(l),f=c?l.ref:null,h=b0(f,i),d=function(){var m;return k3(i.current)||(i.current&&wr(i.current)==="object"?k3((m=i.current)===null||m===void 0?void 0:m.nativeElement):null)||k3(a.current)};D.useImperativeHandle(e,function(){return d()});var p=D.useRef(t);p.current=t;var v=D.useCallback(function(g){var m=p.current,x=m.onResize,S=m.data,b=g.getBoundingClientRect(),T=b.width,w=b.height,E=g.offsetWidth,M=g.offsetHeight,A=Math.floor(T),R=Math.floor(w);if(u.current.width!==A||u.current.height!==R||u.current.offsetWidth!==E||u.current.offsetHeight!==M){var L={width:A,height:R,offsetWidth:E,offsetHeight:M};u.current=L;var I=E===Math.round(T)?T:E,N=M===Math.round(w)?w:M,k=we(we({},L),{},{offsetWidth:I,offsetHeight:N});o==null||o(k,g,S),x&&Promise.resolve().then(function(){x(k,g)})}},[]);return D.useEffect(function(){var g=d();return g&&!n&&_Ne(g,v),function(){return xNe(g,v)}},[i.current,n]),D.createElement(bNe,{ref:a},c?D.cloneElement(l,{ref:h}):l)}var TNe=D.forwardRef(wNe),CNe="rc-observer-key";function ENe(t,e){var r=t.children,n=typeof r=="function"?[r]:Nm(r);return n.map(function(i,a){var o=(i==null?void 0:i.key)||"".concat(CNe,"-").concat(a);return D.createElement(TNe,mr({},t,{key:o,ref:a===0?e:void 0}),i)})}var F2=D.forwardRef(ENe);F2.Collection=Q7e;function ql(t,e){var r=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(n){delete r[n]}),r}function ANe(t){if(Array.isArray(t))return V8(t)}function _ne(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(t){return ANe(t)||_ne(t)||JI(t)||MNe()}var xne=function(e){return+setTimeout(e,16)},Sne=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(xne=function(e){return window.requestAnimationFrame(e)},Sne=function(e){return window.cancelAnimationFrame(e)});var nj=0,r7=new Map;function bne(t){r7.delete(t)}var Na=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;nj+=1;var n=nj;function i(a){if(a===0)bne(n),e();else{var o=xne(function(){i(a-1)});r7.set(n,o)}}return i(r),n};Na.cancel=function(t){var e=r7.get(t);return bne(t),Sne(e)};function RNe(t){let e;const r=i=>()=>{e=null,t.apply(void 0,Yt(i))},n=function(){if(e==null){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e=Na(r(a))}};return n.cancel=()=>{Na.cancel(e),e=null},n}function K_(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function Y_(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(a,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=n.has(a);if(Ka(!l,"Warning: There may be circular references"),l)return!1;if(a===o)return!0;if(r&&s>1)return!1;n.add(a);var u=s+1;if(Array.isArray(a)){if(!Array.isArray(o)||a.length!==o.length)return!1;for(var c=0;c<a.length;c++)if(!i(a[c],o[c],u))return!1;return!0}if(a&&o&&wr(a)==="object"&&wr(o)==="object"){var f=Object.keys(a);return f.length!==Object.keys(o).length?!1:f.every(function(h){return i(a[h],o[h],u)})}return!1}return i(t,e)}var PNe="%";function lP(t){return t.join(PNe)}var LNe=function(){function t(e){oa(this,t),xe(this,"instanceId",void 0),xe(this,"cache",new Map),this.instanceId=e}return sa(t,[{key:"get",value:function(r){return this.opGet(lP(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,n){return this.opUpdate(lP(r),n)}},{key:"opUpdate",value:function(r,n){var i=this.cache.get(r),a=n(i);a===null?this.cache.delete(r):this.cache.set(r,a)}}]),t}(),km="data-token-hash",Ul="data-css-hash",uh="__cssinjs_instance__";function DNe(){var t=Math.random().toString(12).slice(2);if(typeof document!="undefined"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Ul,"]"))||[],r=document.head.firstChild;Array.from(e).forEach(function(i){i[uh]=i[uh]||t,i[uh]===t&&document.head.insertBefore(i,r)});var n={};Array.from(document.querySelectorAll("style[".concat(Ul,"]"))).forEach(function(i){var a=i.getAttribute(Ul);if(n[a]){if(i[uh]===t){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}}else n[a]=!0})}return new LNe(t)}var M4=D.createContext({hashPriority:"low",cache:DNe(),defaultCache:!0});function INe(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var n7=function(){function t(){oa(this,t),xe(this,"cache",void 0),xe(this,"keys",void 0),xe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return sa(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var n,i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={map:this.cache};return r.forEach(function(s){if(!o)o=void 0;else{var l;o=(l=o)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(s)}}),(n=o)!==null&&n!==void 0&&n.value&&a&&(o.value[1]=this.cacheCallTimes++),(i=o)===null||i===void 0?void 0:i.value}},{key:"get",value:function(r){var n;return(n=this.internalGet(r,!0))===null||n===void 0?void 0:n[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,n){var i=this;if(!this.has(r)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var a=this.keys.reduce(function(u,c){var f=rt(u,2),h=f[1];return i.internalGet(c)[1]<h?[c,i.internalGet(c)[1]]:u},[this.keys[0],this.cacheCallTimes]),o=rt(a,1),s=o[0];this.delete(s)}this.keys.push(r)}var l=this.cache;r.forEach(function(u,c){if(c===r.length-1)l.set(u,{value:[n,i.cacheCallTimes++]});else{var f=l.get(u);f?f.map||(f.map=new Map):l.set(u,{map:new Map}),l=l.get(u).map}})}},{key:"deleteByPath",value:function(r,n){var i=r.get(n[0]);if(n.length===1){var a;return i.map?r.set(n[0],{map:i.map}):r.delete(n[0]),(a=i.value)===null||a===void 0?void 0:a[0]}var o=this.deleteByPath(i.map,n.slice(1));return(!i.map||i.map.size===0)&&!i.value&&r.delete(n[0]),o}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(n){return!INe(n,r)}),this.deleteByPath(this.cache,r)}}]),t}();xe(n7,"MAX_CACHE_SIZE",20);xe(n7,"MAX_CACHE_OFFSET",5);var ij=0,wne=function(){function t(e){oa(this,t),xe(this,"derivatives",void 0),xe(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=ij,e.length===0&&(e.length>0,void 0),ij+=1}return sa(t,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(n,i){return i(r,n)},void 0)}}]),t}(),f9=new n7;function uP(t){var e=Array.isArray(t)?t:[t];return f9.has(e)||f9.set(e,new wne(e)),f9.get(e)}var NNe=new WeakMap,h9={};function ONe(t,e){for(var r=NNe,n=0;n<e.length;n+=1){var i=e[n];r.has(i)||r.set(i,new WeakMap),r=r.get(i)}return r.has(h9)||r.set(h9,t()),r.get(h9)}var aj=new WeakMap;function K1(t){var e=aj.get(t)||"";return e||(Object.keys(t).forEach(function(r){var n=t[r];e+=r,n instanceof wne?e+=n.id:n&&wr(n)==="object"?e+=K1(n):e+=n}),e=K_(e),aj.set(t,e)),e}function oj(t,e){return K_("".concat(e,"_").concat(K1(t)))}var cP=ys();function Xt(t){return typeof t=="number"?"".concat(t,"px"):t}function sT(t,e,r){var n,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(a)return t;var o=we(we({},i),{},(n={},xe(n,km,e),xe(n,Ul,r),n)),s=Object.keys(o).map(function(l){var u=o[l];return u?"".concat(l,'="').concat(u,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(s,">").concat(t,"</style>")}var F3=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},kNe=function(e,r,n){return Object.keys(e).length?".".concat(r).concat(n!=null&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(e).map(function(i){var a=rt(i,2),o=a[0],s=a[1];return"".concat(o,":").concat(s,";")}).join(""),"}"):""},Tne=function(e,r,n){var i={},a={};return Object.entries(e).forEach(function(o){var s,l,u=rt(o,2),c=u[0],f=u[1];if(n!=null&&(s=n.preserve)!==null&&s!==void 0&&s[c])a[c]=f;else if((typeof f=="string"||typeof f=="number")&&!(n!=null&&(l=n.ignore)!==null&&l!==void 0&&l[c])){var h,d=F3(c,n==null?void 0:n.prefix);i[d]=typeof f=="number"&&!(n!=null&&(h=n.unitless)!==null&&h!==void 0&&h[c])?"".concat(f,"px"):String(f),a[c]="var(".concat(d,")")}}),[a,kNe(i,r,{scope:n==null?void 0:n.scope})]},sj=ys()?D.useLayoutEffect:D.useEffect,va=function(e,r){var n=D.useRef(!0);sj(function(){return e(n.current)},r),sj(function(){return n.current=!1,function(){n.current=!0}},[])},lj=function(e,r){va(function(n){if(!n)return e()},r)},FNe=we({},bT),uj=FNe.useInsertionEffect,BNe=function(e,r,n){D.useMemo(e,n),va(function(){return r(!0)},n)},zNe=uj?function(t,e,r){return uj(function(){return t(),e()},r)}:BNe,UNe=we({},bT),VNe=UNe.useInsertionEffect,HNe=function(e){var r=[],n=!1;function i(a){n||r.push(a)}return D.useEffect(function(){return n=!1,function(){n=!0,r.length&&r.forEach(function(a){return a()})}},e),i},GNe=function(){return function(e){e()}},WNe=typeof VNe!="undefined"?HNe:GNe;function i7(t,e,r,n,i){var a=D.useContext(M4),o=a.cache,s=[t].concat(Yt(e)),l=lP(s),u=WNe([l]),c=function(p){o.opUpdate(l,function(v){var g=v||[void 0,void 0],m=rt(g,2),x=m[0],S=x===void 0?0:x,b=m[1],T=b,w=T||r(),E=[S,w];return p?p(E):E})};D.useMemo(function(){c()},[l]);var f=o.opGet(l),h=f[1];return zNe(function(){i==null||i(h)},function(d){return c(function(p){var v=rt(p,2),g=v[0],m=v[1];return d&&g===0&&(i==null||i(h)),[g+1,m]}),function(){o.opUpdate(l,function(p){var v=p||[],g=rt(v,2),m=g[0],x=m===void 0?0:m,S=g[1],b=x-1;return b===0?(u(function(){(d||!o.opGet(l))&&(n==null||n(S,!1))}),null):[x-1,S]})}},[l]),h}var $Ne={},jNe="css",jd=new Map;function XNe(t){jd.set(t,(jd.get(t)||0)+1)}function KNe(t,e){if(typeof document!="undefined"){var r=document.querySelectorAll("style[".concat(km,'="').concat(t,'"]'));r.forEach(function(n){if(n[uh]===e){var i;(i=n.parentNode)===null||i===void 0||i.removeChild(n)}})}}var YNe=0;function qNe(t,e){jd.set(t,(jd.get(t)||0)-1);var r=Array.from(jd.keys()),n=r.filter(function(i){var a=jd.get(i)||0;return a<=0});r.length-n.length>YNe&&n.forEach(function(i){KNe(i,e),jd.delete(i)})}var ZNe=function(e,r,n,i){var a=n.getDerivativeToken(e),o=we(we({},a),r);return i&&(o=i(o)),o},Cne="token";function JNe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=D.useContext(M4),i=n.cache.instanceId,a=n.container,o=r.salt,s=o===void 0?"":o,l=r.override,u=l===void 0?$Ne:l,c=r.formatToken,f=r.getComputedToken,h=r.cssVar,d=ONe(function(){return Object.assign.apply(Object,[{}].concat(Yt(e)))},e),p=K1(d),v=K1(u),g=h?K1(h):"",m=i7(Cne,[s,t.id,p,v,g],function(){var x,S=f?f(d,u,t):ZNe(d,u,t,c),b=we({},S),T="";if(h){var w=Tne(S,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),E=rt(w,2);S=E[0],T=E[1]}var M=oj(S,s);S._tokenKey=M,b._tokenKey=oj(b,s);var A=(x=h==null?void 0:h.key)!==null&&x!==void 0?x:M;S._themeKey=A,XNe(A);var R="".concat(jNe,"-").concat(K_(M));return S._hashId=R,[S,R,b,T,(h==null?void 0:h.key)||""]},function(x){qNe(x[0]._themeKey,i)},function(x){var S=rt(x,4),b=S[0],T=S[3];if(h&&T){var w=Dc(T,K_("css-variables-".concat(b._themeKey)),{mark:Ul,prepend:"queue",attachTo:a,priority:-999});w[uh]=i,w.setAttribute(km,b._themeKey)}});return m}var QNe=function(e,r,n){var i=rt(e,5),a=i[2],o=i[3],s=i[4],l=n||{},u=l.plain;if(!o)return null;var c=a._tokenKey,f=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},d=sT(o,s,c,h,u);return[f,c,d]},eOe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ene="comm",Ane="rule",Mne="decl",tOe="@import",rOe="@keyframes",nOe="@layer",Rne=Math.abs,a7=String.fromCharCode;function Pne(t){return t.trim()}function B3(t,e,r){return t.replace(e,r)}function iOe(t,e,r){return t.indexOf(e,r)}function q_(t,e){return t.charCodeAt(e)|0}function Fm(t,e,r){return t.slice(e,r)}function gu(t){return t.length}function aOe(t){return t.length}function Wb(t,e){return e.push(t),t}var R4=1,Bm=1,Lne=0,il=0,ki=0,w0="";function o7(t,e,r,n,i,a,o,s){return{value:t,root:e,parent:r,type:n,props:i,children:a,line:R4,column:Bm,length:o,return:"",siblings:s}}function oOe(){return ki}function sOe(){return ki=il>0?q_(w0,--il):0,Bm--,ki===10&&(Bm=1,R4--),ki}function Vl(){return ki=il<Lne?q_(w0,il++):0,Bm++,ki===10&&(Bm=1,R4++),ki}function ch(){return q_(w0,il)}function z3(){return il}function P4(t,e){return Fm(w0,t,e)}function Z_(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lOe(t){return R4=Bm=1,Lne=gu(w0=t),il=0,[]}function uOe(t){return w0="",t}function d9(t){return Pne(P4(il-1,fP(t===91?t+2:t===40?t+1:t)))}function cOe(t){for(;(ki=ch())&&ki<33;)Vl();return Z_(t)>2||Z_(ki)>3?"":" "}function fOe(t,e){for(;--e&&Vl()&&!(ki<48||ki>102||ki>57&&ki<65||ki>70&&ki<97););return P4(t,z3()+(e<6&&ch()==32&&Vl()==32))}function fP(t){for(;Vl();)switch(ki){case t:return il;case 34:case 39:t!==34&&t!==39&&fP(ki);break;case 40:t===41&&fP(t);break;case 92:Vl();break}return il}function hOe(t,e){for(;Vl()&&t+ki!==57;)if(t+ki===84&&ch()===47)break;return"/*"+P4(e,il-1)+"*"+a7(t===47?t:Vl())}function dOe(t){for(;!Z_(ch());)Vl();return P4(t,il)}function pOe(t){return uOe(U3("",null,null,null,[""],t=lOe(t),0,[0],t))}function U3(t,e,r,n,i,a,o,s,l){for(var u=0,c=0,f=o,h=0,d=0,p=0,v=1,g=1,m=1,x=0,S="",b=i,T=a,w=n,E=S;g;)switch(p=x,x=Vl()){case 40:if(p!=108&&q_(E,f-1)==58){iOe(E+=B3(d9(x),"&","&\f"),"&\f",Rne(u?s[u-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:E+=d9(x);break;case 9:case 10:case 13:case 32:E+=cOe(p);break;case 92:E+=fOe(z3()-1,7);continue;case 47:switch(ch()){case 42:case 47:Wb(vOe(hOe(Vl(),z3()),e,r,l),l),(Z_(p||1)==5||Z_(ch()||1)==5)&&gu(E)&&Fm(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*v:s[u++]=gu(E)*m;case 125*v:case 59:case 0:switch(x){case 0:case 125:g=0;case 59+c:m==-1&&(E=B3(E,/\f/g,"")),d>0&&(gu(E)-f||v===0&&p===47)&&Wb(d>32?fj(E+";",n,r,f-1,l):fj(B3(E," ","")+";",n,r,f-2,l),l);break;case 59:E+=";";default:if(Wb(w=cj(E,e,r,u,c,i,s,S,b=[],T=[],f,a),a),x===123)if(c===0)U3(E,e,w,w,b,a,f,s,T);else switch(h===99&&q_(E,3)===110?100:h){case 100:case 108:case 109:case 115:U3(t,w,w,n&&Wb(cj(t,w,w,0,0,i,s,S,i,b=[],f,T),T),i,T,f,s,n?b:T);break;default:U3(E,w,w,w,[""],T,0,s,T)}}u=c=d=0,v=m=1,S=E="",f=o;break;case 58:f=1+gu(E),d=p;default:if(v<1){if(x==123)--v;else if(x==125&&v++==0&&sOe()==125)continue}switch(E+=a7(x),x*v){case 38:m=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(gu(E)-1)*m,m=1;break;case 64:ch()===45&&(E+=d9(Vl())),h=ch(),c=f=gu(S=E+=dOe(z3())),x++;break;case 45:p===45&&gu(E)==2&&(v=0)}}return a}function cj(t,e,r,n,i,a,o,s,l,u,c,f){for(var h=i-1,d=i===0?a:[""],p=aOe(d),v=0,g=0,m=0;v<n;++v)for(var x=0,S=Fm(t,h+1,h=Rne(g=o[v])),b=t;x<p;++x)(b=Pne(g>0?d[x]+" "+S:B3(S,/&\f/g,d[x])))&&(l[m++]=b);return o7(t,e,r,i===0?Ane:s,l,u,c,f)}function vOe(t,e,r,n){return o7(t,e,r,Ene,a7(oOe()),Fm(t,2,-2),0,n)}function fj(t,e,r,n,i){return o7(t,e,r,Mne,Fm(t,0,n),Fm(t,n+1,-1),n,i)}function hP(t,e){for(var r="",n=0;n<t.length;n++)r+=e(t[n],n,t,e)||"";return r}function gOe(t,e,r,n){switch(t.type){case nOe:if(t.children.length)break;case tOe:case Mne:return t.return=t.return||t.value;case Ene:return"";case rOe:return t.return=t.value+"{"+hP(t.children,n)+"}";case Ane:if(!gu(t.value=t.props.join(",")))return""}return gu(r=hP(t.children,n))?t.return=t.value+"{"+r+"}":""}var hj="data-ant-cssinjs-cache-path",Dne="_FILE_STYLE__",yp,Ine=!0;function mOe(){if(!yp&&(yp={},ys())){var t=document.createElement("div");t.className=hj,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var a=i.split(":"),o=rt(a,2),s=o[0],l=o[1];yp[s]=l});var r=document.querySelector("style[".concat(hj,"]"));if(r){var n;Ine=!1,(n=r.parentNode)===null||n===void 0||n.removeChild(r)}document.body.removeChild(t)}}function yOe(t){return mOe(),!!yp[t]}function _Oe(t){var e=yp[t],r=null;if(e&&ys())if(Ine)r=Dne;else{var n=document.querySelector("style[".concat(Ul,'="').concat(yp[t],'"]'));n?r=n.innerHTML:delete yp[t]}return[r,e]}var xOe="_skip_check_",Nne="_multi_value_";function V3(t){var e=hP(pOe(t),gOe);return e.replace(/\{%%%\:[^;];}/g,";")}function SOe(t){return wr(t)==="object"&&t&&(xOe in t||Nne in t)}function dj(t,e,r){if(!e)return t;var n=".".concat(e),i=r==="low"?":where(".concat(n,")"):n,a=t.split(",").map(function(o){var s,l=o.trim().split(/\s+/),u=l[0]||"",c=((s=u.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return u="".concat(c).concat(i).concat(u.slice(c.length)),[u].concat(Yt(l.slice(1))).join(" ")});return a.join(",")}var bOe=function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=n.root,a=n.injectHash,o=n.parentSelectors,s=r.hashId,l=r.layer;r.path;var u=r.hashPriority,c=r.transformers,f=c===void 0?[]:c;r.linters;var h="",d={};function p(m){var x=m.getName(s);if(!d[x]){var S=t(m.style,r,{root:!1,parentSelectors:o}),b=rt(S,1),T=b[0];d[x]="@keyframes ".concat(m.getName(s)).concat(T)}}function v(m){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.forEach(function(S){Array.isArray(S)?v(S,x):S&&x.push(S)}),x}var g=v(Array.isArray(e)?e:[e]);return g.forEach(function(m){var x=typeof m=="string"&&!i?{}:m;if(typeof x=="string")h+="".concat(x,`
`);else if(x._keyframe)p(x);else{var S=f.reduce(function(b,T){var w;return(T==null||(w=T.visit)===null||w===void 0?void 0:w.call(T,b))||b},x);Object.keys(S).forEach(function(b){var T=S[b];if(wr(T)==="object"&&T&&(b!=="animationName"||!T._keyframe)&&!SOe(T)){var w=!1,E=b.trim(),M=!1;(i||a)&&s?E.startsWith("@")?w=!0:E==="&"?E=dj("",s,u):E=dj(b,s,u):i&&!s&&(E==="&"||E==="")&&(E="",M=!0);var A=t(T,r,{root:M,injectHash:w,parentSelectors:[].concat(Yt(o),[E])}),R=rt(A,2),L=R[0],I=R[1];d=we(we({},d),I),h+="".concat(E).concat(L)}else{let z=function(B,V){var F=B.replace(/[A-Z]/g,function(W){return"-".concat(W.toLowerCase())}),$=V;!eOe[B]&&typeof $=="number"&&$!==0&&($="".concat($,"px")),B==="animationName"&&V!==null&&V!==void 0&&V._keyframe&&(p(V),$=V.getName(s)),h+="".concat(F,":").concat($,";")};var N,k=(N=T==null?void 0:T.value)!==null&&N!==void 0?N:T;wr(T)==="object"&&T!==null&&T!==void 0&&T[Nne]&&Array.isArray(k)?k.forEach(function(B){z(b,B)}):z(b,k)}})}}),i?l&&(h&&(h="@layer ".concat(l.name," {").concat(h,"}")),l.dependencies&&(d["@layer ".concat(l.name)]=l.dependencies.map(function(m){return"@layer ".concat(m,", ").concat(l.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,d]};function One(t,e){return K_("".concat(t.join("%")).concat(e))}function wOe(){return null}var kne="style";function dP(t,e){var r=t.token,n=t.path,i=t.hashId,a=t.layer,o=t.nonce,s=t.clientOnly,l=t.order,u=l===void 0?0:l,c=D.useContext(M4),f=c.autoClear;c.mock;var h=c.defaultCache,d=c.hashPriority,p=c.container,v=c.ssrInline,g=c.transformers,m=c.linters,x=c.cache,S=c.layer,b=r._tokenKey,T=[b];S&&T.push("layer"),T.push.apply(T,Yt(n));var w=cP,E=i7(kne,T,function(){var I=T.join("|");if(yOe(I)){var N=_Oe(I),k=rt(N,2),z=k[0],B=k[1];if(z)return[z,b,B,{},s,u]}var V=e(),F=bOe(V,{hashId:i,hashPriority:d,layer:S?a:void 0,path:n.join("-"),transformers:g,linters:m}),$=rt(F,2),W=$[0],H=$[1],X=V3(W),te=One(T,X);return[X,b,te,H,s,u]},function(I,N){var k=rt(I,3),z=k[2];(N||f)&&cP&&W_(z,{mark:Ul})},function(I){var N=rt(I,4),k=N[0];N[1];var z=N[2],B=N[3];if(w&&k!==Dne){var V={mark:Ul,prepend:S?!1:"queue",attachTo:p,priority:u},F=typeof o=="function"?o():o;F&&(V.csp={nonce:F});var $=[],W=[];Object.keys(B).forEach(function(X){X.startsWith("@layer")?$.push(X):W.push(X)}),$.forEach(function(X){Dc(V3(B[X]),"_layer-".concat(X),we(we({},V),{},{prepend:!0}))});var H=Dc(k,z,V);H[uh]=x.instanceId,H.setAttribute(km,b),W.forEach(function(X){Dc(V3(B[X]),"_effect-".concat(X),V)})}}),M=rt(E,3),A=M[0],R=M[1],L=M[2];return function(I){var N;if(!v||w||!h)N=D.createElement(wOe,null);else{var k;N=D.createElement("style",mr({},(k={},xe(k,km,R),xe(k,Ul,L),k),{dangerouslySetInnerHTML:{__html:A}}))}return D.createElement(D.Fragment,null,N,I)}}var TOe=function(e,r,n){var i=rt(e,6),a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],f=n||{},h=f.plain;if(u)return null;var d=a,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)};return d=sT(a,o,s,p,h),l&&Object.keys(l).forEach(function(v){if(!r[v]){r[v]=!0;var g=V3(l[v]),m=sT(g,o,"_effect-".concat(v),p,h);v.startsWith("@layer")?d=m+d:d+=m}}),[c,s,d]},Fne="cssVar",COe=function(e,r){var n=e.key,i=e.prefix,a=e.unitless,o=e.ignore,s=e.token,l=e.scope,u=l===void 0?"":l,c=D.useContext(M4),f=c.cache.instanceId,h=c.container,d=s._tokenKey,p=[].concat(Yt(e.path),[n,u,d]),v=i7(Fne,p,function(){var g=r(),m=Tne(g,n,{prefix:i,unitless:a,ignore:o,scope:u}),x=rt(m,2),S=x[0],b=x[1],T=One(p,b);return[S,b,T,n]},function(g){var m=rt(g,3),x=m[2];cP&&W_(x,{mark:Ul})},function(g){var m=rt(g,3),x=m[1],S=m[2];if(x){var b=Dc(x,S,{mark:Ul,prepend:"queue",attachTo:h,priority:-999});b[uh]=f,b.setAttribute(km,n)}});return v},EOe=function(e,r,n){var i=rt(e,4),a=i[1],o=i[2],s=i[3],l=n||{},u=l.plain;if(!a)return null;var c=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)},h=sT(a,s,o,f,u);return[c,o,h]},Jy;Jy={},xe(Jy,kne,TOe),xe(Jy,Cne,QNe),xe(Jy,Fne,EOe);var tn=function(){function t(e,r){oa(this,t),xe(this,"name",void 0),xe(this,"style",void 0),xe(this,"_keyframe",!0),this.name=e,this.style=r}return sa(t,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),t}();function vg(t){return t.notSplit=!0,t}vg(["borderTop","borderBottom"]),vg(["borderTop"]),vg(["borderBottom"]),vg(["borderLeft","borderRight"]),vg(["borderLeft"]),vg(["borderRight"]);function AOe(t){return Zre(t)||_ne(t)||JI(t)||Jre()}function Cu(t,e){for(var r=t,n=0;n<e.length;n+=1){if(r==null)return;r=r[e[n]]}return r}function Bne(t,e,r,n){if(!e.length)return r;var i=AOe(e),a=i[0],o=i.slice(1),s;return!t&&typeof a=="number"?s=[]:Array.isArray(t)?s=Yt(t):s=we({},t),n&&r===void 0&&o.length===1?delete s[a][o[0]]:s[a]=Bne(s[a],o,r,n),s}function Rl(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&n&&r===void 0&&!Cu(t,e.slice(0,-1))?t:Bne(t,e,r,n)}function MOe(t){return wr(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function pj(t){return Array.isArray(t)?[]:{}}var ROe=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function Bg(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=pj(e[0]);return e.forEach(function(i){function a(o,s){var l=new Set(s),u=Cu(i,o),c=Array.isArray(u);if(c||MOe(u)){if(!l.has(u)){l.add(u);var f=Cu(n,o);c?n=Rl(n,o,[]):(!f||wr(f)!=="object")&&(n=Rl(n,o,pj(u))),ROe(u).forEach(function(h){a([].concat(Yt(o),[h]),l)})}}else n=Rl(n,o,u)}a([])}),n}function POe(){}const LOe=D.createContext({}),zne=()=>{const t=()=>{};return t.deprecated=POe,t},DOe=D.createContext(void 0);var IOe={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},NOe={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},OOe=we(we({},NOe),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const Une={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},vj={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},OOe),timePickerLocale:Object.assign({},Une)},us="${label} is not a valid ${type}",L4={locale:"en",Pagination:IOe,DatePicker:vj,TimePicker:Une,Calendar:vj,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:us,method:us,array:us,object:us,number:us,date:us,boolean:us,integer:us,float:us,regexp:us,email:us,url:us,hex:us},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};Object.assign({},L4.Modal);let H3=[];const gj=()=>H3.reduce((t,e)=>Object.assign(Object.assign({},t),e),L4.Modal);function kOe(t){if(t){const e=Object.assign({},t);return H3.push(e),gj(),()=>{H3=H3.filter(r=>r!==e),gj()}}Object.assign({},L4.Modal)}const Vne=D.createContext(void 0),FOe="internalMark",BOe=t=>{const{locale:e={},children:r,_ANT_MARK__:n}=t;D.useEffect(()=>kOe(e==null?void 0:e.Modal),[e]);const i=D.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return D.createElement(Vne.Provider,{value:i},r)},Hne={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},J_=Object.assign(Object.assign({},Hne),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function zOe(t,e){let{generateColorPalettes:r,generateNeutralColorPalettes:n}=e;const{colorSuccess:i,colorWarning:a,colorError:o,colorInfo:s,colorPrimary:l,colorBgBase:u,colorTextBase:c}=t,f=r(l),h=r(i),d=r(a),p=r(o),v=r(s),g=n(u,c),m=t.colorLink||t.colorInfo,x=r(m),S=new Da(p[1]).mix(new Da(p[3]),50).toHexString();return Object.assign(Object.assign({},g),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBgFilledHover:S,colorErrorBgActive:p[3],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:v[1],colorInfoBgHover:v[2],colorInfoBorder:v[3],colorInfoBorderHover:v[4],colorInfoHover:v[4],colorInfo:v[6],colorInfoActive:v[7],colorInfoTextHover:v[8],colorInfoText:v[9],colorInfoTextActive:v[10],colorLinkHover:x[4],colorLink:x[6],colorLinkActive:x[7],colorBgMask:new Da("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const UOe=t=>{let e=t,r=t,n=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?r=4:t<8&&t>=7?r=5:t<14&&t>=8?r=6:t<16&&t>=14?r=7:t>=16&&(r=8),t<6&&t>=2?n=1:t>=6&&(n=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:n,borderRadiusSM:r,borderRadiusLG:e,borderRadiusOuter:i}};function VOe(t){const{motionUnit:e,motionBase:r,borderRadius:n,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(r+e).toFixed(1)}s`,motionDurationMid:`${(r+e*2).toFixed(1)}s`,motionDurationSlow:`${(r+e*3).toFixed(1)}s`,lineWidthBold:i+1},UOe(n))}const HOe=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function G3(t){return(t+8)/t}function GOe(t){const e=new Array(10).fill(null).map((r,n)=>{const i=n-1,a=t*Math.pow(Math.E,i/5),o=n>1?Math.floor(a):Math.ceil(a);return Math.floor(o/2)*2});return e[1]=t,e.map(r=>({size:r,lineHeight:G3(r)}))}const WOe=t=>{const e=GOe(t),r=e.map(c=>c.size),n=e.map(c=>c.lineHeight),i=r[1],a=r[0],o=r[2],s=n[1],l=n[0],u=n[2];return{fontSizeSM:a,fontSize:i,fontSizeLG:o,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:s,lineHeightLG:u,lineHeightSM:l,fontHeight:Math.round(s*i),fontHeightLG:Math.round(u*o),fontHeightSM:Math.round(l*a),lineHeightHeading1:n[6],lineHeightHeading2:n[5],lineHeightHeading3:n[4],lineHeightHeading4:n[3],lineHeightHeading5:n[2]}};function $Oe(t){const{sizeUnit:e,sizeStep:r}=t;return{sizeXXL:e*(r+8),sizeXL:e*(r+4),sizeLG:e*(r+2),sizeMD:e*(r+1),sizeMS:e*r,size:e*r,sizeSM:e*(r-1),sizeXS:e*(r-2),sizeXXS:e*(r-3)}}const Ns=(t,e)=>new Da(t).setAlpha(e).toRgbString(),Qy=(t,e)=>new Da(t).darken(e).toHexString(),jOe=t=>{const e=G_(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},XOe=(t,e)=>{const r=t||"#fff",n=e||"#000";return{colorBgBase:r,colorTextBase:n,colorText:Ns(n,.88),colorTextSecondary:Ns(n,.65),colorTextTertiary:Ns(n,.45),colorTextQuaternary:Ns(n,.25),colorFill:Ns(n,.15),colorFillSecondary:Ns(n,.06),colorFillTertiary:Ns(n,.04),colorFillQuaternary:Ns(n,.02),colorBgSolid:Ns(n,1),colorBgSolidHover:Ns(n,.75),colorBgSolidActive:Ns(n,.95),colorBgLayout:Qy(r,4),colorBgContainer:Qy(r,0),colorBgElevated:Qy(r,0),colorBgSpotlight:Ns(n,.85),colorBgBlur:"transparent",colorBorder:Qy(r,15),colorBorderSecondary:Qy(r,6)}};function KOe(t){l9.pink=l9.magenta,u9.pink=u9.magenta;const e=Object.keys(Hne).map(r=>{const n=t[r]===l9[r]?u9[r]:G_(t[r]);return new Array(10).fill(1).reduce((i,a,o)=>(i[`${r}-${o+1}`]=n[o],i[`${r}${o+1}`]=n[o],i),{})}).reduce((r,n)=>(r=Object.assign(Object.assign({},r),n),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),zOe(t,{generateColorPalettes:jOe,generateNeutralColorPalettes:XOe})),WOe(t.fontSize)),$Oe(t)),HOe(t)),VOe(t))}const Gne=uP(KOe),pP={token:J_,override:{override:J_},hashed:!0},Wne=bt.createContext(pP),Q_="ant",$ne="anticon",YOe=(t,e)=>e||(t?`${Q_}-${t}`:Q_),xn=D.createContext({getPrefixCls:YOe,iconPrefixCls:$ne}),qOe=`-ant-${Date.now()}-${Math.random()}`;function ZOe(t,e){const r={},n=(o,s)=>{let l=o.clone();return l=(s==null?void 0:s(l))||l,l.toRgbString()},i=(o,s)=>{const l=new Da(o),u=G_(l.toRgbString());r[`${s}-color`]=n(l),r[`${s}-color-disabled`]=u[1],r[`${s}-color-hover`]=u[4],r[`${s}-color-active`]=u[6],r[`${s}-color-outline`]=l.clone().setAlpha(.2).toRgbString(),r[`${s}-color-deprecated-bg`]=u[0],r[`${s}-color-deprecated-border`]=u[2]};if(e.primaryColor){i(e.primaryColor,"primary");const o=new Da(e.primaryColor),s=G_(o.toRgbString());s.forEach((u,c)=>{r[`primary-${c+1}`]=u}),r["primary-color-deprecated-l-35"]=n(o,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=n(o,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=n(o,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=n(o,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=n(o,u=>u.setAlpha(u.getAlpha()*.12));const l=new Da(s[0]);r["primary-color-active-deprecated-f-30"]=n(l,u=>u.setAlpha(u.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=n(l,u=>u.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(o=>`--${t}-${o}: ${r[o]};`).join(`
`)}
  }
  `.trim()}function JOe(t,e){const r=ZOe(t,e);ys()&&Dc(r,`${qOe}-dynamic-theme`)}const lT=D.createContext(!1),QOe=t=>{let{children:e,disabled:r}=t;const n=D.useContext(lT);return D.createElement(lT.Provider,{value:r!=null?r:n},e)},zm=D.createContext(void 0),eke=t=>{let{children:e,size:r}=t;const n=D.useContext(zm);return D.createElement(zm.Provider,{value:r||n},e)};function tke(){const t=D.useContext(lT),e=D.useContext(zm);return{componentDisabled:t,componentSize:e}}var jne=sa(function t(){oa(this,t)}),Xne="CALC_UNIT",rke=new RegExp(Xne,"g");function p9(t){return typeof t=="number"?"".concat(t).concat(Xne):t}var nke=function(t){Jc(r,t);var e=Qc(r);function r(n,i){var a;oa(this,r),a=e.call(this),xe(jr(a),"result",""),xe(jr(a),"unitlessCssVar",void 0),xe(jr(a),"lowPriority",void 0);var o=wr(n);return a.unitlessCssVar=i,n instanceof r?a.result="(".concat(n.result,")"):o==="number"?a.result=p9(n):o==="string"&&(a.result=n),a}return sa(r,[{key:"add",value:function(i){return i instanceof r?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(p9(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof r?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(p9(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof r?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof r?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var a=this,o=i||{},s=o.unit,l=!0;return typeof s=="boolean"?l=s:Array.from(this.unitlessCssVar).some(function(u){return a.result.includes(u)})&&(l=!1),this.result=this.result.replace(rke,l?"px":""),typeof this.lowPriority!="undefined"?"calc(".concat(this.result,")"):this.result}}]),r}(jne),ike=function(t){Jc(r,t);var e=Qc(r);function r(n){var i;return oa(this,r),i=e.call(this),xe(jr(i),"result",0),n instanceof r?i.result=n.result:typeof n=="number"&&(i.result=n),i}return sa(r,[{key:"add",value:function(i){return i instanceof r?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof r?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof r?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof r?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),r}(jne),ake=function(e,r){var n=e==="css"?nke:ike;return function(i){return new n(i,r)}},mj=function(e,r){return"".concat([r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function La(t){var e=D.useRef();e.current=t;var r=D.useCallback(function(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(a))},[]);return r}function e2(t){var e=D.useRef(!1),r=D.useState(t),n=rt(r,2),i=n[0],a=n[1];D.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(s,l){l&&e.current||a(s)}return[i,o]}function v9(t){return t!==void 0}function _p(t,e){var r=e||{},n=r.defaultValue,i=r.value,a=r.onChange,o=r.postState,s=e2(function(){return v9(i)?i:v9(n)?typeof n=="function"?n():n:typeof t=="function"?t():t}),l=rt(s,2),u=l[0],c=l[1],f=i!==void 0?i:u,h=o?o(f):f,d=La(a),p=e2([f]),v=rt(p,2),g=v[0],m=v[1];lj(function(){var S=g[0];u!==S&&d(u,S)},[g]),lj(function(){v9(i)||c(i)},[i]);var x=La(function(S,b){c(S,b),m([f],b)});return[h,x]}function yj(t,e,r,n){var i=we({},e[t]);if(n!=null&&n.deprecatedTokens){var a=n.deprecatedTokens;a.forEach(function(s){var l=rt(s,2),u=l[0],c=l[1];if(i!=null&&i[u]||i!=null&&i[c]){var f;(f=i[c])!==null&&f!==void 0||(i[c]=i==null?void 0:i[u])}})}var o=we(we({},r),i);return Object.keys(o).forEach(function(s){o[s]===e[s]&&delete o[s]}),o}var Kne=typeof CSSINJS_STATISTIC!="undefined",vP=!0;function Ao(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!Kne)return Object.assign.apply(Object,[{}].concat(e));vP=!1;var n={};return e.forEach(function(i){if(wr(i)==="object"){var a=Object.keys(i);a.forEach(function(o){Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:function(){return i[o]}})})}}),vP=!0,n}var _j={};function oke(){}var ske=function(e){var r,n=e,i=oke;return Kne&&typeof Proxy!="undefined"&&(r=new Set,n=new Proxy(e,{get:function(o,s){if(vP){var l;(l=r)===null||l===void 0||l.add(s)}return o[s]}}),i=function(o,s){var l;_j[o]={global:Array.from(r),component:we(we({},(l=_j[o])===null||l===void 0?void 0:l.component),s)}}),{token:n,keys:r,flush:i}};function xj(t,e,r){if(typeof r=="function"){var n;return r(Ao(e,(n=e[t])!==null&&n!==void 0?n:{}))}return r!=null?r:{}}function lke(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return"max(".concat(n.map(function(a){return Xt(a)}).join(","),")")},min:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return"min(".concat(n.map(function(a){return Xt(a)}).join(","),")")}}}var uke=1e3*60*10,cke=function(){function t(){oa(this,t),xe(this,"map",new Map),xe(this,"objectIDMap",new WeakMap),xe(this,"nextID",0),xe(this,"lastAccessBeat",new Map),xe(this,"accessBeat",0)}return sa(t,[{key:"set",value:function(r,n){this.clear();var i=this.getCompositeKey(r);this.map.set(i,n),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(r){var n=this.getCompositeKey(r),i=this.map.get(n);return this.lastAccessBeat.set(n,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(r){var n=this,i=r.map(function(a){return a&&wr(a)==="object"?"obj_".concat(n.getObjectID(a)):"".concat(wr(a),"_").concat(a)});return i.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var n=this.nextID;return this.objectIDMap.set(r,n),this.nextID+=1,n}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var n=Date.now();this.lastAccessBeat.forEach(function(i,a){n-i>uke&&(r.map.delete(a),r.lastAccessBeat.delete(a))}),this.accessBeat=0}}}]),t}(),Sj=new cke;function fke(t,e){return bt.useMemo(function(){var r=Sj.get(e);if(r)return r;var n=t();return Sj.set(e,n),n},e)}var hke=function(){return{}};function dke(t){var e=t.useCSP,r=e===void 0?hke:e,n=t.useToken,i=t.usePrefix,a=t.getResetStyles,o=t.getCommonStyle,s=t.getCompUnitless;function l(h,d,p,v){var g=Array.isArray(h)?h[0]:h;function m(M){return"".concat(String(g)).concat(M.slice(0,1).toUpperCase()).concat(M.slice(1))}var x=(v==null?void 0:v.unitless)||{},S=typeof s=="function"?s(h):{},b=we(we({},S),{},xe({},m("zIndexPopup"),!0));Object.keys(x).forEach(function(M){b[m(M)]=x[M]});var T=we(we({},v),{},{unitless:b,prefixToken:m}),w=c(h,d,p,T),E=u(g,p,T);return function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,R=w(M,A),L=rt(R,2),I=L[1],N=E(A),k=rt(N,2),z=k[0],B=k[1];return[z,I,B]}}function u(h,d,p){var v=p.unitless,g=p.injectStyle,m=g===void 0?!0:g,x=p.prefixToken,S=p.ignore,b=function(E){var M=E.rootCls,A=E.cssVar,R=A===void 0?{}:A,L=n(),I=L.realToken;return COe({path:[h],prefix:R.prefix,key:R.key,unitless:v,ignore:S,token:I,scope:M},function(){var N=xj(h,I,d),k=yj(h,I,N,{deprecatedTokens:p==null?void 0:p.deprecatedTokens});return Object.keys(N).forEach(function(z){k[x(z)]=k[z],delete k[z]}),k}),null},T=function(E){var M=n(),A=M.cssVar;return[function(R){return m&&A?bt.createElement(bt.Fragment,null,bt.createElement(b,{rootCls:E,cssVar:A,component:h}),R):R},A==null?void 0:A.key]};return T}function c(h,d,p){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},g=Array.isArray(h)?h:[h,h],m=rt(g,1),x=m[0],S=g.join("-"),b=t.layer||{name:"antd"};return function(T){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,E=n(),M=E.theme,A=E.realToken,R=E.hashId,L=E.token,I=E.cssVar,N=i(),k=N.rootPrefixCls,z=N.iconPrefixCls,B=r(),V=I?"css":"js",F=fke(function(){var Y=new Set;return I&&Object.keys(v.unitless||{}).forEach(function(ee){Y.add(F3(ee,I.prefix)),Y.add(F3(ee,mj(x,I.prefix)))}),ake(V,Y)},[V,x,I==null?void 0:I.prefix]),$=lke(V),W=$.max,H=$.min,X={theme:M,token:L,hashId:R,nonce:function(){return B.nonce},clientOnly:v.clientOnly,layer:b,order:v.order||-999};typeof a=="function"&&dP(we(we({},X),{},{clientOnly:!1,path:["Shared",k]}),function(){return a(L,{prefix:{rootPrefixCls:k,iconPrefixCls:z},csp:B})});var te=dP(we(we({},X),{},{path:[S,T,z]}),function(){if(v.injectStyle===!1)return[];var Y=ske(L),ee=Y.token,se=Y.flush,ne=xj(x,A,p),le=".".concat(T),pe=yj(x,A,ne,{deprecatedTokens:v.deprecatedTokens});I&&ne&&wr(ne)==="object"&&Object.keys(ne).forEach(function(Be){ne[Be]="var(".concat(F3(Be,mj(x,I.prefix)),")")});var Se=Ao(ee,{componentCls:le,prefixCls:T,iconCls:".".concat(z),antCls:".".concat(k),calc:F,max:W,min:H},I?ne:pe),_e=d(Se,{hashId:R,prefixCls:T,rootPrefixCls:k,iconPrefixCls:z});se(x,pe);var Le=typeof o=="function"?o(Se,T,w,v.resetFont):null;return[v.resetStyle===!1?null:Le,_e]});return[te,R]}}function f(h,d,p){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},g=c(h,d,p,we({resetStyle:!1,order:-998},v)),m=function(S){var b=S.prefixCls,T=S.rootCls,w=T===void 0?b:T;return g(b,w),null};return m}return{genStyleHooks:l,genSubStyleComponent:f,genComponentStyleHook:c}}const t2=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],pke="5.22.3";function g9(t){return t>=0&&t<=255}function $b(t,e){const{r,g:n,b:i,a}=new Da(t).toRgb();if(a<1)return t;const{r:o,g:s,b:l}=new Da(e).toRgb();for(let u=.01;u<=1;u+=.01){const c=Math.round((r-o*(1-u))/u),f=Math.round((n-s*(1-u))/u),h=Math.round((i-l*(1-u))/u);if(g9(c)&&g9(f)&&g9(h))return new Da({r:c,g:f,b:h,a:Math.round(u*100)/100}).toRgbString()}return new Da({r,g:n,b:i,a:1}).toRgbString()}var vke=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Yne(t){const{override:e}=t,r=vke(t,["override"]),n=Object.assign({},e);Object.keys(J_).forEach(h=>{delete n[h]});const i=Object.assign(Object.assign({},r),n),a=480,o=576,s=768,l=992,u=1200,c=1600;if(i.motion===!1){const h="0s";i.motionDurationFast=h,i.motionDurationMid=h,i.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:$b(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:$b(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:$b(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:$b(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:a,screenXSMin:a,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:c-1,screenXXL:c,screenXXLMin:c,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Da("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Da("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Da("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),n)}var bj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const qne={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},gke={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},mke={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Zne=(t,e,r)=>{const n=r.getDerivativeToken(t),{override:i}=e,a=bj(e,["override"]);let o=Object.assign(Object.assign({},n),{override:i});return o=Yne(o),a&&Object.entries(a).forEach(s=>{let[l,u]=s;const{theme:c}=u,f=bj(u,["theme"]);let h=f;c&&(h=Zne(Object.assign(Object.assign({},o),f),{override:f},c)),o[l]=h}),o};function Ih(){const{token:t,hashed:e,theme:r,override:n,cssVar:i}=bt.useContext(Wne),a=`${pke}-${e||""}`,o=r||Gne,[s,l,u]=JNe(o,[J_,t],{salt:a,override:n,getComputedToken:Zne,formatToken:Yne,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:qne,ignore:gke,preserve:mke}});return[o,u,e?l:"",s,i]}const yke={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Zp=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}},Jne=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),wj=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),_ke=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),xke=(t,e,r,n)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,a=r?`.${r}`:i,o={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let s={};return n!==!1&&(s={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[a]:Object.assign(Object.assign(Object.assign({},s),o),{[i]:o})}},Qne=t=>({outline:`${Xt(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),eie=t=>({"&:focus-visible":Object.assign({},Qne(t))}),tie=(t,e)=>{const[r,n]=Ih();return dP({theme:r,token:n,hashId:"",path:["ant-design-icons",t],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[{[`.${t}`]:Object.assign(Object.assign({},Jne()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},{genStyleHooks:ef,genComponentStyleHook:Ske,genSubStyleComponent:bke}=dke({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=D.useContext(xn);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,r,n,i]=Ih();return{theme:t,realToken:e,hashId:r,token:n,cssVar:i}},useCSP:()=>{const{csp:t,iconPrefixCls:e}=D.useContext(xn);return tie(e,t),t!=null?t:{}},getResetStyles:t=>[{"&":_ke(t)}],getCommonStyle:xke,getCompUnitless:()=>qne});function s7(t,e){return t2.reduce((r,n)=>{const i=t[`${n}1`],a=t[`${n}3`],o=t[`${n}6`],s=t[`${n}7`];return Object.assign(Object.assign({},r),e(n,{lightColor:i,lightBorderColor:a,darkColor:o,textColor:s}))},{})}const wke=Object.assign({},bT),{useId:Tj}=wke,Tke=()=>"",Cke=typeof Tj=="undefined"?Tke:Tj;function Eke(t,e,r){var n;zne();const i=t||{},a=i.inherit===!1||!e?Object.assign(Object.assign({},pP),{hashed:(n=e==null?void 0:e.hashed)!==null&&n!==void 0?n:pP.hashed,cssVar:e==null?void 0:e.cssVar}):e,o=Cke();return E4(()=>{var s,l;if(!t)return e;const u=Object.assign({},a.components);Object.keys(t.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),t.components[h])});const c=`css-var-${o.replace(/:/g,"")}`,f=((s=i.cssVar)!==null&&s!==void 0?s:a.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof a.cssVar=="object"?a.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((l=i.cssVar)===null||l===void 0?void 0:l.key)||c});return Object.assign(Object.assign(Object.assign({},a),i),{token:Object.assign(Object.assign({},a.token),i.token),components:u,cssVar:f})},[i,a],(s,l)=>s.some((u,c)=>{const f=l[c];return!Y_(u,f,!0)}))}var Ake=["children"],rie=D.createContext({});function Mke(t){var e=t.children,r=Pn(t,Ake);return D.createElement(rie.Provider,{value:r},e)}var Rke=function(t){Jc(r,t);var e=Qc(r);function r(){return oa(this,r),e.apply(this,arguments)}return sa(r,[{key:"render",value:function(){return this.props.children}}]),r}(D.Component);function Pke(t){var e=D.useReducer(function(s){return s+1},0),r=rt(e,2),n=r[1],i=D.useRef(t),a=La(function(){return i.current}),o=La(function(s){i.current=typeof s=="function"?s(i.current):s,n()});return[a,o]}var Gf="none",jb="appear",Xb="enter",Kb="leave",Cj="none",Pl="prepare",zg="start",Ug="active",l7="end",nie="prepared";function Ej(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(t)]="webkit".concat(e),r["Moz".concat(t)]="moz".concat(e),r["ms".concat(t)]="MS".concat(e),r["O".concat(t)]="o".concat(e.toLowerCase()),r}function Lke(t,e){var r={animationend:Ej("Animation","AnimationEnd"),transitionend:Ej("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var Dke=Lke(ys(),typeof window!="undefined"?window:{}),iie={};if(ys()){var Ike=document.createElement("div");iie=Ike.style}var Yb={};function aie(t){if(Yb[t])return Yb[t];var e=Dke[t];if(e)for(var r=Object.keys(e),n=r.length,i=0;i<n;i+=1){var a=r[i];if(Object.prototype.hasOwnProperty.call(e,a)&&a in iie)return Yb[t]=e[a],Yb[t]}return""}var oie=aie("animationend"),sie=aie("transitionend"),lie=!!(oie&&sie),Aj=oie||"animationend",Mj=sie||"transitionend";function Rj(t,e){if(!t)return null;if(wr(t)==="object"){var r=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return t[r]}return"".concat(t,"-").concat(e)}const Nke=function(t){var e=D.useRef();function r(i){i&&(i.removeEventListener(Mj,t),i.removeEventListener(Aj,t))}function n(i){e.current&&e.current!==i&&r(e.current),i&&i!==e.current&&(i.addEventListener(Mj,t),i.addEventListener(Aj,t),e.current=i)}return D.useEffect(function(){return function(){r(e.current)}},[]),[n,r]};var uie=ys()?D.useLayoutEffect:D.useEffect;const Oke=function(){var t=D.useRef(null);function e(){Na.cancel(t.current)}function r(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var a=Na(function(){i<=1?n({isCanceled:function(){return a!==t.current}}):r(n,i-1)});t.current=a}return D.useEffect(function(){return function(){e()}},[]),[r,e]};var kke=[Pl,zg,Ug,l7],Fke=[Pl,nie],cie=!1,Bke=!0;function fie(t){return t===Ug||t===l7}const zke=function(t,e,r){var n=e2(Cj),i=rt(n,2),a=i[0],o=i[1],s=Oke(),l=rt(s,2),u=l[0],c=l[1];function f(){o(Pl,!0)}var h=e?Fke:kke;return uie(function(){if(a!==Cj&&a!==l7){var d=h.indexOf(a),p=h[d+1],v=r(a);v===cie?o(p,!0):p&&u(function(g){function m(){g.isCanceled()||o(p,!0)}v===!0?m():Promise.resolve(v).then(m)})}},[t,a]),D.useEffect(function(){return function(){c()}},[]),[f,a]};function Uke(t,e,r,n){var i=n.motionEnter,a=i===void 0?!0:i,o=n.motionAppear,s=o===void 0?!0:o,l=n.motionLeave,u=l===void 0?!0:l,c=n.motionDeadline,f=n.motionLeaveImmediately,h=n.onAppearPrepare,d=n.onEnterPrepare,p=n.onLeavePrepare,v=n.onAppearStart,g=n.onEnterStart,m=n.onLeaveStart,x=n.onAppearActive,S=n.onEnterActive,b=n.onLeaveActive,T=n.onAppearEnd,w=n.onEnterEnd,E=n.onLeaveEnd,M=n.onVisibleChanged,A=e2(),R=rt(A,2),L=R[0],I=R[1],N=Pke(Gf),k=rt(N,2),z=k[0],B=k[1],V=e2(null),F=rt(V,2),$=F[0],W=F[1],H=z(),X=D.useRef(!1),te=D.useRef(null);function Y(){return r()}var ee=D.useRef(!1);function se(){B(Gf),W(null,!0)}var ne=La(function(We){var q=z();if(q!==Gf){var j=Y();if(!(We&&!We.deadline&&We.target!==j)){var ie=ee.current,Ce;q===jb&&ie?Ce=T==null?void 0:T(j,We):q===Xb&&ie?Ce=w==null?void 0:w(j,We):q===Kb&&ie&&(Ce=E==null?void 0:E(j,We)),ie&&Ce!==!1&&se()}}}),le=Nke(ne),pe=rt(le,1),Se=pe[0],_e=function(q){switch(q){case jb:return xe(xe(xe({},Pl,h),zg,v),Ug,x);case Xb:return xe(xe(xe({},Pl,d),zg,g),Ug,S);case Kb:return xe(xe(xe({},Pl,p),zg,m),Ug,b);default:return{}}},Le=D.useMemo(function(){return _e(H)},[H]),Be=zke(H,!t,function(We){if(We===Pl){var q=Le[Pl];return q?q(Y()):cie}if(je in Le){var j;W(((j=Le[je])===null||j===void 0?void 0:j.call(Le,Y(),null))||null)}return je===Ug&&H!==Gf&&(Se(Y()),c>0&&(clearTimeout(te.current),te.current=setTimeout(function(){ne({deadline:!0})},c))),je===nie&&se(),Bke}),Q=rt(Be,2),tt=Q[0],je=Q[1],Ye=fie(je);ee.current=Ye,uie(function(){I(e);var We=X.current;X.current=!0;var q;!We&&e&&s&&(q=jb),We&&e&&a&&(q=Xb),(We&&!e&&u||!We&&f&&!e&&u)&&(q=Kb);var j=_e(q);q&&(t||j[Pl])?(B(q),tt()):B(Gf)},[e]),D.useEffect(function(){(H===jb&&!s||H===Xb&&!a||H===Kb&&!u)&&B(Gf)},[s,a,u]),D.useEffect(function(){return function(){X.current=!1,clearTimeout(te.current)}},[]);var $e=D.useRef(!1);D.useEffect(function(){L&&($e.current=!0),L!==void 0&&H===Gf&&(($e.current||L)&&(M==null||M(L)),$e.current=!0)},[L,H]);var wt=$;return Le[Pl]&&je===zg&&(wt=we({transition:"none"},wt)),[H,je,wt,L!=null?L:e]}function Vke(t){var e=t;wr(t)==="object"&&(e=t.transitionSupport);function r(i,a){return!!(i.motionName&&e&&a!==!1)}var n=D.forwardRef(function(i,a){var o=i.visible,s=o===void 0?!0:o,l=i.removeOnLeave,u=l===void 0?!0:l,c=i.forceRender,f=i.children,h=i.motionName,d=i.leavedClassName,p=i.eventProps,v=D.useContext(rie),g=v.motion,m=r(i,g),x=D.useRef(),S=D.useRef();function b(){try{return x.current instanceof HTMLElement?x.current:k3(S.current)}catch($){return null}}var T=Uke(m,s,b,i),w=rt(T,4),E=w[0],M=w[1],A=w[2],R=w[3],L=D.useRef(R);R&&(L.current=!0);var I=D.useCallback(function($){x.current=$,e7(a,$)},[a]),N,k=we(we({},p),{},{visible:s});if(!f)N=null;else if(E===Gf)R?N=f(we({},k),I):!u&&L.current&&d?N=f(we(we({},k),{},{className:d}),I):c||!u&&!d?N=f(we(we({},k),{},{style:{display:"none"}}),I):N=null;else{var z;M===Pl?z="prepare":fie(M)?z="active":M===zg&&(z="start");var B=Rj(h,"".concat(E,"-").concat(z));N=f(we(we({},k),{},{className:st(Rj(h,E),xe(xe({},B,B&&z),h,typeof h=="string")),style:A}),I)}if(D.isValidElement(N)&&k2(N)){var V=N,F=V.ref;F||(N=D.cloneElement(N,{ref:I}))}return D.createElement(Rke,{ref:S},N)});return n.displayName="CSSMotion",n}const Xl=Vke(lie);var gP="add",mP="keep",yP="remove",m9="removed";function Hke(t){var e;return t&&wr(t)==="object"&&"key"in t?e=t:e={key:t},we(we({},e),{},{key:String(e.key)})}function _P(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(Hke)}function Gke(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,i=e.length,a=_P(t),o=_P(e);a.forEach(function(u){for(var c=!1,f=n;f<i;f+=1){var h=o[f];if(h.key===u.key){n<f&&(r=r.concat(o.slice(n,f).map(function(d){return we(we({},d),{},{status:gP})})),n=f),r.push(we(we({},h),{},{status:mP})),n+=1,c=!0;break}}c||r.push(we(we({},u),{},{status:yP}))}),n<i&&(r=r.concat(o.slice(n).map(function(u){return we(we({},u),{},{status:gP})})));var s={};r.forEach(function(u){var c=u.key;s[c]=(s[c]||0)+1});var l=Object.keys(s).filter(function(u){return s[u]>1});return l.forEach(function(u){r=r.filter(function(c){var f=c.key,h=c.status;return f!==u||h!==yP}),r.forEach(function(c){c.key===u&&(c.status=mP)})}),r}var Wke=["component","children","onVisibleChanged","onAllRemoved"],$ke=["status"],jke=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Xke(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xl,r=function(n){Jc(a,n);var i=Qc(a);function a(){var o;oa(this,a);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return o=i.call.apply(i,[this].concat(l)),xe(jr(o),"state",{keyEntities:[]}),xe(jr(o),"removeKey",function(c){o.setState(function(f){var h=f.keyEntities.map(function(d){return d.key!==c?d:we(we({},d),{},{status:m9})});return{keyEntities:h}},function(){var f=o.state.keyEntities,h=f.filter(function(d){var p=d.status;return p!==m9}).length;h===0&&o.props.onAllRemoved&&o.props.onAllRemoved()})}),o}return sa(a,[{key:"render",value:function(){var s=this,l=this.state.keyEntities,u=this.props,c=u.component,f=u.children,h=u.onVisibleChanged;u.onAllRemoved;var d=Pn(u,Wke),p=c||D.Fragment,v={};return jke.forEach(function(g){v[g]=d[g],delete d[g]}),delete d.keys,D.createElement(p,d,l.map(function(g,m){var x=g.status,S=Pn(g,$ke),b=x===gP||x===mP;return D.createElement(e,mr({},v,{key:S.key,visible:b,eventProps:S,onVisibleChanged:function(w){h==null||h(w,{key:S.key}),w||s.removeKey(S.key)}}),function(T,w){return f(we(we({},T),{},{index:m}),w)})}))}}],[{key:"getDerivedStateFromProps",value:function(s,l){var u=s.keys,c=l.keyEntities,f=_P(u),h=Gke(c,f);return{keyEntities:h.filter(function(d){var p=c.find(function(v){var g=v.key;return d.key===g});return!(p&&p.status===m9&&d.status===yP)})}}}]),a}(D.Component);return xe(r,"defaultProps",{component:"div"}),r}Xke(lie);function Kke(t){const{children:e}=t,[,r]=Ih(),{motion:n}=r,i=D.useRef(!1);return i.current=i.current||n===!1,i.current?D.createElement(Mke,{motion:n},e):e}const Yke=()=>null;var qke=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Zke=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let hie;function Jke(){return hie||Q_}function Qke(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const eFe=t=>{const{prefixCls:e,iconPrefixCls:r,theme:n,holderRender:i}=t;e!==void 0&&(hie=e),n&&Qke(n)&&JOe(Jke(),n)},tFe=t=>{const{children:e,csp:r,autoInsertSpaceInButton:n,alert:i,anchor:a,form:o,locale:s,componentSize:l,direction:u,space:c,splitter:f,virtual:h,dropdownMatchSelectWidth:d,popupMatchSelectWidth:p,popupOverflow:v,legacyLocale:g,parentContext:m,iconPrefixCls:x,theme:S,componentDisabled:b,segmented:T,statistic:w,spin:E,calendar:M,carousel:A,cascader:R,collapse:L,typography:I,checkbox:N,descriptions:k,divider:z,drawer:B,skeleton:V,steps:F,image:$,layout:W,list:H,mentions:X,modal:te,progress:Y,result:ee,slider:se,breadcrumb:ne,menu:le,pagination:pe,input:Se,textArea:_e,empty:Le,badge:Be,radio:Q,rate:tt,switch:je,transfer:Ye,avatar:$e,message:wt,tag:We,table:q,card:j,tabs:ie,timeline:Ce,timePicker:ye,upload:me,notification:qe,tree:Ie,colorPicker:He,datePicker:Et,rangePicker:Fe,flex:Ge,wave:lt,dropdown:ht,warning:ut,tour:Qt,floatButtonGroup:zt,variant:rr,inputNumber:ce,treeSelect:vt}=t,Me=D.useCallback((Qr,Dr)=>{const{prefixCls:Nn}=t;if(Dr)return Dr;const Bn=Nn||m.getPrefixCls("");return Qr?`${Bn}-${Qr}`:Bn},[m.getPrefixCls,t.prefixCls]),ke=x||m.iconPrefixCls||$ne,nt=r||m.csp;tie(ke,nt);const et=Eke(S,m.theme,{prefixCls:Me("")}),Gt={csp:nt,autoInsertSpaceInButton:n,alert:i,anchor:a,locale:s||g,direction:u,space:c,splitter:f,virtual:h,popupMatchSelectWidth:p!=null?p:d,popupOverflow:v,getPrefixCls:Me,iconPrefixCls:ke,theme:et,segmented:T,statistic:w,spin:E,calendar:M,carousel:A,cascader:R,collapse:L,typography:I,checkbox:N,descriptions:k,divider:z,drawer:B,skeleton:V,steps:F,image:$,input:Se,textArea:_e,layout:W,list:H,mentions:X,modal:te,progress:Y,result:ee,slider:se,breadcrumb:ne,menu:le,pagination:pe,empty:Le,badge:Be,radio:Q,rate:tt,switch:je,transfer:Ye,avatar:$e,message:wt,tag:We,table:q,card:j,tabs:ie,timeline:Ce,timePicker:ye,upload:me,notification:qe,tree:Ie,colorPicker:He,datePicker:Et,rangePicker:Fe,flex:Ge,wave:lt,dropdown:ht,warning:ut,tour:Qt,floatButtonGroup:zt,variant:rr,inputNumber:ce,treeSelect:vt},nr=Object.assign({},m);Object.keys(Gt).forEach(Qr=>{Gt[Qr]!==void 0&&(nr[Qr]=Gt[Qr])}),Zke.forEach(Qr=>{const Dr=t[Qr];Dr&&(nr[Qr]=Dr)}),typeof n!="undefined"&&(nr.button=Object.assign({autoInsertSpace:n},nr.button));const Mt=E4(()=>nr,nr,(Qr,Dr)=>{const Nn=Object.keys(Qr),Bn=Object.keys(Dr);return Nn.length!==Bn.length||Nn.some(qn=>Qr[qn]!==Dr[qn])}),ot=D.useMemo(()=>({prefixCls:ke,csp:nt}),[ke,nt]);let mt=D.createElement(D.Fragment,null,D.createElement(Yke,{dropdownMatchSelectWidth:d}),e);const Pr=D.useMemo(()=>{var Qr,Dr,Nn,Bn;return Bg(((Qr=L4.Form)===null||Qr===void 0?void 0:Qr.defaultValidateMessages)||{},((Nn=(Dr=Mt.locale)===null||Dr===void 0?void 0:Dr.Form)===null||Nn===void 0?void 0:Nn.defaultValidateMessages)||{},((Bn=Mt.form)===null||Bn===void 0?void 0:Bn.validateMessages)||{},(o==null?void 0:o.validateMessages)||{})},[Mt,o==null?void 0:o.validateMessages]);Object.keys(Pr).length>0&&(mt=D.createElement(DOe.Provider,{value:Pr},mt)),s&&(mt=D.createElement(BOe,{locale:s,_ANT_MARK__:FOe},mt)),(ke||nt)&&(mt=D.createElement(ZI.Provider,{value:ot},mt)),l&&(mt=D.createElement(eke,{size:l},mt)),mt=D.createElement(Kke,null,mt);const Yn=D.useMemo(()=>{const Qr=et||{},{algorithm:Dr,token:Nn,components:Bn,cssVar:qn}=Qr,Ai=qke(Qr,["algorithm","token","components","cssVar"]),Jo=Dr&&(!Array.isArray(Dr)||Dr.length>0)?uP(Dr):Gne,Mi={};Object.entries(Bn||{}).forEach(_i=>{let[Sa,Fa]=_i;const zn=Object.assign({},Fa);"algorithm"in zn&&(zn.algorithm===!0?zn.theme=Jo:(Array.isArray(zn.algorithm)||typeof zn.algorithm=="function")&&(zn.theme=uP(zn.algorithm)),delete zn.algorithm),Mi[Sa]=zn});const li=Object.assign(Object.assign({},J_),Nn);return Object.assign(Object.assign({},Ai),{theme:Jo,token:li,components:Mi,override:Object.assign({override:li},Mi),cssVar:qn})},[et]);return S&&(mt=D.createElement(Wne.Provider,{value:Yn},mt)),Mt.warning&&(mt=D.createElement(LOe.Provider,{value:Mt.warning},mt)),b!==void 0&&(mt=D.createElement(QOe,{disabled:b},mt)),D.createElement(xn.Provider,{value:Mt},mt)},T0=t=>{const e=D.useContext(xn),r=D.useContext(Vne);return D.createElement(tFe,Object.assign({parentContext:e,legacyLocale:r},t))};T0.ConfigContext=xn;T0.SizeContext=zm;T0.config=eFe;T0.useConfig=tke;Object.defineProperty(T0,"SizeContext",{get:()=>zm});var rFe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,nFe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,iFe="".concat(rFe," ").concat(nFe).split(/[\s\n]+/),aFe="aria-",oFe="data-";function Pj(t,e){return t.indexOf(e)===0}function uT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=we({},e);var n={};return Object.keys(t).forEach(function(i){(r.aria&&(i==="role"||Pj(i,aFe))||r.data&&Pj(i,oFe)||r.attr&&iFe.includes(i))&&(n[i]=t[i])}),n}function die(t){return t&&bt.isValidElement(t)&&t.type===bt.Fragment}const sFe=(t,e,r)=>bt.isValidElement(t)?bt.cloneElement(t,typeof r=="function"?r(t.props||{}):r):e;function tf(t,e){return sFe(t,t,e)}function xP(t){return t!=null&&t===t.window}const pie=t=>{var e,r;if(typeof window=="undefined")return 0;let n=0;return xP(t)?n=t.pageYOffset:t instanceof Document?n=t.documentElement.scrollTop:(t instanceof HTMLElement||t)&&(n=t.scrollTop),t&&!xP(t)&&typeof n!="number"&&(n=(r=((e=t.ownerDocument)!==null&&e!==void 0?e:t).documentElement)===null||r===void 0?void 0:r.scrollTop),n};function lFe(t,e,r,n){const i=r-e;return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function uFe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{getContainer:r=()=>window,callback:n,duration:i=450}=e,a=r(),o=pie(a),s=Date.now(),l=()=>{const c=Date.now()-s,f=lFe(c>i?i:c,o,t,i);xP(a)?a.scrollTo(window.pageXOffset,f):a instanceof Document||a.constructor.name==="HTMLDocument"?a.documentElement.scrollTop=f:a.scrollTop=f,c<i?Na(l):typeof n=="function"&&n()};Na(l)}const u7=t=>{const[,,,,e]=Ih();return e?`${t}-css-var`:""};var jt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=jt.F1&&r<=jt.F12)return!1;switch(r){case jt.ALT:case jt.CAPS_LOCK:case jt.CONTEXT_MENU:case jt.CTRL:case jt.DOWN:case jt.END:case jt.ESC:case jt.HOME:case jt.INSERT:case jt.LEFT:case jt.MAC_FF_META:case jt.META:case jt.NUMLOCK:case jt.NUM_CENTER:case jt.PAGE_DOWN:case jt.PAGE_UP:case jt.PAUSE:case jt.PRINT_SCREEN:case jt.RIGHT:case jt.SHIFT:case jt.UP:case jt.WIN_KEY:case jt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=jt.ZERO&&e<=jt.NINE||e>=jt.NUM_ZERO&&e<=jt.NUM_MULTIPLY||e>=jt.A&&e<=jt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case jt.SPACE:case jt.QUESTION_MARK:case jt.NUM_PLUS:case jt.NUM_MINUS:case jt.NUM_PERIOD:case jt.NUM_DIVISION:case jt.SEMICOLON:case jt.DASH:case jt.EQUALS:case jt.COMMA:case jt.PERIOD:case jt.SLASH:case jt.APOSTROPHE:case jt.SINGLE_QUOTE:case jt.OPEN_SQUARE_BRACKET:case jt.BACKSLASH:case jt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const c7=bt.createContext(void 0),Ld=100,vie={Modal:Ld,Drawer:Ld,Popover:Ld,Popconfirm:Ld,Tooltip:Ld,Tour:Ld,FloatButton:Ld},cFe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function fFe(t){return t in vie}const B2=(t,e)=>{const[,r]=Ih(),n=bt.useContext(c7),i=fFe(t);let a;if(e!==void 0)a=[e,e];else{let o=n!=null?n:0;i?o+=(n?0:r.zIndexPopupBase)+vie[t]:o+=cFe[t],a=[n===void 0?e:o,o]}return a};function Mo(){Mo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(B,V,F){B[V]=F.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(B,V,F){return Object.defineProperty(B,V,{value:F,enumerable:!0,configurable:!0,writable:!0}),B[V]}try{u({},"")}catch(B){u=function(F,$,W){return F[$]=W}}function c(B,V,F,$){var W=V&&V.prototype instanceof m?V:m,H=Object.create(W.prototype),X=new k($||[]);return i(H,"_invoke",{value:R(B,F,X)}),H}function f(B,V,F){try{return{type:"normal",arg:B.call(V,F)}}catch($){return{type:"throw",arg:$}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",g={};function m(){}function x(){}function S(){}var b={};u(b,o,function(){return this});var T=Object.getPrototypeOf,w=T&&T(T(z([])));w&&w!==r&&n.call(w,o)&&(b=w);var E=S.prototype=m.prototype=Object.create(b);function M(B){["next","throw","return"].forEach(function(V){u(B,V,function(F){return this._invoke(V,F)})})}function A(B,V){function F(W,H,X,te){var Y=f(B[W],B,H);if(Y.type!=="throw"){var ee=Y.arg,se=ee.value;return se&&wr(se)=="object"&&n.call(se,"__await")?V.resolve(se.__await).then(function(ne){F("next",ne,X,te)},function(ne){F("throw",ne,X,te)}):V.resolve(se).then(function(ne){ee.value=ne,X(ee)},function(ne){return F("throw",ne,X,te)})}te(Y.arg)}var $;i(this,"_invoke",{value:function(H,X){function te(){return new V(function(Y,ee){F(H,X,Y,ee)})}return $=$?$.then(te,te):te()}})}function R(B,V,F){var $=h;return function(W,H){if($===p)throw Error("Generator is already running");if($===v){if(W==="throw")throw H;return{value:t,done:!0}}for(F.method=W,F.arg=H;;){var X=F.delegate;if(X){var te=L(X,F);if(te){if(te===g)continue;return te}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if($===h)throw $=v,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);$=p;var Y=f(B,V,F);if(Y.type==="normal"){if($=F.done?v:d,Y.arg===g)continue;return{value:Y.arg,done:F.done}}Y.type==="throw"&&($=v,F.method="throw",F.arg=Y.arg)}}}function L(B,V){var F=V.method,$=B.iterator[F];if($===t)return V.delegate=null,F==="throw"&&B.iterator.return&&(V.method="return",V.arg=t,L(B,V),V.method==="throw")||F!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+F+"' method")),g;var W=f($,B.iterator,V.arg);if(W.type==="throw")return V.method="throw",V.arg=W.arg,V.delegate=null,g;var H=W.arg;return H?H.done?(V[B.resultName]=H.value,V.next=B.nextLoc,V.method!=="return"&&(V.method="next",V.arg=t),V.delegate=null,g):H:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,g)}function I(B){var V={tryLoc:B[0]};1 in B&&(V.catchLoc=B[1]),2 in B&&(V.finallyLoc=B[2],V.afterLoc=B[3]),this.tryEntries.push(V)}function N(B){var V=B.completion||{};V.type="normal",delete V.arg,B.completion=V}function k(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(I,this),this.reset(!0)}function z(B){if(B||B===""){var V=B[o];if(V)return V.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var F=-1,$=function W(){for(;++F<B.length;)if(n.call(B,F))return W.value=B[F],W.done=!1,W;return W.value=t,W.done=!0,W};return $.next=$}}throw new TypeError(wr(B)+" is not iterable")}return x.prototype=S,i(E,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:x,configurable:!0}),x.displayName=u(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(B){var V=typeof B=="function"&&B.constructor;return!!V&&(V===x||(V.displayName||V.name)==="GeneratorFunction")},e.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,S):(B.__proto__=S,u(B,l,"GeneratorFunction")),B.prototype=Object.create(E),B},e.awrap=function(B){return{__await:B}},M(A.prototype),u(A.prototype,s,function(){return this}),e.AsyncIterator=A,e.async=function(B,V,F,$,W){W===void 0&&(W=Promise);var H=new A(c(B,V,F,$),W);return e.isGeneratorFunction(V)?H:H.next().then(function(X){return X.done?X.value:H.next()})},M(E),u(E,l,"Generator"),u(E,o,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function(B){var V=Object(B),F=[];for(var $ in V)F.push($);return F.reverse(),function W(){for(;F.length;){var H=F.pop();if(H in V)return W.value=H,W.done=!1,W}return W.done=!0,W}},e.values=z,k.prototype={constructor:k,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!V)for(var F in this)F.charAt(0)==="t"&&n.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=t)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var F=this;function $(ee,se){return X.type="throw",X.arg=V,F.next=ee,se&&(F.method="next",F.arg=t),!!se}for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W],X=H.completion;if(H.tryLoc==="root")return $("end");if(H.tryLoc<=this.prev){var te=n.call(H,"catchLoc"),Y=n.call(H,"finallyLoc");if(te&&Y){if(this.prev<H.catchLoc)return $(H.catchLoc,!0);if(this.prev<H.finallyLoc)return $(H.finallyLoc)}else if(te){if(this.prev<H.catchLoc)return $(H.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return $(H.finallyLoc)}}}},abrupt:function(V,F){for(var $=this.tryEntries.length-1;$>=0;--$){var W=this.tryEntries[$];if(W.tryLoc<=this.prev&&n.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var H=W;break}}H&&(V==="break"||V==="continue")&&H.tryLoc<=F&&F<=H.finallyLoc&&(H=null);var X=H?H.completion:{};return X.type=V,X.arg=F,H?(this.method="next",this.next=H.finallyLoc,g):this.complete(X)},complete:function(V,F){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&F&&(this.next=F),g},finish:function(V){for(var F=this.tryEntries.length-1;F>=0;--F){var $=this.tryEntries[F];if($.finallyLoc===V)return this.complete($.completion,$.afterLoc),N($),g}},catch:function(V){for(var F=this.tryEntries.length-1;F>=0;--F){var $=this.tryEntries[F];if($.tryLoc===V){var W=$.completion;if(W.type==="throw"){var H=W.arg;N($)}return H}}throw Error("illegal catch attempt")},delegateYield:function(V,F,$){return this.delegate={iterator:z(V),resultName:F,nextLoc:$},this.method==="next"&&(this.arg=t),g}},e}function Lj(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(u){return void r(u)}s.done?e(l):Promise.resolve(l).then(n,i)}function Jp(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(l){Lj(a,n,i,o,s,"next",l)}function s(l){Lj(a,n,i,o,s,"throw",l)}o(void 0)})}}var z2=we({},Ole),hFe=z2.version,dFe=z2.render,pFe=z2.unmountComponentAtNode,D4;try{var vFe=Number((hFe||"").split(".")[0]);vFe>=18&&(D4=z2.createRoot)}catch(t){}function Dj(t){var e=z2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&wr(e)==="object"&&(e.usingClientEntryPoint=t)}var cT="__rc_react_root__";function gFe(t,e){Dj(!0);var r=e[cT]||D4(e);Dj(!1),r.render(t),e[cT]=r}function mFe(t,e){dFe(t,e)}function yFe(t,e){if(D4){gFe(t,e);return}mFe(t,e)}function _Fe(t){return SP.apply(this,arguments)}function SP(){return SP=Jp(Mo().mark(function t(e){return Mo().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.resolve().then(function(){var i;(i=e[cT])===null||i===void 0||i.unmount(),delete e[cT]}));case 1:case"end":return n.stop()}},t)})),SP.apply(this,arguments)}function xFe(t){pFe(t)}function SFe(t){return bP.apply(this,arguments)}function bP(){return bP=Jp(Mo().mark(function t(e){return Mo().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(D4===void 0){n.next=2;break}return n.abrupt("return",_Fe(e));case 2:xFe(e);case 3:case"end":return n.stop()}},t)})),bP.apply(this,arguments)}const y9=()=>({height:0,opacity:0}),Ij=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},bFe=t=>({height:t?t.offsetHeight:0}),_9=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",wFe=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q_}-motion-collapse`,onAppearStart:y9,onEnterStart:y9,onAppearActive:Ij,onEnterActive:Ij,onLeaveStart:bFe,onLeaveActive:y9,onAppearEnd:_9,onEnterEnd:_9,onLeaveEnd:_9,motionDeadline:500}},fT=(t,e,r)=>r!==void 0?r:`${t}-${e}`,f7=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),r=e.width,n=e.height;if(r||n)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}}return!1},TFe=t=>{const{componentCls:e,colorPrimary:r}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},CFe=Ske("Wave",t=>[TFe(t)]),gie=`${Q_}-wave-target`;function x9(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function EFe(t){const{borderTopColor:e,borderColor:r,backgroundColor:n}=getComputedStyle(t);return x9(e)?e:x9(r)?r:x9(n)?n:null}function S9(t){return Number.isNaN(t)?0:t}const AFe=t=>{const{className:e,target:r,component:n}=t,i=D.useRef(null),[a,o]=D.useState(null),[s,l]=D.useState([]),[u,c]=D.useState(0),[f,h]=D.useState(0),[d,p]=D.useState(0),[v,g]=D.useState(0),[m,x]=D.useState(!1),S={left:u,top:f,width:d,height:v,borderRadius:s.map(w=>`${w}px`).join(" ")};a&&(S["--wave-color"]=a);function b(){const w=getComputedStyle(r);o(EFe(r));const E=w.position==="static",{borderLeftWidth:M,borderTopWidth:A}=w;c(E?r.offsetLeft:S9(-parseFloat(M))),h(E?r.offsetTop:S9(-parseFloat(A))),p(r.offsetWidth),g(r.offsetHeight);const{borderTopLeftRadius:R,borderTopRightRadius:L,borderBottomLeftRadius:I,borderBottomRightRadius:N}=w;l([R,L,N,I].map(k=>S9(parseFloat(k))))}if(D.useEffect(()=>{if(r){const w=Na(()=>{b(),x(!0)});let E;return typeof ResizeObserver!="undefined"&&(E=new ResizeObserver(b),E.observe(r)),()=>{Na.cancel(w),E==null||E.disconnect()}}},[]),!m)return null;const T=(n==="Checkbox"||n==="Radio")&&(r==null?void 0:r.classList.contains(gie));return D.createElement(Xl,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(w,E)=>{var M;if(E.deadline||E.propertyName==="opacity"){const A=(M=i.current)===null||M===void 0?void 0:M.parentElement;SFe(A).then(()=>{A==null||A.remove()})}return!1}},(w,E)=>{let{className:M}=w;return D.createElement("div",{ref:O2(i,E),className:st(e,M,{"wave-quick":T}),style:S})})},MFe=(t,e)=>{var r;const{component:n}=e;if(n==="Checkbox"&&!(!((r=t.querySelector("input"))===null||r===void 0)&&r.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",t==null||t.insertBefore(i,t==null?void 0:t.firstChild),yFe(D.createElement(AFe,Object.assign({},e,{target:t})),i)},RFe=(t,e,r)=>{const{wave:n}=D.useContext(xn),[,i,a]=Ih(),o=La(u=>{const c=t.current;if(n!=null&&n.disabled||!c)return;const f=c.querySelector(`.${gie}`)||c,{showEffect:h}=n||{};(h||MFe)(f,{className:e,token:i,component:r,event:u,hashId:a})}),s=D.useRef();return u=>{Na.cancel(s.current),s.current=Na(()=>{o(u)})}},PFe=t=>{const{children:e,disabled:r,component:n}=t,{getPrefixCls:i}=D.useContext(xn),a=D.useRef(null),o=i("wave"),[,s]=CFe(o),l=RFe(a,st(o,s),n);if(bt.useEffect(()=>{const c=a.current;if(!c||c.nodeType!==1||r)return;const f=h=>{!f7(h.target)||!c.getAttribute||c.getAttribute("disabled")||c.disabled||c.className.includes("disabled")||c.className.includes("-leave")||l(h)};return c.addEventListener("click",f,!0),()=>{c.removeEventListener("click",f,!0)}},[r]),!bt.isValidElement(e))return e!=null?e:null;const u=k2(e)?O2(e.ref,a):a;return tf(e,{ref:u})},LFe=t=>{const e=bt.useContext(zm);return bt.useMemo(()=>t?typeof t=="string"?t!=null?t:e:t instanceof Function?t(e):e:e,[t,e])},mie=D.createContext(null),DFe=(t,e)=>{const r=D.useContext(mie),n=D.useMemo(()=>{if(!r)return"";const{compactDirection:i,isFirstItem:a,isLastItem:o}=r,s=i==="vertical"?"-vertical-":"-";return st(`${t}-compact${s}item`,{[`${t}-compact${s}first-item`]:a,[`${t}-compact${s}last-item`]:o,[`${t}-compact${s}item-rtl`]:e==="rtl"})},[t,e,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:n}},IFe=t=>{let{children:e}=t;return D.createElement(mie.Provider,{value:null},e)};var NFe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const yie=D.createContext(void 0),OFe=t=>{const{getPrefixCls:e,direction:r}=D.useContext(xn),{prefixCls:n,size:i,className:a}=t,o=NFe(t,["prefixCls","size","className"]),s=e("btn-group",n),[,,l]=Ih();let u="";switch(i){case"large":u="lg";break;case"small":u="sm";break}const c=st(s,{[`${s}-${u}`]:u,[`${s}-rtl`]:r==="rtl"},a,l);return D.createElement(yie.Provider,{value:i},D.createElement("div",Object.assign({},o,{className:c})))},Nj=/^[\u4E00-\u9FA5]{2}$/,wP=Nj.test.bind(Nj);function Oj(t){return typeof t=="string"}function b9(t){return t==="text"||t==="link"}function kFe(t,e){if(t==null)return;const r=e?" ":"";return typeof t!="string"&&typeof t!="number"&&Oj(t.type)&&wP(t.props.children)?tf(t,{children:t.props.children.split("").join(r)}):Oj(t)?wP(t)?bt.createElement("span",null,t.split("").join(r)):bt.createElement("span",null,t):die(t)?bt.createElement("span",null,t):t}function FFe(t,e){let r=!1;const n=[];return bt.Children.forEach(t,i=>{const a=typeof i,o=a==="string"||a==="number";if(r&&o){const s=n.length-1,l=n[s];n[s]=`${l}${i}`}else n.push(i);r=o}),bt.Children.map(n,i=>kFe(i,e))}const _ie=D.forwardRef((t,e)=>{const{className:r,style:n,children:i,prefixCls:a}=t,o=st(`${a}-icon`,r);return bt.createElement("span",{ref:e,className:o,style:n},i)}),kj=D.forwardRef((t,e)=>{const{prefixCls:r,className:n,style:i,iconClassName:a}=t,o=st(`${r}-loading-icon`,n);return bt.createElement(_ie,{prefixCls:r,className:o,style:i,ref:e},bt.createElement(k7e,{className:a}))}),w9=()=>({width:0,opacity:0,transform:"scale(0)"}),T9=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),BFe=t=>{const{prefixCls:e,loading:r,existIcon:n,className:i,style:a}=t,o=!!r;return n?bt.createElement(kj,{prefixCls:e,className:i,style:a}):bt.createElement(Xl,{visible:o,motionName:`${e}-loading-icon-motion`,motionLeave:o,removeOnLeave:!0,onAppearStart:w9,onAppearActive:T9,onEnterStart:w9,onEnterActive:T9,onLeaveStart:T9,onLeaveActive:w9},(s,l)=>{let{className:u,style:c}=s;return bt.createElement(kj,{prefixCls:e,className:i,style:Object.assign(Object.assign({},a),c),ref:l,iconClassName:u})})},Fj=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),zFe=t=>{const{componentCls:e,fontSize:r,lineWidth:n,groupBorderColor:i,colorErrorHover:a}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(n).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:r}},Fj(`${e}-primary`,i),Fj(`${e}-danger`,a)]}},da=Math.round;function C9(t,e){const r=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],n=r.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)n[i]=e(n[i]||0,r[i]||"",i);return r[3]?n[3]=r[3].includes("%")?n[3]/100:n[3]:n[3]=1,n}const Bj=(t,e,r)=>r===0?t:t/100;function e1(t,e){const r=e||255;return t>r?r:t<0?0:t}class I4{constructor(e){xe(this,"isValid",!0),xe(this,"r",0),xe(this,"g",0),xe(this,"b",0),xe(this,"a",1),xe(this,"_h",void 0),xe(this,"_s",void 0),xe(this,"_l",void 0),xe(this,"_v",void 0),xe(this,"_max",void 0),xe(this,"_min",void 0),xe(this,"_brightness",void 0);function r(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let a=function(o){return i.startsWith(o)};var n=a;const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):a("rgb")?this.fromRgbString(i):a("hsl")?this.fromHslString(i):(a("hsv")||a("hsb"))&&this.fromHsvString(i)}else if(e instanceof I4)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(r("rgb"))this.r=e1(e.r),this.g=e1(e.g),this.b=e1(e.b),this.a=typeof e.a=="number"?e1(e.a,1):1;else if(r("hsl"))this.fromHsl(e);else if(r("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const r=this.toHsv();return r.h=e,this._c(r)}getLuminance(){function e(a){const o=a/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const r=e(this.r),n=e(this.g),i=e(this.b);return .2126*r+.7152*n+.0722*i}getHue(){if(typeof this._h=="undefined"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=da(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s=="undefined"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l=="undefined"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v=="undefined"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness=="undefined"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const r=this.getHue(),n=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:r,s:n,l:i,a:this.a})}lighten(e=10){const r=this.getHue(),n=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:r,s:n,l:i,a:this.a})}mix(e,r=50){const n=this._c(e),i=r/100,a=s=>(n[s]-this[s])*i+this[s],o={r:da(a("r")),g:da(a("g")),b:da(a("b")),a:da(a("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const r=this._c(e),n=this.a+r.a*(1-this.a),i=a=>da((this[a]*this.a+r[a]*r.a*(1-this.a))/n);return this._c({r:i("r"),g:i("g"),b:i("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const r=(this.r||0).toString(16);e+=r.length===2?r:"0"+r;const n=(this.g||0).toString(16);e+=n.length===2?n:"0"+n;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const a=da(this.a*255).toString(16);e+=a.length===2?a:"0"+a}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),r=da(this.getSaturation()*100),n=da(this.getLightness()*100);return this.a!==1?`hsla(${e},${r}%,${n}%,${this.a})`:`hsl(${e},${r}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,r,n){const i=this.clone();return i[e]=e1(r,n),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max=="undefined"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min=="undefined"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const r=e.replace("#","");function n(i,a){return parseInt(r[i]+r[a||i],16)}r.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=r[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=r[6]?n(6,7)/255:1)}fromHsl({h:e,s:r,l:n,a:i}){if(this._h=e%360,this._s=r,this._l=n,this.a=typeof i=="number"?i:1,r<=0){const h=da(n*255);this.r=h,this.g=h,this.b=h}let a=0,o=0,s=0;const l=e/60,u=(1-Math.abs(2*n-1))*r,c=u*(1-Math.abs(l%2-1));l>=0&&l<1?(a=u,o=c):l>=1&&l<2?(a=c,o=u):l>=2&&l<3?(o=u,s=c):l>=3&&l<4?(o=c,s=u):l>=4&&l<5?(a=c,s=u):l>=5&&l<6&&(a=u,s=c);const f=n-u/2;this.r=da((a+f)*255),this.g=da((o+f)*255),this.b=da((s+f)*255)}fromHsv({h:e,s:r,v:n,a:i}){this._h=e%360,this._s=r,this._v=n,this.a=typeof i=="number"?i:1;const a=da(n*255);if(this.r=a,this.g=a,this.b=a,r<=0)return;const o=e/60,s=Math.floor(o),l=o-s,u=da(n*(1-r)*255),c=da(n*(1-r*l)*255),f=da(n*(1-r*(1-l))*255);switch(s){case 0:this.g=f,this.b=u;break;case 1:this.r=c,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=c;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=c;break}}fromHsvString(e){const r=C9(e,Bj);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(e){const r=C9(e,Bj);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(e){const r=C9(e,(n,i)=>i.includes("%")?da(n/100*255):n);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var UFe=["b"],VFe=["v"],E9=function(e){return Math.round(Number(e||0))},HFe=function(e){if(e instanceof I4)return e;if(e&&wr(e)==="object"&&"h"in e&&"b"in e){var r=e,n=r.b,i=Pn(r,UFe);return we(we({},i),{},{v:n})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},r2=function(t){Jc(r,t);var e=Qc(r);function r(n){return oa(this,r),e.call(this,HFe(n))}return sa(r,[{key:"toHsbString",value:function(){var i=this.toHsb(),a=E9(i.s*100),o=E9(i.b*100),s=E9(i.h),l=i.a,u="hsb(".concat(s,", ").concat(a,"%, ").concat(o,"%)"),c="hsba(".concat(s,", ").concat(a,"%, ").concat(o,"%, ").concat(l.toFixed(l===0?0:2),")");return l===1?u:c}},{key:"toHsb",value:function(){var i=this.toHsv(),a=i.v,o=Pn(i,VFe);return we(we({},o),{},{b:a,a:this.a})}}]),r}(I4),GFe=function(e){return e instanceof r2?e:new r2(e)};GFe("#1677ff");const WFe=(t,e)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",$Fe=(t,e)=>t?WFe(t,e):"";let jFe=function(){function t(e){oa(this,t);var r;if(this.cleared=!1,e instanceof t){this.metaColor=e.metaColor.clone(),this.colors=(r=e.colors)===null||r===void 0?void 0:r.map(i=>({color:new t(i.color),percent:i.percent})),this.cleared=e.cleared;return}const n=Array.isArray(e);n&&e.length?(this.colors=e.map(i=>{let{color:a,percent:o}=i;return{color:new t(a),percent:o}}),this.metaColor=new r2(this.colors[0].color.metaColor)):this.metaColor=new r2(n?"":e),(!e||n&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return sa(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return $Fe(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((n,i)=>{const a=r.colors[i];return n.percent===a.percent&&n.color.equals(a.color)}):this.toHexString()===r.toHexString()}}])}();const XFe=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),KFe=t=>({animationDuration:t,animationFillMode:"both"}),YFe=t=>({animationDuration:t,animationFillMode:"both"}),op=function(t,e,r,n){const a=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${a}${t}-enter,
      ${a}${t}-appear
    `]:Object.assign(Object.assign({},KFe(n)),{animationPlayState:"paused"}),[`${a}${t}-leave`]:Object.assign(Object.assign({},YFe(n)),{animationPlayState:"paused"}),[`
      ${a}${t}-enter${t}-enter-active,
      ${a}${t}-appear${t}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${a}${t}-leave${t}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},qFe=new tn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),ZFe=new tn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),JFe=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=t,n=`${r}-fade`,i=e?"&":"";return[op(n,qFe,ZFe,t.motionDurationMid,e),{[`
        ${i}${n}-enter,
        ${i}${n}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${n}-leave`]:{animationTimingFunction:"linear"}}]},QFe=new tn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),eBe=new tn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),tBe=new tn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),rBe=new tn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),nBe=new tn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),iBe=new tn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),aBe=new tn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),oBe=new tn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),sBe={"slide-up":{inKeyframes:QFe,outKeyframes:eBe},"slide-down":{inKeyframes:tBe,outKeyframes:rBe},"slide-left":{inKeyframes:nBe,outKeyframes:iBe},"slide-right":{inKeyframes:aBe,outKeyframes:oBe}},zj=(t,e)=>{const{antCls:r}=t,n=`${r}-${e}`,{inKeyframes:i,outKeyframes:a}=sBe[e];return[op(n,i,a,t.motionDurationMid),{[`
      ${n}-enter,
      ${n}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${n}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},lBe=new tn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),uBe=new tn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),Uj=new tn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Vj=new tn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),cBe=new tn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),fBe=new tn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),hBe=new tn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),dBe=new tn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),pBe=new tn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),vBe=new tn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),gBe=new tn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),mBe=new tn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),yBe={zoom:{inKeyframes:lBe,outKeyframes:uBe},"zoom-big":{inKeyframes:Uj,outKeyframes:Vj},"zoom-big-fast":{inKeyframes:Uj,outKeyframes:Vj},"zoom-left":{inKeyframes:hBe,outKeyframes:dBe},"zoom-right":{inKeyframes:pBe,outKeyframes:vBe},"zoom-up":{inKeyframes:cBe,outKeyframes:fBe},"zoom-down":{inKeyframes:gBe,outKeyframes:mBe}},h7=(t,e)=>{const{antCls:r}=t,n=`${r}-${e}`,{inKeyframes:i,outKeyframes:a}=yBe[e];return[op(n,i,a,e==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${n}-enter,
        ${n}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${n}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},_Be=(t,e)=>{const{r,g:n,b:i,a}=t.toRgb(),o=new r2(t.toRgbString()).onBackground(e).toHsv();return a<=.5?o.v>.5:r*.299+n*.587+i*.114>192},xie=t=>{const{paddingInline:e,onlyIconSize:r,paddingBlock:n}=t;return Ao(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:n,buttonIconOnlyFontSize:r})},Sie=t=>{var e,r,n,i,a,o;const s=(e=t.contentFontSize)!==null&&e!==void 0?e:t.fontSize,l=(r=t.contentFontSizeSM)!==null&&r!==void 0?r:t.fontSize,u=(n=t.contentFontSizeLG)!==null&&n!==void 0?n:t.fontSizeLG,c=(i=t.contentLineHeight)!==null&&i!==void 0?i:G3(s),f=(a=t.contentLineHeightSM)!==null&&a!==void 0?a:G3(l),h=(o=t.contentLineHeightLG)!==null&&o!==void 0?o:G3(u),d=_Be(new jFe(t.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:t.fontSizeLG,onlyIconSizeSM:t.fontSizeLG-2,onlyIconSizeLG:t.fontSizeLG+2,groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:d,contentFontSize:s,contentFontSizeSM:l,contentFontSizeLG:u,contentLineHeight:c,contentLineHeightSM:f,contentLineHeightLG:h,paddingBlock:Math.max((t.controlHeight-s*c)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-l*f)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-u*h)/2-t.lineWidth,0)}},xBe=t=>{const{componentCls:e,iconCls:r,fontWeight:n}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:n,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Xt(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`> span, ${e}-icon`]:{display:"inline-flex"},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},eie(t)),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},"&-icon-end":{flexDirection:"row-reverse"}}}},bie=(t,e,r)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":r}}),SBe=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),bBe=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),wBe=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),d7=(t,e,r,n,i,a,o,s)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:e,borderColor:n||void 0,boxShadow:"none"},bie(t,Object.assign({background:e},o),Object.assign({background:e},s))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:a||void 0}})}),TBe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},wBe(t))}),CBe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),N4=(t,e,r,n)=>{const a=n&&["link","text"].includes(n)?CBe:TBe;return Object.assign(Object.assign({},a(t)),bie(t.componentCls,e,r))},p7=(t,e,r,n,i)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:r},N4(t,n,i))}),v7=(t,e,r,n,i)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:r},N4(t,n,i))}),g7=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),m7=(t,e,r,n)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},N4(t,r,n))}),Um=(t,e,r,n,i)=>({[`&${t.componentCls}-variant-${r}`]:Object.assign({color:e,boxShadow:"none"},N4(t,n,i,r))}),EBe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},p7(t,t.solidTextColor,t.colorBgSolid,{background:t.colorBgSolidHover},{background:t.colorBgSolidActive})),g7(t)),m7(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),Um(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),d7(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),ABe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},v7(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),g7(t)),m7(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),Um(t,t.colorLink,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),d7(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),MBe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},p7(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),v7(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),g7(t)),m7(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),Um(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),Um(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),d7(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),RBe=t=>{const{componentCls:e}=t;return{[`${e}-color-default`]:EBe(t),[`${e}-color-primary`]:ABe(t),[`${e}-color-dangerous`]:MBe(t)}},PBe=t=>Object.assign(Object.assign(Object.assign(Object.assign({},v7(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),Um(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),p7(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),Um(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),y7=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:n,fontSize:i,lineHeight:a,borderRadius:o,buttonPaddingHorizontal:s,iconCls:l,buttonPaddingVertical:u,motionDurationSlow:c,motionEaseInOut:f,buttonIconOnlyFontSize:h,opacityLoading:d}=t;return[{[e]:{fontSize:i,lineHeight:a,height:n,padding:`${Xt(u)} ${Xt(s)}`,borderRadius:o,[`&${r}-icon-only`]:{width:n,paddingInline:0,[`&${r}-compact-item`]:{flex:"none"},[`&${r}-round`]:{width:"auto"},[l]:{fontSize:h}},[`&${r}-loading`]:{opacity:d,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${c} ${f}, opacity ${c} ${f}`}}},{[`${r}${r}-circle${e}`]:SBe(t)},{[`${r}${r}-round${e}`]:bBe(t)}]},LBe=t=>{const e=Ao(t,{fontSize:t.contentFontSize,lineHeight:t.contentLineHeight});return y7(e,t.componentCls)},DBe=t=>{const e=Ao(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,lineHeight:t.contentLineHeightSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:t.paddingBlockSM,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return y7(e,`${t.componentCls}-sm`)},IBe=t=>{const e=Ao(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,lineHeight:t.contentLineHeightLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:t.paddingBlockLG,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return y7(e,`${t.componentCls}-lg`)},NBe=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},OBe=ef("Button",t=>{const e=xie(t);return[xBe(e),LBe(e),DBe(e),IBe(e),NBe(e),RBe(e),PBe(e),zFe(e)]},Sie,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function kBe(t,e,r){const{focusElCls:n,focus:i,borderElCls:a}=r,o=a?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map(l=>`&:${l} ${o}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},n?{[`&${n}`]:{zIndex:2}}:{}),{[`&[disabled] ${o}`]:{zIndex:0}})}}function FBe(t,e,r){const{borderElCls:n}=r,i=n?`> ${n}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function BBe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=t,n=`${r}-compact`;return{[n]:Object.assign(Object.assign({},kBe(t,n,e)),FBe(r,n,e))}}function zBe(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function UBe(t,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function VBe(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},zBe(t,e)),UBe(t.componentCls,e))}}const HBe=t=>{const{componentCls:e,colorPrimaryHover:r,lineWidth:n,calc:i}=t,a=i(n).mul(-1).equal(),o=s=>({[`${e}-compact${s?"-vertical":""}-item${e}-primary:not([disabled])`]:{"& + &::before":{position:"absolute",top:s?a:0,insetInlineStart:s?0:a,backgroundColor:r,content:'""',width:s?"100%":n,height:s?n:"100%"}}});return Object.assign(Object.assign({},o()),o(!0))},GBe=bke(["Button","compact"],t=>{const e=xie(t);return[BBe(e),VBe(e),HBe(e)]},Sie);var WBe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function $Be(t){if(typeof t=="object"&&t){let e=t==null?void 0:t.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}const jBe={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},XBe=bt.forwardRef((t,e)=>{var r,n,i,a;const{loading:o=!1,prefixCls:s,color:l,variant:u,type:c,danger:f=!1,shape:h="default",size:d,styles:p,disabled:v,className:g,rootClassName:m,children:x,icon:S,iconPosition:b="start",ghost:T=!1,block:w=!1,htmlType:E="button",classNames:M,style:A={},autoInsertSpace:R,autoFocus:L}=t,I=WBe(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),N=c||"default",[k,z]=D.useMemo(()=>{if(l&&u)return[l,u];const Ge=jBe[N]||[];return f?["danger",Ge[1]]:Ge},[c,l,u,f]),V=k==="danger"?"dangerous":k,{getPrefixCls:F,direction:$,button:W}=D.useContext(xn),H=(r=R!=null?R:W==null?void 0:W.autoInsertSpace)!==null&&r!==void 0?r:!0,X=F("btn",s),[te,Y,ee]=OBe(X),se=D.useContext(lT),ne=v!=null?v:se,le=D.useContext(yie),pe=D.useMemo(()=>$Be(o),[o]),[Se,_e]=D.useState(pe.loading),[Le,Be]=D.useState(!1),Q=D.useRef(),tt=b0(e,Q),je=D.Children.count(x)===1&&!S&&!b9(z);D.useEffect(()=>{let Ge=null;pe.delay>0?Ge=setTimeout(()=>{Ge=null,_e(!0)},pe.delay):_e(pe.loading);function lt(){Ge&&(clearTimeout(Ge),Ge=null)}return lt},[pe]),D.useEffect(()=>{if(!Q.current||!H)return;const Ge=Q.current.textContent||"";je&&wP(Ge)?Le||Be(!0):Le&&Be(!1)}),D.useEffect(()=>{L&&Q.current&&Q.current.focus()},[]);const Ye=bt.useCallback(Ge=>{var lt;if(Se||ne){Ge.preventDefault();return}(lt=t.onClick)===null||lt===void 0||lt.call(t,Ge)},[t.onClick,Se,ne]),{compactSize:$e,compactItemClassnames:wt}=DFe(X,$),We={large:"lg",small:"sm",middle:void 0},q=LFe(Ge=>{var lt,ht;return(ht=(lt=d!=null?d:$e)!==null&&lt!==void 0?lt:le)!==null&&ht!==void 0?ht:Ge}),j=q&&(n=We[q])!==null&&n!==void 0?n:"",ie=Se?"loading":S,Ce=ql(I,["navigate"]),ye=st(X,Y,ee,{[`${X}-${h}`]:h!=="default"&&h,[`${X}-${N}`]:N,[`${X}-dangerous`]:f,[`${X}-color-${V}`]:V,[`${X}-variant-${z}`]:z,[`${X}-${j}`]:j,[`${X}-icon-only`]:!x&&x!==0&&!!ie,[`${X}-background-ghost`]:T&&!b9(z),[`${X}-loading`]:Se,[`${X}-two-chinese-chars`]:Le&&H&&!Se,[`${X}-block`]:w,[`${X}-rtl`]:$==="rtl",[`${X}-icon-end`]:b==="end"},wt,g,m,W==null?void 0:W.className),me=Object.assign(Object.assign({},W==null?void 0:W.style),A),qe=st(M==null?void 0:M.icon,(i=W==null?void 0:W.classNames)===null||i===void 0?void 0:i.icon),Ie=Object.assign(Object.assign({},(p==null?void 0:p.icon)||{}),((a=W==null?void 0:W.styles)===null||a===void 0?void 0:a.icon)||{}),He=S&&!Se?bt.createElement(_ie,{prefixCls:X,className:qe,style:Ie},S):bt.createElement(BFe,{existIcon:!!S,prefixCls:X,loading:Se}),Et=x||x===0?FFe(x,je&&H):null;if(Ce.href!==void 0)return te(bt.createElement("a",Object.assign({},Ce,{className:st(ye,{[`${X}-disabled`]:ne}),href:ne?void 0:Ce.href,style:me,onClick:Ye,ref:tt,tabIndex:ne?-1:0}),He,Et));let Fe=bt.createElement("button",Object.assign({},I,{type:E,className:ye,style:me,onClick:Ye,disabled:ne,ref:tt}),He,Et,wt&&bt.createElement(GBe,{prefixCls:X}));return b9(z)||(Fe=bt.createElement(PFe,{component:"Button",disabled:Se},Fe)),te(Fe)}),_7=XBe;_7.Group=OFe;_7.__ANT_BUTTON=!0;var wie=D.createContext(null),Hj=[];function KBe(t,e){var r=D.useState(function(){if(!ys())return null;var p=document.createElement("div");return p}),n=rt(r,1),i=n[0],a=D.useRef(!1),o=D.useContext(wie),s=D.useState(Hj),l=rt(s,2),u=l[0],c=l[1],f=o||(a.current?void 0:function(p){c(function(v){var g=[p].concat(Yt(v));return g})});function h(){i.parentElement||document.body.appendChild(i),a.current=!0}function d(){var p;(p=i.parentElement)===null||p===void 0||p.removeChild(i),a.current=!1}return va(function(){return t?o?o(h):h():d(),d},[t]),va(function(){u.length&&(u.forEach(function(p){return p()}),c(Hj))},[u]),[i,f]}function YBe(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=e;var n=r.style;n.position="absolute",n.left="0",n.top="0",n.width="100px",n.height="100px",n.overflow="scroll";var i,a;if(t){var o=getComputedStyle(t);n.scrollbarColor=o.scrollbarColor,n.scrollbarWidth=o.scrollbarWidth;var s=getComputedStyle(t,"::-webkit-scrollbar"),l=parseInt(s.width,10),u=parseInt(s.height,10);try{var c=l?"width: ".concat(s.width,";"):"",f=u?"height: ".concat(s.height,";"):"";Dc(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(c,`
`).concat(f,`
}`),e)}catch(p){console.error(p),i=l,a=u}}document.body.appendChild(r);var h=t&&i&&!isNaN(i)?i:r.offsetWidth-r.clientWidth,d=t&&a&&!isNaN(a)?a:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),W_(e),{width:h,height:d}}function qBe(t){return typeof document=="undefined"||!t||!(t instanceof Element)?{width:0,height:0}:YBe(t)}function ZBe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var JBe="rc-util-locker-".concat(Date.now()),Gj=0;function QBe(t){var e=!!t,r=D.useState(function(){return Gj+=1,"".concat(JBe,"_").concat(Gj)}),n=rt(r,1),i=n[0];va(function(){if(e){var a=qBe(document.body).width,o=ZBe();Dc(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(a,"px);"):"",`
}`),i)}else W_(i);return function(){W_(i)}},[e,i])}var eze=!1;function tze(t){return eze}var Wj=function(e){return e===!1?!1:!ys()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},x7=D.forwardRef(function(t,e){var r=t.open,n=t.autoLock,i=t.getContainer;t.debug;var a=t.autoDestroy,o=a===void 0?!0:a,s=t.children,l=D.useState(r),u=rt(l,2),c=u[0],f=u[1],h=c||r;D.useEffect(function(){(o||r)&&f(r)},[r,o]);var d=D.useState(function(){return Wj(i)}),p=rt(d,2),v=p[0],g=p[1];D.useEffect(function(){var L=Wj(i);g(L!=null?L:null)});var m=KBe(h&&!v),x=rt(m,2),S=x[0],b=x[1],T=v!=null?v:S;QBe(n&&r&&ys()&&(T===S||T===document.body));var w=null;if(s&&k2(s)&&e){var E=s;w=E.ref}var M=b0(w,e);if(!h||!ys()||v===void 0)return null;var A=T===!1||tze(),R=s;return e&&(R=D.cloneElement(s,{ref:M})),D.createElement(wie.Provider,{value:b},A?R:l2.createPortal(R,T))});function rze(){var t=we({},bT);return t.useId}var $j=0,jj=rze();const nze=jj?function(e){var r=jj();return e||r}:function(e){var r=D.useState("ssr-id"),n=rt(r,2),i=n[0],a=n[1];return D.useEffect(function(){var o=$j;$j+=1,a("rc_unique_".concat(o))},[]),e||i};var sp="RC_FORM_INTERNAL_HOOKS",Ln=function(){Ka(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Vm=D.createContext({getFieldValue:Ln,getFieldsValue:Ln,getFieldError:Ln,getFieldWarning:Ln,getFieldsError:Ln,isFieldsTouched:Ln,isFieldTouched:Ln,isFieldValidating:Ln,isFieldsValidating:Ln,resetFields:Ln,setFields:Ln,setFieldValue:Ln,setFieldsValue:Ln,validateFields:Ln,submit:Ln,getInternalHooks:function(){return Ln(),{dispatch:Ln,initEntityValue:Ln,registerField:Ln,useSubscribe:Ln,setInitialValues:Ln,destroyForm:Ln,setCallbacks:Ln,registerWatch:Ln,getFields:Ln,setValidateMessages:Ln,setPreserve:Ln,getInitialValue:Ln}}}),hT=D.createContext(null);function TP(t){return t==null?[]:Array.isArray(t)?t:[t]}function ize(t){return t&&!!t._init}function CP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var EP=CP();function aze(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch(e){return typeof t=="function"}}function oze(t,e,r){if(t7())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&j_(i,r.prototype),i}function AP(t){var e=typeof Map=="function"?new Map:void 0;return AP=function(n){if(n===null||!aze(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return oze(n,arguments,X_(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),j_(i,n)},AP(t)}var sze=/%[sdj%]/g,lze=function(){};function MP(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function gs(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=0,a=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var o=t.replace(sze,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(l){return"[Circular]"}break;default:return s}});return o}return t}function uze(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function ia(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||uze(e)&&typeof t=="string"&&!t)}function cze(t,e,r){var n=[],i=0,a=t.length;function o(s){n.push.apply(n,Yt(s||[])),i++,i===a&&r(n)}t.forEach(function(s){e(s,o)})}function Xj(t,e,r){var n=0,i=t.length;function a(o){if(o&&o.length){r(o);return}var s=n;n=n+1,s<i?e(t[s],a):r([])}a([])}function fze(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,Yt(t[r]||[]))}),e}var Kj=function(t){Jc(r,t);var e=Qc(r);function r(n,i){var a;return oa(this,r),a=e.call(this,"Async Validation Error"),xe(jr(a),"errors",void 0),xe(jr(a),"fields",void 0),a.errors=n,a.fields=i,a}return sa(r)}(AP(Error));function hze(t,e,r,n,i){if(e.first){var a=new Promise(function(h,d){var p=function(m){return n(m),m.length?d(new Kj(m,MP(m))):h(i)},v=fze(t);Xj(v,r,p)});return a.catch(function(h){return h}),a}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),l=s.length,u=0,c=[],f=new Promise(function(h,d){var p=function(g){if(c.push.apply(c,g),u++,u===l)return n(c),c.length?d(new Kj(c,MP(c))):h(i)};s.length||(n(c),h(i)),s.forEach(function(v){var g=t[v];o.indexOf(v)!==-1?Xj(g,r,p):cze(g,r,p)})});return f.catch(function(h){return h}),f}function dze(t){return!!(t&&t.message!==void 0)}function pze(t,e){for(var r=t,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function Yj(t,e){return function(r){var n;return t.fullFields?n=pze(e,t.fullFields):n=e[r.field||t.fullField],dze(r)?(r.field=r.field||t.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||t.fullField}}}function qj(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];wr(n)==="object"&&wr(t[r])==="object"?t[r]=we(we({},t[r]),n):t[r]=n}}return t}var gg="enum",vze=function(e,r,n,i,a){e[gg]=Array.isArray(e[gg])?e[gg]:[],e[gg].indexOf(r)===-1&&i.push(gs(a.messages[gg],e.fullField,e[gg].join(", ")))},gze=function(e,r,n,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||i.push(gs(a.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(r)||i.push(gs(a.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},mze=function(e,r,n,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=r,f=null,h=typeof r=="number",d=typeof r=="string",p=Array.isArray(r);if(h?f="number":d?f="string":p&&(f="array"),!f)return!1;p&&(c=r.length),d&&(c=r.replace(u,"_").length),o?c!==e.len&&i.push(gs(a.messages[f].len,e.fullField,e.len)):s&&!l&&c<e.min?i.push(gs(a.messages[f].min,e.fullField,e.min)):l&&!s&&c>e.max?i.push(gs(a.messages[f].max,e.fullField,e.max)):s&&l&&(c<e.min||c>e.max)&&i.push(gs(a.messages[f].range,e.fullField,e.min,e.max))},Tie=function(e,r,n,i,a,o){e.required&&(!n.hasOwnProperty(e.field)||ia(r,o||e.type))&&i.push(gs(a.messages.required,e.fullField))},qb;const yze=function(){if(qb)return qb;var t="[a-fA-F\\d:]",e=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(r,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(r,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(r,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(r,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(r,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(r,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(r,"|(?::").concat(n,"){1,7}|:))")],a="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(i.join("|"),")").concat(a),s=new RegExp("(?:^".concat(r,"$)|(?:^").concat(o,"$)")),l=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(o,"$")),c=function(w){return w&&w.exact?s:new RegExp("(?:".concat(e(w)).concat(r).concat(e(w),")|(?:").concat(e(w)).concat(o).concat(e(w),")"),"g")};c.v4=function(T){return T&&T.exact?l:new RegExp("".concat(e(T)).concat(r).concat(e(T)),"g")},c.v6=function(T){return T&&T.exact?u:new RegExp("".concat(e(T)).concat(o).concat(e(T)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",d=c.v4().source,p=c.v6().source,v="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",g="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",S='(?:[/?#][^\\s"]*)?',b="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(d,"|").concat(p,"|").concat(v).concat(g).concat(m,")").concat(x).concat(S);return qb=new RegExp("(?:^".concat(b,"$)"),"i"),qb};var Zj={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},T1={integer:function(e){return T1.number(e)&&parseInt(e,10)===e},float:function(e){return T1.number(e)&&!T1.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(r){return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return wr(e)==="object"&&!T1.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Zj.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(yze())},hex:function(e){return typeof e=="string"&&!!e.match(Zj.hex)}},_ze=function(e,r,n,i,a){if(e.required&&r===void 0){Tie(e,r,n,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?T1[s](r)||i.push(gs(a.messages.types[s],e.fullField,e.type)):s&&wr(r)!==e.type&&i.push(gs(a.messages.types[s],e.fullField,e.type))},xze=function(e,r,n,i,a){(/^\s+$/.test(r)||r==="")&&i.push(gs(a.messages.whitespace,e.fullField))};const on={required:Tie,whitespace:xze,type:_ze,range:mze,enum:vze,pattern:gze};var Sze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a)}n(o)},bze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(r==null&&!e.required)return n();on.required(e,r,i,o,a,"array"),r!=null&&(on.type(e,r,i,o,a),on.range(e,r,i,o,a))}n(o)},wze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&on.type(e,r,i,o,a)}n(o)},Tze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r,"date")&&!e.required)return n();if(on.required(e,r,i,o,a),!ia(r,"date")){var l;r instanceof Date?l=r:l=new Date(r),on.type(e,l,i,o,a),l&&on.range(e,l.getTime(),i,o,a)}}n(o)},Cze="enum",Eze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&on[Cze](e,r,i,o,a)}n(o)},Aze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&(on.type(e,r,i,o,a),on.range(e,r,i,o,a))}n(o)},Mze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&(on.type(e,r,i,o,a),on.range(e,r,i,o,a))}n(o)},Rze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&on.type(e,r,i,o,a)}n(o)},Pze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(r===""&&(r=void 0),ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&(on.type(e,r,i,o,a),on.range(e,r,i,o,a))}n(o)},Lze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),r!==void 0&&on.type(e,r,i,o,a)}n(o)},Dze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r,"string")&&!e.required)return n();on.required(e,r,i,o,a),ia(r,"string")||on.pattern(e,r,i,o,a)}n(o)},Ize=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r)&&!e.required)return n();on.required(e,r,i,o,a),ia(r)||on.type(e,r,i,o,a)}n(o)},Nze=function(e,r,n,i,a){var o=[],s=Array.isArray(r)?"array":wr(r);on.required(e,r,i,o,a,s),n(o)},Oze=function(e,r,n,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(ia(r,"string")&&!e.required)return n();on.required(e,r,i,o,a,"string"),ia(r,"string")||(on.type(e,r,i,o,a),on.range(e,r,i,o,a),on.pattern(e,r,i,o,a),e.whitespace===!0&&on.whitespace(e,r,i,o,a))}n(o)},A9=function(e,r,n,i,a){var o=e.type,s=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(ia(r,o)&&!e.required)return n();on.required(e,r,i,s,a,o),ia(r,o)||on.type(e,r,i,s,a)}n(s)};const Y1={string:Oze,method:Rze,number:Pze,boolean:wze,regexp:Ize,integer:Mze,float:Aze,array:bze,object:Lze,enum:Eze,pattern:Dze,date:Tze,url:A9,hex:A9,email:A9,required:Nze,any:Sze};var U2=function(){function t(e){oa(this,t),xe(this,"rules",null),xe(this,"_messages",EP),this.define(e)}return sa(t,[{key:"define",value:function(r){var n=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(wr(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var a=r[i];n.rules[i]=Array.isArray(a)?a:[a]})}},{key:"messages",value:function(r){return r&&(this._messages=qj(CP(),r)),this._messages}},{key:"validate",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=r,s=i,l=a;if(typeof s=="function"&&(l=s,s={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,o),Promise.resolve(o);function u(p){var v=[],g={};function m(S){if(Array.isArray(S)){var b;v=(b=v).concat.apply(b,Yt(S))}else v.push(S)}for(var x=0;x<p.length;x++)m(p[x]);v.length?(g=MP(v),l(v,g)):l(null,o)}if(s.messages){var c=this.messages();c===EP&&(c=CP()),qj(c,s.messages),s.messages=c}else s.messages=this.messages();var f={},h=s.keys||Object.keys(this.rules);h.forEach(function(p){var v=n.rules[p],g=o[p];v.forEach(function(m){var x=m;typeof x.transform=="function"&&(o===r&&(o=we({},o)),g=o[p]=x.transform(g),g!=null&&(x.type=x.type||(Array.isArray(g)?"array":wr(g)))),typeof x=="function"?x={validator:x}:x=we({},x),x.validator=n.getValidationMethod(x),x.validator&&(x.field=p,x.fullField=x.fullField||p,x.type=n.getType(x),f[p]=f[p]||[],f[p].push({rule:x,value:g,source:o,field:p}))})});var d={};return hze(f,s,function(p,v){var g=p.rule,m=(g.type==="object"||g.type==="array")&&(wr(g.fields)==="object"||wr(g.defaultField)==="object");m=m&&(g.required||!g.required&&p.value),g.field=p.field;function x(E,M){return we(we({},M),{},{fullField:"".concat(g.fullField,".").concat(E),fullFields:g.fullFields?[].concat(Yt(g.fullFields),[E]):[E]})}function S(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=Array.isArray(E)?E:[E];!s.suppressWarning&&M.length&&t.warning("async-validator:",M),M.length&&g.message!==void 0&&(M=[].concat(g.message));var A=M.map(Yj(g,o));if(s.first&&A.length)return d[g.field]=1,v(A);if(!m)v(A);else{if(g.required&&!p.value)return g.message!==void 0?A=[].concat(g.message).map(Yj(g,o)):s.error&&(A=[s.error(g,gs(s.messages.required,g.field))]),v(A);var R={};g.defaultField&&Object.keys(p.value).map(function(N){R[N]=g.defaultField}),R=we(we({},R),p.rule.fields);var L={};Object.keys(R).forEach(function(N){var k=R[N],z=Array.isArray(k)?k:[k];L[N]=z.map(x.bind(null,N))});var I=new t(L);I.messages(s.messages),p.rule.options&&(p.rule.options.messages=s.messages,p.rule.options.error=s.error),I.validate(p.value,p.rule.options||s,function(N){var k=[];A&&A.length&&k.push.apply(k,Yt(A)),N&&N.length&&k.push.apply(k,Yt(N)),v(k.length?k:null)})}}var b;if(g.asyncValidator)b=g.asyncValidator(g,p.value,S,p.source,s);else if(g.validator){try{b=g.validator(g,p.value,S,p.source,s)}catch(E){var T,w;(T=(w=console).error)===null||T===void 0||T.call(w,E),s.suppressValidatorError||setTimeout(function(){throw E},0),S(E.message)}b===!0?S():b===!1?S(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||"".concat(g.fullField||g.field," fails")):b instanceof Array?S(b):b instanceof Error&&S(b.message)}b&&b.then&&b.then(function(){return S()},function(E){return S(E)})},function(p){u(p)},o)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Y1.hasOwnProperty(r.type))throw new Error(gs("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var n=Object.keys(r),i=n.indexOf("message");return i!==-1&&n.splice(i,1),n.length===1&&n[0]==="required"?Y1.required:Y1[this.getType(r)]||void 0}}]),t}();xe(U2,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Y1[e]=r});xe(U2,"warning",lze);xe(U2,"messages",EP);xe(U2,"validators",Y1);var cs="'${name}' is not a valid ${type}",Cie={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:cs,method:cs,array:cs,object:cs,number:cs,date:cs,boolean:cs,integer:cs,float:cs,regexp:cs,email:cs,url:cs,hex:cs},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Jj=U2;function kze(t,e){return t.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var n=r.slice(2,-1);return e[n]})}var Qj="CODE_LOGIC_ERROR";function RP(t,e,r,n,i){return PP.apply(this,arguments)}function PP(){return PP=Jp(Mo().mark(function t(e,r,n,i,a){var o,s,l,u,c,f,h,d,p;return Mo().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=we({},n),delete o.ruleIndex,Jj.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(m){return console.error(m),Promise.reject(Qj)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),u=new Jj(xe({},e,[o])),c=Bg(Cie,i.validateMessages),u.messages(c),f=[],g.prev=10,g.next=13,Promise.resolve(u.validate(xe({},e,r),we({},i)));case 13:g.next=18;break;case 15:g.prev=15,g.t0=g.catch(10),g.t0.errors&&(f=g.t0.errors.map(function(m,x){var S=m.message,b=S===Qj?c.default:S;return D.isValidElement(b)?D.cloneElement(b,{key:"error_".concat(x)}):b}));case 18:if(!(!f.length&&l)){g.next=23;break}return g.next=21,Promise.all(r.map(function(m,x){return RP("".concat(e,".").concat(x),m,l,i,a)}));case 21:return h=g.sent,g.abrupt("return",h.reduce(function(m,x){return[].concat(Yt(m),Yt(x))},[]));case 23:return d=we(we({},n),{},{name:e,enum:(n.enum||[]).join(", ")},a),p=f.map(function(m){return typeof m=="string"?kze(m,d):m}),g.abrupt("return",p);case 26:case"end":return g.stop()}},t,null,[[10,15]])})),PP.apply(this,arguments)}function Fze(t,e,r,n,i,a){var o=t.join("."),s=r.map(function(c,f){var h=c.validator,d=we(we({},c),{},{ruleIndex:f});return h&&(d.validator=function(p,v,g){var m=!1,x=function(){for(var T=arguments.length,w=new Array(T),E=0;E<T;E++)w[E]=arguments[E];Promise.resolve().then(function(){Ka(!m,"Your validator function has already return a promise. `callback` will be ignored."),m||g.apply(void 0,w)})},S=h(p,v,x);m=S&&typeof S.then=="function"&&typeof S.catch=="function",Ka(m,"`callback` is deprecated. Please return a promise instead."),m&&S.then(function(){g()}).catch(function(b){g(b||" ")})}),d}).sort(function(c,f){var h=c.warningOnly,d=c.ruleIndex,p=f.warningOnly,v=f.ruleIndex;return!!h==!!p?d-v:h?1:-1}),l;if(i===!0)l=new Promise(function(){var c=Jp(Mo().mark(function f(h,d){var p,v,g;return Mo().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:p=0;case 1:if(!(p<s.length)){x.next=12;break}return v=s[p],x.next=5,RP(o,e,v,n,a);case 5:if(g=x.sent,!g.length){x.next=9;break}return d([{errors:g,rule:v}]),x.abrupt("return");case 9:p+=1,x.next=1;break;case 12:h([]);case 13:case"end":return x.stop()}},f)}));return function(f,h){return c.apply(this,arguments)}}());else{var u=s.map(function(c){return RP(o,e,c,n,a).then(function(f){return{errors:f,rule:c}})});l=(i?zze(u):Bze(u)).then(function(c){return Promise.reject(c)})}return l.catch(function(c){return c}),l}function Bze(t){return LP.apply(this,arguments)}function LP(){return LP=Jp(Mo().mark(function t(e){return Mo().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Promise.all(e).then(function(i){var a,o=(a=[]).concat.apply(a,Yt(i));return o}));case 1:case"end":return n.stop()}},t)})),LP.apply(this,arguments)}function zze(t){return DP.apply(this,arguments)}function DP(){return DP=Jp(Mo().mark(function t(e){var r;return Mo().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=0,i.abrupt("return",new Promise(function(a){e.forEach(function(o){o.then(function(s){s.errors.length&&a([s]),r+=1,r===e.length&&a([])})})}));case 2:case"end":return i.stop()}},t)})),DP.apply(this,arguments)}function bi(t){return TP(t)}function eX(t,e){var r={};return e.forEach(function(n){var i=Cu(t,n);r=Rl(r,n,i)}),r}function em(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(n){return Eie(e,n,r)})}function Eie(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!e||!r&&t.length!==e.length?!1:e.every(function(n,i){return t[i]===n})}function Uze(t,e){if(t===e)return!0;if(!t&&e||t&&!e||!t||!e||wr(t)!=="object"||wr(e)!=="object")return!1;var r=Object.keys(t),n=Object.keys(e),i=new Set([].concat(r,n));return Yt(i).every(function(a){var o=t[a],s=e[a];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function Vze(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&wr(e.target)==="object"&&t in e.target?e.target[t]:e}function tX(t,e,r){var n=t.length;if(e<0||e>=n||r<0||r>=n)return t;var i=t[e],a=e-r;return a>0?[].concat(Yt(t.slice(0,r)),[i],Yt(t.slice(r,e)),Yt(t.slice(e+1,n))):a<0?[].concat(Yt(t.slice(0,e)),Yt(t.slice(e+1,r+1)),[i],Yt(t.slice(r+1,n))):t}var Hze=["name"],Os=[];function M9(t,e,r,n,i,a){return typeof t=="function"?t(e,r,"source"in a?{source:a.source}:{}):n!==i}var S7=function(t){Jc(r,t);var e=Qc(r);function r(n){var i;if(oa(this,r),i=e.call(this,n),xe(jr(i),"state",{resetCount:0}),xe(jr(i),"cancelRegisterFunc",null),xe(jr(i),"mounted",!1),xe(jr(i),"touched",!1),xe(jr(i),"dirty",!1),xe(jr(i),"validatePromise",void 0),xe(jr(i),"prevValidating",void 0),xe(jr(i),"errors",Os),xe(jr(i),"warnings",Os),xe(jr(i),"cancelRegister",function(){var l=i.props,u=l.preserve,c=l.isListField,f=l.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(c,u,bi(f)),i.cancelRegisterFunc=null}),xe(jr(i),"getNamePath",function(){var l=i.props,u=l.name,c=l.fieldContext,f=c.prefixName,h=f===void 0?[]:f;return u!==void 0?[].concat(Yt(h),Yt(u)):[]}),xe(jr(i),"getRules",function(){var l=i.props,u=l.rules,c=u===void 0?[]:u,f=l.fieldContext;return c.map(function(h){return typeof h=="function"?h(f):h})}),xe(jr(i),"refresh",function(){i.mounted&&i.setState(function(l){var u=l.resetCount;return{resetCount:u+1}})}),xe(jr(i),"metaCache",null),xe(jr(i),"triggerMetaEvent",function(l){var u=i.props.onMetaChange;if(u){var c=we(we({},i.getMeta()),{},{destroy:l});Y_(i.metaCache,c)||u(c),i.metaCache=c}else i.metaCache=null}),xe(jr(i),"onStoreChange",function(l,u,c){var f=i.props,h=f.shouldUpdate,d=f.dependencies,p=d===void 0?[]:d,v=f.onReset,g=c.store,m=i.getNamePath(),x=i.getValue(l),S=i.getValue(g),b=u&&em(u,m);switch(c.type==="valueUpdate"&&c.source==="external"&&!Y_(x,S)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=Os,i.warnings=Os,i.triggerMetaEvent()),c.type){case"reset":if(!u||b){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=Os,i.warnings=Os,i.triggerMetaEvent(),v==null||v(),i.refresh();return}break;case"remove":{if(h&&M9(h,l,g,x,S,c)){i.reRender();return}break}case"setField":{var T=c.data;if(b){"touched"in T&&(i.touched=T.touched),"validating"in T&&!("originRCField"in T)&&(i.validatePromise=T.validating?Promise.resolve([]):null),"errors"in T&&(i.errors=T.errors||Os),"warnings"in T&&(i.warnings=T.warnings||Os),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in T&&em(u,m,!0)){i.reRender();return}if(h&&!m.length&&M9(h,l,g,x,S,c)){i.reRender();return}break}case"dependenciesUpdate":{var w=p.map(bi);if(w.some(function(E){return em(c.relatedFields,E)})){i.reRender();return}break}default:if(b||(!p.length||m.length||h)&&M9(h,l,g,x,S,c)){i.reRender();return}break}h===!0&&i.reRender()}),xe(jr(i),"validateRules",function(l){var u=i.getNamePath(),c=i.getValue(),f=l||{},h=f.triggerName,d=f.validateOnly,p=d===void 0?!1:d,v=Promise.resolve().then(Jp(Mo().mark(function g(){var m,x,S,b,T,w,E;return Mo().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(i.mounted){A.next=2;break}return A.abrupt("return",[]);case 2:if(m=i.props,x=m.validateFirst,S=x===void 0?!1:x,b=m.messageVariables,T=m.validateDebounce,w=i.getRules(),h&&(w=w.filter(function(R){return R}).filter(function(R){var L=R.validateTrigger;if(!L)return!0;var I=TP(L);return I.includes(h)})),!(T&&h)){A.next=10;break}return A.next=8,new Promise(function(R){setTimeout(R,T)});case 8:if(i.validatePromise===v){A.next=10;break}return A.abrupt("return",[]);case 10:return E=Fze(u,c,w,l,S,b),E.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Os;if(i.validatePromise===v){var L;i.validatePromise=null;var I=[],N=[];(L=R.forEach)===null||L===void 0||L.call(R,function(k){var z=k.rule.warningOnly,B=k.errors,V=B===void 0?Os:B;z?N.push.apply(N,Yt(V)):I.push.apply(I,Yt(V))}),i.errors=I,i.warnings=N,i.triggerMetaEvent(),i.reRender()}}),A.abrupt("return",E);case 13:case"end":return A.stop()}},g)})));return p||(i.validatePromise=v,i.dirty=!0,i.errors=Os,i.warnings=Os,i.triggerMetaEvent(),i.reRender()),v}),xe(jr(i),"isFieldValidating",function(){return!!i.validatePromise}),xe(jr(i),"isFieldTouched",function(){return i.touched}),xe(jr(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var l=i.props.fieldContext,u=l.getInternalHooks(sp),c=u.getInitialValue;return c(i.getNamePath())!==void 0}),xe(jr(i),"getErrors",function(){return i.errors}),xe(jr(i),"getWarnings",function(){return i.warnings}),xe(jr(i),"isListField",function(){return i.props.isListField}),xe(jr(i),"isList",function(){return i.props.isList}),xe(jr(i),"isPreserve",function(){return i.props.preserve}),xe(jr(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var l={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return l}),xe(jr(i),"getOnlyChild",function(l){if(typeof l=="function"){var u=i.getMeta();return we(we({},i.getOnlyChild(l(i.getControlled(),u,i.props.fieldContext))),{},{isFunction:!0})}var c=Nm(l);return c.length!==1||!D.isValidElement(c[0])?{child:c,isFunction:!1}:{child:c[0],isFunction:!1}}),xe(jr(i),"getValue",function(l){var u=i.props.fieldContext.getFieldsValue,c=i.getNamePath();return Cu(l||u(!0),c)}),xe(jr(i),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=i.props,c=u.name,f=u.trigger,h=u.validateTrigger,d=u.getValueFromEvent,p=u.normalize,v=u.valuePropName,g=u.getValueProps,m=u.fieldContext,x=h!==void 0?h:m.validateTrigger,S=i.getNamePath(),b=m.getInternalHooks,T=m.getFieldsValue,w=b(sp),E=w.dispatch,M=i.getValue(),A=g||function(k){return xe({},v,k)},R=l[f],L=c!==void 0?A(M):{},I=we(we({},l),L);I[f]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var k,z=arguments.length,B=new Array(z),V=0;V<z;V++)B[V]=arguments[V];d?k=d.apply(void 0,B):k=Vze.apply(void 0,[v].concat(B)),p&&(k=p(k,M,T(!0))),k!==M&&E({type:"updateValue",namePath:S,value:k}),R&&R.apply(void 0,B)};var N=TP(x||[]);return N.forEach(function(k){var z=I[k];I[k]=function(){z&&z.apply(void 0,arguments);var B=i.props.rules;B&&B.length&&E({type:"validateField",namePath:S,triggerName:k})}}),I}),n.fieldContext){var a=n.fieldContext.getInternalHooks,o=a(sp),s=o.initEntityValue;s(jr(i))}return i}return sa(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.shouldUpdate,o=i.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(sp),u=l.registerField;this.cancelRegisterFunc=u(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,a=this.props.children,o=this.getOnlyChild(a),s=o.child,l=o.isFunction,u;return l?u=s:D.isValidElement(s)?u=D.cloneElement(s,this.getControlled(s.props)):(Ka(!s,"`children` of Field is not validate ReactElement."),u=s),D.createElement(D.Fragment,{key:i},u)}}]),r}(D.Component);xe(S7,"contextType",Vm);xe(S7,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Aie(t){var e,r=t.name,n=Pn(t,Hze),i=D.useContext(Vm),a=D.useContext(hT),o=r!==void 0?bi(r):void 0,s=(e=n.isListField)!==null&&e!==void 0?e:!!a,l="keep";return s||(l="_".concat((o||[]).join("_"))),D.createElement(S7,mr({key:l,name:o,isListField:s},n,{fieldContext:i}))}function Gze(t){var e=t.name,r=t.initialValue,n=t.children,i=t.rules,a=t.validateTrigger,o=t.isListField,s=D.useContext(Vm),l=D.useContext(hT),u=D.useRef({keys:[],id:0}),c=u.current,f=D.useMemo(function(){var v=bi(s.prefixName)||[];return[].concat(Yt(v),Yt(bi(e)))},[s.prefixName,e]),h=D.useMemo(function(){return we(we({},s),{},{prefixName:f})},[s,f]),d=D.useMemo(function(){return{getKey:function(g){var m=f.length,x=g[m];return[c.keys[x],g.slice(m+1)]}}},[f]);if(typeof n!="function")return Ka(!1,"Form.List only accepts function as children."),null;var p=function(g,m,x){var S=x.source;return S==="internal"?!1:g!==m};return D.createElement(hT.Provider,{value:d},D.createElement(Vm.Provider,{value:h},D.createElement(Aie,{name:[],shouldUpdate:p,rules:i,validateTrigger:a,initialValue:r,isList:!0,isListField:o!=null?o:!!l},function(v,g){var m=v.value,x=m===void 0?[]:m,S=v.onChange,b=s.getFieldValue,T=function(){var A=b(f||[]);return A||[]},w={add:function(A,R){var L=T();R>=0&&R<=L.length?(c.keys=[].concat(Yt(c.keys.slice(0,R)),[c.id],Yt(c.keys.slice(R))),S([].concat(Yt(L.slice(0,R)),[A],Yt(L.slice(R))))):(c.keys=[].concat(Yt(c.keys),[c.id]),S([].concat(Yt(L),[A]))),c.id+=1},remove:function(A){var R=T(),L=new Set(Array.isArray(A)?A:[A]);L.size<=0||(c.keys=c.keys.filter(function(I,N){return!L.has(N)}),S(R.filter(function(I,N){return!L.has(N)})))},move:function(A,R){if(A!==R){var L=T();A<0||A>=L.length||R<0||R>=L.length||(c.keys=tX(c.keys,A,R),S(tX(L,A,R)))}}},E=x||[];return Array.isArray(E)||(E=[]),n(E.map(function(M,A){var R=c.keys[A];return R===void 0&&(c.keys[A]=c.id,R=c.keys[A],c.id+=1),{name:A,key:R,isListField:!0}}),w,g)})))}function Wze(t){var e=!1,r=t.length,n=[];return t.length?new Promise(function(i,a){t.forEach(function(o,s){o.catch(function(l){return e=!0,l}).then(function(l){r-=1,n[s]=l,!(r>0)&&(e&&a(n),i(n))})})}):Promise.resolve([])}var Mie="__@field_split__";function R9(t){return t.map(function(e){return"".concat(wr(e),":").concat(e)}).join(Mie)}var mg=function(){function t(){oa(this,t),xe(this,"kvs",new Map)}return sa(t,[{key:"set",value:function(r,n){this.kvs.set(R9(r),n)}},{key:"get",value:function(r){return this.kvs.get(R9(r))}},{key:"update",value:function(r,n){var i=this.get(r),a=n(i);a?this.set(r,a):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(R9(r))}},{key:"map",value:function(r){return Yt(this.kvs.entries()).map(function(n){var i=rt(n,2),a=i[0],o=i[1],s=a.split(Mie);return r({key:s.map(function(l){var u=l.match(/^([^:]*):(.*)$/),c=rt(u,3),f=c[1],h=c[2];return f==="number"?Number(h):h}),value:o})})}},{key:"toJSON",value:function(){var r={};return this.map(function(n){var i=n.key,a=n.value;return r[i.join(".")]=a,null}),r}}]),t}(),$ze=["name"],jze=sa(function t(e){var r=this;oa(this,t),xe(this,"formHooked",!1),xe(this,"forceRootUpdate",void 0),xe(this,"subscribable",!0),xe(this,"store",{}),xe(this,"fieldEntities",[]),xe(this,"initialValues",{}),xe(this,"callbacks",{}),xe(this,"validateMessages",null),xe(this,"preserve",null),xe(this,"lastValidatePromise",null),xe(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),xe(this,"getInternalHooks",function(n){return n===sp?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Ka(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),xe(this,"useSubscribe",function(n){r.subscribable=n}),xe(this,"prevWithoutPreserves",null),xe(this,"setInitialValues",function(n,i){if(r.initialValues=n||{},i){var a,o=Bg(n,r.store);(a=r.prevWithoutPreserves)===null||a===void 0||a.map(function(s){var l=s.key;o=Rl(o,l,Cu(n,l))}),r.prevWithoutPreserves=null,r.updateStore(o)}}),xe(this,"destroyForm",function(n){if(n)r.updateStore({});else{var i=new mg;r.getFieldEntities(!0).forEach(function(a){r.isMergedPreserve(a.isPreserve())||i.set(a.getNamePath(),!0)}),r.prevWithoutPreserves=i}}),xe(this,"getInitialValue",function(n){var i=Cu(r.initialValues,n);return n.length?Bg(i):i}),xe(this,"setCallbacks",function(n){r.callbacks=n}),xe(this,"setValidateMessages",function(n){r.validateMessages=n}),xe(this,"setPreserve",function(n){r.preserve=n}),xe(this,"watchList",[]),xe(this,"registerWatch",function(n){return r.watchList.push(n),function(){r.watchList=r.watchList.filter(function(i){return i!==n})}}),xe(this,"notifyWatch",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var i=r.getFieldsValue(),a=r.getFieldsValue(!0);r.watchList.forEach(function(o){o(i,a,n)})}}),xe(this,"timeoutId",null),xe(this,"warningUnhooked",function(){}),xe(this,"updateStore",function(n){r.store=n}),xe(this,"getFieldEntities",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return n?r.fieldEntities.filter(function(i){return i.getNamePath().length}):r.fieldEntities}),xe(this,"getFieldsMap",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new mg;return r.getFieldEntities(n).forEach(function(a){var o=a.getNamePath();i.set(o,a)}),i}),xe(this,"getFieldEntitiesForNamePathList",function(n){if(!n)return r.getFieldEntities(!0);var i=r.getFieldsMap(!0);return n.map(function(a){var o=bi(a);return i.get(o)||{INVALIDATE_NAME_PATH:bi(a)}})}),xe(this,"getFieldsValue",function(n,i){r.warningUnhooked();var a,o,s;if(n===!0||Array.isArray(n)?(a=n,o=i):n&&wr(n)==="object"&&(s=n.strict,o=n.filter),a===!0&&!o)return r.store;var l=r.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),u=[];return l.forEach(function(c){var f,h,d="INVALIDATE_NAME_PATH"in c?c.INVALIDATE_NAME_PATH:c.getNamePath();if(s){var p,v;if((p=(v=c).isList)!==null&&p!==void 0&&p.call(v))return}else if(!a&&(f=(h=c).isListField)!==null&&f!==void 0&&f.call(h))return;if(!o)u.push(d);else{var g="getMeta"in c?c.getMeta():null;o(g)&&u.push(d)}}),eX(r.store,u.map(bi))}),xe(this,"getFieldValue",function(n){r.warningUnhooked();var i=bi(n);return Cu(r.store,i)}),xe(this,"getFieldsError",function(n){r.warningUnhooked();var i=r.getFieldEntitiesForNamePathList(n);return i.map(function(a,o){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:bi(n[o]),errors:[],warnings:[]}})}),xe(this,"getFieldError",function(n){r.warningUnhooked();var i=bi(n),a=r.getFieldsError([i])[0];return a.errors}),xe(this,"getFieldWarning",function(n){r.warningUnhooked();var i=bi(n),a=r.getFieldsError([i])[0];return a.warnings}),xe(this,"isFieldsTouched",function(){r.warningUnhooked();for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i[0],s=i[1],l,u=!1;i.length===0?l=null:i.length===1?Array.isArray(o)?(l=o.map(bi),u=!1):(l=null,u=o):(l=o.map(bi),u=s);var c=r.getFieldEntities(!0),f=function(g){return g.isFieldTouched()};if(!l)return u?c.every(function(v){return f(v)||v.isList()}):c.some(f);var h=new mg;l.forEach(function(v){h.set(v,[])}),c.forEach(function(v){var g=v.getNamePath();l.forEach(function(m){m.every(function(x,S){return g[S]===x})&&h.update(m,function(x){return[].concat(Yt(x),[v])})})});var d=function(g){return g.some(f)},p=h.map(function(v){var g=v.value;return g});return u?p.every(d):p.some(d)}),xe(this,"isFieldTouched",function(n){return r.warningUnhooked(),r.isFieldsTouched([n])}),xe(this,"isFieldsValidating",function(n){r.warningUnhooked();var i=r.getFieldEntities();if(!n)return i.some(function(o){return o.isFieldValidating()});var a=n.map(bi);return i.some(function(o){var s=o.getNamePath();return em(a,s)&&o.isFieldValidating()})}),xe(this,"isFieldValidating",function(n){return r.warningUnhooked(),r.isFieldsValidating([n])}),xe(this,"resetWithFieldInitialValue",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new mg,a=r.getFieldEntities(!0);a.forEach(function(l){var u=l.props.initialValue,c=l.getNamePath();if(u!==void 0){var f=i.get(c)||new Set;f.add({entity:l,value:u}),i.set(c,f)}});var o=function(u){u.forEach(function(c){var f=c.props.initialValue;if(f!==void 0){var h=c.getNamePath(),d=r.getInitialValue(h);if(d!==void 0)Ka(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var p=i.get(h);if(p&&p.size>1)Ka(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(p){var v=r.getFieldValue(h),g=c.isListField();!g&&(!n.skipExist||v===void 0)&&r.updateStore(Rl(r.store,h,Yt(p)[0].value))}}}})},s;n.entities?s=n.entities:n.namePathList?(s=[],n.namePathList.forEach(function(l){var u=i.get(l);if(u){var c;(c=s).push.apply(c,Yt(Yt(u).map(function(f){return f.entity})))}})):s=a,o(s)}),xe(this,"resetFields",function(n){r.warningUnhooked();var i=r.store;if(!n){r.updateStore(Bg(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(i,null,{type:"reset"}),r.notifyWatch();return}var a=n.map(bi);a.forEach(function(o){var s=r.getInitialValue(o);r.updateStore(Rl(r.store,o,s))}),r.resetWithFieldInitialValue({namePathList:a}),r.notifyObservers(i,a,{type:"reset"}),r.notifyWatch(a)}),xe(this,"setFields",function(n){r.warningUnhooked();var i=r.store,a=[];n.forEach(function(o){var s=o.name,l=Pn(o,$ze),u=bi(s);a.push(u),"value"in l&&r.updateStore(Rl(r.store,u,l.value)),r.notifyObservers(i,[u],{type:"setField",data:o})}),r.notifyWatch(a)}),xe(this,"getFields",function(){var n=r.getFieldEntities(!0),i=n.map(function(a){var o=a.getNamePath(),s=a.getMeta(),l=we(we({},s),{},{name:o,value:r.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return i}),xe(this,"initEntityValue",function(n){var i=n.props.initialValue;if(i!==void 0){var a=n.getNamePath(),o=Cu(r.store,a);o===void 0&&r.updateStore(Rl(r.store,a,i))}}),xe(this,"isMergedPreserve",function(n){var i=n!==void 0?n:r.preserve;return i!=null?i:!0}),xe(this,"registerField",function(n){r.fieldEntities.push(n);var i=n.getNamePath();if(r.notifyWatch([i]),n.props.initialValue!==void 0){var a=r.store;r.resetWithFieldInitialValue({entities:[n],skipExist:!0}),r.notifyObservers(a,[n.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(f){return f!==n}),!r.isMergedPreserve(s)&&(!o||l.length>1)){var u=o?void 0:r.getInitialValue(i);if(i.length&&r.getFieldValue(i)!==u&&r.fieldEntities.every(function(f){return!Eie(f.getNamePath(),i)})){var c=r.store;r.updateStore(Rl(c,i,u,!0)),r.notifyObservers(c,[i],{type:"remove"}),r.triggerDependenciesUpdate(c,i)}}r.notifyWatch([i])}}),xe(this,"dispatch",function(n){switch(n.type){case"updateValue":{var i=n.namePath,a=n.value;r.updateValue(i,a);break}case"validateField":{var o=n.namePath,s=n.triggerName;r.validateFields([o],{triggerName:s});break}}}),xe(this,"notifyObservers",function(n,i,a){if(r.subscribable){var o=we(we({},a),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(n,i,o)})}else r.forceRootUpdate()}),xe(this,"triggerDependenciesUpdate",function(n,i){var a=r.getDependencyChildrenFields(i);return a.length&&r.validateFields(a),r.notifyObservers(n,a,{type:"dependenciesUpdate",relatedFields:[i].concat(Yt(a))}),a}),xe(this,"updateValue",function(n,i){var a=bi(n),o=r.store;r.updateStore(Rl(r.store,a,i)),r.notifyObservers(o,[a],{type:"valueUpdate",source:"internal"}),r.notifyWatch([a]);var s=r.triggerDependenciesUpdate(o,a),l=r.callbacks.onValuesChange;if(l){var u=eX(r.store,[a]);l(u,r.getFieldsValue())}r.triggerOnFieldsChange([a].concat(Yt(s)))}),xe(this,"setFieldsValue",function(n){r.warningUnhooked();var i=r.store;if(n){var a=Bg(r.store,n);r.updateStore(a)}r.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),xe(this,"setFieldValue",function(n,i){r.setFields([{name:n,value:i}])}),xe(this,"getDependencyChildrenFields",function(n){var i=new Set,a=[],o=new mg;r.getFieldEntities().forEach(function(l){var u=l.props.dependencies;(u||[]).forEach(function(c){var f=bi(c);o.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(l),h})})});var s=function l(u){var c=o.get(u)||new Set;c.forEach(function(f){if(!i.has(f)){i.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(a.push(h),l(h))}})};return s(n),a}),xe(this,"triggerOnFieldsChange",function(n,i){var a=r.callbacks.onFieldsChange;if(a){var o=r.getFields();if(i){var s=new mg;i.forEach(function(u){var c=u.name,f=u.errors;s.set(c,f)}),o.forEach(function(u){u.errors=s.get(u.name)||u.errors})}var l=o.filter(function(u){var c=u.name;return em(n,c)});l.length&&a(l,o)}}),xe(this,"validateFields",function(n,i){r.warningUnhooked();var a,o;Array.isArray(n)||typeof n=="string"||typeof i=="string"?(a=n,o=i):o=n;var s=!!a,l=s?a.map(bi):[],u=[],c=String(Date.now()),f=new Set,h=o||{},d=h.recursive,p=h.dirty;r.getFieldEntities(!0).forEach(function(x){if(s||l.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(p&&!x.isFieldDirty())){var S=x.getNamePath();if(f.add(S.join(c)),!s||em(l,S,d)){var b=x.validateRules(we({validateMessages:we(we({},Cie),r.validateMessages)},o));u.push(b.then(function(){return{name:S,errors:[],warnings:[]}}).catch(function(T){var w,E=[],M=[];return(w=T.forEach)===null||w===void 0||w.call(T,function(A){var R=A.rule.warningOnly,L=A.errors;R?M.push.apply(M,Yt(L)):E.push.apply(E,Yt(L))}),E.length?Promise.reject({name:S,errors:E,warnings:M}):{name:S,errors:E,warnings:M}}))}}});var v=Wze(u);r.lastValidatePromise=v,v.catch(function(x){return x}).then(function(x){var S=x.map(function(b){var T=b.name;return T});r.notifyObservers(r.store,S,{type:"validateFinish"}),r.triggerOnFieldsChange(S,x)});var g=v.then(function(){return r.lastValidatePromise===v?Promise.resolve(r.getFieldsValue(l)):Promise.reject([])}).catch(function(x){var S=x.filter(function(b){return b&&b.errors.length});return Promise.reject({values:r.getFieldsValue(l),errorFields:S,outOfDate:r.lastValidatePromise!==v})});g.catch(function(x){return x});var m=l.filter(function(x){return f.has(x.join(c))});return r.triggerOnFieldsChange(m),g}),xe(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(n){var i=r.callbacks.onFinish;if(i)try{i(n)}catch(a){console.error(a)}}).catch(function(n){var i=r.callbacks.onFinishFailed;i&&i(n)})}),this.forceRootUpdate=e});function Rie(t){var e=D.useRef(),r=D.useState({}),n=rt(r,2),i=n[1];if(!e.current)if(t)e.current=t;else{var a=function(){i({})},o=new jze(a);e.current=o.getForm()}return[e.current]}var IP=D.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Xze=function(e){var r=e.validateMessages,n=e.onFormChange,i=e.onFormFinish,a=e.children,o=D.useContext(IP),s=D.useRef({});return D.createElement(IP.Provider,{value:we(we({},o),{},{validateMessages:we(we({},o.validateMessages),r),triggerFormChange:function(u,c){n&&n(u,{changedFields:c,forms:s.current}),o.triggerFormChange(u,c)},triggerFormFinish:function(u,c){i&&i(u,{values:c,forms:s.current}),o.triggerFormFinish(u,c)},registerForm:function(u,c){u&&(s.current=we(we({},s.current),{},xe({},u,c))),o.registerForm(u,c)},unregisterForm:function(u){var c=we({},s.current);delete c[u],s.current=c,o.unregisterForm(u)}})},a)},Kze=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Yze=function(e,r){var n=e.name,i=e.initialValues,a=e.fields,o=e.form,s=e.preserve,l=e.children,u=e.component,c=u===void 0?"form":u,f=e.validateMessages,h=e.validateTrigger,d=h===void 0?"onChange":h,p=e.onValuesChange,v=e.onFieldsChange,g=e.onFinish,m=e.onFinishFailed,x=e.clearOnDestroy,S=Pn(e,Kze),b=D.useRef(null),T=D.useContext(IP),w=Rie(o),E=rt(w,1),M=E[0],A=M.getInternalHooks(sp),R=A.useSubscribe,L=A.setInitialValues,I=A.setCallbacks,N=A.setValidateMessages,k=A.setPreserve,z=A.destroyForm;D.useImperativeHandle(r,function(){return we(we({},M),{},{nativeElement:b.current})}),D.useEffect(function(){return T.registerForm(n,M),function(){T.unregisterForm(n)}},[T,M,n]),N(we(we({},T.validateMessages),f)),I({onValuesChange:p,onFieldsChange:function(Y){if(T.triggerFormChange(n,Y),v){for(var ee=arguments.length,se=new Array(ee>1?ee-1:0),ne=1;ne<ee;ne++)se[ne-1]=arguments[ne];v.apply(void 0,[Y].concat(se))}},onFinish:function(Y){T.triggerFormFinish(n,Y),g&&g(Y)},onFinishFailed:m}),k(s);var B=D.useRef(null);L(i,!B.current),B.current||(B.current=!0),D.useEffect(function(){return function(){return z(x)}},[]);var V,F=typeof l=="function";if(F){var $=M.getFieldsValue(!0);V=l($,M)}else V=l;R(!F);var W=D.useRef();D.useEffect(function(){Uze(W.current||[],a||[])||M.setFields(a||[]),W.current=a},[a,M]);var H=D.useMemo(function(){return we(we({},M),{},{validateTrigger:d})},[M,d]),X=D.createElement(hT.Provider,{value:null},D.createElement(Vm.Provider,{value:H},V));return c===!1?X:D.createElement(c,mr({},S,{ref:b,onSubmit:function(Y){Y.preventDefault(),Y.stopPropagation(),M.submit()},onReset:function(Y){var ee;Y.preventDefault(),M.resetFields(),(ee=S.onReset)===null||ee===void 0||ee.call(S,Y)}}),X)};function rX(t){try{return JSON.stringify(t)}catch(e){return Math.random()}}function qze(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=e[1],a=i===void 0?{}:i,o=ize(a)?{form:a}:a,s=o.form,l=D.useState(),u=rt(l,2),c=u[0],f=u[1],h=D.useMemo(function(){return rX(c)},[c]),d=D.useRef(h);d.current=h;var p=D.useContext(Vm),v=s||p,g=v&&v._init,m=bi(n),x=D.useRef(m);return x.current=m,D.useEffect(function(){if(g){var S=v.getFieldsValue,b=v.getInternalHooks,T=b(sp),w=T.registerWatch,E=function(L,I){var N=o.preserve?I:L;return typeof n=="function"?n(N):Cu(N,x.current)},M=w(function(R,L){var I=E(R,L),N=rX(I);d.current!==N&&(d.current=N,f(I))}),A=E(S(),S(!0));return c!==A&&f(A),M}},[g]),c}var Zze=D.forwardRef(Yze),V2=Zze;V2.FormProvider=Xze;V2.Field=Aie;V2.List=Gze;V2.useForm=Rie;V2.useWatch=qze;const nX=D.createContext({}),Jze=t=>{let{children:e,status:r,override:n}=t;const i=D.useContext(nX),a=D.useMemo(()=>{const o=Object.assign({},i);return n&&delete o.isFormItemInput,r&&(delete o.status,delete o.hasFeedback,delete o.feedbackIcon),o},[r,n,i]);return D.createElement(nX.Provider,{value:a},e)},Pie=t=>{const{space:e,form:r,children:n}=t;if(n==null)return null;let i=n;return r&&(i=bt.createElement(Jze,{override:!0,status:!0},i)),e&&(i=bt.createElement(IFe,null,i)),i};function iX(t){if(t)return{closable:t.closable,closeIcon:t.closeIcon}}function aX(t){const{closable:e,closeIcon:r}=t||{};return bt.useMemo(()=>{if(!e&&(e===!1||r===!1||r===null))return!1;if(e===void 0&&r===void 0)return null;let n={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return e&&typeof e=="object"&&(n=Object.assign(Object.assign({},n),e)),n},[e,r])}function oX(){const t={};for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(i=>{i&&Object.keys(i).forEach(a=>{i[a]!==void 0&&(t[a]=i[a])})}),t}const Qze={};function eUe(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qze;const n=aX(t),i=aX(e),a=typeof n!="boolean"?!!(n!=null&&n.disabled):!1,o=bt.useMemo(()=>Object.assign({closeIcon:bt.createElement(fne,null)},r),[r]),s=bt.useMemo(()=>n===!1?!1:n?oX(o,i,n):i===!1?!1:i?oX(o,i):o.closable?o:!1,[n,i,o]);return bt.useMemo(()=>{if(s===!1)return[!1,null,a];const{closeIconRender:l}=o,{closeIcon:u}=s;let c=u;if(c!=null){l&&(c=l(u));const f=uT(s,!0);Object.keys(f).length&&(c=bt.isValidElement(c)?bt.cloneElement(c,f):bt.createElement("span",Object.assign({},f),c))}return[!0,c,a]},[s,o])}const O4=t=>{const{prefixCls:e,className:r,style:n,size:i,shape:a}=t,o=st({[`${e}-lg`]:i==="large",[`${e}-sm`]:i==="small"}),s=st({[`${e}-circle`]:a==="circle",[`${e}-square`]:a==="square",[`${e}-round`]:a==="round"}),l=D.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return D.createElement("span",{className:st(e,o,s,r),style:Object.assign(Object.assign({},l),n)})},tUe=new tn("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),k4=t=>({height:t,lineHeight:Xt(t)}),tm=t=>Object.assign({width:t},k4(t)),rUe=t=>({background:t.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:tUe,animationDuration:t.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),P9=(t,e)=>Object.assign({width:e(t).mul(5).equal(),minWidth:e(t).mul(5).equal()},k4(t)),nUe=t=>{const{skeletonAvatarCls:e,gradientFromColor:r,controlHeight:n,controlHeightLG:i,controlHeightSM:a}=t;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:r},tm(n)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},tm(i)),[`${e}${e}-sm`]:Object.assign({},tm(a))}},iUe=t=>{const{controlHeight:e,borderRadiusSM:r,skeletonInputCls:n,controlHeightLG:i,controlHeightSM:a,gradientFromColor:o,calc:s}=t;return{[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:o,borderRadius:r},P9(e,s)),[`${n}-lg`]:Object.assign({},P9(i,s)),[`${n}-sm`]:Object.assign({},P9(a,s))}},sX=t=>Object.assign({width:t},k4(t)),aUe=t=>{const{skeletonImageCls:e,imageSizeBase:r,gradientFromColor:n,borderRadiusSM:i,calc:a}=t;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:n,borderRadius:i},sX(a(r).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},sX(r)),{maxWidth:a(r).mul(4).equal(),maxHeight:a(r).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},L9=(t,e,r)=>{const{skeletonButtonCls:n}=t;return{[`${r}${n}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${r}${n}-round`]:{borderRadius:e}}},D9=(t,e)=>Object.assign({width:e(t).mul(2).equal(),minWidth:e(t).mul(2).equal()},k4(t)),oUe=t=>{const{borderRadiusSM:e,skeletonButtonCls:r,controlHeight:n,controlHeightLG:i,controlHeightSM:a,gradientFromColor:o,calc:s}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:o,borderRadius:e,width:s(n).mul(2).equal(),minWidth:s(n).mul(2).equal()},D9(n,s))},L9(t,n,r)),{[`${r}-lg`]:Object.assign({},D9(i,s))}),L9(t,i,`${r}-lg`)),{[`${r}-sm`]:Object.assign({},D9(a,s))}),L9(t,a,`${r}-sm`))},sUe=t=>{const{componentCls:e,skeletonAvatarCls:r,skeletonTitleCls:n,skeletonParagraphCls:i,skeletonButtonCls:a,skeletonInputCls:o,skeletonImageCls:s,controlHeight:l,controlHeightLG:u,controlHeightSM:c,gradientFromColor:f,padding:h,marginSM:d,borderRadius:p,titleHeight:v,blockRadius:g,paragraphLiHeight:m,controlHeightXS:x,paragraphMarginTop:S}=t;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:h,verticalAlign:"top",[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:f},tm(l)),[`${r}-circle`]:{borderRadius:"50%"},[`${r}-lg`]:Object.assign({},tm(u)),[`${r}-sm`]:Object.assign({},tm(c))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[n]:{width:"100%",height:v,background:f,borderRadius:g,[`+ ${i}`]:{marginBlockStart:c}},[i]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:f,borderRadius:g,"+ li":{marginBlockStart:x}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${n}, ${i} > li`]:{borderRadius:p}}},[`${e}-with-avatar ${e}-content`]:{[n]:{marginBlockStart:d,[`+ ${i}`]:{marginBlockStart:S}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},oUe(t)),nUe(t)),iUe(t)),aUe(t)),[`${e}${e}-block`]:{width:"100%",[a]:{width:"100%"},[o]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${n},
        ${i} > li,
        ${r},
        ${a},
        ${o},
        ${s}
      `]:Object.assign({},rUe(t))}}},lUe=t=>{const{colorFillContent:e,colorFill:r}=t,n=e,i=r;return{color:n,colorGradientEnd:i,gradientFromColor:n,gradientToColor:i,titleHeight:t.controlHeight/2,blockRadius:t.borderRadiusSM,paragraphMarginTop:t.marginLG+t.marginXXS,paragraphLiHeight:t.controlHeight/2}},C0=ef("Skeleton",t=>{const{componentCls:e,calc:r}=t,n=Ao(t,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:r(t.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${t.gradientFromColor} 25%, ${t.gradientToColor} 37%, ${t.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[sUe(n)]},lUe,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),uUe=t=>{const{prefixCls:e,className:r,rootClassName:n,active:i,shape:a="circle",size:o="default"}=t,{getPrefixCls:s}=D.useContext(xn),l=s("skeleton",e),[u,c,f]=C0(l),h=ql(t,["prefixCls","className"]),d=st(l,`${l}-element`,{[`${l}-active`]:i},r,n,c,f);return u(D.createElement("div",{className:d},D.createElement(O4,Object.assign({prefixCls:`${l}-avatar`,shape:a,size:o},h))))},cUe=t=>{const{prefixCls:e,className:r,rootClassName:n,active:i,block:a=!1,size:o="default"}=t,{getPrefixCls:s}=D.useContext(xn),l=s("skeleton",e),[u,c,f]=C0(l),h=ql(t,["prefixCls"]),d=st(l,`${l}-element`,{[`${l}-active`]:i,[`${l}-block`]:a},r,n,c,f);return u(D.createElement("div",{className:d},D.createElement(O4,Object.assign({prefixCls:`${l}-button`,size:o},h))))},fUe="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",hUe=t=>{const{prefixCls:e,className:r,rootClassName:n,style:i,active:a}=t,{getPrefixCls:o}=D.useContext(xn),s=o("skeleton",e),[l,u,c]=C0(s),f=st(s,`${s}-element`,{[`${s}-active`]:a},r,n,u,c);return l(D.createElement("div",{className:f},D.createElement("div",{className:st(`${s}-image`,r),style:i},D.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${s}-image-svg`},D.createElement("title",null,"Image placeholder"),D.createElement("path",{d:fUe,className:`${s}-image-path`})))))},dUe=t=>{const{prefixCls:e,className:r,rootClassName:n,active:i,block:a,size:o="default"}=t,{getPrefixCls:s}=D.useContext(xn),l=s("skeleton",e),[u,c,f]=C0(l),h=ql(t,["prefixCls"]),d=st(l,`${l}-element`,{[`${l}-active`]:i,[`${l}-block`]:a},r,n,c,f);return u(D.createElement("div",{className:d},D.createElement(O4,Object.assign({prefixCls:`${l}-input`,size:o},h))))},pUe=t=>{const{prefixCls:e,className:r,rootClassName:n,style:i,active:a,children:o}=t,{getPrefixCls:s}=D.useContext(xn),l=s("skeleton",e),[u,c,f]=C0(l),h=st(l,`${l}-element`,{[`${l}-active`]:a},c,r,n,f);return u(D.createElement("div",{className:h},D.createElement("div",{className:st(`${l}-image`,r),style:i},o)))},vUe=(t,e)=>{const{width:r,rows:n=2}=e;if(Array.isArray(r))return r[t];if(n-1===t)return r},gUe=t=>{const{prefixCls:e,className:r,style:n,rows:i}=t,a=Yt(new Array(i)).map((o,s)=>D.createElement("li",{key:s,style:{width:vUe(s,t)}}));return D.createElement("ul",{className:st(e,r),style:n},a)},mUe=t=>{let{prefixCls:e,className:r,width:n,style:i}=t;return D.createElement("h3",{className:st(e,r),style:Object.assign({width:n},i)})};function I9(t){return t&&typeof t=="object"?t:{}}function yUe(t,e){return t&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function _Ue(t,e){return!t&&e?{width:"38%"}:t&&e?{width:"50%"}:{}}function xUe(t,e){const r={};return(!t||!e)&&(r.width="61%"),!t&&e?r.rows=3:r.rows=2,r}const E0=t=>{const{prefixCls:e,loading:r,className:n,rootClassName:i,style:a,children:o,avatar:s=!1,title:l=!0,paragraph:u=!0,active:c,round:f}=t,{getPrefixCls:h,direction:d,skeleton:p}=D.useContext(xn),v=h("skeleton",e),[g,m,x]=C0(v);if(r||!("loading"in t)){const S=!!s,b=!!l,T=!!u;let w;if(S){const A=Object.assign(Object.assign({prefixCls:`${v}-avatar`},yUe(b,T)),I9(s));w=D.createElement("div",{className:`${v}-header`},D.createElement(O4,Object.assign({},A)))}let E;if(b||T){let A;if(b){const L=Object.assign(Object.assign({prefixCls:`${v}-title`},_Ue(S,T)),I9(l));A=D.createElement(mUe,Object.assign({},L))}let R;if(T){const L=Object.assign(Object.assign({prefixCls:`${v}-paragraph`},xUe(S,b)),I9(u));R=D.createElement(gUe,Object.assign({},L))}E=D.createElement("div",{className:`${v}-content`},A,R)}const M=st(v,{[`${v}-with-avatar`]:S,[`${v}-active`]:c,[`${v}-rtl`]:d==="rtl",[`${v}-round`]:f},p==null?void 0:p.className,n,i,m,x);return g(D.createElement("div",{className:M,style:Object.assign(Object.assign({},p==null?void 0:p.style),a)},w,E))}return o!=null?o:null};E0.Button=cUe;E0.Avatar=uUe;E0.Input=dUe;E0.Image=hUe;E0.Node=pUe;function lX(){}const SUe=D.createContext({add:lX,remove:lX});function bUe(t){const e=D.useContext(SUe),r=D.useRef();return La(i=>{if(i){const a=i;e.add(a),r.current=a}else e.remove(r.current)})}const wUe=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var TUe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],yg=void 0;function CUe(t,e){var r=t.prefixCls,n=t.invalidate,i=t.item,a=t.renderItem,o=t.responsive,s=t.responsiveDisabled,l=t.registerSize,u=t.itemKey,c=t.className,f=t.style,h=t.children,d=t.display,p=t.order,v=t.component,g=v===void 0?"div":v,m=Pn(t,TUe),x=o&&!d;function S(M){l(u,M)}D.useEffect(function(){return function(){S(null)}},[]);var b=a&&i!==yg?a(i):h,T;n||(T={opacity:x?0:1,height:x?0:yg,overflowY:x?"hidden":yg,order:o?p:yg,pointerEvents:x?"none":yg,position:x?"absolute":yg});var w={};x&&(w["aria-hidden"]=!0);var E=D.createElement(g,mr({className:st(!n&&r,c),style:we(we({},T),f)},w,m,{ref:e}),b);return o&&(E=D.createElement(F2,{onResize:function(A){var R=A.offsetWidth;S(R)},disabled:s},E)),E}var q1=D.forwardRef(CUe);q1.displayName="Item";function EUe(t){if(typeof MessageChannel=="undefined")Na(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function AUe(){var t=D.useRef(null),e=function(n){t.current||(t.current=[],EUe(function(){l2.unstable_batchedUpdates(function(){t.current.forEach(function(i){i()}),t.current=null})})),t.current.push(n)};return e}function t1(t,e){var r=D.useState(e),n=rt(r,2),i=n[0],a=n[1],o=La(function(s){t(function(){a(s)})});return[i,o]}var dT=bt.createContext(null),MUe=["component"],RUe=["className"],PUe=["className"],LUe=function(e,r){var n=D.useContext(dT);if(!n){var i=e.component,a=i===void 0?"div":i,o=Pn(e,MUe);return D.createElement(a,mr({},o,{ref:r}))}var s=n.className,l=Pn(n,RUe),u=e.className,c=Pn(e,PUe);return D.createElement(dT.Provider,{value:null},D.createElement(q1,mr({ref:r,className:st(s,u)},l,c)))},Lie=D.forwardRef(LUe);Lie.displayName="RawItem";var DUe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Die="responsive",Iie="invalidate";function IUe(t){return"+ ".concat(t.length," ...")}function NUe(t,e){var r=t.prefixCls,n=r===void 0?"rc-overflow":r,i=t.data,a=i===void 0?[]:i,o=t.renderItem,s=t.renderRawItem,l=t.itemKey,u=t.itemWidth,c=u===void 0?10:u,f=t.ssr,h=t.style,d=t.className,p=t.maxCount,v=t.renderRest,g=t.renderRawRest,m=t.suffix,x=t.component,S=x===void 0?"div":x,b=t.itemComponent,T=t.onVisibleChange,w=Pn(t,DUe),E=f==="full",M=AUe(),A=t1(M,null),R=rt(A,2),L=R[0],I=R[1],N=L||0,k=t1(M,new Map),z=rt(k,2),B=z[0],V=z[1],F=t1(M,0),$=rt(F,2),W=$[0],H=$[1],X=t1(M,0),te=rt(X,2),Y=te[0],ee=te[1],se=t1(M,0),ne=rt(se,2),le=ne[0],pe=ne[1],Se=D.useState(null),_e=rt(Se,2),Le=_e[0],Be=_e[1],Q=D.useState(null),tt=rt(Q,2),je=tt[0],Ye=tt[1],$e=D.useMemo(function(){return je===null&&E?Number.MAX_SAFE_INTEGER:je||0},[je,L]),wt=D.useState(!1),We=rt(wt,2),q=We[0],j=We[1],ie="".concat(n,"-item"),Ce=Math.max(W,Y),ye=p===Die,me=a.length&&ye,qe=p===Iie,Ie=me||typeof p=="number"&&a.length>p,He=D.useMemo(function(){var Mt=a;return me?L===null&&E?Mt=a:Mt=a.slice(0,Math.min(a.length,N/c)):typeof p=="number"&&(Mt=a.slice(0,p)),Mt},[a,c,L,p,me]),Et=D.useMemo(function(){return me?a.slice($e+1):a.slice(He.length)},[a,He,me,$e]),Fe=D.useCallback(function(Mt,ot){var mt;return typeof l=="function"?l(Mt):(mt=l&&(Mt==null?void 0:Mt[l]))!==null&&mt!==void 0?mt:ot},[l]),Ge=D.useCallback(o||function(Mt){return Mt},[o]);function lt(Mt,ot,mt){je===Mt&&(ot===void 0||ot===Le)||(Ye(Mt),mt||(j(Mt<a.length-1),T==null||T(Mt)),ot!==void 0&&Be(ot))}function ht(Mt,ot){I(ot.clientWidth)}function ut(Mt,ot){V(function(mt){var Pr=new Map(mt);return ot===null?Pr.delete(Mt):Pr.set(Mt,ot),Pr})}function Qt(Mt,ot){ee(ot),H(Y)}function zt(Mt,ot){pe(ot)}function rr(Mt){return B.get(Fe(He[Mt],Mt))}va(function(){if(N&&typeof Ce=="number"&&He){var Mt=le,ot=He.length,mt=ot-1;if(!ot){lt(0,null);return}for(var Pr=0;Pr<ot;Pr+=1){var Yn=rr(Pr);if(E&&(Yn=Yn||0),Yn===void 0){lt(Pr-1,void 0,!0);break}if(Mt+=Yn,mt===0&&Mt<=N||Pr===mt-1&&Mt+rr(mt)<=N){lt(mt,null);break}else if(Mt+Ce>N){lt(Pr-1,Mt-Yn-le+Y);break}}m&&rr(0)+le>N&&Be(null)}},[N,B,Y,le,Fe,He]);var ce=q&&!!Et.length,vt={};Le!==null&&me&&(vt={position:"absolute",left:Le,top:0});var Me={prefixCls:ie,responsive:me,component:b,invalidate:qe},ke=s?function(Mt,ot){var mt=Fe(Mt,ot);return D.createElement(dT.Provider,{key:mt,value:we(we({},Me),{},{order:ot,item:Mt,itemKey:mt,registerSize:ut,display:ot<=$e})},s(Mt,ot))}:function(Mt,ot){var mt=Fe(Mt,ot);return D.createElement(q1,mr({},Me,{order:ot,key:mt,item:Mt,renderItem:Ge,itemKey:mt,registerSize:ut,display:ot<=$e}))},nt,et={order:ce?$e:Number.MAX_SAFE_INTEGER,className:"".concat(ie,"-rest"),registerSize:Qt,display:ce};if(g)g&&(nt=D.createElement(dT.Provider,{value:we(we({},Me),et)},g(Et)));else{var Gt=v||IUe;nt=D.createElement(q1,mr({},Me,et),typeof Gt=="function"?Gt(Et):Gt)}var nr=D.createElement(S,mr({className:st(!qe&&n,d),style:h,ref:e},w),He.map(ke),Ie?nt:null,m&&D.createElement(q1,mr({},Me,{responsive:ye,responsiveDisabled:!me,order:$e,className:"".concat(ie,"-suffix"),registerSize:zt,display:!0,style:vt}),m));return ye&&(nr=D.createElement(F2,{onResize:ht,disabled:!me},nr)),nr}var Ic=D.forwardRef(NUe);Ic.displayName="Overflow";Ic.Item=Lie;Ic.RESPONSIVE=Die;Ic.INVALIDATE=Iie;function OUe(t){var e=t.prefixCls,r=t.align,n=t.arrow,i=t.arrowPos,a=n||{},o=a.className,s=a.content,l=i.x,u=l===void 0?0:l,c=i.y,f=c===void 0?0:c,h=D.useRef();if(!r||!r.points)return null;var d={position:"absolute"};if(r.autoArrow!==!1){var p=r.points[0],v=r.points[1],g=p[0],m=p[1],x=v[0],S=v[1];g===x||!["t","b"].includes(g)?d.top=f:g==="t"?d.top=0:d.bottom=0,m===S||!["l","r"].includes(m)?d.left=u:m==="l"?d.left=0:d.right=0}return D.createElement("div",{ref:h,className:st("".concat(e,"-arrow"),o),style:d},s)}function kUe(t){var e=t.prefixCls,r=t.open,n=t.zIndex,i=t.mask,a=t.motion;return i?D.createElement(Xl,mr({},a,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(o){var s=o.className;return D.createElement("div",{style:{zIndex:n},className:st("".concat(e,"-mask"),s)})}):null}var FUe=D.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),BUe=D.forwardRef(function(t,e){var r=t.popup,n=t.className,i=t.prefixCls,a=t.style,o=t.target,s=t.onVisibleChanged,l=t.open,u=t.keepDom,c=t.fresh,f=t.onClick,h=t.mask,d=t.arrow,p=t.arrowPos,v=t.align,g=t.motion,m=t.maskMotion,x=t.forceRender,S=t.getPopupContainer,b=t.autoDestroy,T=t.portal,w=t.zIndex,E=t.onMouseEnter,M=t.onMouseLeave,A=t.onPointerEnter,R=t.onPointerDownCapture,L=t.ready,I=t.offsetX,N=t.offsetY,k=t.offsetR,z=t.offsetB,B=t.onAlign,V=t.onPrepare,F=t.stretch,$=t.targetWidth,W=t.targetHeight,H=typeof r=="function"?r():r,X=l||u,te=(S==null?void 0:S.length)>0,Y=D.useState(!S||!te),ee=rt(Y,2),se=ee[0],ne=ee[1];if(va(function(){!se&&te&&o&&ne(!0)},[se,te,o]),!se)return null;var le="auto",pe={left:"-1000vw",top:"-1000vh",right:le,bottom:le};if(L||!l){var Se,_e=v.points,Le=v.dynamicInset||((Se=v._experimental)===null||Se===void 0?void 0:Se.dynamicInset),Be=Le&&_e[0][1]==="r",Q=Le&&_e[0][0]==="b";Be?(pe.right=k,pe.left=le):(pe.left=I,pe.right=le),Q?(pe.bottom=z,pe.top=le):(pe.top=N,pe.bottom=le)}var tt={};return F&&(F.includes("height")&&W?tt.height=W:F.includes("minHeight")&&W&&(tt.minHeight=W),F.includes("width")&&$?tt.width=$:F.includes("minWidth")&&$&&(tt.minWidth=$)),l||(tt.pointerEvents="none"),D.createElement(T,{open:x||X,getContainer:S&&function(){return S(o)},autoDestroy:b},D.createElement(kUe,{prefixCls:i,open:l,zIndex:w,mask:h,motion:m}),D.createElement(F2,{onResize:B,disabled:!l},function(je){return D.createElement(Xl,mr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(i,"-hidden")},g,{onAppearPrepare:V,onEnterPrepare:V,visible:l,onVisibleChanged:function($e){var wt;g==null||(wt=g.onVisibleChanged)===null||wt===void 0||wt.call(g,$e),s($e)}}),function(Ye,$e){var wt=Ye.className,We=Ye.style,q=st(i,wt,n);return D.createElement("div",{ref:O2(je,e,$e),className:q,style:we(we(we(we({"--arrow-x":"".concat(p.x||0,"px"),"--arrow-y":"".concat(p.y||0,"px")},pe),tt),We),{},{boxSizing:"border-box",zIndex:w},a),onMouseEnter:E,onMouseLeave:M,onPointerEnter:A,onClick:f,onPointerDownCapture:R},d&&D.createElement(OUe,{prefixCls:i,arrow:d,arrowPos:p,align:v}),D.createElement(FUe,{cache:!l&&!c},H))})}))}),zUe=D.forwardRef(function(t,e){var r=t.children,n=t.getTriggerDOMNode,i=k2(r),a=D.useCallback(function(s){e7(e,n?n(s):s)},[n]),o=b0(a,r.ref);return i?D.cloneElement(r,{ref:o}):r}),uX=D.createContext(null);function cX(t){return t?Array.isArray(t)?t:[t]:[]}function UUe(t,e,r,n){return D.useMemo(function(){var i=cX(r!=null?r:e),a=cX(n!=null?n:e),o=new Set(i),s=new Set(a);return t&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[t,e,r,n])}function VUe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function HUe(t,e,r,n){for(var i=r.points,a=Object.keys(t),o=0;o<a.length;o+=1){var s,l=a[o];if(VUe((s=t[l])===null||s===void 0?void 0:s.points,i,n))return"".concat(e,"-placement-").concat(l)}return""}function fX(t,e,r,n){return e||(r?{motionName:"".concat(t,"-").concat(r)}:n?{motionName:n}:null)}function H2(t){return t.ownerDocument.defaultView}function NP(t){for(var e=[],r=t==null?void 0:t.parentElement,n=["hidden","scroll","clip","auto"];r;){var i=H2(r).getComputedStyle(r),a=i.overflowX,o=i.overflowY,s=i.overflow;[a,o,s].some(function(l){return n.includes(l)})&&e.push(r),r=r.parentElement}return e}function n2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function r1(t){return n2(parseFloat(t),0)}function hX(t,e){var r=we({},t);return(e||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var i=H2(n).getComputedStyle(n),a=i.overflow,o=i.overflowClipMargin,s=i.borderTopWidth,l=i.borderBottomWidth,u=i.borderLeftWidth,c=i.borderRightWidth,f=n.getBoundingClientRect(),h=n.offsetHeight,d=n.clientHeight,p=n.offsetWidth,v=n.clientWidth,g=r1(s),m=r1(l),x=r1(u),S=r1(c),b=n2(Math.round(f.width/p*1e3)/1e3),T=n2(Math.round(f.height/h*1e3)/1e3),w=(p-v-x-S)*b,E=(h-d-g-m)*T,M=g*T,A=m*T,R=x*b,L=S*b,I=0,N=0;if(a==="clip"){var k=r1(o);I=k*b,N=k*T}var z=f.x+R-I,B=f.y+M-N,V=z+f.width+2*I-R-L-w,F=B+f.height+2*N-M-A-E;r.left=Math.max(r.left,z),r.top=Math.max(r.top,B),r.right=Math.min(r.right,V),r.bottom=Math.min(r.bottom,F)}}),r}function dX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),n=r.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(r)}function pX(t,e){var r=e||[],n=rt(r,2),i=n[0],a=n[1];return[dX(t.width,i),dX(t.height,a)]}function vX(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function _g(t,e){var r=e[0],n=e[1],i,a;return r==="t"?a=t.y:r==="b"?a=t.y+t.height:a=t.y+t.height/2,n==="l"?i=t.x:n==="r"?i=t.x+t.width:i=t.x+t.width/2,{x:i,y:a}}function Uf(t,e){var r={t:"b",b:"t",l:"r",r:"l"};return t.map(function(n,i){return i===e?r[n]||"c":n}).join("")}function GUe(t,e,r,n,i,a,o){var s=D.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[n]||{}}),l=rt(s,2),u=l[0],c=l[1],f=D.useRef(0),h=D.useMemo(function(){return e?NP(e):[]},[e]),d=D.useRef({}),p=function(){d.current={}};t||p();var v=La(function(){if(e&&r&&t){let Ri=function(eo,ba){var Ss=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce,Jl=Y.x+eo,ts=Y.y+ba,R0=Jl+Be,kt=ts+Le,ar=Math.max(Jl,Ss.left),Un=Math.max(ts,Ss.top),Zn=Math.min(R0,Ss.right),En=Math.min(kt,Ss.bottom);return Math.max(0,(Zn-ar)*(En-Un))},Qa=function(){Sa=Y.y+mt,Fa=Sa+Le,zn=Y.x+ot,Qo=zn+Be};var M0=Ri,tv=Qa,x,S,b,T,w=e,E=w.ownerDocument,M=H2(w),A=M.getComputedStyle(w),R=A.width,L=A.height,I=A.position,N=w.style.left,k=w.style.top,z=w.style.right,B=w.style.bottom,V=w.style.overflow,F=we(we({},i[n]),a),$=E.createElement("div");(x=w.parentElement)===null||x===void 0||x.appendChild($),$.style.left="".concat(w.offsetLeft,"px"),$.style.top="".concat(w.offsetTop,"px"),$.style.position=I,$.style.height="".concat(w.offsetHeight,"px"),$.style.width="".concat(w.offsetWidth,"px"),w.style.left="0",w.style.top="0",w.style.right="auto",w.style.bottom="auto",w.style.overflow="hidden";var W;if(Array.isArray(r))W={x:r[0],y:r[1],width:0,height:0};else{var H,X,te=r.getBoundingClientRect();te.x=(H=te.x)!==null&&H!==void 0?H:te.left,te.y=(X=te.y)!==null&&X!==void 0?X:te.top,W={x:te.x,y:te.y,width:te.width,height:te.height}}var Y=w.getBoundingClientRect();Y.x=(S=Y.x)!==null&&S!==void 0?S:Y.left,Y.y=(b=Y.y)!==null&&b!==void 0?b:Y.top;var ee=E.documentElement,se=ee.clientWidth,ne=ee.clientHeight,le=ee.scrollWidth,pe=ee.scrollHeight,Se=ee.scrollTop,_e=ee.scrollLeft,Le=Y.height,Be=Y.width,Q=W.height,tt=W.width,je={left:0,top:0,right:se,bottom:ne},Ye={left:-_e,top:-Se,right:le-_e,bottom:pe-Se},$e=F.htmlRegion,wt="visible",We="visibleFirst";$e!=="scroll"&&$e!==We&&($e=wt);var q=$e===We,j=hX(Ye,h),ie=hX(je,h),Ce=$e===wt?ie:j,ye=q?ie:Ce;w.style.left="auto",w.style.top="auto",w.style.right="0",w.style.bottom="0";var me=w.getBoundingClientRect();w.style.left=N,w.style.top=k,w.style.right=z,w.style.bottom=B,w.style.overflow=V,(T=w.parentElement)===null||T===void 0||T.removeChild($);var qe=n2(Math.round(Be/parseFloat(R)*1e3)/1e3),Ie=n2(Math.round(Le/parseFloat(L)*1e3)/1e3);if(qe===0||Ie===0||$_(r)&&!f7(r))return;var He=F.offset,Et=F.targetOffset,Fe=pX(Y,He),Ge=rt(Fe,2),lt=Ge[0],ht=Ge[1],ut=pX(W,Et),Qt=rt(ut,2),zt=Qt[0],rr=Qt[1];W.x-=zt,W.y-=rr;var ce=F.points||[],vt=rt(ce,2),Me=vt[0],ke=vt[1],nt=vX(ke),et=vX(Me),Gt=_g(W,nt),nr=_g(Y,et),Mt=we({},F),ot=Gt.x-nr.x+lt,mt=Gt.y-nr.y+ht,Pr=Ri(ot,mt),Yn=Ri(ot,mt,ie),Qr=_g(W,["t","l"]),Dr=_g(Y,["t","l"]),Nn=_g(W,["b","r"]),Bn=_g(Y,["b","r"]),qn=F.overflow||{},Ai=qn.adjustX,Jo=qn.adjustY,Mi=qn.shiftX,li=qn.shiftY,_i=function(ba){return typeof ba=="boolean"?ba:ba>=0},Sa,Fa,zn,Qo;Qa();var Ja=_i(Jo),Z=et[0]===nt[0];if(Ja&&et[0]==="t"&&(Fa>ye.bottom||d.current.bt)){var de=mt;Z?de-=Le-Q:de=Qr.y-Bn.y-ht;var Ee=Ri(ot,de),Re=Ri(ot,de,ie);Ee>Pr||Ee===Pr&&(!q||Re>=Yn)?(d.current.bt=!0,mt=de,ht=-ht,Mt.points=[Uf(et,0),Uf(nt,0)]):d.current.bt=!1}if(Ja&&et[0]==="b"&&(Sa<ye.top||d.current.tb)){var fe=mt;Z?fe+=Le-Q:fe=Nn.y-Dr.y-ht;var Xe=Ri(ot,fe),St=Ri(ot,fe,ie);Xe>Pr||Xe===Pr&&(!q||St>=Yn)?(d.current.tb=!0,mt=fe,ht=-ht,Mt.points=[Uf(et,0),Uf(nt,0)]):d.current.tb=!1}var Rt=_i(Ai),Pt=et[1]===nt[1];if(Rt&&et[1]==="l"&&(Qo>ye.right||d.current.rl)){var er=ot;Pt?er-=Be-tt:er=Qr.x-Bn.x-lt;var ir=Ri(er,mt),It=Ri(er,mt,ie);ir>Pr||ir===Pr&&(!q||It>=Yn)?(d.current.rl=!0,ot=er,lt=-lt,Mt.points=[Uf(et,1),Uf(nt,1)]):d.current.rl=!1}if(Rt&&et[1]==="r"&&(zn<ye.left||d.current.lr)){var tr=ot;Pt?tr+=Be-tt:tr=Nn.x-Dr.x-lt;var Gr=Ri(tr,mt),Wr=Ri(tr,mt,ie);Gr>Pr||Gr===Pr&&(!q||Wr>=Yn)?(d.current.lr=!0,ot=tr,lt=-lt,Mt.points=[Uf(et,1),Uf(nt,1)]):d.current.lr=!1}Qa();var Kr=Mi===!0?0:Mi;typeof Kr=="number"&&(zn<ie.left&&(ot-=zn-ie.left-lt,W.x+tt<ie.left+Kr&&(ot+=W.x-ie.left+tt-Kr)),Qo>ie.right&&(ot-=Qo-ie.right-lt,W.x>ie.right-Kr&&(ot+=W.x-ie.right+Kr)));var pr=li===!0?0:li;typeof pr=="number"&&(Sa<ie.top&&(mt-=Sa-ie.top-ht,W.y+Q<ie.top+pr&&(mt+=W.y-ie.top+Q-pr)),Fa>ie.bottom&&(mt-=Fa-ie.bottom-ht,W.y>ie.bottom-pr&&(mt+=W.y-ie.bottom+pr)));var Wt=Y.x+ot,yn=Wt+Be,vr=Y.y+mt,ni=vr+Le,$r=W.x,gr=$r+tt,Yr=W.y,xr=Yr+Q,cn=Math.max(Wt,$r),Wn=Math.min(yn,gr),Sn=(cn+Wn)/2,ui=Sn-Wt,Lo=Math.max(vr,Yr),Tr=Math.min(ni,xr),xs=(Lo+Tr)/2,Zl=xs-vr;o==null||o(e,Mt);var cl=me.right-Y.x-(ot+Y.width),es=me.bottom-Y.y-(mt+Y.height);qe===1&&(ot=Math.round(ot),cl=Math.round(cl)),Ie===1&&(mt=Math.round(mt),es=Math.round(es));var ev={ready:!0,offsetX:ot/qe,offsetY:mt/Ie,offsetR:cl/qe,offsetB:es/Ie,arrowX:ui/qe,arrowY:Zl/Ie,scaleX:qe,scaleY:Ie,align:Mt};c(ev)}}),g=function(){f.current+=1;var S=f.current;Promise.resolve().then(function(){f.current===S&&v()})},m=function(){c(function(S){return we(we({},S),{},{ready:!1})})};return va(m,[n]),va(function(){t||m()},[t]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,g]}function WUe(t,e,r,n,i){va(function(){if(t&&e&&r){let h=function(){n(),i()};var f=h,a=e,o=r,s=NP(a),l=NP(o),u=H2(o),c=new Set([u].concat(Yt(s),Yt(l)));return c.forEach(function(d){d.addEventListener("scroll",h,{passive:!0})}),u.addEventListener("resize",h,{passive:!0}),n(),function(){c.forEach(function(d){d.removeEventListener("scroll",h),u.removeEventListener("resize",h)})}}},[t,e,r])}function $Ue(t,e,r,n,i,a,o,s){var l=D.useRef(t);l.current=t;var u=D.useRef(!1);D.useEffect(function(){if(e&&n&&(!i||a)){var f=function(){u.current=!1},h=function(g){var m;l.current&&!o(((m=g.composedPath)===null||m===void 0||(m=m.call(g))===null||m===void 0?void 0:m[0])||g.target)&&!u.current&&s(!1)},d=H2(n);d.addEventListener("pointerdown",f,!0),d.addEventListener("mousedown",h,!0),d.addEventListener("contextmenu",h,!0);var p=iT(r);return p&&(p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0)),function(){d.removeEventListener("pointerdown",f,!0),d.removeEventListener("mousedown",h,!0),d.removeEventListener("contextmenu",h,!0),p&&(p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0))}}},[e,r,n,i,a]);function c(){u.current=!0}return c}var jUe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function XUe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x7,e=D.forwardRef(function(r,n){var i=r.prefixCls,a=i===void 0?"rc-trigger-popup":i,o=r.children,s=r.action,l=s===void 0?"hover":s,u=r.showAction,c=r.hideAction,f=r.popupVisible,h=r.defaultPopupVisible,d=r.onPopupVisibleChange,p=r.afterPopupVisibleChange,v=r.mouseEnterDelay,g=r.mouseLeaveDelay,m=g===void 0?.1:g,x=r.focusDelay,S=r.blurDelay,b=r.mask,T=r.maskClosable,w=T===void 0?!0:T,E=r.getPopupContainer,M=r.forceRender,A=r.autoDestroy,R=r.destroyPopupOnHide,L=r.popup,I=r.popupClassName,N=r.popupStyle,k=r.popupPlacement,z=r.builtinPlacements,B=z===void 0?{}:z,V=r.popupAlign,F=r.zIndex,$=r.stretch,W=r.getPopupClassNameFromAlign,H=r.fresh,X=r.alignPoint,te=r.onPopupClick,Y=r.onPopupAlign,ee=r.arrow,se=r.popupMotion,ne=r.maskMotion,le=r.popupTransitionName,pe=r.popupAnimation,Se=r.maskTransitionName,_e=r.maskAnimation,Le=r.className,Be=r.getTriggerDOMNode,Q=Pn(r,jUe),tt=A||R||!1,je=D.useState(!1),Ye=rt(je,2),$e=Ye[0],wt=Ye[1];va(function(){wt(wUe())},[]);var We=D.useRef({}),q=D.useContext(uX),j=D.useMemo(function(){return{registerSubPopup:function(ar,Un){We.current[ar]=Un,q==null||q.registerSubPopup(ar,Un)}}},[q]),ie=nze(),Ce=D.useState(null),ye=rt(Ce,2),me=ye[0],qe=ye[1],Ie=D.useRef(null),He=La(function(kt){Ie.current=kt,$_(kt)&&me!==kt&&qe(kt),q==null||q.registerSubPopup(ie,kt)}),Et=D.useState(null),Fe=rt(Et,2),Ge=Fe[0],lt=Fe[1],ht=D.useRef(null),ut=La(function(kt){$_(kt)&&Ge!==kt&&(lt(kt),ht.current=kt)}),Qt=D.Children.only(o),zt=(Qt==null?void 0:Qt.props)||{},rr={},ce=La(function(kt){var ar,Un,Zn=Ge;return(Zn==null?void 0:Zn.contains(kt))||((ar=iT(Zn))===null||ar===void 0?void 0:ar.host)===kt||kt===Zn||(me==null?void 0:me.contains(kt))||((Un=iT(me))===null||Un===void 0?void 0:Un.host)===kt||kt===me||Object.values(We.current).some(function(En){return(En==null?void 0:En.contains(kt))||kt===En})}),vt=fX(a,se,pe,le),Me=fX(a,ne,_e,Se),ke=D.useState(h||!1),nt=rt(ke,2),et=nt[0],Gt=nt[1],nr=f!=null?f:et,Mt=La(function(kt){f===void 0&&Gt(kt)});va(function(){Gt(f||!1)},[f]);var ot=D.useRef(nr);ot.current=nr;var mt=D.useRef([]);mt.current=[];var Pr=La(function(kt){var ar;Mt(kt),((ar=mt.current[mt.current.length-1])!==null&&ar!==void 0?ar:nr)!==kt&&(mt.current.push(kt),d==null||d(kt))}),Yn=D.useRef(),Qr=function(){clearTimeout(Yn.current)},Dr=function(ar){var Un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Qr(),Un===0?Pr(ar):Yn.current=setTimeout(function(){Pr(ar)},Un*1e3)};D.useEffect(function(){return Qr},[]);var Nn=D.useState(!1),Bn=rt(Nn,2),qn=Bn[0],Ai=Bn[1];va(function(kt){(!kt||nr)&&Ai(!0)},[nr]);var Jo=D.useState(null),Mi=rt(Jo,2),li=Mi[0],_i=Mi[1],Sa=D.useState(null),Fa=rt(Sa,2),zn=Fa[0],Qo=Fa[1],Ja=function(ar){Qo([ar.clientX,ar.clientY])},Z=GUe(nr,me,X&&zn!==null?zn:Ge,k,B,V,Y),de=rt(Z,11),Ee=de[0],Re=de[1],fe=de[2],Xe=de[3],St=de[4],Rt=de[5],Pt=de[6],er=de[7],ir=de[8],It=de[9],tr=de[10],Gr=UUe($e,l,u,c),Wr=rt(Gr,2),Kr=Wr[0],pr=Wr[1],Wt=Kr.has("click"),yn=pr.has("click")||pr.has("contextMenu"),vr=La(function(){qn||tr()}),ni=function(){ot.current&&X&&yn&&Dr(!1)};WUe(nr,Ge,me,vr,ni),va(function(){vr()},[zn,k]),va(function(){nr&&!(B!=null&&B[k])&&vr()},[JSON.stringify(V)]);var $r=D.useMemo(function(){var kt=HUe(B,a,It,X);return st(kt,W==null?void 0:W(It))},[It,W,B,a,X]);D.useImperativeHandle(n,function(){return{nativeElement:ht.current,popupElement:Ie.current,forceAlign:vr}});var gr=D.useState(0),Yr=rt(gr,2),xr=Yr[0],cn=Yr[1],Wn=D.useState(0),Sn=rt(Wn,2),ui=Sn[0],Lo=Sn[1],Tr=function(){if($&&Ge){var ar=Ge.getBoundingClientRect();cn(ar.width),Lo(ar.height)}},xs=function(){Tr(),vr()},Zl=function(ar){Ai(!1),tr(),p==null||p(ar)},cl=function(){return new Promise(function(ar){Tr(),_i(function(){return ar})})};va(function(){li&&(tr(),li(),_i(null))},[li]);function es(kt,ar,Un,Zn){rr[kt]=function(En){var Nh;Zn==null||Zn(En),Dr(ar,Un);for(var P0=arguments.length,rf=new Array(P0>1?P0-1:0),Ql=1;Ql<P0;Ql++)rf[Ql-1]=arguments[Ql];(Nh=zt[kt])===null||Nh===void 0||Nh.call.apply(Nh,[zt,En].concat(rf))}}(Wt||yn)&&(rr.onClick=function(kt){var ar;ot.current&&yn?Dr(!1):!ot.current&&Wt&&(Ja(kt),Dr(!0));for(var Un=arguments.length,Zn=new Array(Un>1?Un-1:0),En=1;En<Un;En++)Zn[En-1]=arguments[En];(ar=zt.onClick)===null||ar===void 0||ar.call.apply(ar,[zt,kt].concat(Zn))});var ev=$Ue(nr,yn,Ge,me,b,w,ce,Dr),M0=Kr.has("hover"),tv=pr.has("hover"),Ri,Qa;M0&&(es("onMouseEnter",!0,v,function(kt){Ja(kt)}),es("onPointerEnter",!0,v,function(kt){Ja(kt)}),Ri=function(ar){(nr||qn)&&me!==null&&me!==void 0&&me.contains(ar.target)&&Dr(!0,v)},X&&(rr.onMouseMove=function(kt){var ar;(ar=zt.onMouseMove)===null||ar===void 0||ar.call(zt,kt)})),tv&&(es("onMouseLeave",!1,m),es("onPointerLeave",!1,m),Qa=function(){Dr(!1,m)}),Kr.has("focus")&&es("onFocus",!0,x),pr.has("focus")&&es("onBlur",!1,S),Kr.has("contextMenu")&&(rr.onContextMenu=function(kt){var ar;ot.current&&pr.has("contextMenu")?Dr(!1):(Ja(kt),Dr(!0)),kt.preventDefault();for(var Un=arguments.length,Zn=new Array(Un>1?Un-1:0),En=1;En<Un;En++)Zn[En-1]=arguments[En];(ar=zt.onContextMenu)===null||ar===void 0||ar.call.apply(ar,[zt,kt].concat(Zn))}),Le&&(rr.className=st(zt.className,Le));var eo=we(we({},zt),rr),ba={},Ss=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Ss.forEach(function(kt){Q[kt]&&(ba[kt]=function(){for(var ar,Un=arguments.length,Zn=new Array(Un),En=0;En<Un;En++)Zn[En]=arguments[En];(ar=eo[kt])===null||ar===void 0||ar.call.apply(ar,[eo].concat(Zn)),Q[kt].apply(Q,Zn)})});var Jl=D.cloneElement(Qt,we(we({},eo),ba)),ts={x:Rt,y:Pt},R0=ee?we({},ee!==!0?ee:{}):null;return D.createElement(D.Fragment,null,D.createElement(F2,{disabled:!nr,ref:ut,onResize:xs},D.createElement(zUe,{getTriggerDOMNode:Be},Jl)),D.createElement(uX.Provider,{value:j},D.createElement(BUe,{portal:t,ref:He,prefixCls:a,popup:L,className:st(I,$r),style:N,target:Ge,onMouseEnter:Ri,onMouseLeave:Qa,onPointerEnter:Ri,zIndex:F,open:nr,keepDom:qn,fresh:H,onClick:te,onPointerDownCapture:ev,mask:b,motion:vt,maskMotion:Me,onVisibleChanged:Zl,onPrepare:cl,forceRender:M,autoDestroy:tt,getPopupContainer:E,align:It,arrow:R0,arrowPos:ts,ready:Ee,offsetX:Re,offsetY:fe,offsetR:Xe,offsetB:St,onAlign:vr,stretch:$,targetWidth:xr/er,targetHeight:ui/ir})))});return e}const Nie=XUe(x7),pT=t=>t?typeof t=="function"?t():t:null;function b7(t){var e=t.children,r=t.prefixCls,n=t.id,i=t.overlayInnerStyle,a=t.className,o=t.style;return D.createElement("div",{className:st("".concat(r,"-content"),a),style:o},D.createElement("div",{className:"".concat(r,"-inner"),id:n,role:"tooltip",style:i},typeof e=="function"?e():e))}var xg={shiftX:64,adjustY:1},Sg={adjustX:1,shiftY:!0},ks=[0,0],KUe={left:{points:["cr","cl"],overflow:Sg,offset:[-4,0],targetOffset:ks},right:{points:["cl","cr"],overflow:Sg,offset:[4,0],targetOffset:ks},top:{points:["bc","tc"],overflow:xg,offset:[0,-4],targetOffset:ks},bottom:{points:["tc","bc"],overflow:xg,offset:[0,4],targetOffset:ks},topLeft:{points:["bl","tl"],overflow:xg,offset:[0,-4],targetOffset:ks},leftTop:{points:["tr","tl"],overflow:Sg,offset:[-4,0],targetOffset:ks},topRight:{points:["br","tr"],overflow:xg,offset:[0,-4],targetOffset:ks},rightTop:{points:["tl","tr"],overflow:Sg,offset:[4,0],targetOffset:ks},bottomRight:{points:["tr","br"],overflow:xg,offset:[0,4],targetOffset:ks},rightBottom:{points:["bl","br"],overflow:Sg,offset:[4,0],targetOffset:ks},bottomLeft:{points:["tl","bl"],overflow:xg,offset:[0,4],targetOffset:ks},leftBottom:{points:["br","bl"],overflow:Sg,offset:[-4,0],targetOffset:ks}},YUe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],qUe=function(e,r){var n=e.overlayClassName,i=e.trigger,a=i===void 0?["hover"]:i,o=e.mouseEnterDelay,s=o===void 0?0:o,l=e.mouseLeaveDelay,u=l===void 0?.1:l,c=e.overlayStyle,f=e.prefixCls,h=f===void 0?"rc-tooltip":f,d=e.children,p=e.onVisibleChange,v=e.afterVisibleChange,g=e.transitionName,m=e.animation,x=e.motion,S=e.placement,b=S===void 0?"right":S,T=e.align,w=T===void 0?{}:T,E=e.destroyTooltipOnHide,M=E===void 0?!1:E,A=e.defaultVisible,R=e.getTooltipContainer,L=e.overlayInnerStyle;e.arrowContent;var I=e.overlay,N=e.id,k=e.showArrow,z=k===void 0?!0:k,B=Pn(e,YUe),V=D.useRef(null);D.useImperativeHandle(r,function(){return V.current});var F=we({},B);"visible"in e&&(F.popupVisible=e.visible);var $=function(){return D.createElement(b7,{key:"content",prefixCls:h,id:N,overlayInnerStyle:L},I)};return D.createElement(Nie,mr({popupClassName:n,prefixCls:h,popup:$,action:a,builtinPlacements:KUe,popupPlacement:b,ref:V,popupAlign:w,getPopupContainer:R,onPopupVisibleChange:p,afterPopupVisibleChange:v,popupTransitionName:g,popupAnimation:m,popupMotion:x,defaultPopupVisible:A,autoDestroy:M,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s,arrow:z},F),d)};const ZUe=D.forwardRef(qUe);function Oie(t){const{sizePopupArrow:e,borderRadiusXS:r,borderRadiusOuter:n}=t,i=e/2,a=0,o=i,s=n*1/Math.sqrt(2),l=i-n*(1-1/Math.sqrt(2)),u=i-r*(1/Math.sqrt(2)),c=n*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),f=2*i-u,h=c,d=2*i-s,p=l,v=2*i-a,g=o,m=i*Math.sqrt(2)+n*(Math.sqrt(2)-2),x=n*(Math.sqrt(2)-1),S=`polygon(${x}px 100%, 50% ${x}px, ${2*i-x}px 100%, ${x}px 100%)`,b=`path('M ${a} ${o} A ${n} ${n} 0 0 0 ${s} ${l} L ${u} ${c} A ${r} ${r} 0 0 1 ${f} ${h} L ${d} ${p} A ${n} ${n} 0 0 0 ${v} ${g} Z')`;return{arrowShadowWidth:m,arrowPath:b,arrowPolygon:S}}const JUe=(t,e,r)=>{const{sizePopupArrow:n,arrowPolygon:i,arrowPath:a,arrowShadowWidth:o,borderRadiusXS:s,calc:l}=t;return{pointerEvents:"none",width:n,height:n,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:n,height:l(n).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[i,a]},content:'""'},"&::after":{content:'""',position:"absolute",width:o,height:o,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Xt(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},kie=8;function w7(t){const{contentRadius:e,limitVerticalRadius:r}=t,n=e>12?e+2:12;return{arrowOffsetHorizontal:n,arrowOffsetVertical:r?kie:n}}function Zb(t,e){return t?e:{}}function Fie(t,e,r){const{componentCls:n,boxShadowPopoverArrow:i,arrowOffsetVertical:a,arrowOffsetHorizontal:o}=t,{arrowDistance:s=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}={};return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({[`${n}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},JUe(t,e,i)),{"&:before":{background:e}})]},Zb(!!l.top,{[[`&-placement-top > ${n}-arrow`,`&-placement-topLeft > ${n}-arrow`,`&-placement-topRight > ${n}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":o,[`> ${n}-arrow`]:{left:{_skip_check_:!0,value:o}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Xt(o)})`,[`> ${n}-arrow`]:{right:{_skip_check_:!0,value:o}}}})),Zb(!!l.bottom,{[[`&-placement-bottom > ${n}-arrow`,`&-placement-bottomLeft > ${n}-arrow`,`&-placement-bottomRight > ${n}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":o,[`> ${n}-arrow`]:{left:{_skip_check_:!0,value:o}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Xt(o)})`,[`> ${n}-arrow`]:{right:{_skip_check_:!0,value:o}}}})),Zb(!!l.left,{[[`&-placement-left > ${n}-arrow`,`&-placement-leftTop > ${n}-arrow`,`&-placement-leftBottom > ${n}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${n}-arrow`]:{top:a},[`&-placement-leftBottom > ${n}-arrow`]:{bottom:a}})),Zb(!!l.right,{[[`&-placement-right > ${n}-arrow`,`&-placement-rightTop > ${n}-arrow`,`&-placement-rightBottom > ${n}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${n}-arrow`]:{top:a},[`&-placement-rightBottom > ${n}-arrow`]:{bottom:a}}))}}function QUe(t,e,r,n){if(n===!1)return{adjustX:!1,adjustY:!1};const i=n&&typeof n=="object"?n:{},a={};switch(t){case"top":case"bottom":a.shiftX=e.arrowOffsetHorizontal*2+r,a.shiftY=!0,a.adjustY=!0;break;case"left":case"right":a.shiftY=e.arrowOffsetVertical*2+r,a.shiftX=!0,a.adjustX=!0;break}const o=Object.assign(Object.assign({},a),i);return o.shiftX||(o.adjustX=!0),o.shiftY||(o.adjustY=!0),o}const gX={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},eVe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},tVe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function rVe(t){const{arrowWidth:e,autoAdjustOverflow:r,arrowPointAtCenter:n,offset:i,borderRadius:a,visibleFirst:o}=t,s=e/2,l={};return Object.keys(gX).forEach(u=>{const c=n&&eVe[u]||gX[u],f=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(l[u]=f,tVe.has(u)&&(f.autoArrow=!1),u){case"top":case"topLeft":case"topRight":f.offset[1]=-s-i;break;case"bottom":case"bottomLeft":case"bottomRight":f.offset[1]=s+i;break;case"left":case"leftTop":case"leftBottom":f.offset[0]=-s-i;break;case"right":case"rightTop":case"rightBottom":f.offset[0]=s+i;break}const h=w7({contentRadius:a,limitVerticalRadius:!0});if(n)switch(u){case"topLeft":case"bottomLeft":f.offset[0]=-h.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":f.offset[0]=h.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":f.offset[1]=-h.arrowOffsetHorizontal*2+s;break;case"leftBottom":case"rightBottom":f.offset[1]=h.arrowOffsetHorizontal*2-s;break}f.overflow=QUe(u,h,e,r),o&&(f.htmlRegion="visibleFirst")}),l}const nVe=t=>{const{componentCls:e,tooltipMaxWidth:r,tooltipColor:n,tooltipBg:i,tooltipBorderRadius:a,zIndexPopup:o,controlHeight:s,boxShadowSecondary:l,paddingSM:u,paddingXS:c}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},Zp(t)),{position:"absolute",zIndex:o,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${e}-inner`]:{minWidth:"1em",minHeight:s,padding:`${Xt(t.calc(u).div(2).equal())} ${Xt(c)}`,color:n,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:a,boxShadow:l,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${e}-inner`]:{borderRadius:t.min(a,kie)}},[`${e}-content`]:{position:"relative"}}),s7(t,(f,h)=>{let{darkColor:d}=h;return{[`&${e}-${f}`]:{[`${e}-inner`]:{backgroundColor:d},[`${e}-arrow`]:{"--antd-arrow-background-color":d}}}})),{"&-rtl":{direction:"rtl"}})},Fie(t,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},iVe=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},w7({contentRadius:t.borderRadius,limitVerticalRadius:!0})),Oie(Ao(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),Bie=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ef("Tooltip",n=>{const{borderRadius:i,colorTextLightSolid:a,colorBgSpotlight:o}=n,s=Ao(n,{tooltipMaxWidth:250,tooltipColor:a,tooltipBorderRadius:i,tooltipBg:o});return[nVe(s),h7(n,"zoom-big-fast")]},iVe,{resetStyle:!1,injectStyle:e})(t)},aVe=t2.map(t=>`${t}-inverse`);function T7(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Yt(aVe),Yt(t2)).includes(t):t2.includes(t)}function zie(t,e){const r=T7(e),n=st({[`${t}-${e}`]:e&&r}),i={},a={};return e&&!r&&(i.background=e,a["--antd-arrow-background-color"]=e),{className:n,overlayStyle:i,arrowStyle:a}}const oVe=t=>{const{prefixCls:e,className:r,placement:n="top",title:i,color:a,overlayInnerStyle:o}=t,{getPrefixCls:s}=D.useContext(xn),l=s("tooltip",e),[u,c,f]=Bie(l),h=zie(l,a),d=h.arrowStyle,p=Object.assign(Object.assign({},o),h.overlayStyle),v=st(c,f,l,`${l}-pure`,`${l}-placement-${n}`,r,h.className);return u(D.createElement("div",{className:v,style:d},D.createElement("div",{className:`${l}-arrow`}),D.createElement(b7,Object.assign({},t,{className:c,prefixCls:l,overlayInnerStyle:p}),i)))};var sVe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const lVe=D.forwardRef((t,e)=>{var r,n;const{prefixCls:i,openClassName:a,getTooltipContainer:o,overlayClassName:s,color:l,overlayInnerStyle:u,children:c,afterOpenChange:f,afterVisibleChange:h,destroyTooltipOnHide:d,arrow:p=!0,title:v,overlay:g,builtinPlacements:m,arrowPointAtCenter:x=!1,autoAdjustOverflow:S=!0}=t,b=!!p,[,T]=Ih(),{getPopupContainer:w,getPrefixCls:E,direction:M}=D.useContext(xn),A=zne(),R=D.useRef(null),L=()=>{var ie;(ie=R.current)===null||ie===void 0||ie.forceAlign()};D.useImperativeHandle(e,()=>{var ie;return{forceAlign:L,forcePopupAlign:()=>{A.deprecated(!1,"forcePopupAlign","forceAlign"),L()},nativeElement:(ie=R.current)===null||ie===void 0?void 0:ie.nativeElement}});const[I,N]=_p(!1,{value:(r=t.open)!==null&&r!==void 0?r:t.visible,defaultValue:(n=t.defaultOpen)!==null&&n!==void 0?n:t.defaultVisible}),k=!v&&!g&&v!==0,z=ie=>{var Ce,ye;N(k?!1:ie),k||((Ce=t.onOpenChange)===null||Ce===void 0||Ce.call(t,ie),(ye=t.onVisibleChange)===null||ye===void 0||ye.call(t,ie))},B=D.useMemo(()=>{var ie,Ce;let ye=x;return typeof p=="object"&&(ye=(Ce=(ie=p.pointAtCenter)!==null&&ie!==void 0?ie:p.arrowPointAtCenter)!==null&&Ce!==void 0?Ce:x),m||rVe({arrowPointAtCenter:ye,autoAdjustOverflow:S,arrowWidth:b?T.sizePopupArrow:0,borderRadius:T.borderRadius,offset:T.marginXXS,visibleFirst:!0})},[x,p,m,T]),V=D.useMemo(()=>v===0?v:g||v||"",[g,v]),F=D.createElement(Pie,{space:!0},typeof V=="function"?V():V),{getPopupContainer:$,placement:W="top",mouseEnterDelay:H=.1,mouseLeaveDelay:X=.1,overlayStyle:te,rootClassName:Y}=t,ee=sVe(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),se=E("tooltip",i),ne=E(),le=t["data-popover-inject"];let pe=I;!("open"in t)&&!("visible"in t)&&k&&(pe=!1);const Se=D.isValidElement(c)&&!die(c)?c:D.createElement("span",null,c),_e=Se.props,Le=!_e.className||typeof _e.className=="string"?st(_e.className,a||`${se}-open`):_e.className,[Be,Q,tt]=Bie(se,!le),je=zie(se,l),Ye=je.arrowStyle,$e=Object.assign(Object.assign({},u),je.overlayStyle),wt=st(s,{[`${se}-rtl`]:M==="rtl"},je.className,Y,Q,tt),[We,q]=B2("Tooltip",ee.zIndex),j=D.createElement(ZUe,Object.assign({},ee,{zIndex:We,showArrow:b,placement:W,mouseEnterDelay:H,mouseLeaveDelay:X,prefixCls:se,overlayClassName:wt,overlayStyle:Object.assign(Object.assign({},Ye),te),getTooltipContainer:$||o||w,ref:R,builtinPlacements:B,overlay:F,visible:pe,onVisibleChange:z,afterVisibleChange:f!=null?f:h,overlayInnerStyle:$e,arrowContent:D.createElement("span",{className:`${se}-arrow-content`}),motion:{motionName:fT(ne,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!d}),pe?tf(Se,{className:Le}):Se);return Be(D.createElement(c7.Provider,{value:q},j))}),F4=lVe;F4._InternalPanelDoNotUseOrYouWillBeFired=oVe;const uVe=t=>{const{componentCls:e,popoverColor:r,titleMinWidth:n,fontWeightStrong:i,innerPadding:a,boxShadowSecondary:o,colorTextHeading:s,borderRadiusLG:l,zIndexPopup:u,titleMarginBottom:c,colorBgElevated:f,popoverBg:h,titleBorderBottom:d,innerContentPadding:p,titlePadding:v}=t;return[{[e]:Object.assign(Object.assign({},Zp(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":f,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${e}-content`]:{position:"relative"},[`${e}-inner`]:{backgroundColor:h,backgroundClip:"padding-box",borderRadius:l,boxShadow:o,padding:a},[`${e}-title`]:{minWidth:n,marginBottom:c,color:s,fontWeight:i,borderBottom:d,padding:v},[`${e}-inner-content`]:{color:r,padding:p}})},Fie(t,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${e}-content`]:{display:"inline-block"}}}]},cVe=t=>{const{componentCls:e}=t;return{[e]:t2.map(r=>{const n=t[`${r}6`];return{[`&${e}-${r}`]:{"--antd-arrow-background-color":n,[`${e}-inner`]:{backgroundColor:n},[`${e}-arrow`]:{background:"transparent"}}}})}},fVe=t=>{const{lineWidth:e,controlHeight:r,fontHeight:n,padding:i,wireframe:a,zIndexPopupBase:o,borderRadiusLG:s,marginXS:l,lineType:u,colorSplit:c,paddingSM:f}=t,h=r-n,d=h/2,p=h/2-e,v=i;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:o+30},Oie(t)),w7({contentRadius:s,limitVerticalRadius:!0})),{innerPadding:a?0:12,titleMarginBottom:a?0:l,titlePadding:a?`${d}px ${v}px ${p}px`:0,titleBorderBottom:a?`${e}px ${u} ${c}`:"none",innerContentPadding:a?`${f}px ${v}px`:0})},Uie=ef("Popover",t=>{const{colorBgElevated:e,colorText:r}=t,n=Ao(t,{popoverBg:e,popoverColor:r});return[uVe(n),cVe(n),h7(n,"zoom-big")]},fVe,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var hVe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const Vie=t=>{let{title:e,content:r,prefixCls:n}=t;return!e&&!r?null:D.createElement(D.Fragment,null,e&&D.createElement("div",{className:`${n}-title`},e),r&&D.createElement("div",{className:`${n}-inner-content`},r))},dVe=t=>{const{hashId:e,prefixCls:r,className:n,style:i,placement:a="top",title:o,content:s,children:l}=t,u=pT(o),c=pT(s),f=st(e,r,`${r}-pure`,`${r}-placement-${a}`,n);return D.createElement("div",{className:f,style:i},D.createElement("div",{className:`${r}-arrow`}),D.createElement(b7,Object.assign({},t,{className:e,prefixCls:r}),l||D.createElement(Vie,{prefixCls:r,title:u,content:c})))},pVe=t=>{const{prefixCls:e,className:r}=t,n=hVe(t,["prefixCls","className"]),{getPrefixCls:i}=D.useContext(xn),a=i("popover",e),[o,s,l]=Uie(a);return o(D.createElement(dVe,Object.assign({},n,{prefixCls:a,hashId:s,className:st(r,l)})))};var vVe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const gVe=D.forwardRef((t,e)=>{var r,n;const{prefixCls:i,title:a,content:o,overlayClassName:s,placement:l="top",trigger:u="hover",children:c,mouseEnterDelay:f=.1,mouseLeaveDelay:h=.1,onOpenChange:d,overlayStyle:p={}}=t,v=vVe(t,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:g}=D.useContext(xn),m=g("popover",i),[x,S,b]=Uie(m),T=g(),w=st(s,S,b),[E,M]=_p(!1,{value:(r=t.open)!==null&&r!==void 0?r:t.visible,defaultValue:(n=t.defaultOpen)!==null&&n!==void 0?n:t.defaultVisible}),A=(k,z)=>{M(k,!0),d==null||d(k,z)},R=k=>{k.keyCode===jt.ESC&&A(!1,k)},L=k=>{A(k)},I=pT(a),N=pT(o);return x(D.createElement(F4,Object.assign({placement:l,trigger:u,mouseEnterDelay:f,mouseLeaveDelay:h,overlayStyle:p},v,{prefixCls:m,overlayClassName:w,ref:e,open:E,onOpenChange:L,overlay:I||N?D.createElement(Vie,{prefixCls:m,title:I,content:N}):null,transitionName:fT(T,"zoom-big",v.transitionName),"data-popover-inject":!0}),tf(c,{onKeyDown:k=>{var z,B;D.isValidElement(c)&&((B=c==null?void 0:(z=c.props).onKeyDown)===null||B===void 0||B.call(z,k)),R(k)}})))}),W3=gVe;W3._InternalPanelDoNotUseOrYouWillBeFired=pVe;const mVe=new tn("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),yVe=new tn("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),_Ve=new tn("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),xVe=new tn("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),SVe=new tn("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),bVe=new tn("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),wVe=t=>{const{componentCls:e,iconCls:r,antCls:n,badgeShadowSize:i,textFontSize:a,textFontSizeSM:o,statusSize:s,dotSize:l,textFontWeight:u,indicatorHeight:c,indicatorHeightSM:f,marginXS:h,calc:d}=t,p=`${n}-scroll-number`,v=s7(t,(g,m)=>{let{darkColor:x}=m;return{[`&${e} ${e}-color-${g}`]:{background:x,[`&:not(${e}-count)`]:{color:x},"a:hover &":{background:x}}}});return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},Zp(t)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${e}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:t.indicatorZIndex,minWidth:c,height:c,color:t.badgeTextColor,fontWeight:u,fontSize:a,lineHeight:Xt(c),whiteSpace:"nowrap",textAlign:"center",background:t.badgeColor,borderRadius:d(c).div(2).equal(),boxShadow:`0 0 0 ${Xt(i)} ${t.badgeShadowColor}`,transition:`background ${t.motionDurationMid}`,a:{color:t.badgeTextColor},"a:hover":{color:t.badgeTextColor},"a:hover &":{background:t.badgeColorHover}},[`${e}-count-sm`]:{minWidth:f,height:f,fontSize:o,lineHeight:Xt(f),borderRadius:d(f).div(2).equal()},[`${e}-multiple-words`]:{padding:`0 ${Xt(t.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${e}-dot`]:{zIndex:t.indicatorZIndex,width:l,minWidth:l,height:l,background:t.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${Xt(i)} ${t.badgeShadowColor}`},[`${e}-count, ${e}-dot, ${p}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${r}-spin`]:{animationName:bVe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${e}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${e}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:s,height:s,verticalAlign:"middle",borderRadius:"50%"},[`${e}-status-success`]:{backgroundColor:t.colorSuccess},[`${e}-status-processing`]:{overflow:"visible",color:t.colorInfo,backgroundColor:t.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:i,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:mVe,animationDuration:t.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${e}-status-default`]:{backgroundColor:t.colorTextPlaceholder},[`${e}-status-error`]:{backgroundColor:t.colorError},[`${e}-status-warning`]:{backgroundColor:t.colorWarning},[`${e}-status-text`]:{marginInlineStart:h,color:t.colorText,fontSize:t.fontSize}}}),v),{[`${e}-zoom-appear, ${e}-zoom-enter`]:{animationName:yVe,animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseOutBack,animationFillMode:"both"},[`${e}-zoom-leave`]:{animationName:_Ve,animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseOutBack,animationFillMode:"both"},[`&${e}-not-a-wrapper`]:{[`${e}-zoom-appear, ${e}-zoom-enter`]:{animationName:xVe,animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseOutBack},[`${e}-zoom-leave`]:{animationName:SVe,animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseOutBack},[`&:not(${e}-status)`]:{verticalAlign:"middle"},[`${p}-custom-component, ${e}-count`]:{transform:"none"},[`${p}-custom-component, ${p}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[p]:{overflow:"hidden",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack}`,[`${p}-only`]:{position:"relative",display:"inline-block",height:c,transition:`all ${t.motionDurationSlow} ${t.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${p}-only-unit`]:{height:c,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${p}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${e}-count, ${e}-dot, ${p}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},Hie=t=>{const{fontHeight:e,lineWidth:r,marginXS:n,colorBorderBg:i}=t,a=e,o=r,s=t.colorTextLightSolid,l=t.colorError,u=t.colorErrorHover;return Ao(t,{badgeFontHeight:a,badgeShadowSize:o,badgeTextColor:s,badgeColor:l,badgeColorHover:u,badgeShadowColor:i,badgeProcessingDuration:"1.2s",badgeRibbonOffset:n,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Gie=t=>{const{fontSize:e,lineHeight:r,fontSizeSM:n,lineWidth:i}=t;return{indicatorZIndex:"auto",indicatorHeight:Math.round(e*r)-2*i,indicatorHeightSM:e,dotSize:n/2,textFontSize:n,textFontSizeSM:n,textFontWeight:"normal",statusSize:n/2}},TVe=ef("Badge",t=>{const e=Hie(t);return wVe(e)},Gie),CVe=t=>{const{antCls:e,badgeFontHeight:r,marginXS:n,badgeRibbonOffset:i,calc:a}=t,o=`${e}-ribbon`,s=`${e}-ribbon-wrapper`,l=s7(t,(u,c)=>{let{darkColor:f}=c;return{[`&${o}-color-${u}`]:{background:f,color:f}}});return{[s]:{position:"relative"},[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Zp(t)),{position:"absolute",top:n,padding:`0 ${Xt(t.paddingXS)}`,color:t.colorPrimary,lineHeight:Xt(r),whiteSpace:"nowrap",backgroundColor:t.colorPrimary,borderRadius:t.borderRadiusSM,[`${o}-text`]:{color:t.badgeTextColor},[`${o}-corner`]:{position:"absolute",top:"100%",width:i,height:i,color:"currentcolor",border:`${Xt(a(i).div(2).equal())} solid`,transform:t.badgeRibbonCornerTransform,transformOrigin:"top",filter:t.badgeRibbonCornerFilter}}),l),{[`&${o}-placement-end`]:{insetInlineEnd:a(i).mul(-1).equal(),borderEndEndRadius:0,[`${o}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${o}-placement-start`]:{insetInlineStart:a(i).mul(-1).equal(),borderEndStartRadius:0,[`${o}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},EVe=ef(["Badge","Ribbon"],t=>{const e=Hie(t);return CVe(e)},Gie),AVe=t=>{const{className:e,prefixCls:r,style:n,color:i,children:a,text:o,placement:s="end",rootClassName:l}=t,{getPrefixCls:u,direction:c}=D.useContext(xn),f=u("ribbon",r),h=`${f}-wrapper`,[d,p,v]=EVe(f,h),g=T7(i,!1),m=st(f,`${f}-placement-${s}`,{[`${f}-rtl`]:c==="rtl",[`${f}-color-${i}`]:g},e),x={},S={};return i&&!g&&(x.background=i,S.color=i),d(D.createElement("div",{className:st(h,l,p,v)},a,D.createElement("div",{className:st(m,p),style:Object.assign(Object.assign({},x),n)},D.createElement("span",{className:`${f}-text`},o),D.createElement("div",{className:`${f}-corner`,style:S}))))},mX=t=>{const{prefixCls:e,value:r,current:n,offset:i=0}=t;let a;return i&&(a={position:"absolute",top:`${i}00%`,left:0}),D.createElement("span",{style:a,className:st(`${e}-only-unit`,{current:n})},r)};function MVe(t,e,r){let n=t,i=0;for(;(n+10)%10!==e;)n+=r,i+=r;return i}const RVe=t=>{const{prefixCls:e,count:r,value:n}=t,i=Number(n),a=Math.abs(r),[o,s]=D.useState(i),[l,u]=D.useState(a),c=()=>{s(i),u(a)};D.useEffect(()=>{const d=setTimeout(c,1e3);return()=>clearTimeout(d)},[i]);let f,h;if(o===i||Number.isNaN(i)||Number.isNaN(o))f=[D.createElement(mX,Object.assign({},t,{key:i,current:!0}))],h={transition:"none"};else{f=[];const d=i+10,p=[];for(let x=i;x<=d;x+=1)p.push(x);const v=l<a?1:-1,g=p.findIndex(x=>x%10===o);f=(v<0?p.slice(0,g+1):p.slice(g)).map((x,S)=>{const b=x%10;return D.createElement(mX,Object.assign({},t,{key:x,value:b,offset:v<0?S-g:S,current:S===g}))}),h={transform:`translateY(${-MVe(o,i,v)}00%)`}}return D.createElement("span",{className:`${e}-only`,style:h,onTransitionEnd:c},f)};var PVe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const LVe=D.forwardRef((t,e)=>{const{prefixCls:r,count:n,className:i,motionClassName:a,style:o,title:s,show:l,component:u="sup",children:c}=t,f=PVe(t,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:h}=D.useContext(xn),d=h("scroll-number",r),p=Object.assign(Object.assign({},f),{"data-show":l,style:o,className:st(d,i,a),title:s});let v=n;if(n&&Number(n)%1===0){const g=String(n).split("");v=D.createElement("bdi",null,g.map((m,x)=>D.createElement(RVe,{prefixCls:d,count:Number(n),value:m,key:g.length-x})))}return o!=null&&o.borderColor&&(p.style=Object.assign(Object.assign({},o),{boxShadow:`0 0 0 1px ${o.borderColor} inset`})),c?tf(c,g=>({className:st(`${d}-custom-component`,g==null?void 0:g.className,a)})):D.createElement(u,Object.assign({},p,{ref:e}),v)});var DVe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const IVe=D.forwardRef((t,e)=>{var r,n,i,a,o;const{prefixCls:s,scrollNumberPrefixCls:l,children:u,status:c,text:f,color:h,count:d=null,overflowCount:p=99,dot:v=!1,size:g="default",title:m,offset:x,style:S,className:b,rootClassName:T,classNames:w,styles:E,showZero:M=!1}=t,A=DVe(t,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:R,direction:L,badge:I}=D.useContext(xn),N=R("badge",s),[k,z,B]=TVe(N),V=d>p?`${p}+`:d,F=V==="0"||V===0,$=d===null||F&&!M,W=(c!=null||h!=null)&&$,H=v&&!F,X=H?"":V,te=D.useMemo(()=>(X==null||X===""||F&&!M)&&!H,[X,F,M,H]),Y=D.useRef(d);te||(Y.current=d);const ee=Y.current,se=D.useRef(X);te||(se.current=X);const ne=se.current,le=D.useRef(H);te||(le.current=H);const pe=D.useMemo(()=>{if(!x)return Object.assign(Object.assign({},I==null?void 0:I.style),S);const Ye={marginTop:x[1]};return L==="rtl"?Ye.left=parseInt(x[0],10):Ye.right=-parseInt(x[0],10),Object.assign(Object.assign(Object.assign({},Ye),I==null?void 0:I.style),S)},[L,x,S,I==null?void 0:I.style]),Se=m!=null?m:typeof ee=="string"||typeof ee=="number"?ee:void 0,_e=te||!f?null:D.createElement("span",{className:`${N}-status-text`},f),Le=!ee||typeof ee!="object"?void 0:tf(ee,Ye=>({style:Object.assign(Object.assign({},pe),Ye.style)})),Be=T7(h,!1),Q=st(w==null?void 0:w.indicator,(r=I==null?void 0:I.classNames)===null||r===void 0?void 0:r.indicator,{[`${N}-status-dot`]:W,[`${N}-status-${c}`]:!!c,[`${N}-color-${h}`]:Be}),tt={};h&&!Be&&(tt.color=h,tt.background=h);const je=st(N,{[`${N}-status`]:W,[`${N}-not-a-wrapper`]:!u,[`${N}-rtl`]:L==="rtl"},b,T,I==null?void 0:I.className,(n=I==null?void 0:I.classNames)===null||n===void 0?void 0:n.root,w==null?void 0:w.root,z,B);if(!u&&W){const Ye=pe.color;return k(D.createElement("span",Object.assign({},A,{className:je,style:Object.assign(Object.assign(Object.assign({},E==null?void 0:E.root),(i=I==null?void 0:I.styles)===null||i===void 0?void 0:i.root),pe)}),D.createElement("span",{className:Q,style:Object.assign(Object.assign(Object.assign({},E==null?void 0:E.indicator),(a=I==null?void 0:I.styles)===null||a===void 0?void 0:a.indicator),tt)}),f&&D.createElement("span",{style:{color:Ye},className:`${N}-status-text`},f)))}return k(D.createElement("span",Object.assign({ref:e},A,{className:je,style:Object.assign(Object.assign({},(o=I==null?void 0:I.styles)===null||o===void 0?void 0:o.root),E==null?void 0:E.root)}),u,D.createElement(Xl,{visible:!te,motionName:`${N}-zoom`,motionAppear:!1,motionDeadline:1e3},Ye=>{let{className:$e}=Ye;var wt,We;const q=R("scroll-number",l),j=le.current,ie=st(w==null?void 0:w.indicator,(wt=I==null?void 0:I.classNames)===null||wt===void 0?void 0:wt.indicator,{[`${N}-dot`]:j,[`${N}-count`]:!j,[`${N}-count-sm`]:g==="small",[`${N}-multiple-words`]:!j&&ne&&ne.toString().length>1,[`${N}-status-${c}`]:!!c,[`${N}-color-${h}`]:Be});let Ce=Object.assign(Object.assign(Object.assign({},E==null?void 0:E.indicator),(We=I==null?void 0:I.styles)===null||We===void 0?void 0:We.indicator),pe);return h&&!Be&&(Ce=Ce||{},Ce.background=h),D.createElement(LVe,{prefixCls:q,show:!te,motionClassName:$e,className:ie,count:ne,title:Se,style:Ce,key:"scrollNumber"},Le)}),_e))}),Wie=IVe;Wie.Ribbon=AVe;var $ie=D.createContext(null);function jie(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function Xie(t){var e=D.useContext($ie);return jie(e,t)}var NVe=["children","locked"],Kl=D.createContext(null);function OVe(t,e){var r=we({},t);return Object.keys(e).forEach(function(n){var i=e[n];i!==void 0&&(r[n]=i)}),r}function i2(t){var e=t.children,r=t.locked,n=Pn(t,NVe),i=D.useContext(Kl),a=E4(function(){return OVe(i,n)},[i,n],function(o,s){return!r&&(o[0]!==s[0]||!Y_(o[1],s[1],!0))});return D.createElement(Kl.Provider,{value:a},e)}var kVe=[],Kie=D.createContext(null);function B4(){return D.useContext(Kie)}var Yie=D.createContext(kVe);function A0(t){var e=D.useContext(Yie);return D.useMemo(function(){return t!==void 0?[].concat(Yt(e),[t]):e},[e,t])}var qie=D.createContext(null),C7=D.createContext({});function yX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(f7(t)){var r=t.nodeName.toLowerCase(),n=["input","select","textarea","button"].includes(r)||t.isContentEditable||r==="a"&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),a=Number(i),o=null;return i&&!Number.isNaN(a)?o=a:n&&o===null&&(o=0),n&&t.disabled&&(o=null),o!==null&&(o>=0||e&&o<0)}return!1}function FVe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=Yt(t.querySelectorAll("*")).filter(function(n){return yX(n,e)});return yX(t,e)&&r.unshift(t),r}var OP=jt.LEFT,kP=jt.RIGHT,FP=jt.UP,$3=jt.DOWN,j3=jt.ENTER,Zie=jt.ESC,n1=jt.HOME,i1=jt.END,_X=[FP,$3,OP,kP];function BVe(t,e,r,n){var i,a="prev",o="next",s="children",l="parent";if(t==="inline"&&n===j3)return{inlineTrigger:!0};var u=xe(xe({},FP,a),$3,o),c=xe(xe(xe(xe({},OP,r?o:a),kP,r?a:o),$3,s),j3,s),f=xe(xe(xe(xe(xe(xe({},FP,a),$3,o),j3,s),Zie,l),OP,r?s:l),kP,r?l:s),h={inline:u,horizontal:c,vertical:f,inlineSub:u,horizontalSub:f,verticalSub:f},d=(i=h["".concat(t).concat(e?"":"Sub")])===null||i===void 0?void 0:i[n];switch(d){case a:return{offset:-1,sibling:!0};case o:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}function zVe(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function UVe(t,e){for(var r=t||document.activeElement;r;){if(e.has(r))return r;r=r.parentElement}return null}function E7(t,e){var r=FVe(t,!0);return r.filter(function(n){return e.has(n)})}function xX(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var i=E7(t,e),a=i.length,o=i.findIndex(function(s){return r===s});return n<0?o===-1?o=a-1:o-=1:n>0&&(o+=1),o=(o+a)%a,i[o]}var BP=function(e,r){var n=new Set,i=new Map,a=new Map;return e.forEach(function(o){var s=document.querySelector("[data-menu-id='".concat(jie(r,o),"']"));s&&(n.add(s),a.set(s,o),i.set(o,s))}),{elements:n,key2element:i,element2key:a}};function VVe(t,e,r,n,i,a,o,s,l,u){var c=D.useRef(),f=D.useRef();f.current=e;var h=function(){Na.cancel(c.current)};return D.useEffect(function(){return function(){h()}},[]),function(d){var p=d.which;if([].concat(_X,[j3,Zie,n1,i1]).includes(p)){var v=a(),g=BP(v,n),m=g,x=m.elements,S=m.key2element,b=m.element2key,T=S.get(e),w=UVe(T,x),E=b.get(w),M=BVe(t,o(E,!0).length===1,r,p);if(!M&&p!==n1&&p!==i1)return;(_X.includes(p)||[n1,i1].includes(p))&&d.preventDefault();var A=function(V){if(V){var F=V,$=V.querySelector("a");$!=null&&$.getAttribute("href")&&(F=$);var W=b.get(V);s(W),h(),c.current=Na(function(){f.current===W&&F.focus()})}};if([n1,i1].includes(p)||M.sibling||!w){var R;!w||t==="inline"?R=i.current:R=zVe(w);var L,I=E7(R,x);p===n1?L=I[0]:p===i1?L=I[I.length-1]:L=xX(R,x,w,M.offset),A(L)}else if(M.inlineTrigger)l(E);else if(M.offset>0)l(E,!0),h(),c.current=Na(function(){g=BP(v,n);var B=w.getAttribute("aria-controls"),V=document.getElementById(B),F=xX(V,g.elements);A(F)},5);else if(M.offset<0){var N=o(E,!0),k=N[N.length-2],z=S.get(k);l(k,!1),A(z)}}u==null||u(d)}}function HVe(t){Promise.resolve().then(t)}var A7="__RC_UTIL_PATH_SPLIT__",SX=function(e){return e.join(A7)},GVe=function(e){return e.split(A7)},zP="rc-menu-more";function WVe(){var t=D.useState({}),e=rt(t,2),r=e[1],n=D.useRef(new Map),i=D.useRef(new Map),a=D.useState([]),o=rt(a,2),s=o[0],l=o[1],u=D.useRef(0),c=D.useRef(!1),f=function(){c.current||r({})},h=D.useCallback(function(S,b){var T=SX(b);i.current.set(T,S),n.current.set(S,T),u.current+=1;var w=u.current;HVe(function(){w===u.current&&f()})},[]),d=D.useCallback(function(S,b){var T=SX(b);i.current.delete(T),n.current.delete(S)},[]),p=D.useCallback(function(S){l(S)},[]),v=D.useCallback(function(S,b){var T=n.current.get(S)||"",w=GVe(T);return b&&s.includes(w[0])&&w.unshift(zP),w},[s]),g=D.useCallback(function(S,b){return S.filter(function(T){return T!==void 0}).some(function(T){var w=v(T,!0);return w.includes(b)})},[v]),m=function(){var b=Yt(n.current.keys());return s.length&&b.push(zP),b},x=D.useCallback(function(S){var b="".concat(n.current.get(S)).concat(A7),T=new Set;return Yt(i.current.keys()).forEach(function(w){w.startsWith(b)&&T.add(i.current.get(w))}),T},[]);return D.useEffect(function(){return function(){c.current=!0}},[]),{registerPath:h,unregisterPath:d,refreshOverflowKeys:p,isSubPathKey:g,getKeyPath:v,getKeys:m,getSubPathKeys:x}}function C1(t){var e=D.useRef(t);e.current=t;var r=D.useCallback(function(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(a))},[]);return t?r:void 0}var $Ve=Math.random().toFixed(5).toString().slice(2),bX=0;function jVe(t){var e=_p(t,{value:t}),r=rt(e,2),n=r[0],i=r[1];return D.useEffect(function(){bX+=1;var a="".concat($Ve,"-").concat(bX);i("rc-menu-uuid-".concat(a))},[]),n}function Jie(t,e,r,n){var i=D.useContext(Kl),a=i.activeKey,o=i.onActive,s=i.onInactive,l={active:a===t};return e||(l.onMouseEnter=function(u){r==null||r({key:t,domEvent:u}),o(t)},l.onMouseLeave=function(u){n==null||n({key:t,domEvent:u}),s(t)}),l}function Qie(t){var e=D.useContext(Kl),r=e.mode,n=e.rtl,i=e.inlineIndent;if(r!=="inline")return null;var a=t;return n?{paddingRight:a*i}:{paddingLeft:a*i}}function eae(t){var e=t.icon,r=t.props,n=t.children,i;return e===null||e===!1?null:(typeof e=="function"?i=D.createElement(e,we({},r)):typeof e!="boolean"&&(i=e),i||n||null)}var XVe=["item"];function vT(t){var e=t.item,r=Pn(t,XVe);return Object.defineProperty(r,"item",{get:function(){return Ka(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),r}var KVe=["title","attribute","elementRef"],YVe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],qVe=["active"],ZVe=function(t){Jc(r,t);var e=Qc(r);function r(){return oa(this,r),e.apply(this,arguments)}return sa(r,[{key:"render",value:function(){var i=this.props,a=i.title,o=i.attribute,s=i.elementRef,l=Pn(i,KVe),u=ql(l,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Ka(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),D.createElement(Ic.Item,mr({},o,{title:typeof a=="string"?a:void 0},u,{ref:s}))}}]),r}(D.Component),JVe=D.forwardRef(function(t,e){var r=t.style,n=t.className,i=t.eventKey;t.warnKey;var a=t.disabled,o=t.itemIcon,s=t.children,l=t.role,u=t.onMouseEnter,c=t.onMouseLeave,f=t.onClick,h=t.onKeyDown,d=t.onFocus,p=Pn(t,YVe),v=Xie(i),g=D.useContext(Kl),m=g.prefixCls,x=g.onItemClick,S=g.disabled,b=g.overflowDisabled,T=g.itemIcon,w=g.selectedKeys,E=g.onActive,M=D.useContext(C7),A=M._internalRenderMenuItem,R="".concat(m,"-item"),L=D.useRef(),I=D.useRef(),N=S||a,k=b0(e,I),z=A0(i),B=function(pe){return{key:i,keyPath:Yt(z).reverse(),item:L.current,domEvent:pe}},V=o||T,F=Jie(i,N,u,c),$=F.active,W=Pn(F,qVe),H=w.includes(i),X=Qie(z.length),te=function(pe){if(!N){var Se=B(pe);f==null||f(vT(Se)),x(Se)}},Y=function(pe){if(h==null||h(pe),pe.which===jt.ENTER){var Se=B(pe);f==null||f(vT(Se)),x(Se)}},ee=function(pe){E(i),d==null||d(pe)},se={};t.role==="option"&&(se["aria-selected"]=H);var ne=D.createElement(ZVe,mr({ref:L,elementRef:k,role:l===null?"none":l||"menuitem",tabIndex:a?null:-1,"data-menu-id":b&&v?null:v},ql(p,["extra"]),W,se,{component:"li","aria-disabled":a,style:we(we({},X),r),className:st(R,xe(xe(xe({},"".concat(R,"-active"),$),"".concat(R,"-selected"),H),"".concat(R,"-disabled"),N),n),onClick:te,onKeyDown:Y,onFocus:ee}),s,D.createElement(eae,{props:we(we({},t),{},{isSelected:H}),icon:V}));return A&&(ne=A(ne,t,{selected:H})),ne});function QVe(t,e){var r=t.eventKey,n=B4(),i=A0(r);return D.useEffect(function(){if(n)return n.registerPath(r,i),function(){n.unregisterPath(r,i)}},[i]),n?null:D.createElement(JVe,mr({},t,{ref:e}))}const z4=D.forwardRef(QVe);var eHe=["className","children"],tHe=function(e,r){var n=e.className,i=e.children,a=Pn(e,eHe),o=D.useContext(Kl),s=o.prefixCls,l=o.mode,u=o.rtl;return D.createElement("ul",mr({className:st(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),n),role:"menu"},a,{"data-menu-list":!0,ref:r}),i)},M7=D.forwardRef(tHe);M7.displayName="SubMenuList";function R7(t,e){return Nm(t).map(function(r,n){if(D.isValidElement(r)){var i,a,o=r.key,s=(i=(a=r.props)===null||a===void 0?void 0:a.eventKey)!==null&&i!==void 0?i:o,l=s==null;l&&(s="tmp_key-".concat([].concat(Yt(e),[n]).join("-")));var u={key:s,eventKey:s};return D.cloneElement(r,u)}return r})}var Xa={adjustX:1,adjustY:1},rHe={topLeft:{points:["bl","tl"],overflow:Xa},topRight:{points:["br","tr"],overflow:Xa},bottomLeft:{points:["tl","bl"],overflow:Xa},bottomRight:{points:["tr","br"],overflow:Xa},leftTop:{points:["tr","tl"],overflow:Xa},leftBottom:{points:["br","bl"],overflow:Xa},rightTop:{points:["tl","tr"],overflow:Xa},rightBottom:{points:["bl","br"],overflow:Xa}},nHe={topLeft:{points:["bl","tl"],overflow:Xa},topRight:{points:["br","tr"],overflow:Xa},bottomLeft:{points:["tl","bl"],overflow:Xa},bottomRight:{points:["tr","br"],overflow:Xa},rightTop:{points:["tr","tl"],overflow:Xa},rightBottom:{points:["br","bl"],overflow:Xa},leftTop:{points:["tl","tr"],overflow:Xa},leftBottom:{points:["bl","br"],overflow:Xa}};function tae(t,e,r){if(e)return e;if(r)return r[t]||r.other}var iHe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function aHe(t){var e=t.prefixCls,r=t.visible,n=t.children,i=t.popup,a=t.popupStyle,o=t.popupClassName,s=t.popupOffset,l=t.disabled,u=t.mode,c=t.onVisibleChange,f=D.useContext(Kl),h=f.getPopupContainer,d=f.rtl,p=f.subMenuOpenDelay,v=f.subMenuCloseDelay,g=f.builtinPlacements,m=f.triggerSubMenuAction,x=f.forceSubMenuRender,S=f.rootClassName,b=f.motion,T=f.defaultMotions,w=D.useState(!1),E=rt(w,2),M=E[0],A=E[1],R=we(d?we({},nHe):we({},rHe),g),L=iHe[u],I=tae(u,b,T),N=D.useRef(I);u!=="inline"&&(N.current=I);var k=we(we({},N.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),z=D.useRef();return D.useEffect(function(){return z.current=Na(function(){A(r)}),function(){Na.cancel(z.current)}},[r]),D.createElement(Nie,{prefixCls:e,popupClassName:st("".concat(e,"-popup"),xe({},"".concat(e,"-rtl"),d),o,S),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:h,builtinPlacements:R,popupPlacement:L,popupVisible:M,popup:i,popupStyle:a,popupAlign:s&&{offset:s},action:l?[]:[m],mouseEnterDelay:p,mouseLeaveDelay:v,onPopupVisibleChange:c,forceRender:x,popupMotion:k,fresh:!0},n)}function oHe(t){var e=t.id,r=t.open,n=t.keyPath,i=t.children,a="inline",o=D.useContext(Kl),s=o.prefixCls,l=o.forceSubMenuRender,u=o.motion,c=o.defaultMotions,f=o.mode,h=D.useRef(!1);h.current=f===a;var d=D.useState(!h.current),p=rt(d,2),v=p[0],g=p[1],m=h.current?r:!1;D.useEffect(function(){h.current&&g(!1)},[f]);var x=we({},tae(a,u,c));n.length>1&&(x.motionAppear=!1);var S=x.onVisibleChanged;return x.onVisibleChanged=function(b){return!h.current&&!b&&g(!0),S==null?void 0:S(b)},v?null:D.createElement(i2,{mode:a,locked:!h.current},D.createElement(Xl,mr({visible:m},x,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(b){var T=b.className,w=b.style;return D.createElement(M7,{id:e,className:T,style:w},i)}))}var sHe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],lHe=["active"],uHe=D.forwardRef(function(t,e){var r=t.style,n=t.className,i=t.title,a=t.eventKey;t.warnKey;var o=t.disabled,s=t.internalPopupClose,l=t.children,u=t.itemIcon,c=t.expandIcon,f=t.popupClassName,h=t.popupOffset,d=t.popupStyle,p=t.onClick,v=t.onMouseEnter,g=t.onMouseLeave,m=t.onTitleClick,x=t.onTitleMouseEnter,S=t.onTitleMouseLeave,b=Pn(t,sHe),T=Xie(a),w=D.useContext(Kl),E=w.prefixCls,M=w.mode,A=w.openKeys,R=w.disabled,L=w.overflowDisabled,I=w.activeKey,N=w.selectedKeys,k=w.itemIcon,z=w.expandIcon,B=w.onItemClick,V=w.onOpenChange,F=w.onActive,$=D.useContext(C7),W=$._internalRenderSubMenuItem,H=D.useContext(qie),X=H.isSubPathKey,te=A0(),Y="".concat(E,"-submenu"),ee=R||o,se=D.useRef(),ne=D.useRef(),le=u!=null?u:k,pe=c!=null?c:z,Se=A.includes(a),_e=!L&&Se,Le=X(N,a),Be=Jie(a,ee,x,S),Q=Be.active,tt=Pn(Be,lHe),je=D.useState(!1),Ye=rt(je,2),$e=Ye[0],wt=Ye[1],We=function(ut){ee||wt(ut)},q=function(ut){We(!0),v==null||v({key:a,domEvent:ut})},j=function(ut){We(!1),g==null||g({key:a,domEvent:ut})},ie=D.useMemo(function(){return Q||(M!=="inline"?$e||X([I],a):!1)},[M,Q,I,$e,a,X]),Ce=Qie(te.length),ye=function(ut){ee||(m==null||m({key:a,domEvent:ut}),M==="inline"&&V(a,!Se))},me=C1(function(ht){p==null||p(vT(ht)),B(ht)}),qe=function(ut){M!=="inline"&&V(a,ut)},Ie=function(){F(a)},He=T&&"".concat(T,"-popup"),Et=D.createElement("div",mr({role:"menuitem",style:Ce,className:"".concat(Y,"-title"),tabIndex:ee?null:-1,ref:se,title:typeof i=="string"?i:null,"data-menu-id":L&&T?null:T,"aria-expanded":_e,"aria-haspopup":!0,"aria-controls":He,"aria-disabled":ee,onClick:ye,onFocus:Ie},tt),i,D.createElement(eae,{icon:M!=="horizontal"?pe:void 0,props:we(we({},t),{},{isOpen:_e,isSubMenu:!0})},D.createElement("i",{className:"".concat(Y,"-arrow")}))),Fe=D.useRef(M);if(M!=="inline"&&te.length>1?Fe.current="vertical":Fe.current=M,!L){var Ge=Fe.current;Et=D.createElement(aHe,{mode:Ge,prefixCls:Y,visible:!s&&_e&&M!=="inline",popupClassName:f,popupOffset:h,popupStyle:d,popup:D.createElement(i2,{mode:Ge==="horizontal"?"vertical":Ge},D.createElement(M7,{id:He,ref:ne},l)),disabled:ee,onVisibleChange:qe},Et)}var lt=D.createElement(Ic.Item,mr({ref:e,role:"none"},b,{component:"li",style:r,className:st(Y,"".concat(Y,"-").concat(M),n,xe(xe(xe(xe({},"".concat(Y,"-open"),_e),"".concat(Y,"-active"),ie),"".concat(Y,"-selected"),Le),"".concat(Y,"-disabled"),ee)),onMouseEnter:q,onMouseLeave:j}),Et,!L&&D.createElement(oHe,{id:He,open:_e,keyPath:te},l));return W&&(lt=W(lt,t,{selected:Le,active:ie,open:_e,disabled:ee})),D.createElement(i2,{onItemClick:me,mode:M==="horizontal"?"vertical":M,itemIcon:le,expandIcon:pe},lt)}),U4=D.forwardRef(function(t,e){var r=t.eventKey,n=t.children,i=A0(r),a=R7(n,i),o=B4();D.useEffect(function(){if(o)return o.registerPath(r,i),function(){o.unregisterPath(r,i)}},[i]);var s;return o?s=a:s=D.createElement(uHe,mr({ref:e},t),a),D.createElement(Yie.Provider,{value:i},s)});function P7(t){var e=t.className,r=t.style,n=D.useContext(Kl),i=n.prefixCls,a=B4();return a?null:D.createElement("li",{role:"separator",className:st("".concat(i,"-item-divider"),e),style:r})}var cHe=["className","title","eventKey","children"],fHe=D.forwardRef(function(t,e){var r=t.className,n=t.title;t.eventKey;var i=t.children,a=Pn(t,cHe),o=D.useContext(Kl),s=o.prefixCls,l="".concat(s,"-item-group");return D.createElement("li",mr({ref:e,role:"presentation"},a,{onClick:function(c){return c.stopPropagation()},className:st(l,r)}),D.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:typeof n=="string"?n:void 0},n),D.createElement("ul",{role:"group",className:"".concat(l,"-list")},i))}),L7=D.forwardRef(function(t,e){var r=t.eventKey,n=t.children,i=A0(r),a=R7(n,i),o=B4();return o?a:D.createElement(fHe,mr({ref:e},ql(t,["warnKey"])),a)}),hHe=["label","children","key","type","extra"];function UP(t,e,r){var n=e.item,i=e.group,a=e.submenu,o=e.divider;return(t||[]).map(function(s,l){if(s&&wr(s)==="object"){var u=s,c=u.label,f=u.children,h=u.key,d=u.type,p=u.extra,v=Pn(u,hHe),g=h!=null?h:"tmp-".concat(l);return f||d==="group"?d==="group"?D.createElement(i,mr({key:g},v,{title:c}),UP(f,e,r)):D.createElement(a,mr({key:g},v,{title:c}),UP(f,e,r)):d==="divider"?D.createElement(o,mr({key:g},v)):D.createElement(n,mr({key:g},v,{extra:p}),c,(!!p||p===0)&&D.createElement("span",{className:"".concat(r,"-item-extra")},p))}return null}).filter(function(s){return s})}function wX(t,e,r,n,i){var a=t,o=we({divider:P7,item:z4,group:L7,submenu:U4},n);return e&&(a=UP(e,o,i)),R7(a,r)}var dHe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Dd=[],pHe=D.forwardRef(function(t,e){var r,n=t,i=n.prefixCls,a=i===void 0?"rc-menu":i,o=n.rootClassName,s=n.style,l=n.className,u=n.tabIndex,c=u===void 0?0:u,f=n.items,h=n.children,d=n.direction,p=n.id,v=n.mode,g=v===void 0?"vertical":v,m=n.inlineCollapsed,x=n.disabled,S=n.disabledOverflow,b=n.subMenuOpenDelay,T=b===void 0?.1:b,w=n.subMenuCloseDelay,E=w===void 0?.1:w,M=n.forceSubMenuRender,A=n.defaultOpenKeys,R=n.openKeys,L=n.activeKey,I=n.defaultActiveFirst,N=n.selectable,k=N===void 0?!0:N,z=n.multiple,B=z===void 0?!1:z,V=n.defaultSelectedKeys,F=n.selectedKeys,$=n.onSelect,W=n.onDeselect,H=n.inlineIndent,X=H===void 0?24:H,te=n.motion,Y=n.defaultMotions,ee=n.triggerSubMenuAction,se=ee===void 0?"hover":ee,ne=n.builtinPlacements,le=n.itemIcon,pe=n.expandIcon,Se=n.overflowedIndicator,_e=Se===void 0?"...":Se,Le=n.overflowedIndicatorPopupClassName,Be=n.getPopupContainer,Q=n.onClick,tt=n.onOpenChange,je=n.onKeyDown;n.openAnimation,n.openTransitionName;var Ye=n._internalRenderMenuItem,$e=n._internalRenderSubMenuItem,wt=n._internalComponents,We=Pn(n,dHe),q=D.useMemo(function(){return[wX(h,f,Dd,wt,a),wX(h,f,Dd,{},a)]},[h,f,wt]),j=rt(q,2),ie=j[0],Ce=j[1],ye=D.useState(!1),me=rt(ye,2),qe=me[0],Ie=me[1],He=D.useRef(),Et=jVe(p),Fe=d==="rtl",Ge=_p(A,{value:R,postState:function(gr){return gr||Dd}}),lt=rt(Ge,2),ht=lt[0],ut=lt[1],Qt=function(gr){var Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function xr(){ut(gr),tt==null||tt(gr)}Yr?l2.flushSync(xr):xr()},zt=D.useState(ht),rr=rt(zt,2),ce=rr[0],vt=rr[1],Me=D.useRef(!1),ke=D.useMemo(function(){return(g==="inline"||g==="vertical")&&m?["vertical",m]:[g,!1]},[g,m]),nt=rt(ke,2),et=nt[0],Gt=nt[1],nr=et==="inline",Mt=D.useState(et),ot=rt(Mt,2),mt=ot[0],Pr=ot[1],Yn=D.useState(Gt),Qr=rt(Yn,2),Dr=Qr[0],Nn=Qr[1];D.useEffect(function(){Pr(et),Nn(Gt),Me.current&&(nr?ut(ce):Qt(Dd))},[et,Gt]);var Bn=D.useState(0),qn=rt(Bn,2),Ai=qn[0],Jo=qn[1],Mi=Ai>=ie.length-1||mt!=="horizontal"||S;D.useEffect(function(){nr&&vt(ht)},[ht]),D.useEffect(function(){return Me.current=!0,function(){Me.current=!1}},[]);var li=WVe(),_i=li.registerPath,Sa=li.unregisterPath,Fa=li.refreshOverflowKeys,zn=li.isSubPathKey,Qo=li.getKeyPath,Ja=li.getKeys,Z=li.getSubPathKeys,de=D.useMemo(function(){return{registerPath:_i,unregisterPath:Sa}},[_i,Sa]),Ee=D.useMemo(function(){return{isSubPathKey:zn}},[zn]);D.useEffect(function(){Fa(Mi?Dd:ie.slice(Ai+1).map(function($r){return $r.key}))},[Ai,Mi]);var Re=_p(L||I&&((r=ie[0])===null||r===void 0?void 0:r.key),{value:L}),fe=rt(Re,2),Xe=fe[0],St=fe[1],Rt=C1(function($r){St($r)}),Pt=C1(function(){St(void 0)});D.useImperativeHandle(e,function(){return{list:He.current,focus:function(gr){var Yr,xr=Ja(),cn=BP(xr,Et),Wn=cn.elements,Sn=cn.key2element,ui=cn.element2key,Lo=E7(He.current,Wn),Tr=Xe!=null?Xe:Lo[0]?ui.get(Lo[0]):(Yr=ie.find(function(cl){return!cl.props.disabled}))===null||Yr===void 0?void 0:Yr.key,xs=Sn.get(Tr);if(Tr&&xs){var Zl;xs==null||(Zl=xs.focus)===null||Zl===void 0||Zl.call(xs,gr)}}}});var er=_p(V||[],{value:F,postState:function(gr){return Array.isArray(gr)?gr:gr==null?Dd:[gr]}}),ir=rt(er,2),It=ir[0],tr=ir[1],Gr=function(gr){if(k){var Yr=gr.key,xr=It.includes(Yr),cn;B?xr?cn=It.filter(function(Sn){return Sn!==Yr}):cn=[].concat(Yt(It),[Yr]):cn=[Yr],tr(cn);var Wn=we(we({},gr),{},{selectedKeys:cn});xr?W==null||W(Wn):$==null||$(Wn)}!B&&ht.length&&mt!=="inline"&&Qt(Dd)},Wr=C1(function($r){Q==null||Q(vT($r)),Gr($r)}),Kr=C1(function($r,gr){var Yr=ht.filter(function(cn){return cn!==$r});if(gr)Yr.push($r);else if(mt!=="inline"){var xr=Z($r);Yr=Yr.filter(function(cn){return!xr.has(cn)})}Y_(ht,Yr,!0)||Qt(Yr,!0)}),pr=function(gr,Yr){var xr=Yr!=null?Yr:!ht.includes(gr);Kr(gr,xr)},Wt=VVe(mt,Xe,Fe,Et,He,Ja,Qo,St,pr,je);D.useEffect(function(){Ie(!0)},[]);var yn=D.useMemo(function(){return{_internalRenderMenuItem:Ye,_internalRenderSubMenuItem:$e}},[Ye,$e]),vr=mt!=="horizontal"||S?ie:ie.map(function($r,gr){return D.createElement(i2,{key:$r.key,overflowDisabled:gr>Ai},$r)}),ni=D.createElement(Ic,mr({id:p,ref:He,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:z4,className:st(a,"".concat(a,"-root"),"".concat(a,"-").concat(mt),l,xe(xe({},"".concat(a,"-inline-collapsed"),Dr),"".concat(a,"-rtl"),Fe),o),dir:d,style:s,role:"menu",tabIndex:c,data:vr,renderRawItem:function(gr){return gr},renderRawRest:function(gr){var Yr=gr.length,xr=Yr?ie.slice(-Yr):null;return D.createElement(U4,{eventKey:zP,title:_e,disabled:Mi,internalPopupClose:Yr===0,popupClassName:Le},xr)},maxCount:mt!=="horizontal"||S?Ic.INVALIDATE:Ic.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(gr){Jo(gr)},onKeyDown:Wt},We));return D.createElement(C7.Provider,{value:yn},D.createElement($ie.Provider,{value:Et},D.createElement(i2,{prefixCls:a,rootClassName:o,mode:mt,openKeys:ht,rtl:Fe,disabled:x,motion:qe?te:null,defaultMotions:qe?Y:null,activeKey:Xe,onActive:Rt,onInactive:Pt,selectedKeys:It,inlineIndent:X,subMenuOpenDelay:T,subMenuCloseDelay:E,forceSubMenuRender:M,builtinPlacements:ne,triggerSubMenuAction:se,getPopupContainer:Be,itemIcon:le,expandIcon:pe,onItemClick:Wr,onOpenChange:Kr},D.createElement(qie.Provider,{value:Ee},ni),D.createElement("div",{style:{display:"none"},"aria-hidden":!0},D.createElement(Kie.Provider,{value:de},Ce)))))}),G2=pHe;G2.Item=z4;G2.SubMenu=U4;G2.ItemGroup=L7;G2.Divider=P7;const rae=D.createContext({}),gT=D.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var vHe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const nae=t=>{const{prefixCls:e,className:r,dashed:n}=t,i=vHe(t,["prefixCls","className","dashed"]),{getPrefixCls:a}=D.useContext(xn),o=a("menu",e),s=st({[`${o}-item-divider-dashed`]:!!n},r);return D.createElement(P7,Object.assign({className:s},i))},iae=t=>{var e;const{className:r,children:n,icon:i,title:a,danger:o,extra:s}=t,{prefixCls:l,firstLevel:u,direction:c,disableMenuItemTitleTooltip:f,inlineCollapsed:h}=D.useContext(gT),d=S=>{const b=n==null?void 0:n[0],T=D.createElement("span",{className:st(`${l}-title-content`,{[`${l}-title-content-with-extra`]:!!s||s===0})},n);return(!i||D.isValidElement(n)&&n.type==="span")&&n&&S&&u&&typeof b=="string"?D.createElement("div",{className:`${l}-inline-collapsed-noicon`},b.charAt(0)):T},{siderCollapsed:p}=D.useContext(rae);let v=a;typeof a=="undefined"?v=u?n:"":a===!1&&(v="");const g={title:v};!p&&!h&&(g.title=null,g.open=!1);const m=Nm(n).length;let x=D.createElement(z4,Object.assign({},ql(t,["title","icon","danger"]),{className:st({[`${l}-item-danger`]:o,[`${l}-item-only-child`]:(i?m+1:m)===1},r),title:typeof a=="string"?a:void 0}),tf(i,{className:st(D.isValidElement(i)?(e=i.props)===null||e===void 0?void 0:e.className:"",`${l}-item-icon`)}),d(h));return f||(x=D.createElement(F4,Object.assign({},g,{placement:c==="rtl"?"left":"right",overlayClassName:`${l}-inline-collapsed-tooltip`}),x)),x},TX=D.createContext(null),gHe=t=>{const{componentCls:e,motionDurationSlow:r,horizontalLineHeight:n,colorSplit:i,lineWidth:a,lineType:o,itemPaddingInline:s}=t;return{[`${e}-horizontal`]:{lineHeight:n,border:0,borderBottom:`${Xt(a)} ${o} ${i}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${e}-item, ${e}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${e}-item:hover,
        > ${e}-item-active,
        > ${e}-submenu ${e}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${e}-item, ${e}-submenu-title`]:{transition:[`border-color ${r}`,`background ${r}`].join(",")},[`${e}-submenu-arrow`]:{display:"none"}}}},mHe=t=>{let{componentCls:e,menuArrowOffset:r,calc:n}=t;return{[`${e}-rtl`]:{direction:"rtl"},[`${e}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${e}-rtl${e}-vertical,
    ${e}-submenu-rtl ${e}-vertical`]:{[`${e}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Xt(n(r).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Xt(r)})`}}}}},CX=t=>Object.assign({},Qne(t)),EX=(t,e)=>{const{componentCls:r,itemColor:n,itemSelectedColor:i,groupTitleColor:a,itemBg:o,subMenuItemBg:s,itemSelectedBg:l,activeBarHeight:u,activeBarWidth:c,activeBarBorderWidth:f,motionDurationSlow:h,motionEaseInOut:d,motionEaseOut:p,itemPaddingInline:v,motionDurationMid:g,itemHoverColor:m,lineType:x,colorSplit:S,itemDisabledColor:b,dangerItemColor:T,dangerItemHoverColor:w,dangerItemSelectedColor:E,dangerItemActiveBg:M,dangerItemSelectedBg:A,popupBg:R,itemHoverBg:L,itemActiveBg:I,menuSubMenuBg:N,horizontalItemSelectedColor:k,horizontalItemSelectedBg:z,horizontalItemBorderRadius:B,horizontalItemHoverBg:V}=t;return{[`${r}-${e}, ${r}-${e} > ${r}`]:{color:n,background:o,[`&${r}-root:focus-visible`]:Object.assign({},CX(t)),[`${r}-item`]:{"&-group-title, &-extra":{color:a}},[`${r}-submenu-selected`]:{[`> ${r}-submenu-title`]:{color:i}},[`${r}-item, ${r}-submenu-title`]:{color:n,[`&:not(${r}-item-disabled):focus-visible`]:Object.assign({},CX(t))},[`${r}-item-disabled, ${r}-submenu-disabled`]:{color:`${b} !important`},[`${r}-item:not(${r}-item-selected):not(${r}-submenu-selected)`]:{[`&:hover, > ${r}-submenu-title:hover`]:{color:m}},[`&:not(${r}-horizontal)`]:{[`${r}-item:not(${r}-item-selected)`]:{"&:hover":{backgroundColor:L},"&:active":{backgroundColor:I}},[`${r}-submenu-title`]:{"&:hover":{backgroundColor:L},"&:active":{backgroundColor:I}}},[`${r}-item-danger`]:{color:T,[`&${r}-item:hover`]:{[`&:not(${r}-item-selected):not(${r}-submenu-selected)`]:{color:w}},[`&${r}-item:active`]:{background:M}},[`${r}-item a`]:{"&, &:hover":{color:"inherit"}},[`${r}-item-selected`]:{color:i,[`&${r}-item-danger`]:{color:E},"a, a:hover":{color:"inherit"}},[`& ${r}-item-selected`]:{backgroundColor:l,[`&${r}-item-danger`]:{backgroundColor:A}},[`&${r}-submenu > ${r}`]:{backgroundColor:N},[`&${r}-popup > ${r}`]:{backgroundColor:R},[`&${r}-submenu-popup > ${r}`]:{backgroundColor:R},[`&${r}-horizontal`]:Object.assign(Object.assign({},e==="dark"?{borderBottom:0}:{}),{[`> ${r}-item, > ${r}-submenu`]:{top:f,marginTop:t.calc(f).mul(-1).equal(),marginBottom:0,borderRadius:B,"&::after":{position:"absolute",insetInline:v,bottom:0,borderBottom:`${Xt(u)} solid transparent`,transition:`border-color ${h} ${d}`,content:'""'},"&:hover, &-active, &-open":{background:V,"&::after":{borderBottomWidth:u,borderBottomColor:k}},"&-selected":{color:k,backgroundColor:z,"&:hover":{backgroundColor:z},"&::after":{borderBottomWidth:u,borderBottomColor:k}}}}),[`&${r}-root`]:{[`&${r}-inline, &${r}-vertical`]:{borderInlineEnd:`${Xt(f)} ${x} ${S}`}},[`&${r}-inline`]:{[`${r}-sub${r}-inline`]:{background:s},[`${r}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Xt(c)} solid ${i}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${g} ${p}`,`opacity ${g} ${p}`].join(","),content:'""'},[`&${r}-item-danger`]:{"&::after":{borderInlineEndColor:E}}},[`${r}-selected, ${r}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${g} ${d}`,`opacity ${g} ${d}`].join(",")}}}}}},AX=t=>{const{componentCls:e,itemHeight:r,itemMarginInline:n,padding:i,menuArrowSize:a,marginXS:o,itemMarginBlock:s,itemWidth:l,itemPaddingInline:u}=t,c=t.calc(a).add(i).add(o).equal();return{[`${e}-item`]:{position:"relative",overflow:"hidden"},[`${e}-item, ${e}-submenu-title`]:{height:r,lineHeight:Xt(r),paddingInline:u,overflow:"hidden",textOverflow:"ellipsis",marginInline:n,marginBlock:s,width:l},[`> ${e}-item,
            > ${e}-submenu > ${e}-submenu-title`]:{height:r,lineHeight:Xt(r)},[`${e}-item-group-list ${e}-submenu-title,
            ${e}-submenu-title`]:{paddingInlineEnd:c}}},yHe=t=>{const{componentCls:e,iconCls:r,itemHeight:n,colorTextLightSolid:i,dropdownWidth:a,controlHeightLG:o,motionEaseOut:s,paddingXL:l,itemMarginInline:u,fontSizeLG:c,motionDurationFast:f,motionDurationSlow:h,paddingXS:d,boxShadowSecondary:p,collapsedWidth:v,collapsedIconSize:g}=t,m={height:n,lineHeight:Xt(n),listStylePosition:"inside",listStyleType:"disc"};return[{[e]:{"&-inline, &-vertical":Object.assign({[`&${e}-root`]:{boxShadow:"none"}},AX(t))},[`${e}-submenu-popup`]:{[`${e}-vertical`]:Object.assign(Object.assign({},AX(t)),{boxShadow:p})}},{[`${e}-submenu-popup ${e}-vertical${e}-sub`]:{minWidth:a,maxHeight:`calc(100vh - ${Xt(t.calc(o).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${e}-inline`]:{width:"100%",[`&${e}-root`]:{[`${e}-item, ${e}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${h}`,`background ${h}`,`padding ${f} ${s}`].join(","),[`> ${e}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${e}-sub${e}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${e}-submenu > ${e}-submenu-title`]:m,[`& ${e}-item-group-title`]:{paddingInlineStart:l}},[`${e}-item`]:m}},{[`${e}-inline-collapsed`]:{width:v,[`&${e}-root`]:{[`${e}-item, ${e}-submenu ${e}-submenu-title`]:{[`> ${e}-inline-collapsed-noicon`]:{fontSize:c,textAlign:"center"}}},[`> ${e}-item,
          > ${e}-item-group > ${e}-item-group-list > ${e}-item,
          > ${e}-item-group > ${e}-item-group-list > ${e}-submenu > ${e}-submenu-title,
          > ${e}-submenu > ${e}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Xt(t.calc(c).div(2).equal())} - ${Xt(u)})`,textOverflow:"clip",[`
            ${e}-submenu-arrow,
            ${e}-submenu-expand-icon
          `]:{opacity:0},[`${e}-item-icon, ${r}`]:{margin:0,fontSize:g,lineHeight:Xt(n),"+ span":{display:"inline-block",opacity:0}}},[`${e}-item-icon, ${r}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${e}-item-icon, ${r}`]:{display:"none"},"a, a:hover":{color:i}},[`${e}-item-group-title`]:Object.assign(Object.assign({},yke),{paddingInline:d})}}]},MX=t=>{const{componentCls:e,motionDurationSlow:r,motionDurationMid:n,motionEaseInOut:i,motionEaseOut:a,iconCls:o,iconSize:s,iconMarginInlineEnd:l}=t;return{[`${e}-item, ${e}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${r}`,`background ${r}`,`padding calc(${r} + 0.1s) ${i}`].join(","),[`${e}-item-icon, ${o}`]:{minWidth:s,fontSize:s,transition:[`font-size ${n} ${a}`,`margin ${r} ${i}`,`color ${r}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${r} ${i}`,`margin ${r}`,`color ${r}`].join(",")}},[`${e}-item-icon`]:Object.assign({},Jne()),[`&${e}-item-only-child`]:{[`> ${o}, > ${e}-item-icon`]:{marginInlineEnd:0}}},[`${e}-item-disabled, ${e}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${e}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},RX=t=>{const{componentCls:e,motionDurationSlow:r,motionEaseInOut:n,borderRadius:i,menuArrowSize:a,menuArrowOffset:o}=t;return{[`${e}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:a,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${r} ${n}, opacity ${r}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(a).mul(.6).equal(),height:t.calc(a).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:i,transition:[`background ${r} ${n}`,`transform ${r} ${n}`,`top ${r} ${n}`,`color ${r} ${n}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Xt(t.calc(o).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Xt(o)})`}}}}},_He=t=>{const{antCls:e,componentCls:r,fontSize:n,motionDurationSlow:i,motionDurationMid:a,motionEaseInOut:o,paddingXS:s,padding:l,colorSplit:u,lineWidth:c,zIndexPopup:f,borderRadiusLG:h,subMenuItemBorderRadius:d,menuArrowSize:p,menuArrowOffset:v,lineType:g,groupTitleLineHeight:m,groupTitleFontSize:x}=t;return[{"":{[r]:Object.assign(Object.assign({},wj()),{"&-hidden":{display:"none"}})},[`${r}-submenu-hidden`]:{display:"none"}},{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zp(t)),wj()),{marginBottom:0,paddingInlineStart:0,fontSize:n,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${i} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${r}-item`]:{flex:"none"}},[`${r}-item, ${r}-submenu, ${r}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${r}-item-group-title`]:{padding:`${Xt(s)} ${Xt(l)}`,fontSize:x,lineHeight:m,transition:`all ${i}`},[`&-horizontal ${r}-submenu`]:{transition:[`border-color ${i} ${o}`,`background ${i} ${o}`].join(",")},[`${r}-submenu, ${r}-submenu-inline`]:{transition:[`border-color ${i} ${o}`,`background ${i} ${o}`,`padding ${a} ${o}`].join(",")},[`${r}-submenu ${r}-sub`]:{cursor:"initial",transition:[`background ${i} ${o}`,`padding ${i} ${o}`].join(",")},[`${r}-title-content`]:{transition:`color ${i}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${e}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${r}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:t.padding,fontSize:t.fontSizeSM}},[`${r}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${r}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:g,borderWidth:0,borderTopWidth:c,marginBlock:c,padding:0,"&-dashed":{borderStyle:"dashed"}}}),MX(t)),{[`${r}-item-group`]:{[`${r}-item-group-list`]:{margin:0,padding:0,[`${r}-item, ${r}-submenu-title`]:{paddingInline:`${Xt(t.calc(n).mul(2).equal())} ${Xt(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:f,borderRadius:h,boxShadow:"none",transformOrigin:"0 0",[`&${r}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${r}`]:Object.assign(Object.assign(Object.assign({borderRadius:h},MX(t)),RX(t)),{[`${r}-item, ${r}-submenu > ${r}-submenu-title`]:{borderRadius:d},[`${r}-submenu-title::after`]:{transition:`transform ${i} ${o}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),RX(t)),{[`&-inline-collapsed ${r}-submenu-arrow,
        &-inline ${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Xt(v)})`},"&::after":{transform:`rotate(45deg) translateX(${Xt(t.calc(v).mul(-1).equal())})`}},[`${r}-submenu-open${r}-submenu-inline > ${r}-submenu-title > ${r}-submenu-arrow`]:{transform:`translateY(${Xt(t.calc(p).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Xt(t.calc(v).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Xt(v)})`}}})},{[`${e}-layout-header`]:{[r]:{lineHeight:"inherit"}}}]},xHe=t=>{var e,r,n;const{colorPrimary:i,colorError:a,colorTextDisabled:o,colorErrorBg:s,colorText:l,colorTextDescription:u,colorBgContainer:c,colorFillAlter:f,colorFillContent:h,lineWidth:d,lineWidthBold:p,controlItemBgActive:v,colorBgTextHover:g,controlHeightLG:m,lineHeight:x,colorBgElevated:S,marginXXS:b,padding:T,fontSize:w,controlHeightSM:E,fontSizeLG:M,colorTextLightSolid:A,colorErrorHover:R}=t,L=(e=t.activeBarWidth)!==null&&e!==void 0?e:0,I=(r=t.activeBarBorderWidth)!==null&&r!==void 0?r:d,N=(n=t.itemMarginInline)!==null&&n!==void 0?n:t.marginXXS,k=new Da(A).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:i,horizontalItemHoverColor:i,colorGroupTitle:u,groupTitleColor:u,colorItemTextSelected:i,itemSelectedColor:i,colorItemTextSelectedHorizontal:i,horizontalItemSelectedColor:i,colorItemBg:c,itemBg:c,colorItemBgHover:g,itemHoverBg:g,colorItemBgActive:h,itemActiveBg:v,colorSubItemBg:f,subMenuItemBg:f,colorItemBgSelected:v,itemSelectedBg:v,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:L,colorActiveBarHeight:p,activeBarHeight:p,colorActiveBarBorderSize:d,activeBarBorderWidth:I,colorItemTextDisabled:o,itemDisabledColor:o,colorDangerItemText:a,dangerItemColor:a,colorDangerItemTextHover:a,dangerItemHoverColor:a,colorDangerItemTextSelected:a,dangerItemSelectedColor:a,colorDangerItemBgActive:s,dangerItemActiveBg:s,colorDangerItemBgSelected:s,dangerItemSelectedBg:s,itemMarginInline:N,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:m,groupTitleLineHeight:x,collapsedWidth:m*2,popupBg:S,itemMarginBlock:b,itemPaddingInline:T,horizontalLineHeight:`${m*1.15}px`,iconSize:w,iconMarginInlineEnd:E-w,collapsedIconSize:M,groupTitleFontSize:w,darkItemDisabledColor:new Da(A).setAlpha(.25).toRgbString(),darkItemColor:k,darkDangerItemColor:a,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:A,darkItemSelectedBg:i,darkDangerItemSelectedBg:a,darkItemHoverBg:"transparent",darkGroupTitleColor:k,darkItemHoverColor:A,darkDangerItemHoverColor:R,darkDangerItemSelectedColor:A,darkDangerItemActiveBg:a,itemWidth:L?`calc(100% + ${I}px)`:`calc(100% - ${N*2}px)`}},SHe=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return ef("Menu",i=>{const{colorBgElevated:a,controlHeightLG:o,fontSize:s,darkItemColor:l,darkDangerItemColor:u,darkItemBg:c,darkSubMenuItemBg:f,darkItemSelectedColor:h,darkItemSelectedBg:d,darkDangerItemSelectedBg:p,darkItemHoverBg:v,darkGroupTitleColor:g,darkItemHoverColor:m,darkItemDisabledColor:x,darkDangerItemHoverColor:S,darkDangerItemSelectedColor:b,darkDangerItemActiveBg:T,popupBg:w,darkPopupBg:E}=i,M=i.calc(s).div(7).mul(5).equal(),A=Ao(i,{menuArrowSize:M,menuHorizontalHeight:i.calc(o).mul(1.15).equal(),menuArrowOffset:i.calc(M).mul(.25).equal(),menuSubMenuBg:a,calc:i.calc,popupBg:w}),R=Ao(A,{itemColor:l,itemHoverColor:m,groupTitleColor:g,itemSelectedColor:h,itemBg:c,popupBg:E,subMenuItemBg:f,itemActiveBg:"transparent",itemSelectedBg:d,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:v,itemDisabledColor:x,dangerItemColor:u,dangerItemHoverColor:S,dangerItemSelectedColor:b,dangerItemActiveBg:T,dangerItemSelectedBg:p,menuSubMenuBg:f,horizontalItemSelectedColor:h,horizontalItemSelectedBg:d});return[_He(A),gHe(A),yHe(A),EX(A,"light"),EX(R,"dark"),mHe(A),XFe(A),zj(A,"slide-up"),zj(A,"slide-down"),h7(A,"zoom-big")]},xHe,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:r,unitless:{groupTitleLineHeight:!0}})(t,e)},aae=t=>{var e;const{popupClassName:r,icon:n,title:i,theme:a}=t,o=D.useContext(gT),{prefixCls:s,inlineCollapsed:l,theme:u}=o,c=A0();let f;if(!n)f=l&&!c.length&&i&&typeof i=="string"?D.createElement("div",{className:`${s}-inline-collapsed-noicon`},i.charAt(0)):D.createElement("span",{className:`${s}-title-content`},i);else{const p=D.isValidElement(i)&&i.type==="span";f=D.createElement(D.Fragment,null,tf(n,{className:st(D.isValidElement(n)?(e=n.props)===null||e===void 0?void 0:e.className:"",`${s}-item-icon`)}),p?i:D.createElement("span",{className:`${s}-title-content`},i))}const h=D.useMemo(()=>Object.assign(Object.assign({},o),{firstLevel:!1}),[o]),[d]=B2("Menu");return D.createElement(gT.Provider,{value:h},D.createElement(U4,Object.assign({},ql(t,["icon"]),{title:f,popupClassName:st(s,r,`${s}-${a||u}`),popupStyle:Object.assign({zIndex:d},t.popupStyle)})))};var bHe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function N9(t){return t===null||t===!1}const wHe={item:iae,submenu:aae,divider:nae},THe=D.forwardRef((t,e)=>{var r;const n=D.useContext(TX),i=n||{},{getPrefixCls:a,getPopupContainer:o,direction:s,menu:l}=D.useContext(xn),u=a(),{prefixCls:c,className:f,style:h,theme:d="light",expandIcon:p,_internalDisableMenuItemTitleTooltip:v,inlineCollapsed:g,siderCollapsed:m,rootClassName:x,mode:S,selectable:b,onClick:T,overflowedIndicatorPopupClassName:w}=t,E=bHe(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),M=ql(E,["collapsedWidth"]);(r=i.validator)===null||r===void 0||r.call(i,{mode:S});const A=La(function(){var X;T==null||T.apply(void 0,arguments),(X=i.onClick)===null||X===void 0||X.call(i)}),R=i.mode||S,L=b!=null?b:i.selectable,I=g!=null?g:m,N={horizontal:{motionName:`${u}-slide-up`},inline:wFe(u),other:{motionName:`${u}-zoom-big`}},k=a("menu",c||i.prefixCls),z=u7(k),[B,V,F]=SHe(k,z,!n),$=st(`${k}-${d}`,l==null?void 0:l.className,f),W=D.useMemo(()=>{var X,te;if(typeof p=="function"||N9(p))return p||null;if(typeof i.expandIcon=="function"||N9(i.expandIcon))return i.expandIcon||null;if(typeof(l==null?void 0:l.expandIcon)=="function"||N9(l==null?void 0:l.expandIcon))return(l==null?void 0:l.expandIcon)||null;const Y=(X=p!=null?p:i==null?void 0:i.expandIcon)!==null&&X!==void 0?X:l==null?void 0:l.expandIcon;return tf(Y,{className:st(`${k}-submenu-expand-icon`,D.isValidElement(Y)?(te=Y.props)===null||te===void 0?void 0:te.className:void 0)})},[p,i==null?void 0:i.expandIcon,l==null?void 0:l.expandIcon,k]),H=D.useMemo(()=>({prefixCls:k,inlineCollapsed:I||!1,direction:s,firstLevel:!0,theme:d,mode:R,disableMenuItemTitleTooltip:v}),[k,I,s,v,d]);return B(D.createElement(TX.Provider,{value:null},D.createElement(gT.Provider,{value:H},D.createElement(G2,Object.assign({getPopupContainer:o,overflowedIndicator:D.createElement(M7e,null),overflowedIndicatorPopupClassName:st(k,`${k}-${d}`,w),mode:R,selectable:L,onClick:A},M,{inlineCollapsed:I,style:Object.assign(Object.assign({},l==null?void 0:l.style),h),className:$,prefixCls:k,direction:s,defaultMotions:N,expandIcon:W,ref:e,rootClassName:st(x,V,i.rootClassName,F,z),_internalComponents:wHe})))))}),W2=D.forwardRef((t,e)=>{const r=D.useRef(null),n=D.useContext(rae);return D.useImperativeHandle(e,()=>({menu:r.current,focus:i=>{var a;(a=r.current)===null||a===void 0||a.focus(i)}})),D.createElement(THe,Object.assign({ref:r},t,n))});W2.Item=iae;W2.SubMenu=aae;W2.Divider=nae;W2.ItemGroup=L7;var PX=D.createContext(null),oae=D.createContext({}),CHe=["prefixCls","className","containerRef"],EHe=function(e){var r=e.prefixCls,n=e.className,i=e.containerRef,a=Pn(e,CHe),o=D.useContext(oae),s=o.panel,l=b0(s,i);return D.createElement("div",mr({className:st("".concat(r,"-content"),n),role:"dialog",ref:l},uT(e,{aria:!0}),{"aria-modal":"true"},a))};function LX(t){return typeof t=="string"&&String(Number(t))===t?(Ka(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(t)):t}var DX={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function AHe(t,e){var r,n,i,a=t.prefixCls,o=t.open,s=t.placement,l=t.inline,u=t.push,c=t.forceRender,f=t.autoFocus,h=t.keyboard,d=t.classNames,p=t.rootClassName,v=t.rootStyle,g=t.zIndex,m=t.className,x=t.id,S=t.style,b=t.motion,T=t.width,w=t.height,E=t.children,M=t.mask,A=t.maskClosable,R=t.maskMotion,L=t.maskClassName,I=t.maskStyle,N=t.afterOpenChange,k=t.onClose,z=t.onMouseEnter,B=t.onMouseOver,V=t.onMouseLeave,F=t.onClick,$=t.onKeyDown,W=t.onKeyUp,H=t.styles,X=t.drawerRender,te=D.useRef(),Y=D.useRef(),ee=D.useRef();D.useImperativeHandle(e,function(){return te.current});var se=function(j){var ie=j.keyCode,Ce=j.shiftKey;switch(ie){case jt.TAB:{if(ie===jt.TAB){if(!Ce&&document.activeElement===ee.current){var ye;(ye=Y.current)===null||ye===void 0||ye.focus({preventScroll:!0})}else if(Ce&&document.activeElement===Y.current){var me;(me=ee.current)===null||me===void 0||me.focus({preventScroll:!0})}}break}case jt.ESC:{k&&h&&(j.stopPropagation(),k(j));break}}};D.useEffect(function(){if(o&&f){var q;(q=te.current)===null||q===void 0||q.focus({preventScroll:!0})}},[o]);var ne=D.useState(!1),le=rt(ne,2),pe=le[0],Se=le[1],_e=D.useContext(PX),Le;typeof u=="boolean"?Le=u?{}:{distance:0}:Le=u||{};var Be=(r=(n=(i=Le)===null||i===void 0?void 0:i.distance)!==null&&n!==void 0?n:_e==null?void 0:_e.pushDistance)!==null&&r!==void 0?r:180,Q=D.useMemo(function(){return{pushDistance:Be,push:function(){Se(!0)},pull:function(){Se(!1)}}},[Be]);D.useEffect(function(){if(o){var q;_e==null||(q=_e.push)===null||q===void 0||q.call(_e)}else{var j;_e==null||(j=_e.pull)===null||j===void 0||j.call(_e)}},[o]),D.useEffect(function(){return function(){var q;_e==null||(q=_e.pull)===null||q===void 0||q.call(_e)}},[]);var tt=M&&D.createElement(Xl,mr({key:"mask"},R,{visible:o}),function(q,j){var ie=q.className,Ce=q.style;return D.createElement("div",{className:st("".concat(a,"-mask"),ie,d==null?void 0:d.mask,L),style:we(we(we({},Ce),I),H==null?void 0:H.mask),onClick:A&&o?k:void 0,ref:j})}),je=typeof b=="function"?b(s):b,Ye={};if(pe&&Be)switch(s){case"top":Ye.transform="translateY(".concat(Be,"px)");break;case"bottom":Ye.transform="translateY(".concat(-Be,"px)");break;case"left":Ye.transform="translateX(".concat(Be,"px)");break;default:Ye.transform="translateX(".concat(-Be,"px)");break}s==="left"||s==="right"?Ye.width=LX(T):Ye.height=LX(w);var $e={onMouseEnter:z,onMouseOver:B,onMouseLeave:V,onClick:F,onKeyDown:$,onKeyUp:W},wt=D.createElement(Xl,mr({key:"panel"},je,{visible:o,forceRender:c,onVisibleChanged:function(j){N==null||N(j)},removeOnLeave:!1,leavedClassName:"".concat(a,"-content-wrapper-hidden")}),function(q,j){var ie=q.className,Ce=q.style,ye=D.createElement(EHe,mr({id:x,containerRef:j,prefixCls:a,className:st(m,d==null?void 0:d.content),style:we(we({},S),H==null?void 0:H.content)},uT(t,{aria:!0}),$e),E);return D.createElement("div",mr({className:st("".concat(a,"-content-wrapper"),d==null?void 0:d.wrapper,ie),style:we(we(we({},Ye),Ce),H==null?void 0:H.wrapper)},uT(t,{data:!0})),X?X(ye):ye)}),We=we({},v);return g&&(We.zIndex=g),D.createElement(PX.Provider,{value:Q},D.createElement("div",{className:st(a,"".concat(a,"-").concat(s),p,xe(xe({},"".concat(a,"-open"),o),"".concat(a,"-inline"),l)),style:We,tabIndex:-1,ref:te,onKeyDown:se},tt,D.createElement("div",{tabIndex:0,ref:Y,style:DX,"aria-hidden":"true","data-sentinel":"start"}),wt,D.createElement("div",{tabIndex:0,ref:ee,style:DX,"aria-hidden":"true","data-sentinel":"end"})))}var MHe=D.forwardRef(AHe),RHe=function(e){var r=e.open,n=r===void 0?!1:r,i=e.prefixCls,a=i===void 0?"rc-drawer":i,o=e.placement,s=o===void 0?"right":o,l=e.autoFocus,u=l===void 0?!0:l,c=e.keyboard,f=c===void 0?!0:c,h=e.width,d=h===void 0?378:h,p=e.mask,v=p===void 0?!0:p,g=e.maskClosable,m=g===void 0?!0:g,x=e.getContainer,S=e.forceRender,b=e.afterOpenChange,T=e.destroyOnClose,w=e.onMouseEnter,E=e.onMouseOver,M=e.onMouseLeave,A=e.onClick,R=e.onKeyDown,L=e.onKeyUp,I=e.panelRef,N=D.useState(!1),k=rt(N,2),z=k[0],B=k[1],V=D.useState(!1),F=rt(V,2),$=F[0],W=F[1];va(function(){W(!0)},[]);var H=$?n:!1,X=D.useRef(),te=D.useRef();va(function(){H&&(te.current=document.activeElement)},[H]);var Y=function(pe){var Se;if(B(pe),b==null||b(pe),!pe&&te.current&&!((Se=X.current)!==null&&Se!==void 0&&Se.contains(te.current))){var _e;(_e=te.current)===null||_e===void 0||_e.focus({preventScroll:!0})}},ee=D.useMemo(function(){return{panel:I}},[I]);if(!S&&!z&&!H&&T)return null;var se={onMouseEnter:w,onMouseOver:E,onMouseLeave:M,onClick:A,onKeyDown:R,onKeyUp:L},ne=we(we({},e),{},{open:H,prefixCls:a,placement:s,autoFocus:u,keyboard:f,width:d,mask:v,maskClosable:m,inline:x===!1,afterOpenChange:Y,ref:X},se);return D.createElement(oae.Provider,{value:ee},D.createElement(x7,{open:H||S||z,autoDestroy:!1,getContainer:x,autoLock:v&&(H||z)},D.createElement(MHe,ne)))};const sae=t=>{var e,r;const{prefixCls:n,title:i,footer:a,extra:o,loading:s,onClose:l,headerStyle:u,bodyStyle:c,footerStyle:f,children:h,classNames:d,styles:p}=t,{drawer:v}=D.useContext(xn),g=D.useCallback(T=>D.createElement("button",{type:"button",onClick:l,"aria-label":"Close",className:`${n}-close`},T),[l]),[m,x]=eUe(iX(t),iX(v),{closable:!0,closeIconRender:g}),S=D.useMemo(()=>{var T,w;return!i&&!m?null:D.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(T=v==null?void 0:v.styles)===null||T===void 0?void 0:T.header),u),p==null?void 0:p.header),className:st(`${n}-header`,{[`${n}-header-close-only`]:m&&!i&&!o},(w=v==null?void 0:v.classNames)===null||w===void 0?void 0:w.header,d==null?void 0:d.header)},D.createElement("div",{className:`${n}-header-title`},x,i&&D.createElement("div",{className:`${n}-title`},i)),o&&D.createElement("div",{className:`${n}-extra`},o))},[m,x,o,u,n,i]),b=D.useMemo(()=>{var T,w;if(!a)return null;const E=`${n}-footer`;return D.createElement("div",{className:st(E,(T=v==null?void 0:v.classNames)===null||T===void 0?void 0:T.footer,d==null?void 0:d.footer),style:Object.assign(Object.assign(Object.assign({},(w=v==null?void 0:v.styles)===null||w===void 0?void 0:w.footer),f),p==null?void 0:p.footer)},a)},[a,f,n]);return D.createElement(D.Fragment,null,S,D.createElement("div",{className:st(`${n}-body`,d==null?void 0:d.body,(e=v==null?void 0:v.classNames)===null||e===void 0?void 0:e.body),style:Object.assign(Object.assign(Object.assign({},(r=v==null?void 0:v.styles)===null||r===void 0?void 0:r.body),c),p==null?void 0:p.body)},s?D.createElement(E0,{active:!0,title:!1,paragraph:{rows:5},className:`${n}-body-skeleton`}):h),b)},PHe=t=>{const e="100%";return{left:`translateX(-${e})`,right:`translateX(${e})`,top:`translateY(-${e})`,bottom:`translateY(${e})`}[t]},lae=(t,e)=>({"&-enter, &-appear":Object.assign(Object.assign({},t),{"&-active":e}),"&-leave":Object.assign(Object.assign({},e),{"&-active":t})}),uae=(t,e)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${e}`}}},lae({opacity:t},{opacity:1})),LHe=(t,e)=>[uae(.7,e),lae({transform:PHe(t)},{transform:"none"})],DHe=t=>{const{componentCls:e,motionDurationSlow:r}=t;return{[e]:{[`${e}-mask-motion`]:uae(0,r),[`${e}-panel-motion`]:["left","right","top","bottom"].reduce((n,i)=>Object.assign(Object.assign({},n),{[`&-${i}`]:LHe(i,r)}),{})}}},IHe=t=>{const{borderRadiusSM:e,componentCls:r,zIndexPopup:n,colorBgMask:i,colorBgElevated:a,motionDurationSlow:o,motionDurationMid:s,paddingXS:l,padding:u,paddingLG:c,fontSizeLG:f,lineHeightLG:h,lineWidth:d,lineType:p,colorSplit:v,marginXS:g,colorIcon:m,colorIconHover:x,colorBgTextHover:S,colorBgTextActive:b,colorText:T,fontWeightStrong:w,footerPaddingBlock:E,footerPaddingInline:M,calc:A}=t,R=`${r}-content-wrapper`;return{[r]:{position:"fixed",inset:0,zIndex:n,pointerEvents:"none",color:T,"&-pure":{position:"relative",background:a,display:"flex",flexDirection:"column",[`&${r}-left`]:{boxShadow:t.boxShadowDrawerLeft},[`&${r}-right`]:{boxShadow:t.boxShadowDrawerRight},[`&${r}-top`]:{boxShadow:t.boxShadowDrawerUp},[`&${r}-bottom`]:{boxShadow:t.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${r}-mask`]:{position:"absolute",inset:0,zIndex:n,background:i,pointerEvents:"auto"},[R]:{position:"absolute",zIndex:n,maxWidth:"100vw",transition:`all ${o}`,"&-hidden":{display:"none"}},[`&-left > ${R}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:t.boxShadowDrawerLeft},[`&-right > ${R}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:t.boxShadowDrawerRight},[`&-top > ${R}`]:{top:0,insetInline:0,boxShadow:t.boxShadowDrawerUp},[`&-bottom > ${R}`]:{bottom:0,insetInline:0,boxShadow:t.boxShadowDrawerDown},[`${r}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:a,pointerEvents:"auto"},[`${r}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${Xt(u)} ${Xt(c)}`,fontSize:f,lineHeight:h,borderBottom:`${Xt(d)} ${p} ${v}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${r}-extra`]:{flex:"none"},[`${r}-close`]:Object.assign({display:"inline-flex",width:A(f).add(l).equal(),height:A(f).add(l).equal(),borderRadius:e,justifyContent:"center",alignItems:"center",marginInlineEnd:g,color:m,fontWeight:w,fontSize:f,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${s}`,textRendering:"auto","&:hover":{color:x,backgroundColor:S,textDecoration:"none"},"&:active":{backgroundColor:b}},eie(t)),[`${r}-title`]:{flex:1,margin:0,fontWeight:t.fontWeightStrong,fontSize:f,lineHeight:h},[`${r}-body`]:{flex:1,minWidth:0,minHeight:0,padding:c,overflow:"auto",[`${r}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${r}-footer`]:{flexShrink:0,padding:`${Xt(E)} ${Xt(M)}`,borderTop:`${Xt(d)} ${p} ${v}`},"&-rtl":{direction:"rtl"}}}},NHe=t=>({zIndexPopup:t.zIndexPopupBase,footerPaddingBlock:t.paddingXS,footerPaddingInline:t.padding}),cae=ef("Drawer",t=>{const e=Ao(t,{});return[IHe(e),DHe(e)]},NHe);var fae=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const OHe={distance:180},Z1=t=>{const{rootClassName:e,width:r,height:n,size:i="default",mask:a=!0,push:o=OHe,open:s,afterOpenChange:l,onClose:u,prefixCls:c,getContainer:f,style:h,className:d,visible:p,afterVisibleChange:v,maskStyle:g,drawerStyle:m,contentWrapperStyle:x}=t,S=fae(t,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:b,getPrefixCls:T,direction:w,drawer:E}=D.useContext(xn),M=T("drawer",c),[A,R,L]=cae(M),I=f===void 0&&b?()=>b(document.body):f,N=st({"no-mask":!a,[`${M}-rtl`]:w==="rtl"},e,R,L),k=D.useMemo(()=>r!=null?r:i==="large"?736:378,[r,i]),z=D.useMemo(()=>n!=null?n:i==="large"?736:378,[n,i]),B={motionName:fT(M,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},V=ee=>({motionName:fT(M,`panel-motion-${ee}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),F=bUe(),[$,W]=B2("Drawer",S.zIndex),{classNames:H={},styles:X={}}=S,{classNames:te={},styles:Y={}}=E||{};return A(D.createElement(Pie,{form:!0,space:!0},D.createElement(c7.Provider,{value:W},D.createElement(RHe,Object.assign({prefixCls:M,onClose:u,maskMotion:B,motion:V},S,{classNames:{mask:st(H.mask,te.mask),content:st(H.content,te.content),wrapper:st(H.wrapper,te.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},X.mask),g),Y.mask),content:Object.assign(Object.assign(Object.assign({},X.content),m),Y.content),wrapper:Object.assign(Object.assign(Object.assign({},X.wrapper),x),Y.wrapper)},open:s!=null?s:p,mask:a,push:o,width:k,height:z,style:Object.assign(Object.assign({},E==null?void 0:E.style),h),className:st(E==null?void 0:E.className,d),rootClassName:N,getContainer:I,afterOpenChange:l!=null?l:v,panelRef:F,zIndex:$}),D.createElement(sae,Object.assign({prefixCls:M},S,{onClose:u}))))))},kHe=t=>{const{prefixCls:e,style:r,className:n,placement:i="right"}=t,a=fae(t,["prefixCls","style","className","placement"]),{getPrefixCls:o}=D.useContext(xn),s=o("drawer",e),[l,u,c]=cae(s),f=st(s,`${s}-pure`,`${s}-${i}`,u,c,n);return l(D.createElement("div",{className:f,style:r},D.createElement(sae,Object.assign({prefixCls:s},a))))};Z1._InternalPanelDoNotUseOrYouWillBeFired=kHe;const D7=bt.createContext(void 0),{Provider:FHe}=D7,BHe=t=>{const{icon:e,description:r,prefixCls:n,className:i}=t,a=bt.createElement("div",{className:`${n}-icon`},bt.createElement(hne,null));return bt.createElement("div",{onClick:t.onClick,onFocus:t.onFocus,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,className:st(i,`${n}-content`)},e||r?bt.createElement(bt.Fragment,null,e&&bt.createElement("div",{className:`${n}-icon`},e),r&&bt.createElement("div",{className:`${n}-description`},r)):a)},zHe=D.memo(BHe),IX=t=>t===0?0:t-Math.sqrt(Math.pow(t,2)/2),UHe=t=>{const{componentCls:e,floatButtonSize:r,motionDurationSlow:n,motionEaseInOutCirc:i,calc:a}=t,o=new tn("antFloatButtonMoveTopIn",{"0%":{transform:`translate3d(0, ${Xt(r)}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),s=new tn("antFloatButtonMoveTopOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${Xt(r)}, 0)`,transformOrigin:"0 0",opacity:0}}),l=new tn("antFloatButtonMoveRightIn",{"0%":{transform:`translate3d(${a(r).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),u=new tn("antFloatButtonMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${a(r).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),c=new tn("antFloatButtonMoveBottomIn",{"0%":{transform:`translate3d(0, ${a(r).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),f=new tn("antFloatButtonMoveBottomOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${a(r).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0}}),h=new tn("antFloatButtonMoveLeftIn",{"0%":{transform:`translate3d(${Xt(r)}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),d=new tn("antFloatButtonMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${Xt(r)}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),p=`${e}-group`;return[{[p]:{[`&${p}-top ${p}-wrap`]:op(`${p}-wrap`,o,s,n,!0),[`&${p}-bottom ${p}-wrap`]:op(`${p}-wrap`,c,f,n,!0),[`&${p}-left ${p}-wrap`]:op(`${p}-wrap`,h,d,n,!0),[`&${p}-right ${p}-wrap`]:op(`${p}-wrap`,l,u,n,!0)}},{[`${p}-wrap`]:{[`&${p}-wrap-enter, &${p}-wrap-appear`]:{opacity:0,animationTimingFunction:i},[`&${p}-wrap-leave`]:{opacity:1,animationTimingFunction:i}}}]},VHe=t=>{const{antCls:e,componentCls:r,floatButtonSize:n,margin:i,borderRadiusLG:a,borderRadiusSM:o,badgeOffset:s,floatButtonBodyPadding:l,zIndexPopupBase:u,calc:c}=t,f=`${r}-group`;return{[f]:Object.assign(Object.assign({},Zp(t)),{zIndex:u,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",position:"fixed",height:"auto",boxShadow:"none",minWidth:n,minHeight:n,insetInlineEnd:t.floatButtonInsetInlineEnd,bottom:t.floatButtonInsetBlockEnd,borderRadius:a,[`${f}-wrap`]:{zIndex:-1,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute"},[`&${f}-rtl`]:{direction:"rtl"},[r]:{position:"static"}}),[`${f}-top > ${f}-wrap`]:{flexDirection:"column",top:"auto",bottom:c(n).add(i).equal(),"&::after":{content:'""',position:"absolute",width:"100%",height:i,bottom:c(i).mul(-1).equal()}},[`${f}-bottom > ${f}-wrap`]:{flexDirection:"column",top:c(n).add(i).equal(),bottom:"auto","&::after":{content:'""',position:"absolute",width:"100%",height:i,top:c(i).mul(-1).equal()}},[`${f}-right > ${f}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:c(n).add(i).equal()},right:{_skip_check_:!0,value:"auto"},"&::after":{content:'""',position:"absolute",width:i,height:"100%",left:{_skip_check_:!0,value:c(i).mul(-1).equal()}}},[`${f}-left > ${f}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:c(n).add(i).equal()},"&::after":{content:'""',position:"absolute",width:i,height:"100%",right:{_skip_check_:!0,value:c(i).mul(-1).equal()}}},[`${f}-circle`]:{gap:i,[`${f}-wrap`]:{gap:i}},[`${f}-square`]:{[`${r}-square`]:{padding:0,borderRadius:0,[`&${f}-trigger`]:{borderRadius:a},"&:first-child":{borderStartStartRadius:a,borderStartEndRadius:a},"&:last-child":{borderEndStartRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderBottom:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-badge`]:{[`${e}-badge-count`]:{top:c(c(l).add(s)).mul(-1).equal(),insetInlineEnd:c(c(l).add(s)).mul(-1).equal()}}},[`${f}-wrap`]:{borderRadius:a,boxShadow:t.boxShadowSecondary,[`${r}-square`]:{boxShadow:"none",borderRadius:0,padding:l,[`${r}-body`]:{width:t.floatButtonBodySize,height:t.floatButtonBodySize,borderRadius:o}}}},[`${f}-top > ${f}-wrap, ${f}-bottom > ${f}-wrap`]:{[`> ${r}-square`]:{"&:first-child":{borderStartStartRadius:a,borderStartEndRadius:a},"&:last-child":{borderEndStartRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderBottom:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}},[`${f}-left > ${f}-wrap, ${f}-right > ${f}-wrap`]:{[`> ${r}-square`]:{"&:first-child":{borderStartStartRadius:a,borderEndStartRadius:a},"&:last-child":{borderStartEndRadius:a,borderEndEndRadius:a},"&:not(:last-child)":{borderInlineEnd:`${Xt(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}}},[`${f}-circle-shadow`]:{boxShadow:"none"},[`${f}-square-shadow`]:{boxShadow:t.boxShadowSecondary,[`${r}-square`]:{boxShadow:"none",padding:l,[`${r}-body`]:{width:t.floatButtonBodySize,height:t.floatButtonBodySize,borderRadius:o}}}}},HHe=t=>{const{antCls:e,componentCls:r,floatButtonBodyPadding:n,floatButtonIconSize:i,floatButtonSize:a,borderRadiusLG:o,badgeOffset:s,dotOffsetInSquare:l,dotOffsetInCircle:u,zIndexPopupBase:c,calc:f}=t;return{[r]:Object.assign(Object.assign({},Zp(t)),{border:"none",position:"fixed",cursor:"pointer",zIndex:c,display:"block",width:a,height:a,insetInlineEnd:t.floatButtonInsetInlineEnd,bottom:t.floatButtonInsetBlockEnd,boxShadow:t.boxShadowSecondary,"&-pure":{position:"relative",inset:"auto"},"&:empty":{display:"none"},[`${e}-badge`]:{width:"100%",height:"100%",[`${e}-badge-count`]:{transform:"translate(0, 0)",transformOrigin:"center",top:f(s).mul(-1).equal(),insetInlineEnd:f(s).mul(-1).equal()}},[`${r}-body`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",transition:`all ${t.motionDurationMid}`,[`${r}-content`]:{overflow:"hidden",textAlign:"center",minHeight:a,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:`${Xt(f(n).div(2).equal())} ${Xt(n)}`,[`${r}-icon`]:{textAlign:"center",margin:"auto",width:i,fontSize:i,lineHeight:1}}}}),[`${r}-rtl`]:{direction:"rtl"},[`${r}-circle`]:{height:a,borderRadius:"50%",[`${e}-badge`]:{[`${e}-badge-dot`]:{top:u,insetInlineEnd:u}},[`${r}-body`]:{borderRadius:"50%"}},[`${r}-square`]:{height:"auto",minHeight:a,borderRadius:o,[`${e}-badge`]:{[`${e}-badge-dot`]:{top:l,insetInlineEnd:l}},[`${r}-body`]:{height:"auto",borderRadius:o}},[`${r}-default`]:{backgroundColor:t.floatButtonBackgroundColor,transition:`background-color ${t.motionDurationMid}`,[`${r}-body`]:{backgroundColor:t.floatButtonBackgroundColor,transition:`background-color ${t.motionDurationMid}`,"&:hover":{backgroundColor:t.colorFillContent},[`${r}-content`]:{[`${r}-icon`]:{color:t.colorText},[`${r}-description`]:{display:"flex",alignItems:"center",lineHeight:Xt(t.fontSizeLG),color:t.colorText,fontSize:t.fontSizeSM}}}},[`${r}-primary`]:{backgroundColor:t.colorPrimary,[`${r}-body`]:{backgroundColor:t.colorPrimary,transition:`background-color ${t.motionDurationMid}`,"&:hover":{backgroundColor:t.colorPrimaryHover},[`${r}-content`]:{[`${r}-icon`]:{color:t.colorTextLightSolid},[`${r}-description`]:{display:"flex",alignItems:"center",lineHeight:Xt(t.fontSizeLG),color:t.colorTextLightSolid,fontSize:t.fontSizeSM}}}}}},GHe=t=>({dotOffsetInCircle:IX(t.controlHeightLG/2),dotOffsetInSquare:IX(t.borderRadiusLG)}),hae=ef("FloatButton",t=>{const{colorTextLightSolid:e,colorBgElevated:r,controlHeightLG:n,marginXXL:i,marginLG:a,fontSize:o,fontSizeIcon:s,controlItemBgHover:l,paddingXXS:u,calc:c}=t,f=Ao(t,{floatButtonBackgroundColor:r,floatButtonColor:e,floatButtonHoverBackgroundColor:l,floatButtonFontSize:o,floatButtonIconSize:c(s).mul(1.5).equal(),floatButtonSize:n,floatButtonInsetBlockEnd:i,floatButtonInsetInlineEnd:a,floatButtonBodySize:c(n).sub(c(u).mul(2)).equal(),floatButtonBodyPadding:u,badgeOffset:c(u).mul(1.5).equal()});return[VHe(f),HHe(f),JFe(t),UHe(f)]},GHe);var WHe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const V4="float-btn",$He=bt.forwardRef((t,e)=>{const{prefixCls:r,className:n,rootClassName:i,style:a,type:o="default",shape:s="circle",icon:l,description:u,tooltip:c,htmlType:f="button",badge:h={}}=t,d=WHe(t,["prefixCls","className","rootClassName","style","type","shape","icon","description","tooltip","htmlType","badge"]),{getPrefixCls:p,direction:v}=D.useContext(xn),g=D.useContext(D7),m=p(V4,r),x=u7(m),[S,b,T]=hae(m,x),w=g||s,E=st(b,T,x,m,n,i,`${m}-${o}`,`${m}-${w}`,{[`${m}-rtl`]:v==="rtl"}),[M]=B2("FloatButton",a==null?void 0:a.zIndex),A=Object.assign(Object.assign({},a),{zIndex:M}),R=ql(h,["title","children","status","text"]),L=D.useMemo(()=>({prefixCls:m,description:u,icon:l,type:o}),[m,u,l,o]);let I=bt.createElement("div",{className:`${m}-body`},bt.createElement(zHe,Object.assign({},L)));return"badge"in t&&(I=bt.createElement(Wie,Object.assign({},R),I)),"tooltip"in t&&(I=bt.createElement(F4,{title:c,placement:v==="rtl"?"right":"left"},I)),S(t.href?bt.createElement("a",Object.assign({ref:e},d,{className:E,style:A}),I):bt.createElement("button",Object.assign({ref:e},d,{className:E,style:A,type:f}),I))}),Qp=$He;var jHe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const dae=bt.forwardRef((t,e)=>{const{prefixCls:r,className:n,type:i="default",shape:a="circle",visibilityHeight:o=400,icon:s=bt.createElement(K7e,null),target:l,onClick:u,duration:c=450}=t,f=jHe(t,["prefixCls","className","type","shape","visibilityHeight","icon","target","onClick","duration"]),[h,d]=D.useState(o===0),p=bt.useRef(null);bt.useImperativeHandle(e,()=>({nativeElement:p.current}));const v=()=>{var M;return((M=p.current)===null||M===void 0?void 0:M.ownerDocument)||window},g=RNe(M=>{const A=pie(M.target);d(A>=o)});D.useEffect(()=>{const A=(l||v)();return g({target:A}),A==null||A.addEventListener("scroll",g),()=>{g.cancel(),A==null||A.removeEventListener("scroll",g)}},[l]);const m=M=>{uFe(0,{getContainer:l||v,duration:c}),u==null||u(M)},{getPrefixCls:x}=D.useContext(xn),S=x(V4,r),b=x(),w=D.useContext(D7)||a,E=Object.assign({prefixCls:S,icon:s,type:i,shape:w},f);return bt.createElement(Xl,{visible:h,motionName:`${b}-fade`},(M,A)=>{let{className:R}=M;return bt.createElement(Qp,Object.assign({ref:O2(p,A)},E,{onClick:m,className:st(n,R)}))})});var XHe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const pae=t=>{var e;const{prefixCls:r,className:n,style:i,shape:a="circle",type:o="default",placement:s="top",icon:l=bt.createElement(hne,null),closeIcon:u,description:c,trigger:f,children:h,onOpenChange:d,open:p,onClick:v}=t,g=XHe(t,["prefixCls","className","style","shape","type","placement","icon","closeIcon","description","trigger","children","onOpenChange","open","onClick"]),{direction:m,getPrefixCls:x,floatButtonGroup:S}=bt.useContext(xn),b=(e=u!=null?u:S==null?void 0:S.closeIcon)!==null&&e!==void 0?e:bt.createElement(fne,null),T=x(V4,r),w=u7(T),[E,M,A]=hae(T,w),R=`${T}-group`,L=f&&["click","hover"].includes(f),I=s&&["top","left","right","bottom"].includes(s),N=st(R,M,A,w,n,{[`${R}-rtl`]:m==="rtl",[`${R}-${a}`]:a,[`${R}-${a}-shadow`]:!L,[`${R}-${s}`]:L&&I}),[k]=B2("FloatButton",i==null?void 0:i.zIndex),z=Object.assign(Object.assign({},i),{zIndex:k}),B=st(M,`${R}-wrap`),[V,F]=_p(!1,{value:p}),$=bt.useRef(null),W=f==="hover",H=f==="click",X=La(se=>{V!==se&&(F(se),d==null||d(se))}),te=()=>{W&&X(!0)},Y=()=>{W&&X(!1)},ee=se=>{H&&X(!V),v==null||v(se)};return bt.useEffect(()=>{if(H){const se=ne=>{var le;!((le=$.current)===null||le===void 0)&&le.contains(ne.target)||X(!1)};return document.addEventListener("click",se,{capture:!0}),()=>document.removeEventListener("click",se,{capture:!0})}},[H]),E(bt.createElement(FHe,{value:a},bt.createElement("div",{ref:$,className:N,style:z,onMouseEnter:te,onMouseLeave:Y},L?bt.createElement(bt.Fragment,null,bt.createElement(Xl,{visible:V,motionName:`${R}-wrap`},se=>{let{className:ne}=se;return bt.createElement("div",{className:st(ne,B)},h)}),bt.createElement(Qp,Object.assign({type:o,icon:V?b:l,description:c,"aria-label":t["aria-label"],className:`${R}-trigger`,onClick:ee},g))):h)))};var vae=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const NX=t=>{var{backTop:e}=t,r=vae(t,["backTop"]);return e?D.createElement(dae,Object.assign({},r,{visibilityHeight:0})):D.createElement(Qp,Object.assign({},r))},KHe=t=>{var{className:e,items:r}=t,n=vae(t,["className","items"]);const{prefixCls:i}=n,{getPrefixCls:a}=D.useContext(xn),s=`${a(V4,i)}-pure`;return r?D.createElement(pae,Object.assign({className:st(e,s)},n),r.map((l,u)=>D.createElement(NX,Object.assign({key:u},l)))):D.createElement(NX,Object.assign({className:st(e,s)},n))};Qp.BackTop=dae;Qp.Group=pae;Qp._InternalPanelDoNotUseOrYouWillBeFired=KHe;const YHe="_information_pv2oy_1",qHe="_active_pv2oy_8",ZHe="_container_pv2oy_17",JHe="_page_pv2oy_25",QHe="_textContent_pv2oy_31",eGe="_imageContent_pv2oy_36",tGe="_imageContent2_pv2oy_44",rGe="_title_pv2oy_52",nGe="_smalltitle_pv2oy_60",oo={information:YHe,active:qHe,container:ZHe,page:JHe,textContent:QHe,imageContent:eGe,imageContent2:tGe,title:rGe,smalltitle:nGe};function iGe(t){return ve.jsx("div",{className:st(oo.information,{[oo.active]:t.isActive}),children:ve.jsxs("div",{className:oo.page,children:[ve.jsx("div",{className:oo.title,children:"Introduction"}),ve.jsxs("div",{className:oo.container,children:[ve.jsxs("div",{className:oo.textContent,children:[ve.jsx("div",{className:oo.smalltitle,children:"The Introduction Of The Everest"}),ve.jsx("div",{style:{color:"#c9e1f2a0"},children:'Mount Everest, the highest peak in the world at 8,848.86 meters (29,029 feet), is located in the Himalayas on the Nepal-China border. Its Tibetan name means "Goddess Mother," highlighting its sacred significance. Climbing began in the early 20th century, with Edmund Hillary and Tenzing Norgay reaching the summit in 1953.'}),ve.jsx("div",{style:{height:"12px"}}),ve.jsx("div",{style:{color:"#c9e1f2a0"},children:"Each spring, climbers prepare for ascents from both the southern and northern sides, facing extreme weather and thin air. The region is enriched by the biodiversity and culture of the Sherpa people, known for their climbing expertise. Everest symbolizes human courage and perseverance."})]}),ve.jsx("div",{className:oo.imageContent,children:ve.jsx("img",{src:"src/assets/Himalaya.png",alt:"Himalaya"})})]}),ve.jsxs("div",{className:oo.container,children:[ve.jsx("div",{className:oo.imageContent2,children:ve.jsx("img",{src:"src/assets/malori.jpg",alt:"Mallory"})}),ve.jsxs("div",{className:oo.textContent,children:[ve.jsx("div",{className:oo.smalltitle,children:"The Story"}),ve.jsx("div",{style:{color:"#c9e1f2a0"},children:`The phrase "Because it's there," coined by mountaineer George Mallory, captures the spirit of human exploration and self-challenge in his desire to climb Mount Everest. It symbolizes the pursuit of the unknown, emphasizing that climbing is about pushing personal limits rather than just conquering a mountain. In 1924, Mallory and Andrew Irvine disappeared during their ascent, leaving their fate a mystery and fueling speculation about their success.`}),ve.jsx("div",{style:{height:"12px"}}),ve.jsx("div",{style:{color:"#c9e1f2a0"},children:"Today, Mallory's legacy inspires adventurers worldwide, emphasizing that mountaineering is about experiencing life and appreciating nature, driving humanity's relentless pursuit forward."})]})]}),ve.jsx("div",{className:oo.container,children:ve.jsxs("div",{className:oo.textContent,children:[ve.jsx("div",{className:oo.smalltitle,children:"Why We Build This Project"}),ve.jsx("div",{style:{color:"#c9e1f2a0"},children:"This work aims to showcase the history of human exploration of Mount Everest and the courage involved in challenging one's limits through a 3D interactive website. Viewers can immerse themselves in the mountain's grandeur, exploring various areas and experiencing the unique allure of high altitudes. Our goal is to inspire audiences to pursue their dreams and transcend their limits, reflecting on the spirit of exploration and adventure that Everest represents."})]})})]})})}const aGe="_dataScreen_1pw9v_1",oGe="_active_1pw9v_11",sGe="_title_1pw9v_20",lGe="_text_1pw9v_28",uGe="_smalltitle_1pw9v_36",fs={dataScreen:aGe,active:oGe,title:sGe,text:lGe,smalltitle:uGe};var lu=Nu.CMD;function Vg(t,e){return Math.abs(t-e)<1e-5}function VP(t){var e=t.data,r=t.len(),n=[],i,a=0,o=0,s=0,l=0;function u(N,k){i&&i.length>2&&n.push(i),i=[N,k]}function c(N,k,z,B){Vg(N,z)&&Vg(k,B)||i.push(N,k,z,B,z,B)}function f(N,k,z,B,V,F){var $=Math.abs(k-N),W=Math.tan($/4)*4/3,H=k<N?-1:1,X=Math.cos(N),te=Math.sin(N),Y=Math.cos(k),ee=Math.sin(k),se=X*V+z,ne=te*F+B,le=Y*V+z,pe=ee*F+B,Se=V*W*H,_e=F*W*H;i.push(se-Se*te,ne+_e*X,le+Se*ee,pe-_e*Y,le,pe)}for(var h,d,p,v,g=0;g<r;){var m=e[g++],x=g===1;switch(x&&(a=e[g],o=e[g+1],s=a,l=o,(m===lu.L||m===lu.C||m===lu.Q)&&(i=[s,l])),m){case lu.M:a=s=e[g++],o=l=e[g++],u(s,l);break;case lu.L:h=e[g++],d=e[g++],c(a,o,h,d),a=h,o=d;break;case lu.C:i.push(e[g++],e[g++],e[g++],e[g++],a=e[g++],o=e[g++]);break;case lu.Q:h=e[g++],d=e[g++],p=e[g++],v=e[g++],i.push(a+2/3*(h-a),o+2/3*(d-o),p+2/3*(h-p),v+2/3*(d-v),p,v),a=p,o=v;break;case lu.A:var S=e[g++],b=e[g++],T=e[g++],w=e[g++],E=e[g++],M=e[g++]+E;g+=1;var A=!e[g++];h=Math.cos(E)*T+S,d=Math.sin(E)*w+b,x?(s=h,l=d,u(s,l)):c(a,o,h,d),a=Math.cos(M)*T+S,o=Math.sin(M)*w+b;for(var R=(A?-1:1)*Math.PI/2,L=E;A?L>M:L<M;L+=R){var I=A?Math.max(L+R,M):Math.min(L+R,M);f(L,I,S,b,T,w)}break;case lu.R:s=a=e[g++],l=o=e[g++],h=s+e[g++],d=l+e[g++],u(h,l),c(h,l,h,d),c(h,d,s,d),c(s,d,s,l),c(s,l,h,l);break;case lu.Z:i&&c(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&n.push(i),n}function HP(t,e,r,n,i,a,o,s,l,u){if(Vg(t,r)&&Vg(e,n)&&Vg(i,o)&&Vg(a,s)){l.push(o,s);return}var c=2/u,f=c*c,h=o-t,d=s-e,p=Math.sqrt(h*h+d*d);h/=p,d/=p;var v=r-t,g=n-e,m=i-o,x=a-s,S=v*v+g*g,b=m*m+x*x;if(S<f&&b<f){l.push(o,s);return}var T=h*v+d*g,w=-h*m-d*x,E=S-T*T,M=b-w*w;if(E<f&&T>=0&&M<f&&w>=0){l.push(o,s);return}var A=[],R=[];xh(t,r,i,o,.5,A),xh(e,n,a,s,.5,R),HP(A[0],R[0],A[1],R[1],A[2],R[2],A[3],R[3],l,u),HP(A[4],R[4],A[5],R[5],A[6],R[6],A[7],R[7],l,u)}function cGe(t,e){var r=VP(t),n=[];e=e||1;for(var i=0;i<r.length;i++){var a=r[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],f=a[u++],h=a[u++],d=a[u++],p=a[u++],v=a[u++];HP(s,l,c,f,h,d,p,v,o,e),s=p,l=v}n.push(o)}return n}function gae(t,e,r){var n=t[e],i=t[1-e],a=Math.abs(n/i),o=Math.ceil(Math.sqrt(a*r)),s=Math.floor(r/o);s===0&&(s=1,o=r);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,f=r-c;if(f>0)for(var u=0;u<f;u++)l[u%o]+=1;return l}function OX(t,e,r){for(var n=t.r0,i=t.r,a=t.startAngle,o=t.endAngle,s=Math.abs(o-a),l=s*i,u=i-n,c=l>Math.abs(u),f=gae([l,u],c?0:1,e),h=(c?s:u)/f.length,d=0;d<f.length;d++)for(var p=(c?u:s)/f[d],v=0;v<f[d];v++){var g={};c?(g.startAngle=a+h*d,g.endAngle=a+h*(d+1),g.r0=n+p*v,g.r=n+p*(v+1)):(g.startAngle=a+p*v,g.endAngle=a+p*(v+1),g.r0=n+h*d,g.r=n+h*(d+1)),g.clockwise=t.clockwise,g.cx=t.cx,g.cy=t.cy,r.push(g)}}function fGe(t,e,r){for(var n=t.width,i=t.height,a=n>i,o=gae([n,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",f=t[s]/o.length,h=0;h<o.length;h++)for(var d=t[l]/o[h],p=0;p<o[h];p++){var v={};v[u]=h*f,v[c]=p*d,v[s]=f,v[l]=d,v.x+=t.x,v.y+=t.y,r.push(v)}}function kX(t,e,r,n){return t*n-r*e}function hGe(t,e,r,n,i,a,o,s){var l=r-t,u=n-e,c=o-i,f=s-a,h=kX(c,f,l,u);if(Math.abs(h)<1e-6)return null;var d=t-i,p=e-a,v=kX(d,p,c,f)/h;return v<0||v>1?null:new or(v*l+t,v*u+e)}function dGe(t,e,r){var n=new or;or.sub(n,r,e),n.normalize();var i=new or;or.sub(i,t,e);var a=i.dot(n);return a}function bg(t,e){var r=t[t.length-1];r&&r[0]===e[0]&&r[1]===e[1]||t.push(e)}function pGe(t,e,r){for(var n=t.length,i=[],a=0;a<n;a++){var o=t[a],s=t[(a+1)%n],l=hGe(o[0],o[1],s[0],s[1],e.x,e.y,r.x,r.y);l&&i.push({projPt:dGe(l,e,r),pt:l,idx:a})}if(i.length<2)return[{points:t},{points:t}];i.sort(function(g,m){return g.projPt-m.projPt});var u=i[0],c=i[i.length-1];if(c.idx<u.idx){var f=u;u=c,c=f}for(var h=[u.pt.x,u.pt.y],d=[c.pt.x,c.pt.y],p=[h],v=[d],a=u.idx+1;a<=c.idx;a++)bg(p,t[a].slice());bg(p,d),bg(p,h);for(var a=c.idx+1;a<=u.idx+n;a++)bg(v,t[a%n].slice());return bg(v,h),bg(v,d),[{points:p},{points:v}]}function FX(t){var e=t.points,r=[],n=[];kT(e,r,n);var i=new sr(r[0],r[1],n[0]-r[0],n[1]-r[1]),a=i.width,o=i.height,s=i.x,l=i.y,u=new or,c=new or;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),pGe(e,u,c)}function mT(t,e,r,n){if(r===1)n.push(e);else{var i=Math.floor(r/2),a=t(e);mT(t,a[0],i,n),mT(t,a[1],r-i,n)}return n}function vGe(t,e){for(var r=[],n=0;n<e;n++)r.push(bL(t));return r}function gGe(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function mGe(t){for(var e=[],r=0;r<t.length;)e.push([t[r++],t[r++]]);return e}function yGe(t,e){var r=[],n=t.shape,i;switch(t.type){case"rect":fGe(n,e,r),i=Mr;break;case"sector":OX(n,e,r),i=wo;break;case"circle":OX({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},e,r),i=wo;break;default:var a=t.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=Oe(cGe(t.getUpdatedPathProxy(),o),function(m){return mGe(m)}),l=s.length;if(l===0)mT(FX,{points:s[0]},e,r);else if(l===e)for(var u=0;u<l;u++)r.push({points:s[u]});else{var c=0,f=Oe(s,function(m){var x=[],S=[];kT(m,x,S);var b=(S[1]-x[1])*(S[0]-x[0]);return c+=b,{poly:m,area:b}});f.sort(function(m,x){return x.area-m.area});for(var h=e,u=0;u<l;u++){var d=f[u];if(h<=0)break;var p=u===l-1?h:Math.ceil(d.area/c*e);p<0||(mT(FX,{points:d.poly},p,r),h-=p)}}i=To;break}if(!i)return vGe(t,e);for(var v=[],u=0;u<r.length;u++){var g=new i;g.setShape(r[u]),gGe(t,g),v.push(g)}return v}function _Ge(t,e){var r=t.length,n=e.length;if(r===n)return[t,e];for(var i=[],a=[],o=r<n?t:e,s=Math.min(r,n),l=Math.abs(n-r)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,f=[o[0],o[1]],h=l,d=2;d<s;){var p=o[d-2],v=o[d-1],g=o[d++],m=o[d++],x=o[d++],S=o[d++],b=o[d++],T=o[d++];if(h<=0){f.push(g,m,x,S,b,T);continue}for(var w=Math.min(h,c-1)+1,E=1;E<=w;E++){var M=E/w;xh(p,g,x,b,M,i),xh(v,m,S,T,M,a),p=i[3],v=a[3],f.push(i[1],a[1],i[2],a[2],p,v),g=i[5],m=a[5],x=i[6],S=a[6]}h-=w-1}return o===t?[f,e]:[t,f]}function BX(t,e){for(var r=t.length,n=t[r-2],i=t[r-1],a=[],o=0;o<e.length;)a[o++]=n,a[o++]=i;return a}function xGe(t,e){for(var r,n,i,a=[],o=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],u=e[s],c=void 0,f=void 0;l?u?(r=_Ge(l,u),c=r[0],f=r[1],n=c,i=f):(f=BX(i||l,l),c=l):(c=BX(n||u,u),f=u),a.push(c),o.push(f)}return[a,o]}function zX(t){for(var e=0,r=0,n=0,i=t.length,a=0,o=i-2;a<i;o=a,a+=2){var s=t[o],l=t[o+1],u=t[a],c=t[a+1],f=s*c-u*l;e+=f,r+=(s+u)*f,n+=(l+c)*f}return e===0?[t[0]||0,t[1]||0]:[r/e/3,n/e/3,e]}function SGe(t,e,r,n){for(var i=(t.length-2)/6,a=1/0,o=0,s=t.length,l=s-2,u=0;u<i;u++){for(var c=u*6,f=0,h=0;h<s;h+=2){var d=h===0?c:(c+h-2)%l+2,p=t[d]-r[0],v=t[d+1]-r[1],g=e[h]-n[0],m=e[h+1]-n[1],x=g-p,S=m-v;f+=x*x+S*S}f<a&&(a=f,o=u)}return o}function bGe(t){for(var e=[],r=t.length,n=0;n<r;n+=2)e[n]=t[r-n-2],e[n+1]=t[r-n-1];return e}function wGe(t,e,r,n){for(var i=[],a,o=0;o<t.length;o++){var s=t[o],l=e[o],u=zX(s),c=zX(l);a==null&&(a=u[2]<0!=c[2]<0);var f=[],h=[],d=0,p=1/0,v=[],g=s.length;a&&(s=bGe(s));for(var m=SGe(s,l,u,c)*6,x=g-2,S=0;S<x;S+=2){var b=(m+S)%x+2;f[S+2]=s[b]-u[0],f[S+3]=s[b+1]-u[1]}f[0]=s[m]-u[0],f[1]=s[m+1]-u[1];for(var T=n/r,w=-n/2;w<=n/2;w+=T){for(var E=Math.sin(w),M=Math.cos(w),A=0,S=0;S<s.length;S+=2){var R=f[S],L=f[S+1],I=l[S]-c[0],N=l[S+1]-c[1],k=I*M-N*E,z=I*E+N*M;v[S]=k,v[S+1]=z;var B=k-R,V=z-L;A+=B*B+V*V}if(A<p){p=A,d=w;for(var F=0;F<v.length;F++)h[F]=v[F]}}i.push({from:f,to:h,fromCp:u,toCp:c,rotation:-d})}return i}function yT(t){return t.__isCombineMorphing}var mae="__mOriginal_";function _T(t,e,r){var n=mae+e,i=t[n]||t[e];t[n]||(t[n]=t[e]);var a=r.replace,o=r.after,s=r.before;t[e]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),o&&o.apply(this,l),u}}function J1(t,e){var r=mae+e;t[r]&&(t[e]=t[r],t[r]=null)}function UX(t,e){for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;){var a=n[i],o=n[i+1];n[i++]=e[0]*a+e[2]*o+e[4],n[i++]=e[1]*a+e[3]*o+e[5]}}function yae(t,e){var r=t.getUpdatedPathProxy(),n=e.getUpdatedPathProxy(),i=xGe(VP(r),VP(n)),a=i[0],o=i[1],s=t.getComputedTransform(),l=e.getComputedTransform();function u(){this.transform=null}s&&UX(a,s),l&&UX(o,l),_T(e,"updateTransform",{replace:u}),e.transform=null;var c=wGe(a,o,10,Math.PI),f=[];_T(e,"buildPath",{replace:function(h){for(var d=e.__morphT,p=1-d,v=[],g=0;g<c.length;g++){var m=c[g],x=m.from,S=m.to,b=m.rotation*d,T=m.fromCp,w=m.toCp,E=Math.sin(b),M=Math.cos(b);l3(v,T,w,d);for(var A=0;A<x.length;A+=2){var R=x[A],L=x[A+1],I=S[A],N=S[A+1],k=R*p+I*d,z=L*p+N*d;f[A]=k*M-z*E+v[0],f[A+1]=k*E+z*M+v[1]}var B=f[0],V=f[1];h.moveTo(B,V);for(var A=2;A<x.length;){var I=f[A++],N=f[A++],F=f[A++],$=f[A++],W=f[A++],H=f[A++];B===I&&V===N&&F===W&&$===H?h.lineTo(W,H):h.bezierCurveTo(I,N,F,$,W,H),B=W,V=H}}}})}function I7(t,e,r){if(!t||!e)return e;var n=r.done,i=r.during;yae(t,e),e.__morphT=0;function a(){J1(e,"buildPath"),J1(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},At({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),n&&n()}},r)),e}function TGe(t,e,r,n,i,a){var o=16;t=i===r?0:Math.round(32767*(t-r)/(i-r)),e=a===n?0:Math.round(32767*(e-n)/(a-n));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,f=0;(t&u)>0&&(c=1),(e&u)>0&&(f=1),s+=u*u*(3*c^f),f===0&&(c===1&&(t=u-1-t,e=u-1-e),l=t,t=e,e=l)}return s}function xT(t){var e=1/0,r=1/0,n=-1/0,i=-1/0,a=Oe(t,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),f=l.y+l.height/2+(u?u[5]:0);return e=Math.min(c,e),r=Math.min(f,r),n=Math.max(c,n),i=Math.max(f,i),[c,f]}),o=Oe(a,function(s,l){return{cp:s,z:TGe(s[0],s[1],e,r,n,i),path:t[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function _ae(t){return yGe(t.path,t.count)}function GP(){return{fromIndividuals:[],toIndividuals:[],count:0}}function CGe(t,e,r){var n=[];function i(T){for(var w=0;w<T.length;w++){var E=T[w];yT(E)?i(E.childrenRef()):E instanceof yr&&n.push(E)}}i(t);var a=n.length;if(!a)return GP();var o=r.dividePath||_ae,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),GP();n=xT(n),s=xT(s);for(var l=r.done,u=r.during,c=r.individualDelay,f=new _c,h=0;h<a;h++){var d=n[h],p=s[h];p.parent=e,p.copyTransform(f),c||yae(d,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(T){for(var w=0;w<s.length;w++)s[w].addSelfToZr(T)}_T(e,"addSelfToZr",{after:function(T){v(T)}}),_T(e,"removeSelfFromZr",{after:function(T){for(var w=0;w<s.length;w++)s[w].removeSelfFromZr(T)}});function g(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,J1(e,"addSelfToZr"),J1(e,"removeSelfFromZr")}var m=s.length;if(c)for(var x=m,S=function(){x--,x===0&&(g(),l&&l())},h=0;h<m;h++){var b=c?At({delay:(r.delay||0)+c(h,m,n[h],s[h]),done:S},r):r;I7(n[h],s[h],b)}else e.__morphT=0,e.animateTo({__morphT:1},At({during:function(T){for(var w=0;w<m;w++){var E=s[w];E.__morphT=e.__morphT,E.dirtyShape()}u&&u(T)},done:function(){g();for(var T=0;T<t.length;T++)J1(t[T],"updateTransform");l&&l()}},r));return e.__zr&&v(e.__zr),{fromIndividuals:n,toIndividuals:s,count:m}}function EGe(t,e,r){var n=e.length,i=[],a=r.dividePath||_ae;function o(d){for(var p=0;p<d.length;p++){var v=d[p];yT(v)?o(v.childrenRef()):v instanceof yr&&i.push(v)}}if(yT(t)){o(t.childrenRef());var s=i.length;if(s<n)for(var l=0,u=s;u<n;u++)i.push(bL(i[l++%s]));i.length=n}else{i=a({path:t,count:n});for(var c=t.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(c);if(i.length!==n)return console.error("Invalid morphing: unmatched splitted path"),GP()}i=xT(i),e=xT(e);for(var f=r.individualDelay,u=0;u<n;u++){var h=f?At({delay:(r.delay||0)+f(u,n,i[u],e[u])},r):r;I7(i[u],e[u],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function VX(t){return De(t[0])}function HX(t,e){for(var r=[],n=t.length,i=0;i<n;i++)r.push({one:t[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)r[o%n].many.push(e[i][o])}for(var s=0,i=n-1;i>=0;i--)if(!r[i].many.length){var l=r[s].many;if(l.length<=1)if(s)s=0;else return r;var a=l.length,u=Math.ceil(a/2);r[i].many=l.slice(u,a),r[s].many=l.slice(0,u),s++}return r}var AGe={clone:function(t){for(var e=[],r=1-Math.pow(1-t.path.style.opacity,1/t.count),n=0;n<t.count;n++){var i=bL(t.path);i.setStyle("opacity",r),e.push(i)}return e},split:null};function O9(t,e,r,n,i,a){if(!t.length||!e.length)return;var o=Ym("update",n,i);if(!(o&&o.duration>0))return;var s=n.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;VX(t)&&(u=t,c=e),VX(e)&&(u=e,c=t);function f(m,x,S,b,T){var w=m.many,E=m.one;if(w.length===1&&!T){var M=x?w[0]:E,A=x?E:w[0];if(yT(M))f({many:[M],one:A},!0,S,b,!0);else{var R=s?At({delay:s(S,b)},l):l;I7(M,A,R),a(M,A,M,A,R)}}else for(var L=At({dividePath:AGe[r],individualDelay:s&&function(V,F,$,W){return s(V+S,b)}},l),I=x?CGe(w,E,L):EGe(E,w,L),N=I.fromIndividuals,k=I.toIndividuals,z=N.length,B=0;B<z;B++){var R=s?At({delay:s(B,z)},l):l;a(N[B],k[B],x?w[B]:m.one,x?m.one:w[B],R)}}for(var h=u?u===t:t.length>e.length,d=u?HX(c,u):HX(h?e:t,[h?t:e]),p=0,v=0;v<d.length;v++)p+=d[v].many.length;for(var g=0,v=0;v<d.length;v++)f(d[v],h,g,p),g+=d[v].many.length}function zd(t){if(!t)return[];if(De(t)){for(var e=[],r=0;r<t.length;r++)e.push(zd(t[r]));return e}var n=[];return t.traverse(function(i){i instanceof yr&&!i.disableMorphing&&!i.invisible&&!i.ignore&&n.push(i)}),n}var xae=1e4,MGe=0,GX=1,WX=2,RGe=kr();function PGe(t,e){for(var r=t.dimensions,n=0;n<r.length;n++){var i=t.getDimensionInfo(r[n]);if(i&&i.otherDims[e]===0)return r[n]}}function LGe(t,e,r){var n=t.getDimensionInfo(r),i=n&&n.ordinalMeta;if(n){var a=t.get(n.name,e);return i&&i.categories[a]||a+""}}function $X(t,e,r,n){var i=n?"itemChildGroupId":"itemGroupId",a=PGe(t,i);if(a){var o=LGe(t,e,a);return o}var s=t.getRawDataItem(e),l=n?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!n)return r||t.getId(e)}function jX(t){var e=[];return G(t,function(r){var n=r.data,i=r.dataGroupId;if(!(n.count()>xae))for(var a=n.getIndices(),o=0;o<a.length;o++)e.push({data:n,groupId:$X(n,o,i,!1),childGroupId:$X(n,o,i,!0),divide:r.divide,dataIndex:o})}),e}function k9(t,e,r){t.traverse(function(n){n instanceof yr&&Fn(n,{style:{opacity:0}},e,{dataIndex:r,isFrom:!0})})}function F9(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function wg(t){t.stopAnimation(),t.isGroup&&t.traverse(function(e){e.stopAnimation()})}function DGe(t,e,r){var n=Ym("update",r,e);n&&t.traverse(function(i){if(i instanceof nl){var a=ghe(i);a&&i.animateFrom({style:a},n)}})}function IGe(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++){var i=t[n],a=e[n];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function Sae(t,e,r){var n=jX(t),i=jX(e);function a(S,b,T,w,E){(T||S)&&b.animateFrom({style:T&&T!==S?Ae(Ae({},T.style),S.style):S.style},E)}var o=!1,s=MGe,l=Tt(),u=Tt();n.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&u.set(S.childGroupId,!0)});for(var c=0;c<i.length;c++){var f=i[c].groupId;if(u.get(f)){s=GX;break}var h=i[c].childGroupId;if(h&&l.get(h)){s=WX;break}}function d(S,b){return function(T){var w=T.data,E=T.dataIndex;return b?w.getId(E):S?s===GX?T.childGroupId:T.groupId:s===WX?T.childGroupId:T.groupId}}var p=IGe(n,i),v={};if(!p)for(var c=0;c<i.length;c++){var g=i[c],m=g.data.getItemGraphicEl(g.dataIndex);m&&(v[m.id]=!0)}function x(S,b){var T=n[b],w=i[S],E=w.data.hostModel,M=T.data.getItemGraphicEl(T.dataIndex),A=w.data.getItemGraphicEl(w.dataIndex);if(M===A){A&&DGe(A,w.dataIndex,E);return}M&&v[M.id]||A&&(wg(A),M?(wg(M),F9(M),o=!0,O9(zd(M),zd(A),w.divide,E,S,a)):k9(A,E,S))}new Bc(n,i,d(!0,p),d(!1,p),null,"multiple").update(x).updateManyToOne(function(S,b){var T=i[S],w=T.data,E=w.hostModel,M=w.getItemGraphicEl(T.dataIndex),A=hn(Oe(b,function(R){return n[R].data.getItemGraphicEl(n[R].dataIndex)}),function(R){return R&&R!==M&&!v[R.id]});M&&(wg(M),A.length?(G(A,function(R){wg(R),F9(R)}),o=!0,O9(zd(A),zd(M),T.divide,E,S,a)):k9(M,E,T.dataIndex))}).updateOneToMany(function(S,b){var T=n[b],w=T.data.getItemGraphicEl(T.dataIndex);if(!(w&&v[w.id])){var E=hn(Oe(S,function(A){return i[A].data.getItemGraphicEl(i[A].dataIndex)}),function(A){return A&&A!==w}),M=i[S[0]].data.hostModel;E.length&&(G(E,function(A){return wg(A)}),w?(wg(w),F9(w),o=!0,O9(zd(w),zd(E),T.divide,M,S[0],a)):G(E,function(A){return k9(A,M,S[0])}))}}).updateManyToMany(function(S,b){new Bc(b,S,function(T){return n[T].data.getId(n[T].dataIndex)},function(T){return i[T].data.getId(i[T].dataIndex)}).update(function(T,w){x(S[T],b[w])}).execute()}).execute(),o&&G(e,function(S){var b=S.data,T=b.hostModel,w=T&&r.getViewOfSeriesModel(T),E=Ym("update",T,0);w&&T.isAnimationEnabled()&&E&&E.duration>0&&w.group.traverse(function(M){M instanceof yr&&!M.animators.length&&M.animateFrom({style:{opacity:0}},E)})})}function XX(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function KX(t){return De(t)?t.sort().join(","):t}function $f(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function NGe(t,e){var r=Tt(),n=Tt(),i=Tt();return G(t.oldSeries,function(a,o){var s=t.oldDataGroupIds[o],l=t.oldData[o],u=XX(a),c=KX(u);n.set(c,{dataGroupId:s,data:l}),De(u)&&G(u,function(f){i.set(f,{key:c,dataGroupId:s,data:l})})}),G(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=XX(a),u=KX(l),c=n.get(u);if(c)r.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:$f(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:$f(s),data:s}]});else if(De(l)){var f=[];G(l,function(p){var v=n.get(p);v.data&&f.push({dataGroupId:v.dataGroupId,divide:$f(v.data),data:v.data})}),f.length&&r.set(u,{oldSeries:f,newSeries:[{dataGroupId:o,data:s,divide:$f(s)}]})}else{var h=i.get(l);if(h){var d=r.get(h.key);d||(d={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:$f(h.data)}],newSeries:[]},r.set(h.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:$f(s)})}}}}),r}function YX(t,e){for(var r=0;r<t.length;r++){var n=e.seriesIndex!=null&&e.seriesIndex===t[r].seriesIndex||e.seriesId!=null&&e.seriesId===t[r].id;if(n)return r}}function OGe(t,e,r,n){var i=[],a=[];G(gn(t.from),function(o){var s=YX(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:$f(e.oldData[s]),groupIdDim:o.dimension})}),G(gn(t.to),function(o){var s=YX(r.updatedSeries,o);if(s>=0){var l=r.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:$f(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&Sae(i,a,n)}function kGe(t){t.registerUpdateLifecycle("series:beforeupdate",function(e,r,n){G(gn(n.seriesTransition),function(i){G(gn(i.to),function(a){for(var o=n.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][_3]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(e,r,n){var i=RGe(r);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var a=n.seriesTransition;if(a)G(gn(a),function(d){OGe(d,i,n,r)});else{var o=NGe(i,n);G(o.keys(),function(d){var p=o.get(d);Sae(p.oldSeries,p.newSeries,r)})}G(n.updatedSeries,function(d){d[_3]&&(d[_3]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],c=i.oldData=[],f=0;f<s.length;f++){var h=s[f].getData();h.count()<xae&&(l.push(s[f]),u.push(s[f].get("dataGroupId")),c.push(h))}})}Ot([pD]);Ot([Eme]);Ot([hTe,ATe,FTe,GTe,KTe,e4e,M4e,sCe,CCe,LCe,UCe,qCe,SEe,DEe,KEe,zte,sAe,pAe,CAe,LAe,VAe,pMe]);Ot(zQ);Ot(b2e);Ot(GD);Ot(_xe);Ot(pee);Ot(sSe);Ot(ESe);Ot(dbe);Ot(Dbe);Ot(w2);Ot(Qbe);Ot(r3e);Ot(h3e);Ot(x3e);Ot(R3e);Ot(O3e);Ot($3e);Ot(uwe);Ot(Wee);Ot($ee);Ot(Rwe);Ot(qee);Ot(Zee);Ot(Nwe);Ot(Xwe);Ot(bJ);Ot(kGe);Ot(oJ);const FGe=JSON.parse('[{"altitude":0,"count":168,"reason":12},{"altitude":0,"count":61,"reason":11},{"altitude":0,"count":39,"reason":4},{"altitude":0,"count":1,"reason":8},{"altitude":0,"count":8,"reason":13},{"altitude":0,"count":24,"reason":5},{"altitude":0,"count":7,"reason":10},{"altitude":0,"count":58,"reason":14},{"altitude":0,"count":12,"reason":6},{"altitude":0,"count":121,"reason":0},{"altitude":0,"count":1,"reason":9},{"altitude":0,"count":3,"reason":7},{"altitude":3500,"count":1,"reason":11},{"altitude":4000,"count":2,"reason":12},{"altitude":4000,"count":2,"reason":5},{"altitude":4000,"count":2,"reason":10},{"altitude":4000,"count":1,"reason":7},{"altitude":4000,"count":1,"reason":6},{"altitude":4000,"count":1,"reason":4},{"altitude":4500,"count":6,"reason":5},{"altitude":4500,"count":1,"reason":8},{"altitude":4500,"count":2,"reason":7},{"altitude":4500,"count":1,"reason":6},{"altitude":4500,"count":4,"reason":12},{"altitude":4500,"count":1,"reason":10},{"altitude":5000,"count":34,"reason":5},{"altitude":5000,"count":4,"reason":6},{"altitude":5000,"count":10,"reason":4},{"altitude":5000,"count":3,"reason":11},{"altitude":5000,"count":7,"reason":7},{"altitude":5000,"count":13,"reason":12},{"altitude":5000,"count":2,"reason":8},{"altitude":5000,"count":2,"reason":9},{"altitude":5000,"count":4,"reason":10},{"altitude":5000,"count":7,"reason":14},{"altitude":5500,"count":47,"reason":4},{"altitude":5500,"count":95,"reason":5},{"altitude":5500,"count":13,"reason":8},{"altitude":5500,"count":22,"reason":7},{"altitude":5500,"count":37,"reason":10},{"altitude":5500,"count":7,"reason":9},{"altitude":5500,"count":74,"reason":14},{"altitude":5500,"count":12,"reason":6},{"altitude":5500,"count":14,"reason":1},{"altitude":5500,"count":22,"reason":12},{"altitude":5500,"count":1,"reason":11},{"altitude":5500,"count":1,"reason":0},{"altitude":5500,"count":2,"reason":2},{"altitude":6000,"count":323,"reason":5},{"altitude":6000,"count":48,"reason":8},{"altitude":6000,"count":131,"reason":10},{"altitude":6000,"count":145,"reason":4},{"altitude":6000,"count":63,"reason":6},{"altitude":6000,"count":66,"reason":7},{"altitude":6000,"count":192,"reason":1},{"altitude":6000,"count":20,"reason":9},{"altitude":6000,"count":30,"reason":2},{"altitude":6000,"count":20,"reason":12},{"altitude":6000,"count":54,"reason":14},{"altitude":6000,"count":1,"reason":13},{"altitude":6000,"count":2,"reason":0},{"altitude":6000,"count":1,"reason":3},{"altitude":6500,"count":207,"reason":4},{"altitude":6500,"count":247,"reason":5},{"altitude":6500,"count":21,"reason":9},{"altitude":6500,"count":334,"reason":1},{"altitude":6500,"count":60,"reason":6},{"altitude":6500,"count":68,"reason":14},{"altitude":6500,"count":71,"reason":7},{"altitude":6500,"count":16,"reason":2},{"altitude":6500,"count":109,"reason":10},{"altitude":6500,"count":30,"reason":8},{"altitude":6500,"count":12,"reason":12},{"altitude":6500,"count":1,"reason":3},{"altitude":6500,"count":1,"reason":0},{"altitude":7000,"count":259,"reason":4},{"altitude":7000,"count":60,"reason":6},{"altitude":7000,"count":89,"reason":7},{"altitude":7000,"count":33,"reason":8},{"altitude":7000,"count":208,"reason":5},{"altitude":7000,"count":1906,"reason":1},{"altitude":7000,"count":19,"reason":14},{"altitude":7000,"count":31,"reason":2},{"altitude":7000,"count":72,"reason":10},{"altitude":7000,"count":12,"reason":9},{"altitude":7000,"count":2,"reason":3},{"altitude":7000,"count":3,"reason":12},{"altitude":7000,"count":1,"reason":13},{"altitude":7000,"count":3,"reason":0},{"altitude":7500,"count":35,"reason":6},{"altitude":7500,"count":299,"reason":4},{"altitude":7500,"count":132,"reason":5},{"altitude":7500,"count":29,"reason":10},{"altitude":7500,"count":187,"reason":1},{"altitude":7500,"count":3,"reason":2},{"altitude":7500,"count":22,"reason":8},{"altitude":7500,"count":76,"reason":7},{"altitude":7500,"count":2,"reason":12},{"altitude":7500,"count":8,"reason":9},{"altitude":7500,"count":13,"reason":14},{"altitude":7500,"count":2,"reason":3},{"altitude":8000,"count":1587,"reason":1},{"altitude":8000,"count":246,"reason":4},{"altitude":8000,"count":36,"reason":10},{"altitude":8000,"count":85,"reason":7},{"altitude":8000,"count":25,"reason":6},{"altitude":8000,"count":73,"reason":5},{"altitude":8000,"count":10,"reason":3},{"altitude":8000,"count":15,"reason":9},{"altitude":8000,"count":31,"reason":8},{"altitude":8000,"count":21,"reason":14},{"altitude":8000,"count":59,"reason":2},{"altitude":8000,"count":2,"reason":13},{"altitude":8000,"count":2,"reason":12},{"altitude":8000,"count":1,"reason":0},{"altitude":8500,"count":641,"reason":1},{"altitude":8500,"count":10,"reason":9},{"altitude":8500,"count":18,"reason":10},{"altitude":8500,"count":28,"reason":6},{"altitude":8500,"count":122,"reason":4},{"altitude":8500,"count":22,"reason":5},{"altitude":8500,"count":37,"reason":8},{"altitude":8500,"count":1,"reason":12},{"altitude":8500,"count":60,"reason":7},{"altitude":8500,"count":2,"reason":3},{"altitude":8500,"count":14,"reason":14},{"altitude":8500,"count":5,"reason":2},{"altitude":9000,"count":1489,"reason":1},{"altitude":9000,"count":1,"reason":9},{"altitude":9000,"count":3,"reason":10},{"altitude":9000,"count":3,"reason":3},{"altitude":9000,"count":14,"reason":4},{"altitude":9000,"count":6,"reason":8},{"altitude":9000,"count":3,"reason":14},{"altitude":9000,"count":9,"reason":7},{"altitude":9000,"count":2,"reason":5},{"altitude":9000,"count":1,"reason":2},{"altitude":9000,"count":1,"reason":6}]'),BGe=({height:t="400px",className:e=""})=>{const r=D.useRef(null);return D.useEffect(()=>{if(!r.current)return;const n=Gp(r.current),i={4:"Bad Weather",5:"Natural Disaster",6:"Fatality",7:"Illness/Injury",8:"Supply Shortage",9:"Time Limitation",10:"Route Difficulty",11:"Not Started",12:"Not Started",0:"Other Reasons",1:"Other Reasons",2:"Other Reasons",3:"Other Reasons",13:"Other Reasons",14:"Other Reasons"},a=FGe.reduce((d,p)=>{const v=i[p.reason],g=d.find(m=>m.altitude===p.altitude&&m.reason===v);return g?g.count+=p.count:d.push({altitude:p.altitude,count:p.count,reason:v}),d},[]),o=a.reduce((d,p)=>d+p.count,0),s=["Other Reasons","Bad Weather","Natural Disaster","Fatality","Illness/Injury","Supply Shortage","Time Limitation","Route Difficulty","Not Started"],l=s.filter(d=>a.some(p=>p.reason===d)),u=a.map(d=>{const p=d.count/o*100;return[d.altitude,p,d.reason]}).sort((d,p)=>s.indexOf(d[2])-s.indexOf(p[2])),c=a.reduce((d,p)=>(d[p.altitude]=(d[p.altitude]||0)+p.count,d),{}),f={tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"rgba(255, 255, 255, 0.2)",width:1,type:"solid"}},formatter:d=>{const p=d[0].value[0];let v=`Altitude: ${p}m<br/>`;const m=((c[p]||0)/o*100).toFixed(2);return v+=`Stop Rate: ${m}%<br/>`,v}},legend:{data:l,textStyle:{color:"#fff"}},singleAxis:{type:"value",top:50,bottom:50,min:0,max:9e3,axisLabel:{formatter:"{value}m",color:"#fff"},splitLine:{show:!0,lineStyle:{color:"rgba(255, 255, 255, 0.1)"}}},series:[{type:"themeRiver",emphasis:{focus:"series",blurScope:"coordinateSystem"},data:u,label:{show:!1},itemStyle:{opacity:.8},color:["rgba(30, 144, 255, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)","rgba(50, 205, 50, 0.8)","rgba(255, 159, 64, 0.8)","rgba(128, 0, 128, 0.8)","rgba(0, 191, 255, 0.8)"]}]};n.setOption(f);const h=()=>{n.resize()};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),n.dispose()}},[]),ve.jsx("div",{ref:r,className:e,style:{height:t,overflow:"hidden",position:"relative",minHeight:"400px",userSelect:"none"}})},zGe=JSON.parse('[{"name":"Roma","height":5407,"climbable":true},{"name":"Chhukung Chuli","height":5550,"climbable":false},{"name":"Mardi Himal","height":5553,"climbable":false},{"name":"Chhuboche","height":5606,"climbable":true},{"name":"Metalung","height":5608,"climbable":false},{"name":"Amphu Gyabjen","height":5630,"climbable":true},{"name":"Tharpu Chuli","height":5695,"climbable":false},{"name":"Luza","height":5710,"climbable":true},{"name":"Korlang Pari Tippa","height":5738,"climbable":true},{"name":"Jagdula","height":5761,"climbable":true},{"name":"Matathumba","height":5767,"climbable":false},{"name":"Pokalde","height":5780,"climbable":false},{"name":"Khongma Tse","height":5798,"climbable":false},{"name":"Ghyuthumba Main","height":5806,"climbable":false},{"name":"Chhukung Tse","height":5833,"climbable":false},{"name":"Pointed Peak","height":5850,"climbable":false},{"name":"Naya Kanga","height":5863,"climbable":false},{"name":"Urkema","height":5890,"climbable":true},{"name":"Ramdung","height":5900,"climbable":false},{"name":"Paldor","height":5903,"climbable":false},{"name":"Kanta Gaton","height":5910,"climbable":true},{"name":"Sisne Himal","height":5911,"climbable":true},{"name":"Narphu","height":5921,"climbable":true},{"name":"Jugal 5","height":5922,"climbable":true},{"name":"Syaokang","height":5929,"climbable":true},{"name":"Jugal 4","height":5936,"climbable":true},{"name":"Kaptang","height":5965,"climbable":true},{"name":"Kagmara I","height":5978,"climbable":true},{"name":"Dhampus","height":6012,"climbable":true},{"name":"Karko","height":6015,"climbable":true},{"name":"Pharilapcha","height":6017,"climbable":false},{"name":"Dhechyan Khang","height":6019,"climbable":true},{"name":"Nalakankar South","height":6024,"climbable":false},{"name":"Lunchhung Kamo East","height":6024,"climbable":false},{"name":"Mojca","height":6024,"climbable":true},{"name":"Khung","height":6024,"climbable":true},{"name":"Arniko Chuli","height":6034,"climbable":true},{"name":"Ardang","height":6034,"climbable":true},{"name":"Kangchung Nup","height":6043,"climbable":false},{"name":"Lungchhung","height":6043,"climbable":true},{"name":"Dudh Kundali","height":6045,"climbable":true},{"name":"Langtang Yubra","height":6048,"climbable":false},{"name":"Punchen Himal","height":6049,"climbable":true},{"name":"Aichyn","height":6055,"climbable":true},{"name":"Rolmi","height":6056,"climbable":true},{"name":"Chamar Kang","height":6060,"climbable":false},{"name":"Nalakankar North","height":6062,"climbable":true},{"name":"Kangchung Shar","height":6063,"climbable":true},{"name":"Mera South","height":6064,"climbable":true},{"name":"Tobsar","height":6065,"climbable":true},{"name":"Lhonak","height":6070,"climbable":true},{"name":"Omoga Ri Chang","height":6070,"climbable":false},{"name":"Sharphu VI","height":6076,"climbable":true},{"name":"Norbu Kang","height":6085,"climbable":true},{"name":"Mukut Himal","height":6087,"climbable":true},{"name":"Pisang","height":6091,"climbable":false},{"name":"Bhulu Lhasa","height":6102,"climbable":true},{"name":"Danphe Shail","height":6103,"climbable":true},{"name":"Chhopa Bamare","height":6109,"climbable":true},{"name":"Gaugiri","height":6110,"climbable":true},{"name":"Tawa","height":6110,"climbable":false},{"name":"Ghyun Himal I","height":6110,"climbable":true},{"name":"Jinjang","height":6111,"climbable":true},{"name":"Bijora Hiunchuli","height":6111,"climbable":true},{"name":"Boktoh","height":6114,"climbable":false},{"name":"Lobuche East","height":6119,"climbable":false},{"name":"Hunku","height":6119,"climbable":false},{"name":"Beding Go","height":6125,"climbable":true},{"name":"Purkhung","height":6126,"climbable":true},{"name":"Changwathang","height":6130,"climbable":true},{"name":"Nampa South","height":6130,"climbable":true},{"name":"Lobuche West","height":6135,"climbable":false},{"name":"Shey Shikhar","height":6139,"climbable":true},{"name":"Tengi Ragi Tau South","height":6141,"climbable":false},{"name":"Takphu North","height":6142,"climbable":true},{"name":"Chandi Himal","height":6142,"climbable":true},{"name":"Urkinmang","height":6143,"climbable":true},{"name":"Thorong Peak","height":6144,"climbable":true},{"name":"Nagoru Far East","height":6145,"climbable":false},{"name":"Kotang","height":6148,"climbable":true},{"name":"Bhemdang Ri","height":6150,"climbable":true},{"name":"Kyazo Ri","height":6151,"climbable":false},{"name":"Gyalzen Peak","height":6151,"climbable":true},{"name":"Takargo East","height":6152,"climbable":true},{"name":"Sharphu V","height":6158,"climbable":true},{"name":"Nirekha","height":6159,"climbable":false},{"name":"Sat Peak","height":6164,"climbable":true},{"name":"Imjatse","height":6165,"climbable":false},{"name":"Nagoru","height":6165,"climbable":false},{"name":"Jabou Ri","height":6166,"climbable":true},{"name":"Dwijen Himal","height":6169,"climbable":true},{"name":"Sharphu IV","height":6172,"climbable":true},{"name":"Peri","height":6174,"climbable":true},{"name":"Pashuwo","height":6177,"climbable":true},{"name":"Swelokhan","height":6180,"climbable":true},{"name":"Pota Himal North","height":6182,"climbable":true},{"name":"Jugal 3","height":6184,"climbable":true},{"name":"Dragmorpa Ri","height":6185,"climbable":true},{"name":"Kwangde","height":6186,"climbable":false},{"name":"Khayang","height":6186,"climbable":true},{"name":"Tongu","height":6187,"climbable":false},{"name":"Lasa","height":6189,"climbable":true},{"name":"Mustang Himal","height":6195,"climbable":true},{"name":"Dingjung Ri","height":6196,"climbable":true},{"name":"Tsisima","height":6196,"climbable":false},{"name":"Gorakh Himal","height":6198,"climbable":true},{"name":"Amphu Middle","height":6202,"climbable":false},{"name":"Yanme Kang","height":6206,"climbable":true},{"name":"Mingbo Ri","height":6207,"climbable":false},{"name":"Sanctuary Peak","height":6207,"climbable":true},{"name":"Nangamari II","height":6209,"climbable":true},{"name":"Rhimbu","height":6210,"climbable":true},{"name":"Ek Rate Danda","height":6213,"climbable":true},{"name":"Tengkoma","height":6215,"climbable":true},{"name":"Langdak","height":6220,"climbable":true},{"name":"Sharphu III","height":6220,"climbable":true},{"name":"Raungsiyar","height":6224,"climbable":true},{"name":"Serku Dolma","height":6227,"climbable":false},{"name":"Mustang Peak","height":6229,"climbable":false},{"name":"Mansail","height":6235,"climbable":true},{"name":"Saula","height":6235,"climbable":true},{"name":"Yara Chuli","height":6236,"climbable":true},{"name":"Pabuk Kang","height":6244,"climbable":true},{"name":"Gandharva Chuli","height":6248,"climbable":true},{"name":"Mansail South","height":6248,"climbable":true},{"name":"Dingjung North","height":6249,"climbable":true},{"name":"Simnang Himal","height":6251,"climbable":true},{"name":"Gorakh Khang","height":6254,"climbable":true},{"name":"Chekigo","height":6257,"climbable":false},{"name":"Chukyima Go","height":6258,"climbable":true},{"name":"Chhochenphu Himal","height":6260,"climbable":true},{"name":"Kojichuwa South","height":6264,"climbable":true},{"name":"Pankar Himal","height":6264,"climbable":true},{"name":"Yubra","height":6264,"climbable":false},{"name":"Asajya Tuppa","height":6265,"climbable":true},{"name":"Myagdi Matha","height":6273,"climbable":false},{"name":"Kogi Khang North","height":6275,"climbable":true},{"name":"Takla Kang","height":6276,"climbable":true},{"name":"Parchamo","height":6279,"climbable":false},{"name":"Kangtokal","height":6294,"climbable":true},{"name":"Dzasampatse","height":6295,"climbable":false},{"name":"Peri Himal","height":6296,"climbable":true},{"name":"Ombak Himal","height":6300,"climbable":false},{"name":"Pama Himal","height":6300,"climbable":true},{"name":"Tankya I","height":6305,"climbable":true},{"name":"Gojung","height":6310,"climbable":false},{"name":"Dzanye II","height":6318,"climbable":true},{"name":"Langdung","height":6326,"climbable":true},{"name":"Saribung","height":6328,"climbable":true},{"name":"Sharphu II","height":6328,"climbable":true},{"name":"Sano Bhrikuti","height":6328,"climbable":false},{"name":"Kaipuchonam","height":6329,"climbable":true},{"name":"Omitso Go","height":6332,"climbable":true},{"name":"Dolma Khang","height":6332,"climbable":true},{"name":"Merra","height":6334,"climbable":true},{"name":"Jomsom Himal","height":6335,"climbable":true},{"name":"Samdo","height":6335,"climbable":true},{"name":"Ombigaichen","height":6340,"climbable":false},{"name":"Naulekh","height":6340,"climbable":true},{"name":"Tsartse","height":6343,"climbable":true},{"name":"Pimu","height":6344,"climbable":false},{"name":"Kang Kuru","height":6344,"climbable":false},{"name":"Ganesh VII","height":6350,"climbable":false},{"name":"Danga","height":6355,"climbable":true},{"name":"Kumlung","height":6355,"climbable":true},{"name":"Bhrikuti Shail","height":6361,"climbable":true},{"name":"Gyala","height":6363,"climbable":true},{"name":"Til Kang","height":6369,"climbable":true},{"name":"Kusum Kanguru","height":6370,"climbable":false},{"name":"Pokharkang","height":6372,"climbable":true},{"name":"Saldim","height":6374,"climbable":true},{"name":"Ganchenpo","height":6378,"climbable":true},{"name":"Manapathi","height":6380,"climbable":true},{"name":"Manapathi NE","height":6384,"climbable":false},{"name":"Tashi Kang","height":6386,"climbable":true},{"name":"Kasi Dalpha","height":6386,"climbable":true},{"name":"Saldim West","height":6388,"climbable":true},{"name":"Jyachhung","height":6388,"climbable":true},{"name":"Amotsang","height":6393,"climbable":true},{"name":"Tsaurabong Peak","height":6395,"climbable":false},{"name":"Takphu Himal","height":6395,"climbable":true},{"name":"Lhayul Peak","height":6395,"climbable":true},{"name":"Bamongo","height":6400,"climbable":true},{"name":"Chaw Peak","height":6404,"climbable":true},{"name":"Swaksa Kang","height":6405,"climbable":true},{"name":"Lha Shamma","height":6412,"climbable":true},{"name":"Langshisa Ri","height":6412,"climbable":false},{"name":"Larkya Peak","height":6416,"climbable":false},{"name":"Chulu West","height":6419,"climbable":false},{"name":"Kanti Himal Churau","height":6419,"climbable":false},{"name":"Yaupa","height":6422,"climbable":true},{"name":"Cholatse","height":6423,"climbable":false},{"name":"Yokopahar","height":6423,"climbable":true},{"name":"Futi Himal","height":6425,"climbable":false},{"name":"Langju","height":6426,"climbable":true},{"name":"Shershon","height":6432,"climbable":true},{"name":"Sharphu I","height":6433,"climbable":true},{"name":"Hiunchuli","height":6434,"climbable":false},{"name":"Kojichuwa Chuli","height":6439,"climbable":true},{"name":"Kangtsune","height":6444,"climbable":false},{"name":"Taple Shikhar","height":6447,"climbable":true},{"name":"Mayonthang Kang","height":6449,"climbable":true},{"name":"Patrasi Himal","height":6450,"climbable":true},{"name":"Sano Kailash","height":6452,"climbable":false},{"name":"Mariyang West","height":6455,"climbable":true},{"name":"Ghustang South","height":6465,"climbable":true},{"name":"Kyabura","height":6466,"climbable":true},{"name":"Rokapi","height":6468,"climbable":true},{"name":"Mera Peak","height":6470,"climbable":false},{"name":"Kande Hiunchuli North  II","height":6471,"climbable":false},{"name":"Jarkya","height":6473,"climbable":true},{"name":"Bhrikuti","height":6476,"climbable":true},{"name":"Karsang Khang","height":6476,"climbable":true},{"name":"Pangbuk North","height":6478,"climbable":false},{"name":"Tengkangpoche","height":6482,"climbable":true},{"name":"Yakawa Kang","height":6482,"climbable":true},{"name":"Khatung Khang","height":6484,"climbable":true},{"name":"Triangle Peak","height":6484,"climbable":false},{"name":"Lunag West","height":6492,"climbable":false},{"name":"Tawoche","height":6495,"climbable":true},{"name":"Purbung Himal","height":6500,"climbable":true},{"name":"Lungsampa","height":6500,"climbable":true},{"name":"Singu Chuli","height":6501,"climbable":false},{"name":"Panpoche 2","height":6504,"climbable":true},{"name":"Kyungka Ri 2","height":6506,"climbable":true},{"name":"Kanti Himal East","height":6516,"climbable":true},{"name":"Tso Karpo","height":6518,"climbable":true},{"name":"Jugal 2","height":6518,"climbable":true},{"name":"Kande Hiunchuli North  I","height":6521,"climbable":false},{"name":"Phungi","height":6524,"climbable":true},{"name":"Mariyang","height":6528,"climbable":true},{"name":"Ghustang North","height":6529,"climbable":true},{"name":"Karyolung","height":6530,"climbable":true},{"name":"Snow Peak","height":6530,"climbable":false},{"name":"Tilje","height":6530,"climbable":true},{"name":"Yangri","height":6535,"climbable":true},{"name":"Dogari","height":6536,"climbable":true},{"name":"Phungi Himal","height":6538,"climbable":true},{"name":"Nangamari I","height":6547,"climbable":true},{"name":"Langmoche Ri","height":6552,"climbable":true},{"name":"Tripura Hiunchuli","height":6553,"climbable":true},{"name":"Hongde","height":6556,"climbable":true},{"name":"Tso Karpo Kang","height":6556,"climbable":true},{"name":"Changla","height":6563,"climbable":true},{"name":"Surma-Sarovar North","height":6564,"climbable":true},{"name":"Yansa Tsenji","height":6567,"climbable":true},{"name":"Konabon","height":6570,"climbable":true},{"name":"Pethangtse East","height":6572,"climbable":true},{"name":"Malanphulan","height":6573,"climbable":true},{"name":"Nupche Kang","height":6576,"climbable":true},{"name":"Phu Kang North","height":6580,"climbable":true},{"name":"Dzanye","height":6581,"climbable":true},{"name":"Gave Ding","height":6581,"climbable":false},{"name":"Chulu Central","height":6584,"climbable":false},{"name":"Nampa II","height":6585,"climbable":true},{"name":"Jugal 1","height":6591,"climbable":true},{"name":"Dorje Lakpa II","height":6593,"climbable":false},{"name":"Ghenge Liru","height":6596,"climbable":true},{"name":"Kyungka Ri 1","height":6599,"climbable":true},{"name":"Kabru Dome","height":6600,"climbable":false},{"name":"Ramtang","height":6601,"climbable":true},{"name":"Thoche Go","height":6602,"climbable":true},{"name":"Raksha Urai","height":6609,"climbable":true},{"name":"Sita Chuchura","height":6611,"climbable":true},{"name":"Nampa III","height":6611,"climbable":true},{"name":"Kanjeralwa","height":6612,"climbable":true},{"name":"Thamserku","height":6618,"climbable":true},{"name":"Panpoche 1","height":6620,"climbable":true},{"name":"Pawar Central","height":6621,"climbable":false},{"name":"Changdi","height":6623,"climbable":true},{"name":"Pangbuk Ri","height":6625,"climbable":true},{"name":"Kande Hiunchuli","height":6627,"climbable":true},{"name":"Lachama North","height":6628,"climbable":true},{"name":"Goldum Peak","height":6632,"climbable":true},{"name":"Numri","height":6635,"climbable":true},{"name":"Phurbi Chhyachu","height":6637,"climbable":true},{"name":"Dhaulagari","height":6638,"climbable":true},{"name":"Khumbutse","height":6639,"climbable":true},{"name":"Yarwa","height":6644,"climbable":true},{"name":"Phole","height":6645,"climbable":true},{"name":"Ripimo Shar","height":6647,"climbable":true},{"name":"Lampo","height":6648,"climbable":false},{"name":"Peak 41","height":6648,"climbable":true},{"name":"Chhiv Himal","height":6650,"climbable":true},{"name":"Sobithongie","height":6652,"climbable":true},{"name":"Khangri West","height":6658,"climbable":true},{"name":"Linkhu Chuli Nup","height":6659,"climbable":true},{"name":"Rolwaling Kang","height":6664,"climbable":true},{"name":"Pandra","height":6670,"climbable":true},{"name":"Baudha","height":6672,"climbable":true},{"name":"Tengi Ragi Tau East","height":6675,"climbable":false},{"name":"Rathong","height":6682,"climbable":true},{"name":"Shershon Northwest","height":6682,"climbable":true},{"name":"Chobuje","height":6686,"climbable":true},{"name":"Panalotapa","height":6687,"climbable":true},{"name":"Hulang Go","height":6687,"climbable":true},{"name":"Rani Peak","height":6693,"climbable":false},{"name":"Phu Kang","height":6694,"climbable":true},{"name":"Nilgiri East","height":6698,"climbable":false},{"name":"Cho Polu","height":6700,"climbable":true},{"name":"Chako","height":6704,"climbable":true},{"name":"Shalbachum","height":6707,"climbable":true},{"name":"Tharke Kang","height":6710,"climbable":true},{"name":"Lingtren","height":6713,"climbable":true},{"name":"Linkhu Chuli Shar","height":6719,"climbable":true},{"name":"Lachama Chuli","height":6721,"climbable":true},{"name":"Nampa","height":6729,"climbable":true},{"name":"Firnkopf","height":6730,"climbable":true},{"name":"Jasemba Goth","height":6730,"climbable":true},{"name":"Leonpo Gang East","height":6733,"climbable":true},{"name":"Peak 4","height":6736,"climbable":true},{"name":"Kang Nagchugo","height":6737,"climbable":true},{"name":"Pethangtse","height":6739,"climbable":true},{"name":"Amphu I","height":6740,"climbable":true},{"name":"Pemthang Ri","height":6743,"climbable":false},{"name":"Ghhanyala Hies","height":6744,"climbable":true},{"name":"Guras","height":6744,"climbable":true},{"name":"Firnkopf West","height":6745,"climbable":true},{"name":"Drangnag Ri","height":6757,"climbable":true},{"name":"Tutse","height":6758,"climbable":true},{"name":"Khamjung","height":6759,"climbable":true},{"name":"Hongku","height":6764,"climbable":true},{"name":"Phu Kang Go","height":6767,"climbable":true},{"name":"Ganesh V","height":6770,"climbable":true},{"name":"Kyashar","height":6770,"climbable":true},{"name":"Takargo","height":6771,"climbable":true},{"name":"Jobo Rinjang","height":6778,"climbable":true},{"name":"Kimshung","height":6781,"climbable":false},{"name":"Kangtega","height":6783,"climbable":true},{"name":"Langchung Khang","height":6786,"climbable":true},{"name":"Khatang","height":6790,"climbable":true},{"name":"Khangri Shar","height":6792,"climbable":true},{"name":"Chabuk","height":6792,"climbable":true},{"name":"Bhairab Takura","height":6799,"climbable":true},{"name":"Ramtang Chang","height":6802,"climbable":true},{"name":"Lashar II","height":6803,"climbable":true},{"name":"Bobaye","height":6808,"climbable":true},{"name":"Anidesh Chuli","height":6808,"climbable":true},{"name":"Lunag II","height":6812,"climbable":false},{"name":"Ama Dablam","height":6814,"climbable":true},{"name":"Cheo Himal","height":6820,"climbable":true},{"name":"Sphinx","height":6825,"climbable":true},{"name":"Hongku Chuli","height":6833,"climbable":true},{"name":"Nilgiri South","height":6839,"climbable":true},{"name":"Ohmi Kangri","height":6839,"climbable":true},{"name":"Lashar I","height":6842,"climbable":true},{"name":"Jethi Bahurani","height":6850,"climbable":true},{"name":"Kanti Himal","height":6850,"climbable":true},{"name":"Langpo South","height":6857,"climbable":false},{"name":"Kanjiroba North","height":6858,"climbable":true},{"name":"Chumbu","height":6859,"climbable":true},{"name":"Nup La Kang","height":6861,"climbable":true},{"name":"Yangra Kangri South","height":6863,"climbable":true},{"name":"Pemthang Karpo Ri","height":6865,"climbable":true},{"name":"Drohmo","height":6881,"climbable":true},{"name":"Kanjiroba South","height":6883,"climbable":true},{"name":"Gurkarpo Ri","height":6889,"climbable":true},{"name":"Chago","height":6893,"climbable":true},{"name":"Lunag Ri","height":6895,"climbable":false},{"name":"Lugula","height":6899,"climbable":true},{"name":"Panbari","height":6905,"climbable":true},{"name":"Ganesh VI","height":6908,"climbable":true},{"name":"Tukuche","height":6920,"climbable":true},{"name":"Saipal East Humla","height":6925,"climbable":true},{"name":"Himlung East","height":6932,"climbable":true},{"name":"Tengi Ragi Tau","height":6938,"climbable":true},{"name":"Nilgiri Central","height":6940,"climbable":true},{"name":"Burke Kang","height":6942,"climbable":true},{"name":"Numbur","height":6958,"climbable":true},{"name":"Langpo","height":6965,"climbable":true},{"name":"Dorje Lhakpa","height":6966,"climbable":true},{"name":"Leonpo Gang","height":6979,"climbable":true},{"name":"Kang Guru","height":6981,"climbable":true},{"name":"Lamjung Himal","height":6983,"climbable":true},{"name":"Kali Himal","height":6985,"climbable":true},{"name":"Machhapuchhare","height":6993,"climbable":false},{"name":"Manaslu North","height":6994,"climbable":true},{"name":"Gimmigela Chuli East","height":7007,"climbable":false},{"name":"Nepal Gap Peak","height":7007,"climbable":true},{"name":"Gaurishankar South","height":7010,"climbable":true},{"name":"Palung","height":7012,"climbable":false},{"name":"Hungchhi","height":7029,"climbable":true},{"name":"Saipal","height":7030,"climbable":true},{"name":"Ratna Chuli","height":7035,"climbable":true},{"name":"Janak Chuli","height":7041,"climbable":true},{"name":"Ganesh III","height":7043,"climbable":true},{"name":"Thulagi","height":7059,"climbable":true},{"name":"Nilgiri North","height":7061,"climbable":true},{"name":"Tarke Kang Shar","height":7069,"climbable":false},{"name":"Gyajikang","height":7074,"climbable":true},{"name":"Api West","height":7076,"climbable":true},{"name":"Himjung","height":7092,"climbable":true},{"name":"Ganesh IV","height":7104,"climbable":true},{"name":"Ganesh II","height":7118,"climbable":true},{"name":"Himlung Himal","height":7126,"climbable":true},{"name":"Api Main","height":7132,"climbable":true},{"name":"Junction Peak","height":7133,"climbable":false},{"name":"Tilicho","height":7134,"climbable":true},{"name":"Gaurishankar","height":7135,"climbable":true},{"name":"Pumori","height":7138,"climbable":true},{"name":"Nemjung","height":7140,"climbable":true},{"name":"Pyramid Peak","height":7140,"climbable":true},{"name":"Gangapurna West","height":7140,"climbable":true},{"name":"Baruntse","height":7152,"climbable":true},{"name":"Chamar","height":7161,"climbable":true},{"name":"Chamar North","height":7165,"climbable":true},{"name":"Glacier Dome","height":7168,"climbable":true},{"name":"Nepal Peak","height":7177,"climbable":true},{"name":"Gama Peak","height":7187,"climbable":false},{"name":"Gurja Himal","height":7193,"climbable":true},{"name":"Langtang Ri","height":7205,"climbable":true},{"name":"Annapurna South","height":7219,"climbable":true},{"name":"Langtang Lirung","height":7227,"climbable":true},{"name":"Putha Hiunchuli","height":7246,"climbable":true},{"name":"Dome Kang","height":7264,"climbable":true},{"name":"Dhaulagiri VI","height":7268,"climbable":true},{"name":"Nangpai Gosum II","height":7287,"climbable":true},{"name":"Kabru South","height":7318,"climbable":true},{"name":"Chamlang","height":7321,"climbable":true},{"name":"Nangpai Gosum I","height":7321,"climbable":true},{"name":"Himalchuli North","height":7331,"climbable":true},{"name":"Kabru North","height":7338,"climbable":false},{"name":"Talung","height":7349,"climbable":true},{"name":"Gimmigela Chuli","height":7350,"climbable":true},{"name":"Pasang Lhamu Chuli","height":7350,"climbable":true},{"name":"Kirat Chuli","height":7362,"climbable":true},{"name":"Churen Himal East","height":7371,"climbable":true},{"name":"Churen Himal West","height":7371,"climbable":true},{"name":"Churen Himal Central","height":7385,"climbable":true},{"name":"Kabru Main","height":7412,"climbable":true},{"name":"Ganesh I","height":7422,"climbable":true},{"name":"Domo","height":7447,"climbable":false},{"name":"Gangapurna","height":7455,"climbable":true},{"name":"Shartse II","height":7457,"climbable":true},{"name":"Jannu East","height":7460,"climbable":true},{"name":"Jongsang","height":7462,"climbable":true},{"name":"Roc Noir","height":7485,"climbable":true},{"name":"Annapurna IV","height":7525,"climbable":true},{"name":"Himalchuli West","height":7540,"climbable":true},{"name":"Annapurna III","height":7555,"climbable":true},{"name":"Herzog Peak","height":7555,"climbable":true},{"name":"Changtse","height":7583,"climbable":false},{"name":"Yalung Peak","height":7590,"climbable":false},{"name":"Shartse","height":7591,"climbable":true},{"name":"Dhaulagiri V","height":7618,"climbable":true},{"name":"Fang","height":7647,"climbable":true},{"name":"Dhaulagiri IV","height":7661,"climbable":true},{"name":"Makalu II","height":7678,"climbable":true},{"name":"Ngojumba Kang III","height":7681,"climbable":true},{"name":"Jannu","height":7711,"climbable":true},{"name":"Dhaulagiri III","height":7715,"climbable":true},{"name":"Nuptse West II","height":7732,"climbable":true},{"name":"Ngojumba Kang II","height":7743,"climbable":true},{"name":"Dhaulagiri II","height":7751,"climbable":true},{"name":"Kangbachen East","height":7780,"climbable":true},{"name":"Nuptse East I","height":7795,"climbable":true},{"name":"Gyachung Kang","height":7861,"climbable":true},{"name":"Nuptse","height":7864,"climbable":true},{"name":"Peak 29","height":7871,"climbable":true},{"name":"Himalchuli East","height":7893,"climbable":true},{"name":"Kangbachen","height":7902,"climbable":true},{"name":"Ngojumba Kang I","height":7916,"climbable":true},{"name":"Annapurna II","height":7937,"climbable":true},{"name":"Kangchenjunga North","height":7938,"climbable":true},{"name":"Annapurna I East","height":8026,"climbable":true},{"name":"Annapurna I Middle","height":8051,"climbable":true},{"name":"Yalung Kang West","height":8077,"climbable":true},{"name":"Annapurna I","height":8091,"climbable":true},{"name":"Manaslu","height":8163,"climbable":true},{"name":"Dhaulagiri I","height":8167,"climbable":true},{"name":"Cho Oyu","height":8188,"climbable":true},{"name":"Lhotse Shar","height":8382,"climbable":true},{"name":"Lhotse Middle","height":8410,"climbable":true},{"name":"Kangchenjunga Central","height":8473,"climbable":true},{"name":"Kangchenjunga South","height":8476,"climbable":true},{"name":"Makalu","height":8485,"climbable":true},{"name":"Yalung Kang","height":8505,"climbable":true},{"name":"Lhotse","height":8516,"climbable":true},{"name":"Kangchenjunga","height":8586,"climbable":true},{"name":"Everest","height":8849,"climbable":true}]'),UGe=({width:t="100%",height:e="400px",className:r="",data:n=zGe})=>{const i=D.useRef(null),a=D.useRef();return D.useEffect(()=>{if(!i.current)return;const s=(()=>{a.current&&a.current.dispose();const l=Gp(i.current,void 0,{renderer:"canvas"});a.current=l;const u={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataZoom:[{id:"dataZoomX",type:"slider",show:!1,xAxisIndex:[0],start:0,end:10,height:20,bottom:10,borderColor:"#ddd",textStyle:{color:"#666"},handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},dataBackground:{lineStyle:{color:"#ddd"},areaStyle:{color:"#eee"}}},{type:"inside",xAxisIndex:[0],start:0,end:10,zoomOnMouseWheel:!1,moveOnMouseMove:!0}],grid:{top:40,bottom:40,left:60,right:40,containLabel:!0},xAxis:{type:"category",data:n.map(f=>f.name),axisLabel:{color:"#3385FF",interval:0,rotate:45,fontSize:10,margin:15},axisTick:{show:!1},axisLine:{show:!0}},yAxis:{type:"value",min:5e3,max:9e3,axisLabel:{color:"#fff",formatter:"{value} m"},splitLine:{show:!0,lineStyle:{color:"#eee",type:"dashed"}}},series:[{name:"Altitude",type:"bar",data:n.map(f=>f.height),itemStyle:{color:f=>{if(!n[f.dataIndex].climbable)return"rgba(102, 102, 102, 0.3)";const h=n[f.dataIndex].height,d=5e3,v=(h-d)/(9e3-d);return new Km(0,0,0,1,[{offset:0,color:`rgba(51, 133, 255, ${.4+v*.6})`},{offset:1,color:`rgba(77, 155, 255, ${.5+v*.5})`}])}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0,0,0,0.5)"}}}]};l.setOption(u);const c=()=>{l.resize()};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),l.dispose()}})();return()=>{s==null||s(),a.current&&a.current.dispose()}},[n]),ve.jsx("div",{ref:i,className:r,style:{width:t,height:e,overflow:"hidden",position:"relative",minHeight:"400px",userSelect:"none"}})},VGe=[["1950-Spring",1],["1950-Summer",2],["1950-Autumn",1],["1951-Spring",1],["1951-Autumn",2],["1952-Spring",4],["1952-Autumn",2],["1953-Spring",4],["1953-Autumn",1],["1954-Spring",6],["1954-Autumn",9],["1955-Spring",10],["1955-Summer",1],["1955-Autumn",1],["1956-Spring",6],["1957-Spring",5],["1957-Autumn",1],["1958-Spring",4],["1958-Autumn",2],["1959-Spring",5],["1959-Autumn",1],["1960-Spring",13],["1960-Autumn",4],["1961-Spring",8],["1961-Autumn",1],["1962-Spring",10],["1962-Summer",2],["1962-Autumn",3],["1963-Spring",10],["1963-Summer",1],["1963-Autumn",7],["1964-Spring",11],["1964-Autumn",10],["1965-Spring",8],["1965-Autumn",3],["1966-Spring",2],["1969-Spring",7],["1969-Autumn",8],["1970-Spring",10],["1970-Autumn",7],["1971-Spring",11],["1971-Autumn",5],["1972-Spring",8],["1972-Autumn",12],["1973-Spring",13],["1973-Summer",2],["1973-Autumn",6],["1974-Spring",21],["1974-Summer",1],["1974-Autumn",8],["1975-Spring",18],["1975-Summer",1],["1975-Autumn",6],["1976-Spring",10],["1976-Summer",1],["1976-Autumn",6],["1976-Winter",1],["1977-Spring",12],["1977-Summer",2],["1977-Autumn",5],["1978-Spring",17],["1978-Summer",4],["1978-Autumn",26],["1979-Spring",22],["1979-Summer",4],["1979-Autumn",31],["1979-Winter",1],["1980-Spring",33],["1980-Summer",5],["1980-Autumn",30],["1980-Winter",4],["1981-Spring",40],["1981-Summer",3],["1981-Autumn",45],["1981-Winter",4],["1982-Spring",31],["1982-Summer",6],["1982-Autumn",51],["1982-Winter",5],["1983-Spring",35],["1983-Summer",7],["1983-Autumn",57],["1983-Winter",4],["1984-Spring",46],["1984-Summer",12],["1984-Autumn",65],["1984-Winter",6],["1985-Spring",37],["1985-Summer",8],["1985-Autumn",54],["1985-Winter",8],["1986-Spring",38],["1986-Summer",9],["1986-Autumn",59],["1986-Winter",5],["1987-Spring",37],["1987-Summer",10],["1987-Autumn",64],["1987-Winter",5],["1988-Spring",35],["1988-Summer",19],["1988-Autumn",64],["1988-Winter",4],["1989-Spring",54],["1989-Summer",29],["1989-Autumn",63],["1989-Winter",8],["1990-Spring",38],["1990-Summer",20],["1990-Autumn",80],["1990-Winter",8],["1991-Spring",56],["1991-Summer",20],["1991-Autumn",89],["1991-Winter",2],["1992-Spring",45],["1992-Summer",10],["1992-Autumn",75],["1992-Winter",3],["1993-Spring",45],["1993-Summer",17],["1993-Autumn",71],["1993-Winter",2],["1994-Spring",36],["1994-Summer",16],["1994-Autumn",88],["1994-Winter",2],["1995-Spring",45],["1995-Summer",10],["1995-Autumn",79],["1995-Winter",3],["1996-Spring",70],["1996-Summer",13],["1996-Autumn",105],["1997-Spring",80],["1997-Summer",11],["1997-Autumn",93],["1997-Winter",4],["1998-Spring",90],["1998-Summer",9],["1998-Autumn",116],["1998-Winter",4],["1999-Spring",80],["1999-Summer",6],["1999-Autumn",101],["1999-Winter",4],["2000-Spring",128],["2000-Summer",20],["2000-Autumn",96],["2000-Winter",1],["2001-Spring",112],["2001-Summer",6],["2001-Autumn",100],["2001-Winter",2],["2002-Spring",119],["2002-Summer",10],["2002-Autumn",115],["2002-Winter",1],["2003-Spring",141],["2003-Summer",10],["2003-Autumn",120],["2003-Winter",2],["2004-Spring",139],["2004-Summer",11],["2004-Autumn",137],["2004-Winter",2],["2005-Spring",187],["2005-Summer",3],["2005-Autumn",133],["2005-Winter",3],["2006-Spring",206],["2006-Summer",3],["2006-Autumn",191],["2006-Winter",6],["2007-Spring",177],["2007-Summer",6],["2007-Autumn",163],["2007-Winter",1],["2008-Spring",166],["2008-Summer",7],["2008-Autumn",190],["2008-Winter",9],["2009-Spring",197],["2009-Summer",11],["2009-Autumn",191],["2009-Winter",6],["2010-Spring",190],["2010-Summer",2],["2010-Autumn",183],["2010-Winter",3],["2011-Spring",196],["2011-Summer",5],["2011-Autumn",153],["2011-Winter",3],["2012-Spring",199],["2012-Summer",2],["2012-Autumn",149],["2012-Winter",2],["2013-Spring",186],["2013-Summer",1],["2013-Autumn",154],["2013-Winter",6],["2014-Spring",150],["2014-Summer",2],["2014-Autumn",135],["2015-Spring",99],["2015-Summer",2],["2015-Autumn",80],["2015-Winter",1],["2016-Spring",122],["2016-Summer",6],["2016-Autumn",118],["2016-Winter",2],["2017-Spring",152],["2017-Summer",2],["2017-Autumn",136],["2017-Winter",3],["2018-Spring",138],["2018-Summer",1],["2018-Autumn",149],["2018-Winter",3],["2019-Spring",152],["2019-Autumn",134],["2019-Winter",5],["2020-Spring",1],["2020-Autumn",12],["2020-Winter",3],["2021-Spring",78],["2021-Autumn",64],["2021-Winter",4],["2022-Spring",67],["2022-Summer",1],["2022-Autumn",50],["2022-Winter",2],["2023-Spring",57],["2023-Summer",3],["2023-Autumn",39],["2023-Winter",2],["2024-Spring",26],["2024-Summer",2]],HGe=({})=>{const t=D.useRef(null);return D.useEffect(()=>{if(!t.current)return;const e=Gp(t.current),r=Array.from({length:75},(l,u)=>(1950+u).toString()),n=["Spring","Summer","Autumn","Winter"],i=new Map;VGe.forEach(([l,u])=>{i.set(l,u)});const a=r.flatMap((l,u)=>n.map((c,f)=>{const h=`${l}-${c}`;return[u,f,i.get(h)||0]})),o={tooltip:{position:"top",formatter:function(l){const u=r[l.data[0]],c=n[l.data[1]];return`${u} ${c}: ${l.data[2]} climbers`}},grid:{top:"30px",bottom:"30px",left:"0px",right:"20px",containLabel:!0},xAxis:{type:"category",data:r,splitArea:{show:!0},axisLabel:{rotate:90,fontSize:12,interval:4,margin:12,color:"#fff"},axisTick:{alignWithLabel:!0,length:6}},yAxis:{type:"category",data:n,splitArea:{show:!0},axisLabel:{color:"#FFFFFF"}},series:[{type:"heatmap",data:a,label:{show:!1},itemStyle:{borderWidth:1,borderColor:"rgba(0, 0, 0, 0.1)"},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(51, 133, 255, 0.5)"}}}],visualMap:{show:!1,min:0,max:200,inRange:{color:["rgba(0, 0, 0, 0.3)","rgba(51, 133, 255, 0.2)","rgba(51, 133, 255, 0.4)","rgba(51, 133, 255, 0.6)","rgba(51, 133, 255, 0.8)","rgba(51, 133, 255, 0.9)","rgba(51, 133, 255, 1)"]}}};e.setOption(o);const s=()=>{e.resize()};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),e.dispose()}},[]),ve.jsx("div",{ref:t,style:{minHeight:"300px",minWidth:"300px",userSelect:"none"}})},B9=({width:t="100%",height:e="auto",className:r="",value:n=34,title:i=""})=>{const a=D.useRef(null);return D.useEffect(()=>{if(!a.current)return;const o=Gp(a.current),s={series:[{type:"gauge",radius:"80%",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!0,clip:!1,itemStyle:{borderWidth:1,borderColor:"rgba(65,105,225,0.8)",shadowColor:"rgba(65,105,225,0.5)",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2,color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#6495ED"},{offset:1,color:"#4169E1"}]}}},axisLine:{lineStyle:{width:15,color:[[1,"rgba(230,235,248,0.3)"]],shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},detail:{valueAnimation:!0,fontSize:32,offsetCenter:[0,0],formatter:"{value}%",color:"#4169E1",fontWeight:"bold"},title:{show:!0,fontSize:14,color:"#fff",offsetCenter:[0,"30%"]},data:[{value:n,name:i}]}]};return o.setOption(s),()=>{o.dispose()}},[n,i]),ve.jsx("div",{ref:a,className:r,style:{width:t,height:e,minHeight:"300px"}})},GGe=[[{value:36,name:"South Route"},{value:64,name:"North Route"}],[{value:34,name:"South Route"},{value:66,name:"North Route"}]];function qX(t){const e=D.useRef(null),r={tooltip:!1,legend:{top:"0%",left:"center",textStyle:{color:"#fff",fontSize:14,fontWeight:"normal",fontFamily:"Arial",padding:[0,4]},itemWidth:25,itemHeight:14,itemGap:25,orient:"horizontal",selectedMode:!0,backgroundColor:"transparent",borderColor:"#ccc",borderWidth:0,borderRadius:0,padding:[5,5,5,5]},visualMap:{show:!1,min:0,max:100,inRange:{color:["#002766","#91d5ff"]}},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center",formatter:"{b}: {c}%"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:GGe[t.id]}]};return D.useEffect(()=>{const n=Gp(e.current);return n.setOption(r),()=>{n.dispose()}},[t.id]),ve.jsx("div",{ref:e,style:{width:"100%",minHeight:"300px",userSelect:"none"}})}function WGe(t){return ve.jsx(ve.Fragment,{children:ve.jsx("div",{className:st(fs.dataScreen,{[fs.active]:t.isActive}),children:ve.jsxs("div",{style:{paddingLeft:"32px",paddingRight:"48px",paddingTop:"32px",paddingBottom:"32px"},children:[ve.jsx("div",{className:fs.title,children:"The History Data Of Himalaya"}),ve.jsx("div",{className:fs.smalltitle,style:{position:"relative",top:"40px"},children:"Success rate, death rate, and injury rate"}),ve.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",marginBottom:"-20px"},children:[ve.jsx(B9,{value:62.7,title:"Success Rate"}),ve.jsx(B9,{value:1.3,title:"Death Rate"}),ve.jsx(B9,{value:2,title:"Injured Rate"})]}),ve.jsx("div",{className:fs.text,children:"From this chart, we can see that the success rate of climbing Mount Everest has reached 62.7%, with the death rate and injury rate at only 1.3% and 2.0%, respectively. This suggests that with advancements in technology, climbing Everest is no longer as unattainable as it once was, and we need to view the difficulty of the ascent with a rational perspective."}),ve.jsx("div",{className:fs.smalltitle,style:{position:"relative",top:"30px"},children:"Peaks of the Himalayan mountain range"}),ve.jsx(UGe,{}),ve.jsx("div",{className:fs.text,children:"This shows the elevation and climbability of over 200 peaks in the Himalayas. We can see that the lowest elevation exceeds 5,000 meters, with Mount Everest being the highest in the range, highlighting the challenges of climbing and helping us understand why our predecessors were driven to conquer it."}),ve.jsx("div",{className:fs.smalltitle,children:"Climber stop proportions at different elevations and reasons."}),ve.jsx(BGe,{}),ve.jsx("div",{className:fs.text,children:"From this flow chart, we can see that among those who are known to have stopped their attempts to climb Mount Everest, the majority gave up before reaching base camp, highlighting the courage required for such an endeavor. Among those who proceeded with the climb, reasons for stopping included weather conditions, death, natural accidents, illness, and lack of supplies."}),ve.jsx("div",{className:fs.smalltitle,style:{position:"relative",top:"30px"},children:"Climbing calendar for Mount Everest"}),ve.jsx(HGe,{}),ve.jsx("div",{className:fs.text,children:"From this calendar chart, we can see that as climbing techniques have advanced, the number of people attempting to summit Mount Everest has gradually increased since 1950, peaking in the 2000s and then stabilizing at a relatively high level (with a decline in 2021 due to the pandemic). We also observe that climbing Everest generally occurs in the spring and autumn seasons."}),ve.jsx("div",{className:fs.smalltitle,children:"Deaths and successful climbers from N/S sides"}),ve.jsxs("div",{style:{display:"flex",gap:"20px",width:"100%"},children:[ve.jsx("div",{style:{flex:1,width:"50%"},children:ve.jsx(qX,{id:0})}),ve.jsx("div",{style:{flex:1,width:"50%"},children:ve.jsx(qX,{id:1})})]}),ve.jsx("div",{className:fs.text,children:"From these two pie charts, it can be seen that the death rate for climbing Mount Everest from the north side in China is lower. However, it is curious that more people reach the summit from the south side in Nepal. This is actually due to China's restrictions on the number of climbers allowed each year."})]})})})}const $Ge="_author_51f1y_1",jGe="_active_51f1y_8",XGe="_page_51f1y_17",KGe="_person_51f1y_23",YGe="_image_51f1y_28",qGe="_name_51f1y_41",ZGe="_smalltitle_51f1y_50",JGe="_text_51f1y_59",Si={author:$Ge,active:jGe,page:XGe,person:KGe,image:YGe,name:qGe,smalltitle:ZGe,text:JGe},QGe="/The-Everest/assets/byy-CyjOGGJU.png",eWe="/The-Everest/assets/lss-CyqGZY2U.png";function tWe(t){return ve.jsx("div",{className:st(Si.author,{[Si.active]:t.isActive}),children:ve.jsxs("div",{className:Si.page,children:[ve.jsxs("div",{className:Si.person,children:[ve.jsx("div",{className:Si.image,children:ve.jsx("img",{src:QGe,alt:"Bangyi Yan"})}),ve.jsx("div",{className:Si.name,children:" Bangyi Yan"}),ve.jsx("div",{className:Si.smalltitle,children:"Basic Information"}),ve.jsx("div",{className:Si.text,children:"Bangyi Yan, a 20-year-old from Wenzhou, Zhejiang, is currently pursuing a bachelor's degree in Industrial Design at Zhejiang University. Known for a strong aptitude for learning new technologies, this project marks the first experience with front-end frameworks, GSAP, ECharts, and Three.js."}),ve.jsx("div",{className:Si.smalltitle,children:"Reflection To The Project"}),ve.jsx("div",{className:Si.text,children:`Before this project, I always thought "Because it's there" was a rather absurd answer. However, through the process of visualization and data analysis, I witnessed a history of humanity's pursuit of peaks. The significance of climbing Everest lies in challenging limits: initially, it was about pushing human limits, then it became a challenge for nations, and now it has transformed into a personal challenge. At the same time, I corrected my previous misconceptions; in reality, the death rate for climbing Everest isn't as high as I thought, haha.`}),ve.jsx("div",{className:Si.smalltitle,children:"Task Allocation"}),ve.jsx("div",{className:Si.text,children:'1.Created all content for the first webpage, including text and number animations controlled by GSAP, a 3D Earth model created and visualized with ECharts, and processed data on Everest climbs from various countries into a visual animation. 2.Used Python code to process the raw data from the Himalayan Dataset. 3.Completed a data dashboard using various ECharts chart types. 4.Developed the frontend and wrote content for the "Background Introduction" and "Author Information" sections.'})]}),ve.jsxs("div",{className:Si.person,children:[ve.jsx("div",{className:Si.image,children:ve.jsx("img",{src:eWe,alt:"Sirui Lin"})}),ve.jsx("div",{className:Si.name,children:" Sirui Lin"}),ve.jsx("div",{className:Si.smalltitle,children:"Basic Information"}),ve.jsx("div",{className:Si.text,children:"Sirui Lin, a 20-year-old boy from Guangzhou, Guangdong, is currently pursuing a bachelor's degree in Industrial Design at Zhejiang University.He is interested in programming, and by combining industrial design and programming, he tries to present design ideas in a dynamic way in his course projects, giving life to the design with code."}),ve.jsx("div",{className:Si.smalltitle,children:"Reflection To The Project"}),ve.jsx("div",{className:Si.text,children:"After learning about my friend's idea, I realized that this was a highly challenging frontend data visualization project, which was a perfect opportunity to hone my frontend coding skills. We instantly hit it off and decided to work on the project together. Despite encountering numerous difficulties during the learning and implementation process, we actively discussed and overcame the challenges, ultimately achieving a result that we were both very satisfied with."}),ve.jsx("div",{className:Si.smalltitle,children:"Task Allocation"}),ve.jsx("div",{className:Si.text,children:"1.Set up the project using the Vite + React framework, including routing configuration and project structure. 2.Implemented model import, camera control, and key point and route annotation on the webpage using Three.js. 3.Built the UI using the Ant Design UI library along with some custom designs. 4.Created a data visualization dashboard for the two main routes. 5.Make a right-hand detailed data page for peaks and routes."})]})]})})}const rWe="_logoContainer_fuv9p_1",nWe="_logo_fuv9p_1",ZX={logoContainer:rWe,logo:nWe},iWe="/The-Everest/assets/mountain-looking-Di9t3m2S.svg",aWe=[{key:"1",icon:ve.jsx(C7e,{}),label:"Model"},{key:"2",icon:ve.jsx(z7e,{}),label:"Introduction"},{key:"3",icon:ve.jsx(I7e,{}),label:"Data Sceen"},{key:"4",icon:ve.jsx($7e,{}),label:"Author"}];function oWe(){const[t,e]=D.useState(["1"]),[r,n]=D.useState(!1),[i,a]=D.useState(!1),[o,s]=D.useState(!1),[l,u]=D.useState(!0),[c,f]=D.useState(!1),h=()=>{u(!l)},d=()=>{a(!1),n(!1),s(!1),e(["1"])};D.useEffect(()=>{if(i||r||o){const v=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(v)}}else f(!1)},[i,r,o]);const p=v=>{switch(e([v.key]),v.key){case"1":break;case"2":n(!0);break;case"3":a(!0);break;case"4":s(!0);break}};return ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{style:{position:"absolute",top:30,left:20},children:[ve.jsxs("div",{className:ZX.logoContainer,onClick:h,children:[ve.jsx("img",{src:iWe,alt:"logo",className:ZX.logo}),ve.jsx("div",{style:{fontSize:"12.5px",color:"#fff"},children:"Himalayas"})]}),ve.jsx(W2,{selectedKeys:t,mode:"inline",theme:"dark",inlineCollapsed:l,items:aWe,onClick:p})]}),ve.jsx(Z1,{onClose:d,open:r,width:"60%",drawerRender:()=>ve.jsx(iGe,{isActive:c}),styles:{mask:{background:"none"}}}),ve.jsx(Z1,{onClose:d,open:i,width:"60%",destroyOnClose:!0,drawerRender:()=>ve.jsx(WGe,{isActive:c}),styles:{mask:{background:"none"}}}),ve.jsx(Z1,{onClose:d,open:o,width:"60%",drawerRender:()=>ve.jsx(tWe,{isActive:c}),styles:{mask:{background:"none"}}})]})}const sWe="_camp_byfod_1",lWe="_name_byfod_5",uWe="_height_byfod_12",cWe="_info_byfod_22",Jb={camp:sWe,name:lWe,height:uWe,info:cWe};function fWe(t){return ve.jsxs("div",{className:Jb.camp,children:[ve.jsx("div",{className:Jb.name,children:t.name}),ve.jsxs("div",{className:Jb.height,children:[ve.jsx("span",{children:"Altitude:"})," ",t.height]}),ve.jsxs("div",{className:Jb.info,children:[ve.jsx("span",{children:"Introduction:"})," ",t.info]})]})}const hWe="_peak_bb898_1",dWe="_name_bb898_5",pWe="_height_bb898_12",vWe="_rank_bb898_22",gWe="_info_bb898_32",a1={peak:hWe,name:dWe,height:pWe,rank:vWe,info:gWe};function mWe(t){return ve.jsxs("div",{className:a1.peak,children:[ve.jsx("div",{className:a1.name,children:t.name}),ve.jsxs("div",{className:a1.height,children:[ve.jsx("span",{children:"Altitude:"})," ",t.height]}),ve.jsxs("div",{className:a1.rank,children:[ve.jsx("span",{children:"Rank:"})," ",t.rank]}),ve.jsxs("div",{className:a1.info,children:[ve.jsx("span",{children:"Introduction:"})," ",t.info]})]})}const yWe="_route_pe7sc_1",_We="_name_pe7sc_5",xWe="_info_pe7sc_24",Qb={route:yWe,name:_We,info:xWe};function SWe(t){return ve.jsxs("div",{className:Qb.route,children:[ve.jsx("div",{className:Qb.name,children:t.name}),ve.jsxs("div",{className:Qb.route,children:[ve.jsx("span",{children:"Route:"})," ",t.route]}),ve.jsxs("div",{className:Qb.info,children:[ve.jsx("span",{children:"Introduction:"})," ",t.info]})]})}const bWe="_peakDetail_1m6ey_1",wWe="_active_1m6ey_8",TWe="_content_1m6ey_17",CWe="_header_1m6ey_21",EWe="_name_1m6ey_25",AWe="_altitude_1m6ey_32",MWe="_location_1m6ey_36",RWe="_image_1m6ey_41",PWe="_infoCards_1m6ey_54",LWe="_infoCard_1m6ey_54",DWe="_label_1m6ey_73",IWe="_value_1m6ey_77",NWe="_title_1m6ey_83",OWe="_history_1m6ey_92",Ii={peakDetail:bWe,active:wWe,content:TWe,header:CWe,name:EWe,altitude:AWe,location:MWe,image:RWe,infoCards:PWe,infoCard:LWe,label:DWe,value:IWe,title:NWe,history:OWe},kWe="/The-Everest/assets/Everest-Biu6ybXf.jpg",FWe="/The-Everest/assets/Lhotse-BDletRL9.jpg",BWe="/The-Everest/assets/Nuptse-_8ikQAaJ.jpg",zWe="/The-Everest/assets/Changtse-HghdAJ1O.jpg",UWe=[kWe,FWe,BWe,zWe];function VWe(t){return ve.jsx("div",{className:st(Ii.peakDetail,{[Ii.active]:t.isActive}),children:ve.jsxs("div",{className:Ii.content,children:[ve.jsxs("div",{className:Ii.header,children:[ve.jsx("div",{className:Ii.name,children:t.name}),ve.jsxs("span",{className:Ii.altitude,children:[t.height,""]}),ve.jsx("span",{className:Ii.location,children:t.location})]}),ve.jsx("img",{src:UWe[t.id],alt:"peakImage",className:Ii.image}),ve.jsxs("div",{className:Ii.infoCards,children:[ve.jsxs("div",{className:Ii.infoCard,children:[ve.jsx("div",{className:Ii.label,children:"Elevation Ranking"}),ve.jsx("div",{className:Ii.value,children:t.rank})]}),ve.jsxs("div",{className:Ii.infoCard,children:[ve.jsx("div",{className:Ii.label,children:"First Climbing Year"}),ve.jsx("div",{className:Ii.value,children:t.firstClimbing})]}),ve.jsxs("div",{className:Ii.infoCard,children:[ve.jsx("div",{className:Ii.label,children:"Summit Count"}),ve.jsx("div",{className:Ii.value,children:t.summitCount})]})]}),ve.jsx("div",{className:Ii.title,children:"History of Climbing"}),ve.jsx("div",{className:Ii.history,children:t.history})]})})}const HWe="_routeDetail_1fyws_1",GWe="_active_1fyws_8",WWe="_content_1fyws_17",$We="_header_1fyws_21",jWe="_name_1fyws_25",XWe="_length_1fyws_32",KWe="_image_1fyws_37",YWe="_infoCards_1fyws_50",qWe="_infoCard_1fyws_50",ZWe="_label_1fyws_69",JWe="_value_1fyws_73",QWe="_chart_1fyws_79",Ea={routeDetail:HWe,active:GWe,content:WWe,header:$We,name:jWe,length:XWe,image:KWe,infoCards:YWe,infoCard:qWe,label:ZWe,value:JWe,chart:QWe},e$e="/The-Everest/assets/NorthRoute-DIFbY2sT.jpg",t$e="/The-Everest/assets/SouthRoute-hQZzAgnT.jpg",r$e=[t$e,e$e],z9=[[{value:39,name:"Avalanche"},{value:27,name:"Fall"},{value:18,name:"AMS"},{value:6,name:"Exposure/Frostbite"},{value:15,name:"Illness (Non-AMS)"},{value:15,name:"Exhaustion"},{value:13,name:"Glacier Collapse"},{value:10,name:"Crevasse"},{value:2,name:"Missing"},{value:3,name:"Falling Ice/Rockfall"},{value:2,name:"Other/Unknown"}],[{value:7,name:"Avalanche"},{value:19,name:"Fall"},{value:14,name:"AMS"},{value:10,name:"Exposure/Frostbite"},{value:5,name:"Illness (Non-AMS)"},{value:12,name:"Exhaustion"},{value:4,name:"Missing"},{value:3,name:"Other/Unknown"}]];function n$e(t){return ve.jsx("div",{className:st(Ea.routeDetail,{[Ea.active]:t.isActive}),children:ve.jsxs("div",{className:Ea.content,children:[ve.jsxs("div",{className:Ea.header,children:[ve.jsx("div",{className:Ea.name,children:t.name}),ve.jsxs("span",{className:Ea.length,children:["Approximately",ve.jsx("span",{style:{color:"#ddd",fontSize:"20px"},children:t.length}),"from Base Camp to the summit"]})]}),ve.jsx("img",{src:r$e[t.id],alt:"routeImage",className:Ea.image}),ve.jsxs("div",{className:Ea.infoCards,children:[ve.jsxs("div",{className:Ea.infoCard,children:[ve.jsx("div",{className:Ea.label,children:"Total Summiteers"}),ve.jsx("div",{className:Ea.value,children:t.totalSummiteers})]}),ve.jsxs("div",{className:Ea.infoCard,children:[ve.jsx("div",{className:Ea.label,children:"Fatality Rate"}),ve.jsx("div",{className:Ea.value,children:t.fatalityRate})]}),ve.jsxs("div",{className:Ea.infoCard,children:[ve.jsx("div",{className:Ea.label,children:"Death Toll"}),ve.jsx("div",{className:Ea.value,children:t.deathToll})]})]}),ve.jsx(i$e,{id:t.id})]})})}const i$e=t=>{const e=D.useRef(null),[r,n]=D.useState(),i={backgroundColor:"transparent",title:{text:"Death Reasons",left:"0px",top:20,textStyle:{color:"#eee"}},tooltip:{trigger:"item"},visualMap:{show:!1,min:Math.min(...z9[t.id].map(a=>a.value)),max:Math.max(...z9[t.id].map(a=>a.value)),inRange:{color:["#cceeff","#003366"],colorLightness:[.5,.8]}},series:[{type:"pie",radius:["10%","50%"],center:["50%","50%"],data:z9[t.id].sort(function(a,o){return a.value-o.value}),roseType:"radius",label:{color:"rgba(255, 255, 255, 0.8)"},labelLine:{lineStyle:{color:"rgba(255, 255, 255, 0.7)"},smooth:.2,length:10,length2:20},itemStyle:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(a){return Math.random()*200}}]};return D.useEffect(()=>{const a=Gp(e.current);a.setOption(i),n(a)},[t.id]),ve.jsx(ve.Fragment,{children:ve.jsx("div",{ref:e,style:{marginTop:"-20px",width:"100%",minHeight:"300px",userSelect:"none"}})})},a$e="/The-Everest/assets/starfield-CL52QtHb.jpg",o$e="/The-Everest/assets/camp-fzerLBG2.png",s$e="/The-Everest/assets/triangle-DxQgeyXO.png";Ct.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new dr(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};$o.line={uniforms:VI.merge([Ct.common,Ct.fog,Ct.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class ST extends Fu{constructor(e){super({type:"LineMaterial",uniforms:VI.clone($o.line.uniforms),vertexShader:$o.line.vertexShader,fragmentShader:$o.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const JX=new ll,e3=new ae;class bae extends z6e{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new tl(e,3)),this.setAttribute("uv",new tl(r,2))}applyMatrix4(e){const r=this.attributes.instanceStart,n=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(e),n.applyMatrix4(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const n=new O8(r,6,1);return this.setAttribute("instanceStart",new wc(n,3,0)),this.setAttribute("instanceEnd",new wc(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const n=new O8(r,6,1);return this.setAttribute("instanceColorStart",new wc(n,3,0)),this.setAttribute("instanceColorEnd",new wc(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new y6e(e.geometry)),this}fromLineSegments(e){const r=e.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ll);const e=this.attributes.instanceStart,r=this.attributes.instanceEnd;e!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(e),JX.setFromBufferAttribute(r),this.boundingBox.union(JX))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ul),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(e!==void 0&&r!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let a=0,o=e.count;a<o;a++)e3.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(e3)),e3.fromBufferAttribute(r,a),i=Math.max(i,n.distanceToSquared(e3));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}const U9=new an,QX=new ae,eK=new ae,Aa=new an,Ma=new an,uu=new an,V9=new ae,H9=new Rr,Ra=new J6e,tK=new ae,t3=new ll,r3=new ul,cu=new an;let xu,xp;function rK(t,e,r){return cu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),cu.multiplyScalar(1/cu.w),cu.x=xp/r.width,cu.y=xp/r.height,cu.applyMatrix4(t.projectionMatrixInverse),cu.multiplyScalar(1/cu.w),Math.abs(Math.max(cu.x,cu.y))}function l$e(t,e){const r=t.matrixWorld,n=t.geometry,i=n.attributes.instanceStart,a=n.attributes.instanceEnd,o=Math.min(n.instanceCount,i.count);for(let s=0,l=o;s<l;s++){Ra.start.fromBufferAttribute(i,s),Ra.end.fromBufferAttribute(a,s),Ra.applyMatrix4(r);const u=new ae,c=new ae;xu.distanceSqToSegment(Ra.start,Ra.end,c,u),c.distanceTo(u)<xp*.5&&e.push({point:c,pointOnLine:u,distance:xu.origin.distanceTo(c),object:t,face:null,faceIndex:s,uv:null,uv1:null})}}function u$e(t,e,r){const n=e.projectionMatrix,a=t.material.resolution,o=t.matrixWorld,s=t.geometry,l=s.attributes.instanceStart,u=s.attributes.instanceEnd,c=Math.min(s.instanceCount,l.count),f=-e.near;xu.at(1,uu),uu.w=1,uu.applyMatrix4(e.matrixWorldInverse),uu.applyMatrix4(n),uu.multiplyScalar(1/uu.w),uu.x*=a.x/2,uu.y*=a.y/2,uu.z=0,V9.copy(uu),H9.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,d=c;h<d;h++){if(Aa.fromBufferAttribute(l,h),Ma.fromBufferAttribute(u,h),Aa.w=1,Ma.w=1,Aa.applyMatrix4(H9),Ma.applyMatrix4(H9),Aa.z>f&&Ma.z>f)continue;if(Aa.z>f){const S=Aa.z-Ma.z,b=(Aa.z-f)/S;Aa.lerp(Ma,b)}else if(Ma.z>f){const S=Ma.z-Aa.z,b=(Ma.z-f)/S;Ma.lerp(Aa,b)}Aa.applyMatrix4(n),Ma.applyMatrix4(n),Aa.multiplyScalar(1/Aa.w),Ma.multiplyScalar(1/Ma.w),Aa.x*=a.x/2,Aa.y*=a.y/2,Ma.x*=a.x/2,Ma.y*=a.y/2,Ra.start.copy(Aa),Ra.start.z=0,Ra.end.copy(Ma),Ra.end.z=0;const v=Ra.closestPointToPointParameter(V9,!0);Ra.at(v,tK);const g=zI.lerp(Aa.z,Ma.z,v),m=g>=-1&&g<=1,x=V9.distanceTo(tK)<xp*.5;if(m&&x){Ra.start.fromBufferAttribute(l,h),Ra.end.fromBufferAttribute(u,h),Ra.start.applyMatrix4(o),Ra.end.applyMatrix4(o);const S=new ae,b=new ae;xu.distanceSqToSegment(Ra.start,Ra.end,b,S),r.push({point:b,pointOnLine:S,distance:xu.origin.distanceTo(b),object:t,face:null,faceIndex:h,uv:null,uv1:null})}}}class c$e extends On{constructor(e=new bae,r=new ST({color:Math.random()*16777215})){super(e,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,r=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*r.count);for(let o=0,s=0,l=r.count;o<l;o++,s+=2)QX.fromBufferAttribute(r,o),eK.fromBufferAttribute(n,o),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+QX.distanceTo(eK);const a=new O8(i,2,1);return e.setAttribute("instanceDistanceStart",new wc(a,1,0)),e.setAttribute("instanceDistanceEnd",new wc(a,1,1)),this}raycast(e,r){const n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;xu=e.ray;const o=this.matrixWorld,s=this.geometry,l=this.material;xp=l.linewidth+a,s.boundingSphere===null&&s.computeBoundingSphere(),r3.copy(s.boundingSphere).applyMatrix4(o);let u;if(n)u=xp*.5;else{const f=Math.max(i.near,r3.distanceToPoint(xu.origin));u=rK(i,f,l.resolution)}if(r3.radius+=u,xu.intersectsSphere(r3)===!1)return;s.boundingBox===null&&s.computeBoundingBox(),t3.copy(s.boundingBox).applyMatrix4(o);let c;if(n)c=xp*.5;else{const f=Math.max(i.near,t3.distanceToPoint(xu.origin));c=rK(i,f,l.resolution)}t3.expandByScalar(c),xu.intersectsBox(t3)!==!1&&(n?l$e(this,r):u$e(this,i,r))}onBeforeRender(e){const r=this.material.uniforms;r&&r.resolution&&(e.getViewport(U9),this.material.uniforms.resolution.value.set(U9.z,U9.w))}}class wae extends bae{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const r=e.length-3,n=new Float32Array(2*r);for(let i=0;i<r;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e){const r=e.length-3,n=new Float32Array(2*r);for(let i=0;i<r;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setColors(n),this}setFromPoints(e){const r=e.length-1,n=new Float32Array(6*r);for(let i=0;i<r;i++)n[6*i]=e[i].x,n[6*i+1]=e[i].y,n[6*i+2]=e[i].z||0,n[6*i+3]=e[i+1].x,n[6*i+4]=e[i+1].y,n[6*i+5]=e[i+1].z||0;return super.setPositions(n),this}fromLine(e){const r=e.geometry;return this.setPositions(r.attributes.position.array),this}}class f$e extends c$e{constructor(e=new wae,r=new ST({color:Math.random()*16777215})){super(e,r),this.isLine2=!0,this.type="Line2"}}const h$e=()=>{const t=D.useRef(null),e=D.useRef(null),r=D.useRef(null);let n,i,a,o,s;const l=D.useRef(new dr),u=D.useRef(new Z6e);let c=null,f=[];const[h,d]=D.useState({top:0,left:0}),[p,v]=D.useState(!1),[g,m]=D.useState(!1),[x,S]=D.useState(-1),[b,T]=D.useState([]),[w,E]=D.useState(-1),[M,A]=D.useState([]),[R,L]=D.useState(-1),[I,N]=D.useState([]),k=.03,[z,B]=D.useState(!1),[V,F]=D.useState(!1),[$,W]=D.useState(-1),[H,X]=D.useState(-1),te=ye=>{let me;switch(ye){case"point":me=o$e;break;case"triangle":me=s$e;break}return new Fu({uniforms:{color:{value:new Cr(16777215)},pointTexture:{value:new N8().load(me)}},vertexShader:`attribute float size;
                attribute vec3 customColor;
                
                varying vec3 vColor;

                void main() {
                    vColor = customColor;

                    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

                    gl_PointSize = size * ( 300.0 / -mvPosition.z );  // 
                    gl_Position = projectionMatrix * mvPosition;  // 
                }`,fragmentShader:`uniform vec3 color;
                uniform sampler2D pointTexture;
                uniform float alphaTest;

                varying vec3 vColor;

                void main() {
                    gl_FragColor = vec4( color * vColor, 1.0 );  // 

                    // 
                    gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );

                }`,transparent:!0})},Y=()=>{o=new BDe(i,n.domElement),o.target.set(0,0,0),o.update(),o.enablePan=!0,o.enableDamping=!0,o.minPolarAngle=0,o.maxPolarAngle=75*Math.PI/180,o.minDistance=2.5,o.maxDistance=12,r.current=o},ee=()=>{n=new kDe({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),t.current.appendChild(n.domElement)},se=()=>{a=new Pre;const me=new N8().load(a$e);me.colorSpace=Ti,a.background=me,a.environment=s.fromScene(new ZDe,.04).texture},ne=()=>{i=new po(40,window.innerWidth/window.innerHeight,1,100),i.position.set(5,2,8),e.current=i},le=()=>{s=new F8(n)},pe=()=>{const ye=new B6e(4210752,10);a.add(ye);const me=new Hre(16777215,1);me.position.set(5,10,5),a.add(me)},Se=()=>{const ye=new JDe;ye.setDecoderPath("jsm/libs/draco/gltf/");const me=new eIe;me.setDRACOLoader(ye),me.load("/mount.glb",qe=>{const Ie=qe.scene;Ie.position.set(2,0,0),Ie.scale.set(.003,.003,.003),Ie.userData={id:-1},a.add(Ie),j()},void 0,qe=>{console.error("FBX ",qe)})},_e=(ye,me)=>{let qe=ye.getAttribute("size");for(let Ie=0;Ie<qe.count;Ie++)qe.setX(Ie,qe.getX(Ie)*me);qe.needsUpdate=!0},Le=()=>{const ye=f.find(me=>me.userData.type===c.userData.type&&me.userData.id===c.userData.id);if(ye)switch(ye.userData.type){case"point":S(-1),_e(ye,1/1.5);break;case"triangle":E(-1),_e(ye,1/1.5);break;case"curve":L(-1),q(a,c.userData.id,1/1.5);break}},Be=ye=>{d({top:ye.clientY-15,left:ye.clientX-15}),l.current.x=ye.clientX/window.innerWidth*2-1,l.current.y=-(ye.clientY/window.innerHeight)*2+1,u.current.setFromCamera(l.current,i),u.current.params.Points.threshold=.05;const me=u.current.intersectObjects(a.children,!1);if(me.length>0){const qe=me[0].object;if(c===qe)return;c&&Le(),c=qe;const Ie=f.find(He=>He.userData.type===c.userData.type&&He.userData.id===c.userData.id);switch(c.userData.type){case"point":_e(Ie,1.5),S(c.userData.id);break;case"triangle":_e(Ie,1.5),E(c.userData.id);break;case"curve":q(a,c.userData.id,1.5),L(c.userData.id);break}v(!0)}else c&&(Le(),v(!1)),c=null},Q=()=>{if(c)switch(c.userData.type){case"triangle":E(-1),v(!1),ie(M[c.userData.id].camera.position,M[c.userData.id].camera.rotation,2e3),B(!0),W(c.userData.id),X(-1);break;case"curve":L(-1),v(!1),ie(I[c.userData.id].camera.position,I[c.userData.id].camera.rotation,2e3),B(!0),X(c.userData.id),W(-1);break}},tt=()=>{ie({x:5,y:2,z:8},{x:0,y:0,z:0},2e3)},je=()=>{ie({x:10,y:0,z:0},{x:0,y:Math.PI/2,z:0},2e3)},Ye=()=>{ie({x:0,y:0,z:10},{x:0,y:0,z:0},2e3)},$e=ye=>{switch(ye.key){case"r":tt();break;case"1":Ye();break;case"2":je();break}if(c){switch(ye.key){case"w":c.position.z-=.03;break;case"s":c.position.z+=.03;break;case"a":c.position.x-=.03;break;case"d":c.position.x+=.03;break;case"z":c.position.y+=.03;break;case"x":c.position.y-=.03;break}console.log("Updated Object position:",c.position)}},wt=(ye,me,qe,Ie,He)=>{const Et=new Zo;Et.setAttribute("position",new Ui(ye,3)),Et.setAttribute("customColor",new Ui(me,3)),Et.setAttribute("size",new Ui(qe,1)),Et.userData={type:He,id:Ie},f.push(Et);const Fe=new Fre(Et,te(He));Fe.userData={type:He,id:Ie},a.add(Fe)},We=(ye,me,qe,Ie)=>{const Et=new m6e(ye).getPoints(100),Fe=[];Et.forEach(ut=>{Fe.push(ut.x,ut.y,ut.z)});const Ge=new wae;Ge.setPositions(Fe),Ge.userData={type:"curve",id:Ie},f.push(Ge);const lt=new ST({color:me,linewidth:qe,resolution:new dr(window.innerWidth,window.innerHeight)}),ht=new f$e(Ge,lt);ht.userData={type:"curve",id:Ie},a.add(ht)},q=(ye,me,qe)=>{const Ie=ye.children.find(He=>He.userData.type==="curve"&&He.userData.id===me);Ie&&Ie.material instanceof ST&&(Ie.material.linewidth*=qe,Ie.material.needsUpdate=!0)},j=()=>{b.forEach(ye=>{wt(new Float32Array([ye.position.x,ye.position.y,ye.position.z]),new Float32Array([1,.647,0]),new Float32Array([1]),ye.id,"point")}),M.forEach(ye=>{wt(new Float32Array([ye.position.x,ye.position.y,ye.position.z]),new Float32Array([.53,.81,.98]),new Float32Array([1]),ye.id,"triangle")}),We([new ae(b[0].position.x,b[0].position.y-k,b[0].position.z),new ae(-1.54,-.49,2),new ae(-1.3,-.31,1.65),new ae(-1.06,-.2,1.53),new ae(b[1].position.x,b[1].position.y-k,b[1].position.z),new ae(-.63,-.03,.8),new ae(b[2].position.x,b[2].position.y-k,b[2].position.z),new ae(-.37,.14,.22),new ae(b[3].position.x,b[3].position.y-k,b[3].position.z),new ae(-.45,.51,-.12),new ae(b[4].position.x,b[4].position.y-k,b[4].position.z),new ae(-.8,.86,-.17),new ae(M[0].position.x,M[0].position.y-.01,M[0].position.z)],"orange",3,0),We([new ae(b[5].position.x,b[5].position.y-k,b[5].position.z),new ae(-5.29,-.4,1.43),new ae(-4.92,-.32,.45),new ae(b[6].position.x,b[6].position.y-k,b[6].position.z),new ae(-3.7,-.2,-.27),new ae(-2.98,-.09,-.79),new ae(b[7].position.x,b[7].position.y-k,b[7].position.z),new ae(b[8].position.x,b[8].position.y-k,b[8].position.z),new ae(-2,.23,-.13),new ae(-1.94,.3,-.19),new ae(b[9].position.x,b[9].position.y-k,b[9].position.z),new ae(b[10].position.x,b[10].position.y-k,b[10].position.z),new ae(M[0].position.x,M[0].position.y-.01,M[0].position.z)],"orange",3,1)},ie=(ye={x:5,y:2,z:8},me={x:0,y:0,z:0},qe=1e3)=>{const Ie=e.current,He={x:Ie.position.x,y:Ie.position.y,z:Ie.position.z},Et={x:Ie.rotation.x,y:Ie.rotation.y,z:Ie.rotation.z},Fe=Date.now(),Ge=r.current;Ge.minDistance=0,Ge.enabled=!1;const lt=()=>{const ut=Date.now()-Fe,Qt=Math.min(ut/qe,1),rr=(ce=>ce<.5?4*ce*ce*ce:1-Math.pow(-2*ce+2,3)/2)(Qt);if(Ie.position.x=He.x+(ye.x-He.x)*rr,Ie.position.y=He.y+(ye.y-He.y)*rr,Ie.position.z=He.z+(ye.z-He.z)*rr,Ie.rotation.x=Et.x+(me.x-Et.x)*rr,Ie.rotation.y=Et.y+(me.y-Et.y)*rr,Ie.rotation.z=Et.z+(me.z-Et.z)*rr,Ge.update(),Qt<1)requestAnimationFrame(lt);else{const ce=r.current;ce.enabled=!0,ce.minDistance=2.5}};lt()};D.useEffect(()=>{if(g){if(t.current){ee(),le(),se(),ne(),Y(),pe(),Se(),document.addEventListener("pointermove",Be),document.addEventListener("keydown",$e),document.addEventListener("click",Q),t.current.addEventListener("click",()=>{c||B(!1)}),window.onresize=()=>{i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)};const ye=()=>{o&&a&&i&&n&&(o.update(),n.render(a,i)),requestAnimationFrame(ye)};requestAnimationFrame(ye)}return()=>{t.current&&(t.current.innerHTML=""),document.removeEventListener("keydown",$e),document.removeEventListener("pointermove",Be),n&&n.dispose()}}},[g]);const Ce=()=>Qu(Tae,null,function*(){try{const me=yield(yield fetch("/Info/campInfo.json")).json();T(me);const Ie=yield(yield fetch("/Info/peakInfo.json")).json();A(Ie);const Et=yield(yield fetch("/Info/routeInfo.json")).json();N(Et),m(!0)}catch(ye){console.error(":",ye)}});return D.useEffect(()=>{Ce()},[]),D.useEffect(()=>{if(z){const ye=setTimeout(()=>{F(!0)},100);return()=>{clearTimeout(ye)}}else F(!1)},[z]),ve.jsxs(ve.Fragment,{children:[ve.jsx(oWe,{}),p&&x!==-1&&ve.jsx(W3,{content:ve.jsx(fWe,{name:b[x].name,height:b[x].height,info:b[x].info}),color:"rgba(4, 21, 39, 0.9)",open:p,children:ve.jsx(G9,{position:h,isActive:p})}),p&&w!==-1&&ve.jsx(W3,{content:ve.jsx(mWe,{name:M[w].name,height:M[w].height,rank:M[w].rank,info:M[w].info}),color:"rgba(4, 21, 39, 0.9)",open:p,children:ve.jsx(G9,{position:h,isActive:p})}),p&&R!==-1&&ve.jsx(W3,{content:ve.jsx(SWe,{name:I[R].name,route:I[R].route,info:I[R].info}),color:"rgba(4, 21, 39, 0.9)",open:p,children:ve.jsx(G9,{position:h,isActive:p})}),ve.jsx(Z1,{open:z,width:"40%",drawerRender:()=>$!=-1?ve.jsx(VWe,{isActive:V,id:M[$].id,name:M[$].name,height:M[$].height,rank:M[$].rank,location:M[$].location,firstClimbing:M[$].firstClimbing,summitCount:M[$].summitCount,history:M[$].history}):H!=-1?ve.jsx(n$e,{isActive:V,id:I[H].id,name:I[H].name,length:I[H].length,totalSummiteers:I[H].totalSummiteers,fatalityRate:I[H].fatalityRate,deathToll:I[H].deathToll}):null,mask:!1}),ve.jsx(T0,{theme:{token:{colorBgElevated:"rgba(4, 21, 39, 1)"}},children:ve.jsx(Qp,{tooltip:ve.jsx("div",{children:"Reset Camera"}),icon:ve.jsx(H7e,{style:{color:"#d8d8d8"}}),style:{position:"absolute",bottom:"40px",left:"40px",outline:"none"},onClick:tt})}),ve.jsx("div",{ref:t,style:{width:"100vw",height:"100vh"}})]})},G9=t=>ve.jsx(_7,{ghost:!0,style:{position:"absolute",top:`${t.position.top}px`,left:`${t.position.left}px`,border:"none",display:t.isActive?"block":"none",width:"0px",height:"0px"}});function d$e(){return ve.jsx(ve.Fragment,{children:ve.jsx("div",{style:{width:"100vw",height:"100vh"},children:ve.jsx(Cle,{children:ve.jsxs(tle,{children:[ve.jsx(n3,{path:"/earth",element:ve.jsx(fW,{})}),ve.jsx(n3,{path:"/",element:ve.jsx(fW,{})}),ve.jsx(n3,{path:"/mountH",element:ve.jsx(h$e,{})})]})})})})}fse.createRoot(document.getElementById("root")).render(ve.jsx(D.StrictMode,{children:ve.jsx(d$e,{})}))});export default p$e();
